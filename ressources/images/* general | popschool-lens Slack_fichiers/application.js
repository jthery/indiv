(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],Array(30).concat([function(e,t,r){"use strict";r.d(t,"d",function(){return l});r.d(t,"c",function(){return o});r.d(t,"b",function(){return s});r.d(t,"e",function(){return a});r.d(t,"a",function(){return i});r.d(t,"f",function(){return n});var a={CANADA:"Canada",UNITED_KINGDOM:"United Kingdom",UNITED_KINGDOM_UK:"United Kingdom (UK)",UNITED_STATES:"United States"};var n={COMPANY_NAME_IS_REQUIRED:"company_name_is_required",STREET_IS_REQUIRED:"street_is_required",CITY_IS_REQUIRED:"city_is_required",POSTAL_CODE_IS_REQUIRED:"postal_code_is_required",ZIP_CODE_IS_REQUIRED:"zip_code_is_required",REGION_IS_REQUIRED:"region_is_required",STATE_IS_REQUIRED:"state_is_required",COUNTRY_IS_REQUIRED:"country_is_required",VAT_ID_IS_REQUIRED:"vat_id_is_required",STREET_INVALID_CHARACTERS:"street_invalid_characters",CITY_INVALID_CHARACTERS:"city_invalid_characters",REGION_INVALID_CHARACTERS:"region_invalid_characters",STATE_INVALID_CHARACTERS:"state_invalid_characters",POSTAL_CODE_INVALID_CHARACTERS:"postal_code_invalid_characters",ZIP_CODE_INVALID_CHARACTERS:"zip_code_invalid_characters",VAT_ID_INVALID_CHARACTERS:"vat_id_invalid_characters",ABN_ID_INVALID_CHARACTERS:"abn_id_invalid_characters",US_ZIP_CODE_INVALID_FORMAT:"us_zip_code_invalid_format",CANADA_POSTAL_CODE_INVALID_FORMAT:"canada_zip_code_invalid_format",ZIP_CODE_INVALID_API_ERROR:"zipcode_invalid_api_error",VAT_ID_INVALID_API_ERROR:"vat_id_invalid_api_error",VAT_ID_INPUT_ERROR:"vat_input_error",VAT_ID_INVALID_FORMAT:"vat_id_invalid_format",API_ERROR:"api_error",ABN_ID_INVALID_LENGTH:"abn_id_invalid_length",ADDRESS_INPUT_ERROR:"address_input_error",ERROR_UPDATING_BILLING_ADDRESS:"error_updating_billing_address",NO_PERMS:"no_perms",INVALID_AUTH:"invalid_auth",DEFAULT_ERROR:"default_error"};var i={ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX:/^[a-zA-Z\xc0-\xff0-9-'-/.\s]+$/i,ALPHA_NUMERIC_WITH_DASH_REGEX:/^[A-Z0-9-\-\s]+$/i,ABN_ID_REGEX:/^(\d *?){11}$/i,US_POSTAL_CODE_FORMAT_REGEX:/(^\d{5}$)|(^\d{5}-{0,1}\d{4}$)/i,CANADA_POSTAL_CODE_FORMAT_REGEX:/^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[ABCEGHJKLMNPRSTVWXYZ]{1} *\d{1}[ABCEGHJKLMNPRSTVWXYZ]{1}\d{1}$/i};var s={COMPANY_NAME:"companyName",STREET:"street",SUITE:"suite",CITY:"city",REGION:"region",POSTAL_CODE:"postalCode",COUNTRY:"country",IS_BUSINESS_PURCHASE:"isBusinessPurchase",IS_VAT_AVAILABLE:"isVatIdAvailable",VAT_ID:"vatId",ABN_ID:"abnId"};var o={COMPANY_NAME:"",STREET:"",SUITE:"",CITY:"",REGION:"",POSTAL_CODE:"",COUNTRY:"",IS_BUSINESS_PURCHASE:true,IS_VAT_AVAILABLE:true,VAT_ID:"",ABN_ID:""};var l={COMPANY_NAME:83,STREET:83,SUITE:83,CITY:150,REGION:100,POSTAL_CODE:15,VAT_ID:15,ABN_ID:14}},,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"interfaceModes",function(){return h});r.d(t,"setTabOnly",function(){return f});r.d(t,"setInterfaceIsVisibleOnly",function(){return v});r.d(t,"setLoadingModule",function(){return b});r.d(t,"setPageForModule",function(){return g});r.d(t,"MODULE_ERROR_STATE",function(){return _});r.d(t,"setErrorForAllModules",function(){return k});r.d(t,"setErrorForModule",function(){return O});r.d(t,"setStateForModule",function(){return E});r.d(t,"setScrollPosition",function(){return w});r.d(t,"setDefaultTab",function(){return C});r.d(t,"resetScrollPosition",function(){return S});r.d(t,"setSessionTimeoutId",function(){return j});r.d(t,"setLastOpenMethod",function(){return I});r.d(t,"setInterfaceMode",function(){return T});r.d(t,"reset",function(){return N});r.d(t,"setFocusedViaTabKey",function(){return A});r.d(t,"toggleDebugInfoVisible",function(){return R});r.d(t,"getInterfaceMode",function(){return x});r.d(t,"getTab",function(){return D});r.d(t,"getVisible",function(){return F});r.d(t,"getModuleState",function(){return L});r.d(t,"getScrollPosition",function(){return B});r.d(t,"getSessionTimeoutId",function(){return U});r.d(t,"getLastOpenMethod",function(){return q});r.d(t,"wasFocusedViaTabKey",function(){return G});r.d(t,"getIsDebugInfoVisible",function(){return H});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=r(2);var u=r.n(c);var d=r(699);var p;var m=Object(l["a"])("Set the interfaceMode field (see setInterfaceMode thunk for general usage)");m.propTypes={interfaceMode:o["b"].oneOf(["EDIT","SEARCH_RESULTS"]).isRequired};var h={EDIT:"EDIT",SEARCH_RESULTS:"SEARCH_RESULTS"};var f=Object(l["a"])("Set the currently active tab field in Search (use setTab instead for components)");f.propTypes={tab:o["b"].string.isRequired};var v=Object(l["a"])("Set the field representing whether or not Search is visible");v.propTypes={visible:o["b"].bool.isRequired};var b=Object(l["a"])("Set the loading state of a specific module");b.propTypes={moduleType:o["b"].string.isRequired,loading:o["b"].bool.isRequired};var g=Object(l["a"])("Set the pagination state for a specific module");g.propTypes={moduleType:o["b"].string.isRequired,page:o["b"].number.isRequired};var _={None:"none",Timeout:"timeout",RenderErrorCaught:"renderErrorCaught",Unknown:"unknown",NoQuery:"noQuery"};var y=o["b"].oneOf(Object(c["values"])(_));var k=Object(l["a"])("Set the error state for all modules");k.propTypes={error:y.isRequired,loading:o["b"].bool.isRequired};var O=Object(l["a"])("Set the error state for a specific module");O.propTypes={moduleType:o["b"].string.isRequired,error:y.isRequired,loading:o["b"].bool.isRequired};var E=Object(l["a"])("Set the entire UI state for a specific module");E.propTypes={moduleType:o["b"].string.isRequired,moduleState:o["b"].shape({error:y.isRequired,loading:o["b"].bool.isRequired,page:o["b"].number.isRequired}).isRequired};var w=Object(l["a"])("Set the last scroll position for all of the search tabs");w.propTypes=o["b"].shape({all:o["b"].number,messages:o["b"].number,files:o["b"].number});var C=Object(l["a"])("Set the currently active tab field in Search to the default tab (use setTab instead for components)",{});C.propTypes=null;var S=Object(l["a"])("Reset the scroll position for all of the search tabs to zero");S.propTypes=null;var j=Object(l["a"])("Sets the ID associated with the search session clear timer");j.propTypes={sessionTimeoutId:o["b"].number};var I=Object(l["a"])("Sets the lastOpenMethod field, which tracks how the search interface was opened");I.propTypes={lastOpenMethod:o["b"].string};var T=Object(l["e"])("Set the interface mode",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.interfaceMode;var n=t();var i=n&&n.searchUi&&n.searchUi.interfaceMode===a;var s=n&&n.searchUi&&n.searchUi.visible;if(i)return;e(m({interfaceMode:a}));s&&a===h.EDIT&&e(Object(d["startQuerySession"])())});T.propTypes={interfaceMode:o["b"].oneOf(["EDIT","SEARCH_RESULTS"]).isRequired};var N=Object(l["a"])("Reset search ui redux state");N.propTypes={};var A=Object(l["a"])("Set whether or not the input was focused via the tab key");A.propTypes={wasFocusedViaTabKey:o["b"].bool.isRequired};var R=Object(l["a"])("Toggle debug display of solr info");R.propTypes=null;var M={interfaceMode:"EDIT",tab:"messages",visible:false,requestQuery:null,modules:{},scrollPosition:{all:0,messages:0,files:0},sessionTimeoutId:null,lastOpenMethod:null,focusedViaTabKey:false,isDebugInfoVisible:false};var P=Object(l["c"])((p={},n()(p,N,function(){return M}),n()(p,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.interfaceMode;return s()({},e,{interfaceMode:r})}),n()(p,f,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.tab;return s()({},e,{tab:r})}),n()(p,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.visible;return s()({},e,{visible:r})}),n()(p,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.moduleType,a=t.loading;return s()({},e,{modules:s()({},e.modules,n()({},r,s()({},e.modules[r],{loading:a})))})}),n()(p,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.moduleType,a=t.page;return s()({},e,{modules:s()({},e.modules,n()({},r,s()({},e.modules[r],{page:a})))})}),n()(p,k,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.error,a=t.loading;return s()({},e,{modules:Object(c["mapValues"])(e.modules,function(e){return s()({},e,{error:r,loading:a})})})}),n()(p,O,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.moduleType,a=t.error,i=t.loading;return s()({},e,{modules:s()({},e.modules,n()({},r,s()({},e.modules[r],{error:a,loading:i})))})}),n()(p,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.moduleType,a=t.moduleState;return s()({},e,{modules:s()({},e.modules,n()({},r,s()({},e.modules[r],a)))})}),n()(p,C,function(e){return s()({},e,{tab:M.tab})}),n()(p,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.scrollPosition;return s()({},e,{scrollPosition:r})}),n()(p,S,function(e){return s()({},e,{scrollPosition:M.scrollPosition})}),n()(p,j,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sessionTimeoutId;return s()({},e,{sessionTimeoutId:r})}),n()(p,I,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.lastOpenMethod;return s()({},e,{lastOpenMethod:r})}),n()(p,A,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wasFocusedViaTabKey;return s()({},e,{focusedViaTabKey:r})}),n()(p,R,function(e){return s()({},e,{isDebugInfoVisible:!e.isDebugInfoVisible})}),p),M);P.propTypes={interfaceMode:o["b"].string,tab:o["b"].string,visible:o["b"].bool,requestQuery:o["b"].any,modules:o["b"].objectOf(o["b"].shape({loading:o["b"].bool,page:o["b"].number,error:o["b"].string})),scrollPosition:o["b"].shape({all:o["b"].number,messages:o["b"].number,files:o["b"].number}),sessionTimeoutId:o["b"].number,lastOpenMethod:o["b"].string,focusedViaTabKey:o["b"].bool,isDebugInfoVisible:o["b"].bool};t["default"]=P;var x=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.interfaceMode});var D=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.tab});var F=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.visible});var L=Object(l["d"])(function(e,t){return e&&e.searchUi&&e.searchUi.modules&&e.searchUi.modules[t]});var B=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.scrollPosition});var U=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.sessionTimeoutId});var q=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.lastOpenMethod});var G=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.focusedViaTabKey});var H=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.isDebugInfoVisible})},,,,,,,,,,function(e,t,r){"use strict";r.d(t,"f",function(){return i});r.d(t,"e",function(){return s});r.d(t,"c",function(){return o});r.d(t,"d",function(){return l});r.d(t,"a",function(){return c});r.d(t,"b",function(){return u});var a=r(10);var n=new a["b"]("search");var i={HAS:"has",TYPE:"type",FROM:"from",TO:"to",IN:"in",BEFORE:"before",DURING:"during",ON:"on",AFTER:"after"};var s={has:n.t("has"),type:n.t("type"),from:n.t("from"),to:n.t("to"),in:n.t("in"),before:n.t("before"),during:n.t("during"),on:n.t("on"),after:n.t("after")};var o={STAR:"star",PIN:"pin",LINK:"link",REACTION:"reaction"};var l={star:n.t("star"),pin:n.t("pin"),link:n.t("link"),reaction:n.t("reaction")};var c={FILTER_IN:"filter-in",FILTER_FROM:"filter-from",FILTER_TO:"filter-to",FILTER_BEFORE:"filter-before",FILTER_DURING:"filter-during",FILTER_ON:"filter-on",FILTER_AFTER:"filter-after",FILTER_HAS:"filter-has",FILTER_TYPE:"filter-type",MEMBER:"member",STRING:"string",PHRASE:"phrase",API:"api-suggestion",UNKNOWN:"unknown"};var u={CHANNEL_NAVIGATION:"channel-navigation",EXPERT_CHANNEL_NAVIGATION:"expert-channel-navigation",FILE_NAVIGATION:"file-navigation",MPIM_NAVIGATION:"mpim-navigation",QUERY:"query",QUERY_HISTORY:"query-history",QUERY_USER:"query-user",TEAM_NAVIGATION:"team-navigation",UNKNOWN:"unknown",USER_NAVIGATION:"user-navigation",VIEW_NAVIGATION:"view-navigation"}},,,,function(e,t,r){"use strict";r.d(t,"b",function(){return s});var a=r(2);var n=r.n(a);window.TSM={interop:{}};function i(e,t){if(n.a.has(window.TSM,e))throw new Error("exportToLegacy: there is already something at "+e+"; we cannot overwrite it");if(!e||0!==e.indexOf("interop"))throw new Error("exportToLegacy: Name "+e+' must start with "interop".');n.a.set(window.TSM,e,t)}t["a"]=i;function s(e){return function(t){return TS.redux.dispatch(e(t)).then(function(e){return{ok:true,request_id:e.request_id,args:e.args,method:t.method,data:e}}).catch(function(e){throw e})}}},,function(e,t,r){"use strict";var a=r(57);var n=r(2);var i=r(17);var s=r(102);var o=r(23);var l=r(79);var c=r(13);var u=Object(c["c"])("TS.ms.msg_handlers",function(){return{}});var d=u;var p=r(11);var m=r(504);var h=r(107);var f=r(184);var v=r(185);var b=r(9);var g=r.n(b);var _=r(26);var y=r(19);var k=r(33);var O=r(203);var E=r(135);var w=r(311);var C=r(12);var S=r(160);var j=r(131);var I=r(36);var T=void 0;var N=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r,i,s){var o,l,c,u,d,m,h;return regeneratorRuntime.wrap(function e(f){while(1)switch(f.prev=f.next){case 0:if(!Object(p["isFeatureEnabled"])(i(),"feature_modern_files_info")){f.next=5;break}f.next=3;return Object(a["resolve"])(Object(k["a"])(r,R({fileIds:t,reason:s})));case 3:o=f.sent;return f.abrupt("return",Object(n["keyBy"])(o,"id"));case 5:if(!(1===t.length)){f.next=12;break}l=t[0];c=null;f.next=10;return Object(a["resolve"])(M(l,c,s));case 10:u=f.sent;return f.abrupt("return",g()({},l,u));case 12:f.next=14;return Object(a["resolve"])(P(t));case 14:d=f.sent;m=d.data;h={};m.files.forEach(function(e){h[e.id]=e});return f.abrupt("return",h);case 19:case"end":return f.stop()}},e,this)}));return function t(r,a,n,i){return e.apply(this,arguments)}}();var A=me;var R=w["e"];var M=j["f"];var P=j["h"];var x=y["getActiveChannel"];var D=y["getChannelById"];var F=j["i"];var L=_["hasMemberWithId"];var B=m["a"];var U=m["b"];var q=j["q"];var G=O["getOrFetchMemberCounts"];var H=100;var W=["star_added","pin_removed","pin_added"];var V=["channel_joined","group_joined","mpim_joined","dnd_updated","dnd_updated_user","manual_presence_change","member_left_channel","presence_change","status_change","subteam_created","subteam_updated","user_removed_from_team","user_change","channel_created","channel_deleted"];var z=function e(t,r){var a=ee(r)||{},n=a.objectWithFile;if(!n)return;n.file=t;r._file_attached=true};var Q=function e(t,r){if(!r)return true;if(U()&&B(r))return false;if(!Y(t))return false;return!F(r)};function K(e,t){var r=x(t());if(!r)return true;return!Object(C["isIm"])(r)&&!Object(C["isMpim"])(r)&&e!==r.id}function Y(e){var t=e.type;if(W.indexOf(t)>=0)return false;return true}function J(e){var t=e.type;return V.indexOf(t)>=0}var Z=function e(t){var r=[];A(function(e){if(Y(e))return;var t=ee(e)||{},a=t.fileId;a&&r.indexOf(a)<0&&!Q(e,a)&&r.push(a)},t);return r};var X=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r,n,i){var s;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return Object(a["resolve"])(N(t,r,n,i));case 2:s=o.sent;A(function(e){if(Y(e))return;var t=ee(e)||{},r=t.fileId;r&&s[r]&&!Q(e,r)&&z(s[r],e)},r);case 4:case"end":return o.stop()}},e,T)}));return function t(r,a,n,i){return e.apply(this,arguments)}}();var $=function e(t,r){var a=ee(t)||{},n=a.objectWithFile,i=a.fileId;n&&n.file&&q(n.file);if(!i)return Promise.resolve();var s=r();if(Y(t))return Promise.resolve();if(t._file_attached)return Promise.resolve();if(Q(t,i)){t._should_dispatch=false;return Promise.resolve()}var l=Object(o["getTeamId"])(s);var c=Z(l,r).slice(0,H);if(!c.length)return Promise.resolve();var u=t.subtype?"preprocess-rtm-message/ensureFilesInMessageArePresent for type: "+t.type+" and subtype: "+t.subtype:"preprocess-rtm-message/ensureFilesInMessageArePresent for type: "+t.type;return X(c,l,r,u).catch(function(){t._should_dispatch=false})};function ee(e){if(e.file&&e.file.id)return{objectWithFile:e,fileId:e.file.id};if(e.file_id)return{objectWithFile:e,fileId:e.file_id};if(e.item){if(e.item.file&&e.item.file.id)return{objectWithFile:e.item,fileId:e.item.file.id};if(e.item.file_id)return{objectWithFile:e.item,fileId:e.item.file_id}}return null}function te(e,t,r){if("message"!==e.type||!e.text)return Promise.resolve();var a=I["atHereRegExp"].test(e.text)||I["atChannelRegExp"].test(e.text)||I["atEveryoneRegExp"].test(e.text)||I["atGroupRegExp"].test(e.text);if(!a)return Promise.resolve();var i=false;var s=D(r(),e.channel,i);if(!s)return Promise.resolve();var o=t(G({channelId:s.id}));return o.promise?o.promise.catch(n["noop"]):Promise.resolve()}var re=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r){var i,s,l,c,u;return regeneratorRuntime.wrap(function e(d){while(1)switch(d.prev=d.next){case 0:if(!(false===t._should_dispatch)){d.next=2;break}return d.abrupt("return");case 2:i=r();s=function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return k["a"].apply(void 0,[Object(o["getTeamId"])(i)].concat(r))};l=t.subtype?"preprocess-rtm-message/ensureModelObsInMessageArePresent for type: "+t.type+" and subtype: "+t.subtype:"preprocess-rtm-message/ensureModelObsInMessageArePresent for type: "+t.type;c=Object(n["isString"])(t.channel)&&Object(S["a"])(t.channel)&&!Object(y["hasChannelWithId"])(i,t.channel);u=c?s(Object(E["c"])({ids:[t.channel],reason:l})):Promise.resolve();d.next=9;return Object(a["resolve"])(Promise.all([u,te(t,s,r)]).catch(n["noop"]));case 9:case"end":return d.stop()}},e,T)}));return function t(r,a){return e.apply(this,arguments)}}();var ae=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:if(!J(t)){i.next=2;break}return i.abrupt("return");case 2:n=r();if(!("user_typing"===t.type&&!L(n,t.user)&&K(t.channel,r))){i.next=6;break}t._should_dispatch=false;return i.abrupt("return");case 6:i.prev=6;i.next=9;return Object(a["resolve"])(Promise.all([$(t,r),re(t,r)]));case 9:i.next=13;break;case 11:i.prev=11;i.t0=i["catch"](6);case 13:case"end":return i.stop()}},e,T,[[6,11]])}));return function t(r,a){return e.apply(this,arguments)}}();var ne=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return Object(a["resolve"])(ae(t,r));case 2:n=false!==t._should_dispatch;delete t._should_dispatch;return i.abrupt("return",n);case 5:case"end":return i.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();var ie={FETCH_MISSING_FILE_TYPES:W,NO_FETCH_MISSING_OBJECT_TYPES:V,canIgnoreUserTypingMessage:K,getFileInfoFromMessage:ee,maybeEnsureMemberCount:te,canSkipObjectFetchForMessage:J};Object.defineProperty(ie,"applyFunctionToPendingMessagesForTeam",{get:function e(){return A},set:function e(t){A=t}});Object.defineProperty(ie,"attachFileObjectToMessage",{get:function e(){return z},set:function e(t){z=t}});Object.defineProperty(ie,"canIgnoreFileMessage",{get:function e(){return Q},set:function e(t){Q=t}});Object.defineProperty(ie,"ensureDataIsPresent",{get:function e(){return ae},set:function e(t){ae=t}});Object.defineProperty(ie,"ensureFilesInMessageArePresent",{get:function e(){return $},set:function e(t){$=t}});Object.defineProperty(ie,"ensureModelObsInMessageArePresent",{get:function e(){return re},set:function e(t){re=t}});Object.defineProperty(ie,"fetchAndAttachFilesForMessagesInQueue",{get:function e(){return X},set:function e(t){X=t}});Object.defineProperty(ie,"fetchFilesById",{get:function e(){return R},set:function e(t){R=t}});Object.defineProperty(ie,"fetchFileInfoRaw",{get:function e(){return M},set:function e(t){M=t}});Object.defineProperty(ie,"fetchMultipleFilesRaw",{get:function e(){return P},set:function e(t){P=t}});Object.defineProperty(ie,"getActiveChannel",{get:function e(){return x},set:function e(t){x=t}});Object.defineProperty(ie,"getFileById",{get:function e(){return F},set:function e(t){F=t}});Object.defineProperty(ie,"getFileIdsToFetchFromQueue",{get:function e(){return Z},set:function e(t){Z=t}});Object.defineProperty(ie,"hasMemberWithId",{get:function e(){return L},set:function e(t){L=t}});Object.defineProperty(ie,"getChannelById",{get:function e(){return D},set:function e(t){D=t}});Object.defineProperty(ie,"isFileRelevantToPost",{get:function e(){return B},set:function e(t){B=t}});Object.defineProperty(ie,"isOnPostPage",{get:function e(){return U},set:function e(t){U=t}});Object.defineProperty(ie,"maybePruneChannels",{get:function e(){return q},set:function e(t){q=t}});Object.defineProperty(ie,"getOrFetchMemberCounts",{get:function e(){return G},set:function e(t){G=t}});r.d(t,"a",function(){return de});r.d(t,"b",function(){return pe});r.d(t,"c",function(){return me});r.d(t,"d",function(){return he});r.d(t,"e",function(){return fe});r.d(t,"f",function(){return _e});r.d(t,"g",function(){return ye});var se=void 0;var oe=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r,n){var s,o,c,u,d,p;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:s={};o=3e4;c=Object(l["promiseToHaveOpenWebSocket"])(n());u=c.then(function(){return Promise.delay(o,s)});d=c.then(function(){return ne(t,n)});r.next=7;return Object(a["resolve"])(Promise.race([d,u]));case 7:p=r.sent;if(!(p===s)){r.next=11;break}Object(i["a"])({getState:n}).warn("Preprocessing message of type "+t.type+" took too long; continue to process queue");return r.abrupt("return",true);case 11:return r.abrupt("return",p);case 12:case"end":return r.stop()}},e,this)}));return function t(r,a,n){return e.apply(this,arguments)}}();var le={};var ce={};var ue={};function de(e,t){if(ce[e]){var r=Object(f["a"])()||Object(v["a"])();var a=r?"addRtmErrorHandler: duplicate call to add a handler for "+e+"; this is probably caused by using inject-loader/import mocking. If so, `import { test as rtmTest } from '@slack/infra/rtm'; mockProperty(rtmTest, 'handlers', {});` to work around it.":"addRtmErrorHandler: a handler is already registered for "+e;throw new Error(a)}ce[e]=t}function pe(e,t){if(le[e]){var r=Object(f["a"])()||Object(v["a"])();var a=r?"addRtmHandler: duplicate call to add a handler for "+e+"; this is probably caused by using inject-loader/import mocking. If so, `import { test as rtmTest } from '@slack/infra/rtm'; mockProperty(rtmTest, 'handlers', {});` to work around it.":"addRtmHandler: a handler is already registered for "+e;throw new Error(a)}le[e]=t}function me(e,t){if(!ue[t])return;ue[t].forEach(function(t){return e(t)})}function he(){return le}function fe(){return ue}var ve=function e(t,r,a){if(ke(a))return;var n=t.type;if(le[n])try{le[n](t,r,a)}catch(e){if(Object(h["a"])()){var i=a();var s=Object(o["getTeamId"])(i);window.slackDebug.setLastError&&window.slackDebug.setLastError(s,new Error("Error processing "+n+": "+e.message))}throw e}var l=d();l[t.type]&&l[t.type](t)};var be=["T024BE7LD","T5J7PJ5PT","T5JRYUBHS","T5MTH4ARY","T5KK65FCP","T34263EUF","T5J4Q04QG","T5J7PM517","T5JN7LJ7M","T5PMP2708","T1ZPW1JUE","T57U8DUG7","T20M0MB9P"];var ge=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r,l){var c,u,d,p;return regeneratorRuntime.wrap(function e(m){while(1)switch(m.prev=m.next){case 0:if(!(!t||!t.length)){m.next=2;break}return m.abrupt("return",Promise.resolve());case 2:c=t[0];m.prev=3;m.next=6;return Object(a["resolve"])(oe(c,r,l));case 6:u=m.sent;u&&ve(c,r,l);m.next=16;break;case 10:m.prev=10;m.t0=m["catch"](3);Object(i["a"])({getState:l}).error("Error while processing "+c.type+" event",m.t0);d=l();p=Object(o["getTeamId"])(d);if(Object(n["includes"])(be,p)){console.error(m.t0);Object(s["a"])(m.t0,"TINYSPECK: Error while processing "+c.type+" event")}case 16:m.prev=16;t.shift();return m.finish(16);case 19:return m.abrupt("return",t.length?ge(t,r,l):Promise.resolve());case 20:case"end":return m.stop()}},e,se,[[3,10,16,19]])}));return function t(r,a,n){return e.apply(this,arguments)}}();function _e(e,t,r){var a=r();var n=Object(o["getTeamId"])(a);ue[n]=ue[n]||[];ue[n].push(e);1===ue[n].length&&ge(ue[n],t,r)}function ye(e,t,r){if(!ce[e]){Object(s["a"])(new Error("Unexpected start error: "+e),JSON.stringify({error:e,host:window.location.hostname,path:window.location.pathname}),"flannel_start_error");return}ce[e](e,t,r)}function ke(e){var t=e();return Object(p["isWebApp"])(t)&&!Object(p["processRtmStream"])(t)&&!Object(m["b"])()}var Oe={shouldIgnoreRtmStream:ke};Object.defineProperty(Oe,"dispatchMessageToHandlers",{get:function e(){return ve},set:function e(t){ve=t}});Object.defineProperty(Oe,"errorHandlers",{get:function e(){return ce},set:function e(t){ce=t}});Object.defineProperty(Oe,"handleNextMessageFromQueue",{get:function e(){return ge},set:function e(t){ge=t}});Object.defineProperty(Oe,"handlers",{get:function e(){return le},set:function e(t){le=t}});Object.defineProperty(Oe,"pendingMessages",{get:function e(){return ue},set:function e(t){ue=t}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(2);var c=r(4);var u=r(180);var d=r(37);var p=r(268);var m=r(624);var h=r(314);var f=r(736);var v=r(868);function b(e,t){var r=Object(l["trim"])(t);r=Object(v["a"])(r,{shouldRenderEmojiAsText:true});return Object(f["b"])(e,r)}var g=r(280);var _=r(186);var y=r(17);var k=r(699);r.d(t,"requestPropType",function(){return j});r.d(t,"responsePropType",function(){return N});r.d(t,"setEditableRequestQueryInternal",function(){return A});r.d(t,"setEditableRequestQueryFilterOnly",function(){return R});r.d(t,"getEditableRequestQuery",function(){return M});r.d(t,"getRequestQuery",function(){return P});r.d(t,"clearResponse",function(){return x});r.d(t,"setRequestFromEditableRequest",function(){return F});r.d(t,"getEditableRequestQueryFilter",function(){return L});r.d(t,"setEditableRequestChannelObjects",function(){return B});r.d(t,"resetEditableRequest",function(){return U});r.d(t,"setResponse",function(){return q});r.d(t,"appendResponse",function(){return G});r.d(t,"setFilterSuggestions",function(){return H});r.d(t,"clearFilterSuggestions",function(){return W});r.d(t,"setLastFetchAllRequestId",function(){return V});r.d(t,"setEditableRequestQueryThenRequest",function(){return Q});r.d(t,"toggleEditableRequestQueryFilterFromItem",function(){return K});r.d(t,"toggleEditableRequestQueryFilterInItem",function(){return Y});r.d(t,"setEditableRequestQueryFilterBefore",function(){return J});r.d(t,"setEditableRequestQueryFilterAfter",function(){return Z});r.d(t,"setEditableRequestQueryFilterFileType",function(){return X});r.d(t,"reset",function(){return $});r.d(t,"resetSearchAfterUnknownUIError",function(){return ee});r.d(t,"getEditableRequest",function(){return ie});r.d(t,"getEditableRequestQueryFilterHistory",function(){return se});r.d(t,"getEditableRequestQueryFilterFrom",function(){return oe});r.d(t,"getEditableRequestQueryFilterIn",function(){return le});r.d(t,"getEditableRequestQueryFilterAfter",function(){return ce});r.d(t,"getEditableRequestQueryFilterBefore",function(){return ue});r.d(t,"getEditableRequestChannelObjects",function(){return de});r.d(t,"getEditableRequestQueryFilterFileType",function(){return pe});r.d(t,"getRequest",function(){return me});r.d(t,"getPreviousRequest",function(){return he});r.d(t,"getPreviousRequestQuery",function(){return fe});r.d(t,"getResponse",function(){return ve});r.d(t,"getResponseModule",function(){return be});r.d(t,"getResponseQuery",function(){return ge});r.d(t,"getLastFetchAllRequestId",function(){return _e});r.d(t,"getFilterSuggestions",function(){return ye});r.d(t,"getRequestIdForModule",function(){return ke});var O;var E="IMPROVED_SEARCH";function w(e,t){var r=Object(c["a"])(e);r.propTypes=t;return r}var C=o["b"].shape({from:o["b"].arrayOf(o["b"].string).isRequired,in:o["b"].arrayOf(o["b"].string).isRequired,after:o["b"].string,before:o["b"].string});var S={query:o["b"].string.isRequired,queryFilter:C.isRequired,channelObjects:o["b"].object,requestInstanceId:o["b"].string};var j=o["b"].shape(S);var I=o["b"].shape({pagination:o["b"].shape({page:o["b"].number.isRequired,first:o["b"].number,last:o["b"].number,page_count:o["b"].number,per_page:o["b"].number,total_count:o["b"].number}).isRequired,items:o["b"].arrayOf(o["b"].shape({channel:o["b"].shape({id:o["b"].string}),iid:o["b"].string,messages:o["b"].arrayOf(o["b"].shape({ts:o["b"].string,text:o["b"].string,permalink:o["b"].string,user:o["b"].string}))})).isRequired,filters:o["b"].oneOfType([o["b"].shape({from:o["b"].arrayOf(o["b"].string),in:o["b"].arrayOf(o["b"].string),after:o["b"].string,before:o["b"].string}),o["b"].array]),query:o["b"].string,request_id:o["b"].string});var T={query:o["b"].string.isRequired,module:o["b"].string.isRequired,result:I.isRequired};var N=o["b"].shape(T);var A=w("Set the query string for the editable request query",{query:o["b"].string.isRequired});var R=w("Set the query filter object on the editable request",{queryFilter:C.isRequired});var M=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.query});var P=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.request&&e.searchResults.request.query});var x=w("Remove results modules for the search",{});var D=w("Promote the editable request to become the request",{});var F=Object(c["e"])("Set a request from the editable request",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.fetchSuggestions,n=void 0===a||a;e(D());var i=P(t());Object(y["a"])({getState:t}).info(E,"Starting new search");e(x());var s=e(Object(g["a"])({query:i,fetchSuggestions:n}));e(Object(d["setInterfaceMode"])({interfaceMode:d["interfaceModes"].SEARCH_RESULTS}));i&&e(Object(g["i"])({query:i}));return s});F.propTypes={fetchSuggestions:o["b"].bool};var L=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter});var B=w("Set the map of channel objects we need in order to render the channel filter.",{channels:o["b"].object.isRequired});var U=w("Reset the editable request",{});var q=w("Set the search results",T);var G=w("Adds to the search results",{module:o["b"].string.isRequired,result:I.isRequired});var H=Object(c["a"])("Set the suggestions for the current search query");H.propTypes={suggestions:o["b"].shape({from:o["b"].arrayOf(o["b"].string),in:o["b"].arrayOf(o["b"].string)})};var W=Object(c["a"])("Clear the suggestions for the current search query");W.propTypes=null;var V=Object(c["a"])("Set the request ID for the current fetchAllSearchResults call");V.propTypes={id:o["b"].string.isRequired};var z=Object(c["e"])("Set the query filter object on the editable request and update the query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.queryFilter;var n=t();var i=Object(m["c"])(n,M(n),a);var s=Object(l["trim"])(i.toTextyString());var o=Object(l["trim"])(i.toString());e(Object(k["startQuerySession"])());e(A({query:o}));e(Object(u["setSearchInputBoxDisplayQuery"])({displayQuery:s}));e(R({queryFilter:a}));return e(F({fetchSuggestions:false}))});z.propTypes={queryFilter:C};var Q=Object(c["e"])("Set the query in the request which is being edited",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.query;var n=t();e(x());e(Object(d["resetScrollPosition"])());e(Object(d["setLoadingModule"])({moduleType:_["a"].relevantMessages,loading:true}));e(Object(d["setLoadingModule"])({moduleType:_["a"].recentMessages,loading:true}));e(Object(d["setLoadingModule"])({moduleType:"files",loading:true}));var i=Object(m["b"])(n,a);e(R({queryFilter:i}));return b(n,a).then(function(t){e(A({query:t}));return e(F({fetchSuggestions:true}))})});Q.propTypes={query:o["b"].string.isRequired};var K=Object(c["e"])("Update a `from` filters for the search",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;var n=t();var i=L(n);var o=i&&i.from||[];Object(l["includes"])(o,a)?o=o.filter(function(e){return e!==a}):o.push(a);return e(z({queryFilter:s()({},i,{from:o})}))});K.propTypes={memberId:o["b"].string.isRequired};var Y=Object(c["e"])("Update a `in` filters for the search",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;var n=t();var i=L(n);var o=i&&i.in||[];Object(l["includes"])(o,a)?o=o.filter(function(e){return e!==a}):o.push(a);return e(z({queryFilter:s()({},i,{in:o})}))});Y.propTypes={channelId:o["b"].string.isRequired};var J=Object(c["e"])("Set the (possibly undefined) before filter date string on the editable request",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.dateString;return e(z({queryFilter:s()({},L(t()),{before:a})}))});J.propTypes={dateString:o["b"].string};var Z=Object(c["e"])("Set the (possibly undefined) before filter date string on the editable request",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.dateString;return e(z({queryFilter:s()({},L(t()),{after:a})}))});Z.propTypes={dateString:o["b"].string};var X=Object(c["e"])("Update the file type for the search",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.fileType;return e(z({queryFilter:s()({},L(t()),{fileType:a})}))});X.propTypes={fileType:o["b"].string.isRequired};var $=Object(c["a"])("Reset search result redux state");$.propTypes={};var ee=Object(c["e"])("Reset all search related redux and displays an error message after an error is caught in the view",function(e){e(Object(p["reset"])());e(Object(u["reset"])());e($());e(Object(d["reset"])());e(Object(d["setErrorForAllModules"])({error:d["MODULE_ERROR_STATE"].RenderErrorCaught,loading:false}));e(Object(d["setInterfaceIsVisibleOnly"])({visible:true}));e(Object(d["setInterfaceMode"])({interfaceMode:d["interfaceModes"].SEARCH_RESULTS}))});ee.propTypes={};var te={previousRequest:void 0,request:void 0,editableRequest:{query:"",queryFilter:{from:[],in:[],after:void 0,before:void 0},queryFilterHistory:{from:[],in:[],fileType:void 0},channelObjects:{}},suggestions:{from:[],in:[]},response:void 0,lastFetchAllRequestId:""};var re=Object(c["c"])((O={},n()(O,$,function(){return te}),n()(O,A,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.query;return s()({},e,{editableRequest:s()({},e.editableRequest,{query:r})})}),n()(O,R,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.queryFilter;return s()({},e,{editableRequest:s()({},e.editableRequest,{queryFilter:r,queryFilterHistory:s()({},e.editableRequest.queryFilterHistory,{from:Object(l["uniq"])(Object(l["concat"])(e.editableRequest.queryFilterHistory.from||[],r.from||[])),in:Object(l["uniq"])(Object(l["concat"])(e.editableRequest.queryFilterHistory.in||[],r.in||[]))})}),suggestions:s()({},e.suggestions,{from:Object(l["uniq"])(Object(l["concat"])(e.suggestions&&e.suggestions.from||[],r.from||[])),in:Object(l["uniq"])(Object(l["concat"])(e.suggestions&&e.suggestions.in||[],r.in||[]))})})}),n()(O,B,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channels;return s()({},e,{editableRequest:s()({},e.editableRequest,{channelObjects:r})})}),n()(O,U,function(e){return s()({},e,{editableRequest:s()({},te.editableRequest,{queryFilter:{from:[],in:[],before:void 0,after:void 0,fileType:void 0},queryFilterHistory:{from:[],in:[]}}),suggestions:{from:[],in:[]}})}),n()(O,D,function(e){return s()({},e,{previousRequest:e&&e.request,request:s()({},e.editableRequest,{requestInstanceId:Object(h["a"])()})})}),n()(O,q,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.query,a=t.module,i=t.result;return s()({},e,{response:s()({},e.response||{},{query:r,results:s()({},e.response&&e.response.results||{},n()({},a,s()({},i,{items:n()({},i.pagination.page,i.items),requestIds:{1:i.request_id}}))),filters:i.filters?i.filters:{}})})}),n()(O,G,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.module,a=t.result,i=t.page;return s()({},e,{response:s()({},e.response||{},{results:s()({},e.response&&e.response.results||{},n()({},r,s()({},e.response&&e.response.results&&e.response.results[r]||{},{items:s()({},e.response.results[r].items,n()({},a.pagination.page,a.items)),pagination:ne(e.response.results[r].pagination,a.pagination),requestIds:s()({},e.response.results[r].requestIds,n()({},i,a.request_id))})))})})}),n()(O,x,function(e){return s()({},e,{response:te.response})}),n()(O,H,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.suggestions;return s()({},e,{suggestions:r})}),n()(O,W,function(e){return s()({},e,{suggestions:te.suggestions})}),n()(O,V,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return s()({},e,{lastFetchAllRequestId:r})}),O),te);re.propTypes={previousRequest:o["b"].object,request:o["b"].object,editableRequest:o["b"].shape({query:o["b"].string,queryFilter:o["b"].shape({from:o["b"].array,in:o["b"].array,after:o["b"].string,before:o["b"].string}),queryFilterHistory:o["b"].shape({from:o["b"].array,in:o["b"].array}),channelObjects:o["b"].object}),suggestions:o["b"].shape({from:o["b"].array,in:o["b"].array}),response:o["b"].object,lastFetchAllRequestId:o["b"].string};var ae=t["default"]=re;function ne(e,t){return s()({},e,{last:t.last,total_count:t.total_count})}var ie=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest});var se=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilterHistory});var oe=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.from});var le=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.in});var ce=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.after});var ue=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.before});var de=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.channelObjects});var pe=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.fileType});var me=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.request});var he=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.previousRequest});var fe=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.previousRequest&&e.searchResults.previousRequest.query});var ve=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.response});var be=Object(c["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.module;return e&&e.searchResults&&e.searchResults.response&&e.searchResults.response.results&&e.searchResults.response.results[r]});var ge=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.response&&e.searchResults.response.query});var _e=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.lastFetchAllRequestId});var ye=Object(c["d"])(function(e){return e&&e.searchResults&&e.searchResults.suggestions});var ke=Object(c["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.module,a=t.page,n=void 0===a?1:a;return e&&e.searchResults&&e.searchResults.response&&e.searchResults.response.results&&e.searchResults.response.results[r]&&e.searchResults.response.results[r].requestIds&&e.searchResults.response.results[r].requestIds[n]})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});var a=r(13);var n=Object(a["c"])("TS.enterprise.actions.dispatch",function(){return null});var i=Object(a["c"])("TS.enterprise.actions.actions",function(){return null})},,function(e,t,r){"use strict";r.r(t);var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=r(200);var u=r(172);var d=r(25);var p=r(22);var m=Object(p["a"])("Fetch Available Plans",function(e,t,r){return e(Object(d["a"])({method:"retail.plans",args:r})).then(function(e){return Object(u["f"])(e.plans)})});m.propTypes=o["b"].object;var h=Object(p["a"])("Fetch Available Plans",function(e,t,r){var a=r.productId,n=r.country,i=r.postalCode,o=r.street,l=r.isBusinessPurchase,c=r.isInvoice,p=r.numInvoiceSeats,m=r.isFinalReview;var h={product_id:a,is_final_review:m};m||(h=s()({},h,{country:n,street1:o,zip:i,is_business:l}));c&&(h=s()({},h,{requested_invoice_seats:p}));return e(Object(d["a"])({method:"retail.cost",args:h})).then(function(e){return Object(u["e"])(e.plan_cost)})});h.propTypes={productId:o["b"].string,country:o["b"].string,postalCode:o["b"].string,isBusinessPurchase:o["b"].bool,isInvoice:o["b"].bool,numInvoiceSeats:o["b"].number,isFinalReview:o["b"].bool};var f=r(339);var v={EXPIRED_COST_REQUEST:"EXPIRED_COST_REQUEST"};var b=Object(l["a"])("Switch currently active plan");b.propTypes=o["b"].object;var g=Object(l["a"])("Successfully fetched available plans");g.propTypes=o["b"].object;var _=Object(l["a"])("Successfully fetched cost for current plan");_.propTypes=o["b"].object;var y=Object(l["a"])("Received an API error");y.propTypes=null;var k=Object(l["a"])("Plans and cost data loaded");k.propTypes=null;var O=Object(l["a"])("Set Plan Level");O.propTypes=o["b"].string;var E=Object(l["a"])("Set Payment Method");E.propTypes=o["b"].string;var w=Object(l["a"])("Update Is Plans Data Loading");w.propTypes=o["b"].object;var C=Object(l["a"])("Update Is Cost Data Loading");C.propTypes=o["b"].object;var S=0;function j(e){return function(t,r){return new Promise(function(a,n){var i=r();var o=Object(c["p"])(i);var l=Object(f["b"])(i);var u=Object(c["g"])(i);t(C({isCostDataLoading:true}));var d=parseInt(Object(f["m"])(i).numberOfUsers,10)||0;var p=e.isFinalReview||false;var m=Object(c["x"])(i,o,l,u,d);var b=S+1;S=b;if(m&&!p)window.setTimeout(function(){if(S===b){var e=Object(c["A"])(i,o,l,u,d);t(_({activePlanCost:e,companyAddress:l,isInvoice:u,numInvoiceSeats:d}));t(C({isCostDataLoading:false}));a()}else n(new Error(v.EXPIRED_COST_REQUEST))},250);else{var g=l.country,k=l.street,O=l.postalCode,E=l.isBusinessPurchase;var w={productId:o,country:g,postalCode:O,street:k,isBusinessPurchase:E,isInvoice:u,numInvoiceSeats:d,isFinalReview:p};t(h(w)).then(function(e){if(S===b){t(C({isCostDataLoading:false}));t(_(s()({},e,{companyAddress:l,isInvoice:u,numInvoiceSeats:d})));a()}else n(new Error(v.EXPIRED_COST_REQUEST))}).catch(function(){return t(y())})}})}}function I(e){return function(t,r){return new Promise(function(a){t(w({isPlansDataLoading:true}));var n=Object(f["c"])(r());t(m({country:n})).then(function(r){Promise.all([t(g(r)),t(j(e)),t(w({isPlansDataLoading:false}))]).then(function(){t(k());a()}).catch(function(e){e.message!==v.EXPIRED_COST_REQUEST&&t(y())})}).catch(function(){return t(y())})})}}I.propTypes={country:o["b"].string};var T=function e(t,r,a){if(r===a)return Promise.resolve();return t(j({isFinalReview:false}))};var N=Object(l["e"])("Async thunk to change active plan initiated",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=Object(c["p"])(t());e(b(r));var n=Object(c["p"])(t());return T(e,a,n)});N.propTypes={term:o["b"].string,currency:o["b"].string};function A(e){return function(t,r){var a=Object(c["p"])(r());t(O(e));var n=Object(c["p"])(r());return T(t,a,n)}}function R(e){return function(t,r){var a=Object(c["p"])(r());t(E(e));var n=Object(c["p"])(r());T(t,a,n)}}var M;var P={activeCurrency:null,activeTerm:u["c"].yearly,activePlanLevel:null,activePaymentMethod:u["a"].CREDIT_CARD,apiError:false,availablePlans:{},activePlanCost:{},cachedCost:{},isPlansAndCostDataLoaded:false,isPlansDataLoading:false,isCostDataLoading:false};var x=Object(l["c"])((M={},n()(M,b,function(e,t){if(t.currency){var r=Object(c["b"])(e).includes(t.currency);if(!r)return e}else if(t.term&&!t.term===u["c"].monthly&&!t.term===u["c"].monthly)return e;var a=t.currency?t.currency:e.activeCurrency;var n=t.term?t.term:e.activeTerm;return s()({},e,{activeCurrency:a,activeTerm:n})}),n()(M,g,function(e,t){var r=Object.keys(t.availablePlans)[0];var a=s()({},e,{activeCurrency:r,availablePlans:s()({},t.availablePlans),apiError:false});return a}),n()(M,_,function(e,t){var r=t.activePlanCost,a=t.companyAddress,i=t.isInvoice,o=t.numInvoiceSeats;var l=Object(u["d"])(r.id,a,i,o);var c=s()({},e,{activePlanCost:s()({},e.activePlanCost,t.activePlanCost),cachedCost:s()({},e.cachedCost,n()({},l,t.activePlanCost)),apiError:false});return c}),n()(M,y,function(e){var t=s()({},e,{apiError:true});return t}),n()(M,k,function(e){var t=s()({},e,{isPlansAndCostDataLoaded:true});return t}),n()(M,O,function(e,t){var r=s()({},e,{activePlanLevel:t});return r}),n()(M,E,function(e,t){var r=s()({},e,{activePaymentMethod:t});return r}),n()(M,w,function(e,t){var r=s()({},e,{isPlansDataLoading:t.isPlansDataLoading});return r}),n()(M,C,function(e,t){var r=s()({},e,{isCostDataLoading:t.isCostDataLoading});return r}),M),P);x.propTypes={activeCurrency:o["b"].string,activeTerm:o["b"].string,activePlanLevel:o["b"].string,activePaymentMethod:o["b"].string,apiError:o["b"].bool,availablePlans:o["b"].object,activePlanCost:o["b"].object,cachedCost:o["b"].object,isPlansAndCostDataLoaded:o["b"].bool,isPlansDataLoading:o["b"].bool,isCostDataLoading:o["b"].bool};var D=x;r.d(t,"getActivePlan",function(){return c["a"]});r.d(t,"getAvailableCurrencies",function(){return c["b"]});r.d(t,"selectAvailableCurrencies",function(){return c["q"]});r.d(t,"selectActiveProductId",function(){return c["p"]});r.d(t,"selectActivePlanCostPerTerm",function(){return c["j"]});r.d(t,"selectActivePlanLevel",function(){return c["l"]});r.d(t,"selectActivePlanTerm",function(){return c["o"]});r.d(t,"selectActivePlanPaymentMethod",function(){return c["n"]});r.d(t,"selectActivePlanIsYearly",function(){return c["k"]});r.d(t,"selectActivePlanMonthsCount",function(){return c["m"]});r.d(t,"selectActiveCurrency",function(){return c["i"]});r.d(t,"getTermPlanForActiveCurrency",function(){return c["d"]});r.d(t,"selectCostPerTermForYearlyPlan",function(){return c["t"]});r.d(t,"selectCostPerTermForMonthlyPlan",function(){return c["s"]});r.d(t,"selectIsPlansAndCostDataLoaded",function(){return c["y"]});r.d(t,"selectIsPlansOrCostDataLoading",function(){return c["z"]});r.d(t,"selectBillableActiveUsers",function(){return c["r"]});r.d(t,"selectPaidSeats",function(){return c["D"]});r.d(t,"isZeroRealActiveUsers",function(){return c["h"]});r.d(t,"selectInactiveUsers",function(){return c["w"]});r.d(t,"selectTotalUsers",function(){return c["K"]});r.d(t,"selectSubtotal",function(){return c["E"]});r.d(t,"selectTax",function(){return c["F"]});r.d(t,"selectCreditsApplied",function(){return c["u"]});r.d(t,"selectCurrentTeamCredits",function(){return c["v"]});r.d(t,"selectTeamCreditsRemaining",function(){return c["G"]});r.d(t,"selectTotalRecurring",function(){return c["I"]});r.d(t,"selectTotalDueToday",function(){return c["H"]});r.d(t,"selectTotalRecurringTax",function(){return c["J"]});r.d(t,"getQuotedTermEndDate",function(){return c["c"]});r.d(t,"selectIsCostAvailableForPlan",function(){return c["x"]});r.d(t,"selectLocalCostForCurrentPlan",function(){return c["A"]});r.d(t,"selectMinInvoiceSeats",function(){return c["C"]});r.d(t,"selectMaxInvoiceSeats",function(){return c["B"]});r.d(t,"isAPIError",function(){return c["e"]});r.d(t,"isCostValid",function(){return c["f"]});r.d(t,"isInvoiceActivePaymentMethod",function(){return c["g"]});r.d(t,"switchPlans",function(){return b});r.d(t,"plansFetchSuccess",function(){return g});r.d(t,"costFetchSuccess",function(){return _});r.d(t,"setErrorState",function(){return y});r.d(t,"plansAndCostDataLoaded",function(){return k});r.d(t,"setPlanLevel",function(){return O});r.d(t,"setPaymentMethod",function(){return E});r.d(t,"updateIsPlansDataLoading",function(){return w});r.d(t,"updateIsCostDataLoading",function(){return C});r.d(t,"fetchCostForCurrentPlan",function(){return j});r.d(t,"fetchPlansAndCostData",function(){return I});r.d(t,"changeActivePlan",function(){return N});r.d(t,"updatePlanLevel",function(){return A});r.d(t,"updateActivePlanPaymentMethod",function(){return R});var F=t["default"]=D},,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return a});r.d(t,"b",function(){return n});var a;(function(e){e[e["NONE"]=0]="NONE";e[e["NO_MENTIONS"]=1]="NO_MENTIONS";e[e["BAD_ARGUMENTS"]=2]="BAD_ARGUMENTS";e[e["NO_DISPLAY_OVERRIDE"]=3]="NO_DISPLAY_OVERRIDE";e[e["NO_NOTIFICATIONS_OVERRIDE"]=4]="NO_NOTIFICATIONS_OVERRIDE";e[e["REPLY_MESSAGE"]=5]="REPLY_MESSAGE";e[e["NOT_REPLY_MESSAGE"]=6]="NOT_REPLY_MESSAGE";e[e["JOIN_LEAVE_MESSAGE"]=7]="JOIN_LEAVE_MESSAGE";e[e["BOT_MESSAGE"]=8]="BOT_MESSAGE";e[e["APP_MESSAGE"]=9]="APP_MESSAGE";e[e["FROM_CURRENT_USER"]=10]="FROM_CURRENT_USER";e[e["MUTED_CHANNEL"]=11]="MUTED_CHANNEL";e[e["USER_IN_DND"]=12]="USER_IN_DND";e[e["SILENT_PREFERENCE"]=13]="SILENT_PREFERENCE";e[e["PERMISSION_DENIED"]=14]="PERMISSION_DENIED";e[e["ACTIVE_VIEW_VISIBLE"]=15]="ACTIVE_VIEW_VISIBLE";e[e["LESS_RELEVANT_ORG_TEAM"]=16]="LESS_RELEVANT_ORG_TEAM";e[e["OVERSIZED_MENTION"]=17]="OVERSIZED_MENTION";e[e["REDUNDANT_SOCKET_EVENT"]=18]="REDUNDANT_SOCKET_EVENT";e[e["ALREADY_SEEN_REPLY"]=19]="ALREADY_SEEN_REPLY";e[e["ALREADY_SHOWN"]=20]="ALREADY_SHOWN"})(a||(a={}));function n(e,t,r){var n=t||"missing model";switch(e){case a.BAD_ARGUMENTS:return"Missing message or model object";case a.NO_DISPLAY_OVERRIDE:return"'no_display' was set on the notification";case a.NO_NOTIFICATIONS_OVERRIDE:return"'no_notifications' was set on the notification";case a.JOIN_LEAVE_MESSAGE:return"The message was a join or leave message";case a.BOT_MESSAGE:return"The message was a bot message without a mention";case a.APP_MESSAGE:return"The message was an app message without a mention";case a.FROM_CURRENT_USER:return"The message is from the current user";case a.MUTED_CHANNEL:return"Channel ("+n+") is muted";case a.USER_IN_DND:return"The user is in Do Not Disturb";case a.SILENT_PREFERENCE:return"The user has their notification preference set to 'nothing'";case a.PERMISSION_DENIED:return"The user did not grant permission to show notifications";case a.ACTIVE_VIEW_VISIBLE:return"The window is focused and the notifying channel ("+n+") is visible";case a.LESS_RELEVANT_ORG_TEAM:return"Shared channel ("+n+") is in a less recently selected org team";case a.OVERSIZED_MENTION:return"Over-sized channel mention in channel ("+n+")";case a.REDUNDANT_SOCKET_EVENT:return"Message ("+r+") is greater than latest in store, treating as duplicate";case a.ALREADY_SEEN_REPLY:return"Message ("+r+") is less than or equal to the 'last_read' in the thread";case a.ALREADY_SHOWN:return"Message ("+r+") has already shown a notification";default:return null}}},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"c",function(){return l});r.d(t,"b",function(){return u});r.d(t,"a",function(){return d});r.d(t,"e",function(){return p});r.d(t,"f",function(){return h});r.d(t,"d",function(){return f});var a=r(9);var n=r.n(a);var i=r(2);var s=r.n(i);var o={vat:"vat",sales_tax:"sales_tax"};var l={monthly:"monthly",yearly:"yearly"};var c={monthly:1,yearly:12};var u={standard:{id:"std",name:"standard"},plus:{id:"plus",name:"plus"}};var d={CREDIT_CARD:"creditCard",INVOICE:"invoice"};var p=function e(t){var r=Object(i["isEmpty"])(t.tax)?{}:{value:t.tax.sales_tax_amt,type:t.tax.is_vat?o.vat:o.sales_tax};var a=t.credits?{currentCredits:t.credits.total_credits,creditsRemaining:t.credits.credits_remaining,creditsApplied:t.credits.credits_applied}:{};var n=t.billable_users?{billableActiveUsers:t.billable_users.billable_active_users,inactiveUsers:t.billable_users.inactive_users,zeroActiveUsers:t.billable_users.zero_active_users}:{};var s={id:t.product_id,subtotal:t.subtotal,billableUsers:n,tax:r,credits:a,totalRecurring:t.total_recurring,totalRecurringTax:t.recurring_tax_amt,totalDueToday:t.total_due_today,quotedTermEnd:t.quoted_term_end,paidSeats:t.paid_seats};return{activePlanCost:s}};var m=function e(t){var r="12m"===t.term?l.yearly:l.monthly;var a="12m"===t.term?c.yearly:c.monthly;return{id:t.product_id,term:r,currency:t.currency,level:t.level,lengthOfTermInMonths:a,costPerMonth:t.cost_per_m,costPerTerm:t.cost_per_term,isInvoice:t.is_inv||false,maxInvoiceSeats:t.max_invoice_seats,minInvoiceSeats:t.min_invoice_seats}};var h=function e(t){var r={};Object.keys(t).forEach(function(e){var a,i,s,o,c;var p=t[e];r[e]=(c={},n()(c,u.standard.id,(i={},n()(i,d.CREDIT_CARD,(a={},n()(a,l.monthly,m(p.std_m)),n()(a,l.yearly,m(p.std_y)),a)),n()(i,d.INVOICE,n()({},l.yearly,m(p.inv_std_y))),i)),n()(c,u.plus.id,(o={},n()(o,d.CREDIT_CARD,(s={},n()(s,l.monthly,m(p.plus_m)),n()(s,l.yearly,m(p.plus_y)),s)),n()(o,d.INVOICE,n()({},l.yearly,m(p.inv_plus_y))),o)),c)});return{availablePlans:r}};var f=function e(t,r,a,n){var i=r.country,s=r.street,o=r.postalCode,l=r.isBusinessPurchase;return[t,i,s,o,l,a,n].join("-")}},,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"setSearchInputBoxDisplayQuery",function(){return h});r.d(t,"getSearchInputBoxUserQuery",function(){return b});r.d(t,"getSearchInputBoxDisplayQuery",function(){return g});r.d(t,"setSearchInputBoxUserQuery",function(){return _});r.d(t,"searchInputChanged",function(){return y});r.d(t,"reset",function(){return k});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=r(268);var u=r(736);var d=r(37);var p=r(3267);var m;var h=Object(l["a"])("Set the search input box display query");h.propTypes={displayQuery:o["b"].string.isRequired};var f=Object(l["a"])("Set the user query associated with the search input box without any side effects");f.propTypes={userQuery:o["b"].string.isRequired};var v=Object(l["a"])("Set the user query and display query associated with the search input box without any side effects");v.propTypes={userQuery:o["b"].string.isRequired,displayQuery:o["b"].string.isRequired};var b=Object(l["d"])(function(e){return e&&e.searchInputBox&&e.searchInputBox.userQuery});var g=Object(l["d"])(function(e){return e&&e.searchInputBox&&e.searchInputBox.displayQuery});var _=Object(l["e"])("Set the user query and display query associated with the search input box from a user query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.textyString;var n=t();var i=Object(u["c"])(n,a);e(v({displayQuery:a,userQuery:i}));e(Object(d["setInterfaceMode"])({interfaceMode:d["interfaceModes"].EDIT}));e(Object(c["setSearchAutocompleteEchoQuery"])({requestQuery:i}));e(Object(c["setSearchAutocompleteSelection"])({selectedIndex:i?0:null}))});_.propTypes={textyString:o["b"].string.isRequired};var y=Object(l["e"])("The search input has changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.textyString;var n=t();if(a!==g(n)){Object(p["a"])(n)&&!Object(c["isSearchAutocompleteOpen"])(n)&&e(Object(c["openSearchAutocomplete"])());e(_({textyString:a}))}});y.propTypes={textyString:o["b"].string.isRequired};var k=Object(l["a"])("Reset search input box redux state");k.propTypes={};var O={displayQuery:"",userQuery:""};var E=Object(l["c"])((m={},n()(m,k,function(){return O}),n()(m,h,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.displayQuery;return s()({},e,{displayQuery:r})}),n()(m,f,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.userQuery;return s()({},e,{userQuery:r,displayQuery:r})}),n()(m,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.userQuery,a=t.displayQuery;return s()({},e,{userQuery:r,displayQuery:a})}),m),O);E.propTypes={displayQuery:o["b"].string,userQuery:o["b"].string};t["default"]=E},,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return f});r.d(t,"c",function(){return v});r.d(t,"b",function(){return b});var a=r(3);var n=r.n(a);var i=r(129);var s=r(4);var o=r(670);var l=r(795);var c=r(796);var u=r(21);var d=r(240);var p=r(17);var m="IMPROVED_SEARCH";var h="search_sort";var f={relevantMessages:"relevantMessages",recentMessages:"recentMessages"};var v=Object(s["e"])("Clog a search open event using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.messageSort;Object(p["a"])({getState:t}).info(m,"Set message sort method. messageSort: "+a);e(Object(d["c"])({pref:h,value:a}));var i=t();e(Object(c["a"])(n()({method:"set_sort_"+(a===f.relevantMessages?"score":"timestamp"),request_id:Object(o["a"])(i)},Object(l["a"])(i))))});v.propTypes={method:i["b"].string};function b(e){var t=Object(u["getUserPref"])(e,h);"timestamp"===t&&(t=f.recentMessages);"score"===t&&(t=f.relevantMessages);return t||f.relevantMessages}},,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return o});r.d(t,"b",function(){return c});r.d(t,"q",function(){return u});r.d(t,"p",function(){return d});r.d(t,"j",function(){return p});r.d(t,"l",function(){return m});r.d(t,"o",function(){return h});r.d(t,"n",function(){return f});r.d(t,"k",function(){return v});r.d(t,"m",function(){return b});r.d(t,"i",function(){return g});r.d(t,"d",function(){return _});r.d(t,"t",function(){return y});r.d(t,"s",function(){return k});r.d(t,"y",function(){return O});r.d(t,"z",function(){return E});r.d(t,"r",function(){return C});r.d(t,"D",function(){return S});r.d(t,"h",function(){return j});r.d(t,"w",function(){return I});r.d(t,"K",function(){return T});r.d(t,"E",function(){return N});r.d(t,"F",function(){return A});r.d(t,"u",function(){return R});r.d(t,"v",function(){return M});r.d(t,"G",function(){return P});r.d(t,"I",function(){return x});r.d(t,"H",function(){return D});r.d(t,"J",function(){return F});r.d(t,"c",function(){return L});r.d(t,"x",function(){return U});r.d(t,"A",function(){return q});r.d(t,"C",function(){return G});r.d(t,"B",function(){return H});r.d(t,"e",function(){return W});r.d(t,"f",function(){return V});r.d(t,"g",function(){return z});var a=r(4);var n=r(2);var i=r.n(n);var s=r(172);var o=function e(t){if(!t||!t.availablePlans)return null;var r=t.availablePlans;var a=t.activeCurrency;var n=t.activeTerm;var i=t.activePlanLevel;var o=t.activePaymentMethod;o===s["a"].INVOICE&&n===s["c"].monthly&&(o=s["a"].CREDIT_CARD);if(!r[a]||!r[a][i]||!r[a][i][o]||!r[a][i][o][n])return null;return r[a][i][o][n]};var l=Object(a["d"])(function(e){if(!e||!e.pricingPlans)return null;return o(e.pricingPlans)});var c=function e(t){if(!t||!t.availablePlans)return[];return Object.keys(t.availablePlans)};var u=Object(a["d"])(function(e){if(!e||!e.pricingPlans)return[];return c(e.pricingPlans)});var d=Object(a["d"])(function(e){var t=l(e);if(!t||!t.id)return"";return t.id});var p=Object(a["d"])(function(e){var t=l(e);if(!t||!t.costPerTerm)return null;return t.costPerTerm});var m=Object(a["d"])(function(e){var t=l(e);if(!t||!t.level)return"";return t.level});var h=Object(a["d"])(function(e){var t=l(e);if(!t||!t.term)return"";return t.term});var f=Object(a["d"])(function(e){var t=l(e);if(!t)return null;return t.isInvoice?s["a"].INVOICE:s["a"].CREDIT_CARD});var v=Object(a["d"])(function(e){var t=l(e);if(!t||!t.term)return null;return t.term===s["c"].yearly});var b=Object(a["d"])(function(e){var t=l(e);if(!t||!t.lengthOfTermInMonths)return null;return t.lengthOfTermInMonths});var g=Object(a["d"])(function(e){var t=l(e);if(!t||!t.currency)return"";return t.currency});var _=function e(t,r){if(!t||!t.availablePlans)return null;var a=t.availablePlans;var n=t.activeCurrency;var i=t.activePlanLevel;var s=t.activePaymentMethod;if(!a[n]||!a[n][i]||!a[n][i][s])return null;return a[n][i][s][r]};var y=Object(a["d"])(function(e){if(!e||!e.pricingPlans)return null;var t=_(e.pricingPlans,s["c"].yearly);if(!t)return null;return t.costPerTerm});var k=Object(a["d"])(function(e){if(!e||!e.pricingPlans)return null;var t=_(e.pricingPlans,s["c"].monthly);if(!t)return null;return t.costPerTerm});var O=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansAndCostDataLoaded};var E=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansDataLoading||t.pricingPlans.isCostDataLoading};var w=function e(t){if(!t||!t.pricingPlans||!t.pricingPlans.activePlanCost)return null;return t.pricingPlans.activePlanCost};var C=Object(a["d"])(function(e){var t=w(e);if(!t||!t.billableUsers)return null;return t.billableUsers.billableActiveUsers});var S=Object(a["d"])(function(e){var t=w(e);if(!t||!t.paidSeats)return null;return t.paidSeats});var j=Object(a["d"])(function(e){var t=w(e);if(!t||!t.billableUsers)return null;return t.billableUsers.zeroActiveUsers});var I=Object(a["d"])(function(e){var t=w(e);if(!t||!t.billableUsers)return null;return t.billableUsers.inactiveUsers});var T=Object(a["d"])(function(e){var t=w(e);if(!t||!t.billableUsers)return null;var r=j(e)?0:C(e);return r+I(e)});var N=Object(a["d"])(function(e){var t=w(e);if(!t)return null;return t.subtotal});var A=Object(a["d"])(function(e){var t=w(e);if(!t||Object(n["isEmpty"])(t.tax))return null;return t.tax});var R=Object(a["d"])(function(e){var t=w(e);if(!t||!t.credits)return null;return t.credits.creditsApplied});var M=Object(a["d"])(function(e){var t=w(e);if(!t||!t.credits)return null;return t.credits.currentCredits});var P=Object(a["d"])(function(e){var t=w(e);if(!t||!t.credits)return null;return t.credits.creditsRemaining});var x=Object(a["d"])(function(e){var t=w(e);if(!t)return null;return t.totalRecurring});var D=Object(a["d"])(function(e){var t=w(e);if(!t)return null;return t.totalDueToday});var F=Object(a["d"])(function(e){var t=w(e);if(!t)return null;return t.totalRecurringTax});var L=Object(a["d"])(function(e){var t=w(e);if(!t)return null;return t.quotedTermEnd});var B=function e(t){if(!t||!t.cachedCost)return null;return t.cachedCost};var U=Object(a["d"])(function(e,t,r,a,n){if(!e||!e.pricingPlans)return null;var i=B(e.pricingPlans);var o=Object(s["d"])(t,r,a,n);if(!i||!i[o])return false;return true});var q=Object(a["d"])(function(e,t,r,a,n){if(!e||!e.pricingPlans)return null;var i=B(e.pricingPlans);var o=Object(s["d"])(t,r,a,n);if(!i||!i[o])return null;return i[o]});var G=Object(a["d"])(function(e){var t=l(e);if(!t||!t.isInvoice)return null;var r=C(e);if(r>t.minInvoiceSeats)return r;return t.minInvoiceSeats});var H=Object(a["d"])(function(e){var t=l(e);if(!t||!t.isInvoice)return null;return t.maxInvoiceSeats});var W=Object(a["d"])(function(e){return e&&e.pricingPlans&&e.pricingPlans.apiError});var V=Object(a["d"])(function(e){if(!e||!e.pricingPlans)return false;if(W(e))return false;var t=d(e);var r=w(e);return t===r});var z=Object(a["d"])(function(e){var t=l(e);if(!t)return false;return t.isInvoice||false})},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(9);var s=r.n(i);var o=r(129);var l=r(2);var c=r(4);var u=r(317);var d=r(30);var p=r(172);var m=r(25);var h=r(22);var f=r(23);var v=r(17);var b=r(812);var g="checkout_v2";var _=Object(h["a"])("Fetch States and Countries",function(e,t){return e(Object(m["a"])({method:"payments.billing.addresses.locations"})).then(function(e){Object(v["a"])({getState:t}).info(g,"Successfully fetched states and countries");if(Object(l["includes"])(Object(l["keys"])(e.vat_countries),d["e"].UNITED_KINGDOM)){e.vat_countries[d["e"].UNITED_KINGDOM_UK]=e.vat_countries[d["e"].UNITED_KINGDOM];delete e.vat_countries[d["e"].UNITED_KINGDOM]}return{countries:e.countries||[],usStates:e.us_states||{},canadaStates:e.canada_states||{},vatCountries:e.vat_countries||{},abnCountries:e.abn_countries||{},taxableZipcodes:e.taxable_zipcodes||[]}}).catch(function(e){Object(b["a"])({error:e,description:"Error while fetching states and countries",subtype:g,teamId:Object(f["getTeamId"])(t())});throw e})});var y=Object(h["a"])("Fetch Company Address",function(e,t){return e(Object(m["a"])({method:"payments.billing.addresses.get"})).then(function(e){Object(v["a"])({getState:t}).info(g,"Successfully fetched company address");var r=d["c"].COMPANY_NAME,a=d["c"].STREET,n=d["c"].SUITE,i=d["c"].CITY,s=d["c"].REGION,o=d["c"].POSTAL_CODE,l=d["c"].COUNTRY,c=d["c"].IS_BUSINESS_PURCHASE,u=d["c"].IS_VAT_AVAILABLE,p=d["c"].VAT_ID,m=d["c"].ABN_ID;var h=null===e.is_business?c:e.is_business;var f=null===e.waiting_for_vat?u:!e.waiting_for_vat;return{companyName:e.company_name||r,street:e.street1||a,suite:e.street2||n,city:e.city||i,postalCode:e.zip||o,region:e.state||s,country:e.country||l,isBusinessPurchase:h,isVatIdAvailable:f,vatId:e.vat_id||p,abnId:e.abn_id||m}}).catch(function(e){Object(b["a"])({error:e,description:"Error while fetching company address",subtype:g,teamId:Object(f["getTeamId"])(t())});throw e})});var k=Object(h["a"])("Validate and Persist Company Address",function(e,t,r){var a={abn_id:r.abnId,city:r.city,company_name:r.companyName,country:r.country,is_business:r.isBusinessPurchase,state:r.region,street1:r.street,street2:r.suite,vat_id:r.vatId,waiting_for_vat:!r.isVatIdAvailable,zip:r.postalCode,is_checkout_v2:true};return e(Object(m["a"])({method:"payments.billing.addresses.validateAndSet",args:a})).then(function(e){Object(v["a"])({getState:t}).info(g,"Successfully validated and persisted company address");return e}).catch(function(e){Object(b["a"])({error:e,description:"Error while validating and persisting company address",subtype:g,teamId:Object(f["getTeamId"])(t())});throw e})});k.propTypes=o["b"].object;var O=Object(h["a"])("Submit information from the payment form to the server to complete the purchase of a paid Slack plan",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.tokenId,n=r.productId,i=r.isNewCreditCard;return e(Object(m["a"])({method:"payments.checkout.charge",args:{stripe_token:a,product_id:n,is_new_card:i}})).then(function(e){Object(v["a"])({getState:t}).info(g,"Successfully processed upgrade charge successfully for product_id "+n+", is_new_card "+i);return e}).catch(function(e){Object(b["a"])({error:e,description:"Error while processing upgrade charge for product_id "+n+", is_new_card "+i,subtype:g,teamId:Object(f["getTeamId"])(t())});throw e})});O.propTypes={tokenId:o["b"].string,productId:o["b"].string,isNewCreditCard:o["b"].bool};var E=Object(h["a"])("Submit information from the checkout invoice form to the server to complete the purchase of a paid Slack plan via invoice",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.numUsers,n=r.productId,i=r.billingContacts,s=r.purchaseOrderNumber;return e(Object(m["a"])({method:"payments.checkout.createInvoice",args:{num_users:a,product_id:n,billing_contacts:i,po_number:s}})).then(function(e){Object(v["a"])({getState:t}).info(g,"Successfully created invoice for product_id "+n+", num_users "+a);return e}).catch(function(e){Object(b["a"])({error:e,description:"Error while creating invoice for product_id "+n+", num_users "+a,subtype:g,teamId:Object(f["getTeamId"])(t())});throw e})});E.propTypes={numUsers:o["b"].string,productId:o["b"].string,billingContacts:o["b"].string,purchaseOrderNumber:o["b"].string};var w=Object(h["a"])("Fetch Stripe Customer",function(e,t,r){return e(Object(m["a"])({method:"payments.stripe.getCustomer",args:{country:r}})).then(function(e){Object(v["a"])({getState:t}).info(g,"Successfully fetched Stripe customer");return e}).catch(function(e){Object(b["a"])({error:e,description:"Error while fetching Stripe customer",subtype:g,teamId:Object(f["getTeamId"])(t())});throw e})});w.propTypes=o["b"].string;var C=Object(h["a"])("Fetch Self User Data",function(e,t){return e(Object(m["a"])({method:"users.info",args:{self:true}})).then(function(e){Object(v["a"])({getState:t}).info(g,"Successfully fetched self user data");return e}).catch(function(e){Object(b["a"])({error:e,description:"Error while fetching self user data",subtype:g,teamId:Object(f["getTeamId"])(t())});throw e})});var S=Object(h["a"])("Checks If User Can Access Checkout",function(e,t){return e(Object(m["a"])({method:"payments.checkout.canShowCheckoutV2"})).then(function(e){Object(v["a"])({getState:t}).info(g,"Successfully checked if user can access checkout");return e}).catch(function(e){Object(b["a"])({error:e,description:"Error while checking if user can access checkout",subtype:g,teamId:Object(f["getTeamId"])(t())});throw e})});var j=r(11);var I=r(460);var T=r(718);var N=r(200);var A=r(339);var R=o["b"].shape({companyName:o["b"].string,street:o["b"].string,suite:o["b"].string,city:o["b"].string,postalCode:o["b"].string,region:o["b"].string,country:o["b"].string,isBusinessPurchase:o["b"].bool,isVatIdAvailable:o["b"].bool,vatId:o["b"].string,abnId:o["b"].string,validationErrors:o["b"].object,isValidationActive:o["b"].bool});var M=Object(c["a"])("Checkout Address Form Data Loaded");M.propTypes=o["b"].object;var P=Object(c["a"])("Update Company Address Field");P.propTypes=o["b"].object;var x=Object(c["a"])("Company Address Validated");x.propTypes=o["b"].object;var D=Object(c["a"])("Company Address Form Field Validated");D.propTypes=o["b"].object;var F=Object(c["a"])("Clear Company Address Form Field Validation Errors");F.propTypes=o["b"].object;var L=Object(c["a"])("Credit Card Data Changed");L.propTypes=o["b"].object;var B=Object(c["a"])("Credit Card Token Created");B.propTypes=o["b"].object;var U=Object(c["a"])("Toggles if Credit Card Token is being created or not");U.propTypes=o["b"].bool;var q=Object(c["a"])("Upgrade Response Received");q.propTypes=o["b"].object;var G=Object(c["a"])("Stripe Customer Data Loaded");G.propTypes=o["b"].object;var H=Object(c["a"])("Update Stripe API Key");H.propTypes=o["b"].object;var W=Object(c["a"])("Update Invoice Data Field");W.propTypes=o["b"].object;var V=Object(c["a"])("Invoice Data Validated");V.propTypes=o["b"].object;var z=Object(c["a"])("Invoice Form Field Validated");z.propTypes=o["b"].object;var Q=Object(c["a"])("Update Credit Card Selected");Q.propTypes=o["b"].object;var K=Object(c["a"])("Update Credit Card Form Error");K.propTypes=o["b"].object;var Y=Object(c["a"])("Clear Any Existing Credit Card Form Error");Y.propTypes=null;var J=Object(c["a"])("Clear Any Existing Payment Status or Errors");J.propTypes=null;var Z=Object(c["a"])("Self User Data Loaded");Z.propTypes=o["b"].object;var X=Object(c["a"])("Update Is Processing Payment");X.propTypes=o["b"].object;var $=Object(c["a"])("Update Payment Method Selected");$.propTypes=o["b"].string;var ee=Object(c["a"])("Update Show App Disconnect Dialog");ee.propTypes=o["b"].object;var te=Object(c["a"])("Update Active Checkout Step");te.propTypes=o["b"].object;var re=Object(c["a"])("Update Checkout Flow API Error Indicator");re.propTypes=o["b"].object;function ae(){return function(e){Promise.all([e(_()),e(y())]).then(function(t){e(M({statesAndCountries:t[0],companyAddress:t[1]}))}).catch(function(){return e(re({isCheckoutFlowAPIError:true}))})}}function ne(e){return function(t,r){return new Promise(function(a){var n=Object(j["isFeatureEnabled"])(r(),"feature_checkout_flow_translations");var i=Object(A["e"])(r());var s=Object(I["g"])(e.companyAddress,n,i.vatCountries);if(!Object(l["isEmpty"])(s)){t(x(s));a({isCheckoutFormValid:false});return}t(x(s));t(k(e.companyAddress)).then(function(){a({isCheckoutFormValid:true})}).catch(function(e){var r=e.data||{};var i=r.response_code;var s=r.error;var o=r.format_valid;var c=Object(I["a"])(i,s,o,n);if(!Object(l["isEmpty"])(c)){t(x(c));a({isCheckoutFormValid:false})}})})}}ne.propTypes={companyAddress:R};function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{companyAddress:{},field:null},t=e.companyAddress,r=e.field;return function(e,a){var n=Object(j["isFeatureEnabled"])(a(),"feature_checkout_flow_translations");var i=Object(A["e"])(a());var s=Object(I["h"])(t,r,i.vatCountries,n);e(D({error:s,field:r}))}}ie.propTypes={companyAddress:R,field:o["b"].string};function se(e){return function(t,r){t(P(e));var a=Object(A["b"])(r());a.isValidationActive&&Object(l["has"])(e,"country")&&t(ne({companyAddress:Object(A["b"])(r())}))}}se.propTypes=o["b"].object;function oe(e){return function(t){t(X({isProcessingPayment:true}));t(O(e)).then(function(e){return t(q(e))}).catch(function(e){t(q(e.data))})}}oe.propTypes=o["b"].object;function le(e){return function(t){return t(w(e)).then(function(e){var r=e.stripe_customer;var a={};r&&!Object(l["isEmpty"])(r.sources_payable)&&(a=Object(l["pickBy"])(r.sources_payable,function(e,t){return!r.sources_payable[t].is_bank_account}));t(G({stripeApiKey:e.stripe_api_publishable_key,sourcesPayable:a}))}).catch(function(){return t(re({isCheckoutFlowAPIError:true}))})}}le.propTypes={country:o["b"].string};function ce(e){return function(t,r){var a=r();var n=Object(j["isFeatureEnabled"])(a,"feature_checkout_flow_translations");var i=Object(A["m"])(a);var s=Object(N["C"])(a);var o=Object(N["B"])(a);var l=Object(T["e"])(i,e,s,o,n);t(z({error:l,field:e}))}}T["e"].propTypes={field:o["b"].string};function ue(e){return function(t,r){return new Promise(function(a){var n=r();var i=Object(j["isFeatureEnabled"])(n,"feature_checkout_flow_translations");var s=Object(N["C"])(n);var o=Object(N["B"])(n);var c=Object(T["d"])(e,s,o,i);t(V(c));a({isInvoiceFormValid:Object(l["isEmpty"])(c)})})}}ue.propTypes={invoiceData:o["b"].object};function de(e){return function(t){t(X({isProcessingPayment:true}));var r=e.billingContacts;var a=n()({},e,{billingContacts:Object(T["c"])(r)});t(E(a)).then(function(e){return t(q(e))}).catch(function(){return t(re({isCheckoutFlowAPIError:true}))})}}de.propTypes=o["b"].object;function pe(){return function(e){e(C()).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.user;return e(Z(r))})}}var me=r(3464);var he,fe;var ve={countries:[],usStates:{},canadaStates:{},vatCountries:{},abnCountries:{},stripeApiKey:null,sourcesPayable:{},user:null};var be={companyName:d["c"].COMPANY_NAME,street:d["c"].STREET,suite:d["c"].SUITE,city:d["c"].CITY,postalCode:d["c"].POSTAL_CODE,region:d["c"].REGION,country:d["c"].COUNTRY,isBusinessPurchase:d["c"].IS_BUSINESS_PURCHASE,isVatIdAvailable:d["c"].IS_VAT_AVAILABLE,vatId:d["c"].VAT_ID,abnId:d["c"].ABN_ID,validationErrors:{},isValidationActive:false};var ge={code:"",message:"",type:""};var _e={elementType:"",complete:false,empty:true,error:ge};var ye=(he={cardName:_e},s()(he,u["c"].CARD_NUMBER,_e),s()(he,u["c"].CARD_EXPIRY,_e),s()(he,u["c"].CARD_CVC,_e),s()(he,u["c"].POSTAL_CODE,_e),s()(he,"token",{}),s()(he,"tokenError",ge),s()(he,"formError",ge),s()(he,"useExistingCreditCard",false),he);var ke={ok:false,error:"",msg:"",isProcessingPayment:false};var Oe={numberOfUsers:"",additionalBillingContacts:"",purchaseOrderNumber:"",validationErrors:{}};var Ee={config:ve,companyAddress:be,isCheckoutAddressFormDataLoaded:false,creditCardData:ye,isCreatingCreditCardToken:false,paymentStatus:ke,invoiceData:Oe,paymentMethodSelected:p["a"].CREDIT_CARD,isAppDisconnectedDialogShown:false,activeCheckoutStep:me["a"].calculator,isCheckoutFlowAPIError:false};var we=Object(c["c"])((fe={},s()(fe,M,function(e,t){var r=n()({},e,{config:n()({},e.config,{countries:t.statesAndCountries.countries,usStates:t.statesAndCountries.usStates,canadaStates:t.statesAndCountries.canadaStates,vatCountries:t.statesAndCountries.vatCountries,abnCountries:t.statesAndCountries.abnCountries}),companyAddress:n()({},e.companyAddress,{companyName:t.companyAddress.companyName,street:t.companyAddress.street,suite:t.companyAddress.suite,city:t.companyAddress.city,postalCode:t.companyAddress.postalCode,region:t.companyAddress.region,country:t.companyAddress.country,isBusinessPurchase:t.companyAddress.isBusinessPurchase,isVatIdAvailable:t.companyAddress.isVatIdAvailable,vatId:t.companyAddress.vatId,abnId:t.companyAddress.abnId}),isCheckoutAddressFormDataLoaded:true});return r}),s()(fe,P,function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,t)});return r}),s()(fe,x,function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:t,isValidationActive:true})});return r}),s()(fe,D,function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:n()({},e.companyAddress.validationErrors,s()({},t.field,t.error))})});return r}),s()(fe,F,function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:n()({},e.companyAddress.validationErrors,s()({},t.field,null))})});return r}),s()(fe,L,function(e,t){var r=n()({},e,{creditCardData:n()({},e.creditCardData,s()({},t.elementType,t))});if("cardName"!==t.elementType){r.creditCardData.token=null;r.creditCardData.tokenError=null}return r}),s()(fe,Y,function(e){var t=n()({},e,{creditCardData:n()({},e.creditCardData,{formError:ge})});return t}),s()(fe,K,function(e,t){var r=n()({},e,{creditCardData:n()({},e.creditCardData,{formError:t})});return r}),s()(fe,B,function(e,t){var r=n()({},e,{creditCardData:n()({},e.creditCardData,{token:t.token,tokenError:t.error})});return r}),s()(fe,U,function(e,t){var r=n()({},e,{isCreatingCreditCardToken:t});return r}),s()(fe,q,function(e,t){var r=n()({},e,{paymentStatus:n()({},e.paymentStatus,{ok:t.ok,error:t.error,msg:t.msg,isProcessingPayment:false})});return r}),s()(fe,J,function(e){var t=n()({},e,{paymentStatus:ke});return t}),s()(fe,X,function(e,t){var r=n()({},e,{paymentStatus:n()({},e.paymentStatus,{isProcessingPayment:t.isProcessingPayment})});return r}),s()(fe,G,function(e,t){var r=n()({},e,{config:n()({},e.config,{stripeApiKey:t.stripeApiKey,sourcesPayable:Object(l["isEmpty"])(t.sourcesPayable)?{}:t.sourcesPayable}),creditCardData:n()({},e.creditCardData,{useExistingCreditCard:!Object(l["isEmpty"])(t.sourcesPayable)})});return r}),s()(fe,H,function(e,t){var r=n()({},e,{config:n()({},e.config,{stripeApiKey:t.stripeApiKey}),creditCardData:n()({},e.creditCardData,{token:null,tokenError:null})});return r}),s()(fe,Q,function(e,t){var r=t.creditCardId!==u["a"];var a=n()({},e,{creditCardData:n()({},e.creditCardData,{useExistingCreditCard:r,token:{id:t.creditCardId,card:{last4:t.creditCardLast4,brand:t.creditCardBrand}}})});return a}),s()(fe,W,function(e,t){var r=n()({},e,{invoiceData:n()({},e.invoiceData,t.data,{validationErrors:n()({},e.invoiceData.validationErrors,s()({},t.field,null))})});return r}),s()(fe,V,function(e,t){var r=n()({},e,{invoiceData:n()({},e.invoiceData,{validationErrors:t})});return r}),s()(fe,z,function(e,t){var r=n()({},e,{invoiceData:n()({},e.invoiceData,{validationErrors:n()({},e.invoiceData.validationErrors,s()({},t.field,t.error))})});return r}),s()(fe,Z,function(e,t){var r=n()({},e,{config:n()({},e.config,{user:t})});return r}),s()(fe,$,function(e,t){var r=n()({},e,{paymentMethodSelected:t});return r}),s()(fe,ee,function(e,t){var r=n()({},e,{isAppDisconnectedDialogShown:t.isAppDisconnectedDialogShown});return r}),s()(fe,te,function(e,t){var r=n()({},e,{activeCheckoutStep:t.activeCheckoutStep});return r}),s()(fe,re,function(e,t){var r=n()({},e,{isCheckoutFlowAPIError:t.isCheckoutFlowAPIError});return r}),fe),Ee);we.propTypes={config:o["b"].object,companyAddress:o["b"].object,isCheckoutAddressFormDataLoaded:o["b"].bool,creditCardData:o["b"].object,isCreatingCreditCardToken:o["b"].bool,paymentStatus:o["b"].object,invoiceData:o["b"].object,paymentMethodSelected:o["b"].string,isAppDisconnectedDialogShown:o["b"].bool,activeCheckoutStep:o["b"].string};var Ce=we;r.d(t,"getCompanyAddress",function(){return A["b"]});r.d(t,"getCompanyAddressCountry",function(){return A["c"]});r.d(t,"getCompanyAddressPostalCode",function(){return A["d"]});r.d(t,"getConfig",function(){return A["e"]});r.d(t,"isCheckoutAddressFormDataLoaded",function(){return A["o"]});r.d(t,"getCreditCardData",function(){return A["g"]});r.d(t,"getCreditCardToken",function(){return A["j"]});r.d(t,"getCreditCardTokenId",function(){return A["l"]});r.d(t,"getCreditCardBrandForReview",function(){return A["f"]});r.d(t,"getCreditCardLastFourForReview",function(){return A["i"]});r.d(t,"getCreditCardFormError",function(){return A["h"]});r.d(t,"getCreditCardTokenError",function(){return A["k"]});r.d(t,"isCreatingCreditCardToken",function(){return A["p"]});r.d(t,"didUpgradeSucceed",function(){return A["a"]});r.d(t,"getUpgradeError",function(){return A["n"]});r.d(t,"selectIsProcessingPayment",function(){return A["t"]});r.d(t,"selectStripeApiKey",function(){return A["x"]});r.d(t,"selectSourcesPayable",function(){return A["w"]});r.d(t,"selectIsSelfUserOwner",function(){return A["u"]});r.d(t,"getInvoiceData",function(){return A["m"]});r.d(t,"selectPaymentMethodSelected",function(){return A["v"]});r.d(t,"selectIsAppDisconnectedDialogShown",function(){return A["r"]});r.d(t,"selectActiveCheckoutStep",function(){return A["q"]});r.d(t,"selectIsCheckoutFlowAPIError",function(){return A["s"]});r.d(t,"checkoutAddressFormDataLoaded",function(){return M});r.d(t,"updateCompanyAddressField",function(){return P});r.d(t,"companyAddressValidated",function(){return x});r.d(t,"companyAddressFormFieldValidated",function(){return D});r.d(t,"clearCompanyAddressFormFieldValidationErrors",function(){return F});r.d(t,"handleCreditCardFormChange",function(){return L});r.d(t,"updateCreditCardTokenData",function(){return B});r.d(t,"updateIsCreatingCreditCardToken",function(){return U});r.d(t,"onUpgradeResponseReceived",function(){return q});r.d(t,"stripeCustomerDataLoaded",function(){return G});r.d(t,"updateStripeApiKey",function(){return H});r.d(t,"updateInvoiceDataField",function(){return W});r.d(t,"invoiceDataValidated",function(){return V});r.d(t,"invoiceDataFieldValidated",function(){return z});r.d(t,"updateCreditCardSelected",function(){return Q});r.d(t,"updateCreditCardFormError",function(){return K});r.d(t,"clearCreditCardFormError",function(){return Y});r.d(t,"clearPaymentStatus",function(){return J});r.d(t,"selfUserDataLoaded",function(){return Z});r.d(t,"updateIsProcessingPayment",function(){return X});r.d(t,"updatePaymentMethodSelected",function(){return $});r.d(t,"updateIsAppDisconnectedDialogShown",function(){return ee});r.d(t,"updateActiveCheckoutStep",function(){return te});r.d(t,"updateIsCheckoutFlowAPIError",function(){return re});r.d(t,"loadCheckoutAddressFormData",function(){return ae});r.d(t,"validateCheckoutForm",function(){return ne});r.d(t,"validateCompanyAddressFormField",function(){return ie});r.d(t,"updateCompanyAddress",function(){return se});r.d(t,"submitPaymentForUpgrade",function(){return oe});r.d(t,"loadStripeCustomerData",function(){return le});r.d(t,"validateInvoiceFormField",function(){return ce});r.d(t,"validateInvoiceForm",function(){return ue});r.d(t,"createInvoiceForUpgrade",function(){return de});r.d(t,"loadSelfUserData",function(){return pe});var Se=t["default"]=Ce},,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});r.d(t,"c",function(){return a});var a={NUMBER_OF_USERS_IS_REQUIRED:"number_of_users_is_required",PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS:"invalid_po_number",NUMBER_OF_USERS_INVALID_CHARACTERS:"invalid_number_of_users",NUMBER_OF_USERS_INVALID_MIN_ALLOWED:"invalid_min_number_of_users",NUMBER_OF_USERS_INVALID_MAX_ALLOWED:"invalid_max_number_of_users"};var n={NUMERIC_WITH_MIN_MAX_LENGTH_REGEX:/^\d{1,20}$/,NUMERIC_REGEX:/^\d+$/};var i={NUMBER_OF_USERS:"numberOfUsers",ADDITIONAL_BILLING_CONTACTS:"additionalBillingContacts",PURCHASE_ORDER_NUMBER:"purchaseOrderNumber"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"setSearchAutocompleteSuggestions",function(){return p});r.d(t,"getSearchAutocompleteSuggestions",function(){return m});r.d(t,"openSearchAutocomplete",function(){return h});r.d(t,"closeSearchAutocomplete",function(){return f});r.d(t,"setSearchAutocompleteMode",function(){return v});r.d(t,"searchAutocompleteModes",function(){return b});r.d(t,"setSearchAutocompleteEchoQuery",function(){return g});r.d(t,"setSearchAutocompleteSelection",function(){return y});r.d(t,"reset",function(){return k});r.d(t,"getSearchAutocompleteSelectedIndex",function(){return w});r.d(t,"getSearchAutocompleteMode",function(){return C});r.d(t,"isSearchAutocompleteOpen",function(){return S});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=r(180);var u=r(1114);var d;var p=Object(l["a"])("Set the list of autocomplete suggestions");p.propTypes={suggestions:o["b"].arrayOf(o["b"].shape({score:o["b"].number,type:o["b"].string,featureVector:o["b"].string})).isRequired};var m=Object(l["d"])(function(e){return e&&e.searchAutocomplete&&e.searchAutocomplete.suggestions});var h=Object(l["a"])("Open Search Autocomplete popover");h.propTypes={};var f=Object(l["a"])("Close Search Autocomplete popover");f.propTypes={};var v=Object(l["a"])("Set the search autocomplete mode");var b={OMNI:"OMNI",NAVIGATION:"NAVIGATION"};v.propTypes={autocompleteMode:o["b"].oneOf([b.OMNI,b.NAVIGATION])};var g=Object(l["e"])("Set the first (0th) item in the autocomplete list as an echo of the given query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.requestQuery;var n=t();e(p({suggestions:Object(u["b"])(n,m(n),a)}))});g.propTypes={requestQuery:o["b"].string.isRequired};var _=Object(l["a"])("Set the index of the selected autocomplete suggestion");_.propTypes={selectedIndex:o["b"].number};var y=Object(l["e"])("Set the selected autocomplete item, keeping the display text in sync",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.selectedIndex,n=r.setText;var i=t();e(_({selectedIndex:a}));if(n){var s=i&&i.searchAutocomplete&&i.searchAutocomplete.suggestions||[];var o=s[a];o&&o.is_type_query_completion&&e(Object(c["setSearchInputBoxDisplayQuery"])({displayQuery:o.suggestion_replacement}))}});y.propTypes={selectedIndex:o["b"].number,setText:o["b"].bool};var k=Object(l["a"])("Reset search autocomplete redux state");k.propTypes={};var O={suggestions:[],selectedIndex:null,searchAutocompleteMode:b.OMNI,isSearchAutocompleteOpen:false};var E=Object(l["c"])((d={},n()(d,k,function(){return O}),n()(d,p,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.suggestions;return s()({},e,{suggestions:r})}),n()(d,_,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.selectedIndex;return s()({},e,{selectedIndex:r})}),n()(d,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.searchAutocompleteMode;return s()({},e,{searchAutocompleteMode:r})}),n()(d,h,function(e){return s()({},e,{isSearchAutocompleteOpen:true})}),n()(d,f,function(e){return s()({},e,{isSearchAutocompleteOpen:false})}),d),O);E.propTypes={suggestions:o["b"].arrayOf(o["b"].shape({score:o["b"].number,type:o["b"].string,featureVector:o["b"].string})).isRequired,selectedIndex:o["b"].number,searchAutocompleteMode:o["b"].string,isSearchAutocompleteOpen:o["b"].bool};t["default"]=E;var w=Object(l["d"])(function(e){return e&&e.searchAutocomplete&&e.searchAutocomplete.selectedIndex});var C=Object(l["d"])(function(e){return e&&e.searchAutocomplete&&e.searchAutocomplete.searchAutocompleteMode});var S=Object(l["d"])(function(e){return!!(e&&e.searchAutocomplete&&e.searchAutocomplete.isSearchAutocompleteOpen)})},,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"d",function(){return x});r.d(t,"h",function(){return D});r.d(t,"f",function(){return F});r.d(t,"e",function(){return L});r.d(t,"i",function(){return B});r.d(t,"g",function(){return U});r.d(t,"a",function(){return q});r.d(t,"c",function(){return G});r.d(t,"b",function(){return z});var a=r(3);var n=r.n(a);var i=r(32);var s=r.n(i);var o=r(129);var l=r(2);var c=r.n(l);var u=r(25);var d=r(17);var p=r(314);var m=r(4);var h=r(37);var f=r(699);var v=r(90);var b=r(268);var g=r(11);var _=r(23);var y=r(94);var k=r(373);var O=r(69);var E=r(1114);var w=r(746);var C=r(736);var S=r(12);var j=r(21);var I=r(446);var T=r(186);var N=r(180);var A="IMPROVED_SEARCH";var R=2;var M=1e4;var P=Object(m["b"])("Fetch search data for a specific module (messages, files, etc.)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.module,i=r.query,o=r.page,l=void 0===o?1:o,c=s()(r,["module","query","page"]);Object(I["g"])(a,c&&c.sort||"unknown",l);var d=e(Object(f["getQuerySessionId"])());var p=e(Object(f["getSearchSessionId"])());return e(Object(u["a"])({method:"search.modules",args:n()({module:a,query:i,page:l,client_req_id:d,search_session_id:p,extracts:1,highlight:1,max_extract_len:200,extra_message_data:1,no_user_profile:1},c)})).timeout(M).then(function(e){Object(I["h"])(a,c&&c.sort||"unknown",l);return e})});P.propTypes={module:o["b"].string.isRequired,query:o["b"].string.isRequired,page:o["b"].number};var x=Object(m["b"])("Fetch the user's recent search history for use in the blank slate UI.",function(e,t,r){var a=r.query,n=r.limit;return e(Object(u["a"])({method:"search.autocomplete",args:{query:a,limit:n}}))});x.propTypes={query:o["b"].string.isRequired,limit:o["b"].number.isRequired};var D=Object(m["b"])("Precache visibility filters for this user before they kick off a search",function(e,t){var r=t();var a=Object(g["pageNeedsEnterprise"])(r);var n=Object(g["getFromBootData"])(r,"enterprise_api_token");var i=a&&n?{enterprise_token:n}:{};return e(Object(u["a"])({method:"search.precache",args:i}))});D.propTypes={};var F=Object(m["b"])("Retrieve search autocomplete query suggestions.",function(e,t,r){var a=r.limit,n=r.version,i=r.returnExperts,s=r.batchMin,o=void 0===s?0:s,l=r.batches,c=void 0===l?10:l;return e(Object(u["a"])({method:"search.autocomplete.querySuggestions",args:{limit:a,version:n,return_experts:i?1:0,new_scale:true,query_batch_min:o,query_batches:c}}))});F.propTypes={limit:o["b"].number.isRequired,version:o["b"].string.isRequired,returnExperts:o["b"].bool.isRequired,batchMin:o["b"].number,batches:o["b"].number};var L=Object(m["b"])("Retrieve search autocomplete file suggestions.",function(e,t,r){var a=r.limit,n=r.version;return e(Object(u["a"])({method:"search.autocomplete.fileSuggestions",args:{limit:a,version:n}}))});L.propTypes={limit:o["b"].number.isRequired,version:o["b"].string.isRequired};var B=Object(m["b"])("Save a search query to the user's search query history",function(e,t,r){var a=r.query;return e(Object(u["a"])({method:"search.save",args:{terms:a}})).catch(function(e){return Object(d["a"])({getState:t}).error(e)}).finally(function(){var e=t();var r=Object(_["getTeamId"])(e);var a=Object(w["a"])(r);a.flushAll()})});B.propTypes={query:o["b"].string.isRequired};var U=Object(m["b"])("Delete a search query from the user's search query history.",function(e,t,r){var a=r.terms,n=r.searchSessionId,i=r.querySessionId;return e(Object(u["a"])({method:"search.delete",args:{terms:a,search_session_id:n,client_request_id:i}})).catch(function(e){return Object(d["a"])({getState:t}).error(e)}).finally(function(){var e=t();var r=Object(_["getTeamId"])(e);var a=Object(w["a"])(r);a.flushAll()})});U.propTypes={terms:o["b"].string.isRequired,searchSessionId:o["b"].string.isRequired,querySessionId:o["b"].string.isRequired};var q=Object(m["e"])("Fetch page 1 of all search results for a given query and filters",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.query,i=r.fetchSuggestions,s=void 0!==i&&i;if(""===a.trim()){e(Object(v["setLastFetchAllRequestId"])({id:""}));e(Object(h["setErrorForModule"])({moduleType:T["a"].relevantMessages,error:h["MODULE_ERROR_STATE"].NoQuery,loading:false}));e(Object(h["setErrorForModule"])({moduleType:T["a"].recentMessages,error:h["MODULE_ERROR_STATE"].NoQuery,loading:false}));e(Object(h["setErrorForModule"])({moduleType:"files",error:h["MODULE_ERROR_STATE"].NoQuery,loading:false}));return}var o=t();var c=Object(d["a"])({state:o});c.info(A,"Fetching all search results");var u=Object(p["a"])();e(Object(v["setLastFetchAllRequestId"])({id:u}));e(Object(h["resetScrollPosition"])());e(Object(h["setStateForModule"])({moduleType:T["a"].relevantMessages,moduleState:{loading:true,page:1,error:h["MODULE_ERROR_STATE"].None}}));e(Object(h["setStateForModule"])({moduleType:T["a"].recentMessages,moduleState:{loading:true,page:1,error:h["MODULE_ERROR_STATE"].None}}));e(Object(h["setStateForModule"])({moduleType:"files",moduleState:{loading:true,page:1,error:h["MODULE_ERROR_STATE"].None}}));if(s){e(Object(v["clearFilterSuggestions"])());e(Object(h["setLoadingModule"])({moduleType:"suggestions",loading:true}))}e(P(n()({module:"messages",query:a,sort:"score"},Q(o)))).then(function(r){if(K(t(),u)){Object(d["a"])({getState:t}).info(A,"Relevant message results loaded successfully");var a=t();e(Object(v["setResponse"])({query:r.query,module:T["a"].relevantMessages,result:r}));e(Object(v["setEditableRequestQueryFilterOnly"])({queryFilter:J(a,r.filters)}));e(Object(h["setLoadingModule"])({moduleType:T["a"].relevantMessages,loading:false}));e(Object(k["a"])({files:H(r.items)}));if(s){var i=Y(a,r.filter_suggestions);Object(l["isEmpty"])(i.channelObjects)||e(Object(v["setEditableRequestChannelObjects"])({channels:n()({},Object(v["getEditableRequestChannelObjects"])(a),i.channelObjects)}));e(Object(v["setFilterSuggestions"])({suggestions:Object(l["omit"])(i,"channelObjects")}));e(Object(h["setLoadingModule"])({moduleType:"suggestions",loading:false}))}}}).catch(Promise.TimeoutError,function(){Object(d["a"])({getState:t}).warn(A,"Relevant message results timed out");e(Object(h["setErrorForModule"])({moduleType:T["a"].relevantMessages,error:h["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(r){Object(d["a"])({getState:t}).warn(A,"Relevant message results threw an error while loading");c.error(r);e(Object(h["setErrorForModule"])({moduleType:T["a"].relevantMessages,error:h["MODULE_ERROR_STATE"].Unknown,loading:false}))});e(P(n()({module:"messages",query:a,sort:"timestamp"},Q(o)))).then(function(r){if(K(t(),u)){Object(d["a"])({getState:t}).info(A,"Recent message results loaded successfully");e(Object(v["setResponse"])({query:r.query,module:T["a"].recentMessages,result:r}));e(Object(v["setEditableRequestQueryFilterOnly"])({queryFilter:J(o,r.filters)}));e(Object(h["setLoadingModule"])({moduleType:T["a"].recentMessages,loading:false}));e(Object(k["a"])({files:H(r.items)}))}}).catch(Promise.TimeoutError,function(){Object(d["a"])({getState:t}).warn(A,"Recent message results timed out");e(Object(h["setErrorForModule"])({moduleType:T["a"].recentMessages,error:h["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(r){Object(d["a"])({getState:t}).warn(A,"Recent message results threw an error while loading");c.error(r);e(Object(h["setErrorForModule"])({moduleType:T["a"].recentMessages,error:h["MODULE_ERROR_STATE"].Unknown,loading:false}))});e(P(n()({module:"files",query:a},Q(o)))).then(function(r){if(K(t(),u)){Object(d["a"])({getState:t}).info(A,"Files results loaded successfully");e(Object(v["setResponse"])({query:r.query,module:"files",result:r}));e(Object(v["setEditableRequestQueryFilterOnly"])({queryFilter:J(o,r.filters)}));e(Object(h["setLoadingModule"])({moduleType:"files",loading:false}));r&&r.items&&r.items.length&&e(Object(k["a"])({files:W(r.items)}))}}).catch(Promise.TimeoutError,function(){c.warn(A,"Files results timed out");e(Object(h["setErrorForModule"])({moduleType:"files",error:h["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(r){Object(d["a"])({getState:t}).warn(A,"Files results threw an error while loading");c.error(r);e(Object(h["setErrorForModule"])({moduleType:"files",error:h["MODULE_ERROR_STATE"].Unknown,loading:false}))})});q.propTypes={query:o["b"].string.isRequired};var G=Object(m["e"])("fetch search results by module",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.module,i=r.query,o=r.page,l=void 0===o?1:o,c=s()(r,["module","query","page"]);var u=t();var p=Object(d["a"])({state:u});e(Object(h["setStateForModule"])({moduleType:a,moduleState:{loading:true,page:l,error:h["MODULE_ERROR_STATE"].None}}));e(P(n()({module:c&&c.apiModule||a,query:i,page:l},Q(u),c))).then(function(t){if(1===l){e(Object(v["setResponse"])({query:t.query,module:a,result:t}));e(Object(v["setEditableRequestQueryFilterOnly"])({queryFilter:J(u,t.filters)}))}else e(Object(v["appendResponse"])({module:a,result:t,page:l}));e(Object(h["setLoadingModule"])({moduleType:a,loading:false}));"files"===a&&t&&t.items&&t.items.length?e(Object(k["a"])({files:W(t.items)})):"messages"===a&&e(Object(k["a"])({files:H(t.items)}))}).catch(Promise.TimeoutError,function(){Object(d["a"])({getState:t}).warn(A,"Search timed out");e(Object(h["setErrorForModule"])({moduleType:a,error:h["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(r){Object(d["a"])({getState:t}).warn(A,"Error caught while loading");p.error(r);e(Object(h["setErrorForModule"])({moduleType:T["a"].relevantMessages,error:h["MODULE_ERROR_STATE"].Unknown,loading:false}))})});G.propTypes={module:o["b"].string,query:o["b"].string.isRequired,page:o["b"].number};function H(e){var t=[];e.forEach(function(e){e.messages.forEach(function(e){e.files&&e.files.length&&e.files.forEach(function(e){return t.push(e)})})});return W(t)}function W(e){return e.map(function(e){return Object(l["omit"])(e,["search_name","search_title","iid","search_preview"])})}var V=5;var z=Object(m["e"])("Fetch the list of suggestions from search autocomplete",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.query;var n=t();Object(I["c"])();return Object(E["c"])(e,n,a,V,Object(E["a"])(n)).then(function(r){Object(I["d"])();var a=t();var n=Object(N["getSearchInputBoxDisplayQuery"])(a);var i=Object(C["c"])(a,n);var s=Object(E["b"])(a,r,i);e(Object(b["setSearchAutocompleteSuggestions"])({suggestions:s}));var o=s&&s[0];o&&e(Object(b["setSearchAutocompleteSelection"])({selectedIndex:o.is_type_query_history?null:0,setText:false}))})});z.propTypes={query:o["b"].string.isRequired};function Q(e){var t=Object(g["pageNeedsEnterprise"])(e);var r=Object(v["getRequest"])(e)||{},a=r.queryFilterHistory;var n={max_filter_suggestions:10,request_context:JSON.stringify({active_cid:Object(O["getPrimaryView"])(e),recent_filter_in:a.in,recent_filter_from:a.from})};if(t){n.enterprise_token=Object(g["getFromBootData"])(e,"enterprise_api_token");n.team=Object(_["getTeamId"])(e)}return n}function K(e,t){return Object(v["getLastFetchAllRequestId"])(e)===t}function Y(e,t){var r=Object(_["getTeamId"])(e);var a=Object(l["split"])(Object(j["getUserPref"])(e,"search_exclude_channels")||"",",");var i=Object(v["getRequest"])(e)||{},s=i.queryFilter,o=i.queryFilterHistory;var c=s||{from:[],in:[]},u=c.from,d=c.in;var p=Object(y["f"])(e,Object(O["getPrimaryView"])(e));var m=Object(S["getMemberIdFromIm"])(p)||p&&p.id;var h=Object(g["getCurrentUserId"])(e);var f=Object(l["chain"])([]).concat(h).concat(Object(l["chain"])(t.from).filter(function(e){return!e.checked&&e.id!==h}).map("id").take(R).value()).concat(o.from).concat(u).uniq().value();var b=Object(l["chain"])([]).concat(m||[]).concat(Object(l["chain"])(t.in).filter(function(e){return!e.checked&&e.id!==m}).map(function(e){if(Object(S["isIm"])(e.channel))return n()({},e,{id:Object(S["getMemberIdFromIm"])(e.channel)});return e}).take(R).map("id").value()).concat(o.in||[]).concat(d||[]).concat(Object(l["chain"])(t.in).filter(function(e){return e.checked}).map(function(e){return Object(S["isIm"])(e)?Object(S["getMemberIdFromIm"])(e.channel):e.id}).value()).uniq().difference(a).value();var k={};Object(g["pageNeedsEnterprise"])(e)&&t.in.forEach(function(e){if(Object(S["isIm"])(e))return;e.channel.teams&&-1===e.channel.teams.indexOf(r)&&(k[e.channel.id]=e.channel)});return{from:f,in:b,channelObjects:k}}function J(e,t){return{from:t.from||[],in:t.in&&Object.values(t.in)||[],before:t.before||void 0,after:t.after||void 0,fileType:t.file_types&&t.file_types[0]||void 0}}},,function(e,t,r){"use strict";r.d(t,"g",function(){return R});r.d(t,"a",function(){return P});r.d(t,"e",function(){return F});r.d(t,"f",function(){return B});r.d(t,"d",function(){return U});r.d(t,"h",function(){return q});r.d(t,"c",function(){return G});r.d(t,"b",function(){return H});r.d(t,"i",function(){return W});var a=r(7);var n=r.n(a);var i=r(97);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(5);var u=r.n(c);var d=r(6);var p=r.n(d);var m=r(2);var h=r.n(m);var f=r(12);var v=r(47);var b=r(19);var g=r(16);var _=r(26);var y=r(885);var k=r(160);var O=r(143);var E=r(10);var w=r(658);var C=r(506);var S=r(886);var j=new E["b"]("search");var I={January:j.t("January"),February:j.t("February"),March:j.t("March"),April:j.t("April"),May:j.t("May"),June:j.t("June"),July:j.t("July"),August:j.t("August"),September:j.t("September"),October:j.t("October"),November:j.t("November"),December:j.t("December")};var T={today:j.t("Today"),yesterday:j.t("Yesterday")};var N={};Object(m["each"])(v["e"],function(e,t){N[e.toLocaleLowerCase()]=t;N[t.toLocaleLowerCase()]=t});var A=function e(t){return N[(t||"").toLocaleLowerCase()]};var R=function(){function e(){u()(this,e)}p()(e,[{key:"toString",value:function e(){return""}},{key:"toHtml",value:function e(){return W(Object(O["a"])(this.toString()))}},{key:"toTextyString",value:function e(){return this.toString()}},{key:"toMap",value:function e(t){return{string:this.toString(t)}}},{key:"getRawIdAndNameForXwsChannelWorkaround",value:function e(){return{id:this._id,name:this._name}}},{key:"type",get:function e(){return v["a"].UNKNOWN}},{key:"logId",get:function e(){return""}}],[{key:"tokenListFromString",value:function e(t,r){var a=r.replace(/[\r\n]+/g," ");var n=new RegExp('^\\s*(("([^"]*)")|([^\\s:]+:(([^<>\\s]+)|(<[^>]+>)))|(@[^\\s]+|<[^>]+>)|([^\\s]+))(.*)$');var i=10;var s=[];var o=a;var l=n.exec(o);while(null!==l){var c=l[3];var u=l[4];var d=l[8];var p=l[9];if(l[i]&&o.length===l[i].length)break;o=l[i];if(c)s.push({is_phrase:true,string:c});else if(d)s.push({is_member:true,string:d});else if(u)s.push({is_filter:true,string:u});else if(p){var h=s.length>0?s.slice(-1)[0]:null;h&&h.is_word?h.string=h.string+" "+p:s.push({is_word:true,string:p})}l=n.exec(o)}var f=Object(m["map"])(s,function(e){if(e.is_phrase)return new x(e.string);if(e.is_filter){var r=e.string.indexOf(":");var a=A(e.string.substring(0,r));var n=e.string.substring(r+1);var i=v["e"][a]+":"+n;switch(a){case"in":return F.fromString(t,i);case"from":return B.fromString(t,i,v["f"].FROM);case"to":return B.fromString(t,i,v["f"].TO);case"has":return U.fromString(i);case"type":return q.fromString(i);case"before":return G.fromString(i,v["f"].BEFORE);case"during":return G.fromString(i,v["f"].DURING);case"on":return G.fromString(i,v["f"].ON);case"after":return G.fromString(i,v["f"].AFTER);default:break}}else if(e.is_member)return L.fromString(t,e.string);return new M(e.string)});return f}}]);return e}();var M=function(e){l()(t,e);function t(e){u()(this,t);var r=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.string=e;return r}p()(t,[{key:"toString",value:function e(){return this.string?this.string:""}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_string:true,html:this.toHtml()})}},{key:"type",get:function e(){return v["a"].STRING}},{key:"logId",get:function e(){return Object(S["a"])(this.string)}}]);return t}(R);var P=function(e){l()(t,e);function t(e,r){u()(this,t);var a=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a._querySuggestionScore=e;a.string=r;return a}p()(t,[{key:"querySuggestionScore",get:function e(){return this._querySuggestionScore}},{key:"type",get:function e(){return v["a"].API}}]);return t}(M);var x=function(e){l()(t,e);function t(e){u()(this,t);var r=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.phrase=e;return r}p()(t,[{key:"toString",value:function e(){return'"'+this.phrase+'"'}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_phrase:true,phrase:this.phrase})}},{key:"type",get:function e(){return v["a"].PHRASE}},{key:"logId",get:function e(){return Object(S["a"])(this.phrase)}}]);return t}(R);var D=function(e){l()(t,e);function t(e){u()(this,t);var r=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r._frecencyScore=e;return r}p()(t,[{key:"frecencyScore",get:function e(){return this._frecencyScore}}]);return t}(R);var F=function(e){l()(t,e);function t(e,r,a,i){u()(this,t);var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));s.state=r;s._id=a;s._name=i;return s}p()(t,[{key:"toString",value:function e(){return this._toStringInternal({formatChannel:function e(t,r){return v["e"].in+":<#"+t+"|"+r+">"},formatMpim:function e(t){return v["e"].in+":<#"+t.id+">"},formatMember:function e(t){return v["e"].in+":<@"+t+">"}})}},{key:"toTextyString",value:function e(){var t=this;return this._toStringInternal({formatChannel:function e(t,r){return v["e"].in+":#"+r},formatMpim:function e(r){var a=Object(w["b"])(t.state,r);return v["e"].in+":"+a},formatMember:function e(t,r){return v["e"].in+":<@"+t+"|@"+r+">"}})}},{key:"_toStringInternal",value:function e(t){var r=t.formatChannel,a=t.formatMpim,n=t.formatMember;var i=Object(C["a"])(this.state);var s=this._id?Object(y["a"])(i,this._id)||Object(b["getChannelById"])(i,this._id):Object(y["b"])(i,this._name)||Object(b["getChannelByName"])(i,this._name);if(s&&Object(f["getChannelType"])(s)&&!Object(f["isUnknownOrNonExistent"])(s)&&!Object(f["isIm"])(s)){if(Object(f["isMpim"])(s))return a(s);var o=Object(f["getDisplayNameForChannel"])(i,s,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}).replace(/^#/,"");return r(s.id,o)}if(this._name&&Object(k["a"])(this._id))return r(this._id,this._name);var l=this._id?Object(_["getMemberById"])(i,this._id):Object(_["getMemberByName"])(i,this._name);if(l){var c=Object(g["getPrefCompliantMemberNameById"])(i,l.id);return n(l.id,c)}if(this._id){var u=Object(g["getPrefCompliantMemberNameById"])(i,this._id);return n(this._id,u)}return v["e"].in+":"+this._name}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_in_filter:true,string:this.toString(),channel:this.channelOrNull,fallbackChannelName:this._name,user:this.memberOrNull})}},{key:"type",get:function e(){return v["a"].FILTER_IN}},{key:"entityId",get:function e(){if(this._id)return this._id;var t=this.channelOrNull;if(t)return t.id;var r=this.memberOrNull;if(r)return r.id;return null}},{key:"channelOrNull",get:function e(){var t=Object(C["a"])(this.state);return this._id?Object(b["getChannelById"])(t,this._id)||Object(y["a"])(t,this._id):Object(b["getChannelByName"])(t,this._name)||Object(y["b"])(t,this._name)}},{key:"memberOrNull",get:function e(){var t=Object(C["a"])(this.state);return this._id?Object(_["getMemberById"])(t,this._id):Object(_["getMemberByName"])(t,this._name)}},{key:"logId",get:function e(){return this._id}}],[{key:"channelExistsById",value:function e(t,r){var a=Object(b["getChannelById"])(t,r);return a&&!Object(f["isUnknownOrNonExistent"])(a)||!!Object(y["a"])(t,r)}},{key:"entityExistsById",value:function e(t,r){var a=Object(_["getMemberById"])(t,r);return this.channelExistsById(t,r)||a&&!Object(g["isUnknownOrNonExistent"])(a)}},{key:"channelExistsByName",value:function e(t,r){var a=Object(b["getChannelByName"])(t,r);return a&&!Object(f["isUnknownOrNonExistent"])(a)||!!Object(y["b"])(t,r)}},{key:"entityExistsByName",value:function e(t,r){var a=Object(_["getMemberByName"])(t,r);return this.channelExistsByName(t,r)||a&&!Object(g["isUnknownOrNonExistent"])(a)}},{key:"fromString",value:function e(r,a){var n=new RegExp("^("+v["e"].in+"|in):((<[@#]?([A-Z0-9a-z]+)(\\|[\\s]?([#@]?([^>]+)))?>)|([#@]?([^\\s]+)))$").exec(a);if(n&&n[4]&&this.entityExistsById(r,n[4]))return new t(1,r,n[4],n[6]);if(n&&n[9]&&this.entityExistsByName(r,n[9]))return new t(1,r,null,n[9]);if(n&&n[2]&&this.channelExistsByName(r,n[2]))return new t(1,r,null,n[2]);if(n&&n[8])return new t(1,r,null,n[8]);return new M(a)}}]);return t}(D);var L=function(e){l()(t,e);function t(e,r,a,i){u()(this,t);var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));s.state=r;s._id=a;s._name=i;return s}p()(t,[{key:"toString",value:function e(){if(!this._id)return"@"+this._name;return"<@"+this._id+">"}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_member:true,user:this.memberOrNull})}},{key:"toTextyString",value:function e(){var t=Object(C["a"])(this.state);if(!this._id){var r=Object(_["getMemberByName"])(t,this._name);if(r){var a=Object(g["getPrefCompliantMemberNameById"])(t,r.id);return"<@"+r.id+"|@"+a+">"}return"@"+this._name}var n=Object(g["getPrefCompliantMemberNameById"])(t,this._id);return"<@"+this._id+"|@"+n+">"}},{key:"type",get:function e(){return v["a"].MEMBER}},{key:"entityId",get:function e(){var t=Object(C["a"])(this.state);if(this._id)return this._id;var r=Object(_["getMemberByName"])(t,this._name);return r?r.id:null}},{key:"memberOrNull",get:function e(){var t=Object(C["a"])(this.state);return this._id?Object(_["getMemberById"])(t,this._id):Object(_["getMemberByName"])(t,this._name)}},{key:"logId",get:function e(){return this.entityId}}],[{key:"fromString",value:function e(t,r){var a=new RegExp("^((<@?([^\\s|>]+)(\\|[\\s]?@?([^>]+))?>)|(@?([^\\s]+)))$").exec(r);var n=void 0;a&&a[3]&&(n=Object(_["getMemberById"])(t,a[3]));(!n||Object(g["isUnknownOrNonExistent"])(n))&&a&&a[7]&&(n=Object(_["getMemberByName"])(t,a[7]));if(n&&!Object(g["isUnknownOrNonExistent"])(n))return new this(1,t,n.id,n.name);return new M(r)}}]);return t}(D);var B=function(e){l()(t,e);function t(e,r,a,i,s){u()(this,t);var o=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a,i));o.cleanModifierType=[v["f"].FROM,v["f"].TO].includes(s)?s:"";return o}p()(t,[{key:"toString",value:function e(){return this.modifierName+":"+s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this)}},{key:"toMap",value:function e(r){var a={};a["is_type_"+this.cleanModifierType+"_filter"]=true;return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_member_filter:true,modifier:this.cleanModifierType,modifier_name:this.modifierName},a)}},{key:"toTextyString",value:function e(){return this.modifierName+":"+s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toTextyString",this).call(this)}},{key:"type",get:function e(){switch(this.cleanModifierType){case v["f"].FROM:return v["a"].FILTER_FROM;case v["f"].TO:return v["a"].FILTER_TO;default:return v["a"].UNKNOWN}}},{key:"modifierName",get:function e(){return v["e"][this.cleanModifierType]}}],[{key:"fromString",value:function e(t,r,a){var n=[v["f"].FROM,v["f"].TO].includes(a)?a:"";var i=v["e"][n];var s=new RegExp("^("+i+"|"+n+"):((<@?([^\\s|>]+)(\\|@?([^>]+))?>)|(@?([^\\s]+)))$").exec(r);var o=void 0;s&&s[4]&&(o=Object(_["getMemberById"])(t,s[4]));!o&&s&&s[8]&&(o=Object(_["getMemberByName"])(t,s[8]));if(o&&!Object(g["isUnknownOrNonExistent"])(o))return new this(1,t,o.id,o.name,n);return new M(r)}}]);return t}(L);var U=function(e){l()(t,e);function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u()(this,t);var a=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.thing=e;a.canLog=r;return a}p()(t,[{key:"toString",value:function e(){return v["e"].has+":"+this.thingName}},{key:"thingHtml",value:function e(){return W(Object(O["a"])(this.thingName))}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_has_filter:true,thingHtml:this.thingHtml(),thing:this.thingName})}},{key:"type",get:function e(){return v["a"].FILTER_HAS}},{key:"thingName",get:function e(){return v["d"][this.thing]?v["d"][this.thing]:this.thing}},{key:"logId",get:function e(){if(true===this.canLog)return this.thingName;return""}}],[{key:"fromString",value:function e(r){var a=new RegExp("("+v["e"].has+"|has):([^\\s]+)").exec(r);if(a&&a[2])return new t(a[2],false);return new M(r)}}]);return t}(R);var q=function(e){l()(t,e);function t(e){u()(this,t);var r=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r._fileType=e;return r}p()(t,[{key:"toString",value:function e(){return v["e"].type+":"+this.fileType}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_type_filter:true,file_type:this.fileType})}},{key:"type",get:function e(){return v["a"].FILTER_TYPE}},{key:"fileType",get:function e(){return this._fileType}},{key:"logId",get:function e(){return this.fileType}}],[{key:"fromString",value:function e(r){var a=new RegExp("("+v["e"].type+"|type):([^\\s]+)").exec(r);if(a&&a[2])return new t(a[2]);return new M(r)}}]);return t}(R);var G=function(e){l()(t,e);function t(e,r){u()(this,t);var a=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.dateString=e;a.cleanModifierType=[v["f"].BEFORE,v["f"].DURING,v["f"].ON,v["f"].AFTER].includes(r)?r:"";return a}p()(t,[{key:"toString",value:function e(){return this.modifierName+":"+this.dateString}},{key:"toMap",value:function e(r){var a={};a["is_"+this.dateString]=true;var n=I[this.dateString]||T[this.dateString]||this.dateString;return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_date_filter:true,date_string:this.dateString,date_string_normalized:n,modifier:this.cleanModifierType,modifier_name:this.modifierName},a)}},{key:"type",get:function e(){switch(this.cleanModifierType){case"before":return v["a"].FILTER_BEFORE;case"during":return v["a"].FILTER_DURING;case"on":return v["a"].FILTER_ON;case"after":return v["a"].FILTER_AFTER;default:return v["a"].UNKNOWN}}},{key:"modifierName",get:function e(){return v["e"][this.cleanModifierType]}},{key:"logId",get:function e(){return this.dateString}}],[{key:"fromString",value:function e(r,a){var n=[v["f"].BEFORE,v["f"].DURING,v["f"].ON,v["f"].AFTER].includes(a)?a:"";var i=v["e"][n];var s=new RegExp("("+n+"|"+i+"):([^\\s]+)");var o=s.exec(r);if(o&&o[2])return new t(o[2],n);return new M(r)}}]);return t}(R);var H=function(){function e(t){u()(this,e);this.date=t}p()(e,[{key:"suggestionsPromise",value:function e(t,r,a){return Promise.resolve(this.suggestions(t,r,a))}},{key:"suggestions",value:function e(t,r,a){return Object(m["chain"])([this.suggestionsRelativeDates(t,r,a),this.suggestionsMonths(t,r,a),this.suggestionsYears(t,r,a)]).flatten().sortBy(function(e){return-e.score}).slice(0,r).value()}},{key:"suggestionsRelativeDates",value:function e(t,r,a){var n=[T.yesterday];a!==v["f"].AFTER&&n.push(T.today);return Object(m["chain"])(n).filter(function(e){return Object(m["startsWith"])(e.toLowerCase(),t.toLowerCase())}).slice(0,r).map(function(e,t){return{model_ob:e,score:.95-.01*t}}).value()}},{key:"suggestionsMonths",value:function e(t,r,a){if(a===v["f"].ON)return[];return Object(m["chain"])(this.orderedMonthNames()).filter(function(e){return Object(m["startsWith"])(e.toLowerCase(),t.toLowerCase())}).slice(0,r).map(function(e,t){return{model_ob:e,score:(12-t)/12}}).value()}},{key:"suggestionsYears",value:function e(t,r,a){if(a===v["f"].ON)return[];var n=a===v["f"].AFTER?this.date.getYear()-1:this.date.getYear();var i=1900+n;return Object(m["chain"])(Object(m["range"])(i,i-5,-1)).filter(function(e){return Object(m["startsWith"])(e.toString(),t)}).slice(0,r).map(function(e,t){return{model_ob:e.toString(),score:(r-t)/r}}).value()}},{key:"monthNameFromInt",value:function e(t){return[I.January,I.February,I.March,I.April,I.May,I.June,I.July,I.August,I.September,I.October,I.November,I.December][t]}},{key:"orderedMonthNames",value:function e(){var t=this;return Object(m["map"])(Object(m["range"])(0,12),function(e){return t.monthNameFromInt((t.date.getMonth()-e+12)%12)})}}]);return e}();function W(e){return Object(O["c"])(e,null,{no_linking:true,do_specials:true,do_inline_imgs:false,no_jumbomoji:true,no_highlights:true,token_overrides:{"<CODE:START>":"`","<CODE:END>":"`","<B:START>":"*","<B:END>":"*","<I:START>":"_","<I:END>":"_","<STRIKE:START>":"~","<STRIKE:END>":"~","<QUOTE:START>":">","<QUOTE:END>":""}})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"b",function(){return i});r.d(t,"c",function(){return a});r.d(t,"a",function(){return n});var a={CARD_NUMBER:"cardNumber",CARD_EXPIRY:"cardExpiry",CARD_CVC:"cardCvc",POSTAL_CODE:"postalCode"};var n="new_credit_card_id";var i=9},,,function(e,t,r){"use strict";var a=r(7);var n=r.n(a);var i=r(97);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(5);var u=r.n(c);var d=r(6);var p=r.n(d);var m=r(2);var h=r(658);var f=r(790);var v=r(2964);var b=r(21);var g=r(47);function _(e){return O.fromSuggestion(e)}var y={testing:{frecency:.01,type_navigation_user:4,type_navigation_channel:4},e1_lr:{frecency:.7387,type_navigation_user:.1258,file_suggestion_score:.0405,active_token_string:.0097,active_token_member:3e-4,active_token_phrase:-0,active_token_filter_on:-2e-4,query_suggestion_score_v2:-3e-4,active_token_filter_has:-7e-4,type_navigation_file:-8e-4,active_token_filter_during:-.0013,active_token_filter_after:-.0014,active_token_filter_before:-.0014,active_token_filter_in:-.0015,active_token_filter_to:-.0058,type_navigation_channel:-.0107,active_token_filter_from:-.0227,active_token_query_suggestion:-.023,type_query:-.0482,type_navigation_mpim:-.0661,type_navigation_expert_channel:-.1,bm25_score:1e-4},e2_unified:{frecency:1.1233,type_navigation_channel:-.0209,type_navigation_file:-7e-4,type_navigation_mpim:-.0676,type_navigation_user:-.9167,type_query:1.0322,active_token_filter_in:3e-4,active_token_filter_from:1.0586,active_token_filter_to:-.0065,active_token_filter_before:-.0014,active_token_filter_during:-.0011,active_token_filter_on:-1e-4,active_token_filter_after:-.001,active_token_filter_has:-6e-4,active_token_member:3e-4,active_token_string:.0079,active_token_phrase:0,string_exact_match:1e-4,string_exact_prefix_match:-.0105,string_normal_match:-3e-4,string_normal_prefix_match:-.0047,string_same_number_words:-.0082,excess_string_length:.0828,active_token_query_suggestion:-.0244,query_suggestion_score_v2:1,file_suggestion_score:1,type_navigation_expert_channel:-.1,bm25_score:1e-4,type_query_history:0},e3_unified:{frecency:.1119,type_navigation_channel:-.0044,type_navigation_file:-.0036,type_navigation_mpim:-.0466,type_navigation_user:.0979,type_query:-.0432,active_token_filter_in:2e-4,active_token_filter_from:-.0151,active_token_filter_to:-.001,active_token_filter_before:-.0014,active_token_filter_during:-8e-4,active_token_filter_on:-2e-4,active_token_filter_after:-.001,active_token_filter_has:-7e-4,active_token_member:0,active_token_string:.014,active_token_phrase:0,string_exact_match:-1e-4,string_exact_prefix_match:-.0228,string_normal_match:-.001,string_normal_prefix_match:-.02,string_same_number_words:-.0158,excess_string_length:-.005,active_token_query_suggestion:-.0374,query_suggestion_score_v2:1,file_suggestion_score:1,type_navigation_expert_channel:-.1,bm25_score:1e-4,type_query_history:0},omni_switcher_1:{frecency:.1119,type_navigation_channel:-.0044,type_navigation_file:-.0036,type_navigation_mpim:-.0466,type_navigation_user:.0979,type_query:-.0432,active_token_filter_in:2e-4,active_token_filter_from:-.0151,active_token_filter_to:-.001,active_token_filter_before:-.0014,active_token_filter_during:-8e-4,active_token_filter_on:-2e-4,active_token_filter_after:-.001,active_token_filter_has:-7e-4,active_token_member:0,active_token_string:.014,active_token_phrase:0,string_exact_match:-1e-4,string_exact_prefix_match:-.0228,string_normal_match:-.001,string_normal_prefix_match:-.02,string_same_number_words:-.0158,excess_string_length:-.005,active_token_query_suggestion:-.0374,query_suggestion_score_v2:1,file_suggestion_score:1,type_navigation_expert_channel:-.1,bm25_score:1e-4,type_query_history:0,type_navigation_team:1,type_navigation_view:1,type_user_query:4},search_switcher_1:{frecency:1}};var k=function(){function e(t){u()(this,e);this.featureList=t}p()(e,[{key:"weightForFeature",value:function e(t,r){return 1}},{key:"score",value:function e(t){var r=this;return Object(m["reduce"])(this.featureList,function(e,a){return e+r.weightForFeature(a,t)*a.numericValue},0)}},{key:"featuresVersion",get:function e(){return"0"}},{key:"serialized",get:function e(){var t=Object(m["join"])(Object(m["map"])(this.featureList,function(e){return e.serialized}),",");return this.featuresVersion+":"+t}}]);return e}();var O=function(e){l()(t,e);function t(e){u()(this,t);var r=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));window.AutocompleteModelWeightsMap=y;return r}p()(t,[{key:"weightForFeature",value:function e(t,r){return y[r][t.name]?y[r][t.name]:0}},{key:"featuresVersion",get:function e(){return"v6"}}],[{key:"fromSuggestion",value:function e(t){return new this([new T(t),new w("query_suggestion_score"),new j("type_navigation_channel",g["b"].CHANNEL_NAVIGATION,t),new j("type_navigation_file",g["b"].FILE_NAVIGATION,t),new j("type_navigation_mpim",g["b"].MPIM_NAVIGATION,t),new j("type_navigation_user",g["b"].USER_NAVIGATION,t),new j("type_query",g["b"].QUERY,t),new j("type_query_history",g["b"].QUERY_HISTORY,t),new I("active_token_filter_in",g["a"].FILTER_IN,t),new I("active_token_filter_from",g["a"].FILTER_FROM,t),new I("active_token_filter_to",g["a"].FILTER_TO,t),new I("active_token_filter_before",g["a"].FILTER_BEFORE,t),new I("active_token_filter_during",g["a"].FILTER_DURING,t),new I("active_token_filter_on",g["a"].FILTER_ON,t),new I("active_token_filter_after",g["a"].FILTER_AFTER,t),new I("active_token_filter_has",g["a"].FILTER_HAS,t),new I("active_token_member",g["a"].MEMBER,t),new I("active_token_string",g["a"].STRING,t),new I("active_token_phrase",g["a"].PHRASE,t),new P("string_exact_match",t,x),new P("string_exact_prefix_match",t,D),new P("string_normal_match",t,F),new P("string_normal_prefix_match",t,L),new P("string_same_number_words",t,B),new M("excess_string_length",t,U),new C(t),new A(t),new I("active_token_query_suggestion",g["a"].API,t),new N(t),new j("type_navigation_expert_channel",g["b"].EXPERT_CHANNEL_NAVIGATION,t),new R(t),new j("type_navigation_team",g["b"].TEAM_NAVIGATION,t),new j("type_navigation_view",g["b"].VIEW_NAVIGATION,t),new j("type_user_query",g["b"].QUERY_USER,t)])}}]);return t}(k);var E=function(){function e(t,r){u()(this,e);this._name=t;this._valueOrNull=r}p()(e,[{key:"name",get:function e(){return this._name}},{key:"numericValue",get:function e(){var t=parseFloat(this._valueOrNull);if(null===this._valueOrNull||isNaN(t))return 0;return t}},{key:"stringValue",get:function e(){if(null===this._valueOrNull||void 0===this._valueOrNull)return"";return this._valueOrNull.toString()}},{key:"serialized",get:function e(){return this.stringValue}}]);return e}();var w=function(e){l()(t,e);function t(e){u()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,null))}return t}(E);var C=function(e){l()(t,e);function t(e){u()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"id",e.logId))}return t}(E);var S=function(e){l()(t,e);function t(e,r){u()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r?1:0))}p()(t,[{key:"serialized",get:function e(){if(!this._valueOrNull)return"";return"1"}}]);return t}(E);var j=function(e){l()(t,e);function t(e,r,a){u()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a.type===r))}return t}(S);var I=function(e){l()(t,e);function t(e,r,a){u()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a.lastSuggestionToken&&a.lastSuggestionToken.type===r))}return t}(S);var T=function(e){l()(t,e);function t(e){u()(this,t);var r=null;e.type===g["b"].QUERY?r=e.lastSuggestionToken&&"number"===typeof e.lastSuggestionToken.frecencyScore?e.lastSuggestionToken.frecencyScore:null:e.type!==g["b"].CHANNEL_NAVIGATION&&e.type!==g["b"].MPIM_NAVIGATION&&e.type!==g["b"].USER_NAVIGATION&&e.type!==g["b"].TEAM_NAVIGATION&&e.type!==g["b"].VIEW_NAVIGATION||(r=e.frecencyScore);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"frecency",r))}return t}(E);var N=function(e){l()(t,e);function t(e){u()(this,t);var r=null;r=e.type===g["b"].QUERY&&e.lastSuggestionToken&&e.lastSuggestionToken.type===g["a"].API?e.lastSuggestionToken.querySuggestionScore:e.querySuggestionScore||r;return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"query_suggestion_score_v2",r))}return t}(E);var A=function(e){l()(t,e);function t(e){u()(this,t);var r=null;e.type===g["b"].FILE_NAVIGATION&&(r=e.rawScore);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"file_suggestion_score",r))}return t}(E);var R=function(e){l()(t,e);function t(e){u()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"bm25_score",e.bm25Score||null))}return t}(E);var M=function(e){l()(t,e);function t(e,r,a){u()(this,t);var i=t.textOrNullFromSuggestion(r);if(!i){var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,null));return n()(s)}var o=t.clean(r.query);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a(i,o)))}p()(t,null,[{key:"clean",value:function e(t){return String(t)}},{key:"normalized",value:function e(r){return t.clean(r).toLowerCase().replace(/[^a-z0-9]/g," ").replace(/\s+/g," ")}},{key:"lastSuggestionTokenString",value:function e(r){return r&&r.lastSuggestionToken?t.clean(r.lastSuggestionToken.toString()):""}},{key:"textOrNullFromSuggestion",value:function e(r){if(t.isActiveTokenStringLike(r))return t.lastSuggestionTokenString(r);if(r.type===g["b"].FILE_NAVIGATION)return r.toString();return null}},{key:"isActiveTokenStringLike",value:function e(t){if(!t.lastSuggestionToken)return false;return t.lastSuggestionToken.type===g["a"].STRING||t.lastSuggestionToken.type===g["a"].PHRASE||t.lastSuggestionToken.type===g["a"].API}}]);return t}(E);var P=function(e){l()(t,e);function t(e,r,a){u()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,function(e,t){return a(e,t)?1:0}))}p()(t,[{key:"serialized",get:function e(){if(!this._valueOrNull)return"";return"1"}}]);return t}(M);function x(e,t){return e===t}function D(e,t){return Object(m["startsWith"])(e,t)}function F(e,t){return M.normalized(e)===M.normalized(t)}function L(e,t){return Object(m["startsWith"])(M.normalized(e),M.normalized(t))}function B(e,t){return Object(m["words"])(e).length+Object(m["endsWith"])(e," ")===Object(m["words"])(t).length}function U(e,t){return Math.max(0,e.length-t.length)}var q=r(282);var G=r(886);r.d(t,"f",function(){return W});r.d(t,"h",function(){return V});r.d(t,"e",function(){return z});r.d(t,"a",function(){return K});r.d(t,"b",function(){return Y});r.d(t,"i",function(){return J});r.d(t,"d",function(){return Z});r.d(t,"c",function(){return X});r.d(t,"g",function(){return $});r.d(t,"j",function(){return ee});var H=function(){function e(t){u()(this,e);this.state=t}p()(e,[{key:"toMap",value:function e(t){return{score:this.score(t),type:this.type,featureVector:this.featureVector.serialized}}},{key:"score",value:function e(t){return this.featureVector.score(t)}},{key:"toString",value:function e(){return""}},{key:"toTextyString",value:function e(){return Object(v["a"])(this.toString(),Object(b["getUserHighlightWords"])(this.state))}},{key:"featureVector",get:function e(){return _(this)}},{key:"type",get:function e(){return g["b"].UNKNOWN}},{key:"logId",get:function e(){return""}}]);return e}();var W=function(e){l()(t,e);function t(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];u()(this,t);var i=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i._query=r;i.suggestionTokenList=a;return i}p()(t,[{key:"withQuerySuggestionToken",value:function e(r){return new t(this.state,"",this.suggestionTokenList.concat([r]))}},{key:"toMap",value:function e(r){var a=this.toTextyString();var n=this.toString();return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_query_completion:true,suggestion_replacement:a,suggestion_replacement_for_request:n,token_list:Object(m["map"])(this.suggestionTokenList,function(e){return e.toMap(r)}),key:a})}},{key:"toString",value:function e(){return Object(m["join"])(Object(m["map"])(this.suggestionTokenList,function(e){return e.toString()})," ")}},{key:"toHtml",value:function e(){return Object(m["join"])(Object(m["map"])(this.suggestionTokenList,function(e){return e.toHtml()})," ")}},{key:"toTextyString",value:function e(){return Object(m["join"])(Object(m["map"])(this.suggestionTokenList,function(e){return e.toTextyString()})," ")}},{key:"type",get:function e(){return g["b"].QUERY}},{key:"query",get:function e(){return this._query}},{key:"lastSuggestionToken",get:function e(){return!this.suggestionTokenList||this.suggestionTokenList.length<1?null:this.suggestionTokenList[this.suggestionTokenList.length-1]}},{key:"logId",get:function e(){return this.lastSuggestionToken?this.lastSuggestionToken.logId:""}}],[{key:"fromString",value:function e(t,r){var a=q["g"].tokenListFromString(t,r);return new this(t,"",a)}}]);return t}(H);var V=function(e){l()(t,e);function t(){u()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"type",get:function e(){return g["b"].QUERY_USER}}]);return t}(W);var z=function(e){l()(t,e);function t(e,r,a,i){u()(this,t);var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,q["g"].tokenListFromString(e,a)));s.index=i;s.exact_string=a;return s}p()(t,[{key:"score",value:function e(t){return 50-this.index}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_query_history:true,exact_string:this.exact_string,deletable:true})}},{key:"type",get:function e(){return g["b"].QUERY_HISTORY}},{key:"logId",get:function e(){return Object(G["a"])(this.exact_string)}}]);return t}(W);var Q=function(e){l()(t,e);function t(e,r,a){u()(this,t);var i=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i._frecencyScore=r;i._query=a;return i}p()(t,[{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_navigational:true})}},{key:"frecencyScore",get:function e(){return this._frecencyScore}},{key:"query",get:function e(){return this._query}},{key:"logId",get:function e(){return""}}]);return t}(H);var K=function(e){l()(t,e);function t(e,r,a,i){u()(this,t);var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,i));s.channel=a;return s}p()(t,[{key:"toString",value:function e(){return"<#"+this.channel.id+"|"+this.channel.name+">"}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_channel:true,channel:this.channel,key:this.channel.id,id:this.channel.id})}},{key:"type",get:function e(){return g["b"].CHANNEL_NAVIGATION}},{key:"logId",get:function e(){return""+this.channel.id}}]);return t}(Q);var Y=function(e){l()(t,e);function t(e,r,a,i,s){u()(this,t);var o=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,null,i,s));o._querySuggestionScore=r;o._bm25Score=a;return o}p()(t,[{key:"type",get:function e(){return g["b"].EXPERT_CHANNEL_NAVIGATION}},{key:"querySuggestionScore",get:function e(){return this._querySuggestionScore}},{key:"bm25Score",get:function e(){return this._bm25Score}}]);return t}(K);var J=function(e){l()(t,e);function t(e,r,a,i){u()(this,t);var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,i));s.user=a;return s}p()(t,[{key:"getUser",value:function e(){return this.user}},{key:"toString",value:function e(){var t=this.user.profile.real_name||this.user.profile.display_name||this.user.name;return"<@"+this.user.id+"|@"+t+">"}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_user:true,user:this.user,key:this.user.id,id:this.user.id})}},{key:"type",get:function e(){return g["b"].USER_NAVIGATION}},{key:"logId",get:function e(){return""+this.user.id}}]);return t}(Q);var Z=function(e){l()(t,e);function t(e,r,a,i){u()(this,t);var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,i));s.mpim=a;return s}p()(t,[{key:"toString",value:function e(){var t=Object(h["b"])(this.state,this.mpim);return"<#"+this.mpim.id+"|"+t+">"}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_mpim:true,mpim:this.mpim,key:this.mpim.id,id:this.mpim.id})}},{key:"type",get:function e(){return g["b"].MPIM_NAVIGATION}},{key:"logId",get:function e(){return""+this.mpim.id}}]);return t}(Q);var X=function(e){l()(t,e);function t(e,r,a,i){u()(this,t);var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,0,i));s.file=a;s._rawScore=r;return s}p()(t,[{key:"toString",value:function e(){return this.file.title}},{key:"toHtml",value:function e(){return Object(q["i"])(this.toString())}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_file:true,file:this.file,type:this.fileType,html:this.toHtml(),fileTypeDescription:this.fileTypeDescription,key:this.file.id,id:this.file.id})}},{key:"rawScore",get:function e(){return this._rawScore}},{key:"type",get:function e(){return g["b"].FILE_NAVIGATION}},{key:"fileId",get:function e(){return this.file.id}},{key:"fileType",get:function e(){return this.file.highlight_type||this.file.filetype}},{key:"fileTypeDescription",get:function e(){return this.file.is_external?Object(f["a"])(this.file):this.file.pretty_type}},{key:"logId",get:function e(){return""+this.file.id}}]);return t}(Q);var $=function(e){l()(t,e);function t(e,r,a,i){u()(this,t);var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,i));s.model=a;s._rawScore=r;return s}p()(t,[{key:"toString",value:function e(){return this.model.name}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_team:true,team:this.model,key:this.model.id,id:this.model.id})}},{key:"type",get:function e(){return g["b"].TEAM_NAVIGATION}},{key:"logId",get:function e(){return""+this.model.id}}]);return t}(Q);var ee=function(e){l()(t,e);function t(e,r,a,i){u()(this,t);var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,i));s.model=a;s._rawScore=r;return s}p()(t,[{key:"toString",value:function e(){return this.model.name}},{key:"toMap",value:function e(r){return Object(m["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_view:true,view:this.model,key:this.model.id,id:this.model.id})}},{key:"type",get:function e(){return g["b"].VIEW_NAVIGATION}},{key:"logId",get:function e(){return""+this.model.id}}]);return t}(Q)},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"c",function(){return i});r.d(t,"d",function(){return s});r.d(t,"e",function(){return o});r.d(t,"o",function(){return l});r.d(t,"g",function(){return c});r.d(t,"j",function(){return u});r.d(t,"l",function(){return d});r.d(t,"f",function(){return p});r.d(t,"i",function(){return m});r.d(t,"h",function(){return h});r.d(t,"k",function(){return f});r.d(t,"p",function(){return v});r.d(t,"a",function(){return g});r.d(t,"n",function(){return _});r.d(t,"t",function(){return y});r.d(t,"x",function(){return k});r.d(t,"w",function(){return O});r.d(t,"u",function(){return E});r.d(t,"m",function(){return w});r.d(t,"v",function(){return C});r.d(t,"r",function(){return S});r.d(t,"q",function(){return j});r.d(t,"s",function(){return I});var a=r(4);var n=Object(a["d"])(function(e){if(!e||!e.checkoutFlow||!e.checkoutFlow.companyAddress)return null;return e.checkoutFlow.companyAddress});var i=Object(a["d"])(function(e){var t=n(e);if(!t)return null;return t.country});var s=Object(a["d"])(function(e){var t=n(e);if(!t)return null;return t.postalCode});var o=Object(a["d"])(function(e){if(!e||!e.checkoutFlow||!e.checkoutFlow.config)return null;return e.checkoutFlow.config});var l=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.isCheckoutAddressFormDataLoaded});var c=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.creditCardData});var u=Object(a["d"])(function(e){var t=c(e);if(!t)return null;return t.token});var d=Object(a["d"])(function(e){var t=u(e);if(!t)return null;return t.id});var p=Object(a["d"])(function(e){var t=u(e);if(!t||!t.card)return null;return t.card.brand});var m=Object(a["d"])(function(e){var t=u(e);if(!t||!t.card)return null;return t.card.last4});var h=Object(a["d"])(function(e){var t=c(e);if(!t)return null;return t.formError});var f=Object(a["d"])(function(e){var t=c(e);if(!t)return null;return t.tokenError});var v=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return false;return e.checkoutFlow.isCreatingCreditCardToken});var b=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.paymentStatus});var g=Object(a["d"])(function(e){var t=b(e);if(!t)return false;return true===t.ok&&!t.error});var _=Object(a["d"])(function(e){var t=b(e);if(!t)return"";if(t.error&&t.msg)return t.msg;return t.error});var y=Object(a["d"])(function(e){var t=b(e);if(!t)return false;return t.isProcessingPayment});var k=Object(a["d"])(function(e){var t=o(e);if(!t)return null;return t.stripeApiKey});var O=Object(a["d"])(function(e){var t=o(e);if(!t)return null;return t.sourcesPayable});var E=Object(a["d"])(function(e){var t=o(e);if(!t||!t.user)return false;return t.user.is_owner});var w=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.invoiceData});var C=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.paymentMethodSelected});var S=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.isAppDisconnectedDialogShown});var j=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.activeCheckoutStep});var I=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.isCheckoutFlowAPIError})},,,,,,,,,,,function(e,t,r){"use strict";var a=r(2);var n=r(11);var i=r(493);var s=r(69);var o=r(21);var l=r(312);var c=r(428);var u=r(19);var d=r(895);var p=r(23);var m=r(206);var h=r(12);var f=r(2180);var v=r(36);var b=r(207);var g=r(75);var _=r(153);var y=r(471);var k=r(13);var O=Object(k["c"])("TS.mentions.maybeUpdateMentions");var E=r(708);var w=r(794);var C=r(617);r.d(t,"a",function(){return S});r.d(t,"i",function(){return I});r.d(t,"k",function(){return T});r.d(t,"j",function(){return N});r.d(t,"b",function(){return R});r.d(t,"h",function(){return P});r.d(t,"c",function(){return H});r.d(t,"d",function(){return W});r.d(t,"e",function(){return V});r.d(t,"f",function(){return z});r.d(t,"g",function(){return Q});var S=g["isDesktop"]||window.Notification||window.webkitNotifications;var j=["channel_leave","channel_join","group_leave","group_join"];function I(e,t,r){if(!t||!r)return _["a"].BAD_ARGUMENTS;if(t.no_display)return _["a"].NO_DISPLAY_OVERRIDE;if(Object(v["isReply"])(t))return _["a"].REPLY_MESSAGE;if(t.subtype&&-1!==j.indexOf(t.subtype))return _["a"].JOIN_LEAVE_MESSAGE;var a=H(e,r.id);if("nothing"===a)return _["a"].SILENT_PREFERENCE;var s=Object(E["a"])(r);var o=Object(n["getCurrentUserId"])(e);var l=A(e,t,s);if("bot_message"===t.subtype&&"everything"!==a&&!l)return _["a"].BOT_MESSAGE;if(Object(n["isFeatureEnabled"])(e,"feature_wta_notifications")&&Object(v["isAppMessage"])(e,t)&&"everything"!==a&&!l)return _["a"].APP_MESSAGE;var c=Object(v["canCountAsUnreadForCurrentUser"])(t,o);var u=l&&c;var d=Object(E["b"])(r.id);!c||Object(m["isWindowFocused"])(e)||Object(n["isFeatureEnabled"])(e,"feature_incremental_unread_counts")||x(u,d);if(!R())return _["a"].PERMISSION_DENIED;if(!u&&"everything"!==a)return _["a"].NO_MENTIONS;if(D(e,t,r))return _["a"].ACTIVE_VIEW_VISIBLE;if(Object(v["isFromCurrentUser"])(t,o))return _["a"].FROM_CURRENT_USER;if(t.no_notifications)return _["a"].NO_NOTIFICATIONS_OVERRIDE;if(d)return _["a"].MUTED_CHANNEL;if(Object(i["getCurrentMemberDnd"])(e)&&!t._ignore_dnd)return _["a"].USER_IN_DND;if(Object(f["a"])(e,r))return _["a"].LESS_RELEVANT_ORG_TEAM;if(L(e,t,r))return _["a"].OVERSIZED_MENTION;return _["a"].NONE}function T(e,t,r){if(!t||!r)return _["a"].BAD_ARGUMENTS;if(t.no_display)return _["a"].NO_DISPLAY_OVERRIDE;if(Object(v["isReply"])(t))return _["a"].REPLY_MESSAGE;Object(m["isWindowFocused"])(e)||Object(n["isFeatureEnabled"])(e,"feature_incremental_unread_counts")||x(true);if("nothing"===V(e,r.id))return _["a"].SILENT_PREFERENCE;if(!R())return _["a"].PERMISSION_DENIED;if(D(e,t,r))return _["a"].ACTIVE_VIEW_VISIBLE;if(Object(v["isFromCurrentUser"])(t,Object(n["getCurrentUserId"])(e)))return _["a"].FROM_CURRENT_USER;if(t.no_notifications)return _["a"].NO_NOTIFICATIONS_OVERRIDE;if(Object(i["getCurrentMemberDnd"])(e)&&!t._ignore_dnd)return _["a"].USER_IN_DND;if(Object(f["a"])(e,r))return _["a"].LESS_RELEVANT_ORG_TEAM;return _["a"].NONE}function N(e,t){if(!t||!t.channel)return _["a"].BAD_ARGUMENTS;var r=false;var a=Object(u["getChannelById"])(e,t.channel,r);if(!a||Object(h["isNonExistent"])(a)||Object(h["isFromAnotherTeam"])(a))return _["a"].BAD_ARGUMENTS;var i=t.msg,s=t.thread_ts;var o={ts:i,thread_ts:s};if(!Object(v["isReply"])(o))return _["a"].NOT_REPLY_MESSAGE;if(Object(f["a"])(e,a))return _["a"].LESS_RELEVANT_ORG_TEAM;if(F(e,t,a))return _["a"].ACTIVE_VIEW_VISIBLE;var l=Object(d["getMaxTimestamp"])(e);if(!l||i>l)return _["a"].REDUNDANT_SOCKET_EVENT;var p=void 0;p=Object(n["isFeatureEnabled"])(e,"feature_react_threads")?Object(c["getSubscriptionState"])(e,{channelId:a.id,ts:s,fetchIfMissing:false}):Object(w["c"])(a.id,s);var m=p?p.last_read||p.lastRead:null;if(m&&m>=i)return _["a"].ALREADY_SEEN_REPLY;return _["a"].NONE}function A(e,t,r){var a=false;var i=Object(v["isAppMessage"])(e,t);var s=Object(n["isFeatureEnabled"])(e,"feature_wta_notifications");if(r){var c={ignoreHighlightWords:Object(v["shouldIgnoreHighlightWords"])(t,i,s),ignoreAtEveryoneMentions:false,ignoreAtChannelMentions:false,ignoreAtHereMentions:"away"===Object(l["getCurrentMemberPresence"])(e)};a=Object(v["containsMention"])(t,Object(n["getCurrentUserId"])(e),Object(o["getUserHighlightWords"])(e),Object(p["getTeamId"])(e),c);a&&O()}else{var u={ignoreHighlightWords:Object(v["shouldIgnoreHighlightWords"])(t,i,s),ignoreAtEveryoneMentions:true,ignoreAtChannelMentions:true,ignoreAtHereMentions:true};a=Object(v["containsMention"])(t,Object(n["getCurrentUserId"])(e),Object(o["getUserHighlightWords"])(e),Object(p["getTeamId"])(e),u);a&&O()}return a}function R(){if(!S)return false;if(g["isDesktop"])return true;return"granted"===P()}function M(){if(!S)return false;if(R())return false;if("denied"===P())return false;return true}function P(){if(g["isDesktop"]||!S)return"na";if(window.Notification)return window.Notification.permission;return"na"}function x(e,t){e&&-1===document.title.indexOf("!")?document.title="! "+document.title:t||-1!==document.title.indexOf("*")||(document.title="* "+document.title)}function D(e,t,r){if(!Object(m["isWindowFocused"])(e))return false;if(Object(v["containsAtCommand"])(t.text))return false;var a=Object(s["getPrimaryView"])(e);return r.id===a&&!t._hidden_reply&&!Object(y["b"])()}function F(e,t,r){if(!Object(m["isWindowFocused"])(e))return false;if(Object(v["containsAtCommand"])(t.text))return false;if(Object(n["isFeatureEnabled"])(e,"feature_react_threads")){var i=Object(s["getSecondaryView"])(e);if("convo"!==i)return false;var o=Object(s["getFlexParams"])(e);var l=Object(b["decodeThreadKey"])(Object(a["first"])(o)),c=l.channelId,u=l.threadTs;return t.thread_ts&&r.id===c&&t.thread_ts===u}return t.thread_ts&&r.id===Object(C["a"])()&&t.thread_ts===Object(C["b"])()}function L(e,t,r){if(!Object(n["pageNeedsEnterprise"])(e))return false;if(Object(v["canMsgMentionChannelIfMention"])({state:e,text:t.text,channelId:r.id,userId:t.user}))return false;return true}function B(e,t){if("desktop"!==t&&"mobile"!==t)throw new Error("Platform must be desktop or mobile: "+t);return Object(o["getNotificationsGlobalPref"])(e,"global_"+t)}function U(e,t){if("desktop"!==t&&"mobile"!==t)throw new Error("Platform must be desktop or mobile: "+t);if(Object(n["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")){var r=Object(o["getNotificationsGlobalPref"])(e,"global_mpdm_"+t);if(!r){var a=B(e,t);if("nothing"===a)return"nothing";return"everything"}return r}return Object(o["getNotificationsGlobalPref"])(e,"global_"+t)}function q(e,t,r){var a=false;var n=Object(u["getChannelById"])(e,t,a);if(!n||Object(h["isNonExistent"])(n)||Object(h["isFromAnotherTeam"])(n))return null;if(Object(h["isMpim"])(n)||Object(h["isIm"])(n))return U(e,r);return B(e,r)}function G(e,t,r){if("desktop"!==r&&"mobile"!==r)throw new Error("Platform must be desktop or mobile: "+r);var a=false;var n=Object(u["getChannelById"])(e,t,a);if(!n||Object(h["isNonExistent"])(n)||Object(h["isFromAnotherTeam"])(n))return null;if(Object(h["isIm"])(n))throw new Error("IMs do not have a calculated notification setting");var i=Object(o["getNotificationsChannelPref"])(e,t,r);if(i)return i;return q(e,t,r)}function H(e,t){return G(e,t,"desktop")}function W(e,t){return G(e,t,"mobile")}function V(e,t){return q(e,t,"desktop")}function z(e,t){return q(e,t,"mobile")}function Q(){var e=R();var t=null;if(!e){var r=P();t="denied"===r?"not_allowed":"default"===r?"not_yet_allowed":"impossible"}return{notificationsEnabled:e,notificationDisabledType:t}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(32);var s=r.n(i);var o=r(24);var l=r.n(o);var c=r(5);var u=r.n(c);var d=r(6);var p=r.n(d);var m=r(7);var h=r.n(m);var f=r(8);var v=r.n(f);var b=r(1);var g=r.n(b);var _=r(129);var y=r(14);var k=r(2);var O=r(29);var E=r(164);var w=r(54);var C=r(31);var S=r(11);var j=r(10);var I=r(4);var T=r(498);var N=r(3472);var A=r(72);var R=Object(I["e"])("Record a frecency event for some message action + maybe a query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.action,n=r.query,i=void 0===n?"":n;var s=a.frecencyId;Object(S["isFeatureEnabled"])(t(),"feature_app_actions_fe_refactor")?e(Object(N["c"])({id:s,text:i})):Object(T["c"])({id:s},i)});R.propTypes={action:A["a"].MessageAction.isRequired,query:_["b"].string};var M=R;var P=r(70);var x=r(44);var D=r(36);var F=r(284);var L=new j["b"]("message");var B={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var U=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(x["getMessageByTimestamp"])(e,a,r);if(!n)return null;var i=Object(S["isFeatureEnabled"])(e,"feature_file_threads");if(!Object(D["canAddReaction"])(n,i))return null;return{id:P["SLACK_ACTION_IDS"].addReaction,name:L.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(F["f"])("add_reaction"),uiElement:O["q"].ADD_REACTION_BUTTON}});U.propTypes=B;var q=U;var G=r(78);var H=r(94);var W=new j["b"]("message");var V={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var z=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(x["getMessageByTimestamp"])(e,a,r);if(!n)return null;var i=Object(S["isFeatureEnabled"])(e,"feature_file_threads");var s=i?null:n.file;if(Object(G["isFileAuthorExternal"])(e,s))return null;var o=Object(H["f"])(e,a);if(!Object(D["canReplyOrComment"])(e,{message:n,channel:o}))return null;var l=W.t("Start a thread");var c=O["q"].START_A_THREAD_BUTTON;if(s&&!i)l=W.t("Add comment",{fallbackHash:"17279ab497dcbdcde85b46254a98e8017a95cebe"});else if(Object(D["isThreadBroadcast"])(n)||Object(D["getReplyCount"])(n)){l=W.t("Reply to thread");c=O["q"].REPLY_TO_THREAD_BUTTON}return{id:P["SLACK_ACTION_IDS"].comment,name:l,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(F["f"])("thread_reply"),uiElement:c}});z.propTypes=V;var Q=z;var K=new j["b"]("message");var Y={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var J=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(x["getMessageByTimestamp"])(e,a,r);if(!n)return null;var i=Object(H["f"])(e,a);if(!Object(D["canCopyLink"])(e,{message:n,channel:i}))return null;return{id:P["SLACK_ACTION_IDS"].copyLink,name:K.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(F["f"])("copy_link"),uiElement:O["q"].COPY_LINK_BUTTON}});J.propTypes=Y;var Z=J;var X=new j["b"]("message");var $={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var ee=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.messageContainerType;var i=Object(x["getMessageByTimestamp"])(e,a,r);if(!i)return null;var s=Object(H["f"])(e,a);if(!Object(D["canDeleteMessage"])(e,{message:i,channel:s,messageContainerType:n}))return null;return{id:P["SLACK_ACTION_IDS"].deleteMessage,name:X.t("Delete message"),iconType:"trash",danger:true,"data-qa":"delete_message",frecencyId:Object(F["f"])("delete"),uiElement:O["q"].DELETE_MESSAGE_BUTTON}});ee.propTypes=$;var te=ee;var re=r(21);var ae=new j["b"]("message");var ne={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var ie=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(x["getMessageByTimestamp"])(e,a,r);if(!n)return null;var i=Object(H["f"])(e,a);var s=Object(S["getCurrentUserId"])(e);var o=Object(re["getTeamPref"])(e,"msg_edit_window_mins");if(!Object(D["canEditMessage"])(s,n,i,o))return null;return{id:P["SLACK_ACTION_IDS"].editMessage,name:ae.t("Edit message"),iconType:"pencil","data-qa":"edit_message",frecencyId:Object(F["f"])("edit"),uiElement:O["q"].EDIT_MESSAGE_BUTTON}});ie.propTypes=ne;var se=ie;var oe=r(19);var le=new j["b"]("message");var ce=new j["b"]("messages_action_items");var ue={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,allUnreads:_["b"].string.isRequired};var de=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.allUnreads;var i=Object(x["getMessageByTimestamp"])(e,a,r);if(!i)return null;var s=Object(oe["getChannelById"])(e,a);if(!Object(D["canMarkUnread"])(e,{message:i,channel:s}))return null;return{id:P["SLACK_ACTION_IDS"].markUnread,name:n?ce.t("Mark above as read"):le.t("Mark unread"),iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(F["f"])("mark_unread"),uiElement:O["q"].MARK_UNREAD_BUTTON}});de.propTypes=ue;var pe=de;var me=r(272);var he=r(12);var fe=r(1101);var ve={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var be=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(x["getMessageByTimestamp"])(e,a,r);if(!n)return null;var i=Object(oe["getChannelById"])(e,a);if(!Object(D["canPin"])(e,{message:n,channel:i}))return null;var s=Object(me["c"])(n,i);var o=Object(he["getDisplayName"])(i);var l=Object(he["getChannelType"])(i);var c=s?O["q"].PIN_TO_THIS_CONVERSATION_BUTTON:O["q"].UNPIN_FROM_THIS_CONVERSATION_BUTTON;return{id:P["SLACK_ACTION_IDS"].pin,name:Object(fe["a"])(s,o,l),iconType:"thumb-tack","data-qa":"pin_message",frecencyId:Object(F["f"])(s?"unpin":"pin"),uiElement:c}});be.propTypes=ve;var ge=be;var _e=r(2181);var ye=r(1430);var ke=Object(C["b"])("Add a reminder for a message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.time,n=r.channelId,i=r.ts;var s=Object(x["getMessageByTimestamp"])(t(),n,i);return e(Object(ye["a"])({time:a,message_channel:n,message_ts:i,respond_in_channel:Object(D["reminderShouldRespondInChannel"])(s)}))});ke.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,time:_["b"].string.isRequired};var Oe=ke;var Ee=new j["b"]("message");var we={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,time:_["b"].string.isRequired,remind:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var Ce=function(e){v()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSelected=r.onSelected.bind(r);return r}p()(t,[{key:"onSelected",value:function e(){var t=this.props,r=t.remind,a=t.ts,n=t.channelId,i=t.time,s=t.clogger;r({ts:a,channelId:n,time:i});s.track(O["j"].MSG_ACTION,{contexts:{ui_context:{action:O["o"].CLICK,step:O["r"].MORE_ACTIONS_MENU,ui_element:O["q"].REMIND_ME_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,r=t.remind,a=t.ts,i=t.channelId,o=t.time,l=s()(t,["remind","ts","channelId","time"]);return g.a.createElement(w["b"],n()({},l,{onSelected:this.onSelected}))}}]);return t}(b["PureComponent"]);Ce.displayName="RemindMenuItem";var Se=function e(t){return{clogger:Object(E["a"])({state:t})}};var je={remind:Oe};var Ie=Object(y["connect"])(Se,je)(Ce);var Te=Object(w["h"])(Ie);var Ne={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,renderLegacySubmenu:_["b"].bool};var Ae={renderLegacySubmenu:true};var Re=function(e){v()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSubmenu=r.renderSubmenu.bind(r);return r}p()(t,[{key:"renderSubmenu",value:function e(t){var r=this.props,a=r.channelId,i=r.ts;var s={channelId:a,ts:i};return g.a.createElement(w["f"],n()({},t,{width:"auto"}),g.a.createElement(Te,n()({},s,{label:Ee.t("in 20 minutes"),time:"in 20 minutes"})),g.a.createElement(Te,n()({},s,{label:Ee.t("in 1 hour"),time:"in 1 hour"})),g.a.createElement(Te,n()({},s,{label:Ee.t("in 3 hours"),time:"in 3 hours"})),g.a.createElement(Te,n()({},s,{label:Ee.t("Tomorrow"),time:"Tomorrow"})),g.a.createElement(Te,n()({},s,{label:Ee.t("Next Week"),time:"Next Week"})))}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.ts,i=s()(t,["channelId","ts"]);return g.a.createElement(_e["a"],n()({},i,{renderSubmenu:this.renderSubmenu}))}}]);return t}(b["PureComponent"]);Re.displayName="Remind";Re.defaultProps=Ae;var Me=Object(_e["c"])(Re);var Pe=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(x["getMessageByTimestamp"])(e,a,r);if(!n)return null;var i=Object(oe["getChannelById"])(e,a);if(!Object(D["canAddReminder"])(e,{message:n,channel:i}))return null;return g.a.createElement(Me,{key:"remind_submenu",label:Ee.t("Remind me about this"),"data-qa":"remind_me",frecencyId:Object(F["f"])("remind"),ts:r,channelId:a,renderLegacySubmenu:true})});var xe=Pe;var De=new j["b"]("message");var Fe={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Le=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.messageContainerType;var i=Object(x["getMessageByTimestamp"])(e,a,r);if(!i)return null;var s=Object(H["f"])(e,a);if(!Object(D["canRemoveBroadcast"])(e,{message:i,channel:s,messageContainerType:n}))return null;var o=Object(he["isPublicChannel"])(s)||Object(he["isPrivateChannel"])(s)?De.t("Remove from channel"):De.t("Remove from conversation");return{id:P["SLACK_ACTION_IDS"].removeBroadcast,name:o,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(F["f"])("remove"),uiElement:O["q"].REMOVE_FROM_CONVERSATION_BUTTON}});Le.propTypes=Fe;var Be=Le;var Ue=new j["b"]("message");var qe={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Ge=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(S["isFeatureEnabled"])(e,"feature_file_threads");var i=Object(x["getMessageByTimestamp"])(e,a,r);if(!i)return null;if(!Object(D["canBeShared"])(i,n))return null;var s=Object(D["isShareableFileMsg"])(i)?Ue.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):Ue.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return{id:P["SLACK_ACTION_IDS"].shareMessage,name:s,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(F["f"])("share"),uiElement:O["q"].SHARE_MESSAGE_BUTTON}});Ge.propTypes=qe;var He=Ge;var We=new j["b"]("message");var Ve={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var ze=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(x["getMessageByTimestamp"])(e,a,r);if(!n)return null;if(!Object(D["canStar"])(n))return null;var i=Object(S["isFeatureEnabled"])(e,"feature_file_threads");var s=Object(D["getFileIdFromMessage"])(n,i);var o=Object(D["isStarred"])(n);var l=o?We.t("Unstar message"):We.t("Star message");if(Object(D["isFileComment"])(n)){var c=s||Object(k["first"])(n.files);var u=n.comment&&Object(G["getFileCommentById"])(e,c,n.comment.id);u&&(l=o?We.t("Unstar file comment"):We.t("Star file comment"))}else if(s){o=Object(D["isStarred"])(n,Object(G["getFileById"])(e,s),null);l=o?We.t("Unstar file"):We.t("Star file")}var d=o?O["q"].UNSTAR_MESSAGE_BUTTON:O["q"].STAR_MESSAGE_BUTTON;return{id:P["SLACK_ACTION_IDS"].star,name:l,iconType:o?"unstar-o":"star-o","data-qa":"star_message_menu",frecencyId:Object(F["f"])(o?"unstar":"star"),uiElement:d}});ze.propTypes=Ve;var Qe=ze;var Ke=r(428);var Ye=r(794);var Je=new j["b"]("message");var Ze=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(x["getMessageByTimestamp"])(e,a,r);var i=Object(oe["getChannelById"])(e,a);var s=Object(he["isArchived"])(i);var o=Object(Ke["getIsSubscribed"])(e,{ts:r,channelId:a});var l=s&&o;if(Object(S["isFeatureEnabled"])(e,"feature_modernize_get_msg_actions")){if(!Object(D["canReplyOrComment"])(e,{message:n,channel:i,ignoreMembership:l}))return null}else if(!Object(Ye["a"])(i,n,l))return null;var c=Object(re["getUserPref"])(e,"threads_everything");var u=Object(D["getReplyCount"])(n);var d=Je.t("Follow message");var p=Je.t("You\u2019ll be notified about any replies");var m=O["q"].FOLLOW_MESSAGE_BUTTON;var h=Object(S["isFeatureEnabled"])(e,"feature_threads_copy_change");var f=void 0;var v=Object(Ke["getIsSubscriptionLoading"])(e,{ts:r,channelId:a});if(v){d=Je.t("Loading\u2026",{fallbackHash:"0e140d567d90b0014d95ffec7a755e52355079f3"});p=""}else if(o){if(u){d=Je.t("Unfollow thread");f=h?Je.t("This will be removed from Threads"):Je.t("This will be removed from All Threads");p=c?Je.t("You won\u2019t be notified about new replies"):f}else{d=Je.t("Unfollow message");f=h?Je.t("Replies will be excluded from Threads"):Je.t("Replies will be excluded from All Threads");p=c?Je.t("You won\u2019t be notified about replies"):f}m=O["q"].UNFOLLOW_MESSAGE_BUTTON}else if(u){d=Je.t("Follow thread");f=h?Je.t("New replies will appear in Threads"):Je.t("New replies will appear in All Threads");p=c?Je.t("You\u2019ll be notified about new replies"):f}else{d=Je.t("Follow message");f=h?Je.t("Any replies will show up in Threads"):Je.t("Any replies will show up in All Threads");p=c?Je.t("You\u2019ll be notified about any replies"):f}return{id:P["SLACK_ACTION_IDS"].subscribe,name:d,description:p,isLoading:v,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(F["f"])(o?"thread_unfollow":"thread_follow"),uiElement:m}});Ze.propTypes={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Xe=Ze;function $e(e){return n()({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons||{},uiElement:O["q"].APP_ACTION_BUTTON,"data-qa":"app_action_"+e.id},Object(F["e"])(e))}var et=r(1157);function tt(e,t){if(!e)return false;var r=Object(et["a"])(e.name);if(!r)return false;var a=Object(et["a"])(e.description);var n=t.split(/\s+/);return Object(k["every"])(n,function(e){return Object(k["includes"])(r,e)||Object(k["includes"])(a,e)})}var rt=r(315);var at=new j["b"]("app_actions");var nt=function e(t,r){return[q(t,r),Q(t,r),Z(t,r),te(t,r),se(t,r),pe(t,r),ge(t,r),Be(t,r),He(t,r),Qe(t,r),Xe(t,r)]};var it=function e(t){return n()({},t,{danger:false,description:at.t("Slack")})};var st=function e(t){return{id:t.frecencyId,action:t}};var ot=Object(I["e"])("Search message actions (app + Slack) in Redux store",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.query,n=void 0===a?"":a,i=s()(r,["query"]);var o=t();var c=Object(rt["selectMessageActions"])(o),u=c.actions;var d=nt(o,i).filter(function(e){return e&&!e.isLoading});var p=[].concat(l()(d.map(it)),l()(u.map($e)));p=p.filter(function(e){return tt(e,Object(et["a"])(n))});p=Object(N["d"])(o,{query:n,list:p.map(st)});p=p.map(function(e){return e.action});return p});ot.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,messageContainerType:_["b"].oneOf(Object(k["values"])(P["MESSAGE_CONTAINERS"])),query:_["b"].string};var lt=Object(I["e"])("Search message actions (app + Slack), returns as Promise",function(e,t,r){var a=e(ot(r));return Promise.resolve(a)});lt.propTypes=ot.propTypes;var ct=lt;var ut=r(610);var dt=r(17);var pt=r(454);var mt=r(323);var ht=function e(t,r,a){var n=r.channelId,i=r.ts;return a(function(e,r){var a=r();var s=Object(x["getMessageByTimestamp"])(a,n,i);var o=Object(G["getFileFromMsg"])(a,s);var l=Object(mt["b"])(s,o);return Object(pt["a"])({e:t,rxn_key:l})})};var ft=ht;var vt=r(150);var bt=Object(C["b"])("Comment on a message or file",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var s=Object(x["getMessageByTimestamp"])(i,a,n);var o=Object(S["isFeatureEnabled"])(i,"feature_file_threads");var l=Object(D["getFileIdFromMessage"])(s,o);if(l&&!o)e(Object(vt["c"])({fileId:l}));else{var c=s.thread_ts||n;e(Object(vt["g"])({channelId:a,threadTs:c}))}});bt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var gt=bt;var _t=r(50);var yt=r(361);var kt=Object(C["b"])("Copy link to message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var s=Object(x["getMessageByTimestamp"])(i,a,n);var o=s.thread_ts;var l=Object(_t["getCurrentTeam"])(i);var c=l&&l.domain;var u=Object(G["getFileFromMsg"])(i,s);var d=u&&!Object(D["isFileComment"])(s)?u.permalink:Object(D["constructAbsoluteMsgPermalink"])({teamDomain:c,channelId:a,ts:n,threadTs:o});Object(yt["writeText"])(d)});kt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Ot=kt;var Et=r(1168);var wt=r(77);var Ct=Object(C["b"])("Delete message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts,i=r.rollup;var s=g.a.createElement(Et["a"],{channelId:a,ts:n,rollup:i});Promise.resolve().then(function(){return e(Object(wt["openModal"])({element:s}))})});Ct.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var St=Ct;var jt=r(1169);var It=Object(C["b"])("Remove message broadcast",function(e,t,r){var a=g.a.createElement(jt["a"],r);Promise.resolve().then(function(){return e(Object(wt["openModal"])({element:a}))})});It.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Tt=It;var Nt=r(969);var At=r(1431);var Rt=Object(C["b"])("Copy link to message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var s=Object(H["f"])(i,a);var o=Object(x["getMessageByTimestamp"])(i,a,n);var l=Object(S["isFeatureEnabled"])(i,"feature_file_threads");var c=Object(D["getFileIdFromMessage"])(o,l);c&&Object(D["isFileComment"])(o)?Object(Nt["a"])(c,false,false,s,true):Object(At["a"])(n,s)});Rt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Mt=Rt;var Pt=r(787);var xt=function e(t,r,a,n){var i=a.ts,s=a.channelId,o=a.rollup;var l=Object(dt["b"])();if(r.appId)return n(Object(rt["runMessageAction"])({actionId:r.id,appId:r.appId,messageTs:i,channelId:s}));switch(r.id){case P["SLACK_ACTION_IDS"].addReaction:return ft(t,a,n);case P["SLACK_ACTION_IDS"].comment:return n(gt({ts:i,channelId:s}));case P["SLACK_ACTION_IDS"].copyLink:return n(Ot({ts:i,channelId:s}));case P["SLACK_ACTION_IDS"].deleteMessage:return n(St({ts:i,channelId:s,rollup:o}));case P["SLACK_ACTION_IDS"].editMessage:l.warn("Edit message is an unhandled case");return null;case P["SLACK_ACTION_IDS"].markUnread:return n(Object(oe["setUnreadPoint"])({channelId:s,unreadTs:i}));case P["SLACK_ACTION_IDS"].pin:return n(Object(ut["togglePin"])({ts:i,channelId:s}));case P["SLACK_ACTION_IDS"].remind:l.warn("Remind is an unhandled case");return null;case P["SLACK_ACTION_IDS"].removeBroadcast:return n(Tt({ts:i,channelId:s}));case P["SLACK_ACTION_IDS"].shareMessage:return n(Mt({ts:i,channelId:s}));case P["SLACK_ACTION_IDS"].star:return n(Object(Pt["b"])({ts:i,channelId:s}));case P["SLACK_ACTION_IDS"].subscribe:return n(Object(Ke["toggleThreadSubscription"])({ts:i,channelId:s}));default:l.warn("Unknown action type "+r.id);return null}};var Dt=xt;var Ft=r(103);var Lt=r(92);var Bt=r(475);var Ut=r(9);var qt=r.n(Ut);var Gt=r(15);var Ht=r.n(Gt);var Wt=r(888);var Vt=r(18);var zt=r(108);var Qt=r(247);var Kt=r(421);var Yt=56;var Jt={action:A["a"].MessageAction.isRequired,className:_["b"].string,pillarClassName:_["b"].string,app:A["a"].maybeUnknown(A["a"].App)};var Zt={className:"",pillarClassName:"",app:void 0};var Xt=function(e){v()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["bindAll"])(r,["renderEnter","renderIcon","renderIconMaybe"]);return r}p()(t,[{key:"renderIcon",value:function e(){var t=this.props,r=t.action,a=t.app;var n=a&&a.icons||r.iconSet;if(n){var i=Yt;var s=Object(Kt["a"])({icons:n},i);return g.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:s})}if(r.iconType)return g.a.createElement(Vt["b"],{type:r.iconType});return null}},{key:"renderIconMaybe",value:function e(t){if(!t)return null;return g.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},t)}},{key:"renderEnter",value:function e(){var t=this.props,r=t.className,a=t.pillarClassName;var n=Ht()(r,"c-menu_item__enter",qt()({},a+"__enter",a));return g.a.createElement(Vt["a"],{type:"enter",className:n,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"render",value:function e(){var t;var r=this.props,a=r.action,n=r.app,i=r.className,s=r.pillarClassName;var o=Ht()(i,"c-menu_item__button","c-button-unstyled",(t={"c-menu_item__button--danger":a.danger},qt()(t,""+s,s),qt()(t,s+"--danger",a.danger&&s),t));var l=n&&n.name||a.description;!l&&n&&(l=g.a.createElement(Wt["a"],{type:Object(zt["d"])(n)?"unknown":"non-existent"}));return g.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},g.a.createElement("div",{className:o,"data-qa":a["data-qa"],key:a.id,id:a.id},this.renderIconMaybe(this.renderIcon()),g.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},a.label||a.name,g.a.createElement("div",{className:"c-menu_item__description"},l)),this.renderEnter()))}}]);return t}(b["PureComponent"]);Xt.displayName="AppActionsDialogItem";Xt.defaultProps=Zt;var $t=function e(t,r){var a=r.action;return{app:a&&a.appId&&Object(Qt["getAppById"])(t,a.appId)}};var er=Object(y["connect"])($t)(Xt);var tr=r(104);var rr=r(791);var ar=r(226);var nr=r(87);var ir=r(173);var sr=r(735);var or=r(1626);var lr=r(665);var cr=r(2238);var ur={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,channel:_["b"].object.isRequired,theme:_["b"].string,hasAdHocSender:_["b"].bool,userId:_["b"].string,username:_["b"].string,botId:_["b"].string,text:_["b"].string.isRequired,attachments:_["b"].arrayOf(_["b"].object)};var dr={className:null,theme:"light",hasAdHocSender:false,userId:null,username:null,botId:null,fileIds:[],attachments:[],unfurlLinkCache:null};var pr=function(e){v()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={gradient:false};r.renderAttachment=r.renderAttachment.bind(r);return r}p()(t,[{key:"componentDidMount",value:function e(){this.maybeSetGradient()}},{key:"maybeSetGradient",value:function e(){var t=Object(tr["findDOMNode"])(this);t&&t.scrollHeight>t.clientHeight&&this.setState(function(){return{gradient:true}})}},{key:"renderText",value:function e(){var t=this.props.text;return g.a.createElement(nr["a"],{text:t})}},{key:"renderAvatar",value:function e(){var t=this.props,r=t.userId,a=t.hasAdHocSender,n=t.botId;return g.a.createElement(ir["b"],{className:"p-app_actions_pillow__avatar",userId:r,isAdHocMember:a,botId:n,size:24,isInteractive:false,showCard:false,showTooltip:false,tabIndex:"-1"})}},{key:"renderTimestamp",value:function e(){var t=this.props.ts;return g.a.createElement(sr["b"],{timestamp:t,relative:false,full:true})}},{key:"renderAttachment",value:function e(t,r){var a=this.props,i=a.ts,s=a.channelId;return g.a.createElement(or["a"],n()({key:r},Object(ar["b"])(t),{messageTs:i,activeChannelId:s,showDelete:false}))}},{key:"renderAttachments",value:function e(){var t=this.props.attachments;if(!t||!t.length)return null;return g.a.createElement("div",{className:"p-app_actions_pillow__attachments"},t.map(this.renderAttachment))}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return g.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar());return g.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,r=t.userId,a=t.botId,n=t.username,i=t.theme,s=t.channel;return g.a.createElement("div",{className:"p-app_actions_pillow__content_header"},g.a.createElement(lr["a"],{userId:r,botId:a,username:n,channelName:Object(he["getDisplayName"])(s),isInteractive:false}),"light"===i&&this.renderTimestamp())}},{key:"render",value:function e(){var t=this.props.theme;var r=Ht()("p-app_actions_pillow","p-app_actions_pillow--"+t,{"p-app_actions_pillow--gradient":this.state.gradient});return g.a.createElement("div",{className:r,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),g.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),g.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderText(),this.renderAttachments(),g.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}]);return t}(b["PureComponent"]);pr.displayName="AppActionsPillow";pr.defaultProps=dr;var mr=function e(t,r){var a=r.ts,n=r.channelId;var i=Object(x["getMessageByTimestamp"])(t,n,a);var s=Object(oe["getChannelById"])(t,n);var o=Object(D["getMessageMemberId"])(i);var l=Object(D["getMsgSenderEntity"])(t,i),c=l.botId,u=l.username;return{channel:s,userId:o,username:u,botId:c,theme:Object(re["getUserMessagesTheme"])(t),hasAdHocSender:Object(rr["a"])(i),text:i.text,attachments:i.attachments}};var hr=Object(y["connect"])(mr)(pr);var fr=r(2090);var vr=new j["b"]("app_actions");var br=64;var gr="/apps/collection/actions?utm_source=overflow&utm_medium=inprod&utm_content=overflow-more actions&utm_campaign=inprod";var _r={channelId:_["b"].string.isRequired,onClose:_["b"].func,ts:_["b"].string.isRequired,onSelectAction:_["b"].func,handleMessageAction:_["b"].func.isRequired,searchMessageActions:_["b"].func.isRequired,recordMessageActionFrecencyEvent:_["b"].func.isRequired,closeModal:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var yr={appActions:[],onClose:k["noop"],onSelectAction:k["noop"],featureAppActionsFeRefactor:false};var kr=function(e){v()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={filterQuery:"",isLoading:true,isError:false,actions:[]};r.initClogged=false;Object(k["bindAll"])(r,["onFilterUpdate","onFooterLinkClick","onSelectAction","renderSingleAction","handleSelectEvent","searchActions"]);r.searchActionsDebounced=Object(k["debounce"])(r.searchActions,200,{leading:true});return r}p()(t,[{key:"componentDidMount",value:function e(){this.searchActionsDebounced()}},{key:"componentDidUpdate",value:function e(){if(!this.initClogged&&!this.state.isLoading&&!this.state.isError){var t=this.props.clogger;t.track(O["j"].MSG_ACTION,{contexts:{ui_context:{action:O["o"].IMPRESSION,step:O["r"].MESSAGE_ACTION_DIALOG,ui_element:O["q"].MESSAGE_ACTION_DIALOG},platform:{app_actions_showing:this.state.actions.length}}});this.initClogged=true}}},{key:"componentWillUnmount",value:function e(){this.activePromise&&delete this.activePromise}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(O["j"].MSG_ACTION,{contexts:{ui_context:{action:O["o"].CLICK,step:O["r"].MESSAGE_ACTION_DIALOG,ui_element:O["q"].GET_MORE_APP_ACTIONS},platform:{app_actions_showing:this.state.actions.length}}})}},{key:"onSelectAction",value:function e(t,r){var a=this.props,n=a.ts,i=a.channelId,s=a.closeModal,o=a.handleMessageAction,e=a.onSelectAction,l=a.clogger;s();this.props.onClose&&this.props.onClose(t);var c=e(t,r,{ts:n,channelId:i});c||o(t,r,{ts:n,channelId:i});this.props.recordMessageActionFrecencyEvent({action:r,query:this.state.filterQuery});var u={ui_context:{action:O["o"].CLICK,step:O["r"].MESSAGE_ACTION_DIALOG,ui_element:r.uiElement}};r.appId&&(u.platform={app_id:r.appId,action_id:r.id});l.track(O["j"].MSG_ACTION,{contexts:u})}},{key:"onFilterUpdate",value:function e(t){this.setState(function(){return{filterQuery:t}},this.searchActionsDebounced)}},{key:"searchActions",value:function e(){var t=this;var r=this.props.searchMessageActions({channelId:this.props.channelId,ts:this.props.ts,query:this.state.filterQuery}).then(function(e){t.activePromise===r&&t.setState(function(){return{actions:e,isError:false,isLoading:false}})}).catch(function(){t.setState(function(){return{isError:true,isLoading:false}})});this.activePromise=r}},{key:"handleSelectEvent",value:function e(t,r,a){this.onSelectAction(a,r.props.action)}},{key:"renderTitle",value:function e(t){return g.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},g.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,r=t.channelId,a=t.ts;return g.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},g.a.createElement(hr,{channelId:r,ts:a}))}},{key:"renderLoading",value:function e(){return g.a.createElement("div",{className:"p-app_actions_dialog__loader"},g.a.createElement(Lt["a"],null))}},{key:"renderSingleAction",value:function e(t){var r=g.a.createElement(er,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:r,value:t.id}}},{key:"renderSelect",value:function e(){var t=vr.t("Search message actions\u2026");return g.a.createElement(Bt["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(k["map"])(this.state.actions,this.renderSingleAction),optionsRowHeight:br})}},{key:"render",value:function e(){var t=this.state.isLoading;var r=vr.t("Get more message actions");var a=vr.t("Use an action");return g.a.createElement(Ft["a"],{contentLabel:a,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:gr,onFooterLinkClick:this.onFooterLinkClick,footerText:r,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(a),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(b["PureComponent"]);kr.displayName="AppActionsDialog";kr.defaultProps=yr;function Or(e){return{clogger:Object(E["a"])({state:e})}}var Er=function e(t){return{closeModal:function e(){return t(Object(wt["closeModal"])())},handleMessageAction:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return Dt.apply(void 0,a.concat([t]))},searchMessageActions:function e(){return t(ct.apply(void 0,arguments))},recordMessageActionFrecencyEvent:function e(r){return t(M(r))}}};var wr=Object(y["connect"])(Or,Er)(kr);var Cr=rt["selectMessageActions"];var Sr=new j["b"]("app_actions");var jr=64;var Ir="/apps/collection/actions?utm_source=overflow&utm_medium=inprod&utm_content=overflow-more actions&utm_campaign=inprod";var Tr={channelId:_["b"].string.isRequired,onClose:_["b"].func,ts:_["b"].string.isRequired,onSelectAction:_["b"].func,slackActions:_["b"].arrayOf(A["a"].MessageAction).isRequired,appActions:_["b"].arrayOf(A["a"].AppActionMenuItem),isLoading:_["b"].bool.isRequired,onLoad:_["b"].func.isRequired,handleMessageAction:_["b"].func.isRequired,closeModal:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var Nr={appActions:[],onClose:k["noop"],onSelectAction:k["noop"]};var Ar=function(e){v()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={filterQuery:"",normalizedFilterQuery:""};Object(k["bindAll"])(r,["onFilterUpdate","onFooterLinkClick","onSelectAction","filterAction","formatSlackAction","renderSingleAction","handleSelectEvent"]);return r}p()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(O["j"].MSG_ACTION,{contexts:{ui_context:{action:O["o"].IMPRESSION,step:O["r"].MESSAGE_ACTION_DIALOG,ui_element:O["q"].MESSAGE_ACTION_DIALOG},platform:{app_actions_showing:this.props.appActions.length}}});this.props.onLoad()}},{key:"shouldComponentUpdate",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.channelId,a=t.ts,n=t.isLoading;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.normalizedFilterQuery;if(this.state.normalizedFilterQuery!==s)return true;if(this.props.isLoading&&!n)return true;if(this.props.channelId!==r)return true;if(this.props.ts!==a)return true;return false}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(O["j"].MSG_ACTION,{contexts:{ui_context:{action:O["o"].CLICK,step:O["r"].MESSAGE_ACTION_DIALOG,ui_element:O["q"].GET_MORE_APP_ACTIONS},platform:{app_actions_showing:this.props.appActions.length}}})}},{key:"onSelectAction",value:function e(t,r){var a=this.props,n=a.ts,i=a.channelId,s=a.closeModal,o=a.handleMessageAction,e=a.onSelectAction,l=a.clogger;s();this.props.onClose&&this.props.onClose(t);var c=e(t,r,{ts:n,channelId:i});c||o(t,r,{ts:n,channelId:i});Object(F["b"])(r,this.state.normalizedFilterQuery);var u={ui_context:{action:O["o"].CLICK,step:O["r"].MESSAGE_ACTION_DIALOG,ui_element:r.uiElement}};r.appId&&(u.platform={app_id:r.appId,action_id:r.id});l.track(O["j"].MSG_ACTION,{contexts:u})}},{key:"onFilterUpdate",value:function e(t){var r=Object(et["a"])(t);this.setState(function(){return{filterQuery:t,normalizedFilterQuery:r}})}},{key:"getActions",value:function e(){var t=[].concat(l()(Object(k["map"])(this.props.slackActions,this.formatSlackAction)),l()(Object(k["map"])(this.props.appActions,$e)));t=Object(k["filter"])(t,this.filterAction);t=Object(F["c"])(t,this.state.normalizedFilterQuery);return t}},{key:"handleSelectEvent",value:function e(t,r,a){this.onSelectAction(a,r.props.action)}},{key:"filterAction",value:function e(t){return tt(t,this.state.normalizedFilterQuery)}},{key:"formatSlackAction",value:function e(t){return n()({},t,{danger:false,description:Sr.t("Slack")})}},{key:"renderTitle",value:function e(t){return g.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},g.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,r=t.channelId,a=t.ts;return g.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},g.a.createElement(hr,{channelId:r,ts:a}))}},{key:"renderLoading",value:function e(){return g.a.createElement("div",{className:"p-app_actions_dialog__loader"},g.a.createElement(Lt["a"],null))}},{key:"renderSingleAction",value:function e(t){var r=g.a.createElement(er,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:r,value:t.id}}},{key:"renderSelect",value:function e(){var t=Sr.t("Search message actions\u2026");return g.a.createElement(Bt["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(k["map"])(this.getActions(),this.renderSingleAction),optionsRowHeight:jr})}},{key:"render",value:function e(){var t=this.props.isLoading;var r=Sr.t("Get more message actions");var a=Sr.t("Use an action");return g.a.createElement(Ft["a"],{contentLabel:a,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Ir,onFooterLinkClick:this.onFooterLinkClick,footerText:r,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(a),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(b["Component"]);Ar.displayName="AppActionsDialog";Ar.defaultProps=Nr;function Rr(e,t){var r=Cr(e),a=r.loading,n=r.actions;var i=Object(k["filter"])([q(e,t),Q(e,t),Z(e,t),te(e,t),se(e,t),pe(e,t),ge(e,t),Be(e,t),He(e,t),Qe(e,t),Xe(e,t)]);var s=!!(a||Object(k["find"])(i,"isLoading"));return{slackActions:i,appActions:n,isLoading:s,clogger:Object(E["a"])({state:e})}}var Mr=function e(t){return{closeModal:function e(){return t(Object(wt["closeModal"])())},onLoad:function e(){return t(Object(rt["ensureFresh"])())},handleMessageAction:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return Dt.apply(void 0,a.concat([t]))}}};var Pr={};Object.defineProperty(Pr,"selectMessageActions",{get:function e(){return Cr},set:function e(t){Cr=t}});var xr=Object(y["connect"])(Rr,Mr)(Ar);var Dr=function e(t){var r=t.featureAppActionsFeRefactor,a=s()(t,["featureAppActionsFeRefactor"]);if(r)return g.a.createElement(wr,a);return g.a.createElement(xr,a)};Dr.displayName="AppActionsSwitcher";var Fr=function e(t){return{featureAppActionsFeRefactor:Object(S["isFeatureEnabled"])(t,"feature_app_actions_fe_refactor")}};var Lr=Object(y["connect"])(Fr)(Dr);var Br=Object(C["b"])("Open app actions dialog",function(e,t,r){var a=g.a.createElement(Lr,r);e(Object(wt["openModal"])({element:a}))});Br.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,onSelectAction:_["b"].func.isRequired};var Ur=Br;var qr=new j["b"]("message");var Gr=3;var Hr="/apps/collection/actions?utm_source=messagemenu&utm_medium=inprod&utm_content=overflow-more actions&utm_campaign=inprod";var Wr={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,onSelectAction:_["b"].func.isRequired,hasActions:_["b"].bool.isRequired,hasOverflow:_["b"].bool.isRequired,browseAppActions:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var Vr=function(e){v()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSelected=r.onSelected.bind(r);r.state={hasActions:e.hasActions};return r}p()(t,[{key:"onSelected",value:function e(t){var r=this.props,a=r.ts,n=r.channelId,i=r.onSelectAction,s=r.clogger;this.props.hasOverflow?this.props.browseAppActions({ts:a,channelId:n,onSelectAction:i}):t&&"click"!==t.type&&window.open(Hr,"_blank");s.track(O["j"].MSG_ACTION,{contexts:{ui_context:{action:O["o"].CLICK,step:O["r"].MORE_ACTIONS_MENU,ui_element:O["q"].MORE_MESSAGE_ACTIONS_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,i=t.onSelectAction,o=t.hasActions,l=t.browseAppActions,c=s()(t,["ts","channelId","onSelectAction","hasActions","browseAppActions"]);var u=this.state.hasActions?qr.t("More message actions\u2026"):qr.t("Add a message action\u2026");return g.a.createElement(w["b"],n()({},c,{label:u,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:Hr}))}}]);return t}(b["Component"]);Vr.displayName="BrowseAppActions";var zr=function e(t){var r=Object(rt["selectMessageActions"])(t),a=r.actions,n=r.loading;var i=a.length;return{hasActions:n||!!i,hasOverflow:n||i>Gr,clogger:Object(E["a"])({state:t})}};var Qr=function e(t){return{browseAppActions:function e(){return t(Ur.apply(void 0,arguments))}}};var Kr=Object(w["h"])(Object(y["connect"])(zr,Qr)(Vr));var Yr=r(448);var Jr=r(16);var Zr=56;var Xr=40;var $r={type:_["b"].oneOf(Object(k["values"])(Yr["a"])),action:A["a"].MessageAction.isRequired,onSelected:_["b"].func.isRequired,app:A["a"].maybeUnknown(A["a"].App)};var ea={type:Yr["a"].default,app:void 0};var ta=function(e){v()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSelected=r.onSelected.bind(r);return r}p()(t,[{key:"onSelected",value:function e(t){var r=this.props,a=r.action,e=r.onSelected;e(t,a)}},{key:"renderIcon",value:function e(){var t=this.props,r=t.action,a=t.app,n=t.type;var i=a&&a.icons||r.iconSet;if(i){var s=n===Yr["a"].compactItem?Xr:Zr;var o=Object(Kt["a"])({icons:i},s);return g.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:o})}if(r.iconType)return g.a.createElement(Vt["b"],{type:r.iconType});return null}},{key:"render",value:function e(){var t=this.props,r=t.action,a=t.app,i=t.onSelected,o=t.type,l=s()(t,["action","app","onSelected","type"]);var c=a&&a.name||r.description;!c&&a&&(c=g.a.createElement(Wt["a"],{type:Object(zt["d"])(a)?"unknown":"non-existent"}));return g.a.createElement(w["b"],n()({type:o,label:r.label||r.name,description:c,icon:this.renderIcon(),danger:r.danger,onSelected:this.onSelected,"data-qa":r["data-qa"]},l))}}]);return t}(b["PureComponent"]);ta.displayName="MessageActionMenuItem";ta.defaultProps=ea;var ra=function e(t,r){var a=r.action;return{app:a&&a.appId&&Object(Qt["getAppById"])(t,a.appId)}};var aa=Object(y["connect"])(ra)(ta);var na=Object(w["h"])(aa);var ia=r(2241);var sa=3;var oa={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,rollup:A["a"].Rollup(),messageContainerType:_["b"].oneOf(Object(k["values"])(P["MESSAGE_CONTAINERS"])),onSelectAction:_["b"].func,onMenuItemSelected:_["b"].func,onLoad:_["b"].func,slackActions:_["b"].arrayOf(_["b"].oneOfType([A["a"].MessageAction,_["b"].node])).isRequired,canRunAppAction:_["b"].bool,appActions:_["b"].array,handleMessageAction:_["b"].func.isRequired,recordMessageActionFrecencyEvent:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var la={messageContainerType:P["MESSAGE_CONTAINERS"].MESSAGE_PANE,onSelectAction:k["noop"],onMenuItemSelected:k["noop"],onLoad:k["noop"],canRunAppAction:false,appActions:[],runAppAction:k["noop"],rollup:void 0};var ca=function(e){v()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={appActions:e.appActions};Object(k["bindAll"])(r,["onSelectAction","renderSingleAppAction","renderSingleSlackAction"]);return r}p()(t,[{key:"componentDidMount",value:function e(){this.props.onLoad();var t=this.props.clogger;t.track(O["j"].MSG_ACTION,{contexts:{ui_context:{action:O["o"].IMPRESSION,step:O["r"].MORE_ACTIONS_MENU,ui_element:O["q"].MORE_ACTIONS_MENU},platform:{app_actions_showing:Math.min(this.state.appActions.length,sa)}}})}},{key:"onSelectAction",value:function e(t,r){var a=this.props,n=a.ts,i=a.channelId,s=a.handleMessageAction,e=a.onSelectAction,o=a.rollup,l=a.clogger;var c=e(t,r,{ts:n,channelId:i});c||s(t,r,{ts:n,channelId:i,rollup:o});this.props.recordMessageActionFrecencyEvent({action:r});var u={ui_context:{action:O["o"].CLICK,step:O["r"].MORE_ACTIONS_MENU,ui_element:r.uiElement}};r.appId&&(u.platform={app_id:r.appId,action_id:r.id});l.track(O["j"].MSG_ACTION,{contexts:u})}},{key:"renderAppActions",value:function e(){var t=this.props,r=t.onSelectAction,a=t.ts,n=t.channelId;var i=this.state.appActions;var s=i.slice(0,sa).map(this.renderSingleAppAction);return[].concat(l()(s),[g.a.createElement(Kr,{key:"browse_app_actions",ts:a,channelId:n,onSelectAction:r})])}},{key:"renderSingleAppAction",value:function e(t){var r=$e(t);return g.a.createElement(na,{key:r.id,type:Yr["a"].compactItem,action:r,onSelected:this.onSelectAction})}},{key:"renderSlackActions",value:function e(){return this.props.slackActions.map(this.renderSingleSlackAction)}},{key:"renderSingleSlackAction",value:function e(t,r){if(!t)return null;if(g.a.isValidElement(t))return g.a.cloneElement(t,{key:r});var a=Object(k["omit"])(t,["iconType","iconSet"]);return g.a.createElement(na,{key:a.id,className:"p-message_actions_menu__"+a.id,action:a,onSelected:this.onSelectAction})}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,i=t.messageContainerType,o=t.onLoad,l=t.onMenuItemSelected,c=t.onSelectAction,u=t.canRunAppAction,d=t.appActions,p=t.slackActions,m=t.handleMessageAction,h=s()(t,["ts","channelId","messageContainerType","onLoad","onMenuItemSelected","onSelectAction","canRunAppAction","appActions","slackActions","handleMessageAction"]);return g.a.createElement(w["f"],n()({menuClassNames:"p-message_actions_menu",onMenuItemSelected:l,stripTerminalSeparators:true},h),this.renderSlackActions(),g.a.createElement(w["d"],null),u&&this.renderAppActions())}}]);return t}(b["PureComponent"]);ca.displayName="MessageActionsMenu";ca.defaultProps=la;var ua=function e(t,r){var a=r.channelId,i=r.ts;var s=r.messageContainerType||P["MESSAGE_CONTAINERS"].MESSAGE_PANE;var o=Object(x["getMessageByTimestamp"])(t,a,i);var l=Object(S["isFeatureEnabled"])(t,"feature_file_threads");var c=Object(D["canRunAppAction"])(o,l);var u=Object(Jr["canRunAppAction"])(t);var d=Object(rt["selectMessageActions"])(t),p=d.actions;var m=u&&c;var h=Object(k["filter"])([Xe(t,r),g.a.createElement(w["d"],null),Object(k["includes"])([P["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,P["MESSAGE_CONTAINERS"].THREADS_VIEW,P["MESSAGE_CONTAINERS"].SLI_BRIEFING],s)&&He(t,r),Z(t,r),Object(k["includes"])([P["MESSAGE_CONTAINERS"].MESSAGE_PANE,P["MESSAGE_CONTAINERS"].UNREAD_VIEW],s)&&pe(t,n()({},r,{allUnreads:s===P["MESSAGE_CONTAINERS"].UNREAD_VIEW})),xe(t,r),ge(t,r),se(t,r),Be(t,r),te(t,r)]);return{slackActions:h,appActions:p,canRunAppAction:m,clogger:Object(E["a"])({state:t})}};var da=function e(t){return{onLoad:function e(){return t(Object(rt["ensureFresh"])())},handleMessageAction:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return Dt.apply(void 0,a.concat([t]))},recordMessageActionFrecencyEvent:function e(r){return t(M(r))}}};var pa=Object(y["connect"])(ua,da)(ca);r.d(t,false,function(){return na});var ma=t["a"]=pa},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return l});r.d(t,"c",function(){return c});r.d(t,"d",function(){return u});r.d(t,"b",function(){return d});r.d(t,"e",function(){return p});r.d(t,"g",function(){return m});r.d(t,"h",function(){return h});r.d(t,"f",function(){return f});var a=r(62);var n="universal_search";var i={autocompleteKeystroke:"autocomplete_keystroke",autocompleteRequest:"autocomplete_request",autocompleteResponse:"autocomplete_response",autocompleteRenderStart:"autocomplete_render_start",searchAccept:"search_accept",searchFilter:"search_filter",searchModuleRequest:"search_module_request",searchModuleResponse:"search_module_response",searchModuleRenderStart:"search_module_render_start"};var s={autocompleteRequestToResponse:"ac_request_to_response",autocompleteKeystrokeToRenderStart:"ac_keystroke_to_render_start",searchAcceptToRenderStart:"search_accept_to_render_start",searchRequestToResponse:"search_request_to_response"};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[n+"_"+e].concat(t||[]).join("_")}function l(){Object(a["e"])(o(i.autocompleteKeystroke))}function c(){Object(a["e"])(o(i.autocompleteRequest))}function u(){Object(a["e"])(o(i.autocompleteResponse));Object(a["g"])(s.autocompleteRequestToResponse,o(i.autocompleteRequest))}function d(){Object(a["e"])(o(i.autocompleteRenderStart));if(!Object(a["d"])(i.autocompleteKeystroke))return;Object(a["g"])(s.autocompleteKeystrokeToRenderStart,o(i.autocompleteKeystroke))}function p(){Object(a["e"])(o(i.searchAccept))}function m(e,t,r){Object(a["e"])(o(i.searchModuleRequest,[e,t,r]))}function h(e,t,r){Object(a["e"])(o(i.searchModuleResponse,[e,t,r]));Object(a["g"])(s.searchRequestToResponse,o(i.searchModuleRequest,[e,t,r]))}function f(e,t,r){Object(a["e"])(o(i.searchModuleRenderStart,[e,t,r]));Object(a["g"])(s.searchAcceptToRenderStart,o(i.searchAccept))}},,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"test",function(){return O});r.d(t,"updateTyping",function(){return E});r.d(t,"clearTyping",function(){return w});r.d(t,"clearTypingCleanupInterval",function(){return C});r.d(t,"bulkClearTyping",function(){return S});r.d(t,"getAllTyping",function(){return A});r.d(t,"getTypingByKey",function(){return R});r.d(t,"getNumberOfRecords",function(){return M});r.d(t,"getTyperIdsInChannel",function(){return P});r.d(t,"removeOldTypingRecords",function(){return x});r.d(t,"memberStartedTyping",function(){return D});r.d(t,"currentUserStartedTyping",function(){return F});r.d(t,"memberEndedTyping",function(){return L});r.d(t,"currentUserEndedTyping",function(){return B});r.d(t,"checkTypingMap",function(){return U});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(32);var l=r.n(o);var c=r(129);var u=r(2);var d=r.n(u);var p=r(4);var m=r(336);var h=r(11);var f=r(79);var v=r(800);var b;var g=f["isConnected"];var _=m["send"];var y=v["b"];var k=v["a"];var O={};Object.defineProperty(O,"isConnected",{get:function e(){return g},set:function e(t){g=t}});Object.defineProperty(O,"send",{get:function e(){return _},set:function e(t){_=t}});Object.defineProperty(O,"legacyMemberTypingStarted",{get:function e(){return y},set:function e(t){y=t}});Object.defineProperty(O,"legacyMemberTypingEnded",{get:function e(){return k},set:function e(t){k=t}});var E=Object(p["a"])("Update typing timestamp for a given key");E.propTypes={key:c["b"].string.isRequired,started:c["b"].number.isRequired,model_ob_id:c["b"].string.isRequired,member_id:c["b"].string.isRequired,member_is_self:c["b"].bool};var w=Object(p["a"])("Remove typing activity for a given key");w.propTypes={key:c["b"].string.isRequired};var C=Object(p["a"])("Stop the typing cleanup interval because there are no users typing");C.propTypes=null;var S=Object(p["a"])("Remove typing activity for multiple keys");S.propTypes=c["b"].arrayOf(c["b"].string);var j=5e3;var I=6e3;var T={};var N=Object(p["c"])((b={},n()(b,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=t.key,a=l()(t,["key"]);if(!r)return e;if(e[r])return s()({},e,n()({},r,s()({},e[r],{started:a.started})));return s()({},e,n()({},r,s()({},a)))}),n()(b,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.key;if(!r||!e[r])return e;return d.a.omit(e,r)}),n()(b,S,function(e,t){if(!t||!t.length||!d.a.isArray(t))return e;var r=d.a.omit(e,t);if(Object.keys(r).length===Object.keys(e).length)return e;return r}),b),T);N.propTypes=c["b"].objectOf(c["b"].shape({started:c["b"].number,model_ob_id:c["b"].string,member_id:c["b"].string,member_is_self:c["b"].bool}));t["default"]=N;var A=Object(p["d"])(function(e){return e&&e.typing});var R=Object(p["d"])(function(e,t){return e&&e.typing&&e.typing[t]});var M=Object(p["d"])(function(e){return e&&e.typing&&Object.keys(e.typing).length});var P=Object(p["d"])(function(e,t){var r=d.a.filter(e&&e.typing,function(e){return e.model_ob_id===t&&!e.member_is_self});return d.a.map(r,"member_id")});var x=Object(p["e"])("remove old typing records",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.now;var n=A(t());var i=d.a.map(n,function(e,t){var r=e.member_is_self?j:I;var n=a-e.started;if(n>=r)return t;return null});i=d.a.compact(i);i.length&&e(S(i))});x.propTypes={now:c["b"].number.isRequired};var D=Object(p["e"])("member started typing (also dispatched by currentUserStartedTyping)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.memberId;var i=t();var s=a+"_"+n;var o=Date.now();var l=!R(i,s);e(E({key:s,started:o,model_ob_id:a,member_id:n,member_is_self:Object(h["getCurrentUserId"])(i)===n}));l&&y(a,n)});D.propTypes={channelId:c["b"].string.isRequired,memberId:c["b"].string.isRequired};var F=Object(p["e"])("logged in user has started typing",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;var n=t();if(!g(n))return;if(!a)return;var i=Object(h["getCurrentUserId"])(n);var s=a+"_"+i;if(R(n,s))return;var o={type:"typing",channel:a};e(_(o));e(D({channelId:a,memberId:i}))});F.propTypes={channelId:c["b"].string.isRequired};var L=Object(p["e"])("member stopped typing (also dispatched by currentUserEndedTyping)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.memberId;var i=a+"_"+n;e(w({key:i}));k(a,n)});L.propTypes={channelId:c["b"].string.isRequired,memberId:c["b"].string.isRequired};var B=Object(p["e"])("logged in user has stopped typing",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;if(!a)return;var n=t();var i=Object(h["getCurrentUserId"])(n);e(L({channelId:a,memberId:i}))});B.propTypes={channelId:c["b"].string.isRequired};var U=Object(p["e"])("Periodically update the typing map to look for typing records that have expired, and update legacy of the changes",function(e,t){var r=Date.now();var a=0;var n=A(t());e(x({now:r}));var i=A(t());var s=d.a.difference(Object.keys(n),Object.keys(i));s.forEach(function(e){var t=n[e];k(t.model_ob_id,t.member_id)});a=M(t());a<1&&e(C())})},function(e,t,r){"use strict";var a=r(10);var n=r(138);var i=Object(a["p"])();function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=arguments[1];var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.displayTrailingZeroes,s=void 0!==a&&a,o=r.currencyDisplay,l=void 0===o?"symbol":o;if(!t)return null;var c={style:"currency",currency:t,currencyDisplay:l};e%100!==0||s||(c.minimumFractionDigits=0);return Object(n["b"])(e,i,c)}var o={};Object.defineProperty(o,"locale",{get:function e(){return i},set:function e(t){i=t}});t["a"]=s},,,function(e,t,r){"use strict";var a=r(4);var n=r(167);var i=r(739);var s=r(798);var o=r(180);var l=r(37);var c=r(242);var u=Object(a["e"])("Close search UI",function(e,t){if(Object(l["wasFocusedViaTabKey"])(t())){var r=window.$&&window.$("#search_terms");r&&Object(c["d"])(r);e(Object(l["setFocusedViaTabKey"])({wasFocusedViaTabKey:false}))}if(!Object(n["b"])(t())){var a=window.$&&window.$("#search_terms");var u=Object(o["getSearchInputBoxDisplayQuery"])(t());if(a&&u)try{Object(c["k"])(a,u)}catch(e){}Object(s["b"])()}e(Object(i["a"])({visible:false}))});u.propTypes={};t["a"]=u},,,,,function(e,t,r){"use strict";r.d(t,"g",function(){return p});r.d(t,"h",function(){return m});r.d(t,"a",function(){return h});r.d(t,"b",function(){return f});r.d(t,"f",function(){return v});r.d(t,"c",function(){return b});r.d(t,"e",function(){return M});r.d(t,"d",function(){return x});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(10);var u=r(30);var d=new c["b"]("checkout_v2");function p(e,t,r){var a=D(t);if(Object(o["isEmpty"])(a))return{};return s()({},_(e,a),y(e,a,r),k(e,a))}function m(e,t,r,a){var n=null;var i=D(a);if(Object(o["isEmpty"])(i))return n;var s=e.companyName,l=e.street,c=e.city,d=e.country,p=e.postalCode,m=e.region,h=e.vatId,f=e.isBusinessPurchase,v=e.isVatIdAvailable,b=e.abnId;switch(t){case u["b"].COMPANY_NAME:n=S(s,i);break;case u["b"].STREET:n=j(l,i);break;case u["b"].CITY:n=I(c,i);break;case u["b"].COUNTRY:n=T(d,i);break;case u["b"].POSTAL_CODE:n=N(d,p,i);break;case u["b"].REGION:n=A(d,m,i);break;case u["b"].VAT_ID:n=R(d,h,f,v,r,i);break;case u["b"].ABN_ID:n=P(b,i);break;default:}return n}function h(e,t,r,a){var n=D(a);if(Object(o["isEmpty"])(n))return{};var i={};var s=u["f"].DEFAULT_ERROR;"102"===e?s=u["f"].ZIP_CODE_INVALID_API_ERROR:t===u["f"].VAT_ID_INPUT_ERROR?s=r?u["f"].VAT_ID_INVALID_API_ERROR:u["f"].VAT_ID_INVALID_FORMAT:Object(o["has"])(u["f"],t)&&(s=t);switch(s){case u["f"].ZIP_CODE_INVALID_API_ERROR:i.postalCode=E(u["f"].ZIP_CODE_INVALID_API_ERROR,"",n);break;case u["f"].VAT_ID_INVALID_API_ERROR:i.vatId=E(u["f"].VAT_ID_INVALID_API_ERROR,"",n);break;case u["f"].VAT_ID_INVALID_FORMAT:i.vatId=E(u["f"].VAT_ID_INVALID_FORMAT,"",n);break;case u["f"].API_ERROR:case u["f"].ADDRESS_INPUT_ERROR:case u["f"].ERROR_UPDATING_BILLING_ADDRESS:case u["f"].NO_PERMS:case u["f"].INVALID_AUTH:default:i.general=E(u["f"].DEFAULT_ERROR,"",n)}return i}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return null;return v(e)?d.t("Zip code"):d.t("Postal code")}function v(e){return e===u["e"].UNITED_STATES}function b(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return null;return g(e)?d.t("State"):d.t("State / Province")}function g(e){return e===u["e"].UNITED_STATES}function _(e,t){var r={};var a=S(e.companyName,t);a&&(r.companyName=a);var n=j(e.street,t);n&&(r.street=n);var i=I(e.city,t);i&&(r.city=i);var s=T(e.country,t);s&&(r.country=s);var o=N(e.country,e.postalCode,t);o&&(r.postalCode=o);var l=A(e.country,e.region,t);l&&(r.region=l);return r}function y(e,t,r){var a={};var n=R(e.country,e.vatId,e.isBusinessPurchase,e.isVatIdAvailable,r,t);n&&(a.vatId=n);return a}function k(e,t){var r={};var a=P(e.abnId,t);a&&(r.abnId=a);return r}function O(e){return e===u["e"].UNITED_STATES||e===u["e"].CANADA}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=arguments[2];var a=r[e]||{};switch(e){case u["f"].POSTAL_CODE_IS_REQUIRED:case u["f"].POSTAL_CODE_INVALID_CHARACTERS:case u["f"].POSTAL_CODE_INVALID_API_ERROR:a=w(e,t,r);break;case u["f"].REGION_IS_REQUIRED:case u["f"].REGION_INVALID_CHARACTERS:a=C(e,t,r);break;default:}return a}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=arguments[2];var a=r[e]||{};if(t===u["e"].UNITED_STATES)switch(e){case u["f"].POSTAL_CODE_IS_REQUIRED:a=r[u["f"].ZIP_CODE_IS_REQUIRED];break;case u["f"].POSTAL_CODE_INVALID_CHARACTERS:a=r[u["f"].ZIP_CODE_INVALID_CHARACTERS];break;case u["f"].POSTAL_CODE_INVALID_API_ERROR:a=r[u["f"].ZIP_CODE_INVALID_API_ERROR];break;default:}return a}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=arguments[2];var a=r[e]||{};if(t===u["e"].UNITED_STATES)switch(e){case u["f"].REGION_IS_REQUIRED:a=r[u["f"].STATE_IS_REQUIRED];break;case u["f"].REGION_INVALID_CHARACTERS:a=r[u["f"].STATE_INVALID_CHARACTERS];break;default:}return a}function S(e,t){var r=null;e||(r=E(u["f"].COMPANY_NAME_IS_REQUIRED,"",t));return r}function j(e,t){var r=null;e?u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(e)||(r=E(u["f"].STREET_INVALID_CHARACTERS,"",t)):r=E(u["f"].STREET_IS_REQUIRED,"",t);return r}function I(e,t){var r=null;e?u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(e)||(r=E(u["f"].CITY_INVALID_CHARACTERS,"",t)):r=E(u["f"].CITY_IS_REQUIRED,"",t);return r}function T(e,t){var r=null;e||(r=E(u["f"].COUNTRY_IS_REQUIRED,"",t));return r}function N(e,t,r){var a=null;O(e)?t?u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)?e!==u["e"].UNITED_STATES||u["a"].US_POSTAL_CODE_FORMAT_REGEX.test(t)?e!==u["e"].CANADA||u["a"].CANADA_POSTAL_CODE_FORMAT_REGEX.test(t)||(a=E(u["f"].CANADA_POSTAL_CODE_INVALID_FORMAT,e,r)):a=E(u["f"].US_ZIP_CODE_INVALID_FORMAT,e,r):a=E(u["f"].POSTAL_CODE_INVALID_CHARACTERS,e,r):a=E(u["f"].POSTAL_CODE_IS_REQUIRED,e,r):t&&!u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)&&(a=E(u["f"].POSTAL_CODE_INVALID_CHARACTERS,e,r));return a}function A(e,t,r){var a=null;O(e)&&!t?a=E(u["f"].REGION_IS_REQUIRED,e,r):t&&!u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(t)&&(a=E(u["f"].REGION_INVALID_CHARACTERS,e,r));return a}function R(e,t,r,a,n,i){var s=null;r&&a&&M(e,n)&&(t?u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)||(s=E(u["f"].VAT_ID_INVALID_CHARACTERS,"",i)):s=E(u["f"].VAT_ID_IS_REQUIRED,"",i));return s}function M(e,t){return Object(o["has"])(t,e)}function P(e,t){var r=null;e&&(11!==e.replace(/\s/g,"").length?r=E(u["f"].ABN_ID_INVALID_LENGTH,"",t):u["a"].ABN_ID_REGEX.test(e)||(r=E(u["f"].ABN_ID_INVALID_CHARACTERS,"",t)));return r}function x(e,t){return Object(o["has"])(t,e)}function D(){var e;var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return{};return e={},n()(e,u["f"].COMPANY_NAME_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a company name.")}),n()(e,u["f"].STREET_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a street address.")}),n()(e,u["f"].CITY_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a city.")}),n()(e,u["f"].POSTAL_CODE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a postal code.")}),n()(e,u["f"].ZIP_CODE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a zip code.")}),n()(e,u["f"].REGION_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your state / province.")}),n()(e,u["f"].STATE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your state.")}),n()(e,u["f"].COUNTRY_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your country.")}),n()(e,u["f"].VAT_ID_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a VAT ID.")}),n()(e,u["f"].STREET_INVALID_CHARACTERS,{errorText:d.t("Your street address can\u2019t contain special characters.")}),n()(e,u["f"].CITY_INVALID_CHARACTERS,{errorText:d.t("Your city name can\u2019t contain special characters.")}),n()(e,u["f"].REGION_INVALID_CHARACTERS,{errorText:d.t("Your state / province can\u2019t contain special characters.")}),n()(e,u["f"].STATE_INVALID_CHARACTERS,{errorText:d.t("Your state can\u2019t contain special characters.")}),n()(e,u["f"].POSTAL_CODE_INVALID_CHARACTERS,{errorText:d.t("Your postal code can\u2019t contain special characters.")}),n()(e,u["f"].ZIP_CODE_INVALID_CHARACTERS,{errorText:d.t("Your zip code can\u2019t contain special characters.")}),n()(e,u["f"].VAT_ID_INVALID_CHARACTERS,{errorText:d.t("Your VAT ID can\u2019t contain special characters.")}),n()(e,u["f"].ABN_ID_INVALID_CHARACTERS,{errorText:d.t("Your ABN ID can\u2019t contain special characters.")}),n()(e,u["f"].US_ZIP_CODE_INVALID_FORMAT,{errorText:d.t("Please use a 5- or 9-digit zip code.")}),n()(e,u["f"].CANADA_POSTAL_CODE_INVALID_FORMAT,{errorText:d.t("Please use a valid Canadian postal code.")}),n()(e,u["f"].POSTAL_CODE_INVALID_API_ERROR,{errorText:d.t("There\u2019s a problem with your postal code.")}),n()(e,u["f"].ZIP_CODE_INVALID_API_ERROR,{errorText:d.t("There\u2019s a problem with your zip code.")}),n()(e,u["f"].VAT_ID_INVALID_API_ERROR,{errorText:d.t("We could not verify your VAT ID.")}),n()(e,u["f"].VAT_ID_INPUT_ERROR,{errorText:d.t("Unfortunately, this VAT ID doesn\u2019t seem to be valid.")}),n()(e,u["f"].VAT_ID_INVALID_FORMAT,{errorText:d.t("Unfortunately, this VAT ID doesn\u2019t seem to be valid.")}),n()(e,u["f"].ABN_ID_INVALID_LENGTH,{errorText:d.t("Your ABN ID should have 11 digits.")}),n()(e,u["f"].DEFAULT_ERROR,{errorText:d.t("Unfortunately, something\u2019s gone wrong.")}),e}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"uploadStarting",function(){return u});r.d(t,"progressUpdate",function(){return d});r.d(t,"uploadCanceled",function(){return p});r.d(t,"uploadComplete",function(){return m});r.d(t,"uploadQueueEmptied",function(){return h});r.d(t,"IDLE",function(){return f});r.d(t,"UPLOADING",function(){return v});r.d(t,"COMPLETE",function(){return b});r.d(t,"CANCELED",function(){return g});r.d(t,"getFileUploadState",function(){return k});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c;var u=Object(l["a"])("Started uploading a file");u.propTypes={fileName:o["b"].string.isRequired,isRetry:o["b"].bool.isRequired,cancelable:o["b"].bool.isRequired};var d=Object(l["a"])("Update to the file upload % complete");d.propTypes={percentComplete:o["b"].number.isRequired};var p=Object(l["a"])("Canceled the file upload");p.propTypes=null;var m=Object(l["a"])("Finished the file upload");m.propTypes=null;var h=Object(l["a"])("Done all uploads");h.propTypes=null;var f=0;var v=1;var b=2;var g=3;var _={status:f,fileName:null,percentComplete:0,cancelable:false,isRetry:false};var y=Object(l["c"])((c={},n()(c,u,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.fileName,a=t.isRetry,n=t.cancelable;return{status:v,fileName:r,isRetry:a,percentComplete:0,cancelable:n}}),n()(c,d,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.percentComplete;return s()({},e,{percentComplete:r})}),n()(c,p,function(e){return s()({},e,{status:g})}),n()(c,m,function(e){return s()({},e,{status:b})}),n()(c,h,function(e){return s()({},e,{status:f})}),c),_);y.propTypes={status:o["b"].number.isRequired,fileName:o["b"].string,percentComplete:o["b"].number,cancelable:o["b"].bool,isRetry:o["b"].bool};t["default"]=y;var k=Object(l["d"])(function(e){return e&&e.fileUpload})},,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(33);var n=r(23);function i(e){return Object(a["c"])(Object(n["getTeamId"])(e))}},,function(e,t,r){"use strict";r.r(t);r.d(t,"setUsersCounts",function(){return c});r.d(t,"getUsersCounts",function(){return d});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=Object(l["a"])("Initialize the raw users counts");c.propTypes=o["b"].shape({channels:o["b"].array,groups:o["b"].array,ims:o["b"].array,mpims:o["b"].array,threads:o["b"].object});var u=Object(l["c"])(n()({},c,function(e,t){return s()({},e,{counts:t})}),{});u.propTypes={counts:o["b"].shape({channels:o["b"].array,groups:o["b"].array,ims:o["b"].array,mpims:o["b"].array,threads:o["b"].object})};t["default"]=u;var d=Object(l["d"])(function(e){return e&&e.usersCounts&&e.usersCounts.counts})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"bulkAddStarredItems",function(){return g});r.d(t,"addStarredItem",function(){return _});r.d(t,"removeStarredItem",function(){return y});r.d(t,"updatePageNumber",function(){return k});r.d(t,"setLoadingState",function(){return O});r.d(t,"fetchStarsList",function(){return S});r.d(t,"initialState",function(){return j});r.d(t,"getAllStarredItems",function(){return T});r.d(t,"getCurrentPageNumber",function(){return N});r.d(t,"getTotalPages",function(){return A});r.d(t,"getLoadingState",function(){return R});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(44);var c=r(373);var u=r(986);var d=r(4);var p=r(17);var m=r(959);var h=r(422);var f=r(2);var v=r.n(f);var b;var g=Object(d["a"])("Adds multiple IDs of starred items to array");g.propTypes=o["b"].arrayOf(o["b"].object).isRequired;var _=Object(d["a"])("Adds ID of single starred items to array");_.propTypes=o["b"].object.isRequired;var y=Object(d["a"])("Removes ID single starred item from array");y.propTypes=o["b"].object.isRequired;var k=Object(d["a"])("Store current pagination");k.propTypes=o["b"].object.isRequired;var O=Object(d["a"])("Sets if stars are loading");O.propTypes=o["b"].bool.isRequired;var E={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment",CHANNEL:"channel"};var w=function e(t,r){if(r.type===E.MESSAGE)return{type:r.type,channel:r.channel,ts:r.message.ts};if(r.type===E.FILE)return{type:r.type,id:r.file.id};if(r.type===E.FILE_COMMENT)return{type:r.type,id:r.comment.id,fileId:r.file.id};return{}};var C=function e(t,r){var a=t.ts||t.message&&t.message.ts;return Object(f["filter"])(r,function(e){if(t.type===E.MESSAGE&&e.channel===t.channel&&e.ts===a)return false;if(t.type===E.FILE&&e.id===t.file_id)return false;return true})};var S=Object(d["e"])("Fetch starred items list for user",function(e,t,r){e(O(true));e(Object(m["a"])(r)).then(function(t){var r=Object(f["filter"])(t.items,function(e){return e.type===E.MESSAGE});Object(f["forEach"])(r,function(t){var r=e(Object(h["a"])({imsgs:[t.message],channelId:t.channel}));r.length&&e(Object(l["addMessages"])(r))});var a=Object(f["filter"])(t.items,function(e){return e.type===E.FILE});a=Object(f["map"])(a,function(e){return e.file});a.length&&e(Object(c["a"])({files:a}));var n=Object(f["filter"])(t.items,function(e){return e.type===E.FILE_COMMENT});var i={};n.forEach(function(e){i[e.file.id]=e.file});n.forEach(function(e){var t=e.comment;var r=i[e.file.id];var a=Object(u["a"])(t,r);i[r.id]=a});e(Object(c["a"])({files:Object(f["values"])(i)}));e(g(t.items));e(k(t.paging));e(O(false))}).catch(function(e){Object(p["a"])({getState:t}).error("Error in fetchStarsList: "+JSON.stringify(e));throw e})});S.propTypes={options:o["b"].shape({count:o["b"].number,page:o["b"].number,exclude:o["b"].bool,cursor:o["b"].string,limit:o["b"].number})};var j={starsList:[],currentPage:0,totalPages:0,isLoading:false};var I=Object(d["c"])((b={},n()(b,g,function(e,t){if(!t||!t.length||!Object(f["isArray"])(t))return e;var r=Object(f["filter"])(t,function(e){return e.type!==E.CHANNEL});var a=Object(f["map"])(r,function(t){return w(e,t)});var n=e.starsList.concat(a);var i=Object(f["uniqWith"])(n,f["isEqual"]);var o=s()({},e,{starsList:i});return o}),n()(b,_,function(e,t){if(!t)return e;if(t.type===E.CHANNEL)return e;var r=C(t,e.starsList);var a=w(e,t);r=Object(f["concat"])([a],r);var n=s()({},e,{starsList:r});return n}),n()(b,y,function(e,t){if(!t)return e;var r=C(t,e.starsList);var a=s()({},e,{starsList:r});return a}),n()(b,k,function(e,t){if(!t.page||!t.pages)return e;var r=s()({},e,{currentPage:t.page,totalPages:t.pages});return r}),n()(b,O,function(e,t){var r=s()({},e,{isLoading:t});return r}),b),j);I.propTypes={starsList:o["b"].arrayOf(o["b"].shape({type:o["b"].string.isRequired,channel:o["b"].string,ts:o["b"].string,id:o["b"].string})),currentPage:o["b"].number,totalPages:o["b"].number,isLoading:o["b"].bool};t["default"]=I;var T=Object(d["d"])(function(e){return e&&e.stars&&e.stars.starsList});var N=Object(d["d"])(function(e){return e&&e.stars&&e.stars.currentPage});var A=Object(d["d"])(function(e){return e&&e.stars&&e.stars.totalPages});var R=Object(d["d"])(function(e){return e&&e.stars&&e.stars.isLoading})},,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"addUserGroupIds",function(){return b});r.d(t,"saveScrollmark",function(){return g});r.d(t,"setCursorMark",function(){return _});r.d(t,"setSearchQuery",function(){return y});r.d(t,"getFlexpaneUserGroups",function(){return E});r.d(t,"getScrollmark",function(){return w});r.d(t,"getCursorMark",function(){return C});r.d(t,"getSearchQuery",function(){return S});r.d(t,"listAndUpsertUserGroups",function(){return j});r.d(t,"searchLocalUserGroups",function(){return I});r.d(t,"fetchUserGroupsPost",function(){return T});r.d(t,"fetchDeactivatedUserGroupsPost",function(){return N});var a=r(32);var n=r.n(a);var i=r(9);var s=r.n(i);var o=r(3);var l=r.n(o);var c=r(2);var u=r.n(c);var d=r(129);var p=r(4);var m=r(797);var h=r(123);var f=r(267);var v;var b=Object(p["a"])("Add user group IDs to the flexpane");b.propTypes=d["b"].arrayOf(d["b"].string).isRequired;var g=Object(p["a"])("Set the user groups flexpane scroll offset");g.propTypes=d["b"].object;var _=Object(p["a"])("Set the cursor mark");_.propTypes=d["b"].string;var y=Object(p["a"])("Set the search query");y.propTypes=d["b"].string;var k={searchQuery:"",cursorMark:null,scrollmark:null,userGroupIds:[]};var O=Object(p["c"])((v={},s()(v,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.length)return e;return l()({},e,{userGroupIds:Object(c["union"])(e.userGroupIds,t)})}),s()(v,g,function(e,t){return l()({},e,{scrollmark:t})}),s()(v,_,function(e,t){return l()({},e,{cursorMark:t})}),s()(v,y,function(e,t){if(t===e.searchQuery)return e;var r=k.userGroupIds,a=k.scrollmark,n=k.cursorMark;return l()({},e,{userGroupIds:r,scrollmark:a,cursorMark:n,searchQuery:t})}),v),k);O.propTypes={searchQuery:d["b"].string,cursorMark:d["b"].string,scrollmark:d["b"].shape({key:d["b"].string,offset:d["b"].number}),userGroupIds:d["b"].arrayOf(d["b"].string)};t["default"]=O;var E=Object(p["d"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.userGroupIds});var w=Object(p["d"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.scrollmark});var C=Object(p["d"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.cursorMark});var S=Object(p["d"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.searchQuery});var j=Object(p["e"])("Fetch and upsert user groups",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.searchQuery,i=void 0===a?"":a,s=r.cursorMark,o=r.includeDeleted,c=n()(r,["searchQuery","cursorMark","includeDeleted"]);var u=l()({query:i,cursor_mark:s,include_deleted:o},c);return e(Object(f["j"])(u)).then(function(t){var r=t.items,a=void 0===r?[]:r,n=t.next_cursor_mark;var i=a.map(function(e){return e.id});e(b(i));e(Object(h["upsertUserGroups"])({userGroups:a}));e(_(n));return t})});j.propTypes={searchQuery:d["b"].string,cursorMark:d["b"].string,count:d["b"].number,reason:d["b"].string};var I=Object(p["e"])("Fetch local user groups",function(e,t){var r=t();var a=S(r);var n=Object(m["b"])(l()({},r),{query:a,options:{allowEmptyQuery:true,entities:{userGroups:true}}}).map(function(e){return e.id});e(b(n))});I.propTypes=null;var T=Object(p["e"])("Fetch user groups",function(e,t,r){var a=t();var n=C(a);var i=S(a);return e(j(l()({count:10},r,{cursorMark:n,searchQuery:i,reason:"fetchUserGroupsPost"})))});T.propTypes={searchQuery:d["b"].string,count:d["b"].number};var N=Object(p["e"])("Fetch deactivated user groups",function(e,t,r){var a=t();var n=C(a);var i=S(a);return e(j(l()({count:10,includeDeleted:2},r,{cursorMark:n,searchQuery:i,reason:"fetchUserGroupsPost"})))});N.propTypes={searchQuery:d["b"].string,count:d["b"].number}},,function(e,t,r){"use strict";r.d(t,"h",function(){return n});r.d(t,"b",function(){return i});r.d(t,"d",function(){return s});r.d(t,"g",function(){return o});r.d(t,"c",function(){return l});r.d(t,"e",function(){return c});r.d(t,"i",function(){return u});r.d(t,"f",function(){return d});r.d(t,"a",function(){return m});var a=r(13);var n=Object(a["c"])("TS.permissions.members.canRequestSharedChannel",function(){return false});var i=Object(a["c"])("TS.permissions.members.canCreateChannels",function(){return false});var s=Object(a["c"])("TS.permissions.members.canCreateGroups",function(){return false});var o=Object(a["c"])("TS.permissions.members.canPostInModelOb",function(){return false});var l=Object(a["c"])("TS.permissions.members.canCreateConvertOrgSharedChannels",function(){return false});var c=Object(a["c"])("TS.permissions.members.canExportMessageHistory",function(){return false});var u=Object(a["c"])("TS.permissions.members.canUserInviteToWorkspace",function(){return false});var d=Object(a["c"])("TS.permissions.members.canManageParticipationInSharedChannelsOpenBeta",function(){return false});var p=Object(a["c"])("TS.permissions.members.canEditUserGroups",function(){return false});var m=Object(a["c"])("TS.permissions.members.canCreateAndDeleteUserGroups",function(){return false})},,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return p});r.d(t,"c",function(){return m});r.d(t,"b",function(){return _});var a=r(2);var n=r.n(a);var i=r(35);var s=r.n(i);var o=r(10);var l=r(320);var c=r(47);var u=r(282);var d=new o["b"]("search_menu");var p="YYYY-MM-DD";function m(e,t,r){var a=u["g"].tokenListFromString(e,t);var n=a;n=h(e,n,r.from||[]);n=f(e,n,r.in||[]);n=v(e,n,r.before);n=b(e,n,r.after);n=g(e,n,r.fileType);var i=new l["f"](e,"",n);return i}function h(e,t,r){var n=t;var i=[].concat(r);n=n.filter(function(e){if(e.type!==c["a"].FILTER_FROM)return true;var t=e.entityId;if(t&&Object(a["includes"])(i,t)){i=Object(a["without"])(i,t);return true}return false});n=n.concat(i.map(function(t){return new u["f"](1,e,t,null,c["f"].FROM)}));return n}function f(e,t,r){var n=t;var i=[].concat(r);n=n.filter(function(e){if(e.type!==c["a"].FILTER_IN)return true;var t=e.entityId;if(Object(a["includes"])(i,t)){i=Object(a["without"])(i,t);return true}return false});n=n.concat(i.map(function(t){return new u["e"](1,e,t,null)}));return n}function v(e,t,r){var a=false;var n=t.filter(function(e){if(e.type!==c["a"].FILTER_BEFORE)return true;if(e.dateString===r){a=true;return true}return false});r&&!a&&n.push(new u["c"](r,c["f"].BEFORE));return n}function b(e,t,r){var a=false;var n=t.filter(function(e){if(e.type!==c["a"].FILTER_AFTER)return true;if(e.dateString===r){a=true;return true}return false});r&&!a&&n.push(new u["c"](r,c["f"].AFTER));return n}function g(e,t,r){var a=false;var n=t.filter(function(e){if(e.type!==c["a"].FILTER_TYPE)return true;if(e.fileType===r){a=true;return true}return false});r&&!a&&n.push(new u["h"](r));return n}function _(e,t){var r=u["g"].tokenListFromString(e,t);var a={in:[],from:[],before:void 0,after:void 0,fileType:void 0};r.forEach(function(e){e.type===c["a"].FILTER_FROM?a.from.push(e.entityId):e.type===c["a"].FILTER_IN?a.in.push(e.entityId):e.type===c["a"].FILTER_BEFORE?a.before=y(e.dateString):e.type===c["a"].FILTER_AFTER?a.after=y(e.dateString):e.type===c["a"].FILTER_TYPE&&(a.fileType=e.fileType)});return a}function y(e){if(e.match(/^20[0-9][0-9]$/))return;if(e===d.t("today"))return s()().format(p);if(e===d.t("yesterday"))return s()().subtract(1,"days").format(p);var t=s()(e);if(t.isValid())return t.format(p);return}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"setFlexState",function(){return d});r.d(t,"getFlexpaneState",function(){return h});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=r(116);var u;var d=Object(l["a"])("Setting the flexpane state");d.propTypes={flexName:o["b"].string.isRequired,flexExtra:o["b"].string,flexExtraType:o["b"].string,flexOrigin:o["b"].string,flexOriginId:o["b"].string};var p={flexName:null,flexExtra:null,flexExtraType:null,flexOrigin:null,flexOriginId:null};var m=Object(l["c"])((u={},n()(u,d,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.flexName,a=t.flexExtra,n=t.flexExtraType,i=t.flexOrigin,s=t.flexOriginId;return{flexName:r,flexExtra:a,flexExtraType:n,flexOrigin:i,flexOriginId:s}}),n()(u,c["setActiveChannel"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.prevChannelId;if(r===a)return e;var n=e.flexOrigin;if("channel_page"===n||"group_page"===n||"im_page"===n)return s()({},e,{flexOrigin:null,flexOriginId:null});return e}),u),p);m.propTypes={flexName:o["b"].string,flexExtra:o["b"].any,flexExtraType:o["b"].any,flexOrigin:o["b"].any,flexOriginId:o["b"].any};t["default"]=m;var h=Object(l["d"])(function(e){return e&&e.flexpane})},function(e,t,r){"use strict";r.r(t);r.d(t,"setScreenReaderEnabled",function(){return p});r.d(t,"setZoomLevel",function(){return m});r.d(t,"isScreenReaderEnabled",function(){return b});r.d(t,"zoomLevel",function(){return g});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(2);var c=r.n(l);var u=r(4);var d;var p=Object(u["a"])("Toggle if a screen reader is enabled");p.propTypes=o["b"].bool.isRequired;var m=Object(u["a"])("Update the zoom level");m.propTypes=o["b"].number.isRequired;var h={screenReaderEnabled:false,zoomLevel:0};var f=[-3,-2,-1,0,1,2,3];var v=Object(u["c"])((d={},n()(d,p,function(e,t){if("boolean"!==typeof t)return e;if(t===e.screenReaderEnabled)return e;return s()({},e,{screenReaderEnabled:t})}),n()(d,m,function(e,t){if(!Object(l["isInteger"])(t))return e;if(!Object(l["includes"])(f,t))return e;if(t===e.zoomLevel)return e;return s()({},e,{zoomLevel:t})}),d),h);v.propTypes={screenReaderEnabled:o["b"].bool.isRequired,zoomLevel:o["b"].number.isRequired};t["default"]=v;var b=Object(u["d"])(function(e){return e&&e.accessibility&&e.accessibility.screenReaderEnabled});var g=Object(u["d"])(function(e){return e&&e.accessibility&&e.accessibility.zoomLevel})},,,,,,,,,,function(e,t,r){"use strict";var a=r(1009);t["a"]=a["a"]},,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(37);var n=r(90);var i=r(186);function s(e){var t=Object(a["getTab"])(e);if("messages"===t){var r=Object(i["b"])(e);var s=Object(a["getModuleState"])(e,r);if(!s)return null;if(!s.loading)return Object(n["getRequestIdForModule"])(e,{module:r,page:s.page})}else if("files"===t){var o=Object(a["getModuleState"])(e,"files");if(!o)return null;if(!o.loading)return Object(n["getRequestIdForModule"])(e,{module:"files",page:o.page})}return null}},,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(97);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(3);var h=r.n(m);var f=r(1);var v=r.n(f);var b=r(129);var g=r(2);var _=r.n(g);var y=r(269);var k=r(996);var O=r(783);var E=r(884);var w=400;var C=h()({},k["a"].propTypes,{layout:b["b"].instanceOf(E["a"]),loadPre:b["b"].func,loadPost:b["b"].func,loadAround:b["b"].func,itemToScroll:b["b"].string,animateOnScroll:b["b"].bool});var S=h()({},k["a"].defaultProps,{layout:void 0,loadPre:g["noop"],loadPost:g["noop"],loadAround:g["noop"],itemToScroll:void 0,animateOnScroll:true});var j=function(e){p()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onScroll=r.onScroll.bind(r);r.setHeight=r.setHeight.bind(r);r.layout=e.layout||new E["a"];r.node=null;r.scrollTop=r.layout.setContainerHeight(e.height,0);r.scrollTop=r.layout.setKeys(e.keys,r.scrollTop);var a=r.layout.getBounds(r.scrollTop,r.scrollTop+e.height),i=a.start,s=a.end;var o=r.layout.getTops();r.state=h()({},r.state,{start:i,end:s,tops:o});return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){this.possiblySetInitialFocus(t);this.scrollToIfNotVisible(t);this.possiblyUpdateInitialActiveItem(t);t.width!==this.props.width&&this.layout.heightCache.invalidate();t.height!==this.props.height&&(this.scrollTop=this.layout.setContainerHeight(t.height,this.getScrollTop()));Object(y["a"])(t.keys,this.props.keys)||(this.scrollTop=this.layout.setKeys(t.keys,this.getScrollTop()));this.relayout()}},{key:"scrollToIfNotVisible",value:function e(t){var r=t.itemToScroll,a=t.animateOnScroll;r&&this.scrollToKey(r,{lazy:true,animate:a})}},{key:"componentDidUpdate",value:function e(){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this);"number"===typeof this.pendingScrollTop&&this.setScrollTop(this.pendingScrollTop);this.loadMore()}},{key:"componentDidMount",value:function e(){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);"number"===typeof this.pendingScrollTop&&this.setScrollTop(this.pendingScrollTop);this.loadMore()}},{key:"onScroll",value:function e(r){this.pendingScrollTop=false;u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onScroll",this).call(this,r)}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;if(!this.node)return 0;return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)}},{key:"setHeight",value:function e(t,r){if(!t)return;if(Math.abs(r-this.layout.getHeight(t))<.5)return;var a=this.getScrollTop();this.scrollTop=this.layout.setHeight(t,r,a);this.relayout()}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var n=a.keys,i=a.height;var s=this.layout.getTotalHeight();var o=this.layout.getTop(n[t]);var l=this.layout.getBottom(n[r-1]);var c=!n.length||s<=i||o<w;var u=!n.length||s<=i||s-l<w;if(c&&u)return a.loadAround();if(c)return a.loadPre();if(u)return a.loadPost();return null}},{key:"renderItem",value:function e(t,r){var a=this.getTop(t);var n=this.layout.getHeight(t);var i=this.layout.getHeightValidity(t);var s=this.state.activeItem===t;var o=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===t;var l=this.state.mouseDownTargetItem===t;var c=this.state.hoveredItem===t;var u=this.props.getAriaLabelForRow;var d=u&&u(r,{hasFocus:s});return v.a.createElement(O["a"],{key:t,id:t,height:n,validity:i,style:{top:a},role:this.props.itemRole,hasFocus:s,hasFocusWithin:o,isMouseDownOnItem:l,onHeightChange:this.setHeight,onFocusEnter:this.onItemFocusEnter,onFocusWithin:this.onItemFocusWithin,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseup,ariaLabel:d},this.props.rowRenderer(r,{hasFocus:s,isHovered:c}))}},{key:"render",value:function e(){this.pendingScrollTop=this.scrollTop;this.scrollTop=false;return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]);return t}(k["a"]);j.displayName="DynamicList";t["a"]=j;j.propTypes=C;j.defaultProps=S},,,,function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return s});var a=r(13);var n=Object(a["c"])("TS.apps.permissions.areXoxaAppsInstalled",function(){return false});var i=Object(a["c"])("TS.apps.permissions.app_resource_membership_changed_sig.dispatch");var s=Object(a["c"])("TS.apps.permissions.app_wildcard_changed_sig.dispatch")},,,,,function(e,t,r){"use strict";r.r(t);var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(2);var c=r(4);var u=r(11);var d=r(19);var p=r(50);var m=r(26);var h=r(10);var f=r(17);var v=r(81);var b=/([a-zA-Z\s]+<)*(([a-zA-Z0-9_.+-]+)@([a-zA-Z0-9-]+)\.([a-zA-Z0-9]{2,4}))>*\b/i;function g(e){var t=[];var r=[];if(!e)return Promise.resolve({done:false,result:false});var a=e.split("\n").join(", ");a=e.split(",");for(var n=0;n<a.length;n++){var i=a[n];var s=i.trim();var o=s.match(b);o?r.push(o[2]):t.push(s)}var l=t.filter(function(e){return!!e}).length;if(l){var c=new Error;1===l&&1===a.length?c.name="one_invalid_email":c.name="multiple_invalid_emails";return Promise.reject(c)}return Promise.resolve({result:r,done:true})}function _(e){if(!e)return Promise.resolve();return g(e).then(function(e){if(!e.done)return Promise.resolve();return Promise.resolve({validatedEmails:e.result})})}var y=r(12);var k=r(48);var O=r(257);var E=r(956);var w=r(240);var C=r(747);var S=r(772);var j=r(478);r.d(t,"setRealName",function(){return R});r.d(t,"setInEurope",function(){return M});r.d(t,"setGdprPref",function(){return P});r.d(t,"setWorkspaceName",function(){return x});r.d(t,"setWorkspaceDomain",function(){return D});r.d(t,"setDomainWhitelistingPref",function(){return F});r.d(t,"setCanWhitelistOwnerEmailDomain",function(){return L});r.d(t,"setSignupDomain",function(){return B});r.d(t,"setInvites",function(){return U});r.d(t,"setModalTitle",function(){return q});r.d(t,"setStepNumber",function(){return G});r.d(t,"setStepCallback",function(){return H});r.d(t,"setCurrentStepValidity",function(){return W});r.d(t,"setIsPromiseRunning",function(){return V});r.d(t,"setChannelId",function(){return z});r.d(t,"setChannelName",function(){return Q});r.d(t,"setWorkflow",function(){return K});r.d(t,"getRealName",function(){return X});r.d(t,"getInEurope",function(){return $});r.d(t,"getGdprPref",function(){return ee});r.d(t,"getWorkspaceName",function(){return te});r.d(t,"getWorkspaceDomain",function(){return re});r.d(t,"getInvites",function(){return ae});r.d(t,"getDomainWhitelistingPref",function(){return ne});r.d(t,"getCanWhitelistOwnerEmailDomain",function(){return ie});r.d(t,"getSignupDomain",function(){return se});r.d(t,"getModalTitle",function(){return oe});r.d(t,"getStepNumber",function(){return le});r.d(t,"getStepCallback",function(){return ce});r.d(t,"getCurrentStepValidity",function(){return ue});r.d(t,"getIsPromiseRunning",function(){return de});r.d(t,"getChannelName",function(){return pe});r.d(t,"getChannelId",function(){return me});r.d(t,"getWorkflow",function(){return he});r.d(t,"getActiveWorkflowTask",function(){return fe});r.d(t,"fetchAndSetChannelInfo",function(){return ve});r.d(t,"fetchAndSetWorkspace",function(){return be});r.d(t,"updateStep",function(){return ge});r.d(t,"validateInvites",function(){return _e});r.d(t,"sendInvites",function(){return ye});r.d(t,"updateRealName",function(){return ke});r.d(t,"updatePassword",function(){return Oe});r.d(t,"updateGdprPref",function(){return Ee});r.d(t,"setInitialMarketingPref",function(){return we});r.d(t,"updateWorkspaceName",function(){return Ce});r.d(t,"updateWorkspaceDomain",function(){return Se});r.d(t,"updateDomainWhitelistingPref",function(){return je});r.d(t,"fetchAndSetSignupDetails",function(){return Ie});r.d(t,"fetchTeamCreationWorkflow",function(){return Te});r.d(t,"completeWorkflowTask",function(){return Ne});r.d(t,"showSecondAccountSetupBanner",function(){return Ae});var I;var T=new h["b"]("team_creation");var N=Object(f["b"])();var A="TEAM_CREATOR_ONBOARDING";var R=Object(c["a"])("Set the primary owner's real name name");R.propTypes=o["b"].string;var M=Object(c["a"])("Set what region we're in, for initial GDPR pref setting");M.propTypes=o["b"].bool;var P=Object(c["a"])("Set the primary owner's GDPR pref");P.propTypes=o["b"].bool;var x=Object(c["a"])("Set workspace name");x.propTypes=o["b"].string;var D=Object(c["a"])("Set workspace domain");D.propTypes=o["b"].string;var F=Object(c["a"])("Set domain whitelisting pref");F.propTypes=o["b"].bool;var L=Object(c["a"])("Set whether or not we can set domain whitelist signups for primary owner's email domain");L.propTypes=o["b"].bool;var B=Object(c["a"])("Set signup domain for signup domain whitelisting");B.propTypes=o["b"].string;var U=Object(c["a"])("Set which emails to send invites to");U.propTypes=o["b"].array;var q=Object(c["a"])("Set modal title");q.propTypes=o["b"].string;var G=Object(c["a"])("Set step number");G.propTypes=o["b"].number;var H=Object(c["a"])("Set the callback that's fired when 'next' is clicked");H.propTypes=o["b"].func;var W=Object(c["a"])("Set the validity of the current step.");W.propTypes=o["b"].bool;var V=Object(c["a"])("Set the whether or not we have an active promise awaiting resolution");V.propTypes=o["b"].bool;var z=Object(c["a"])("Set the channel ID corresponding to the onboarding-created channel");z.propTypes=o["b"].string;var Q=Object(c["a"])("Set the channel name corresponding to the onboarding-supplied channel");Q.propTypes=o["b"].string;var K=Object(c["a"])("Set the active team creation workflow for this user");K.propTypes=o["b"].object;var Y={realName:"",inEU:true,gdprPref:false,workspaceName:"",workspaceDomain:"",invites:[],domainWhitelistingPref:false,canWhitelistOwnerEmailDomain:false,modalTitle:"",stepNumber:0,stepCallback:l["noop"],isCurrentStepValid:false,isPromiseRunning:false,channelName:"",channelId:null,workflow:null};var J=Object(c["c"])((I={},n()(I,R,function(e,t){return s()({},e,{realName:t})}),n()(I,M,function(e,t){return s()({},e,{inEU:t})}),n()(I,P,function(e,t){return s()({},e,{gdprPref:t})}),n()(I,x,function(e,t){return s()({},e,{workspaceName:t})}),n()(I,D,function(e,t){return s()({},e,{workspaceDomain:t})}),n()(I,U,function(e,t){return s()({},e,{invites:t})}),n()(I,B,function(e,t){return s()({},e,{signupDomain:t})}),n()(I,F,function(e,t){return s()({},e,{domainWhitelistingPref:t})}),n()(I,L,function(e,t){return s()({},e,{canWhitelistOwnerEmailDomain:t})}),n()(I,q,function(e,t){return s()({},e,{modalTitle:t})}),n()(I,G,function(e,t){return s()({},e,{stepNumber:t})}),n()(I,H,function(e,t){return s()({},e,{stepCallback:t})}),n()(I,W,function(e,t){return s()({},e,{isCurrentStepValid:t})}),n()(I,V,function(e,t){return s()({},e,{isPromiseRunning:t})}),n()(I,z,function(e,t){return s()({},e,{channelId:t})}),n()(I,Q,function(e,t){return s()({},e,{channelName:t})}),n()(I,K,function(e,t){return s()({},e,{workflow:t})}),I),Y);J.propTypes={realName:o["b"].string,gdprPref:o["b"].bool,workspaceName:o["b"].string,workspaceDomain:o["b"].string,invites:o["b"].array,domainWhitelistingPref:o["b"].bool,modalTitle:o["b"].string,stepNumber:o["b"].number,stepCallback:o["b"].func,isCurrentStepValid:o["b"].bool,isPromiseRunning:o["b"].bool,channelName:o["b"].string,channelId:o["b"].string,workflow:o["b"].object};var Z=t["default"]=J;var X=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.realName});var $=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.inEU});var ee=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.gdprPref});var te=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.workspaceName});var re=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.workspaceDomain});var ae=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.invites});var ne=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.domainWhitelistingPref});var ie=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.canWhitelistOwnerEmailDomain});var se=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.signupDomain});var oe=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.modalTitle});var le=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.stepNumber});var ce=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.stepCallback});var ue=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.isCurrentStepValid});var de=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.isPromiseRunning});var pe=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.channelName});var me=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.channelId});var he=Object(c["d"])(function(e){return e&&e.teamCreation&&e.teamCreation.workflow});var fe=Object(c["d"])(function(e){if(!e||!e.teamCreation||!e.teamCreation.workflow||!e.teamCreation.workflow.tasks)return null;var t=e.teamCreation.workflow;if("completed"===t.state)return null;var r=Object(l["find"])(t.tasks,{state:"pending"});return r?r.subtype:null});var ve=Object(c["e"])("Grab channel ID and channel name for the team creator onboarding dialog",function(e,t){var r=t();var a=Object(d["getAllChannels"])(r);var n=Object.values(a);var i=n.filter(function(e){return"general"!==Object(y["getDisplayName"])(e)&&"random"!==Object(y["getDisplayName"])(e)&&!Object(y["isIm"])(e)});var s=Object(l["get"])(i[0],"name",null);var o=Object(l["get"])(i[0],"id",null);e(Q(s));e(z(o));return Promise.resolve()});var be=Object(c["e"])("Grab workspace name and domain from boot data",function(e,t){var r=t();var a=Object(p["getCurrentTeam"])(r);var n=Object(p["getTeamById"])(r,a.id);var i=Object(k["getTeamDisplayName"])(n);var s=Object(u["getFromBootData"])(r,"team_url");var o=Object(v["getTeamSubdomain"])(s);e(x(i));e(D(o))});var ge=Object(c["e"])("Update the state of a step",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.number,n=r.validated,i=r.forceValidation;var s=t();var o=ue(s);var l=n||(i?n:o);if(l&&a){e(W(null));e(G(a));return Promise.resolve({isValid:l})}if(l){e(W(l));return Promise.resolve({isValid:l})}e(W(l));return Promise.resolve({isValid:l})});ge.propTypes={number:o["b"].number,validated:o["b"].bool};var _e=Object(c["e"])("validate emails to send invites to",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.invites;if(!a||!a.length){e(U([]));return Promise.resolve()}return _(a).then(function(t){var r=t.validatedEmails;e(U(r));return Promise.resolve(t)}).catch(function(e){N.info(A,e);if(Object(u["isFeatureEnabled"])(t(),"feature_tractor_more_strings")){var r={one_invalid_email:T.t("It looks like that email address isn\u2019t valid. Try again?"),multiple_invalid_emails:T.t("It looks like at least one of these addresses isn\u2019t valid. Try checking your list?")};var a=e.name||"generic_validate_invites_error";var n=Object(l["get"])(r,a)||null;var i=new Error(n);i.name=a;return Promise.reject(i)}return Promise.reject(e)})});_e.propTypes={invites:o["b"].string};var ye=Object(c["e"])("update the list of emails to send invites to",function(e,t){var r=t();var a=ae(r);if(!a||!a.length)return Promise.resolve();e(V(true));var n=a.map(function(e){return{email:e,type:"regular"}});return e(Object(C["b"])({invites:n,source:"team_creation_account_setup_dialog",mode:"manual"})).then(function(e){N.info(A,e)}).catch(function(e){var t=Object(l["get"])(e,"data.error","generic_send_invites_error");var r=new Error(t);r.name="email_send_failure";return Promise.reject(r)}).finally(function(){return e(V(false))})});var ke=Object(c["e"])("update real name field in profile",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.realName;e(V(true));return e(Object(O["j"])({profile:{real_name:a}})).then(function(t){t.ok&&e(R(a));return Promise.resolve(t)}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.data;if(Object(u["isFeatureEnabled"])(t(),"feature_tractor_onboarding")){var n={invalid_name_required:Object(j["a"])("name_invalid_name_required"),invalid_starts_with_at:Object(j["a"])("invalid_starts_with_at"),too_long:Object(j["a"])("too_long"),invalid_reserved_word:Object(j["a"])("invalid_reserved_word"),invalid_name_specials:Object(j["a"])("name_invalid_name_specials"),invalid_emoji_not_allowed:Object(j["a"])("invalid_emoji_not_allowed",{name:a}),ratelimited:T.t("Sorry, you\u2019ve hit the rate limit. You\u2019ll be able to try again soon.")};var i=r.error||"generic_real_name_error";var s=n[i]||T.t("For some reason, that didn\u2019t work. Please try again to continue.");var o=new Error(s);o.name=i;return Promise.reject(o)}return Promise.reject(r)}).finally(function(){return e(V(false))})});ke.propTypes={realName:o["b"].string};var Oe=Object(c["e"])("update Primary Owner account password",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.password;e(V(true));return e(Object(E["b"])({password:a})).then(function(e){return Promise.resolve(e)}).catch(function(e){return Promise.reject(e)}).finally(function(){return e(V(false))})});Oe.propTypes={password:o["b"].string.isRequired};var Ee=Object(c["e"])("update Primary Owners GDPR pref",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.gdprPref;return e(Object(w["a"])({email_weekly:a,email_tips:a,email_offers:a,email_research:a,email_developer:a})).then(function(t){t.ok&&e(P(a));return Promise.resolve(t)}).catch(function(e){var t=Object(l["get"])(e,"data.error","generic_gdpr_error");var r=new Error(t);r.name="generic_gdpr_error";return Promise.reject(r)})});Ee.propTypes={gdprPref:o["b"].bool};var we=Object(c["e"])("Set initial marketing email pref based on region",function(e,t){var r=t();var a=!!Object(u["getFromBootData"])(r,"is_europe");e(M(a));a||e(Ee({gdprPref:true}))});var Ce=Object(c["e"])("update workspace name",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.workspaceName;return e(Object(E["d"])({workspaceName:a})).then(function(t){t.ok&&a&&e(x(a));return Promise.resolve(t)}).catch(function(e){if(Object(u["isFeatureEnabled"])(t(),"feature_tractor_onboarding")){var r={denied:T.t("For some reason, that didn\u2019t work. Please try again to continue.")};var a=Object(l["get"])(e,"data.error","generic_workspace_name_error");var n=Object(l["get"])(r,a)||T.t("For some reason, that didn\u2019t work. Please try again to continue.");var i=new Error(n);i.name=a;return Promise.reject(i)}return Promise.reject(e)})});Ce.propTypes={workspaceName:o["b"].string};var Se=Object(c["e"])("update workspace domain",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.workspaceDomain;return e(Object(E["c"])({workspaceDomain:a})).then(function(t){t.ok&&e(D(a));return Promise.resolve(t)}).catch(function(e){if(Object(u["isFeatureEnabled"])(t(),"feature_tractor_onboarding")){var r={denied:T.t("For some reason, that didn\u2019t work. Please try again to continue."),bad_url:T.t("Workspace URLs can only have letters, numbers, and dashes."),long_url:T.t("Please enter up to 21 characters for your Workspace URL."),taken_url:T.t("This URL is not available. Sorry!")};var a=Object(l["get"])(e,"data.error","generic_workspace_domain_error");var n=r[a]||T.t("For some reason, that didn\u2019t work. Please try again to continue.");var i=new Error(n);i.name=a;return Promise.reject(i)}return Promise.reject(e)})});Se.propTypes={workspaceDomain:o["b"].string};var je=Object(c["e"])("update domain whitelisting pref",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.domainWhitelistingPref;var n={signup_mode:"invites"};if(a){var i=t();var s=se(i);n.signup_mode="email";n.signup_domains=s}e(Object(E["h"])({prefs:n})).then(function(t){t.ok&&e(F(a));return Promise.resolve(t)}).catch(function(e){var t=Object(l["get"])(e,"data.error","generic_domain_whitelisting_error");var r=new Error(t);r.name="generic_domainwhitelisting_error";return Promise.reject(r)})});je.propTypes={domainWhitelistingPref:o["b"].bool};var Ie=Object(c["e"])("Grab primary owner email domain for domain whitelisting",function(e,t){var r=t();var a=Object(m["getCurrentMember"])(r);var n=Object(l["get"])(a,"profile.email");var i=n.split("@")[1];e(Object(E["f"])({domain:i})).then(function(t){if(!t.ok)return e(L(false));e(B(i));return e(L(true))}).catch(function(e){N.info(A,"Failed to check if email domain can be whitelisted for signups.");return Promise.reject(e)})});var Te=Object(c["e"])("Fetch the team creation workflow for this user",function(e){return e(Object(E["a"])({onlyActive:false})).then(function(t){var r=t.user_workflows;var a=Object(l["find"])(r,function(e){return"account_setup"===e.type&&"team_creation"===e.subtype});a&&e(K(a));return Promise.resolve(a)}).catch(function(e){N.info(A,"Failed to fetch workflows list.");return Promise.reject(e)})});Te.propTypes=o["b"].object;var Ne=Object(c["e"])("Complete team creation workflow for this user",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.taskSubtype;var n=he(t());if(!n||!n.tasks.length)return Promise.reject(new Error("No workflow or tasks found for this user."));var i=Object(l["find"])(n.tasks,function(e){return"account_setup"===e.type&&e.subtype===a});if(!i)return Promise.reject(new Error("Could not find task of subtype "+a+"."));e(V(true));return e(Object(E["g"])({userTaskId:i.user_task_id})).then(function(t){if(t.ok&&"complete_team_creator_account_setup"===a){var r=s()({},n,{state:"completed"});e(K(r));Object(S["a"])()}return Promise.resolve(t)}).catch(function(e){N.info(A,"Failed to complete workflow task.");return Promise.reject(e)}).finally(function(){return e(V(false))})});Ne.propTypes={taskSubtype:o["b"].string.isRequired};var Ae=Object(c["e"])("Display the second team creation account setup banner for this user",function(e,t){var r=he(t());if(!r)return Promise.resolve();var a=Object(l["find"])(r.tasks,function(e){return"account_setup"===e.type&&"start_team_creator_account_setup"===e.subtype});if(!a)return Promise.reject(new Error("Could not find initial account setup task."));var n=[s()({},a,{state:"completed"}),s()({},r.tasks[1])];var i=s()({},r,{tasks:n});return e(K(i))});Ne.propTypes=o["b"].object},,,function(e,t,r){"use strict";r.r(t);r.d(t,"toggleFolderCollapse",function(){return _});r.d(t,"setFolderCollapse",function(){return y});r.d(t,"setIsRenaming",function(){return k});r.d(t,"renameFolder",function(){return O});r.d(t,"createFolder",function(){return E});r.d(t,"setFolderData",function(){return w});r.d(t,"dragFolderOrChannel",function(){return C});r.d(t,"initializeFolderData",function(){return S});r.d(t,"saveFolderData",function(){return j});r.d(t,"getFolders",function(){return N});r.d(t,"getFolderByName",function(){return A});var a=r(9);var n=r.n(a);var i=r(24);var s=r.n(i);var o=r(3);var l=r.n(o);var c=r(2);var u=r.n(c);var d=r(129);var p=r(4);var m=r(21);var h=r(240);var f;var v=false;var b="folder_data";var g={list:[],currentlyRenamingFolder:null};var _=Object(p["a"])("Toggle between collapse and showing channels");_.propTypes={name:d["b"].string.isRequired};var y=Object(p["a"])("Set collapsed state for all folders");y.propTypes={isCollapsed:d["b"].bool.isRequired};var k=Object(p["a"])("Set a folder's renaming state to true");k.propTypes={name:d["b"].string.isRequired};var O=Object(p["a"])("Rename a folder");O.propTypes={oldName:d["b"].string.isRequired,newName:d["b"].string.isRequired};var E=Object(p["a"])("Create a new folder");E.propTypes=null;var w=Object(p["a"])("Set all folder data (from storage)");w.propTypes=d["b"].array.isRequired;var C=Object(p["a"])("Drag a folder or channel onto a folder or channel");C.propTypes={src:d["b"].object.isRequired,dest:d["b"].object};var S=Object(p["e"])("Set Folder Data From LocalStorage",function(e,t){var r=Object(m["getUserPref"])(t(),b);if(!r){v=true;r=localStorage.getItem(b)}var a=void 0;try{a=JSON.parse(r)}catch(e){a=null}a&&0!==a.length||(a=g.list);e(w(a))});S.propTypes=null;var j=Object(p["e"])("Set Folder Data From LocalStorage",function(e,t){var r=t().channelSidebarFolders.list;var a=JSON.stringify(r);v?localStorage.setItem(b,a):e(Object(h["c"])({pref:b,value:a}))});j.propTypes=null;var I=function e(t,r){var a=true;var n=1;var i=void 0;var s=function e(t){return t.name===i};while(a){i=1===n?r:r+" ("+n+")";a=t.list.find(s);n+=1}return i};var T=Object(p["c"])((f={},n()(f,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return l()({},e,{list:t})}),n()(f,_,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name;return l()({},e,{list:e.list.map(function(e){return e.name===r?l()({},e,{isCollapsed:!e.isCollapsed}):e}),currentlyRenamingFolder:null})}),n()(f,y,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isCollapsed;return l()({},e,{list:e.list.map(function(e){return l()({},e,{isCollapsed:r})}),currentlyRenamingFolder:null})}),n()(f,O,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.oldName,a=t.newName;return l()({},e,{list:a?e.list.map(function(t){return t.name===r&&r!==a?l()({},t,{name:I(e,a)}):t}):e.list.filter(function(e){return e.name!==r}),currentlyRenamingFolder:null})}),n()(f,k,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name;return l()({},e,{currentlyRenamingFolder:r})}),n()(f,E,function(e){return l()({},e,{currentlyRenamingFolder:I(e,"New Collection"),list:[{name:I(e,"New Collection"),isCollapsed:true,channelIds:[]}].concat(s()(e.list))})}),n()(f,C,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.src,a=t.dest;if("channel"===r.type){if(a&&"channel"===a.type&&r.id===a.id)return e;var n=u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,r.id)});var i=-1===n?-1:e.list[n].channelIds.indexOf(r.id);var o=-1;var c=-1;if(a&&"folder"===a.type){o=u.a.findIndex(e.list,{name:a.id});c=0}else if(a&&"channel"===a.type){o=u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,a.id)});c=-1===o?-1:e.list[o].channelIds.indexOf(a.id)}if(n===o&&i===c)return e;var d=l()({},e,{list:e.list.map(function(e){return l()({},e,{channelIds:e.channelIds.filter(function(e){return e!==r.id})})})});if(-1===o)return d;return l()({},d,{list:d.list.map(function(e,t){return t!==o?e:l()({},e,{isCollapsed:0!==e.channelIds.length&&e.isCollapsed,channelIds:[].concat(s()(e.channelIds.slice(0,c)),[r.id],s()(e.channelIds.slice(c)))})})})}if("folder"===r.type&&a){var p=void 0;p="folder"===a.type?u.a.findIndex(e.list,{name:a.id}):u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,a.id)});if(-1===p)return e;var m=u.a.findIndex(e.list,{name:r.id});if(m===p)return e;var h=l()({},e,{list:[].concat(s()(e.list.slice(0,m)),s()(e.list.slice(m+1)))});h.list=[].concat(s()(h.list.slice(0,p)),[e.list[m]],s()(h.list.slice(p)));return h}return e}),f),g);T.propTypes={list:d["b"].arrayOf(d["b"].shape({name:d["b"].string.isRequired,isCollapsed:d["b"].bool.isRequired,channelIds:d["b"].arrayOf(d["b"].string).isRequired})),currentlyRenamingFolder:d["b"].string};t["default"]=T;var N=Object(p["d"])(function(e){return e&&e.channelSidebarFolders&&e.channelSidebarFolders.list});var A=Object(p["d"])(function(e,t){return e&&e.channelSidebarFolders&&l()({},u.a.find(e.channelSidebarFolders.list,{name:t}),{isRenaming:e.channelSidebarFolders.currentlyRenamingFolder===t})})},,,,,function(e,t,r){var a,n,i;false;e.exports=r(1896)()},,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=r(314);var u=r(164);var d=Object(l["e"])("Clog a query session event using data from redux",function(e,t){var r=e(A());var a=e(N());var n=Object(u["a"])({state:t()});n.track("SEARCH_QUERY_SESSION",{search_session_id:r,client_request_id:a})});d.propTypes=null;var p=d;r.d(t,"SEARCH_SESSION_TIMEOUT_MS",function(){return h});r.d(t,"endQuerySession",function(){return g});r.d(t,"startQuerySession",function(){return _});r.d(t,"endSearchSession",function(){return O});r.d(t,"startSearchSession",function(){return E});r.d(t,"getQuerySessionId",function(){return N});r.d(t,"getSearchSessionId",function(){return A});var m;var h=3e5;var f=Object(l["a"])("Set the timestamp for the query session the current time");f.propTypes={};var v=Object(l["a"])("Sets a new ID for the query session");v.propTypes={querySessionId:o["b"].string.isRequired};var b=Object(l["a"])("Destroy a query session ID by emptying it");b.propTypes={};var g=Object(l["e"])("Sets a new ID for the query session",function(e){e(b())});g.propTypes={};var _=Object(l["e"])("Sets a new ID for the query session",function(e){var t=Object(c["a"])();e(v({querySessionId:t}));e(f());e(p());return t});_.propTypes={};var y=Object(l["a"])("Sets a new ID for the search session");y.propTypes={searchSessionId:o["b"].string.isRequired};var k=Object(l["a"])("Destroy a search session ID by emptying it");k.propTypes={};var O=Object(l["e"])("Sets a new ID for the search and query sessions",function(e){e(g());e(k())});g.propTypes={};var E=Object(l["e"])("Sets a new ID for the search session",function(e){var t=Object(c["a"])();e(y({searchSessionId:t}));e(_());return t});E.propTypes={};var w={lastEventTimeMs:void 0,querySessionId:void 0,searchSessionId:void 0};var C=Object(l["c"])((m={},n()(m,f,function(e){return s()({},e,{lastEventTimeMs:(new Date).getTime()})}),n()(m,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.querySessionId;return s()({},e,{querySessionId:r})}),n()(m,b,function(e){return s()({},e,{querySessionId:void 0})}),n()(m,y,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.searchSessionId;return s()({},e,{searchSessionId:r})}),n()(m,k,function(e){return s()({},e,{searchSessionId:void 0})}),m),w);C.propTypes={lastEventTimeMs:o["b"].number,querySessionId:o["b"].string,searchSessionId:o["b"].string};var S=t["default"]=C;var j=Object(l["d"])(function(e){return e&&e.searchSession&&e.searchSession.lastEventTimeMs});var I=Object(l["d"])(function(e){return e&&e.searchSession&&e.searchSession.querySessionId});var T=Object(l["d"])(function(e){return e&&e.searchSession&&e.searchSession.searchSessionId});var N=Object(l["e"])("Get a Query Session ID",function(e,t){var r=t();var a=j(r);var n=I(r);if(!n||!a||(new Date).getTime()-a>h)return e(_());e(f());return n});N.propTypes={};var A=Object(l["e"])("Get a Search Session ID",function(e,t){var r=t();var a=j(r);var n=T(r);if(!n||!a||(new Date).getTime()-a>h)return e(E());e(f());return n});A.propTypes={}},function(e,t,r){"use strict";r.d(t,"a",function(){return c});var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(2);var l=r.n(o);var c=function(){function e(t,r){n()(this,e);this.call=t;this.timeoutMs=r;this.updateDate=void 0;this.cachedData=void 0;this.pendingPromise=void 0;this.pendingPromiseRequestDate=void 0}s()(e,[{key:"get",value:function e(){if(this._isStaleOrUndefined())return this._callCacheGet();return Promise.resolve(this.cachedData)}},{key:"getStaleWhileRevalidate",value:function e(t){if(this._isStaleOrUndefined()){this._callCacheGet();return Promise.resolve(void 0===this.cachedData?t:this.cachedData)}return Promise.resolve(this.cachedData)}},{key:"flushAll",value:function e(){this.updateDate=void 0;this.cachedData=void 0;this.pendingPromise&&this.pendingPromise.cancel();this.pendingPromise=void 0;this.pendingPromiseRequestDate=void 0}},{key:"onCacheData",value:function e(t){Object(o["noop"])()}},{key:"_isStaleOrUndefined",value:function e(){return void 0===this.updateDate||void 0===this.cachedData||new Date-this.updateDate>this.timeoutMs}},{key:"_callCacheGet",value:function e(){var t=this;if(this.pendingPromise){if(new Date-this.pendingPromiseRequestDate<3e4)return this.pendingPromise;this.pendingPromise.cancel();this.pendingPromiseRequestDate=void 0;this.pendingPromiseRequestDate=void 0}this.pendingPromiseRequestDate=new Date;this.pendingPromise=this.call.apply(this).then(function(e){t.cachedData=e;t.updateDate=new Date;t.pendingPromise=void 0;t.onCacheData(e);return t.cachedData});return this.pendingPromise}}]);return e}()},,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=r(2);var u=r(21);var d=r(240);var p=r(22);var m=r(25);var h=Object(p["a"])("Fetch the active message pane banner for this team/user, if any",function(e){return e(Object(m["a"])({method:"promo.banner"})).then(function(e){if(!e.message_pane)return{};return{name:e.message_pane.name,data:e.message_pane.data||{}}})});r.d(t,"BANNERS_PREFS",function(){return v});r.d(t,"setMessagePaneBanner",function(){return b});r.d(t,"closeMessagePaneBanner",function(){return g});r.d(t,"getMessagePaneBannerName",function(){return O});r.d(t,"getMessagePaneBannerData",function(){return E});r.d(t,"loadBanner",function(){return w});r.d(t,"closeBanner",function(){return C});var f;var v="growth_all_banners_prefs";var b=Object(l["a"])("Set message pane banner");b.propTypes={name:o["b"].string,data:o["b"].object};var g=Object(l["a"])("Close message pane banner");g.propTypes=null;var _={name:"",data:{}};var y=Object(l["c"])((f={},n()(f,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name,a=t.data;var n=s()({},e,{name:r,data:a});return n}),n()(f,g,function(){return _}),f),_);y.propTypes={name:o["b"].string,data:o["b"].object};var k=t["default"]=y;var O=Object(l["d"])(function(e){return e&&e.messagePaneBanner&&e.messagePaneBanner.name});var E=Object(l["d"])(function(e){return e&&e.messagePaneBanner&&e.messagePaneBanner.data});var w=Object(l["e"])("Load message pane banner info",function(e){e(h()).then(function(t){Object(c["isEmpty"])(t)||e(b(t))})});var C=Object(l["e"])("Close the message pane banner",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.bannerPrefs;if(!Object(c["isEmpty"])(a)){var n=Object(u["getUserPref"])(t(),v);n=n?JSON.parse(n):{};var i=n[a.countPref]||0;n[a.countPref]=i+1;n[a.tsPref]=Math.round(Date.now()/1e3);var s=JSON.stringify(n);e(Object(d["c"])({pref:v,value:s}))}e(g())});C.propTypes={bannerPrefs:o["b"].object}},,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(14);var f=r(15);var v=r.n(f);var b=r(2);var g=r.n(b);var _=r(150);var y=r(121);var k=r(18);var O=r(10);var E=r(2202);var w=r.n(E);var C=new O["b"]("flexpane");var S=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.children,a=t.className;return p.a.createElement("div",{className:v()("p-flexpane_header",a)},p.a.createElement("div",{className:"p-flexpane_header__children"},r),p.a.createElement(y["a"],{title:C.t("Close Right Sidebar"),ariaLabel:C.t("Close Right Sidebar"),className:"p-flexpane_header__close",onClick:this.props.closeFlexpane,"data-qa":"close_flexpane"},p.a.createElement(k["b"],{type:"times"})))}}]);return t}(d["PureComponent"]);S.displayName="FlexpaneHeader";S.defaultProps={children:null,className:void 0,closeFlexpane:b["noop"]};t["a"]=Object(h["connect"])(null,{closeFlexpane:_["a"]})(S)},,,function(e,t,r){"use strict";var a=r(9);var n=r.n(a);var i=r(2);var s=r(10);var o={EMPTY:"empty",INVALID:"invalid",INVALID_DOMAIN:"invalid_domain",TOO_MANY:"too_many"};var l={EMAIL:new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i"),DOMAIN:new RegExp("^@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i")};var c=new s["b"]("email_utility");function u(e,t){var r=d(e);return p(r,t)}function d(e){return e.replace(/\s|\n/g,"").replace(/,$/g,"").split(",")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r=0;var a=e.length;var n=void 0;var i=void 0;var s=void 0;if(!Array.isArray(e))return{isValid:false,emailArray:e,errorKey:o.INVALID,errorMessage:m(o.INVALID)};if(t&&a>t){i=o.TOO_MANY;s=t>1?h(t):m(o.INVALID);return{isValid:false,emailArray:e,errorKey:i,errorMessage:s}}for(r;r<a;r+=1){n=e[r];r||""!==n?l.EMAIL.test(n)||(i=o.INVALID):i=o.EMPTY;if(i)return{isValid:false,emailArray:e,errorKey:i,errorMessage:m(i)}}return{isValid:true,emailArray:e,errorKey:"",errorMessage:""}}function m(e){var t=void 0;switch(e){case o.EMPTY:t=c.t("Please fill in your email.");break;case o.INVALID:t=c.t("Sorry, but that email is invalid.");break;case o.INVALID_DOMAIN:t=c.t("Sorry, but that isn\u2019t a valid email domain.");break;default:break}return t}function h(e){return c.t("Please make your list shorter \u2014 we can check up to {max_addresses} addresses at a time.",{max_addresses:e})}var f=r(236);r.d(t,"a",function(){return b});r.d(t,"d",function(){return g});r.d(t,"e",function(){return _});r.d(t,"b",function(){return O});r.d(t,"c",function(){return E});var v=new s["b"]("checkout_v2");var b={MINIMUM_BAU_COUNT_ALLOWED:3};function g(e,t,r,a){var n=S(t,r,a);if(Object(i["isEmpty"])(n))return{};var s={};var o=e.numberOfUsers,l=e.additionalBillingContacts,c=e.purchaseOrderNumber;var u=y(c,n);u&&(s.purchaseOrderNumber=u);var d=k(o,t,r,n);d&&(s.numberOfUsers=d);var p=w(l,n);p&&(s.additionalBillingContacts=p);return s}function _(e,t,r,a,n){var s=null;var o=S(r,a,n);if(Object(i["isEmpty"])(o))return s;var l=e.numberOfUsers,c=e.additionalBillingContacts,u=e.purchaseOrderNumber;switch(t){case f["a"].PURCHASE_ORDER_NUMBER:s=y(u,o);break;case f["a"].NUMBER_OF_USERS:s=k(l,r,a,o);break;case f["a"].ADDITIONAL_BILLING_CONTACTS:s=w(c,o);break;default:}return s}function y(e,t){var r=null;e&&!f["b"].NUMERIC_WITH_MIN_MAX_LENGTH_REGEX.test(e)&&(r=C(f["c"].PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS,t));return r}function k(e,t,r,a){var n=null;e?f["b"].NUMERIC_REGEX.test(e)?e<t?n=C(f["c"].NUMBER_OF_USERS_INVALID_MIN_ALLOWED,a):e>r&&(n=C(f["c"].NUMBER_OF_USERS_INVALID_MAX_ALLOWED,a)):n=C(f["c"].NUMBER_OF_USERS_INVALID_CHARACTERS,a):n=C(f["c"].NUMBER_OF_USERS_IS_REQUIRED,a);return n}function O(e){var t=e.contacts,r=e.delimiter,a=void 0===r?",":r;if(!t)return"";return t.replace(/(?:,|\s|\n)+/g,a)}function E(e){var t=d(e);var r=t.map(function(e){return{email:e}});return JSON.stringify(r)}function w(e,t){var r=null;if(!e)return r;var a=O({contacts:e,delimiter:","});var n=u(a);var i=n.errorKey;if(i){r=C(i,t);r.errorText||(r.errorText=n.errorMessage)}return r}function C(e,t){return t[e]||{}}function S(e,t){var r;var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!a)return{};return r={},n()(r,f["c"].PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS,{errorText:v.t("Please enter a valid number between 1 and 20 digits long.")}),n()(r,f["c"].NUMBER_OF_USERS_IS_REQUIRED,{errorText:v.t("You\u2019ll need to include the numbers of members.")}),n()(r,f["c"].NUMBER_OF_USERS_INVALID_CHARACTERS,{errorText:v.t("Please enter a valid number.")}),n()(r,f["c"].NUMBER_OF_USERS_INVALID_MIN_ALLOWED,{errorText:v.t("To pay by invoice, you\u2019ll need at least {minInvoiceSeats} members.",{minInvoiceSeats:e})}),n()(r,f["c"].NUMBER_OF_USERS_INVALID_MAX_ALLOWED,{errorText:v.t("You can only pay by invoice for {maxInvoiceSeats} or fewer members.",{maxInvoiceSeats:t})}),r}var j={validatePurchaseOrderNumber:y,validateNumberOfUsers:k,validateAdditionalBillingContacts:w,getInvoiceDataErrorMetadata:C}},,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"setJumperCoachmarkState",function(){return c});r.d(t,"getJumperCoachmarkState",function(){return p});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=Object(l["a"])("Set the jumper button coachmark state");c.propTypes=o["b"].oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]);var u={selectedItemId:void 0};var d=Object(l["c"])(n()({},c,function(e,t){return s()({},e,{jumperCoachmark:t})}),u);d.propTypes={selectedItemId:o["b"].string,jumperCoachmark:c.propTypes};t["default"]=d;var p=Object(l["d"])(function(e){return e&&e.channelSidebar&&e.channelSidebar.jumperCoachmark})},,,,,,,function(e,t,r){"use strict";r.d(t,"c",function(){return E});r.d(t,"b",function(){return w});r.d(t,"a",function(){return C});var a=r(57);var n=r.n(a);var i=r(24);var s=r.n(i);var o=r(9);var l=r.n(o);var c=r(3);var u=r.n(c);var d=r(263);var p=r(90);var m=r(33);var h=r(23);var f=r(12);var v=r(160);var b=r(320);var g=r(47);var _=r(19);var y=r(885);var k=r(282);var O=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r,n){var i,s;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:i=[];t.replace(r,function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var s=n.apply(void 0,[e].concat(r));i.push(s)});o.next=4;return Object(a["resolve"])(Promise.all(i));case 4:s=o.sent;return o.abrupt("return",t.replace(r,function(){return s.shift()}));case 6:case"end":return o.stop()}},e,this)}));return function t(r,a,n){return e.apply(this,arguments)}}();function E(e,t){var r=Object(p["getEditableRequestQuery"])(e);var a=new RegExp("\\b("+g["e"].in+"|in):(#([^\\s]+))","g");var n=b["f"].fromString(e,r);var i={};n.suggestionTokenList.forEach(function(e){if(e instanceof k["e"]){var t=e.getRawIdAndNameForXwsChannelWorkaround(),r=t.id,a=t.name;if(r&&Object(v["a"])(r)&&a){i[a]||(i[a]=[]);i[a].push({id:r,name:a})}}});var s=t.replace(a,function(e,t,r,a){if(i[a]&&i[a].length>0){var n=i[a].shift(),s=n.id,o=n.name;return t+":<#"+s+"|"+o+">"}return e});return s}function w(e,t){var r=new RegExp("\\b("+g["e"].in+"|in):(#([^\\s]+))","g");var a=Object(p["getEditableRequestChannelObjects"])(e);var n=Object(p["getEditableRequestQueryFilterIn"])(e);var i={};n.forEach(function(t){var r=a[t];if(r){var n=Object(f["getDisplayNameForChannel"])(e,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});i[n]?i[n].push(r):i[n]=[r]}});return O(t,r,function(t,r,a,n){var o=void 0;o=i[n]&&i[n].length>0?i[n].shift():Object(_["getChannelByName"])(e,a)||Object(y["b"])(e,a);if(o){if(Object(f["isIm"])(o)){var c=Object(f["getMemberIdFromIm"])(o);return Promise.resolve(r+":<@"+c+">")}var v=Object(f["getDisplayNameForChannel"])(e,o,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});return Promise.resolve(r+":<#"+o.id+"|"+v+">")}return Object(d["a"])(a,{limit:150,channels:{include_archived:false},members:{include_self:true,include_org:true,include_slackbot:true,include_deleted:true},mpims:true,groups:true,enterprise_channels:true,sort:{frecency:false}}).then(function(t){var n=Object(h["getTeamId"])(e);var i=Object(m["c"])(n);var o=a&&a.replace("#","");var c=t.find(function(e){return e.name===o});if(!c)return r+":"+a;var d=Object(p["getEditableRequestChannelObjects"])(i)||{};Object(m["a"])(n,Object(p["setEditableRequestChannelObjects"])({channels:u()({},d,l()({},c.id,c))}));var v=Object(p["getEditableRequest"])(i).queryFilter;v.in=Array.from(new Set([].concat(s()(v.in),[c.id])));Object(m["a"])(n,Object(p["setEditableRequestQueryFilterOnly"])({queryFilter:v}));var b=Object(f["getDisplayNameForChannel"])(i,c,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});return r+":<#"+c.id+"|"+b+">"})})}function C(e,t){return t.replace(new RegExp("("+g["e"].in+"|in):(#[^\\s]+)","g"),function(t,r,a){var n=Object(_["getChannelByName"])(e,a);if(n){var i=Object(f["getDisplayNameForChannel"])(e,n,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});return r+":<#"+n.id+"|"+i+">"}return t})}},,,function(e,t,r){"use strict";var a=r(129);var n=r(4);var i=r(180);var s=r(37);var o=r(699);var l=r(90);var c=r(796);var u=r(164);var d=Object(n["e"])("Clog a search close event using data from redux",function(e,t){var r=t();var a=Object(u["a"])({state:r});a.track("SEARCH_CLOSE",{search_session_id:e(Object(o["getSearchSessionId"])()),client_request_id:e(Object(o["getQuerySessionId"])())})});d.propTypes=null;var p=d;var m=r(979);var h=r(17);var f="IMPROVED_SEARCH";var v=Object(n["e"])("Set whether or not Search is visible",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.visible;Object(h["a"])({getState:t}).info(f,a?"Open Search":"Close Search");var n=t();var u=Object(s["getVisible"])(n);e(Object(s["setInterfaceIsVisibleOnly"])({visible:a}));if(Object(i["getSearchInputBoxDisplayQuery"])(n)&&a&&Object(s["getSessionTimeoutId"])(n)){Object(h["a"])({getState:t}).info(f,"Search is opening and session is already active: Clearing timer");clearTimeout(Object(s["getSessionTimeoutId"])(n));e(Object(s["setSessionTimeoutId"])({sessionTimeoutId:null}))}else if(!Object(i["getSearchInputBoxDisplayQuery"])(n)&&a){Object(h["a"])({getState:t}).info(f,"Search is opening without query: Starting new search session");e(Object(o["startSearchSession"])())}else if(Object(i["getSearchInputBoxDisplayQuery"])(n)&&!a){Object(h["a"])({getState:t}).info(f,"Search closing with active query: Starting timeout to clear session");var d=setTimeout(function(){var r=t();if(!Object(s["getVisible"])(r)&&Object(s["getSessionTimeoutId"])(r)===d){e(Object(s["setSessionTimeoutId"])({sessionTimeoutId:null}));e(Object(o["endSearchSession"])());e(Object(l["resetEditableRequest"])());e(Object(i["setSearchInputBoxUserQuery"])({textyString:""}));e(Object(s["setDefaultTab"])());e(Object(s["setInterfaceMode"])({interfaceMode:s["interfaceModes"].EDIT}));e(Object(m["a"])())}},o["SEARCH_SESSION_TIMEOUT_MS"]);e(Object(s["setSessionTimeoutId"])({sessionTimeoutId:d}));u!==a&&e(p())}else if(!Object(i["getSearchInputBoxDisplayQuery"])(n)&&!a){Object(h["a"])({getState:t}).info(f,"Search is closing without query: Clear search session immediately");u!==a&&e(p());e(Object(o["endSearchSession"])())}a?u!==a&&e(Object(c["a"])({})):e(Object(s["setLastOpenMethod"])({lastOpenMethod:null}))});v.propTypes={visible:a["b"].bool.isRequired};var b=t["a"]=v},,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return h});var a=r(5);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(33);var u=r(280);var d=r(700);var p=function(e){l()(t,e);function t(e){n()(this,t);return s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return Object(c["a"])(e,Object(u["d"])({query:"",limit:10})).then(function(e){return e.suggestions})},3e5))}return t}(d["a"]);var m={};function h(e){m[e]||(m[e]=new p(e));return m[e]}},function(e,t,r){"use strict";r.d(t,"b",function(){return o});r.d(t,"a",function(){return l});var a=r(129);var n=r(22);var i=r(25);var s=r(17);var o=Object(n["a"])("Send a batch of invites",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.invites,n=r.channels,o=r.extraMessage,l=r.source,c=void 0===l?"invite_modal":l,u=r.mode,d=void 0===u?"manual":u;if(!a.length)return Promise.reject(new Error("missing_invites"));var p={invites:JSON.stringify(a),source:c,mode:d};n&&n.length&&(p.channels=JSON.stringify(n));o&&(p.extra_message=o);return e(Object(i["a"])({method:"users.admin.inviteBulk",args:p})).catch(function(e){Object(s["a"])({getState:t}).error("Failed to send invites.");throw e})});o.propTypes={invites:a["b"].array.isRequired,channels:a["b"].array,extraMessage:a["b"].string};var l=Object(n["a"])("Parse a string of concatenated emails",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.emails;var n={emails:a};return e(Object(i["a"])({method:"users.admin.parseEmails",args:n})).catch(function(e){Object(s["a"])({getState:t}).error("Failed to parse emails.");throw e})});l.propTypes={emails:a["b"].string.isRequired}},,,,function(e,t,r){"use strict";r.r(t);r.d(t,"setChannels",function(){return c});r.d(t,"getChannels",function(){return p});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=Object(l["a"])("Example action to store channels for channel discovery");c.propTypes={channels:o["b"].arrayOf(o["b"].object)};var u={channels:[]};var d=Object(l["c"])(n()({},c,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channels;return s()({},e,{channels:r})}),u);d.propTypes={channels:o["b"].arrayOf(o["b"].object)};t["default"]=d;var p=Object(l["d"])(function(e){return e&&e.searchChannelsUsers&&e.searchChannelsUsers.channels})},function(e,t,r){"use strict";r.r(t);r.d(t,"setFullyBooted",function(){return u});r.d(t,"isFullyBooted",function(){return m});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=r(63);var u=Object(l["a"])("Set the app as fully booted");u.propTypes=o["b"].bool.isRequired;var d={isFullyBooted:false};var p=Object(l["c"])(n()({},u,function(e,t){return s()({},e,{isFullyBooted:t})}),d);p.propTypes={isFullyBooted:o["b"].bool.isRequired};t["default"]=p;var m=Object(l["d"])(function(e){return Object(c["a"])()||e&&e.incrementalBoot&&e.incrementalBoot.isFullyBooted})},,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return de});r.d(t,"b",function(){return me});var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(15);var f=r.n(h);var v=r(35);var b=r.n(v);var g=r(14);var _=r(2);var y=r.n(_);var k=r(3344);var O=r(77);var E=r(26);var w=r(21);var C=r(11);var S=r(16);var j=r(359);var I=r(824);var T=r(20);var N=r(788);var A=r(472);var R=r(18);var M=r(103);var P=r(177);var x=r(65);var D=r(54);var F=r(479);var L=r(145);var B=r(3288);var U=r(889);var q=r(475);var G=r(240);var H=r(349);var W=r(430);var V=r(1004);var z=r(164);var Q=r(29);var K=r(41);var Y=r(121);var J=r(23);var Z=r(50);var X=r(48);var $=r(107);var ee=r(3460);var te=r(1094);var re=r(10);var ae=r(657);var ne=r(143);var ie=r(454);var se=r(27);var oe=r(3455);var le=r(1929);var ce=r.n(le);var ue=new re["b"]("current_status");var de={TEAM_MENU:"team_menu",TEAM_SITE:"team_site",VIEW_PROFILE:"view_profile"};var pe=[Q["d"].IN_A_MEETING,Q["d"].COMMUTING,Q["d"].OUT_SICK,Q["d"].VACATIONING,Q["d"].WORKING_REMOTELY];var me=100;var he=94;var fe={emojiMenuPosition:m["b"].oneOf(["top","bottom-left"]),inputType:m["b"].oneOf(Object.values(de)),initialText:m["b"].string,initialEmoji:m["b"].string,initialCanonical:m["b"].string,initialExpiration:m["b"].number,initialDuration:m["b"].oneOf(Object.keys(oe["a"])),updateCurrentMemberProfile:m["b"].func.isRequired,currentUserIsAdmin:m["b"].bool.isRequired,teamPresets:m["b"].arrayOf(m["b"].shape({text:m["b"].string,emoji:m["b"].string,duration:m["b"].string})).isRequired,teamName:m["b"].string.isRequired,teamUsesCustomizedPresets:m["b"].bool,time24:m["b"].bool,onSubmit:m["b"].func,onCancel:m["b"].func,onChange:m["b"].func,useDialog:m["b"].bool,featureCustomStatusExpiry:m["b"].bool,defaultEmoji:m["b"].string.isRequired,focusOnMount:m["b"].bool,isControlled:m["b"].bool,closeModal:m["b"].func,seenCustomStatusExpirationBadge:m["b"].bool,setUserPrefByApi:m["b"].func.isRequired,usedCustomStatusKBShortcut:m["b"].bool,openedFromKeyboardShortcut:m["b"].bool,clogger:m["b"].object.isRequired};var ve={emojiMenuPosition:"bottom-left",inputType:de.TEAM_MENU,initialText:"",initialEmoji:"",initialCanonical:"",initialExpiration:0,initialDuration:void 0,teamUsesCustomizedPresets:false,time24:false,onCancel:_["noop"],onSubmit:_["noop"],onChange:_["noop"],useDialog:false,featureCustomStatusExpiry:false,focusOnMount:false,isControlled:false,closeModal:_["noop"],seenCustomStatusExpirationBadge:false,usedCustomStatusKBShortcut:false,openedFromKeyboardShortcut:false};function be(e){if(!e)return p.a.createElement("div",{className:"p-custom_status_input__empty_emoji"},p.a.createElement(R["a"],{className:"p-custom_status_input__emoji_circle_icon",type:"circle-fill"}),p.a.createElement(R["a"],{className:"p-custom_status_input__emoji_smile_icon",type:"smile-o"}),p.a.createElement(R["a"],{className:"p-custom_status_input__emoji_happy_icon",type:"happy-smile"}));return p.a.createElement("div",{className:"p-custom_status_input__emoji"},p.a.createElement(L["b"],{text:e,stopAnimations:true,obeyEmojiMode:false,emojiSize:L["a"].MEDIUM}))}be.displayName="renderEmoji";var ge=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=b()().add(1,"hours");var i=e.initialDuration;if(e.useDialog){var s=e.initialExpiration&&e.initialExpiration%1800===0;if(s){a=b()(1e3*e.initialExpiration);i=oe["a"].custom}r.dialog=p.a.createRef()}r.datePicker=p.a.createRef();r.timePicker=p.a.createRef();var o=a.format("YYYY-MM-DD");var c=a.format("HH:mm");r.state={text:Object(ne["c"])(e.initialText,null,{for_edit:true}),emoji:e.initialEmoji,canonical:e.initialCanonical,customExpirationDate:o,customExpirationTime:Object.keys(I["a"]).find(function(e){return e>=c})||"00:00",duration:i,textyHasFocus:false,userDidSelectEmoji:!!e.initialEmoji,userDidSelectCustomDate:false,selectedPresetIndex:void 0};r.setTextyRef=r.setTextyRef.bind(r);r.onTextChange=r.onTextChange.bind(r);r.onCancel=r.onCancel.bind(r);r.onEmojiChange=r.onEmojiChange.bind(r);r.onEnter=r.onEnter.bind(r);r.onCustomExpirationDateChange=r.onCustomExpirationDateChange.bind(r);r.onCustomExpirationTimeChange=r.onCustomExpirationTimeChange.bind(r);r.onDurationChange=r.onDurationChange.bind(r);r.onSubmit=r.onSubmit.bind(r);r.onClickEmojiMenu=r.onClickEmojiMenu.bind(r);r.onClearIconClick=r.onClearIconClick.bind(r);r.onClearStatusButtonClick=r.onClearStatusButtonClick.bind(r);r.onTextyBlur=r.onTextyBlur.bind(r);r.onTextyFocus=r.onTextyFocus.bind(r);r.setFocusOnTextInput=r.setFocusOnTextInput.bind(r);r.textyModules={tabcomplete:{positionMenu:function e(t){t.style.width=r.texty.container.offsetWidth+"px";t.style.minWidth=r.texty.container.offsetWidth+"px";Object(ae["a"])(t,r.texty.container)},completers:["channels","emoji","members"]},keyboard:{useFormattingCommands:false}};return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.props.useDialog;if(r&&this.dialog){this.keyCommands=new P["a"](this.dialog.node);this.keyCommands.bindAll([{keys:["command+shift+y"],handler:function e(r){r.preventDefault();t.hasUnsavedChanges()&&t.hasInput()?t.onCancel():t.props.closeModal()}},{keys:["down"],handler:function e(){return t.handleDownArrow()}},{keys:["up"],handler:function e(){return t.handleUpArrow()}}])}}},{key:"componentWillReceiveProps",value:function e(t){var r=this.props,a=r.isControlled,n=r.initialEmoji,i=r.initialText,s=r.initialCanonical,o=r.initialDuration;var l=t.initialEmoji,c=t.initialText,u=t.initialDuration,d=t.initialCanonical;if(n===l&&i===c&&o===u&&s===d)return;if(!a&&this.hasUnsavedChanges())return;var p=Object(ne["c"])(c,null,{for_edit:true});this.texty.value(p);this.setState(function(){return{emoji:l,text:p,duration:u,canonical:d}})}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onCancel",value:function e(){var t=this.props,r=t.inputType,a=t.initialEmoji,n=t.initialText,i=t.initialExpiration,s=t.initialCanonical,e=t.onCancel;if(r===de.TEAM_SITE)return;this.texty.value(n);this.setState(function(){return{text:n,emoji:a,canonical:s,duration:void 0}},function(){return e({emoji:a,text:n,expiration:i})})}},{key:"onEnter",value:function e(){var t=this.props.useDialog;var r=this.state.text;if(this.hasUnsavedChanges()&&r.length<=me){this.onSubmit();t&&this.props.closeModal()}}},{key:"onClearIconClick",value:function e(){var t=this.props.useDialog;this.clearStatus({andSubmit:!t})}},{key:"onClearStatusButtonClick",value:function e(){this.clearStatus({andSubmit:true})}},{key:"onClickEmojiMenu",value:function e(t){var r=this.props.emojiMenuPosition;var a="top"===r?-5:5;Object(ie["a"])({e:t,offset_y:a,position:r,callback:this.onEmojiChange,target_bounds:this.texty.container.getBoundingClientRect()})}},{key:"onPresetSelected",value:function e(t){var r=t.emoji,a=t.text,n=t.canonical,i=t.duration,s=void 0===i?oe["a"].all_day:i;var o=this.props.onChange;this.texty.value(a);this.setState(function(){return{emoji:r,text:a,canonical:n,duration:s,userDidSelectEmoji:true}},this.setFocusOnTextInput);o({emoji:r,text:a,canonical:n,duration:s})}},{key:"onTextChange",value:function e(){if(!this.texty)return;var t=this.props,r=t.defaultEmoji,a=t.onChange,n=t.teamPresets;var i=this.state,s=i.text,o=i.emoji,l=i.duration,c=i.userDidSelectEmoji;var u=this.texty.value();if(u===s)return;var d=Object(_["find"])(n,function(e){return u&&u===e.text})||{};var p=d.canonical||"";var m=o;c||(m=u?r:"");var h="undefined"!==typeof l||this.hasInput()?l:oe["a"].all_day;this.setState(function(){return{text:u,emoji:m,canonical:p,duration:h}});a({text:u,emoji:m,canonical:p,duration:h})}},{key:"onEmojiChange",value:function e(t){var r=this.props.onChange;var a=this.state.duration;var n="undefined"!==typeof a||this.hasInput()?a:oe["a"].all_day;this.setState(function(){return{emoji:t,duration:n,userDidSelectEmoji:true}},this.setFocusOnTextInput);r({emoji:t,duration:n})}},{key:"onDurationChange",value:function e(t,r,a){var n=this;var i=this.props.onChange;a&&a.persist&&a.persist();this.setState(function(){return{duration:t}},function(){t===oe["a"].custom&&n.datePicker.current&&n.datePicker.current.triggerPopover&&n.datePicker.current.triggerPopover(a)});i({duration:t})}},{key:"onCustomExpirationDateChange",value:function e(t){var r=this;var a=this.state.userDidSelectCustomDate;this.setState(function(){return{customExpirationDate:t,userDidSelectCustomDate:true}},function(){r.timePicker.current&&r.timePicker.current.toggleOpenState&&!a&&r.timePicker.current.toggleOpenState(true)})}},{key:"onCustomExpirationTimeChange",value:function e(t){this.setState(function(){return{customExpirationTime:t}})}},{key:"onSubmit",value:function e(){var t=this.state,r=t.text,a=t.canonical,n=t.emoji;var i=this.props,s=i.defaultEmoji,o=i.featureCustomStatusExpiry,l=i.inputType,e=i.onSubmit,c=i.seenCustomStatusExpirationBadge;if(l===de.TEAM_SITE)return false;if(!this.hasUnsavedChanges()||r.length>me)return false;var u={status_text:r,status_text_canonical:a,status_emoji:n,status_expiration:o?this.getExpiration():void 0};this.props.updateCurrentMemberProfile({profile:u});this.clogStatusChange();!c&&u.status_expiration&&this.props.setUserPrefByApi({pref:"seen_custom_status_expiration_badge",value:true});e({text:r,emoji:n||r&&s||void 0,expiration:o?this.getExpiration():void 0});return true}},{key:"onTextyBlur",value:function e(){this.setState(function(){return{textyHasFocus:false}})}},{key:"onTextyFocus",value:function e(){this.setState(function(){return{textyHasFocus:true}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setFocusOnTextInput",value:function e(){this.texty.setCursorAtEnd();this.resetSelectedPresetIndex()}},{key:"getCustomExpiration",value:function e(){var t=this.state,r=t.customExpirationDate,a=t.customExpirationTime;return Math.round(b()(r+" "+a).unix())}},{key:"getExpiration",value:function e(){var t=this.props.initialExpiration;var r=this.state.duration;if(!this.hasInput())return 0;if("undefined"===typeof oe["a"][r])return Math.round(t)||0;switch(oe["a"][r]){case oe["a"].no_expiration:return oe["a"].no_expiration;case oe["a"].all_day:return Math.round((new Date).setHours(23,59,59,0)/1e3);case oe["a"].week:return Math.floor(b()().day("Friday").endOf("day").valueOf()/1e3);case oe["a"].custom:return this.getCustomExpiration();default:return Math.round(Date.now()/1e3+oe["a"][r])}}},{key:"getDurationPickerOptions",value:function e(){var t=this;var r=this.props,a=r.inputType,n=r.useDialog;var i=n&&a!==de.TEAM_SITE?Object.keys(oe["a"]):Object.keys(oe["a"]).slice(0,-1);return i.map(function(e){return{value:e,label:t.renderDurationLabel(e)}})}},{key:"getCustomExpirationTimeOptions",value:function e(){var t=this;var r=this.state.customExpirationDate;var a=b()();var n=r===a.format("YYYY-MM-DD");var i=a.format("HH:mm");return Object.keys(I["a"]).filter(function(e){return!(n&&e<i)}).map(function(e){return{value:e,label:t.renderExpirationTimeLabel(e)}})}},{key:"setSelectedPresetIndex",value:function e(t){this.setState(function(){return{selectedPresetIndex:t}})}},{key:"getDurationText",value:function e(t,r){var a=this.props,n=a.initialExpiration,i=a.featureCustomStatusExpiry,s=a.time24;if(!t&&!!n&&r){var o=n===(new Date).setHours(23,59,59,0)/1e3;var l=o?ue.t("Today"):Object(j["a"])(n,"{status_expiration}",{do24hrTime:s});return l}var c={"30_minutes":i?ue.t("30 minutes"):"","1_hour":i?ue.t("1 hour"):"","4_hours":i?ue.t("4 hours"):"",all_day:i?ue.t("Today"):"",week:i?ue.t("This week"):"",custom:i?ue.t("Choose date and time"):""};var u=i?ue.t("Don\u2019t clear"):"";var d=c[t]||u;return d}},{key:"handleDownArrow",value:function e(){var t=this.props.teamPresets;var r=this.state,a=r.selectedPresetIndex,n=r.text,i=r.textyHasFocus;Object(_["isNumber"])(a)?a<t.length-1&&this.setSelectedPresetIndex(a+1):!n&&i&&this.setSelectedPresetIndex(0)}},{key:"handleUpArrow",value:function e(){var t=this.state.selectedPresetIndex;if(!Object(_["isNumber"])(t))return;0===t?this.setFocusOnTextInput():this.setSelectedPresetIndex(t-1)}},{key:"resetSelectedPresetIndex",value:function e(){this.setSelectedPresetIndex()}},{key:"clogStatusChange",value:function e(){var t=this.props,r=t.useDialog,a=t.teamPresets,n=t.teamUsesCustomizedPresets,i=t.clogger;var s=this.state,o=s.text,l=s.emoji,c=s.duration;if(!r)return;var u={custom_status_set_origin:Q["g"].DIALOG};if(!this.hasInput()){u.custom_status=Q["d"].UNKNOWN;i.track(Q["j"].CUSTOM_STATUS_CLEAR,u);return}var d=a.findIndex(function(e){return o===e.text&&l===e.emoji});u.custom_status=d>-1?n?Q["d"].ADMIN_PRESET:pe[d]:Q["d"].USER_DEFINED;u.custom_status_text=o;u.custom_status_emoji=l;u.custom_status_duration=Q["e"]["DURATION_"+(c||"no_expiration").toUpperCase()];i.track(Q["j"].CUSTOM_STATUS_SET,u)}},{key:"clearStatus",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.andSubmit;var n=this.props.onChange;var i="",s="",o="",l=void 0,c=false;this.texty.clear();this.setState(function(){return{text:i,emoji:s,canonical:o,duration:l,userDidSelectEmoji:c}},function(){a?t.onSubmit():t.setFocusOnTextInput()});n({emoji:s,text:i,canonical:o,duration:l})}},{key:"hasInput",value:function e(){var t=this.state,r=t.emoji,a=t.text;return!!(a||r)}},{key:"hasUnsavedChanges",value:function e(){var t=this.props,r=t.initialText,a=t.initialEmoji,n=t.initialExpiration;var i=this.state,s=i.emoji,o=i.text;return s!==a||o!==r||n!==this.getExpiration()&&this.hasInput()}},{key:"maybeRenderSaveButton",value:function e(){var t=this.props.inputType;var r=this.state.text;if(t===de.TEAM_SITE)return null;if(!this.hasUnsavedChanges())return null;var a=ue.t("Save");return p.a.createElement("div",{className:"align_right"},p.a.createElement(T["d"],{type:"primary",size:"small",onClick:this.onSubmit,disabled:r.length>me,"data-qa":"custom_status_input_submit_button"},a))}},{key:"maybeRenderNewBadge",value:function e(){var t=this.props,r=t.seenCustomStatusExpirationBadge,a=t.useDialog,n=t.featureCustomStatusExpiry;if(r||!a)return null;return p.a.createElement(U["a"],{className:"p-custom_status_input__new_badge"},n?ue.t("NEW"):"")}},{key:"maybeRenderDurationPicker",value:function e(){var t=this.props,r=t.inputType,a=t.useDialog,n=t.isControlled,i=t.featureCustomStatusExpiry;var s=this.state.duration;if(!i)return null;if(r!==de.TEAM_SITE&&!this.hasInput())return null;var o=r===de.TEAM_SITE?q["a"].default:q["a"].short;if(s===oe["a"].custom)return this.renderCustomExpirationPicker();var l=void 0;var c=void 0;if(i){l=ue.t("Set status expiration to: {duration}",{duration:this.getDurationText(s,!n)});c=ue.t("Set status expiration")}return p.a.createElement("div",{className:"display_flex align_items_center"},p.a.createElement("div",{className:"p-custom_status_input__duration_picker"},p.a.createElement(q["b"],{onChange:this.onDurationChange,options:this.getDurationPickerOptions(),placeholder:this.renderDurationLabel(s,!n),usePlaceholderOption:false,useFilteredInput:false,type:o,optionsListWidth:a?200:void 0,optionsListAriaLabel:c,className:"p-custom_status_input__duration_picker_select","data-qa":"custom_status_input_duration_picker","aria-label":l})),this.maybeRenderNewBadge())}},{key:"maybeRenderKBShortCutTip",value:function e(){var t=this.props,r=t.usedCustomStatusKBShortcut,a=t.openedFromKeyboardShortcut,n=t.featureCustomStatusExpiry;if(r||a)return null;var i=void 0;i=Object(se["isMac"])()?n?ue.t("\u2318"):"":n?ue.t("Ctrl"):"";var s=n?ue.rt("<strong>Tip:</strong> Open this faster with <strong>{commandKey} + Shift + Y</strong>",{commandKey:i}):"";return p.a.createElement(U["a"],{className:"p-custom_status_input__shortcut_pill"},s)}},{key:"renderCustomExpirationPicker",value:function e(){var t=this.props.featureCustomStatusExpiry;var r=this.state,a=r.customExpirationDate,n=r.customExpirationTime;var i=t?ue.rt("Clear on: {date}",{date:p.a.createElement("strong",null,b()(a).format("ddd, MMMM Do"))}):"";var s=void 0;var o=void 0;if(t){s=ue.t("Clear status at: {time}",{time:this.renderExpirationTimeLabel(n)});o=ue.t("Set status expiration time")}return p.a.createElement("div",{className:"p-custom_status_input__custom_expiration_picker"},p.a.createElement(A["d"],{position:"bottom",offsetY:-12,ref:this.datePicker,selectedDate:a,dateFormat:"YYYY-MM-DD",onDateChange:this.onCustomExpirationDateChange,disableDatesAfter:b()().add(1,"years").add(-1,"days").format("YYYY-MM-DD"),disableDatesBefore:b()().format("YYYY-MM-DD")},p.a.createElement(Y["a"],{className:"p-custom_status_input__custom_expiration_picker_date_picker_trigger","data-qa":"custom_status_input_custom_expiration_picker_date_select","data-qa-selected-date":a,ariaLabel:t?ue.t("Clear status on: {date}",{date:b()(a).format("MMMM Do")}):"",focused:true},i,p.a.createElement(R["a"],{type:"chevron-down",className:"p-custom_status_input__chevron_down"}))),p.a.createElement("div",{className:"margin_left_50"},p.a.createElement(q["b"],{onChange:this.onCustomExpirationTimeChange,options:this.getCustomExpirationTimeOptions(),placeholder:t?p.a.createElement("span",null,ue.rt("At: <strong>{time}</strong>",{time:this.renderExpirationTimeLabel(n)})):"",ref:this.timePicker,usePlaceholderOption:false,useFilteredInput:false,type:q["a"].short,optionsListAriaLabel:o,optionsListWidth:100,className:"p-custom_status_input__custom_expiration_picker_time_select","data-qa":"custom_status_input_custom_expiration_picker_time_select","data-qa-selected-time":n,"aria-label":s})))}},{key:"renderActionButtons",value:function e(){var t=this.props,r=t.featureCustomStatusExpiry,a=t.inputType;var n=a===de.TEAM_SITE||this.hasUnsavedChanges()||r&&this.hasInput();var i=f()("p-custom_status_input__actions",{"p-custom_status_input__actions--invisible":!n,"p-custom_status_input__actions--with_expiry":r});return p.a.createElement("div",{className:i},this.maybeRenderDurationPicker(),this.maybeRenderSaveButton())}},{key:"renderPresets",value:function e(){var t=this.props,r=t.currentUserIsAdmin,a=t.inputType,n=t.teamPresets,i=t.teamUsesCustomizedPresets,s=t.useDialog;var o=this.state,l=o.textyHasFocus,c=o.emoji,u=o.text;if(a===de.TEAM_SITE||s&&(c||u))return null;var m=n.map(this.renderPresetOption,this);if(s)return p.a.createElement("div",{className:"p-custom_status_input__presets"},m);var h=i?ue.t("Suggested by your team"):ue.t("Suggested");var f=p.a.createElement(d["Fragment"],null,p.a.createElement("div",{className:"p-custom_status_input__presets_section_header"},h,r&&p.a.createElement("span",null," ","(",p.a.createElement(x["a"],{className:"p-custom_status_input__presets_edit_link",href:"/customize/statuses",target:"_blank"},ue.t("edit")),")")),m);if(a===de.TEAM_MENU)return p.a.createElement("div",{className:"p-custom_status_input__presets"},f);if(!this.hasUnsavedChanges()&&l)return p.a.createElement(D["f"],{menuClassNames:"p-custom_status_input__presets_menu",width:this.texty&&this.texty.container.offsetWidth,temporaryCustomStatusOverrideMakeMenuInaccessibleForKeyboard:true},f);return null}},{key:"renderClearIcon",value:function e(){var t=this.props,r=t.inputType,a=t.featureCustomStatusExpiry;var n=this.state,i=n.text,s=n.emoji;if(r===de.TEAM_SITE||!i&&!s)return null;var o=a?ue.t("Clear all"):ue.t("Clear status");var l=r===de.VIEW_PROFILE?"top-right":"top";var c=p.a.createElement(Y["a"],{className:"p-custom_status_input__clear_link","aria-label":o,"data-qa":"custom_status_clear_icon",onClick:this.onClearIconClick},p.a.createElement(R["a"],{type:"close-filled",className:"p-custom_status_input__clear_icon"}));return p.a.createElement("div",{className:"p-custom_status_input__status_clear_icon_wrap"},p.a.createElement(K["d"],{tip:o,position:l,zIndex:"above_fs"},c))}},{key:"renderStatusTextInput",value:function e(){var t=this;var r=this.props,a=r.inputType,n=r.focusOnMount;var i=this.state,s=i.text,o=i.textyHasFocus;var l="custom_status_input_for_"+a;var c=ue.t("What\u2019s your status?");if(!Object($["a"])())return p.a.createElement(N["a"],{currentCount:s.length,isFocused:o,maxCharacterLimit:me,counterMinimumCharacters:he,size:H["a"].medium},p.a.createElement(W["g"],{id:l,name:l,ref:this.setTextyRef,className:"p-custom_status_input__text_input small",ariaLabel:c,initialText:s,"data-validation":"maxlength=100","data-validation-for":l,"data-qa":"custom_status_input_text_input",modules:this.textyModules,onBlur:this.onTextyBlur,onEnter:this.onEnter,onEscape:this.onCancel,onFocus:this.onTextyFocus,onTextChange:this.onTextChange,placeholder:c,focusOnMount:n,isSingleLine:true,useLegacyCreate:true,enableBroadcastKeywords:false,legacyShouldCompleteOnTab:false}));return p.a.createElement(V["a"],{completeOnMembers:true,completeOnChannels:true,completeOnEmoji:true,position:"bottom",shouldCompleteOnTab:false,renderInput:function e(r){var a=r.modules,i=r.isOpen;return p.a.createElement(N["a"],{currentCount:s.length,isFocused:o,maxCharacterLimit:me,counterMinimumCharacters:he,size:H["a"].medium},p.a.createElement(W["g"],{id:l,name:l,ref:t.setTextyRef,className:"p-custom_status_input__text_input small",ariaLabel:c,initialText:s,"data-validation":"maxlength=100","data-validation-for":l,"data-qa":"custom_status_input_text_input",modules:a,isAutocompleteOpen:i,onBlur:t.onTextyBlur,onEnter:t.onEnter,onEscape:t.onCancel,onFocus:t.onTextyFocus,onTextChange:t.onTextChange,placeholder:c,focusOnMount:n,enableBroadcastKeywords:false,enableFormattingCommands:false,isSingleLine:true}))}})}},{key:"renderEmojiPicker",value:function e(){var t=this;var r=this.props,a=r.featureCustomStatusExpiry,n=r.emojiMenuPosition;var i=this.state.emoji;if(Object($["a"])()){var s="top"===n?-5:5;return p.a.createElement(B["a"],{onEmojiSelected:function e(r,a){return t.onEmojiChange(":"+a+":")},offsetY:s,position:n},p.a.createElement(Y["a"],{className:"p-custom_status_input__emoji_picker","aria-label":a?ue.t("Emoji menu"):"","data-qa":"custom_status_input_emoji_picker"},be(i)))}return p.a.createElement(Y["a"],{onClick:this.onClickEmojiMenu,className:"p-custom_status_input__emoji_picker","aria-label":a?ue.t("Emoji menu"):"","data-qa":"custom_status_input_emoji_picker"},be(i))}},{key:"renderDurationLabel",value:function e(t,r){var a=this.props.featureCustomStatusExpiry;var n=this.getDurationText(t,r);if(r)return a?p.a.createElement("span",null,ue.rt("Clear after: <strong>{label}</strong>",{label:n})):"";return n}},{key:"renderExpirationTimeLabel",value:function e(t){var r=this.props.time24;return r?t:I["a"][t]}},{key:"renderPresetOption",value:function e(t,r){var a=this;var n=this.props.featureCustomStatusExpiry;var i=this.state.selectedPresetIndex;var s=t.emoji,o=t.text,l=t.canonical,c=t.duration;if(n)return p.a.createElement(Y["a"],{className:"p-custom_status_input__preset_option","data-qa":"custom_status_input_preset_option",onClick:function e(){return a.onPresetSelected({emoji:s,text:o,canonical:l,duration:c})},key:r,onFocus:function e(){return a.setSelectedPresetIndex(r)},onBlur:function e(){return a.resetSelectedPresetIndex()},focused:r===i},p.a.createElement("div",{className:"p-custom_status_input__preset_option_emoji"},be(s)),p.a.createElement("div",{className:"p-custom_status_input__preset_option_text"},o),p.a.createElement("div",{className:"p-custom_status_input__preset_option_duration"},"\xa0\u2014 ",this.renderDurationLabel(c)));return p.a.createElement(F["a"],{key:r,icon:be(s),label:o,className:"p-custom_status_input__preset_option",onSelected:function e(){return a.onPresetSelected({emoji:s,text:o,canonical:l,duration:c})},"data-qa":"custom_status_input_preset_option",standaloneHoverEffect:true})}},{key:"render",value:function e(){var t=this.props,r=t.inputType,a=t.useDialog,n=t.initialEmoji,i=t.currentUserIsAdmin,s=t.featureCustomStatusExpiry,o=t.teamName;var l=this.state.text;var c=f()("p-custom_status_input","p-custom_status_input--for_"+r);if(a){var u=s?ue.t("Edit suggestions for {teamName}",{teamName:Object(re["n"])(o)}):"";var d=this.maybeRenderDurationPicker()||i&&p.a.createElement(x["a"],{className:"p-custom_status_input__presets_edit_link",href:"/customize/statuses",target:"_blank"},u)||null;var m=!this.hasUnsavedChanges()||l.length>me;var h=ue.t("Save");var v="primary";var b=this.onSubmit;var g=!!(n&&!this.hasUnsavedChanges());if(g){m=false;h=ue.t("Clear Status");v="outline";b=this.onClearStatusButtonClick}return p.a.createElement(M["a"],{className:"p-custom_status_input__dialog",goButtonIsDisabled:m,goButtonText:h,goButtonType:v,footerText:d,onGo:b,title:ue.t("Set a status"),ref:this.dialog,shouldCloseOnOverlayClick:true,showCancelButton:false,useSlackScrollbar:false,showTooltipOnCloseButton:true,"data-qa":"custom_status_input"},p.a.createElement("div",{className:"p-custom_status_input__input_wrap"},this.renderStatusTextInput(),this.renderEmojiPicker(),this.renderClearIcon()),this.renderPresets(),this.maybeRenderKBShortCutTip())}return p.a.createElement("div",{className:c},p.a.createElement("div",{className:"p-custom_status_input__input_wrap"},this.renderStatusTextInput(),this.renderEmojiPicker(),this.renderClearIcon()),this.renderActionButtons(),this.renderPresets())}}]);return t}(d["PureComponent"]);ge.displayName="BaseCustomStatusInput";ge.defaultProps=ve;function _e(e,t){var r=t.initialText,a=t.initialEmoji,n=t.initialDuration,i=t.initialCanonical;var s=Object(E["getCurrentMember"])(e);var o=Object(E["getMemberCustomStatus"])(e,s.id);var l=Object(_["isString"])(r)?r:o.text;if(l&&Object($["a"])()){var c=Object(ee["a"])(e,{text:l});l=Object(te["a"])(c)}return{initialText:l,initialEmoji:"undefined"!==typeof a?a:o.emoji,initialCanonical:"undefined"!==typeof i?i:o.canonical,initialExpiration:"undefined"!==typeof n?0:o.expiration,currentUserIsAdmin:Object(S["isAdmin"])(s),teamPresets:Object(w["getCustomStatusPresets"])(e),teamName:Object(X["getTeamDisplayName"])(Object(Z["getTeamById"])(e,Object(J["getTeamId"])(e))),teamUsesCustomizedPresets:Object(w["getTeamPref"])(e,"uses_customized_custom_status_presets"),time24:Object(w["getUserPref"])(e,"time24"),featureCustomStatusExpiry:Object(C["isFeatureEnabled"])(e,"feature_custom_status_expiry"),defaultEmoji:Object(w["getTeamPref"])(e,"custom_status_default_emoji"),seenCustomStatusExpirationBadge:Object(w["getUserPref"])(e,"seen_custom_status_expiration_badge"),usedCustomStatusKBShortcut:Object(w["getUserPref"])(e,"used_custom_status_kb_shortcut"),clogger:Object(z["a"])({state:e})}}var ye={closeModal:O["closeModal"],updateCurrentMemberProfile:k["a"],setUserPrefByApi:G["c"]};t["c"]=Object(g["connect"])(_e,ye)(ge)},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(13);var n=Object(a["c"])("TS.ui.prefs_dialog.start")},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(32);var s=r.n(i);var o=r(129);var l=r(1);var c=r.n(l);var u=r(76);var d=r(2);var p=r(103);var m=r(10);var h=new m["b"]("generic_dialog");var f={children:o["b"].any.isRequired,cancelButtonText:o["b"].string,"data-qa":o["b"].string,goButtonText:o["b"].string,goButtonType:o["b"].string,onCancel:o["b"].func,onClose:o["b"].func,onGo:o["b"].func,showCancelButton:o["b"].bool,title:o["b"].string,truncateTitle:o["b"].bool};var v={cancelButtonText:null,"data-qa":"alert_dialog",goButtonText:null,goButtonType:"primary",onCancel:d["noop"],onClose:d["noop"],onGo:d["noop"],showCancelButton:false,title:null,truncateTitle:true};function b(e){var t=e.children,r=e.cancelButtonText,a=e["data-qa"],i=e.goButtonText,o=s()(e,["children","cancelButtonText","data-qa","goButtonText"]);return c.a.createElement(p["a"],n()({cancelText:r||h.t("Cancel"),"data-qa":a,goButtonText:i||h.t("OK"),role:"alertdialog"},o),t)}b.displayName="AlertDialog";b.defaultProps=v;var g=Object(u["pure"])(b);r.d(t,false,function(){return});var _=t["a"]=g},,,function(e,t,r){"use strict";r.d(t,"d",function(){return n});r.d(t,"e",function(){return i});r.d(t,"c",function(){return s});r.d(t,"a",function(){return o});r.d(t,"b",function(){return l});r.d(t,"f",function(){return c});var a=r(13);var n=Object(a["c"])("TS.newxp.slackbot_response_sent_sig.dispatch");var i=Object(a["c"])("TS.newxp.slackbot_skip_or_stop_sig.dispatch");var s=Object(a["c"])("TS.newxp.slackbot_continue_sig.dispatch");var o=Object(a["c"])("TS.newxp.cancelOnboarding");var l=Object(a["c"])("TS.newxp.resumeOnboarding");var c=Object(a["c"])("TS.newxp.startOnboardingClick")},,,,,,,,function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});var a=r(13);var n=Object(a["c"])("TS.onboarding.inOnboarding");var i=Object(a["c"])("TS.onboarding.cancelOnboarding")},,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(37);var n=r(186);function i(e){var t=Object(a["getTab"])(e);var r={};if("messages"===t){var i=Object(n["b"])(e);r.click_module_name="messages";r.click_module_sort=i===n["a"].relevantMessages?"score":"timestamp"}else if("files"===t){r.click_module_name="files";r.click_module_sort="auto"}return r}},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(32);var s=r.n(i);var o=r(129);var l=r(4);var c=r(164);var u=r(37);var d=r(699);var p=Object(l["e"])("Clog a search open event using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.method,i=void 0===a?"":a,o=s()(r,["method"]);var l=t();var p=Object(u["getLastOpenMethod"])(l)||"search_box";var m=e(Object(d["getSearchSessionId"])());var h=e(Object(d["getQuerySessionId"])());var f=Object(c["a"])({state:l});f.track("SEARCH_OPEN",n()({open_method:i||p,search_session_id:m,client_request_id:h},o))});p.propTypes={method:o["b"].string};t["a"]=p},,function(e,t,r){"use strict";r.d(t,"a",function(){return p});r.d(t,"b",function(){return m});var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(3476);var d=function e(){return document.getElementById("search_popover_container")};var p=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d();if(!t)throw new Error("mountSearch must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(u["a"],null)),r)};var m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d();s.a.unmountComponentAtNode(t)};var h={mountSearch:p}},,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"addInviter",function(){return p});r.d(t,"removeInviter",function(){return m});r.d(t,"getInviter",function(){return f});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(2);var c=r.n(l);var u=r(4);var d;var p=Object(u["a"])("Add an inviter for a channel");p.propTypes={channelId:o["b"].string.isRequired,inviter:o["b"].string.isRequired};var m=Object(u["a"])("Remove an inviter for a channel");m.propTypes=o["b"].string.isRequired;var h=Object(u["c"])((d={},n()(d,p,function(e,t){var r=t.channelId,a=t.inviter;if(!r||!a)return e;return s()({},e,n()({},r,a))}),n()(d,m,function(e,t){if(!t||!e[t])return e;return c.a.omit(e,t)}),d),{});h.propTypes=o["b"].objectOf(o["b"].string);t["default"]=h;var f=Object(u["d"])(function(e,t){return e&&e.channelsMeta&&e.channelsMeta.inviters&&e.channelsMeta.inviters[t]})},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(129);var s=r(11);var o=r(26);var l=r(21);var c=r(50);var u=r(23);var d=r(12);var p=r(16);var m=r(36);var h=r(48);var f=r(457);var v=r(75);var b=r(27);var g=r(10);var _=r(873);var y=r(143);var k=r(662);var O=new g["b"]("growl");function E(e,t,r,a){var n=I(e,t,r._ignore_dnd);var i=T(e,t);var s=a.skip_formatting?r.content:Object(y["c"])(j(e,t,r),r,{for_growl:true});return{title:n,subtitle:i,content:s}}function w(e,t,r,a,n){var i={msg:S(r),channel:t.id||"",thread_ts:r&&r.thread_ts,ssbFilename:Object(k["a"])(n),launchUri:a.launch_uri||N(e,t,r),imageUri:a.image_uri||Object(m["getMessageAttachmentImage"])(e,r)};!i.ssbFilename&&Object(b["isSSBAndAtLeastVersion"])("3.0.0")&&(i.silent=true);if(Object(b["isSSBAndAtLeastVersion"])("3.3.0")){i.channelName=Object(d["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false})||"";i.authorName=r&&Object(p["getPrefCompliantMemberNameById"])(e,r.user);i.avatarImage=Object(o["getProfileImageForMember"])(e,r.user,192)||a.avatar_image}else i.avatarImage=a.avatar_image||Object(o["getProfileImageForMember"])(e,r.user);return i}function C(e,t){var r="tag_"+(t&&(t.id||t.ts)||Date.now());var a=Object(s["getFromBootData"])(e,"img");var n=a&&a.app_icon;return{icon:n,tag:r}}function S(e){return e&&(e.ts||e.msg)||""}function j(e,t,r){var a=Object(l["getUserPref"])(e,"no_text_in_notifications");var n=a?"":A(e,r);if(Object(d["isIm"])(t))return n;var i=Object(p["getPrefCompliantMemberNameById"])(e,r.user)||"";var s="";i&&(s+=a?O.t("a message from {name}",{name:i}):i+": ");s+=n;return s}function I(e,t,r){if(!t)return"";var a=Object(g["n"])(Object(d["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false}));if(Object(s["signedIntoOtherAccounts"])(e)&&v["isDesktop"]){var n=Object(c["getCurrentTeam"])(e);if(Object(b["isMac"])())return Object(h["getTeamDisplayName"])(n);if(Object(d["isIm"])(t))return r?O.t("{name} is trying to reach you",{name:a}):O.t("[{team_domain}] from {name}",{team_domain:n.domain,name:a});return O.t("[{team_domain}] in {channel}",{team_domain:n.domain,channel:a})}if(Object(d["isIm"])(t))return r?O.t("{name} is trying to reach you",{name:a}):O.t("New message from {name}",{name:a});return O.t("New message in {channel}",{channel:a})}function T(e,t){if(!t||!Object(b["isMac"])()||!v["isDesktop"]||!Object(s["signedIntoOtherAccounts"])(e))return"";return Object(d["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false})}function N(e,t,r){if(!t||!r||!r.ts)return null;return["slack://channel","?id="+t.id,"&message="+r.ts,"&team="+Object(u["getTeamId"])(e),r.thread_ts?"&thread_ts="+r.thread_ts:""].join("")}function A(e,t){if(!t)return"";var r=Object(m["shouldRenderFileThread"])(t,{featureFileThreads:Object(s["isFeatureEnabled"])(e,"feature_file_threads"),featureFileThreadsDarkLaunch:Object(s["isFeatureEnabled"])(e,"feature_file_threads_dark_launch")});var a=r&&t.files&&t.files.length?t.files[0]:t.file;var n=a&&r&&!t.text||Object(f["b"])(t.subtype);var i=void 0;i=n?Object(_["b"])(e,t,a):t.text?t.text:t.attachments&&t.attachments.length?R(t.attachments)||i:t.type+" "+t.subtype+" "+O.t("(message missing text)");return M(i)}function R(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(r.fallback)return r.fallback;if(r.text)return r.text;if(r.pretext)return r.pretext;if(r.footer)return r.footer}return null}function M(e){return e.replace(":simple_smile:",":)")}var P=r(17);var x=r(278);var D=r(150);var F=r(31);var L=r(816);var B=r(350);var U=r(147);r.d(t,"a",function(){return W});r.d(t,"c",function(){return V});r.d(t,"b",function(){return Q});var q={DEFAULT:5e3,LONG:1e4};var G=80;var H=Object(P["b"])();var W=Object(F["b"])("Switch primary or secondary view on notification click",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.messageTs,i=r.threadTs;var s=i&&i!==n;e(s?Object(D["g"])({channelId:a,threadTs:i,highlightTs:n}):Object(x["a"])({id:a}))});W.propTypes={channelId:i["b"].string.isRequired,messageTs:i["b"].string.isRequired,threadTs:i["b"].string};var V=Object(F["b"])("Show a desktop notification",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.message,i=r.modelObject,s=r.options;if(!a||!i||Object(d["isNonExistent"])(i)){H.warn("NOTIFICATIONS","Cannot show notification, missing arguments");return}if(!Object(B["b"])()){H.warn("NOTIFICATIONS","Cannot show notification, permission denied");return}if(Object(U["e"])()&&!s.is_call_notification){H.warn("NOTIFICATIONS","Cannot show notification while screen-sharing");return}var o=t();var l=s||{};K(o);Object(U["b"])().then(function(t){var r="new_message";if(t)r="none";else if(!Object(v["shouldAttachSoundToNotification"])()){Object(k["c"])("new_message");r="none"}if(v["isDesktop"])Object(v["notify"])(n()({},E(o,i,a,l),w(o,i,a,l,r)));else{var s=function t(){e(W({channelId:i.id,messageTs:S(a),threadTs:a.thread_ts}))};z(n()({},E(o,i,a,l),C(o,a)),s)}})});V.propTypes={modelObject:i["b"].object.isRequired,message:i["b"].object.isRequired,options:i["b"].object};function z(e,t){var r=e.title,a=e.content,n=e.icon,i=e.tag;if(!window.Notification){H.warn("NOTIFICATIONS","window.Notification is not supported");return}var s=new Notification(r,{body:a,icon:n,tag:i});var o=function e(){window.focus();t&&t();s.close()};var l=function e(){setTimeout(function(){return s.close()},a&&a.length>G?q.LONG:q.DEFAULT)};try{s.onclick=o;s.onshow=l}catch(e){H.error("NOTIFICATIONS","Unable to assign Notification event handlers",e);l()}}function Q(e,t){if(!B["a"]){t&&t(false,-1);return}var r=function r(){t&&t(Object(B["b"])(),Object(B["h"])());e(Object(L["setNotificationPermission"])(Object(B["h"])()))};window.webkitNotifications&&window.webkitNotifications.requestPermission&&window.webkitNotifications.checkPermission?window.webkitNotifications.requestPermission(r):window.Notification&&window.Notification.requestPermission(r)}function K(e){if(!v["isDesktop"])return;if(!Object(l["getUserPref"])(e,"mac_ssb_bounce"))return;"long"===Object(l["getUserPref"])(e,"mac_ssb_bounce")?Object(v["bounceIndefinitely"])():Object(v["bounceOnce"])()}},,,,,function(e,t,r){"use strict";var a=r(17);var n=r(27);function i(e){var t=e.error,r=e.description,a=e.subtype,i=e.teamId,s=e.version;var o=n["isDev"]?"https://dev.slack.com/beacon/error":"https://slack.com/beacon/error";var l=t;l instanceof Error&&(l.subtype=a);"string"===typeof l&&(l={message:l,subtype:a});l||(l={subtype:a});var c={description:r,version:s,error_json:JSON.stringify(l,Object.getOwnPropertyNames(l)),team:i};var u=new XMLHttpRequest;u.open("POST",o,true);u.setRequestHeader("Content-type","application/x-www-form-urlencoded");u.send(encodeURI(Object.keys(c).map(function(e){return e+"="+c[e]}).join("&")))}r.d(t,"a",function(){return s});r.d(t,"b",function(){return o});var s=function e(t){var r=t.error,n=t.description,s=t.subtype,o=t.teamId;Object(a["a"])({teamId:o}).error(s,n+" "+r);i({error:r,teamId:o,description:n,subtype:s+"_payment_api_error",version:"checkout_v2"})};var o=function e(t){var r=t.error,n=t.description,s=t.subtype,o=t.teamId;Object(a["a"])({teamId:o}).error(s,n+" "+r);i({error:r,teamId:o,description:n,subtype:s+"_payment_critical_user_facing_error",version:"checkout_v2"})}},,,function(e,t,r){"use strict";r.r(t);r.d(t,"setActiveAppTab",function(){return h});r.d(t,"setNewUnreads",function(){return f});r.d(t,"setReactionToast",function(){return v});r.d(t,"getActiveAppTab",function(){return g});r.d(t,"getNewUnreads",function(){return _});r.d(t,"getReactionToast",function(){return y});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c;var u=o["b"].oneOf(["messages","about"]);var d=o["b"].shape({emoji:o["b"].string,memberName:o["b"].string,channelName:o["b"].string});var p=o["b"].shape({activeAppTab:u,newUnreads:o["b"].number,toaster:d});var m={activeAppTab:"messages",newUnreads:0};var h=Object(l["a"])("Notifies modern of the active tab for app/bot users");h.propTypes=u;var f=Object(l["a"])("Set the number of new unread messages that came in while in the All Unreads view");f.propTypes=o["b"].number;var v=Object(l["a"])("Sets the currently active reaction toast; null or undefined to clear");v.propTypes=d;var b=Object(l["c"])((c={},n()(c,h,function(e,t){if(!t)return e;return s()({},e,{activeAppTab:t})}),n()(c,f,function(e,t){return s()({},e,{newUnreads:t})}),n()(c,v,function(e,t){return s()({},e,{toaster:t})}),c),m);b.propTypes=p;t["default"]=b;var g=Object(l["d"])(function(e){return e&&e.globalNav&&e.globalNav.activeAppTab});var _=Object(l["d"])(function(e){return e&&e.globalNav&&e.globalNav.newUnreads});var y=Object(l["d"])(function(e){return e&&e.globalNav&&e.globalNav.toaster})},function(e,t,r){"use strict";r.r(t);r.d(t,"setSupportsStickyPosition",function(){return u});r.d(t,"setNotificationPermission",function(){return d});r.d(t,"getSupportStickyPosition",function(){return h});r.d(t,"getNotificationPermission",function(){return f});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c;var u=Object(l["a"])("Update the supports_sticky_position");u.propTypes=o["b"].bool.isRequired;var d=Object(l["a"])("Update the notificationPermission");d.propTypes=o["b"].string.isRequired;var p={};var m=Object(l["c"])((c={},n()(c,u,function(e,t){return s()({},e,{supportsStickyPosition:t})}),n()(c,d,function(e,t){return s()({},e,{notificationPermission:t})}),c),p);m.propTypes={supportsStickyPosition:o["b"].bool,notificationPermission:o["b"].string};t["default"]=m;var h=Object(l["d"])(function(e){return e&&e.environment&&e.environment.supportsStickyPosition});var f=Object(l["d"])(function(e){return e&&e.environment&&e.environment.notificationPermission})},,,,,,,,function(e,t,r){"use strict";var a={"00:00":"12:00 AM","00:30":"12:30 AM","01:00":"1:00 AM","01:30":"1:30 AM","02:00":"2:00 AM","02:30":"2:30 AM","03:00":"3:00 AM","03:30":"3:30 AM","04:00":"4:00 AM","04:30":"4:30 AM","05:00":"5:00 AM","05:30":"5:30 AM","06:00":"6:00 AM","06:30":"6:30 AM","07:00":"7:00 AM","07:30":"7:30 AM","08:00":"8:00 AM","08:30":"8:30 AM","09:00":"9:00 AM","09:30":"9:30 AM","10:00":"10:00 AM","10:30":"10:30 AM","11:00":"11:00 AM","11:30":"11:30 AM","12:00":"12:00 PM","12:30":"12:30 PM","13:00":"1:00 PM","13:30":"1:30 PM","14:00":"2:00 PM","14:30":"2:30 PM","15:00":"3:00 PM","15:30":"3:30 PM","16:00":"4:00 PM","16:30":"4:30 PM","17:00":"5:00 PM","17:30":"5:30 PM","18:00":"6:00 PM","18:30":"6:30 PM","19:00":"7:00 PM","19:30":"7:30 PM","20:00":"8:00 PM","20:30":"8:30 PM","21:00":"9:00 PM","21:30":"9:30 PM","22:00":"10:00 PM","22:30":"10:30 PM","23:00":"11:00 PM","23:30":"11:30 PM"};t["a"]=a},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(2);var f=r.n(h);var v=r(15);var b=r.n(v);var g=r(76);var _=r(20);var y=r(18);var k=r(41);var O=r(1743);var E=r.n(O);var w={className:d["b"].string,iconType:d["b"].string,label:d["b"].node.isRequired,tooltipPosition:d["b"].string,onClick:d["b"].func,ariaHasPopup:d["b"].bool,"data-qa":d["b"].string};var C={className:"",onClick:f.a.noop,iconType:null,tooltipPosition:"top",ariaHasPopup:true,"data-qa":void 0};var S=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=b()("c-message_actions__button",this.props.className);return m.a.createElement(k["d"],{tip:this.props.label,position:this.props.tooltipPosition,delay:k["b"]},m.a.createElement(_["c"],{className:t,onClick:this.props.onClick,"aria-label":this.props.label,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"]},m.a.createElement(y["b"],{type:this.props.iconType})))}}]);return t}(p["PureComponent"]);S.displayName="MessageActionButton";S.defaultProps=C;t["a"]=Object(g["pure"])(S)},,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(2);var l=r(79);var c=r(129);var u=r(22);var d=r(25);var p=Object(u["a"])("Immediately calls eventlog.history",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e(Object(d["a"])({method:"ublockworkaround.history",args:r,EXPEDITED:true}))});p.propTypes=c["b"].object;var m=r(459);var h=r(102);var f=r(17);var v=r(368);var b=r(23);var g=r(33);var _=r(11);var y=r(218);var k=r(62);r.d(t,"a",function(){return I});r.d(t,"b",function(){return T});r.d(t,"c",function(){return D});r.d(t,"d",function(){return F});r.d(t,"e",function(){return L});var O=p;var E=h["a"];var w=m["b"];var C={};var S="EVENTLOG";var j=Object(y["a"])(1);function I(e){C[e]||(C[e]=new x(e))}function T(e){return C[e]}function N(e){switch(e.type){case"file_change":if(e.file&&e.file.id)return e.type+"_"+e.file.id;break;case"user_change":if(e.user&&e.user.id)return e.type+"_"+e.user.id;break;case"emoji_changed":if("add"===e.subtype&&Object(o["isString"])(e.name)&&Object(o["isString"])(e.value)){var t={name:e.name,value:e.value};return"emoji_changed_add_"+JSON.stringify(t)}if("remove"===e.subtype&&Object(o["isArray"])(e.names))return"emoji_changed_remove_"+JSON.stringify(e.names);return e.type;case"message.channel_history_changed":case"message.group_history_changed":case"message.mpim_history_changed":case"message.im_history_changed":if(Object(o["isString"])(e.channel))return e.type+"_"+e.channel;break;default:}return}function A(e,t){return Object(o["reduceRight"])(e,function(e,r){t(r)&&e.unshift(r);return e},[])}var R=["apps_changed","apps_installed","apps_uninstalled","channel_changed","channel_converted_to_shared","channel_created","channel_deleted","channel_rename","channel_shared_invite_accepted","channel_shared_invite_pending","channel_shared_invite_revoked","channel_unshared","channel_updated","file_change","file_comment_added","file_comment_deleted","file_comment_edited","file_created","file_deleted","file_public","file_shared","file_unshared","subteam_created","subteam_deleted","subteam_members_changed","subteam_self_added","subteam_self_removed","subteam_updated","team_icon_change","team_rename","thread_subscribed","thread_unsubscribed","manual_presence_change","workflow_assigned","commands_changed","app_conversation_invite_request","app_permission_request","app_permission_user_request","lesson_assigned","lesson_user_action","slackbot_response_sent","canvas_changed","canvas_mounted","shared_invite_code_created","shared_invite_code_disabled"];function M(e){return R.indexOf(e)>=0}function P(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r={};var a=A(e,function(e){if(t&&M(e.type))return false;var a=N(e);if(!a)return true;if(r[a])return false;r[a]=true;return true});return a}var x=function(){function e(t){n()(this,e);if(!t)throw new Error("Eventlog requires a teamId");this._teamId=t;var r=Object(g["c"])(this._teamId);this._logger=Object(f["a"])({teamId:this._teamId});this._lastAttemptWasCancelled=false;this._lastEventTimestamp=void 0;this._lastEventTimestampBeforeDisconnection=void 0;this._eventlogHistoryP=void 0;this._ignoreBlacklistedEvents=Object(_["isFeatureEnabled"])(r,"feature_eventlog_blacklist");Object(v["a"])(this)}s()(e,[{key:"_dispatchReduxAction",value:function e(t){return Object(g["a"])(this._teamId,t)}},{key:"_info",value:function e(t){this._logger.info(S,t)}},{key:"_warn",value:function e(t){this._logger.warn(S,t)}},{key:"_eventlogErrorHandler",value:function e(t){var r=t&&t.data?t.data.error:null;if("timestamp_too_old"===r){j&&Object(k["c"])("el_reload_too_old");w({reason:"eventlog.history timestamp_too_old"});return}this._warn("eventlog: encountered error");E(t,"eventlog");j&&Object(k["c"])("el_error")}},{key:"_eventlogOKHandler",value:function e(t){var r=this;if(t.has_more){j&&Object(k["c"])("el_reload_has_more");w({reason:"eventlog.history has_more"});return}j&&Object(k["c"])("el_ok");if(!t.events){this._warn("eventlog: history call did not include events");return}j&&Object(k["h"])("el_event_count",t.events.length);if(!t.events.length){this._info("nothing to process");return}t.events.forEach(function(e){e._from_evt_log=true});var a=P(t.events,this._ignoreBlacklistedEvents);this._info("processing "+a.length+" events out of a total set of "+t.events.length);a.forEach(function(e){r._dispatchReduxAction(Object(l["socketMessageReceived"])(e))});j&&Object(k["h"])("el_event_count_filtered",a.length);if(a.length>0){var n=a[a.length-1].event_ts;n&&n>(this._lastEventTimestamp||0)&&this.setLastEventTimestamp(n)}}},{key:"onSocketConnected",value:function e(t){var r=this;if(!this._lastEventTimestampBeforeDisconnection)return;this._info("fr="+t+", lc="+this._lastAttemptWasCancelled+", lt="+this._lastEventTimestampBeforeDisconnection);if(t&&!this._lastAttemptWasCancelled)return;this._info("fetching events since "+this._lastEventTimestampBeforeDisconnection+" ("+(Math.ceil(Date.now()/1e3)-this._lastEventTimestampBeforeDisconnection)+" seconds ago)");var a=this._dispatchReduxAction(O({start:this._lastEventTimestampBeforeDisconnection,count:2e3,no_payload_if_has_more:true,batch_deleted_files:true})).then(function(e){return r._eventlogOKHandler(e)}).catch(function(e){return r._eventlogErrorHandler(e)});a.finally(function(){r._eventlogHistoryP=void 0;r._info("fetched finish (cancelled? "+a.isCancelled()+")");r._lastAttemptWasCancelled=!!a.isCancelled();if(!a.isCancelled()){r._info("dispatching signal and clearing timestamp");r._lastEventTimestampBeforeDisconnection=void 0}});this._eventlogHistoryP=a}},{key:"onSocketDisconnected",value:function e(){this._lastEventTimestampBeforeDisconnection=this._lastEventTimestampBeforeDisconnection||this._lastEventTimestamp;if(this._eventlogHistoryP){this._info("socket was closed while we were fetching history; cancelling our request");this._eventlogHistoryP.cancel();this._eventlogHistoryP=void 0}}},{key:"setLastEventTimestamp",value:function e(t){this._lastEventTimestamp=t}}]);return e}();function D(e,t){var r=e();var a=Object(b["getTeamId"])(r);var n=C[a];if(!n)return;n.onSocketConnected(t)}function F(e){var t=e();var r=Object(b["getTeamId"])(t);var a=C[r];if(!a)return;a.onSocketDisconnected()}function L(e,t){var r=t.event_ts;if(!r)return;var a=e();var n=Object(b["getTeamId"])(a);var i=C[n];if(!i)return;i.setLastEventTimestamp(r)}var B={};Object.defineProperty(B,"filterEvents",{get:function e(){return P},set:function e(t){P=t}});Object.defineProperty(B,"fetchEventlogHistory",{get:function e(){return O},set:function e(t){O=t}});Object.defineProperty(B,"instances",{get:function e(){return C},set:function e(t){C=t}});Object.defineProperty(B,"logError",{get:function e(){return E},set:function e(t){E=t}});Object.defineProperty(B,"onSocketConnected",{get:function e(){return D},set:function e(t){D=t}});Object.defineProperty(B,"onSocketDisconnected",{get:function e(){return F},set:function e(t){F=t}});Object.defineProperty(B,"onSocketMessage",{get:function e(){return L},set:function e(t){L=t}});Object.defineProperty(B,"reload",{get:function e(){return w},set:function e(t){w=t}})},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(2);var l=r(444);var c=r(62);var u=r(13);var d=Object(u["c"])("TS.debug_widget.isVisible");var p=Object(u["c"])("TS.debug_widget.setFrameRate");r.d(t,"f",function(){return k});r.d(t,"h",function(){return O});r.d(t,"j",function(){return E});r.d(t,"d",function(){return w});r.d(t,"b",function(){return C});r.d(t,"c",function(){return S});r.d(t,"g",function(){return j});r.d(t,"i",function(){return I});r.d(t,"e",function(){return T});r.d(t,"a",function(){return N});var m=100;var h=1e3;var f=300;var v=1e3;var b=500;var g=60;var _=function(){function e(){n()(this,e);this.enabledForPRQMetrics=false;this.enabledForClientStats=false;this.resetCountersForClientStats();this.resetCountersForPRQMetrics();this.beachballsTotal=0;this.stuttersTotal=0;this.rafHandler=this.rafHandler.bind(this)}s()(e,[{key:"isEnabled",value:function e(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}},{key:"rafHandler",value:function e(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats();this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics();this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}},{key:"resetCountersForClientStats",value:function e(){this.beachballs=0;this.frameRates=[];this.stutters=0;this.lastRafHandlerTimeForClientStats=window.performance.now();this.fpsIndex=0;this.fpsStartTime=null}},{key:"rafHandlerForClientStats",value:function e(){if(!this.isEnabledForClientStats())return;var t=window.performance.now();var r=t-this.lastRafHandlerTimeForClientStats;this.lastRafHandlerTimeForClientStats=t;if(r>h){this.beachballs+=1;this.beachballsTotal+=1}else if(r>m){this.stutters+=1;this.stuttersTotal+=1}0===this.fpsIndex&&(this.fpsStartTime=t);this.fpsIndex+=1;if(this.fpsIndex===f){var a=(t-this.fpsStartTime)/1e3;var n=Math.floor(this.fpsIndex/a);this.fpsIndex=0;d()&&p(n);this.frameRates.push(n)}}},{key:"startClientStats",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForClientStats=true;this.resetCountersForClientStats()}},{key:"stopClientStats",value:function e(){this.enabledForClientStats=false}},{key:"storeClientStats",value:function e(){Object(c["c"])("stutters",this.stutters);Object(c["c"])("beachballs",this.beachballs);if(!Object(o["isEmpty"])(this.frameRates)){var t=Object(o["min"])(this.frameRates);var r=void 0;var a=this.frameRates.sort();var n=Math.floor(a.length/2);r=a.length%2===1?a[n]:(a[n-1]+a[n])/2;Object(c["h"])("fps_min",t);Object(c["h"])("fps_median",r)}this.stutters=void 0;this.beachballs=void 0;this.frameRates=void 0}},{key:"isEnabledForClientStats",value:function e(){return!!this.enabledForClientStats}},{key:"getTotalBeachballCount",value:function e(){return this.beachballsTotal}},{key:"getTotalStutterCount",value:function e(){return this.stuttersTotal}},{key:"resetCountersForPRQMetrics",value:function e(){this.histJankyWindows={};this.histFrameRenderTime={};this.durationMs=0;this.lastRafHandlerTimeForPRQMetrics=void 0;this.nextJankyWindowSampleIntervalNumber=1;this.framesInPreviousJankyWindowSample=0;this.framesInCurrentJankyWindowSample=0}},{key:"recordJankyWindows",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(r<1)return;var a=Math.max(g-t,0);this.histJankyWindows[a]=(this.histJankyWindows[a]||0)+r}},{key:"sampleJankyWindows",value:function e(){var t=Object(l["d"])(this.durationMs,9)>b*this.nextJankyWindowSampleIntervalNumber;var r=Math.floor(this.durationMs/b);var a=r-this.nextJankyWindowSampleIntervalNumber;if(t){if(this.durationMs>=v){this.recordJankyWindows(0,a-1);this.recordJankyWindows(this.framesInCurrentJankyWindowSample,a>0?1:0);this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)}this.nextJankyWindowSampleIntervalNumber=r+1;this.framesInPreviousJankyWindowSample=a>0?0:this.framesInCurrentJankyWindowSample;this.framesInCurrentJankyWindowSample=0}this.framesInCurrentJankyWindowSample+=1}},{key:"rafHandlerForPRQMetrics",value:function e(){if(!this.isEnabledForPRQMetrics())return;var t=window.performance.now();if("undefined"===typeof this.lastRafHandlerTimeForPRQMetrics){this.lastRafHandlerTimeForPRQMetrics=t;return}var r=t-this.lastRafHandlerTimeForPRQMetrics;var a=Object(l["d"])(Math.round(r,0),2);this.histFrameRenderTime[a]=(this.histFrameRenderTime[a]||0)+1;this.lastRafHandlerTimeForPRQMetrics=t;this.durationMs+=r;this.sampleJankyWindows()}},{key:"startPRQMetrics",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForPRQMetrics=true;this.resetCountersForPRQMetrics()}},{key:"stopPRQMetrics",value:function e(){this.enabledForPRQMetrics=false}},{key:"isEnabledForPRQMetrics",value:function e(){return!!this.enabledForPRQMetrics}},{key:"getPRQMetrics",value:function e(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}]);return e}();_.instance=null;function y(){null===_.instance&&(_.instance=new _);return _.instance}var k=y().startClientStats.bind(_.instance);var O=y().stopClientStats.bind(_.instance);var E=y().storeClientStats.bind(_.instance);var w=y().isEnabledForClientStats.bind(_.instance);var C=y().getTotalBeachballCount.bind(_.instance);var S=y().getTotalStutterCount.bind(_.instance);var j=y().startPRQMetrics.bind(_.instance);var I=y().stopPRQMetrics.bind(_.instance);var T=y().isEnabledForPRQMetrics.bind(_.instance);var N=y().getPRQMetrics.bind(_.instance)},,,,,,,,,,,,,,,function(e,t,r){"use strict";t.__esModule=true;t["default"]=s;function a(e){return e&&e.__esModule?e:{default:e}}var n=r(1850);var i=a(n);function s(e,t){return!(0,i["default"])(this.props,e)||!(0,i["default"])(this.state,t)}e.exports=t["default"]},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return c});var a=r(2);var n=r.n(a);var i=r(365);var s=r(696);var o=r(778);var l=r(779);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.highlightWords,a=t.shouldRenderEmojiAsText,c=t.emojiNames,u=t.useSonicEmoji,d=t.locale;var p=Object(i["b"])(e,{highlightWords:r,shouldRenderEmojiAsText:a,emojiNames:c,useSonicEmoji:u,locale:d});return n.a.reduce(p.contents,function(e,t){if(t.attributes&&t.attributes.slackmention){var r=t.attributes.slackmention.id;if(Object(s["a"])(r))return e+"@"+Object(l["a"])(r);if(Object(o["a"])(r))return""+e+t.attributes.slackmention.label;if("S"===r.charAt(0))return e+"<!subteam^"+r+"|"+t.attributes.slackmention.label+">";return e+"<@"+r+">"}if(t.insert&&t.insert.slackemoji)return e+t.insert.slackemoji;return e+t.insert},"")}},,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(1);var h=r.n(m);var f=r(129);var v=r(14);var b=r(2);var g=r(11);var _=r(16);var y=r(10);var k=r(177);var O=r(270);var E=r(174);var w=r(18);var C=r(32);var S=r.n(C);var j=r(24);var I=r.n(j);var T=r(15);var N=r.n(T);var A=r(946);var R=r(443);var M=r(266);var P=r(20);var x=r(947);var D=r(1300);var F={default:"default",short:"short"};var L=new y["b"]("form");var B={autoSelectFirstOption:f["b"].bool,className:f["b"].string,displayValue:f["b"].string,id:f["b"].string,isLoading:f["b"].bool,labelId:f["b"].string,membersOnly:f["b"].bool,name:f["b"].string,onChange:f["b"].func,onClearButtonClick:f["b"].func.isRequired,onClose:f["b"].func,onFilterInputChange:f["b"].func,onOptionHighlighted:f["b"].func,onOutsideClick:f["b"].func,onOpen:f["b"].func,onScroll:f["b"].func,optionClassName:f["b"].string,optionGroups:f["b"].array,options:f["b"].array,optionsListBottomOffset:f["b"].number,optionsListTopOffset:f["b"].number,optionsListWidth:f["b"].number,optionsRowHeight:f["b"].number,pillarClassName:f["b"].string,placeholder:f["b"].string,selectedOption:f["b"].object,selectedValueClassName:f["b"].string,type:f["b"].oneOf(Object(b["values"])(F)),useFullWidthOptions:f["b"].bool,usePlaceholderOption:f["b"].bool,wrapperClassName:f["b"].string,value:f["b"].string};var U={className:null,displayValue:void 0,id:"select-"+Object(M["c"])(),isLoading:false,labelId:null,membersOnly:true,name:null,onChange:b["noop"],onClose:b["noop"],onFilterInputChange:b["noop"],onOptionHighlighted:b["noop"],onOutsideClick:b["noop"],onOpen:b["noop"],optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:L.t("Choose an option\u2026"),selectedOption:void 0,selectedValueClassName:void 0,type:F.default,usePlaceholderOption:true,wrapperClassName:null,value:""};var q=function(e){p()(t,e);function t(e){s()(this,t);if(!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.preventFocusAndBlur=false;r.state={filterQuery:"",isOpen:false,selectedOptionValue:""};Object(b["bindAll"])(r,["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"]);return r}l()(t,[{key:"componentDidMount",value:function e(){this.initKeyCommands()}},{key:"componentWillReceiveProps",value:function e(){this.setState(function(e){return{isOpen:e.isOpen}})}},{key:"componentDidUpdate",value:function e(t,r){var a=this.props,n=a.onClose,i=a.onOpen,s=a.selectedOption;var o=this.state,l=o.isOpen,c=o.selectedOptionValue;if(s){var u=Object(E["h"])(s)?Object(_["getMemberRealName"])(s):Object(b["get"])(s,"name");u!==c&&this.setSelectedOptionValue(u)}else c&&this.setSelectedOptionValue("");if(this.state.isOpen){document.addEventListener("click",this.onOutsideClicked);if(!r.isOpen){this.filterInput&&this.filterInput.focus();i(this.filterInput)}}else{document.removeEventListener("click",this.onOutsideClicked);r.isOpen&&n()}this.filterInput&&l&&this.filterInput.focus()}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("click",this.onOutsideClicked);this.resetKeyCommads()}},{key:"onBlurred",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(false)}},{key:"onClicked",value:function e(t){var r=t.target===this.filterInput;r?this.toggleOpenState(true):this.toggleOpenState()}},{key:"onClearInput",value:function e(){var t=this.props.onClearButtonClick;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");this.toggleOpenState(false);t()}},{key:"onFilterInputChanged",value:function e(){if(this.filterInput){var t=this.filterInput.value;this.props.onFilterInputChange(t);this.setFilterQuery(t)}}},{key:"onFocused",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(true);var t=this.props.displayValue;t&&this.filterInput&&(this.filterInput.value=t)}},{key:"onKeyPressedEsc",value:function e(){if(this.state.isOpen){this.toggleOpenState(false);this.focus()}}},{key:"onKeyPressedUpOrDown",value:function e(t){if(!this.state.isOpen){this.toggleOpenState(true);t.stopPropagation()}}},{key:"onOptionSelected",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value;if(!r)return;var a=this.getSelectedOptionDisplayValue({value:r});this.setSelectedOptionValue(a);this.props.onChange(r);this.toggleOpenState(false);this.filterInput&&this.filterInput.blur()}},{key:"onOutsideClicked",value:function e(t){if(this.wrapper&&!this.wrapper.contains(t.target)){this.toggleOpenState(false);this.props.onOutsideClick()}}},{key:"onWrapperMouseDownOrTouchStart",value:function e(){this.preventFocusAndBlur=true}},{key:"onWrapperMouseUpOrTouchEnd",value:function e(){this.preventFocusAndBlur=false}},{key:"onSearchAgainTriggered",value:function e(){var t=this.props.onClearButtonClick;this.preventFocusAndBlur=true;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");t();this.filterInput.focus();this.toggleOpenState();this.preventFocusAndBlur=false}},{key:"maybeShowOptions",value:function e(){var t=this.props,r=t.selectedOption,a=t.membersOnly;var n=this.getFilterQuery();var i=a?this.getFilteredOptions:this.getFilteredOptionGroups;if(n.length>0||r)return i();return[]}},{key:"getFilteredOptionGroups",value:function e(){var t=this.props,r=t.optionGroups,a=t.usePlaceholderOption;var n=this.getFilterQuery();if(!r)return null;if(!n&&a)return[this.getPlaceholderOptionGroup()].concat(I()(r));return r}},{key:"getFilteredOptions",value:function e(){var t=this.props,r=t.options,a=t.usePlaceholderOption;var n=this.getFilterQuery();if(!r)return null;if(!n&&a)return[this.getPlaceholderOption()].concat(I()(r));return r}},{key:"getFilterQuery",value:function e(){return Object(b["get"])(this,"filterInput.value","")}},{key:"getOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();return t.length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}},{key:"getOptionsListTargetMeasurements",value:function e(){var t=this.props,r=t.optionsListOffsetBottom,a=t.optionsListOffsetTop,n=t.optionsListWidth;var i=this.select.getBoundingClientRect();var s=this.select.offsetTop-Object(A["a"])(this.select,this.select.offsetParent);var o=this.select.offsetLeft;var l=this.select.offsetParent.clientHeight-s;var c=s+i.height;var u=i.bottom;var d=i.top;var p=n||i.width;return{bottom:u,offsetBottom:r,offsetTop:a,relativeBottom:c,relativeLeft:o,relativeTop:l,top:d,width:p}}},{key:"getPlaceholderOption",value:function e(){return{isPlaceholder:true,label:this.props.placeholder,value:""}}},{key:"getPlaceholderOptionGroup",value:function e(){return{isPlaceholder:true,options:[this.getPlaceholderOption()]}}},{key:"getSelectedOptionDisplayValue",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value;var a=this.props,n=a.optionGroups,i=a.options;var s=n?Object(b["flatMap"])(n,"options"):i;var o=Object(b["find"])(s,{value:r});return Object(b["get"])(o,"displayValue")}},{key:"setFilterQuery",value:function e(t){this.setState(function(){return{filterQuery:t}})}},{key:"setSelectedOptionValue",value:function e(t){this.setState(function(){return{selectedOptionValue:t}})}},{key:"setRef",value:function e(t){var r=this;return function(e){r[t]=e}}},{key:"focus",value:function e(){this.preventFocusAndBlur=true;this.select.focus();this.preventFocusAndBlur=false}},{key:"blur",value:function e(){this.select.blur();this.filterInput&&this.filterInput.blur()}},{key:"filterOption",value:function e(t){var r=t.label.toLowerCase();var a=this.getFilterQuery().toLowerCase();return-1!==r.indexOf(a)}},{key:"initKeyCommands",value:function e(){this.keyCommands=new k["a"](this.select);this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}},{key:"resetKeyCommads",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"toggleOpenState",value:function e(t){this.setState(function(e){var r={isOpen:Object(b["isUndefined"])(t)?!e.isOpen:t};r.isOpen||(r.filterQuery="");return r})}},{key:"renderFilterInput",value:function e(){var t=this.state,r=t.filterQuery,a=t.selectedOptionValue;var n=this.props.displayValue;var i={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.props.placeholder,ref:this.setRef("filterInput"),type:"text"};i.value=a&&!r?a:a||!n||r?r:n;return h.a.createElement("input",i)}},{key:"renderOptionsListMaybe",value:function e(){if(!this.state.isOpen)return null;var t=this.props,r=t.autoSelectFirstOption,a=t.isLoading,n=t.membersOnly,i=t.optionClassName,s=t.optionsRowHeight,o=t.pillarClassName,l=t.useFullWidthOptions,c=t.value,u=t.onScroll,d=t.onOptionHighlighted;var p=n?240:400;return h.a.createElement(x["a"],{autoSelectFirstOption:r,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:a,maxListHeight:p,onOptionSelected:this.onOptionSelected,optionClassName:i,onScroll:u,optionGroups:n?null:this.maybeShowOptions(),options:n?this.maybeShowOptions():null,optionsRowHeight:s,pillarClassName:o,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:l,value:c,onActiveOptionUpdated:d})}},{key:"renderOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();var r=L.rt('No workspaces found matching <span class="sk_black bold">{query}</span>.',{query:t});var a=L.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return h.a.createElement("div",{className:"p-workspace_search__no-results-message"},h.a.createElement("p",{className:"margin_0"},r),h.a.createElement("p",{className:"margin_0"},a))}},{key:"renderOptionsListHintText",value:function e(){var t=this.props.membersOnly;var r=t?L.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>.'):L.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>, or search for a <span class="sk_black bold">specific workspace</span>.');return h.a.createElement("div",{className:"p-workspace_search__no-results-message"},h.a.createElement("p",{className:"margin_0"},r))}},{key:"render",value:function e(){var t=this.props,r=t.autoSelectFirstOption,a=t.className,i=t.displayValue,s=t.isLoading,o=t.labelId,l=t.membersOnly,c=t.name,u=t.onChange,d=t.onClearButtonClick,p=t.onClose,m=t.onFilterInputChange,f=t.onOutsideClick,v=t.onOpen,b=t.onOptionHighlighted,g=t.onScroll,_=t.optionClassName,y=t.options,k=t.optionsListOffsetBottom,O=t.optionsListOffsetTop,E=t.optionsListWidth,w=t.optionsRowHeight,C=t.optionGroups,j=t.pillarClassName,I=t.placeholder,T=t.selectedOption,A=t.selectedValueClassName,R=t.type,M=t.useFullWidthOptions,x=t.usePlaceholderOption,D=t.wrapperClassName,F=S()(t,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]);var L=this.state.filterQuery;var B=N()("c-input_select__wrapper",D);var U=N()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===R},a);var q=N()("p-workspace_search__clear-button",{hidden:!L&&!i});return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:B,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},h.a.createElement("div",n()({},F,{"aria-labelledby":o,className:U,"data-name":c,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),h.a.createElement(P["c"],{className:q,onClick:this.onClearInput,tabIndex:"0",ref:this.setRef("closeButton")}))}}]);return t}(R["a"]);q.displayName="WorkspaceSearchSelect";q.propTypes=B;q.defaultProps=U;var G=q;var H=r(456);var W=r(1762);var V={item:f["b"].object,type:f["b"].oneOf(["member","workspace"]),featureReactMessages:f["b"].bool.isRequired,featureReactMemberProfileCard:f["b"].bool.isRequired};var z={item:{},type:"member"};var Q=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(b["bindAll"])(r,["maybeRenderTitle","maybeRenderEmail"]);return r}l()(t,[{key:"maybeRenderTitle",value:function e(t){if(!t)return null;return h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"maybeRenderEmail",value:function e(t){if(!t)return null;return h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"renderEntityIcon",value:function e(t){var r=t.item,a=t.type;var n=this.props,i=n.featureReactMemberProfileCard,s=n.featureReactMessages;return h.a.createElement(H["a"],{entityType:a,dimension:36,entityData:r,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:s,featureReactMemberProfileCard:i})}},{key:"renderItemAsMember",value:function e(t){var r=t.item,a=t.type;var n=Object(b["get"])(r,"profile");var i=n.real_name,s=n.email,o=n.title;return h.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:r,type:a}),h.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},h.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},i),h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(o),this.maybeRenderEmail(s))))}},{key:"renderItemAsWorkspace",value:function e(t){var r=t.item,a=t.type;var n=r.name,i=r.description;return h.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:r,type:a}),h.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},h.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},n),h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},i)))}},{key:"render",value:function e(){var t=this.props,r=t.item,a=t.type;return"member"===a?this.renderItemAsMember({item:r,type:a}):this.renderItemAsWorkspace({item:r,type:a})}}]);return t}(m["PureComponent"]);Q.displayName="WorkspaceSearchOptionsListItem";var K=Q;Q.defaultProps=z;var Y=r(1764);var J=new y["b"]("workspace_directory");var Z={className:f["b"].string,containerIdSelector:f["b"].string,fetchDirectoryWorkspaces:f["b"].func.isRequired,fetchMembers:f["b"].func.isRequired,membersOnly:f["b"].bool,onClearInput:f["b"].func,onOptionsListOpened:f["b"].func,onOptionsListClosed:f["b"].func,prepopulatedOption:f["b"].object,triggerAction:f["b"].func};var X={className:"",containerIdSelector:"",membersOnly:true,onClearInput:b["noop"],onOptionsListClosed:b["noop"],onOptionsListOpened:b["noop"],prepopulatedOption:void 0,triggerAction:b["noop"]};var $=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={nextCursorMark:"*",options:[],totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:true,isAnOptionHighlighted:false};Object(b["bindAll"])(r,["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]);r.select=null;r.debouncedOnFilterInputChange=Object(b["debounce"])(r.onFilterInputChange,100);return r}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.prepopulatedOption,a=t.membersOnly;Object(b["isEmpty"])(r)||this.setPrepopulatedOptionData(r);this.getOptionsFetcher();a||(this.keyCommands=this.initKeyCommands())}},{key:"componentDidUpdate",value:function e(t){var r=this.props.prepopulatedOption;var a=t.prepopulatedOption;Object(b["isEmpty"])(r)||r===a||this.setPrepopulatedOptionData(r)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onChange",value:function e(t){var r=this.props.membersOnly;var a=this.state,n=a.currentOptionsData,i=a.currentSearchQuery;var s=void 0;var o=void 0;var l=void 0;if(t===E["b"]){s={id:E["b"],displayValue:i};l=n}else if(r){s=Object(b["find"])(n,{id:t});o=Object(_["getMemberRealName"])(s);l=[s]}else{s=Object(b["chain"])(Object(b["values"])(n)).flatten().find({id:t}).value();var c=Object(E["h"])(s);o=c?Object(_["getMemberRealName"])(s):Object(b["get"])(s,"name");l=c?{members:[s],workspaces:[]}:{members:[],workspaces:[s]}}this.setState(function(){var e={value:t,selectedOptionData:s,currentSearchQuery:t===E["b"]?i:o,nextCursorMark:"*",currentOptionsData:l};return e},this.triggerActionWithValue)}},{key:"onClearButtonClicked",value:function e(){var t=this.props.onClearInput;this.clearInput();t()}},{key:"onFilterInputChange",value:function e(t){var r=this.props,a=r.triggerAction,n=r.membersOnly;this.setIsLoading(true);this.setSelectedOptionData(null);this.setPrepopulatedOptionData(null);this.setValue(null);n&&a({selectedOptionData:null});this.getOptionsFetcher(t)}},{key:"onOptionHighlighted",value:function e(t){var r=!Object(b["isEmpty"])(t);this.setIsAnOptionHighlighted(r)}},{key:"onScroll",value:function e(t){var r=200;var a=this.state,n=a.currentSearchQuery,i=a.currentOptionsData,s=void 0===i?[]:i,o=a.totalResultsCount;var l=t.clientHeight,c=t.scrollHeight,u=t.scrollTop;var d=c-(u+l)<r;d&&s.length<o&&this.getOptionsFetcher(n,{doFetchNextPage:true})}},{key:"onClose",value:function e(){var t=this.props.onOptionsListClosed;this.setIsAnOptionHighlighted(false);t()}},{key:"onOpen",value:function e(){var t=this.props.onOptionsListOpened;t()}},{key:"onSearchAgainTriggered",value:function e(){this.select.onSearchAgainTriggered()}},{key:"onKeyPressedEnter",value:function e(){if(this.props.membersOnly)return;var t=this.state,r=t.selectedOptionData,a=t.currentSearchQuery,n=t.isAnOptionHighlighted;if(!a||n)return;var i=Object(b["get"])(this.select,"filterInput.value",a);if(!r){this.select.blur();this.setState(function(){var e={selectedOptionData:{id:E["b"],displayValue:i},currentSearchQuery:i,nextCursorMark:"*"};return e},this.triggerActionWithValue)}}},{key:"setSelectRef",value:function e(t){this.select=t}},{key:"setCurrentOptionsData",value:function e(t){var r=t.optionData,a=t.isNewSearch,n=t.totalResultsCount;var i=this.state.currentOptionsData;var s=void 0;s=a?r:Object(b["unionBy"])(i,r,"id");this.setState(function(){return{currentOptionsData:s,totalResultsCount:n}});this.setIsLoading(false)}},{key:"setCurrentOptionGroupsData",value:function e(t){var r=t.memberOptionData,a=t.workspaceOptionData,n=t.isNewSearch,i=t.totalResultsCount,s=t.memberResultsCount,o=void 0===s?0:s,l=t.workspaceResultsCount,c=void 0===l?0:l;var u=this.state.currentOptionsData;var d=void 0;var p=!o&&!c||i?i:o+c;d=n?{members:r,workspaces:a}:{members:Object(b["unionBy"])(Object(b["get"])(u,"members"),r,"id"),workspaces:Object(b["unionBy"])(Object(b["get"])(u,"workspaces"),a,"id")};this.setState(function(){return{currentOptionsData:d,totalResultsCount:p,memberResultsCount:o,workspaceResultsCount:c}});this.setIsLoading(false)}},{key:"setCurrentSearchQuery",value:function e(t){this.setState(function(){return{currentSearchQuery:t}})}},{key:"setIsLoading",value:function e(t){this.setState(function(){return{loadingResults:t}})}},{key:"setIsAnOptionHighlighted",value:function e(t){this.setState(function(){return{isAnOptionHighlighted:t}})}},{key:"setNextCursorMark",value:function e(t){this.setState(function(){return{nextCursorMark:t}})}},{key:"setPrepopulatedOptionData",value:function e(t){this.setState(function(){return{prepopulatedOptionData:t}})}},{key:"setSelectedOptionData",value:function e(t){this.setState(function(){return{selectedOptionData:t}})}},{key:"setValue",value:function e(t){this.setState(function(){return{value:t}})}},{key:"getBoundingRect",value:function e(t){this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(t));return this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}},{key:"getPlaceHolderText",value:function e(t){var r=J.t("Search for a teammate");var a=J.t("Search");return t?r:a}},{key:"getOptionsFetcher",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.forceNewSearch,n=void 0!==a&&a,i=r.doFetchNextPage,s=void 0!==i&&i;var o=this.state.currentSearchQuery;var l=this.props.membersOnly;var c=l?this.fetchMemberData:this.fetchMemberAndWorkspaceData;var u={searchTerm:t};if(!s&&t===o&&!n)return null;u.nextCursorMark=o===t?this.state.nextCursorMark:"";this.setCurrentSearchQuery(t);return c({args:u,forceNewSearch:n,newSearchQuery:t,stashedSearchQuery:o})}},{key:"initKeyCommands",value:function e(){var t=new k["a"];t.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]);return t}},{key:"fetchMemberData",value:function e(t){var r=this;var a=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;return o(a).then(function(e){var t=e.items,a=void 0===t?[]:t,o=e.next_cursor_mark,l=e.num_found;if(!a.length&&"*"!==o)return;r.setNextCursorMark(o);r.setCurrentOptionsData({optionData:a,isNewSearch:n||s!==i,totalResultsCount:l})})}},{key:"fetchMemberAndWorkspaceData",value:function e(t){var r=this;var a=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;var l=[o(a),this.props.fetchDirectoryWorkspaces(a)];return Promise.all(l).then(function(e){var t=e[0],a=t.items,o=void 0===a?[]:a,l=t.next_cursor_mark,c=t.num_found;var u=e[1],d=u.items,p=void 0===d?[]:d,m=u.next_cursor_mark,h=u.num_found;var f=void 0;if(!o.length&&"*"!==l&&!p.length&&"*"!==m)return;o.length&&!p.length?r.setNextCursorMark(l):p.length&&!o.length&&r.setNextCursorMark(m);o.length&&!p.length?f=c:p.length&&!o.length&&(f=h);r.setCurrentOptionGroupsData({memberOptionData:o,workspaceOptionData:p,isNewSearch:n||s!==i,totalResultsCount:f,memberResultsCount:c,workspaceResultsCount:h})})}},{key:"clearInput",value:function e(){var t=this.props.triggerAction;this.setSelectedOptionData(null);this.setCurrentSearchQuery(null);this.setPrepopulatedOptionData(null);this.setValue(null);this.getOptionsFetcher();t({selectedOptionData:null,type:null});this.select.toggleOpenState()}},{key:"focus",value:function e(){this.select.focus()}},{key:"blur",value:function e(){this.select.blur()}},{key:"triggerActionWithValue",value:function e(){var t=this.props.triggerAction;var r=this.state.selectedOptionData;var a=Object(E["h"])(r)?"member":"workspace";t({selectedOptionData:r,type:a})}},{key:"formatOptionsDataArrayOrObject",value:function e(t){var r=this;var a=this.props.membersOnly;var n=this.state.selectedOptionData;var i=[];if(a)i=Object(b["map"])(t,function(e){return r.formatMemberOptionData(e)});else{var s=t.members,o=t.workspaces;var l=Object(b["get"])(s,"length",0);var c=Object(b["get"])(o,"length",0);if(l){var u={label:this.formatMemberOptionsGroupsHeader(),options:[]};var d=c>0?Object(b["slice"])(s,0,4):s;u.options=Object(b["map"])(d,function(e){return r.formatMemberOptionData(e)});i.push(u)}if(c){var p={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};p.options=Object(b["map"])(o,function(e){return r.formatWorkspaceOptionData(e)});i.push(p)}}return i}},{key:"formatMemberOptionData",value:function e(t){var r=Object(_["getMemberRealName"])(t);var a=Object(b["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"member"}),value:a,displayValue:r}}},{key:"formatWorkspaceOptionData",value:function e(t){var r=Object(b["get"])(t,"name");var a=Object(b["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"workspace"}),value:a,displayValue:r}}},{key:"formatMemberOptionsGroupsHeader",value:function e(){var t=this.state,r=t.memberResultsCount,a=t.selectedOptionData;var n=a?1:r;return J.t("Search by coworker ({num})",{num:n})}},{key:"formatWorkspaceOptionsGroupsHeader",value:function e(){var t=this.props.prepopulatedOption;var r=this.state,a=r.currentSearchQuery,n=r.workspaceResultsCount,i=r.selectedOptionData;var s=Object(b["get"])(t,"displayValue","")?Object(b["get"])(t,"displayValue",""):a;var o=i?1:n;var l=Object(E["c"])()?50:150;var c=Object(b["get"])(s,"length",0)>l?s.slice(0,l)+"...":s;return J.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(y["n"])(c),num:o})}},{key:"renderShowAllWorkspacesListItem",value:function e(){var t=this.state.currentSearchQuery;return h.a.createElement("div",{className:"p-workspace_search_options_list_item"},h.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},h.a.createElement(w["b"],{type:"search"})),h.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},h.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},J.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(y["n"])(t)}))))}},{key:"renderMemberItemTemplate",value:function e(t){var r=t.item,a=t.type;return h.a.createElement(K,{item:r,type:a,featureReactMessages:true,featureReactMemberProfileCard:true})}},{key:"render",value:function e(){var t=this.props,r=t.containerIdSelector,a=t.membersOnly;var i=this.state,s=i.value,o=i.currentOptionsData,l=i.loadingResults,c=i.currentSearchQuery,u=i.prepopulatedOptionData,d=i.selectedOptionData;var p=this.getBoundingRect(r),m=p.bottom,f=void 0===m?0:m,v=p.top,g=void 0===v?0:v;var _={autoSelectFirstOption:true,className:"p-workspace_search",displayValue:c,isLoading:l,membersOnly:a,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-f,optionsListOffsetTop:g,optionsRowHeight:48,placeholder:this.getPlaceHolderText(a),pillarClassName:"p-workspace_search",selectedOption:d,usePlaceholderOption:false,useFullWidthOptions:true,value:s,wrapperClassName:"p-workspace_search__wrapper"};a?_.options=this.formatOptionsDataArrayOrObject(o):_.optionGroups=this.formatOptionsDataArrayOrObject(o);if(u&&!s)if(Object(b["get"])(u,"id")===E["b"]){_.selectedOption=u;_.displayValue=Object(b["get"])(u,"displayValue")}else{var y=Object(E["h"])(u)?this.formatMemberOptionData(u):this.formatWorkspaceOptionData(u);_.selectedOption=u;_.displayValue=Object(b["get"])(y,"displayValue")}return h.a.createElement("div",{className:"position_relative"},h.a.createElement(G,n()({},_,{ref:this.setSelectRef})))}}]);return t}(m["Component"]);$.displayName="WorkspaceSearch";$.defaultProps=X;var ee={fetchMembers:O["o"],fetchDirectoryWorkspaces:O["i"]};var te=Object(v["connect"])(null,ee,null,{withRef:true})($);var re=t["a"]=te},,function(e,t,r){"use strict";var a=r(2);var n=r.n(a);var i=r(26);var s=r(44);var o=r(322);var l=r(78);var c=r(19);var u=r(21);var d=r(11);var p=r(271);var m=r(36);var h=r(465);var f=r(323);var v=r(370);var b=r(12);var g=r(16);var _=r(985);var y=r(973);var k=r(1119);var O=r(1120);var E=r(1121);var w=r(10);var C=new w["b"]("threads");function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.names,r=e.replyCount,a=e.replyUsersCount,n=e.repliersIncludesSelf;if(!r||!a)return"";if(1===r)return C.t("1 reply");if(1===a){if(n)return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from you",{reply_count:r});return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name}",{reply_count:r,user_name:t[0]})}if(2===a){if(n)return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name} and you",{reply_count:r,user_name:t[0]});return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1} and {user_name2}",{reply_count:r,user_name1:t[0],user_name2:t[1]})}if(3===a){if(n)return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1}, {user_name2}, and you",{reply_count:r,user_name1:t[0],user_name2:t[1]});return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1}, {user_name2}, and {user_name3}",{reply_count:r,user_name1:t[0],user_name2:t[1],user_name3:t[2]})}return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1}, {user_name2}, and {num_others, plural, =1{# other} other{# others}}",{reply_count:r,user_name1:t[0],user_name2:t[1],num_others:a-2})}var j=r(1122);var I=r(971);var T=r(972);var N=r(605);var A=r(745);var R=r(974);var M=r(171);var P=r(144);var x=r(272);var D=r(351);var F=r(474);r.d(t,"c",function(){return G});r.d(t,"b",function(){return K});r.d(t,"a",function(){return Y});var L=new w["b"]("message");var B=new w["b"]("files");var U=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.channelId,n=r.ts;var i=Object(s["getMessageByTimestamp"])(t,a,n);if(!i||!i.text)return null;return G(t,i.text)};function q(e,t){var r=t.user;var a=Object(i["getMemberById"])(e,r);return Object(g["getPrefCompliantMemberName"])(e,a)}function G(e,t){if(!t)return"";var r=Object(F["b"])(t,"EDIT",{jumbomoji:false,allow_intra_word_formatting:false});return Object(_["a"])(r).reduce(function(t,r){if("member"===r.type){var a=Object(i["getMemberById"])(e,r.id);var n=Object(g["getMemberMentionName"])(a);return t+"@"+(n||r.id)}if("channel"===r.type){var s=Object(c["getChannelById"])(e,r.id);var o=s?s.name:"";return t+"#"+o}if("command"===r.type){if("here"===r.data.type||"channel"===r.data.type||"everyone"===r.data.type||"group"===r.data.type)return t+"@"+r.data.type;if("date"===r.data.type)return t+r.data.label;if("team"===r.data.type||"subteam"===r.data.type)return t+r.data.label}if(r.text)return t+r.text;return t},"")}function H(e,t){var r=Object(g["getPrefCompliantMemberNameById"])(e,t.author_id,true,false);var a=Object(M["k"])(e,t.ts);var n=Object(b["getDisplayName"])(Object(c["getChannelById"])(e,t.channel_id));var i=G(e,t.text);if(t.is_reply_unfurl)return L.t("{authorName} replied to a thread in {channelName} on {date}: {messageText}",{authorName:Object(w["n"])(r),date:a,channelName:n,messageText:Object(w["n"])(i)});return L.t("{authorName} on {date} in {channelName}: {messageText}",{authorName:Object(w["n"])(r),date:a,channelName:n,messageText:Object(w["n"])(i)})}function W(e,t){return t.service_name+" "+t.author_name+" "+t.author_subname+" "+G(e,t.text)+" "+Object(M["k"])(e,t.ts)+"."}function V(e,t){var r=t.text?G(e,t.text):"";return t.original_url+" "+r+"."}function z(e,t){var r=[];t.text&&r.push(G(e,t.text));t.fields&&t.fields.length>0&&r.push(t.fields.map(function(e){return e.title+": "+e.value}).join("; "));return r.join(" ")}function Q(e,t,r){var a=r.messageSubtype,i=r.messageText;var s=Object(u["getUserPref"])(e,"expand_inline_imgs");var o=Object(u["getUserPref"])(e,"expand_non_media_attachments");if(!t)return[];return n.a.compact(t.map(function(t){if(!Object(v["g"])({attachment:t,messageSubtype:a,messageText:i,expandInlineImgsPref:s,expandNonMediaAttachmentsPref:o}))return null;var r=[];t.pretext&&r.push(t.pretext);t.author_name&&r.push(t.author_name);t.title&&r.push(t.title);t.is_msg_unfurl?r.push(H(e,t)):"twitter"===t.service_name?r.push(W(e,t)):t.from_url?r.push(V(e,t)):r.push(z(e,t));return r.join(" ")}))}function K(e,t,r){var a=Object(d["isFeatureEnabled"])(e,"feature_file_threads");var n=Object(m["getMsgSenderEntity"])(e,t);var i=q(e,r);var s=Object(A["b"])(r);var o=Object(A["a"])(s,{file:r,subtype:Object(m["getMessageSubtype"])(t),isUpload:t.upload,userId:n.userId,featureFileThreads:a});if(!o)return null;var l=r.pretty_type||B.t("file");var c=L.t("{uploader_name}{uploader_name_affix}",{uploader_name:i,uploader_name_affix:Object(w["m"])(i)});return o({uploader_name_possessive_html:c,file_pretty_name:l})}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,v=t.previousMessageTs,b=t.rollup;var _=Object(s["getMessageByTimestamp"])(e,a,r);var w=Object(c["getChannelById"])(e,a);if(!_||!w)return null;var C=Object(d["isFeatureEnabled"])(e,"feature_file_threads");var A=C?null:_.file;var M=C?_.files:null;var F=C?Object(l["getFileById"])(e,n.a.first(M)):Object(l["getFileById"])(e,A);var B=Object(m["getMessageSubtype"])(_);var H=Object(h["a"])(B);var W=Object(m["getMsgSenderEntity"])(e,_);var V=Object(d["getCurrentUserId"])(e);var z=["bot_message","me_message","file_comment","file_mention","file_share","file_upload","thread_broadcast","channel_join","channel_leave","group_join","group_leave"];if(B&&!H&&-1===z.indexOf(B))return null;var Y="";var J=null;if(-1!==["channel_join","channel_leave","group_join","group_leave"].indexOf(B)){var Z=Object(T["a"])(e,b);var X=Object(I["a"])({plainText:true,rollup:Z,channel:w,user:W.userId,isAppUser:Object(g["isAppUser"])(Object(i["getMemberById"])(e,W.userId)),i18nReplaceCallback:n.a.noop});Y=X.join("")}else if(-1!==["sh_room_shared","sh_room_created"].indexOf(B)){var $="sh_room_shared"===B?L.t("Shared a call"):L.t("Started a call");var ee=_._call_id;var te=Object(p["d"])(e,ee);if(te){var re=te.name?te.name:"";var ae=Object(p["e"])(te)||[];var ne=Object(R["a"])({dateEnd:te.endTimestamp,isDmCall:te.isDmCall,wasMissed:Object(p["i"])(te),wasRejected:Object(p["j"])(te),isCreator:V===te.createdBy,isParticipant:-1!==ae.indexOf(V),dmCallName:Object(p["f"])(e,ee),participantsCount:ae.length});Y="sh_room_shared"===B&&re?L.t("Shared a call: {callName}. {callDescription}.",{callName:re,callDescription:ne}):"sh_room_shared"===B?L.t("Shared a call. {callDescription}.",{callDescription:ne}):re?L.t("Started a call: {callName}. {callDescription}.",{callName:re,callDescription:ne}):L.t("Started a call. {callDescription}.",{callDescription:ne})}else Y=$}else if(H){var ie=Object(d["isFeatureEnabled"])(e,"feature_sli_channel_archive_suggestions");var se=Object(d["isFeatureEnabled"])(e,"feature_wta_conversations_api_channel_created_msg");var oe=ie&&"sli_channel_archive_suggestions"===Object(D["getGroupForUser"])(e,"sli_channel_archive_suggestions");var le=Object(i["getCurrentMember"])(e);Y=Object(y["a"])({message:_,channel:w,member:le,inSliChannelArchiveSuggestionsExperiment:oe,featureWtaConversationsApiChannelCreated:se});Y=G(e,Y)}else if(F&&-1!==["file_mention","file_share","file_upload","file_comment"].indexOf(B)){var ce=F.user;var ue=q(e,F);if("file_comment"===B){var de=ce!==_.comment.user;var pe=Object(s["getMessageByTimestamp"])(e,a,v);var me=Object(k["a"])({plainText:true,isFollowup:Object(O["a"])(_,pe),fileMode:F.mode,fileLink:F.title?F.title:F.name,userId:de?ce:null,userName:de?ue:null,userLink:de?ue:null});J=_.comment&&F&&Object(l["getFileCommentById"])(e,F.id,_.comment.id);J&&(Y=G(e,me+" "+J.comment))}else{Y=U(e,{channelId:a,ts:_.ts});var he=K(e,_,F);he&&(Y=he+": "+(F.title?F.title:F.name))}}else if("thread_broadcast"===B){var fe=Object(s["getMessageByTimestamp"])(e,a,_.thread_ts);var ve=Object(m["getMessageRootText"])(fe);if(C&&fe&&fe.files&&fe.files.length){var be=n.a.first(fe.files);var ge=Object(l["getFileById"])(e,be);ve=Object(m["getMessageRootText"])(fe,ge)}var _e=[];var ye=0;if(fe){if(fe.reply_users)_e=fe.reply_users;else{var ke=fe.replies||[];_e=n()(ke).map("user").uniq().value()}ye=fe.reply_users_count?fe.reply_users_count:_e.length}var Oe=fe?fe.reply_count:null;var Ee=n.a.includes(_e,V);var we=Object(E["a"])(e,_e);var Ce=S({names:we,replyCount:Oe,replyUsersCount:ye,repliersIncludesSelf:Ee});var Se=G(e,_.text);Y=Object(j["a"])()+" "+ve+" "+Ce+" "+Se}else Y=U(e,{channelId:a,ts:_.ts});var je=Object(f["b"])(_,F);var Ie=Object(m["getMessageAttachments"])(_);var Te=Q(e,Ie,{messageSubtype:B,messageText:_.text});var Ne={name:"",time:Object(P["a"])(_.ts,{do24hrTime:Object(u["getUserPref"])(e,"time24"),includeSeconds:false}),text:Y,reactionCount:Object(o["getTotalReactionCountForKey"])(e,je),replyCount:_.reply_count,isPinned:Object(x["c"])(_,w),isStarred:Object(m["isStarred"])(_,F,J,C),attachmentCount:Ie?Ie.length:0,attachmentTexts:Te};Ne.name=Object(N["a"])(e,{userId:W.userId,botId:W.botId,username:W.username,botProfile:_.bot_profile});return Ne}},,,,,,,,,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(97);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(801);var h=function(e){p()(t,e);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.keys,a=e.heightCache,i=e.containerHeight,s=void 0===i?0:i,o=e.stickToBottom,c=void 0!==o&&o,u=e.bottomMargin,d=void 0===u?0:u,p=e.ANCHOR_OFFSET,m=void 0===p?0:p,h=e.STICKY_EPSILON,f=void 0===h?2:h,v=e.STICKY_EPSILON_SETHEIGHT,b=void 0===v?2:v;n()(this,t);var g=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{keys:r,heightCache:a}));g.containerHeight=s;g.stickToBottom=c;g.bottomMargin=d;g.STICKY_EPSILON=f;g.STICKY_EPSILON_SETHEIGHT=b;g.ANCHOR_OFFSET=m;g.anchorOffset=m;g.anchor=false;return g}s()(t,[{key:"getOffsetForKey",value:function e(t){if(!t)return this.totalHeight;var r=this.getTop(t);if(void 0===r)return 0;return r-this.anchorOffset}},{key:"setHeight",value:function e(r,a,n){if(false!==this.anchor){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,r,a);return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(n,this.STICKY_EPSILON_SETHEIGHT)){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,r,a);return this.bracketScrollTop(Infinity)}var i=n;var s=this.getBottom(r);if(s<=n+this.anchorOffset){var o=a-this.getHeight(r);i+=o}u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,r,a);return this.bracketScrollTop(i)}},{key:"setKeys",value:function e(r,a){if(false!==this.anchor){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,r);return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(a)){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,r);return this.bracketScrollTop(Infinity)}var n=a+this.anchorOffset;var i=this.findAnchor(this.keys,r,n);if(!i){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,r);return this.bracketScrollTop(a)}var s=this.getTop(i)-n;u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,r);var o=this.getTop(i)-n;var l=s-o;return this.bracketScrollTop(a-l)}},{key:"setContainerHeight",value:function e(t,r){if(false!==this.anchor){this.containerHeight=t;this.layout();return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(r)){this.containerHeight=t;this.layout();return this.bracketScrollTop(Infinity)}this.containerHeight=t;this.layout();return r}},{key:"setBottomMargin",value:function e(t){this.bottomMargin=t}},{key:"setStickToBottom",value:function e(t){this.stickToBottom=t}},{key:"setAnchor",value:function e(t,r){this.anchor=t;this.anchorOffset="number"!==typeof r?this.ANCHOR_OFFSET:r}},{key:"findAnchor",value:function e(t,r,a){for(var n=0;n<t.length;n++){var i=t[n];if(this.getBottom(i)>a)for(var s=0;s<r.length;s++)if(r[s]===i)return i}return null}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.totalHeight-this.containerHeight+this.bottomMargin,t))}},{key:"shouldStickToBottom",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.STICKY_EPSILON;if(!this.stickToBottom)return false;return t>=this.totalHeight-this.containerHeight-r+this.bottomMargin}}]);return t}(m["a"]);t["a"]=h},function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return s});var a=r(90);var n=r(12);function i(e,t){return(Object(a["getEditableRequestChannelObjects"])(e)||{})[t]}function s(e,t){var r=Object(a["getEditableRequestChannelObjects"])(e)||{};return Object.values(r).filter(function(r){return Object(n["getDisplayNameForChannel"])(e,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false})===t.replace(/#/g,"")})[0]}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});function a(e){function t(e,t){return e<<t|e>>>32-t}function r(e,t){var r=2147483648&e;var a=2147483648&t;var n=1073741824&e;var i=1073741824&t;var s=(1073741823&e)+(1073741823&t);if(n&i)return 2147483648^s^r^a;if(n|i){if(1073741824&s)return 3221225472^s^r^a;return 1073741824^s^r^a}return s^r^a}function a(e,t,r){return e&t|~e&r}function n(e,t,r){return e&r|t&~r}function i(e,t,r){return e^t^r}function s(e,t,r){return t^(e|~r)}function o(e,n,i,s,o,l,c){var u=r(e,r(r(a(n,i,s),o),c));return r(t(u,l),n)}function l(e,a,i,s,o,l,c){var u=r(e,r(r(n(a,i,s),o),c));return r(t(u,l),a)}function c(e,a,n,s,o,l,c){var u=r(e,r(r(i(a,n,s),o),c));return r(t(u,l),a)}function u(e,a,n,i,o,l,c){var u=r(e,r(r(s(a,n,i),o),c));return r(t(u,l),a)}function d(e){var t=e.length;var r=t+8;var a=(r-r%64)/64;var n=16*(a+1);var i=Array(n-1);var s=0;var o=0;var l=0;while(l<t){s=(l-l%4)/4;o=l%4*8;i[s]|=e.charCodeAt(l)<<o;l++}s=(l-l%4)/4;o=l%4*8;i[s]|=128<<o;i[n-2]=t<<3;i[n-1]=t>>>29;return i}function p(e){var t="";var r="";for(var a=0;a<=3;a++){var n=e>>>8*a&255;r="0"+n.toString(16);t+=r.substr(r.length-2,2)}return t}function m(e){var t=e.replace(/\r\n/g,"\n");var r="";for(var a=0;a<t.length;a++){var n=t.charCodeAt(a);if(n<128)r+=String.fromCharCode(n);else if(n>127&&n<2048){r+=String.fromCharCode(n>>6|192);r+=String.fromCharCode(63&n|128)}else{r+=String.fromCharCode(n>>12|224);r+=String.fromCharCode(n>>6&63|128);r+=String.fromCharCode(63&n|128)}}return r}var h=[];var f=7;var v=12;var b=17;var g=22;var _=5;var y=9;var k=14;var O=20;var E=4;var w=11;var C=16;var S=23;var j=6;var I=10;var T=15;var N=21;h=d(m(e));var A=1732584193;var R=4023233417;var M=2562383102;var P=271733878;var x=A;var D=R;var F=M;var L=P;for(var B=0;B<h.length;B+=16){x=A;D=R;F=M;L=P;A=o(A,R,M,P,h[B+0],f,3614090360);P=o(P,A,R,M,h[B+1],v,3905402710);M=o(M,P,A,R,h[B+2],b,606105819);R=o(R,M,P,A,h[B+3],g,3250441966);A=o(A,R,M,P,h[B+4],f,4118548399);P=o(P,A,R,M,h[B+5],v,1200080426);M=o(M,P,A,R,h[B+6],b,2821735955);R=o(R,M,P,A,h[B+7],g,4249261313);A=o(A,R,M,P,h[B+8],f,1770035416);P=o(P,A,R,M,h[B+9],v,2336552879);M=o(M,P,A,R,h[B+10],b,4294925233);R=o(R,M,P,A,h[B+11],g,2304563134);A=o(A,R,M,P,h[B+12],f,1804603682);P=o(P,A,R,M,h[B+13],v,4254626195);M=o(M,P,A,R,h[B+14],b,2792965006);R=o(R,M,P,A,h[B+15],g,1236535329);A=l(A,R,M,P,h[B+1],_,4129170786);P=l(P,A,R,M,h[B+6],y,3225465664);M=l(M,P,A,R,h[B+11],k,643717713);R=l(R,M,P,A,h[B+0],O,3921069994);A=l(A,R,M,P,h[B+5],_,3593408605);P=l(P,A,R,M,h[B+10],y,38016083);M=l(M,P,A,R,h[B+15],k,3634488961);R=l(R,M,P,A,h[B+4],O,3889429448);A=l(A,R,M,P,h[B+9],_,568446438);P=l(P,A,R,M,h[B+14],y,3275163606);M=l(M,P,A,R,h[B+3],k,4107603335);R=l(R,M,P,A,h[B+8],O,1163531501);A=l(A,R,M,P,h[B+13],_,2850285829);P=l(P,A,R,M,h[B+2],y,4243563512);M=l(M,P,A,R,h[B+7],k,1735328473);R=l(R,M,P,A,h[B+12],O,2368359562);A=c(A,R,M,P,h[B+5],E,4294588738);P=c(P,A,R,M,h[B+8],w,2272392833);M=c(M,P,A,R,h[B+11],C,1839030562);R=c(R,M,P,A,h[B+14],S,4259657740);A=c(A,R,M,P,h[B+1],E,2763975236);P=c(P,A,R,M,h[B+4],w,1272893353);M=c(M,P,A,R,h[B+7],C,4139469664);R=c(R,M,P,A,h[B+10],S,3200236656);A=c(A,R,M,P,h[B+13],E,681279174);P=c(P,A,R,M,h[B+0],w,3936430074);M=c(M,P,A,R,h[B+3],C,3572445317);R=c(R,M,P,A,h[B+6],S,76029189);A=c(A,R,M,P,h[B+9],E,3654602809);P=c(P,A,R,M,h[B+12],w,3873151461);M=c(M,P,A,R,h[B+15],C,530742520);R=c(R,M,P,A,h[B+2],S,3299628645);A=u(A,R,M,P,h[B+0],j,4096336452);P=u(P,A,R,M,h[B+7],I,1126891415);M=u(M,P,A,R,h[B+14],T,2878612391);R=u(R,M,P,A,h[B+5],N,4237533241);A=u(A,R,M,P,h[B+12],j,1700485571);P=u(P,A,R,M,h[B+3],I,2399980690);M=u(M,P,A,R,h[B+10],T,4293915773);R=u(R,M,P,A,h[B+1],N,2240044497);A=u(A,R,M,P,h[B+8],j,1873313359);P=u(P,A,R,M,h[B+15],I,4264355552);M=u(M,P,A,R,h[B+6],T,2734768916);R=u(R,M,P,A,h[B+13],N,1309151649);A=u(A,R,M,P,h[B+4],j,4149444226);P=u(P,A,R,M,h[B+11],I,3174756917);M=u(M,P,A,R,h[B+2],T,718787259);R=u(R,M,P,A,h[B+9],N,3951481745);A=r(A,x);R=r(R,D);M=r(M,F);P=r(P,L)}var U=p(A)+p(R)+p(M)+p(P);return U.toLowerCase()}},,function(e,t,r){"use strict";var a=r(129);var n=r(1);var i=r.n(n);var s=r(15);var o=r.n(s);var l=r(14);var c=r(41);var u=r(10);var d=r(11);var p=r(1969);var m=new u["b"]("app_token");var h={type:a["b"].oneOf(["unknown","non-existent"]),subtler:a["b"].bool,featureAppsStoreM11n:a["b"].bool.isRequired};var f={type:"unknown",subtler:false};var v=function e(t){var r=t.featureAppsStoreM11n;if(!r)return null;var a=o()("c-missing_app",{"c-missing_app--unknown":"unknown"===t.type,"c-missing_app--nonexistent":"non-existent"===t.type,"c-missing_app--subtler":t.subtler});if("unknown"===t.type)return i.a.createElement(c["d"],{tip:r?m.t("Loading\u2026"):""},i.a.createElement("span",{className:a}));if("non-existent"===t.type)return i.a.createElement(c["d"],{tip:r?m.t("Private app info"):""},i.a.createElement("span",{className:a}));return null};v.defaultProps=f;var b=function e(t){return{featureAppsStoreM11n:Object(d["isFeatureEnabled"])(t,"feature_apps_store_m11n")}};var g=Object(l["connect"])(b)(v);var _=t["a"]=g},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(15);var f=r.n(h);var v=r(1749);var b={children:d["b"].node.isRequired,className:d["b"].string};var g={children:null,className:""};var _=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=f()("p-pill",this.props.className);return m.a.createElement("div",{className:t},this.props.children)}}]);return t}(p["PureComponent"]);_.displayName="Pill";_.defaultProps=g;var y=_;var k=t["a"]=y},,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"getMaxTimestamp",function(){return h});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(2);var c=r.n(l);var u=r(4);var d=r(44);var p={maxTs:"0"};var m=Object(u["c"])(n()({},d["addMessages"],function(e,t){if(!t||!t.length||!c.a.isArray(t))return e;var r=c.a.maxBy(t,"ts");if(!r)return e;var a=r.ts>e.maxTs?r.ts:e.maxTs;return s()({},e,{maxTs:a})}),p);m.propTypes={maxTs:o["b"].string};t["default"]=m;var h=Object(u["d"])(function(e){return e&&e.notifications&&e.notifications.maxTs})},function(e,t,r){"use strict";r.r(t);r.d(t,"syncDownloads",function(){return h});r.d(t,"fetchFileInfo",function(){return f});r.d(t,"getDownloads",function(){return g});r.d(t,"getDownloadIds",function(){return _});var a=r(9);var n=r.n(a);var i=r(2);var s=r.n(i);var o=r(129);var l=r(4);var c=r(78);var u=r(11);var d=r(311);var p=r(131);var m=r(147);var h=Object(l["a"])("Sync downloads from desktop");h.propTypes=o["b"].object.isRequired;var f=Object(l["e"])("Fetch multiple files by ID and upsert them",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.ids;if(Object(u["isFeatureEnabled"])(t(),"feature_modern_files_info"))return e(Object(d["d"])({fileIds:a,reason:"downloads-store.fetchFileInfo"}));return Object(p["g"])(a).then(function(t){return e(Object(c["bulkAddFiles"])(t))}).catch(function(){return Object(m["f"])("Failed to fetch files",a)})});f.propTypes={ids:o["b"].arrayOf(o["b"].string).isRequired};var v={};var b=Object(l["c"])(n()({},h,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t}),v);b.propTypes=o["b"].objectOf(o["b"].shape({id:o["b"].string,teamId:o["b"].string,url:o["b"].string,startTime:o["b"].number,endTime:o["b"].number,downloadState:o["b"].oneOf(["not_started","progressing","completed","cancelled","interrupted"]),downloadPath:o["b"].string,progress:o["b"].number,isPaused:o["b"].bool,highlight:o["b"].bool,requestState:o["b"].oneOf(["cancel","pause","resume"])}));t["default"]=b;var g=Object(l["d"])(function(e){return s.a.values(e&&e.downloads)});var _=Object(l["d"])(function(e){return e&&e.downloads&&Object.keys(e.downloads)})},,function(e,t,r){"use strict";r.d(t,"b",function(){return J});r.d(t,"c",function(){return Z});var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(129);var h=r(1);var f=r.n(h);var v=r(14);var b=r(3324);var g=r(2);var _=r.n(g);var y=r(15);var k=r.n(y);var O=r(17);var E=r(161);var w=r(212);var C=r(11);var S=r(170);var j=r(270);var I=r(16);var T=r(10);var N=r(164);var A=r(18);var R=r(65);var M=r(20);var P=r(283);var x=r(456);var D=r(871);var F=r(92);var L=r(1144);var B=r(608);var U=r(174);var q=r(1746);var G=r.n(q);var H=new T["b"]("grid_onboarding");var W={orgName:m["b"].string,selectedMember:m["b"].object.isRequired,featureZeroWorkspaceOnboarding:m["b"].bool.isRequired,fetchDirectoryWorkspaces:m["b"].func.isRequired,scrollElement:m["b"].any,enqueueToast:m["b"].func,onFooterClick:m["b"].func,clogger:m["b"].object.isRequired};var V={orgName:"",workspaces:[],onWorkspaces:false,scrollElement:window,enqueueToast:g["noop"],onFooterClick:g["noop"]};var z=24;var Q=1200;var K=Object(O["b"])();function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(g["filter"])(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned})}function J(e){var t=e.totalWorkspaces,r=e.onWorkspaces;return!t&&r}function Z(e){var t=e.totalWorkspaces,r=e.onWorkspaces;return!t&&!r}function X(e){if(!e)return"";return{oneJoinableWorkspace:H.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:H.t("Join the workspace that seems right for your role to get started."),noAccess:H.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:H.t("Try searching for someone else on your team."),onApiError:H.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,function(e){var t=e.text,r=e.key,a=e.tag;if("a"===a)return f.a.createElement(R["a"],{onClick:function e(){return window.location.reload(true)},target:"_self",key:r},t);return{text:t}})}}var $=function e(t){var r=t.workspaces,a=t.noAccessToWorkspaces,n=t.noWorkspaces,i=t.hasApiError,s=t.featureZeroWorkspaceOnboarding;if(!s)return"";var o=X(s);if(i)return o.onApiError;var l=Y(r).length;if(1===l)return o.oneJoinableWorkspace;if(l>1)return o.moreThanOneJoinableWorkspaces;if(a)return o.noAccess;if(n)return o.noWorkspaces;return""};var ee=function e(t){var r=t.noAccessToWorkspaces,a=t.noWorkspaces,n=t.memberRealName,i=t.totalWorkspaces,s=t.hasApiError,o=t.featureZeroWorkspaceOnboarding;if(!o)return"";if(s)return H.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(T["n"])(n)});if(r)return H.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(T["n"])(n)});if(a)return H.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(T["n"])(n)});return H.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(T["n"])(n),numWorkspaces:i})};var te=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isMobileView:false,loadingWorkspaces:false,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:false,hasApiError:false};r.resultsList=null;r.searchBar=null;r.userHasNoAccessToWorkspaces=false;r.memberHasNoWorkspaces=false;r.noWorkspacesToDisplay=false;r.doRenderSearchAgainButton=false;Object(g["bindAll"])(r,["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"]);return r}l()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.setIsMobileView(Object(U["c"])());this.clientHeight=window.innerHeight;this.setSelectedMember(this.props.selectedMember)}},{key:"componentDidUpdate",value:function e(t,r){this.maybeFetchNextPage(r);this.maybeTriggerNewSearch(r);this.maybeUpdateMemberRealName(r)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onFooterClick",value:function e(){this.props.onFooterClick()}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;var t=Object(U["c"])();var r=this.state.isMobileView!==t;if(t||r){this.resultsList.invalidateRowHeights();r&&this.setIsMobileView(t)}}},{key:"onScroll",value:function e(t){var r=t.scrollTop,a=t.scrollHeight;this.doInfiniteScrollHandler({scrollTop:r,scrollHeight:a})}},{key:"onSearchAgainButtonClick",value:function e(t){t.preventDefault();t.stopPropagation();this.searchBar&&this.searchBar.getWrappedInstance&&this.searchBar.getWrappedInstance().onSearchAgainTriggered()}},{key:"onSelectColleague",value:function e(t){var r=t.selectedOptionData;r&&this.setSelectedMember(r)}},{key:"onButtonActionReject",value:function e(t){var r=t.node;r&&this.setToastText(r)}},{key:"onButtonActionResolve",value:function e(t){var r=t.node,a=t.i,n=t.workspace;Object(g["isNumber"])(a)&&n&&this.setWorkspaceByIndex({index:a,workspace:n});r&&this.setToastText(r)}},{key:"setListRef",value:function e(t){this.resultsList=t}},{key:"setSearchBarRef",value:function e(t){this.searchBar=t}},{key:"getListKeys",value:function e(){if(!this.state.workspaces)return[];return this.state.workspaces.map(function(e){return String(e.id)})}},{key:"setHasApiError",value:function e(t){this.setState(function(){return{hasApiError:t}})}},{key:"setSelectedMember",value:function e(t){this.setState(function(){return{selectedMember:t}})}},{key:"setMemberRealName",value:function e(t){this.setState(function(){return{memberRealName:t}})}},{key:"setWorkspaceFetchOptions",value:function e(t){var r=t.workspaces,a=t.totalWorkspaces,n=t.onWorkspaces,i=t.nextCursorMark;this.setState(function(){return{workspaces:r,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:i}})}},{key:"setWorkspaceByIndex",value:function e(t){var r=t.index,a=t.workspace;this.setState(function(e){var t=[].concat(e.workspaces);if(r>=t.length){K.warn("SearchResultsScreen: Out of bounds index "+r+" passed into setWorkspaceByIndex");return e}t[r]=a;return{workspaces:t}})}},{key:"setLoadingWorkspaces",value:function e(t){this.setState(function(){return{loadingWorkspaces:t}})}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{viewport:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:f.a.createElement(P["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"maybeTriggerNewSearch",value:function e(t){if(t.selectedMember!==this.state.selectedMember){this.clearWorkspaceFetchOptions();this.setLoadingWorkspaces(true)}}},{key:"maybeUpdateMemberRealName",value:function e(t){if(t.selectedMember!==this.state.selectedMember){var r=Object(I["getMemberRealName"])(this.state.selectedMember);this.setMemberRealName(r)}}},{key:"doInfiniteScrollHandler",value:function e(t){var r=t.scrollTop,a=t.scrollHeight;var n=this.hasScrolledWithinScrollThreshold({scrollTop:r,scrollHeight:a});n&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(true):!n&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(false)}},{key:"fetchWorkspaces",value:function e(){var t=this;var r=this.state,a=r.nextCursorMark,n=r.selectedMember;this.setHasApiError(false);return this.props.fetchDirectoryWorkspaces({nextCursorMark:a,id:Object(g["get"])(n,"id"),type:"single_user"}).then(function(e){t.setLoadingWorkspaces(false);var r=e.num_found,n=e.on_workspaces,i=e.items;var s=i?[].concat(t.state.workspaces,i):[];t.setWorkspaceFetchOptions({workspaces:s,totalWorkspaces:r,onWorkspaces:n,nextCursorMark:e.next_cursor_mark});a||Object(U["e"])({anchorPage:"grid_onboarding",numSearchResults:Object(g["get"])(e,"num_found",0),clogger:t.props.clogger})}).catch(function(e){t.setHasApiError(true);t.setLoadingWorkspaces(false);K.error("SearchResultsScreen: Error in FetchWorkspaces -",e)})}},{key:"maybeFetchNextPage",value:function e(t){!t.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var r=t.scrollHeight,a=t.scrollTop;return r-(a+this.clientHeight)<Q}},{key:"hasFetchedAllWorkspaces",value:function e(){return this.state.workspaces.length===this.state.totalWorkspaces}},{key:"clearWorkspaceFetchOptions",value:function e(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:false,nextCursorMark:null})}},{key:"renderSearchBar",value:function e(){return f.a.createElement("div",{className:"p-grid_onboarding_results__search"},f.a.createElement(D["a"],{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:true,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}},{key:"renderHeading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var r=this.state,a=r.totalWorkspaces,n=r.selectedMember,i=r.hasApiError;var s=Object(I["getMemberRealName"])(n);var o=ee({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:a,memberRealName:s,hasApiError:i,featureZeroWorkspaceOnboarding:t});var l=k()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return f.a.createElement("div",{className:l},f.a.createElement("span",{className:"p-grid_onboarding__results_heading"},f.a.createElement(x["a"],{entityType:"member",dimension:z,entityData:n,featureReactMessages:true,customClasses:"p-grid_onboarding_results__icon"}),o))}},{key:"renderSubheading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var r=this.state,a=r.workspaces,n=r.hasApiError;var i=$({workspaces:a,featureZeroWorkspaceOnboarding:t,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:n});var s=k()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return f.a.createElement("div",{className:s},i)}},{key:"renderWorkspaceCard",value:function e(t){var r=this;var a=this.state,i=a.workspaces,s=a.totalWorkspaces;var o=k()("p-grid_onboarding_results__list_item",{margin_bottom_0:t===s-1});return f.a.createElement(L["a"],{team:i[t],size:"large",featureZeroWorkspaceOnboarding:true,className:o,onActionResolve:function e(a){return r.onButtonActionResolve(n()({},a,{i:t}))},onActionReject:function e(a){return r.onButtonActionReject(n()({},a,{i:t}))},anchorPage:"grid_onboarding"})}},{key:"renderWorkspaceList",value:function e(){var t=this;var r=this.props.scrollElement;return f.a.createElement(b["a"],{scrollElement:r,onScroll:this.onScroll},function(e){var a=e.height,n=e.isScrolling,i=e.onChildScroll,s=e.scrollTop,o=e.registerChild;return f.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:o},f.a.createElement(B["a"],{keys:t.getListKeys(),rowRenderer:t.renderWorkspaceCard,ref:t.setListRef,scrollElement:r,onScroll:i,height:a,isScrolling:n,scrollTop:s}))})}},{key:"renderSearchAgainButton",value:function e(){return f.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},f.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},f.a.createElement(M["d"],{type:"outline",onClick:this.onSearchAgainButtonClick},H.t("Search Again"))))}},{key:"renderFooter",value:function e(){var t=this.props.orgName;var r=k()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return f.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},f.a.createElement(R["a"],{onClick:this.onFooterClick,className:r},H.t("View all {orgName} workspaces",{orgName:t}),f.a.createElement(A["a"],{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"})))}},{key:"renderInfiniteSpinner",value:function e(){return f.a.createElement("div",{className:"p-grid_onboarding__spinner"},f.a.createElement(F["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderResults",value:function e(){var t=this.state,r=t.loadingWorkspaces,a=t.selectedMember;var n=r&&this.memberHasNoWorkspaces;if(n||!a)return this.renderInfiniteSpinner();return f.a.createElement(f.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),r&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!r&&this.renderFooter())}},{key:"render",value:function e(){var t=this.state,r=t.totalWorkspaces,a=t.onWorkspaces,n=t.loadingWorkspaces,i=t.hasApiError;this.userHasNoAccessToWorkspaces=J({totalWorkspaces:r,onWorkspaces:a});this.memberHasNoWorkspaces=Z({totalWorkspaces:r,onWorkspaces:a});this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces;this.doRenderSearchAgainButton=!n&&this.noWorkspacesToDisplay&&!i;return f.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},f.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults()))}}]);return t}(h["Component"]);te.displayName="SearchResultsScreen";te.defaultProps=V;var re=function e(t,r){var a=r.selectedMember,n=r.workspaces;var i=Object(S["getEnterpriseOrgName"])(t);var s=Object(N["a"])(t);return{selectedMember:a,workspaces:n,orgName:i,clogger:s,featureZeroWorkspaceOnboarding:Object(C["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),featureSingleUserWorkspacePagination:Object(C["isFeatureEnabled"])(t,"feature_single_user_workspace_pagination")}};var ae={enqueueToast:w["enqueueToast"],fetchDirectoryWorkspaces:j["i"]};t["a"]=Object(v["connect"])(re,ae)(te)},,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return a});var a="_testOnlySpyableDispatch";t["b"]=function(){return function(e){var t=function e(t){return e[a](t)};t[a]=e;return t}}},,,,,,,function(e,t,r){var a=r(726);var n=a(Object,"create");e.exports=n},function(e,t,r){var a=r(1776),n=r(1777),i=r(1778),s=r(1779),o=r(1780);function l(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var a=e[t];this.set(a[0],a[1])}}l.prototype.clear=a;l.prototype["delete"]=n;l.prototype.get=i;l.prototype.has=s;l.prototype.set=o;e.exports=l},function(e,t,r){var a=r(1037);function n(e,t){var r=e.length;while(r--)if(a(e[r][0],t))return r;return-1}e.exports=n},function(e,t,r){var a=r(1782);function n(e,t){var r=e.__data__;return a(t)?r["string"==typeof t?"string":"hash"]:r.map}e.exports=n},function(e,t,r){var a=r(1045);var n=1/0;function i(e){if("string"==typeof e||a(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=i},function(e,t,r){var a,n,i;false;e.exports=r(1848)()},,,,,,,,,,,,,,,,function(e,t,r){"use strict";t.__esModule=true;var a=r(1329);Object.defineProperty(t,"instrument",{enumerable:true,get:function e(){return s(a).default}});Object.defineProperty(t,"ActionCreators",{enumerable:true,get:function e(){return a.ActionCreators}});Object.defineProperty(t,"ActionTypes",{enumerable:true,get:function e(){return a.ActionTypes}});var n=r(1804);Object.defineProperty(t,"persistState",{enumerable:true,get:function e(){return s(n).default}});var i=r(1843);Object.defineProperty(t,"createDevTools",{enumerable:true,get:function e(){return s(i).default}});function s(e){return e&&e.__esModule?e:{default:e}}},,,,,function(e){e.exports=[{name:"Smileys & People",emoji_names:["grinning","grin","joy","rolling_on_the_floor_laughing","smiley","smile","sweat_smile","laughing","wink","blush","yum","sunglasses","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","relaxed","slightly_smiling_face","hugging_face","star-struck","thinking_face","face_with_raised_eyebrow","neutral_face","expressionless","no_mouth","face_with_rolling_eyes","smirk","persevere","disappointed_relieved","open_mouth","zipper_mouth_face","hushed","sleepy","tired_face","sleeping","relieved","stuck_out_tongue","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","drooling_face","unamused","sweat","pensive","confused","upside_down_face","money_mouth_face","astonished","white_frowning_face","slightly_frowning_face","confounded","disappointed","worried","triumph","cry","sob","frowning","anguished","fearful","weary","exploding_head","grimacing","cold_sweat","scream","flushed","zany_face","dizzy_face","rage","angry","face_with_symbols_on_mouth","mask","face_with_thermometer","face_with_head_bandage","nauseated_face","face_vomiting","sneezing_face","innocent","face_with_cowboy_hat","clown_face","lying_face","shushing_face","face_with_hand_over_mouth","face_with_monocle","nerd_face","smiling_imp","imp","japanese_ogre","japanese_goblin","skull","skull_and_crossbones","ghost","alien","space_invader","robot_face","hankey","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","see_no_evil","hear_no_evil","speak_no_evil","baby","child","boy","girl","adult","man","woman","older_adult","older_man","older_woman","male-doctor","female-doctor","male-student","female-student","male-teacher","female-teacher","male-judge","female-judge","male-farmer","female-farmer","male-cook","female-cook","male-mechanic","female-mechanic","male-factory-worker","female-factory-worker","male-office-worker","female-office-worker","male-scientist","female-scientist","male-technologist","female-technologist","male-singer","female-singer","male-artist","female-artist","male-pilot","female-pilot","male-astronaut","female-astronaut","male-firefighter","female-firefighter","male-police-officer","female-police-officer","male-detective","female-detective","male-guard","female-guard","male-construction-worker","female-construction-worker","prince","princess","man-wearing-turban","woman-wearing-turban","man_with_gua_pi_mao","person_with_headscarf","bearded_person","blond-haired-man","blond-haired-woman","man_in_tuxedo","bride_with_veil","pregnant_woman","breast-feeding","angel","santa","mrs_claus","female_mage","male_mage","female_fairy","male_fairy","female_vampire","male_vampire","mermaid","merman","female_elf","male_elf","female_genie","male_genie","female_zombie","male_zombie","man-frowning","woman-frowning","man-pouting","woman-pouting","man-gesturing-no","woman-gesturing-no","man-gesturing-ok","woman-gesturing-ok","man-tipping-hand","woman-tipping-hand","man-raising-hand","woman-raising-hand","man-bowing","woman-bowing","man-facepalming","woman-facepalming","man-shrugging","woman-shrugging","man-getting-massage","woman-getting-massage","man-getting-haircut","woman-getting-haircut","man-walking","woman-walking","man-running","woman-running","dancer","man_dancing","man-with-bunny-ears-partying","woman-with-bunny-ears-partying","woman_in_steamy_room","man_in_steamy_room","woman_climbing","man_climbing","woman_in_lotus_position","man_in_lotus_position","bath","sleeping_accommodation","man_in_business_suit_levitating","speaking_head_in_silhouette","bust_in_silhouette","busts_in_silhouette","fencer","horse_racing","skier","snowboarder","man-golfing","woman-golfing","man-surfing","woman-surfing","man-rowing-boat","woman-rowing-boat","man-swimming","woman-swimming","man-bouncing-ball","woman-bouncing-ball","man-lifting-weights","woman-lifting-weights","man-biking","woman-biking","man-mountain-biking","woman-mountain-biking","racing_car","racing_motorcycle","man-cartwheeling","woman-cartwheeling","man-wrestling","woman-wrestling","man-playing-water-polo","woman-playing-water-polo","man-playing-handball","woman-playing-handball","man-juggling","woman-juggling","couple","two_men_holding_hands","two_women_holding_hands","woman-kiss-man","man-kiss-man","woman-kiss-woman","woman-heart-man","man-heart-man","woman-heart-woman","man-woman-boy","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-boy","man-boy-boy","man-girl","man-girl-boy","man-girl-girl","woman-boy","woman-boy-boy","woman-girl","woman-girl-boy","woman-girl-girl","selfie","muscle","point_left","point_right","point_up","point_up_2","middle_finger","point_down","v","crossed_fingers","spock-hand","the_horns","call_me_hand","raised_hand_with_fingers_splayed","hand","ok_hand","+1","-1","fist","facepunch","left-facing_fist","right-facing_fist","raised_back_of_hand","wave","i_love_you_hand_sign","writing_hand","clap","open_hands","raised_hands","palms_up_together","pray","handshake","nail_care","ear","nose","footprints","eyes","eye","eye-in-speech-bubble","brain","tongue","lips","kiss","cupid","heart","heartbeat","broken_heart","two_hearts","sparkling_heart","heartpulse","blue_heart","green_heart","yellow_heart","orange_heart","purple_heart","black_heart","gift_heart","revolving_hearts","heart_decoration","heavy_heart_exclamation_mark_ornament","love_letter","zzz","anger","bomb","boom","sweat_drops","dash","dizzy","speech_balloon","left_speech_bubble","right_anger_bubble","thought_balloon","hole","eyeglasses","dark_sunglasses","necktie","shirt","jeans","scarf","gloves","coat","socks","dress","kimono","bikini","womans_clothes","purse","handbag","pouch","shopping_bags","school_satchel","mans_shoe","athletic_shoe","high_heel","sandal","boot","crown","womans_hat","tophat","mortar_board","billed_cap","helmet_with_white_cross","prayer_beads","lipstick","ring","gem"]},{name:"Animals & Nature",emoji_names:["monkey_face","monkey","gorilla","dog","dog2","poodle","wolf","fox_face","cat","cat2","lion_face","tiger","tiger2","leopard","horse","racehorse","unicorn_face","zebra_face","deer","cow","ox","water_buffalo","cow2","pig","pig2","boar","pig_nose","ram","sheep","goat","dromedary_camel","camel","giraffe_face","elephant","rhinoceros","mouse","mouse2","rat","hamster","rabbit","rabbit2","chipmunk","hedgehog","bat","bear","koala","panda_face","feet","turkey","chicken","rooster","hatching_chick","baby_chick","hatched_chick","bird","penguin","dove_of_peace","eagle","duck","owl","frog","crocodile","turtle","lizard","snake","dragon_face","dragon","sauropod","t-rex","whale","whale2","dolphin","fish","tropical_fish","blowfish","shark","octopus","shell","crab","shrimp","squid","snail","butterfly","bug","ant","bee","beetle","cricket","spider","spider_web","scorpion","bouquet","cherry_blossom","white_flower","rosette","rose","wilted_flower","hibiscus","sunflower","blossom","tulip","seedling","evergreen_tree","deciduous_tree","palm_tree","cactus","ear_of_rice","herb","shamrock","four_leaf_clover","maple_leaf","fallen_leaf","leaves"]},{name:"Food & Drink",emoji_names:["grapes","melon","watermelon","tangerine","lemon","banana","pineapple","apple","green_apple","pear","peach","cherries","strawberry","kiwifruit","tomato","coconut","avocado","eggplant","potato","carrot","corn","hot_pepper","cucumber","broccoli","mushroom","peanuts","chestnut","bread","croissant","baguette_bread","pretzel","pancakes","cheese_wedge","meat_on_bone","poultry_leg","cut_of_meat","bacon","hamburger","fries","pizza","hotdog","sandwich","taco","burrito","stuffed_flatbread","egg","fried_egg","shallow_pan_of_food","stew","bowl_with_spoon","green_salad","popcorn","canned_food","bento","rice_cracker","rice_ball","rice","curry","ramen","spaghetti","sweet_potato","oden","sushi","fried_shrimp","fish_cake","dango","dumpling","fortune_cookie","takeout_box","icecream","shaved_ice","ice_cream","doughnut","cookie","birthday","cake","pie","chocolate_bar","candy","lollipop","custard","honey_pot","baby_bottle","glass_of_milk","coffee","tea","sake","champagne","wine_glass","cocktail","tropical_drink","beer","beers","clinking_glasses","tumbler_glass","cup_with_straw","chopsticks","knife_fork_plate","fork_and_knife","spoon","hocho","amphora"]},{name:"Travel & Places",emoji_names:["earth_africa","earth_americas","earth_asia","globe_with_meridians","world_map","japan","snow_capped_mountain","mountain","volcano","mount_fuji","camping","beach_with_umbrella","desert","desert_island","national_park","stadium","classical_building","building_construction","house_buildings","cityscape","derelict_house_building","house","house_with_garden","office","post_office","european_post_office","hospital","bank","hotel","love_hotel","convenience_store","school","department_store","factory","japanese_castle","european_castle","wedding","tokyo_tower","statue_of_liberty","church","mosque","synagogue","shinto_shrine","kaaba","fountain","tent","foggy","night_with_stars","sunrise_over_mountains","sunrise","city_sunset","city_sunrise","bridge_at_night","hotsprings","milky_way","carousel_horse","ferris_wheel","roller_coaster","barber","circus_tent","performing_arts","frame_with_picture","art","slot_machine","steam_locomotive","railway_car","bullettrain_side","bullettrain_front","train2","metro","light_rail","station","tram","monorail","mountain_railway","train","bus","oncoming_bus","trolleybus","minibus","ambulance","fire_engine","police_car","oncoming_police_car","taxi","oncoming_taxi","car","oncoming_automobile","blue_car","truck","articulated_lorry","tractor","bike","scooter","motor_scooter","busstop","motorway","railway_track","fuelpump","rotating_light","traffic_light","vertical_traffic_light","construction","octagonal_sign","anchor","boat","canoe","speedboat","passenger_ship","ferry","motor_boat","ship","airplane","small_airplane","airplane_departure","airplane_arriving","seat","helicopter","suspension_railway","mountain_cableway","aerial_tramway","satellite","rocket","flying_saucer","bellhop_bell","door","bed","couch_and_lamp","toilet","shower","bathtub","hourglass","hourglass_flowing_sand","watch","alarm_clock","stopwatch","timer_clock","mantelpiece_clock","clock12","clock1230","clock1","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","clock10","clock1030","clock11","clock1130","new_moon","waxing_crescent_moon","first_quarter_moon","moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","crescent_moon","new_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","thermometer","sunny","full_moon_with_face","sun_with_face","star","star2","stars","cloud","partly_sunny","thunder_cloud_and_rain","mostly_sunny","barely_sunny","partly_sunny_rain","rain_cloud","snow_cloud","lightning","tornado","fog","wind_blowing_face","cyclone","rainbow","closed_umbrella","umbrella","umbrella_with_rain_drops","umbrella_on_ground","zap","snowflake","snowman","snowman_without_snow","comet","fire","droplet","ocean"]},{name:"Activities",emoji_names:["jack_o_lantern","christmas_tree","fireworks","sparkler","sparkles","balloon","tada","confetti_ball","tanabata_tree","bamboo","dolls","flags","wind_chime","rice_scene","ribbon","gift","reminder_ribbon","admission_tickets","ticket","medal","trophy","sports_medal","first_place_medal","second_place_medal","third_place_medal","soccer","baseball","basketball","volleyball","football","rugby_football","tennis","8ball","bowling","cricket_bat_and_ball","field_hockey_stick_and_ball","ice_hockey_stick_and_puck","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","boxing_glove","martial_arts_uniform","goal_net","dart","golf","ice_skate","fishing_pole_and_fish","running_shirt_with_sash","ski","sled","curling_stone","video_game","joystick","game_die","spades","hearts","diamonds","clubs","black_joker","mahjong","flower_playing_cards"]},{name:"Objects",emoji_names:["mute","speaker","sound","loud_sound","loudspeaker","mega","postal_horn","bell","no_bell","musical_score","musical_note","notes","studio_microphone","level_slider","control_knobs","microphone","headphones","radio","saxophone","guitar","musical_keyboard","trumpet","violin","drum_with_drumsticks","iphone","calling","phone","telephone_receiver","pager","fax","battery","electric_plug","computer","desktop_computer","printer","keyboard","three_button_mouse","trackball","minidisc","floppy_disk","cd","dvd","movie_camera","film_frames","film_projector","clapper","tv","camera","camera_with_flash","video_camera","vhs","mag","mag_right","microscope","telescope","satellite_antenna","candle","bulb","flashlight","izakaya_lantern","notebook_with_decorative_cover","closed_book","book","green_book","blue_book","orange_book","books","notebook","ledger","page_with_curl","scroll","page_facing_up","newspaper","rolled_up_newspaper","bookmark_tabs","bookmark","label","moneybag","yen","dollar","euro","pound","money_with_wings","credit_card","chart","currency_exchange","heavy_dollar_sign","email","e-mail","incoming_envelope","envelope_with_arrow","outbox_tray","inbox_tray","package","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","postbox","ballot_box_with_ballot","pencil2","black_nib","lower_left_fountain_pen","lower_left_ballpoint_pen","lower_left_paintbrush","lower_left_crayon","memo","briefcase","file_folder","open_file_folder","card_index_dividers","date","calendar","spiral_note_pad","spiral_calendar_pad","card_index","chart_with_upwards_trend","chart_with_downwards_trend","bar_chart","clipboard","pushpin","round_pushpin","paperclip","linked_paperclips","straight_ruler","triangular_ruler","scissors","card_file_box","file_cabinet","wastebasket","lock","unlock","lock_with_ink_pen","closed_lock_with_key","key","old_key","hammer","pick","hammer_and_pick","hammer_and_wrench","dagger_knife","crossed_swords","gun","bow_and_arrow","shield","wrench","nut_and_bolt","gear","compression","alembic","scales","link","chains","syringe","pill","smoking","coffin","funeral_urn","moyai","oil_drum","crystal_ball","shopping_trolley"]},{name:"Symbols",emoji_names:["atm","put_litter_in_its_place","potable_water","wheelchair","mens","womens","restroom","baby_symbol","wc","passport_control","customs","baggage_claim","left_luggage","warning","children_crossing","no_entry","no_entry_sign","no_bicycles","no_smoking","do_not_litter","non-potable_water","no_pedestrians","no_mobile_phones","underage","radioactive_sign","biohazard_sign","arrow_up","arrow_upper_right","arrow_right","arrow_lower_right","arrow_down","arrow_lower_left","arrow_left","arrow_upper_left","arrow_up_down","left_right_arrow","leftwards_arrow_with_hook","arrow_right_hook","arrow_heading_up","arrow_heading_down","arrows_clockwise","arrows_counterclockwise","back","end","on","soon","top","place_of_worship","atom_symbol","om_symbol","star_of_david","wheel_of_dharma","yin_yang","latin_cross","orthodox_cross","star_and_crescent","peace_symbol","menorah_with_nine_branches","six_pointed_star","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","twisted_rightwards_arrows","repeat","repeat_one","arrow_forward","fast_forward","black_right_pointing_double_triangle_with_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","arrow_backward","rewind","black_left_pointing_double_triangle_with_vertical_bar","arrow_up_small","arrow_double_up","arrow_down_small","arrow_double_down","double_vertical_bar","black_square_for_stop","black_circle_for_record","eject","cinema","low_brightness","high_brightness","signal_strength","vibration_mode","mobile_phone_off","female_sign","male_sign","medical_symbol","recycle","fleur_de_lis","trident","name_badge","beginner","o","white_check_mark","ballot_box_with_check","heavy_check_mark","heavy_multiplication_x","x","negative_squared_cross_mark","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","curly_loop","loop","part_alternation_mark","eight_spoked_asterisk","eight_pointed_black_star","sparkle","bangbang","interrobang","question","grey_question","grey_exclamation","exclamation","wavy_dash","copyright","registered","tm","hash","keycap_star","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","100","capital_abcd","abcd","1234","symbols","abc","a","ab","b","cl","cool","free","information_source","id","m","new","ng","o2","ok","parking","sos","up","vs","koko","sa","u6708","u6709","u6307","ideograph_advantage","u5272","u7121","u7981","accept","u7533","u5408","u7a7a","congratulations","secret","u55b6","u6e80","black_small_square","white_small_square","white_medium_square","black_medium_square","white_medium_small_square","black_medium_small_square","black_large_square","white_large_square","large_orange_diamond","large_blue_diamond","small_orange_diamond","small_blue_diamond","small_red_triangle","small_red_triangle_down","diamond_shape_with_a_dot_inside","radio_button","black_square_button","white_square_button","white_circle","black_circle","red_circle","large_blue_circle"]},{name:"Flags",emoji_names:["checkered_flag","triangular_flag_on_post","crossed_flags","waving_black_flag","waving_white_flag","rainbow-flag","flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","fr","flag-ga","gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","it","flag-je","flag-jm","flag-jo","jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-un","us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw","flag-england","flag-scotland","flag-wales"]},{name:"Skin Tones",emoji_names:["skin-tone-2","skin-tone-3","skin-tone-4","skin-tone-5","skin-tone-6"]}]},,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"f",function(){return o});r.d(t,"d",function(){return l});r.d(t,"c",function(){return c});r.d(t,"e",function(){return u});r.d(t,"h",function(){return d});r.d(t,"a",function(){return p});r.d(t,"g",function(){return m});var a=r(129);var n=r(22);var i=r(25);var s=Object(n["a"])("set password for primary owner",function(e,t,r){var a=r.password;return e(Object(i["a"])({method:"users.changePassword",args:{password:a}}))});s.propTypes={password:a["b"].string};var o=Object(n["a"])("Check to see if Primary Owner's email domain is whitelist-able",function(e,t,r){var a=r.domain;return e(Object(i["a"])({method:"signup.checkSignupDomains",args:{signup_domains:a}}))});o.propTypes={domain:a["b"].string};var l=Object(n["a"])("set workspace name",function(e,t,r){var a=r.workspaceName;return e(Object(i["a"])({method:"team.changeInfo",args:{name:a}}))});l.propTypes={workspaceName:a["b"].string};var c=Object(n["a"])("set workspace domain",function(e,t,r){var a=r.workspaceDomain;return e(Object(i["a"])({method:"team.changeInfo",args:{url:a}}))});c.propTypes={workspaceDomain:a["b"].string};var u=Object(n["a"])("Checks the complexity of a password",function(e,t,r){var a=r.password;return e(Object(i["a"])({method:"signup.checkPasswordComplexity",args:{password:a}}))});u.propTypes={password:a["b"].string};var d=Object(n["a"])("Set multiple team prefs via API",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.prefs;var n=JSON.stringify(a);return e(Object(i["a"])({method:"team.prefs.set",args:{prefs:n}}))});d.propTypes={prefs:a["b"].object};var p=Object(n["a"])("Gets the list of workflows for this user",function(e,t,r){var a=r.onlyActive,n=void 0===a||a;return e(Object(i["a"])({method:"users.workflows.list",args:{only_active:n}}))});p.propTypes={onlyActive:a["b"].bool};var m=Object(n["a"])("Gets the list of workflows for this user",function(e,t,r){var a=r.userTaskId;return e(Object(i["a"])({method:"users.workflows.tasks.completed",args:{user_task_id:a}}))});m.propTypes={userTaskId:a["b"].number}},,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(4);var n=r(180);var i=r(37);var s=r(90);var o=r(979);var l=r(699);var c=Object(a["e"])("Clear the search input, resetting the editable query and ending the search and query sessions",function(e,t){var r=t();e(Object(n["setSearchInputBoxUserQuery"])({textyString:""}));e(Object(i["setInterfaceMode"])({interfaceMode:i["interfaceModes"].EDIT}));e(Object(s["resetEditableRequest"])());e(Object(i["setDefaultTab"])());e(Object(o["a"])());if(!Object(i["getVisible"])(r)){e(Object(l["endSearchSession"])());var a=Object(i["getSessionTimeoutId"])(r);if(a){clearTimeout(a);e(Object(i["setSessionTimeoutId"])({sessionTimeoutId:null}))}}});c.propTypes=null;t["a"]=c},function(e,t,r){"use strict";var a=r(4);var n=r(63);var i=r(167);var s=r(242);var o=Object(a["e"])("Clear the search legacy input",function(e,t){if(Object(i["b"])(t())||Object(n["a"])())return;var r=window.$&&window.$("#search_terms");r&&Object(s["k"])(r,"")});o.propTypes=null;t["a"]=o},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(1);var h=r.n(m);var f=r(129);var v=r(14);var b=r(15);var g=r.n(b);var _=r(2);var y=r.n(_);var k=r(72);var O=r(78);var E=r(497);var w=r(667);var C=r(876);var S={file:k["a"].File().isRequired,fileFromRedux:k["a"].File().isRequired,index:f["b"].number,clogLinkClick:f["b"].func,className:f["b"].string,fullWidth:f["b"].bool,onClick:f["b"].func};var j={index:null,clogLinkClick:_["noop"],className:null,fullWidth:false,onClick:_["noop"]};var I=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}l()(t,[{key:"onClick",value:function e(t){t.preventDefault();t.stopPropagation();t.nativeEvent.stopImmediatePropagation();this.props.onClick(t,{file:this.props.file,index:this.props.index})}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.fileFromRedux,i=t.clogLinkClick,s=t.fullWidth;var o=g()("p-search_file",this.props.className);var l=a&&a.title;var c=a&&a.name;var u=n()({},a,{title:r.search_title||r.title||l,name:r.search_name||r.name||c});return h.a.createElement(E["a"],{file:u,className:o,fullWidth:s,clogLinkClick:i},h.a.createElement(w["a"],{file:u,onClick:this.onClick},h.a.createElement(C["a"],{file:u,excludeTime:true})))}}]);return t}(m["PureComponent"]);I.displayName="SearchFile";I.defaultProps=j;var T=function e(t,r){var a=r.file;return{fileFromRedux:a?Object(O["getFileById"])(t,a.id):null}};t["a"]=Object(v["connect"])(T)(I)},,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return u});r.d(t,"d",function(){return d});r.d(t,"c",function(){return p});r.d(t,"b",function(){return m});var a=r(35);var n=r.n(a);var i=r(113);var s=r(692);var o=r(171);var l=r(10);var c=new l["b"]("do_not_disturb");var u=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.currentTime,o=void 0===a?n()().unix():a;var l=Object(i["a"])(o);var c=Object(i["a"])(t);var u=Math.ceil(Object(s["a"])(c,l));return u};var d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.time,a=void 0===r?"09:00":r;var i=n()().add(1,"days").format("YYYY-MM-DD");var s=n()(i+" "+a).unix();return u(s)};var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.time,a=void 0===r?"09:00":r;var i=n()().add(1,"week").startOf("isoWeek").format("YYYY-MM-DD");var s=n()(i+" "+a).unix();return u(s)};var m=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.do24hrTime,i=void 0!==a&&a,s=r.today,l=void 0===s?n()().format("YYYY-MM-DD"):s,u=r.tomorrow,d=void 0===u?n()().add(1,"day").format("YYYY-MM-DD"):u,p=r.featureBetterSnooze,m=void 0!==p&&p;if(!m)return"";var h=Object(o["l"])(t,{do24hrTime:i});var f=Object(o["i"])(t,{omitTime:true});if(f===l)return c.t("Notifications paused until {time}",{time:h});if(f===d)return c.t("Notifications paused until tomorrow at {time}",{time:h});return c.t("Notifications paused until {date} at {time}",{date:n()(f).format("dddd, MMMM Do"),time:h})}},,function(e,t,r){"use strict";r.d(t,"e",function(){return s});r.d(t,"f",function(){return o});r.d(t,"c",function(){return l});r.d(t,"a",function(){return c});r.d(t,"b",function(){return u});r.d(t,"g",function(){return d});r.d(t,"d",function(){return p});var a=r(2);var n=r.n(a);var i=r(13);var s=Object(i["c"])("TS.ui.apps_browser.routeAppOpen",n.a.noop);var o=Object(i["c"])("TS.ui.apps_browser.showAppTutorial",n.a.noop);var l=Object(i["c"])("TS.ui.apps_browser.canAppBeAdded",n.a.noop);var c=Object(i["c"])("TS.ui.apps_browser.addAppToChannel",n.a.noop);var u=Object(i["c"])("TS.ui.apps_browser.buildAddAppsTitle",n.a.noop);var d=Object(i["c"])("TS.ui.apps_browser.startAddApps",n.a.noop);var p=Object(i["c"])("TS.ui.apps_browser.ensureAppMembershipIsKnown",n.a.noop)},,,,function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return s});var a=r(13);var n=Object(a["c"])("TS.client.unread.bulk_unread_count_change_sig.dispatch");var i=Object(a["c"])("TS.client.unread.legacyUpdateSortOrder");var s=Object(a["c"])("TS.client.unread.reload")},,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(129);var h=r(1);var f=r.n(h);var v=r(15);var b=r.n(v);var g=r(484);var _=r.n(g);var y=r(2);var k=r(2086);var O=r(3287);var E=r(10);var w=r(92);function C(e,t){return e<t}function S(e){var t=e.sluggifyEnabled,r=e.sluggifyDelimiter,a=e.sluggifyKeyName,n=e.single;if(!t||!r||!a||n)return false;return true}function j(e){return void 0!==e.slugId}function I(e,t){var r=t.canSlug,a=t.noDefaultSelection;var n=[];var i=[];var s={};e.forEach(function(e){var t=e;if(r&&j(t)){i.push(t);return}n.push(t);s[t.id]=t;if(t.group||t.children&&t.children.length){t.group=true;t.children.forEach(function(e){var r=e;r.isChild=true;r.parentId=t.id;n.push(r);s[r.id]=r;e.preselected&&!a&&i.push(r)})}t.preselected&&!a&&i.push(t)});return{currentItems:n,itemMapById:s,preselected:i}}var T=r(41);var N=new E["b"]("channel_options");var A={active:m["b"].bool,dataQaPrefix:m["b"].string,disabled:m["b"].bool,item:m["b"].object,onClick:m["b"].func,onMouseLeave:m["b"].func,onMouseMove:m["b"].func,selected:m["b"].bool,style:m["b"].object,template:m["b"].func,customClasses:m["b"].string};var R={active:false,dataQaPrefix:"lfs",disabled:false,item:{},onClick:y["noop"],onMouseLeave:y["noop"],onMouseMove:y["noop"],selected:false,style:"",template:function e(t){return t.label},customClasses:""};var M=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickHandler=r.onClickHandler.bind(r);return r}l()(t,[{key:"onClickHandler",value:function e(t){t.preventDefault();t.stopPropagation();if(this.props.disabled)return;this.props.onClick(this.props.item)}},{key:"render",value:function e(){var t=this.props.item;var r=b()("c-lazy_filter_select__item",{"c-lazy_filter_select__item--active":this.props.active,"c-lazy_filter_select__item--selected":this.props.selected,"c-lazy_filter_select__item--child":t.isChild,"c-lazy_filter_select__item--group":t.group,"c-lazy_filter_select__item--disabled":this.props.disabled},this.props.customClasses);var a="lfs-item-"+t.id;var n=this.props.dataQaPrefix+"-item-"+t.id;var i=f.a.createElement("div",{className:r,"data-id":t.id,"data-qa":n,id:a,onClick:this.onClickHandler,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,role:"option",style:this.props.style,tabIndex:"-1",key:"list-item-"+t.id},this.props.template(t));if(this.props.disabled){var s=N.t("Cannot be removed");return f.a.createElement(T["d"],{position:"top",tip:s},i)}return i}}]);return t}(h["PureComponent"]);M.displayName="LazyFilterSelectListItem";var P=M;M.defaultProps=R;var x=new E["b"]("channel_options");var D={dataQaPrefix:m["b"].string,disabled:m["b"].bool,highlighted:m["b"].bool,item:m["b"].object,onClick:m["b"].func,onHighlight:m["b"].func,single:m["b"].bool,template:m["b"].func};var F={dataQaPrefix:"lfs",disabled:false,highlighted:false,item:{},onClick:y["noop"],onHighlight:y["noop"],single:false,template:function e(t){return t.label}};var L=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickHandler=r.onClickHandler.bind(r);return r}l()(t,[{key:"onClickHandler",value:function e(t){if(this.props.disabled||this.props.single)return;var r=t.clientX;var a=t.target.getBoundingClientRect();t.stopPropagation();r>a.width+a.left?this.props.onClick(this.props.item):this.props.onHighlight(this.props.item)}},{key:"render",value:function e(){var t=this.props.item;var r=b()("c-lazy_filter_select__token","c-lazy_filter_select__token--selected",{"c-lazy_filter_select__token--single":this.props.single,"c-lazy_filter_select__token--highlighted":this.props.highlighted,"c-lazy_filter_select__token--disabled":this.props.disabled});var a=t.slugId?t.slugId:t.id;var n="lfs-token-"+a;var i=this.props.dataQaPrefix+"-item-"+a;var s=f.a.createElement("div",{className:r,"data-id":a,"data-qa":i,id:n,key:"token-"+t.id,onClick:this.onClickHandler,tabIndex:-1},this.props.template(t));if(this.props.disabled){var o=x.t("Cannot be removed");return f.a.createElement(T["d"],{position:"top",tip:o},s)}return s}}]);return t}(h["PureComponent"]);L.displayName="LazyFilterSelectToken";var B=L;L.defaultProps=F;var U=r(1926);var q=new E["b"]("lazy_filter_select");var G={default:"normal",filter_in_list:"filter_in_list",normal:"normal",small:"small"};var H={allowItemUnselect:m["b"].bool,allowListPositionAbove:m["b"].bool,alwaysVisible:m["b"].bool,approxDividerHeight:m["b"].number,approxItemHeight:m["b"].number,dataPromise:m["b"].func,dataQaPrefix:m["b"].string,disabled:m["b"].bool,dividerTemplate:m["b"].func,filter:m["b"].func,forceListAbove:m["b"].bool,items:m["b"].array,listItemClass:m["b"].func,maxHeightOfList:m["b"].number,maxSelectedItems:m["b"].number,noDefaultSelection:m["b"].bool,noResultsTemplate:m["b"].func,onInputBlur:m["b"].func,onInputFocus:m["b"].func,onItemAdded:m["b"].func,onItemRemoved:m["b"].func,onKeyDown:m["b"].func,onKeyUp:m["b"].func,onListHidden:m["b"].func,onListShown:m["b"].func,onMaxItemsSelected:m["b"].func,onReady:m["b"].func,onValueChange:m["b"].func,placeholderText:m["b"].string,restrictPreselectedItemRemoval:m["b"].bool,scrollThreshold:m["b"].number,single:m["b"].bool,sluggifyEnabled:m["b"].bool,sluggifyDelimiter:m["b"].any,sluggifyKeyName:m["b"].string,sluggifyValidator:m["b"].func,styling:m["b"].oneOf(Object(y["values"])(G)),tabToNav:m["b"].bool,template:m["b"].func,tokenTemplate:m["b"].func,hideList:m["b"].bool,preventScroll:m["b"].bool,setSelected:m["b"].bool};var W={alwaysVisible:false,allowItemUnselect:true,allowListPositionAbove:false,approxDividerHeight:30,approxItemHeight:30,dataPromise:null,dataQaPrefix:"lfs",disabled:false,dividerTemplate:function e(t){return t.label},filter:function e(t,r){return t.toLowerCase().indexOf(r)>-1},forceListAbove:false,items:[],listItemClass:y["noop"],maxHeightOfList:250,maxSelectedItems:Infinity,noDefaultSelection:false,noResultsTemplate:function e(t){return q.rt("No items matched <strong>{query}</strong>",{query:t})},onInputBlur:y["noop"],onInputFocus:y["noop"],onItemAdded:y["noop"],onItemRemoved:y["noop"],onKeyDown:y["noop"],onKeyUp:y["noop"],onListHidden:y["noop"],onListShown:y["noop"],onMaxItemsSelected:y["noop"],onReady:y["noop"],onValueChange:y["noop"],placeholderText:q.t("Choose an option\u2026"),restrictPreselectedItemRemoval:false,scrollThreshold:1e3,single:false,sluggifyEnabled:false,sluggifyDelimiter:null,sluggifyKeyName:"",sluggifyValidator:y["noop"],styling:G.default,tabToNav:false,template:function e(t){return t.label},tokenTemplate:function e(t){return t.label},hideList:false,preventScroll:void 0,setSelected:true};var V=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.fetchInitialList=r.fetchInitialList.bind(r);r.filterItems=r.filterItems.bind(r);r.getSelectedValue=r.getSelectedValue.bind(r);r.handlePromiseReturn=r.handlePromiseReturn.bind(r);r.hideList=r.hideList.bind(r);r.isRunningPromisePending=r.isRunningPromisePending.bind(r);r.listItemRenderer=r.listItemRenderer.bind(r);r.listNoRowsRenderer=r.listNoRowsRenderer.bind(r);r.onBlurInput=r.onBlurInput.bind(r);r.onChangeInput=r.onChangeInput.bind(r);r.onClickContainer=r.onClickContainer.bind(r);r.onClickItem=r.onClickItem.bind(r);r.onFocusInput=r.onFocusInput.bind(r);r.onFocusInputContainer=r.onFocusInputContainer.bind(r);r.onKeyDownInput=r.onKeyDownInput.bind(r);r.onKeyUpInput=r.onKeyUpInput.bind(r);r.onListScroll=r.onListScroll.bind(r);r.onMouseDownListContainer=r.onMouseDownListContainer.bind(r);r.onMouseLeaveContainer=r.onMouseLeaveContainer.bind(r);r.onMouseLeaveItem=r.onMouseLeaveItem.bind(r);r.onMouseMoveItem=r.onMouseMoveItem.bind(r);r.onMouseUpListContainer=r.onMouseUpListContainer.bind(r);r.onTokenClick=r.onTokenClick.bind(r);r.onTokenHighlight=r.onTokenHighlight.bind(r);r.runQuery=r.runQuery.bind(r);r.setListRef=r.setListRef.bind(r);r.showList=r.showList.bind(r);r.inputIsFocused=r.props.alwaysVisible;r.mouse={};r.pageNumber=1;r.preventBlur=false;r.slugIdCounter=0;r.itemMapById={};var a=[];var n=[];if(!r.props.dataPromise){var i=r.processItems(r.props.items);a=i.currentItems;n=i.selected}r.state={activeItemKey:null,currentItems:a,cursorHighlightedItem:null,listVisible:r.props.alwaysVisible,previousVal:"",runningPromise:null,selected:n};return r}l()(t,[{key:"componentDidMount",value:function e(){this.props.dataPromise&&this.fetchInitialList();this.inputIsFocused&&this.input.focus();this.props.onReady(this)}},{key:"componentDidUpdate",value:function e(t){this.inputIsFocused&&this.input.focus();t.hideList&&!this.props.hideList&&this.showList();this.props.hideList&&this.hideList()}},{key:"onClickContainer",value:function e(){this.input.focus();this.inputIsFocused=true;this.showList()}},{key:"onKeyDownInput",value:function e(t){if(this.props.disabled)return;var r=false;switch(_()(t)){case"down":t.preventDefault();r=true;this.selectDown();break;case"up":t.preventDefault();r=true;this.selectUp();break;case"enter":t.preventDefault();r=true;this.selectActiveItem();break;case"del":case"delete":case"backspace":if(""===this.state.previousVal){t.preventDefault();r=true;this.state.cursorHighlightedItem?this.removeSelected(this.state.cursorHighlightedItem):this.removeLastSelected()}break;case"tab":if(this.props.tabToNav){t.preventDefault();r=true;t.shiftKey?this.selectUp():this.selectDown()}break;case"esc":this.hideList();this.input.blur();break;default:break}this.props.onKeyDown(t,r)}},{key:"onKeyUpInput",value:function e(t){if(this.props.disabled)return;var r=false;var a=t.target,n=a.selectionStart,i=a.selectionEnd;var s=n===i&&0===n;switch(_()(t)){case"left":s&&this.maybeHighlightPreviousSelectedItem();break;case"right":s&&this.state.cursorHighlightedItem&&this.maybeHightlightNextSelectedItem();break;default:this.resetHighlightedSelectedItem();break}this.props.onKeyUp(t,r)}},{key:"onMouseDownListContainer",value:function e(){this.preventBlur=true}},{key:"onMouseLeaveContainer",value:function e(){this.preventBlur=false}},{key:"onMouseMoveItem",value:function e(t){if(this.props.disabled)return;var r=this.mouse;var a={lastX:t.clientX,lastY:t.clientY};if(Object(y["isEqual"])(r,a))return;var n=t.target.getAttribute("data-id");this.mouse=a;this.setState(function(){return{activeItemKey:n}});this.List.forceUpdateGrid()}},{key:"onMouseLeaveItem",value:function e(t){var r=null;var a=this.state.mouse;var n={lastX:t.clientX,lastY:t.clientY};if(Object(y["isEqual"])(a,n))return;this.setState(function(){return{activeItemKey:r}})}},{key:"onMouseUpListContainer",value:function e(){this.preventBlur&&this.input.focus()}},{key:"onBlurInput",value:function e(){this.preventBlur||this.hideList();this.inputIsFocused=false;this.props.onInputBlur()}},{key:"onFocusInput",value:function e(){if(this.inputIsFocused||this.props.disabled)return;this.showList();this.props.onInputFocus()}},{key:"onFocusInputContainer",value:function e(){this.input.focus({preventScroll:this.props.preventScroll});this.onFocusInput()}},{key:"onChangeInput",value:function e(t){var r=this;var a=null;var n=t.target.value;this.pageNumber=1;var i=void 0;if(S(this.props)&&n.match(this.props.sluggifyDelimiter)){var s=n.split(this.props.sluggifyDelimiter);s.forEach(function(e){e.length&&r.addUserCreatedSlugFromString(e)});var o=false;var l=this.processItems(this.props.items,o);i=l.currentItems;n=""}else i=this.runQuery(n);this.setState(function(){return{activeItemKey:a,currentItems:i,previousVal:n}});this.List.forceUpdateGrid();this.List.scrollToRow(0)}},{key:"onClickItem",value:function e(t){if(this.props.disabled)return;if(!this.isItemSelectable(t.id))return;var r=this.state.selected.slice();if(!this.props.single&&this.props.allowItemUnselect&&this.isItemSelected(t)){this.removeSelected(t);return}if(!C(this.state.selected.length,this.props.maxSelectedItems))return;this.props.single&&(r=[]);r.push(t);var a=!this.props.single||this.props.alwaysVisible;this.inputIsFocused=!this.props.single;var n="";this.preventBlur=false;this.setState(function(){return{listVisible:a,previousVal:n,selected:r}});this.List.forceUpdateGrid();this.props.onItemAdded(t);this.props.onValueChange(r);r.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}},{key:"onListScroll",value:function e(t){var r=t.scrollTop;if(this.props.dataPromise){var a=this.calculateListHeight();var n=a-r;n<=this.props.scrollThreshold&&r>0&&this.loadMoreItems()}}},{key:"onTokenClick",value:function e(t){this.removeSelected(t)}},{key:"onTokenHighlight",value:function e(t){this.setState(function(e){var r=t;e.cursorHighlightedItem&&e.cursorHighlightedItem.id===t.id&&(r=null);return n()({},e,{cursorHighlightedItem:r})})}},{key:"getSelectedValue",value:function e(){return this.state.selected}},{key:"setListRef",value:function e(t){this.List=t}},{key:"getItemById",value:function e(t){return this.itemMapById[t]||false}},{key:"maybeHightlightNextSelectedItem",value:function e(){var t=this.state.selected;if(!t.length)return;var r=this.state.cursorHighlightedItem;var a=0;if(r){a=Object(y["findIndex"])(t,function(e){return e.id===r.id&&e.slugId===r.slugId})+1;a>t.length&&(a=null)}if(null!==a){r=Object(y["findLast"])(t,function(e){return!e.group},a);Object(y["isEqual"])(this.state.cursorHighlightedItem,r)&&(r=null);r?this.setState(function(){return{cursorHighlightedItem:r}}):this.resetHighlightedSelectedItem()}else this.resetHighlightedSelectedItem()}},{key:"maybeHighlightPreviousSelectedItem",value:function e(){var t=this.state.selected;if(!t.length)return;var r=this.state.cursorHighlightedItem;var a=t.length-1;r&&(a=Object(y["findIndex"])(t,function(e){return e.id===r.id&&e.slugId===r.slugId})-1);if(a>=0){r=Object(y["findLast"])(t,function(e){return!e.group},a);r&&this.setState(function(){return{cursorHighlightedItem:r}})}}},{key:"resetHighlightedSelectedItem",value:function e(){this.setState(function(){return{cursorHighlightedItem:null}})}},{key:"handlePromiseReturn",value:function e(t){var r=t.items;this.setState(function(){return{runningPromise:null}});if(!r.length){this.List.forceUpdateGrid();return[]}t.replace_all_items||(r=Object(y["uniqBy"])(this.state.currentItems.concat(r),"id"));this.processItems(r,this.props.setSelected);return r}},{key:"isRunningPromisePending",value:function e(){return this.state.runningPromise&&this.state.runningPromise.isPending()}},{key:"addUserCreatedSlugFromString",value:function e(t){if(!S(this.props))return;if(!C(this.state.selected.length,this.props.maxSelectedItems))return;var r=t.trim();if(!r)return;var a={};a[this.props.sluggifyKeyName]=r;a.id=null;a.label=r;a.slugId=String(this.slugIdCounter);this.slugIdCounter+=1;var n=this.props.sluggifyValidator(a);if(n||"undefined"===typeof n){var i=this.state.selected.slice();i.push(a);var s="";this.setState(function(){return{previousVal:s,selected:i}});this.props.onItemAdded(a);this.props.onValueChange(i);i.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}}},{key:"removeUserCreatedSlug",value:function e(t){if(!S(this.props))return;var r=this.state.selected.slice();var a=Object(y["reject"])(r,function(e){return e.slugId===t.slugId});this.setState(function(){return{selected:a}});this.List.forceUpdateGrid();this.props.onItemRemoved(t);this.props.onValueChange(a)}},{key:"unsluggifySlug",value:function e(t){if(!S(this.props)||!j(t))return;var r=t.label;this.removeUserCreatedSlug(t);this.setState(function(){return{previousVal:r}})}},{key:"processItems",value:function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var a={canSlug:S(this.props),noDefaultSelection:this.props.noDefaultSelection};var n=I(t,a),i=n.currentItems,s=n.itemMapById,o=n.preselected;this.itemMapById=Object(y["merge"])(this.itemMapById,s);var l=this.state&&this.state.selected?this.state.selected:[];var c=Object(y["uniqBy"])(o.concat(l),"id");this.props.single&&c.length&&(c=c.slice(0,1));this.state&&(r?this.setState(function(){return{currentItems:i,selected:c}}):this.setState(function(){return{currentItems:i}}));return{currentItems:i,selected:c}}},{key:"isItemSelectable",value:function e(t){var r=this.getItemById(t);if(r.group)return false;if(r.preselected&&this.props.restrictPreselectedItemRemoval)return false;if(this.props.allowItemUnselect)return true;return!this.isItemSelected(r)}},{key:"isItemSelected",value:function e(t){return this.state.selected.filter(function(e){if(t.slugId)return e.slugId===t.slugId;return e.id===t.id}).length>0}},{key:"listItemRenderer",value:function e(t){var r=t.index,a=t.key,n=t.style;var i=this.state.currentItems[r]||{};var s=this.state.activeItemKey===i.id;var o=i.preselected&&this.props.restrictPreselectedItemRemoval||i.disabled;var l=this.isItemSelected(i);var c=i.group?this.props.dividerTemplate:this.props.template;var u=this.props.listItemClass(i);return f.a.createElement(P,{active:s,dataQaPrefix:this.props.dataQaPrefix,disabled:o,item:i,key:"rlfs-list-item-"+a,onClick:this.onClickItem,onMouseLeave:this.onMouseLeaveItem,onMouseMove:this.onMouseMoveItem,selected:l,style:n,template:c,customClasses:u})}},{key:"listNoRowsRenderer",value:function e(){if(this.isRunningPromisePending())return f.a.createElement("div",{className:"c-lazy_filter_select__status c-lazy_filter_select__status--loading"},f.a.createElement(w["a"],{size:"large",className:"inline_block"}));return f.a.createElement("div",{className:"c-lazy_filter_select__status"},this.props.noResultsTemplate(this.state.previousVal))}},{key:"calculateListHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r=this.props.maxHeightOfList;var a=this.state.currentItems.length;var n=this.props.approxItemHeight;var i=a*n;var s=30;if(t)return Math.min(Math.max(i,s),r);return i}},{key:"filterItems",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.previousVal;var a=r.toLowerCase();var n=this.props.items;var i=[];n.forEach(function(e){if(e.group){var r=e.children.filter(function(e){return t.props.filter(e.label,a)});r.length&&(i=i.concat(e,r))}else t.props.filter(e.label,a)&&i.push(e)});return i}},{key:"hideList",value:function e(){if(this.props.alwaysVisible)return;var t=false;this.setState(function(){return{listVisible:t}});this.props.onListHidden()}},{key:"loadMoreItems",value:function e(){if(!this.props.dataPromise)return this.state.currentItems;var t=this.state.runningPromise;this.isRunningPromisePending()&&t.cancel("Scrolling happened");this.pageNumber+=1;t=this.props.dataPromise(this.state.previousVal,this.pageNumber).then(this.handlePromiseReturn);this.setState(function(){return{runningPromise:t}});return t}},{key:"removeLastSelected",value:function e(){var t=this.state.selected.slice(-1)[0];if(S(this.props)&&j(t)){this.unsluggifySlug(t);return}this.removeSelected(t)}},{key:"removeSelected",value:function e(t){if(!t||t.disabled)return;var r=this.state.selected.slice();if(j(t)){this.removeUserCreatedSlug(t);return}var a=Object(y["reject"])(r,function(e){return e.id===t.id});var n=this.state.currentItems.map(function(e){var r=e;r.id===t.id&&(r.preselected=false);return r});this.setState(function(){return{currentItems:n,cursorHighlightedItem:null,selected:a}});this.List.forceUpdateGrid();this.props.onItemRemoved(t);this.props.onValueChange(a)}},{key:"fetchInitialList",value:function e(){var t=this;if(!this.props.dataPromise)return;var r=this.state.runningPromise;this.isRunningPromisePending()&&r.cancel("Uhhh ... ?");r=this.props.dataPromise("",this.pageNumber).then(function(e){var r=e.items;var a=t.processItems(r);var n=a.currentItems,i=a.selected;t.setState(function(){return{currentItems:n,selected:i,runningPromise:null}})});this.setState(function(){return{runningPromise:r}})}},{key:"runQuery",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.previousVal;if(this.props.dataPromise){var r=this.state.runningPromise;this.isRunningPromisePending()&&r.cancel("User entered more text");this.pageNumber=1;r=this.props.dataPromise(t,this.pageNumber).then(this.handlePromiseReturn);this.setState(function(){return{runningPromise:r}});return[]}return this.filterItems(t)}},{key:"selectDown",value:function e(){if(this.props.disabled)return;this.state.listVisible||this.showList();var t=this.state.currentItems;if(!t)return;var r=this.state.activeItemKey;var a=0;if(r){a=Object(y["findIndex"])(t,function(e){return e.id===r})+1;a>t.length&&(a=t.length)}var n=Object(y["find"])(t,function(e){return!e.group},a);if(n){r=n.id;a=Object(y["findIndex"])(t,function(e){return e.id===n.id});this.setState(function(){return{activeItemKey:r}});this.List.forceUpdateGrid();this.List.scrollToRow(a)}}},{key:"selectUp",value:function e(){if(this.props.disabled)return;this.state.listVisible||this.showList();var t=this.state.currentItems;if(!t)return;var r=this.state.activeItemKey;var a=t.length-1;if(r){a=Object(y["findIndex"])(t,function(e){return e.id===r})-1;a<0&&(a=0)}var n=Object(y["findLast"])(t,function(e){return!e.group},a);if(n){r=n.id;a=Object(y["findIndex"])(t,function(e){return e.id===n.id});this.setState(function(){return{activeItemKey:r}});this.List.forceUpdateGrid();this.List.scrollToRow(a)}}},{key:"selectActiveItem",value:function e(){var t=this.state.activeItemKey;if(!t)return;if(!C(this.state.selected.length,this.props.maxSelectedItems))return;if(!this.isItemSelectable(t))return;var r=this.getItemById(t);if(!this.props.single&&this.props.allowItemUnselect&&this.isItemSelected(r)){this.removeSelected(r);return}var a=this.state.selected.slice();this.props.single&&(a=[]);a.push(r);var n=!this.props.single;this.inputIsFocused=!this.props.single;var i="";this.preventBlur=false;this.setState(function(){return{listVisible:n,previousVal:i,selected:a}});this.List.forceUpdateGrid();this.props.onItemAdded(r);this.props.onValueChange(a);a.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}},{key:"showList",value:function e(){if(this.state.listVisible||this.props.disabled)return;!this.props.dataPromise||this.state.previousVal||this.state.currentItems.length||this.fetchInitialList();this.props.preventScroll||(this.inputIsFocused=true);var t=true;var r=this.state.previousVal;this.props.single&&!this.props.alwaysVisible&&(r="");this.setState(function(){return{listVisible:t,previousVal:r}});this.props.onListShown()}},{key:"renderSelected",value:function e(){var t=this;var r="";if(!(this.props.single&&this.state.listVisible)||this.props.alwaysVisible){var a=this.state.cursorHighlightedItem;r=this.state.selected.map(function(e){var r=e.id||e.slugId;var n=a&&a.id===e.id&&a.slugId===e.slugId;var i=e.preselected&&t.props.restrictPreselectedItemRemoval||e.disabled;return f.a.createElement(B,{dataQaPrefix:t.props.dataQaPrefix,disabled:i,highlighted:n,item:e,key:"rlfs-token-"+r,onClick:t.onTokenClick,onHighlight:t.onTokenHighlight,single:t.props.single,template:t.props.tokenTemplate})})}return r}},{key:"render",value:function e(){var t=this;var r=b()("c-lazy_filter_select","c-lazy_filter_select--"+this.props.styling,{"c-lazy_filter_select--single":this.props.single});var a=b()("c-lazy_filter_select__input_container",{"c-lazy_filter_select__input_container--active":this.inputIsFocused,"c-lazy_filter_select__input_container--value":this.state.selected.length});var i=b()("c-lazy_filter_select__list_container",{"c-lazy_filter_select__list_container--visible":this.state.listVisible,"c-lazy_filter_select__list_container--above":this.props.forceListAbove});var s=this.props.dataQaPrefix+"-value";var o=this.props.dataQaPrefix+"-input-value";var l={"aria-autocomplete":"list","aria-owns":"c-lazy_filter_select__list_container","aria-expanded":this.state.listVisible,role:"combobox"};if(this.state.cursorHighlightedItem){var c=this.state.cursorHighlightedItem;var u=c.id||c.slugId;l["aria-activedescendant"]="lfs-token-"+u}else this.state.activeItemKey&&(l["aria-activedescendant"]="lfs-item-"+this.state.activeItemKey);var d=this.state.selected.length?"":this.props.placeholderText;var p={};this.state.previousVal.length?p.size=this.state.previousVal.length+1:this.state.selected.length&&(p.size=1);return f.a.createElement("div",{className:r,"data-qa":this.props.dataQaPrefix,onClick:this.onClickContainer,onMouseLeave:this.onMouseLeaveContainer,role:"presentation"},f.a.createElement("div",{className:a,"data-qa":s,onFocus:this.onFocusInputContainer},f.a.createElement("div",{className:"c-lazy_filter_select__value"},this.renderSelected(),f.a.createElement("input",n()({},l,p,{className:"c-lazy_filter_select__input c-input_text","data-qa":o,onBlur:this.onBlurInput,onChange:this.onChangeInput,onFocus:this.onFocusInput,onKeyDown:this.onKeyDownInput,onKeyUp:this.onKeyUpInput,placeholder:d,ref:function e(r){t.input=r},type:"text",value:this.state.previousVal})))),f.a.createElement(k["a"],null,function(e){var r=e.width;return f.a.createElement("div",{className:i,id:"c-lazy_filter_select__list_container",onMouseDown:t.onMouseDownListContainer,onMouseUp:t.onMouseUpListContainer,role:"listbox"},f.a.createElement("div",{className:"c-lazy_filter_select__list"},f.a.createElement(O["a"],{height:t.calculateListHeight(true),noRowsRenderer:t.listNoRowsRenderer,onScroll:t.onListScroll,ref:t.setListRef,rowCount:t.state.currentItems.length,rowHeight:t.props.approxItemHeight,rowRenderer:t.listItemRenderer,width:r-10})))}))}}]);return t}(h["PureComponent"]);V.displayName="LazyFilterSelect";var z=t["a"]=V;V.defaultProps=W},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){var a=r(1040),n=r(1786),i=r(1787);function s(e){var t=-1,r=null==e?0:e.length;this.__data__=new a;while(++t<r)this.add(e[t])}s.prototype.add=s.prototype.push=n;s.prototype.has=i;e.exports=s},function(e,t,r){var a=r(1769),n=r(1781),i=r(1783),s=r(1784),o=r(1785);function l(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var a=e[t];this.set(a[0],a[1])}}l.prototype.clear=a;l.prototype["delete"]=n;l.prototype.get=i;l.prototype.has=s;l.prototype.set=o;e.exports=l},function(e,t,r){var a=r(726),n=r(647);var i=a(n,"Map");e.exports=i},function(e,t){function r(e,t){return e.has(t)}e.exports=r},function(e,t){function r(e){var t=-1,r=Array(e.size);e.forEach(function(e){r[++t]=e});return r}e.exports=r},function(e,t,r){var a=r(648),n=r(1045);var i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function o(e,t){if(a(e))return false;var r=typeof e;if("number"==r||"symbol"==r||"boolean"==r||null==e||n(e))return true;return s.test(e)||!i.test(e)||null!=t&&e in Object(t)}e.exports=o},function(e,t,r){var a=r(771),n=r(725);var i="[object Symbol]";function s(e){return"symbol"==typeof e||n(e)&&a(e)==i}e.exports=s},function(e,t,r){"use strict";t.__esModule=true;var a=r(727);var n=C(a);var i=r(5);var s=C(i);var o=r(7);var l=C(o);var c=r(8);var u=C(c);var d=r(3);var p=C(d);var m=r(1);var h=C(m);var f=r(690);var v=C(f);var b=r(1348);var g=C(b);var _=r(1902);var y=C(_);var k=r(1346);var O=C(k);var E=r(1903);var w=C(E);function C(e){return e&&e.__esModule?e:{default:e}}function S(e,t,r){var a=e.nodeType,n=e.data,i=e.collectionLimit,s=e.circularCache,o=e.keyPath,l=e.postprocessValue,c=e.sortObjectKeys;var u=[];(0,y["default"])(a,n,c,i,t,r).forEach(function(t){if(t.to)u.push(h["default"].createElement(w["default"],(0,p["default"])({},e,{key:"ItemRange--"+t.from+"-"+t.to,from:t.from,to:t.to,renderChildNodes:S})));else{var r=t.key,a=t.value;var n=-1!==s.indexOf(a);var c=h["default"].createElement(O["default"],(0,p["default"])({},e,{postprocessValue:l,collectionLimit:i},{key:"Node--"+r,keyPath:[r].concat(o),value:l(a),circularCache:[].concat(s,[a]),isCircular:n,hideRoot:false}));false!==c&&u.push(c)}});return u}function j(e){var t=!(!e.shouldExpandNode||e.isCircular)&&e.shouldExpandNode(e.keyPath,e.data,e.level);return{expanded:t}}var I=function(e){(0,u["default"])(t,e);function t(r){(0,s["default"])(this,t);var a=(0,l["default"])(this,e.call(this,r));a.handleClick=function(){a.props.expandable&&a.setState({expanded:!a.state.expanded})};a.state=j(r);return a}t.prototype.componentWillReceiveProps=function e(t){var r=j(t);j(this.props).expanded!==r.expanded&&this.setState(r)};t.prototype.shouldComponentUpdate=function e(t,r){var a=this;return!!(0,n["default"])(t).find(function(e){return"circularCache"!==e&&("keyPath"===e?t[e].join("/")!==a.props[e].join("/"):t[e]!==a.props[e])})||r.expanded!==this.state.expanded};t.prototype.render=function e(){var t=this.props,r=t.getItemString,a=t.nodeTypeIndicator,n=t.nodeType,i=t.data,s=t.hideRoot,o=t.createItemString,l=t.styling,c=t.collectionLimit,u=t.keyPath,d=t.labelRenderer,m=t.expandable;var f=this.state.expanded;var v=f||s&&0===this.props.level?S((0,p["default"])({},this.props,{level:this.props.level+1})):null;var b=h["default"].createElement("span",l("nestedNodeItemType",f),a);var _=r(n,i,b,o(i,c));var y=[u,n,f,m];return s?h["default"].createElement("li",l.apply(void 0,["rootNode"].concat(y)),h["default"].createElement("ul",l.apply(void 0,["rootNodeChildren"].concat(y)),v)):h["default"].createElement("li",l.apply(void 0,["nestedNode"].concat(y)),m&&h["default"].createElement(g["default"],{styling:l,nodeType:n,expanded:f,onClick:this.handleClick}),h["default"].createElement("label",(0,p["default"])({},l.apply(void 0,[["label","nestedNodeLabel"]].concat(y)),{onClick:this.handleClick}),d.apply(void 0,y)),h["default"].createElement("span",(0,p["default"])({},l.apply(void 0,["nestedNodeItemString"].concat(y)),{onClick:this.handleClick}),_),h["default"].createElement("ul",l.apply(void 0,["nestedNodeChildren"].concat(y)),v))};return t}(h["default"].Component);I.propTypes={getItemString:v["default"].func.isRequired,nodeTypeIndicator:v["default"].any,nodeType:v["default"].string.isRequired,data:v["default"].any,hideRoot:v["default"].bool.isRequired,createItemString:v["default"].func.isRequired,styling:v["default"].func.isRequired,collectionLimit:v["default"].number,keyPath:v["default"].arrayOf(v["default"].oneOfType([v["default"].string,v["default"].number])).isRequired,labelRenderer:v["default"].func.isRequired,shouldExpandNode:v["default"].func,level:v["default"].number.isRequired,sortObjectKeys:v["default"].oneOfType([v["default"].func,v["default"].bool]),isCircular:v["default"].bool,expandable:v["default"].bool};I.defaultProps={data:[],circularCache:[],level:0,expandable:true};t["default"]=I},function(e,t){function r(e,t,r){return Math.min(Math.max(e,t),r)}e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(36);var f=r(14);var v=r(15);var b=r.n(v);var g=r(2);var _=r(72);var y=r(78);var k=r(202);var O=r(21);var E=r(3538);var w=r(61);var C=r(345);var S=r(10);var j=r(3498);var I=r(492);var T=r(121);var N=r(18);var A=r(926);var R=r(666);var M=r(1074);var P=r(2103);var x=new S["b"]("files");var D={msg:m["b"].object.isRequired,className:m["b"].string,file:_["a"].File(),isExpanded:m["b"].bool,expandPref:m["b"].bool,expandableKey:m["b"].string,setExpanded:m["b"].func,clogMessageClick:m["b"].func};var F={className:void 0,file:void 0,isExpanded:void 0,expandPref:true,expandableKey:void 0,setExpanded:g["noop"],clogMessageClick:m["b"].func};var L=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toggleExpanded=r.toggleExpanded.bind(r);r.clogMessageClick=r.clogMessageClick.bind(r);return r}s()(t,[{key:"clogMessageClick",value:function e(t){var r=this.props.msg;this.props.clogMessageClick({msg:r,payload:t})}},{key:"isExpanded",value:function e(){var t=this.props,r=t.file,a=t.isExpanded,n=t.expandPref;if(void 0!==a)return a;if("image"===Object(w["getFileType"])(r))return n;return true}},{key:"toggleExpanded",value:function e(){this.props.setExpanded({key:this.props.expandableKey,isExpanded:!this.isExpanded()})}},{key:"renderUploader",value:function e(){var t=this.props,r=t.msg,a=t.file;var n=Object(w["getFileEntityId"])(a),i=n.userId;if(!i)return null;if(i===r.user)return null;return p.a.createElement(d["Fragment"],null,p.a.createElement("span",{className:"c-message_kit__file__meta__separator"}," | "),p.a.createElement(A["a"],{id:i,className:"c-message_kit__file__meta__name"}))}},{key:"renderMetaText",value:function e(){var t=this.props.file;var r=Object(w["getFileType"])(t);var a="image"===r||"snippet"===r;var n=t.pretty_type||x.t("file");var i=a||!this.isExpanded()?p.a.createElement(I["a"],{file:t}):n;return p.a.createElement("span",{className:"c-message_kit__file__meta__text"},i,this.renderUploader())}},{key:"renderCollapse",value:function e(){var t=this.isExpanded()?"caret-down":"caret-right";return p.a.createElement(T["a"],{className:"c-message_kit__file__meta__collapse",onClick:this.toggleExpanded},p.a.createElement(N["b"],{type:t,size:"inherit"}))}},{key:"renderMeta",value:function e(){var t=this.props.file;if(Object(w["isTombstone"])(t))return null;return p.a.createElement("div",{className:"c-message_kit__file__meta"},this.renderMetaText(),"\xa0",this.renderCollapse())}},{key:"renderFile",value:function e(){if(!this.isExpanded())return null;var t=this.props,r=t.msg,a=t.file;return p.a.createElement(j["a"],{file:a,ts:r.ts,channelId:r.channel,className:"c-message_kit__file__file",clogLinkClick:this.clogMessageClick})}},{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.file;if(!r)return null;if(!a)return null;var n=this.isExpanded();var i=b()(this.props.className,"c-message_kit__file",{"c-message_kit__file--expanded":n,"c-message_kit__file--collapsed":!n});return p.a.createElement("div",{className:i},this.renderMeta(),this.renderFile())}}]);return t}(d["PureComponent"]);L.displayName="MessageKitFile";L.defaultProps=F;var B=function e(t,r){var a=r.fileId,n=r.msg,i=r.viewContext;var s=Object(C["a"])("file",n.ts,{id:a,viewContext:i});return{file:Object(y["getFileById"])(t,a),isExpanded:Object(k["isExpanded"])(t,s),expandPref:Object(O["getUserPref"])(t,"expand_internal_inline_imgs"),expandableKey:s}};var U=function e(t){return{setExpanded:function e(){return t(k["setExpanded"].apply(void 0,arguments))},clogMessageClick:function e(){return t(E["a"].apply(void 0,arguments))}}};var q=Object(M["a"])(Object(R["b"])(Object(f["connect"])(B,U)(L)));var G={msg:m["b"].object.isRequired,viewKey:m["b"].string};var H={viewKey:void 0};var W=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.viewKey;if(!r)return null;if(Object(h["isFileComment"])(r))return null;if(r.files)return r.files.map(function(e){return p.a.createElement(q,{msg:r,fileId:e,key:e,viewKey:a})});if(r.file)return p.a.createElement(q,{msg:r,fileId:r.file,viewKey:a});return null}}]);return t}(d["PureComponent"]);W.displayName="MessageFiles";var V=t["a"]=W;W.defaultProps=H},,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i");function n(e){var t=e.match(a);return t&&1===t.length&&t[0]===e||false}},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(931);var s=r.n(i);var o=r(1382);var l=r.n(o);var c=Object(i["createDevTools"])(n.a.createElement(l.a,{expandActionRoot:false,expandStateRoot:false}));t["a"]=c},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(2);var l=r(26);var c=r(16);var u=r(23);var d=r(282);var p=r(320);var m=r(1116);var h=r(746);var f=r(1117);var v=r(47);var b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n()(this,e);this._string=t}s()(e,[{key:"lastUnigramQuery",value:function t(){return new e(this._string.split(/\s+/).slice(-1)[0])}},{key:"lastUnigramPrefixQuery",value:function t(){return new e(Object(o["join"])(this._string.split(/\s+/).slice(0,-1)," "))}},{key:"lastBigramQuery",value:function t(){return new e(Object(o["join"])(this._string.split(/\s+/).slice(-2)," "))}},{key:"lastBigramPrefixQuery",value:function t(){return new e(Object(o["join"])(this._string.split(/\s+/).slice(0,-2)," "))}},{key:"normalQuery",value:function t(){return new e(this._string.toLowerCase())}},{key:"asQuerySuggestion",value:function e(t){return p["f"].fromString(t,this.toString())}},{key:"isModifierMatch",value:function e(t){var r=v["e"][t];return this._string.length>=1&&(Object(o["startsWith"])(t+":",this._string)||Object(o["startsWith"])(t+" ",this._string)||r&&(Object(o["startsWith"])(r+":",this._string)||Object(o["startsWith"])(r+" ",this._string)))||Object(o["startsWith"])(this._string,t)&&(this._string.length<=t.length||":"===this._string[t.length]||" "===this._string[t.length])||r&&Object(o["startsWith"])(this._string,r)&&(this._string.length<=r.length||":"===this._string[r.length]||" "===this._string[r.length])}},{key:"isEmpty",value:function e(){return!this._string}},{key:"toString",value:function e(){return this._string}}]);return e}();var g=r(506);var _=r(94);var y=r(78);var k=r(263);var O=r(797);var E=r(351);var w=r(63);function C(e){return Object(w["a"])()||"modern_searcher"===Object(E["getGroupForUser"])(e,"sli_search_modern_searcher")}function S(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};var i=function e(t){return!t.deleted&&!(t.model_ob.is_mpim&&t.model_ob.is_archived)&&!(t.model_ob.is_group&&t.model_ob.is_archived)};if(C(t))return e(Object(O["a"])({query:r,options:Object(o["assign"])({entities:{members:{includeSlackbot:true,includeTeambot:true,includeSelf:true,includeDeleted:true},channels:{includeArchived:false,includeMpims:true,includeFromAnotherTeam:false,searchPreviousNames:false},views:false,teams:false},allowEmptyQuery:true,sort:{frecency:true},returnMetadata:true,tiered:false,limit:a},n)})).then(function(e){return e.map(function(e){var t=e.item,r=e.frecencyScore;return{model_ob:t,score:r}}).filter(i)});return Object(k["a"])(r,{members:{include_slackbot:true,include_self:true,include_deleted:true},channels:{include_archived:!!(n.entities&&n.entities.channels&&n.entities.channels.includeArchived)},enterprise_channels:n.legacy&&n.legacy.enterprise_channels||false,groups:true,mpims:true,all_mpims:true,limit:a,sort:{allow_empty_query:true,search_previous_channel_names:!!(n.entities&&n.entities.channels&&n.entities.channels.searchPreviousNames)},tiered:!!n.tiered,views:!!(n.entities&&n.entities.views),teams:!!(n.entities&&n.entities.teams)}).then(function(e){return Object(o["filter"])(e,i)})}function j(e,t,r,a){if(C(t))return e(Object(O["a"])({query:r,options:{entities:{members:{includeSlackbot:true,includeTeambot:true,includeSelf:true,includeDeleted:true}},allowEmptyQuery:true,sort:{frecency:true},returnMetadata:true,limit:a}})).then(function(e){return e.filter(function(e){return!e.item.deleted}).map(function(e){var t=e.item,r=e.frecencyScore;return{model_ob:t,score:r}})});return Object(k["a"])(r,{members:{include_slackbot:true,include_self:true,include_deleted:true},limit:a,sort:{allow_empty_query:true}}).then(function(e){return Object(o["filter"])(e,function(e){return!e.deleted})})}function I(e,t,r){var a=t?t.toLowerCase():"";var n=function e(t,r){return(t||"").toLowerCase().includes(r.toLowerCase())};return Promise.resolve(Object(o["map"])(Object(o["filter"])(Object.values(Object(y["getAllFiles"])(e)||{}).slice(0,512),function(e){return e.mimetype&&!e.mimetype.startsWith("image")&&n(e.title,a)}).slice(0,r),function(e){return{model_ob:e,score:1}}))}function T(e,t){return Promise.resolve(Object(o["filter"])(Object(o["values"])(v["c"]),function(t){return Object(o["startsWith"])(t,e)||Object(o["startsWith"])(v["d"][t],e)}).slice(0,t).map(function(e){return{model_ob:e,score:50,canLog:true}}))}var N=r(12);var A=r(48);function R(e){return e&&e.is_view}var M=r(17);var P=r(62);var x=r(268);var D=r(19);var F=r(708);var L=r(480);var B=r(3454);var U=r(69);function q(e,t){return Object(U["getPrimaryView"])(e)===t.id}function G(e,t,r){var a=[];var n=[];var i=[];Object(o["forEach"])(t.members,function(t){var r=Object(D["getImByMemberId"])(e,t.id);Object(N["isUnread"])(r)?n.push({model_ob:t,score:0}):r&&Object(o["trim"])(r.last_msg_input)&&!q(e,r)&&!Object(N["isImWithDeletedMember"])(r)&&i.push({model_ob:t,score:0})});Object(o["forEach"])(t.mpims,function(t){Object(N["isUnread"])(t)?n.push({model_ob:t,score:0}):Object(o["trim"])(t.last_msg_input)&&!q(e,t)&&i.push({model_ob:t,score:0})});Object(o["forEach"])(t.groups,function(t){t.unread_highlight_cnt&&t.unread_highlight_cnt>0?n.push({model_ob:t,score:0}):Object(N["isUnread"])(t)&&!Object(F["b"])(t.id)?a.push({model_ob:t,score:0}):!Object(o["trim"])(t.last_msg_input)||q(e,t)||Object(N["isArchived"])(t)||i.push({model_ob:t,score:0})});Object(o["forEach"])(t.channels,function(t){t.unread_highlight_cnt&&t.unread_highlight_cnt>0&&Object(N["isMemberOfChannel"])(t)?n.push({model_ob:t,score:0}):Object(N["isUnread"])(t)&&!Object(F["b"])(t.id)&&Object(N["isMemberOfChannel"])(t)?a.push({model_ob:t,score:0}):Object(o["trim"])(t.last_msg_input)&&!q(e,t)&&!Object(N["isArchived"])(t)&&Object(N["isMemberOfChannel"])(t)&&i.push({model_ob:t,score:0})});var s=Object(B["c"])(B["a"].allThreads);Object(L["getThreadsMentionCount"])(e)>0?n.push({model_ob:s,score:0}):Object(L["hasUnreadThreads"])(e)&&a.push({model_ob:s,score:0});var l=[].concat(n,a,i);return l.slice(0,r)}var H=r(3475);var W=r(719);r.d(t,"a",function(){return Q});r.d(t,"b",function(){return K});r.d(t,"c",function(){return Y});r.d(t,"d",function(){return J});var V="SEARCH";var z=Object(M["b"])();function Q(e){if(Object(H["b"])(e))return"omni_switcher_1";if(Object(H["c"])(e)){if(Object(x["getSearchAutocompleteMode"])(e)===x["searchAutocompleteModes"].NAVIGATION)return"search_switcher_1";return"e3_unified"}return"e3_unified"}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=arguments[2];if(!r)return t.filter(function(e){return!e.is_type_user_query});if(Object(x["getSearchAutocompleteMode"])(e)===x["searchAutocompleteModes"].NAVIGATION&&Object(H["c"])(e))return Object(o["uniqBy"])(t.filter(function(e){return!e.is_type_user_query}),function(e){return e.key}).sort(function(e,t){return t.score-e.score});if(Object(H["b"])(e))return Object(o["uniqBy"])([Object(o["assign"])(p["h"].fromString(e,r).toMap(Q(e)),{is_type_user_query:true})].concat(t.filter(function(e){return!e.is_type_user_query})),function(e){return e.key}).sort(function(e,t){return t.score-e.score});return Object(o["uniqBy"])([Object(o["assign"])(p["h"].fromString(e,r).toMap(Q(e)),{is_type_user_query:true})].concat(t.filter(function(e){return!e.is_type_user_query})),function(e){return e.key})}function Y(e,t,r,a,n){return new Z(e,t).suggestions(r,a,n)}function J(e){return Promise.all([Object(m["a"])(e).get(),Object(f["a"])(e).get(),Object(h["a"])(e).get()])}var Z=function(){function e(t,r){n()(this,e);this.dispatch=t;this.state=r}s()(e,[{key:"combineResponses",value:function e(t,r,a,n,i){if(i)return Object(o["chain"])(t).map(function(e){return Object(o["sortBy"])(e,function(e){return-e.score(n)}).slice(0,r)}).flatten().uniqBy(function(e){return e.toTextyString()}).map(function(e){return e.toMap(n)}).value();var s=Object(o["chain"])(t).map(function(e){return e.slice(a,r)}).flatten().uniqBy(function(e){return e.toTextyString()}).sortBy(function(e){return-e.score(n)}).map(function(e){return e.toMap(n)}).value();var l=Object(o["chain"])(t).map(function(e){return e.slice(0,a)}).flatten().uniqBy(function(e){return e.toTextyString()}).sortBy(function(e){return-e.score(n)}).map(function(e){return e.toMap(n)}).value();return l.concat(s).slice(0,r)}},{key:"suggestions",value:function e(t,r,a){var n=this;var i=Object(u["getTeamId"])(this.state);var s=new b(t);var o=[];var d=Object(x["getSearchAutocompleteMode"])(this.state)===x["searchAutocompleteModes"].NAVIGATION;if(s.isEmpty())if(Object(H["b"])(this.state)){o.push(this.suggestionsFromBlankSlateUnreads(s,r,this.state));o.push(this.suggestionsBlankSlateQueryHistory(i,r))}else d?o.push(this.suggestionsFromBlankSlateUnreads(s,r,this.state)):o.push(this.suggestionsBlankSlateQueryHistory(i,r));else if(d)o.push(this.suggestionsFromSearcher(s,r,this.state));else{o.push(this.suggestionsInFilter(s,r));o.push(this.suggestionsHasFilter(s,r));o.push(this.suggestionsMemberFilter(s,r,v["f"].FROM));o.push(this.suggestionsMemberFilter(s,r,v["f"].TO));o.push(this.suggestionsDateFilter(s,r,v["f"].BEFORE));o.push(this.suggestionsDateFilter(s,r,v["f"].DURING));o.push(this.suggestionsDateFilter(s,r,v["f"].ON));o.push(this.suggestionsDateFilter(s,r,v["f"].AFTER));o.push(this.suggestionsQueryHistory(i,s,r));o.push(this.suggestionsFiles(s,r,a));var p=Object(g["a"])(this.state);var m=Object(l["getCurrentMember"])(p);if(!Object(c["isRestricted"])(m)&&!Object(c["isUltraRestricted"])(m)&&!m.is_bot){Object(P["e"])("start_autocomplete_query_suggestions");o.push(this.suggestionsQueries(s,r).finally(function(){return Object(P["g"])("autocomplete_query_suggestions","start_autocomplete_query_suggestions")}))}o.push(this.suggestionsFromSearcher(s,r,this.state))}var h=r;return Promise.all(o).then(function(e){return n.combineResponses(e,r,h,a,s.isEmpty())}).catch(function(e){z.error(V,"suggestions failure",e);return[]})}},{key:"suggestionsBlankSlateQueryHistory",value:function e(t,r){var a=this;var n=Object(h["a"])(t);return n.get().then(function(e){return e.slice(0,r).map(function(e,t){return new p["e"](a.state,"",e,t)})})}},{key:"suggestionsQueryHistory",value:function e(t,r,a){var n=this;var i=Object(h["a"])(t);return i.getStaleWhileRevalidate([]).then(function(e){return Object(o["map"])(Object(o["filter"])(e,function(e){return Object(o["startsWith"])(e.toLowerCase(),r.normalQuery().toString())}).slice(0,a),function(e){return p["f"].fromString(n.state,e)})})}},{key:"suggestionsFromSearcher",value:function e(t,r,a){var n=this;var i={};if(Object(H["a"])(a)){i={tiered:true,entities:{channels:{includeArchived:true,searchPreviousNames:true},views:true,teams:true}};if(Object(W["d"])()){i.legacy={enterprise_channels:{runaway:true,remote_limit:2*r}};i.entities.channels.includeFromAnotherTeam=true;i.entities.channels.runaway=true}}return S(this.dispatch,this.state,t.toString(),r,i).then(function(e){var a=Object(o["chain"])(e).map(function(e){return n._suggestionFromSearcherResult(e,t)}).filter(function(e){return!!e}).sort(function(e,t){return t.score-e.score}).value();!Object(H["c"])(n.state)&&a[0]&&a[0].type===v["b"].USER_NAVIGATION&&a.push(new p["f"](n.state,t,[new d["f"](a[0].score,n.state,a[0].getUser().id,null,v["f"].FROM)]));return a.slice(0,r)})}},{key:"suggestionsFromBlankSlateUnreads",value:function e(t,r){var a=this;return Object(k["a"])(t.toString(),{members:{include_org:true,include_slackbot:true,include_self:true,include_deleted:true,full_profile_filter:false,org_team_ids:[]},channels:{include_archived:true},groups:{include_archived:false},mpims:true,sort:false,tiered:true}).then(function(e){return G(a.state,e,r)}).then(function(e){return Object(o["chain"])(e).map(function(e){return a._suggestionFromSearcherResult(e,t)}).filter(function(e){return!!e}).sort(function(e,t){return t.score-e.score}).value().slice(0,r)})}},{key:"_suggestionFromSearcherResult",value:function e(t,r){if(Object(c["isMember"])(t.model_ob))return new p["i"](this.state,t.score,t.model_ob,r.toString());if(Object(N["isChannel"])(t.model_ob)||Object(N["isPrivateChannel"])(t.model_ob))return new p["a"](this.state,t.score,t.model_ob,r.toString());if(Object(N["isMpim"])(t.model_ob))return new p["d"](this.state,t.score,t.model_ob,r.toString());if(R(t.model_ob))return new p["j"](this.state,t.score,t.model_ob,r.toString());if(Object(A["isTeam"])(t.model_ob))return new p["g"](this.state,t.score,t.model_ob,r.toString());return null}},{key:"_searchQueries",value:function e(t,r){if(!t)return Promise.resolve([]);var a=Object(u["getTeamId"])(this.state);var n=t.toLowerCase();return Object(m["a"])(a).getStaleWhileRevalidate(void 0).then(function(e){return e?e.search(n,r):[]})}},{key:"suggestionsQueries",value:function e(t,r){var a=this;if(!t)return Promise.resolve([]);return this._searchQueries(t.toString(),r).then(function(e){return e.map(function(e){return new p["f"](a.state,t.toString(),[new d["a"](e[1],e[0])])})})}},{key:"suggestionsExpertChannels",value:function e(t,r){var a=this;if(!t)return Promise.resolve([]);return this._searchQueries(t.toString(),r).then(function(e){var r=Object(g["a"])(a.state);return Object(o["flatMap"])(e,function(e){var a=e[0];if(t.toString()===a||t.toString().search(" ")>=0){var n=e[2]||{};return Object.keys(n).map(function(a){var i=Object(_["f"])(r,a);return new p["b"](r,e[1],n[a],i,t)}).filter(function(e){return e.channel})}return[]})})}},{key:"_searchFiles",value:function e(t,r,a){if(!r)return Promise.resolve([]);var n=r.toLowerCase().replace(/[^a-z0-9\s]/,"").replace(/\s+/," ").trim();var i=n.split(/\s+/).slice(0,-1);var s=n.split(/\s+/).slice(-1)[0];var l=Object(u["getTeamId"])(this.state);var c=Object(f["a"])(l);return c.getStaleWhileRevalidate([]).then(function(e){return Object(o["chain"])(e[n[0]]).filter(function(e){if(i.length<1)return e.normalTitle.includes(n);if(!Object(o["reduce"])(i,function(t,r){return t&&Object(o["includes"])(e.titleTerms,r)},true))return false;return Object(o["filter"])(e.titleTerms,function(e){return Object(o["startsWith"])(e,s)}).length>0}).sort(function(e,t){return t.score-e.score}).slice(0,a).map(function(e){return{model_ob:e,score:e.score}}).value()})}},{key:"suggestionsFiles",value:function e(t,r,a){var n=[];var i=Object(g["a"])(this.state);var s=function e(r){return r.map(function(e){return new p["c"](i,e.score,e.model_ob,t.toString())})};n.push(this._searchFiles(i,t.normalQuery().toString(),r).then(s));n.push(I(i,t.normalQuery().toString(),r).then(s));return Promise.all(n).then(function(e){return Object(o["chain"])(e).flatten().uniqBy(function(e){return e.fileId}).sortBy(function(e){return-e.score(a)}).slice(0,r).value()})}},{key:"suggestionsFilter",value:function e(t,r,a,n,i){var s=void 0;var l=void 0;if(t.lastUnigramQuery().normalQuery().isModifierMatch(a)){s=t.lastUnigramQuery().toString();l=t.lastUnigramPrefixQuery().asQuerySuggestion(this.state)}else{if(!t.lastBigramQuery().normalQuery().isModifierMatch(a))return Promise.resolve([]);s=t.lastBigramQuery().toString();l=t.lastBigramPrefixQuery().asQuerySuggestion(this.state)}var c=v["e"][a];var u="";Object(o["startsWith"])(s,c+":")||Object(o["startsWith"])(s,c+" ")?u=s.slice(c.length+1):(Object(o["startsWith"])(s,a+":")||Object(o["startsWith"])(s,a+" "))&&(u=s.slice(a.length+1));return n(u,r).then(function(e){return e.map(function(e){return l.withQuerySuggestionToken(i(e))})})}},{key:"suggestionsMemberFilter",value:function e(t,r,a){var n=this;return this.suggestionsFilter(t,r,a,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return j.apply(void 0,[n.dispatch,n.state].concat(t))},function(e){return new d["f"](e.score,n.state,e.model_ob.id,e.model_ob.profile.real_name||e.model_ob.name||e.model_ob.profile.display_name,a)})}},{key:"suggestionsInFilter",value:function e(t,r){var a=this;return this.suggestionsFilter(t,r,v["f"].IN,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return S.apply(void 0,[a.dispatch,a.state].concat(t))},function(e){return new d["e"](e.score,a.state,e.model_ob.id,e.model_ob.name)})}},{key:"suggestionsHasFilter",value:function e(t,r){var a=function e(t,r){return Promise.all([T(t,r)]).then(function(e){return Object(o["flatten"])(e)})};return this.suggestionsFilter(t,r,v["f"].HAS,a,function(e){return new d["d"](e.model_ob,e.canLog)})}},{key:"suggestionsDateFilter",value:function e(t,r,a){var n=new d["b"](new Date);return this.suggestionsFilter(t,r,a,function(e,t){return n.suggestionsPromise(e,t,a)},function(e){return new d["c"](e.model_ob,a)})}}]);return e}();var X=Y},function(e,t,r){"use strict";var a=r(24);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(2);var h=r.n(m);var f=r(1);var v=r.n(f);var b=r(129);var g=r(14);var _=r(50);var y=r(11);var k=r(21);var O=r(266);var E=r(10);var w=r(285);var C=r(18);var S=r(1931);var j=r.n(S);var I=new E["b"]("files");var T=new E["b"]("search");var N={filetype:b["b"].string,onChange:b["b"].func,featureArugula:b["b"].bool,showEmail:b["b"].bool};var A={filetype:"",onChange:m["noop"],featureArugula:false,showEmail:false};var R=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onChange=r.onChange.bind(r);r.labelId="file_type_select_"+Object(O["c"])();r.state={label:null};return r}l()(t,[{key:"onChange",value:function e(t,r,a){this.setState(function(){return{label:r}});this.props.onChange(t,r,a)}},{key:"render",value:function e(){var t=v.a.createElement(f["Fragment"],null,I.rt("Show <strong>all file types</strong>",{fallbackHash:"30266588dc5ca2b69979f4afa079509cd409568e"}));return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:"offscreen",id:this.labelId},T.t("File type")," ",v.a.createElement("span",null,"- ",this.state.label?this.state.label:t)),v.a.createElement(w["d"],{className:"p-file_list__select p-file_list__file_type_select",optionClassName:"p-file_list__option",placeholder:t,onChange:this.onChange,value:this.props.filetype,maxOptionsListHeight:Infinity,useFilteredInput:false,useFullWidthOptions:true,wrapperClassName:"p-file_list__select_wrapper",labelId:this.labelId,options:[{label:v.a.createElement(f["Fragment"],null,v.a.createElement(C["b"],{type:"create-post"}),I.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"})),labelText:I.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"}),value:"posts"}].concat(n()(this.props.featureArugula?[{label:v.a.createElement("span",null,v.a.createElement(C["b"],{type:"emoji-nature"}),"Arugula"),labelText:"Arugula",value:"docs"}]:[]),[{label:v.a.createElement(f["Fragment"],null,v.a.createElement(C["b"],{type:"create-snippet"}),I.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"})),labelText:I.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"}),value:"snippets"}],n()(this.props.showEmail?[{label:v.a.createElement(f["Fragment"],null,v.a.createElement(C["b"],{type:"envelope-o"}),I.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"})),labelText:I.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"}),value:"emails"}]:[]),[{label:v.a.createElement(f["Fragment"],null,v.a.createElement(C["b"],{type:"image"}),I.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"})),labelText:I.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"}),value:"images"},{label:v.a.createElement(f["Fragment"],null,v.a.createElement(C["b"],{type:"play"}),I.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"})),labelText:I.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"}),value:"videos"},{label:v.a.createElement(f["Fragment"],null,v.a.createElement(C["b"],{type:"book"}),I.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"})),labelText:I.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"}),value:"pdfs"},{label:v.a.createElement(f["Fragment"],null,v.a.createElement(C["b"],{type:"file"}),I.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"})),labelText:I.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"}),value:"spreadsheets"},{label:v.a.createElement(f["Fragment"],null,v.a.createElement(C["b"],{type:"google-drive"}),I.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"})),labelText:I.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"}),value:"gdocs"}])}))}}]);return t}(f["PureComponent"]);R.displayName="FileTypeSelect";R.defaultProps=A;t["a"]=Object(g["connect"])(function(e){return{featureArugula:Object(y["isFeatureEnabled"])(e,"feature_docs"),showEmail:Object(_["getCurrentTeam"])(e).plan&&!Object(k["getTeamPref"])(e,"disable_email_ingestion")}})(R)},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(97);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(2);var h=r(280);var f=r(62);var v=r(33);var b=function(){function e(t,r,a,i){n()(this,e);this.bucketIdForKey=r;this.keyForDoc=a;this.scoreForDoc=i;this.size=t.length;this.index=_(t,r,a,i)}u()(e,[{key:"search",value:function e(t,r){var a=this;var n=this.bucketIdForKey(t);if(!n)return[];var i=Object(m["keys"])(this.index).filter(function(e){return Object(m["startsWith"])(e,n)});if(1===i.length)return this._searchBucket(i[0],t,r);return Object(m["chain"])(i).map(function(e){return a._searchBucket(e,t,r)}).flatten().sort(function(e,t){return a.scoreForDoc(t)-a.scoreForDoc(e)}).value()}},{key:"_searchBucket",value:function e(t,r,a){var n=this;var i=[];Object(m["forEach"])(this.index[t]||[],function(e){var t=n.keyForDoc(e);Object(m["startsWith"])(t,r)&&t!==r&&i.push(e);return i.length<a});return i}}]);return e}();var g=b;function _(e,t,r,a){var n={};Object(m["forEach"])(e,function(e){var a=t(r(e));n[a]||(n[a]=[]);n[a].push(e)});Object(m["forEach"])(n,function(e){e.sort(function(e,t){return a(t)-a(e)})});return n}var y=r(700);r.d(t,"a",function(){return E});var k=function(e){p()(t,e);u()(t,[{key:"_searchAutocompleteQuerySuggestions",value:function e(t){var r="new_term_frequency";var a=false;var n="autocomplete_query_suggestions_response_time_batch_"+t;var i=n+"_mark";Object(f["e"])(i);return Object(v["a"])(this.teamId,Object(h["f"])({limit:1e5,version:r,returnExperts:a,batchMin:t||0,batches:1})).then(function(e){Object(f["g"])(n,i);return{data:e.query_suggestion_list,exception:void 0}}).catch(function(e){Object(f["g"])(n,i);return{data:[],exception:e}})}}]);function t(e){n()(this,t);var r=2e5;var a=Math.ceil(r/5e4);var i=576e5;var o=function e(t){var r=t[0].toString().replace(/_/g," ");var a=parseInt(t[1],10)/1e4;var n=Object(m["mapValues"])(t[2],function(e){return parseInt(e,10)/100});return[r,a,n]};var l=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return Promise.all(Object(m["range"])(a).map(function(e){return l._searchAutocompleteQuerySuggestions(e).then(function(e){return e.data.map(function(e){return o(e)})})})).then(function(e){var t=Object(m["flatten"])(e.filter(function(e){return e.length>0}));var r=new g(t,function(e){return e.slice(0,3)},function(e){return e[0]},function(e){return e[1]});return r})},i));l.teamId=e;return l}u()(t,[{key:"onCacheData",value:function e(r){var a=this;l()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onCacheData",this).call(this,r);var n=Math.max(this.timeoutMs/2,144e5);this.querySuggestionCacheRefreshTimer&&clearTimeout(this.querySuggestionCacheRefreshTimer);this.querySuggestionCacheRefreshTimer=null;this.querySuggestionCacheRefreshTimer=setTimeout(function(){a._callCacheGet()},this.timeoutMs/2+Math.random()*n)}}]);return t}(y["a"]);var O={};function E(e){O[e]||(O[e]=new k(e));return O[e]}},function(e,t,r){"use strict";r.d(t,"a",function(){return y});var a=r(5);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(97);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(2);var h=r.n(m);var f=r(280);var v=r(33);var b=r(700);var g=function(e){p()(t,e);u()(t,[{key:"_searchAutocompleteFileSuggestions",value:function e(t){var r="new_term_frequency";return Object(v["a"])(this.teamId,Object(f["e"])({limit:t,version:r})).catch(function(e){return{data:[],exception:e}})}}]);function t(e){n()(this,t);var r=1008e5;var a=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return a._searchAutocompleteFileSuggestions(1e4).then(function(e){var t={};Object(m["each"])(e.file_suggestion_list,function(e){var r=e.title.toLowerCase().replace(/[^a-z0-9\s]/,"").replace(/\s+/," ").trim();var a=r.split(/\s+/).slice(0,6);var n=Object(m["extend"])(e,{normalTitle:r,titleTerms:a,score:e.score/65536*400});Object(m["each"])(r.split(/ /).slice(0,3),function(e){var r=e[0];t[r]||(t[r]=[]);t[r].push(n)})});return t})},r));a.teamId=e;return a}u()(t,[{key:"onCacheData",value:function e(r){var a=this;l()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onCacheData",this).call(this,r);var n=144e5;this.fileSuggestionCacheRefreshTimer&&clearTimeout(this.fileSuggestionCacheRefreshTimer);this.fileSuggestionCacheRefreshTimer=null;this.fileSuggestionCacheRefreshTimer=setTimeout(function(){a._callCacheGet()},this.timeoutMs+Math.random()*n)}}]);return t}(b["a"]);var _={};function y(e){_[e]||(_[e]=new g(e));return _[e]}},function(e,t,r){"use strict";r.d(t,"a",function(){return d});var a=r(2);var n=r.n(a);var i=r(10);var s=r(359);var o=r(89);var l=r(113);var c=r(415);var u=new i["b"]("aria_msg_summary");function d(e){if(!e)return null;var t=[];var r=e.day,n=r.isFirstDay,i=r.isLastDay;var d=e.day.ts/1e3;var p=Object(o["a"])();var m=Object(o["a"])(p).subtract(1,"days");var h=Object(l["a"])(d,{returnMoment:true});var f=Object(c["a"])(p,h);var v=Object(c["a"])(m,h);var b=d&&Object(s["a"])(d,"{day_divider_pretty}");!e.isFirstMsgForDay||e.isLastMsgForDay||n||(f?t.push(u.t("First message from today.",{day:b})):v?t.push(u.t("First message from yesterday.",{day:b})):t.push(u.t("First message from {day}.",{day:b})));!e.isLastMsgForDay||e.isFirstMsgForDay||i||(f?t.push(u.t("Last message from today.",{day:b})):v?t.push(u.t("Last message from yesterday.",{day:b})):t.push(u.t("Last message from {day}.",{day:b})));e.isLastMsgForDay&&e.isFirstMsgForDay&&!i&&!n&&(f?t.push(u.t("Message from today.",{day:b})):v?t.push(u.t("Message from yesterday.",{day:b})):t.push(u.t("Message from {day}.",{day:b})));e.isFirstUnreadMsg&&t.push(u.t("First unread message."));t.push(u.t("{name} at {time}.",{name:e.name,time:e.time}));t.push(e.text);e.reactionCount>0&&t.push(u.t("{count, plural, =1 {# reaction} other {# reactions}}.",{count:e.reactionCount}));e.replyCount>0&&t.push(u.t("{count, plural, =1 {# reply} other {# replies}}.",{count:e.replyCount}));e.isStarred&&t.push(u.t("Message is starred."));e.isPinned&&t.push(u.t("Message is pinned."));e.attachmentCount>0&&t.push(u.t("{count, plural, =1 {# attachment} other {# attachments}}.",{count:e.attachmentCount}));e.attachmentTexts&&e.attachmentTexts.length>0&&(t=t.concat(e.attachmentTexts));return Object(a["unescape"])(t.join(" "))}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(10);var n=new a["b"]("message");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plainText,r=e.isFollowup,i=e.fileMode,s=e.fileLink,o=e.userId,l=e.userName,c=e.userLink;var u={file:s,user:c,possessive:Object(a["m"])(l)};if(r){u.note="[sender] commented:";return n.t("commented:",u)}if(o){if("snippet"===i){u.note="[sender] commented on joe's snippet. Also, the possessive affix is localized, but please move it before or after the user name depending on whether possessives are prefixes or suffixes for your language.";return t?n.t("commented on {user}{possessive} snippet {file}",u):n.rt("commented on {user}{possessive} snippet {file}",u)}u.note="[sender] commented on joe's file. Also, the possessive affix is localized, but please move it before or after the user name depending on whether possessives are prefixes or suffixes for your language.";return t?n.t("commented on {user}{possessive} file {file}",u):n.rt("commented on {user}{possessive} file {file}",u)}u.note="[sender] commented on Kittens.gif";return t?n.t("commented on {file}",u):n.rt("commented on {file}",u)}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(457);function n(e,t){if(!t||!e)return false;if(Object(a["b"])(t.subtype)&&"file_comment"===e.subtype&&t.file&&e.file&&t.file===e.file)return true;return false}},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var a=r(2);var n=r.n(a);var i=r(11);var s=r(162);var o=r(16);var l=r(10);var c=new l["b"]("threads");function u(e,t){var r=Object(i["getCurrentUserId"])(e);var a=n.a.includes(t,r);var l=t;if(a){l=n.a.without(t,r);l.push(r)}return n.a.chain(l).uniq().without("U00").without("B00").map(function(t){var a=Object(o["getPrefCompliantMemberNameById"])(e,t)||Object(s["getBotNameById"])(e,t);if(!a)return null;return t===r?c.t("you"):a}).compact().value()}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(10);var n=new a["b"]("threads");function i(){return n.t("replied to a thread:")}},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(2);var h=r.n(m);var f=r(1);var v=r.n(f);var b=r(129);var g=r(15);var _=r.n(g);var y=r(72);var k=r(226);var O=r(228);var E=r(1006);var w=r(10);var C=r(361);var S=r(36);var j=r(87);var I=r(173);var T=r(255);var N=r(735);var A=r(1626);var R=r(734);var M=r(606);var P=r(698);var x=r(145);var D=r(980);var F=r(665);var L=r(1124);var B=r(825);var U=r(18);var q=r(41);var G=r(121);var H=r(65);var W=r(1943);var V=r.n(W);var z=new w["b"]("search");var Q="IMPROVED_SEARCH";var K={iid:b["b"].string.isRequired,ts:b["b"].string.isRequired,logger:b["b"].object.isRequired,hasText:b["b"].bool.isRequired,permalink:b["b"].string.isRequired,user:b["b"].string.isRequired,username:b["b"].string,text:b["b"].string.isRequired,botId:b["b"].string,teamDomain:b["b"].string,permalinkToMessageThread:b["b"].string.isRequired,isCrossWorkspace:b["b"].bool.isRequired,botProfile:b["b"].shape({app_id:b["b"].string.isRequired,deleted:b["b"].bool,icons:b["b"].obj,id:b["b"].string,name:b["b"].string,updated:b["b"].number}),channel:b["b"].shape({id:b["b"].string.isRequired,name:b["b"].string.isRequired}).isRequired,channelName:b["b"].string.isRequired,extracts:b["b"].arrayOf(b["b"].shape({text:b["b"].string,truncated_head:b["b"].bool,truncated_tail:b["b"].bool})),files:b["b"].arrayOf(y["a"].File()),subtype:b["b"].string,theme:b["b"].string,hasAdHocSender:b["b"].bool.isRequired,expanded:b["b"].bool,onClick:b["b"].func,onFileClick:b["b"].func,onRepliesClick:b["b"].func,onExpand:b["b"].func.isRequired,canBeTruncated:b["b"].bool.isRequired,attachments:b["b"].array,reactions:b["b"].array,onExpandHoverStart:b["b"].func,onExpandHoverEnd:b["b"].func,reply_count:b["b"].number,onLinkClick:b["b"].func,icons:b["b"].shape({image_36:b["b"].string,image_48:b["b"].string,image_64:b["b"].string,image_72:b["b"].string,emoji:b["b"].string})};var Y={teamDomain:"",username:null,theme:"light",botId:null,botProfile:null,subtype:"",expanded:false,onClick:h.a.noop,onFileClick:h.a.noop,onRepliesClick:h.a.noop,files:[],attachments:[],reactions:[],extracts:[],onExpandHoverStart:h.a.noop,onExpandHoverEnd:h.a.noop,reply_count:0,onLinkClick:h.a.noop,icons:null};var J=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={hasKeyboardFocus:false};Object(m["bindAll"])(r,["expand","onClick","onFocusEnter","onFocusLeave","onFileClick","onRepliesClick","onCopyLink","onExpandHoverStart","onExpandHoverEnd","onMouseMove","onLinkClick","onTimestampClick"]);r.dragging=false;r.dragStartX=null;r.dragStartY=null;return r}l()(t,[{key:"onClick",value:function e(t){if(t.target.dataset.memberId)return;if("BUTTON"===t.target.tagName||"BUTTON"===t.target.parentNode.tagName)return;if(t.target.dataset.channelId||t.target.dataset.messageSender||("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented){this.onLinkClick(t);return}var r=false;if(this.dragging){var a=Math.pow(t.clientX-this.dragStartX,2)+Math.pow(t.clientY-this.dragStartY,2);r=a>16;this.dragging=false}r||t.shiftKey||this.props.onClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onFileClick",value:function e(t,r){var a=r.file;t.preventDefault();this.props.onFileClick(t,{file:a,iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onRepliesClick",value:function e(t){t.preventDefault();this.props.onRepliesClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onCopyLink",value:function e(t){t.preventDefault();t.stopPropagation();var r=this.props,a=r.channel,n=r.ts,i=r.teamDomain,s=r.isCrossWorkspace;var o=this.props.permalink;o||(s?this.props.logger.error(Q,"Missing permalink for cross workspace message result. channel: "+a+" ts: "+n):o=Object(S["constructAbsoluteMsgPermalink"])({teamDomain:i,channelId:a.id,ts:n}));o&&Object(C["writeText"])(o)}},{key:"onExpandHoverStart",value:function e(){this.props.onExpandHoverStart()}},{key:"onExpandHoverEnd",value:function e(){this.props.onExpandHoverEnd()}},{key:"onMouseMove",value:function e(t){if((1===t.button||1===t.buttons)&&!this.dragging){this.dragging=true;this.dragStartX=t.clientX;this.dragStartY=t.clientY}}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;r&&"keydown"===r.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onLinkClick",value:function e(t){var r={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};t.target.dataset.channelId?r.type="channel":t.target.dataset.messageSender?r.type="sender":("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented&&(r.type="link");r.type&&this.props.onLinkClick(r)}},{key:"onTimestampClick",value:function e(t){t.preventDefault()}},{key:"expand",value:function e(t){t.preventDefault();t.stopPropagation();this.props.onExpand({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"renderEllipsisButton",value:function e(t){var r={leading:"expand-head",trailing:"expand-tail"}[t];return v.a.createElement("button",{"data-qa":r,onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},v.a.createElement(q["d"],{tip:z.t("Show more")},v.a.createElement("span",{className:"c-search__expand_ellipsis"},"...")))}},{key:"renderExpandButton",value:function e(){return v.a.createElement("button",{"data-qa":"expand-end",onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},v.a.createElement("span",{className:"c-search__expand_ellipsis"},"... ",z.t("Show more")))}},{key:"renderText",value:function e(){var t=this;var r=this.props,a=r.text,n=r.extracts,i=r.expanded,s=r.canBeTruncated;if(!(a.length||n.length))return null;if(i||!s)return v.a.createElement("div",{className:"c-search_message__body","data-qa":"search_message_body"},v.a.createElement(j["a"],{text:a}));if(n.length)return v.a.createElement("div",{className:"c-search_message__body"},v.a.createElement(f["Fragment"],null,n.map(function(e,r){var a=0===r&&e.truncated_head;var i=e.truncated_tail;var o=r===n.length-1;return v.a.createElement(f["Fragment"],{key:r},a?t.renderEllipsisButton("leading"):null,v.a.createElement(j["a"],{text:e.text}),!i||s&&o?null:t.renderEllipsisButton("trailing"),s&&o?t.renderExpandButton():null)})));return v.a.createElement("div",{className:"c-search_message__body"},v.a.createElement(j["a"],{text:a}))}},{key:"renderAvatar",value:function e(){var t=this.props,r=t.user,a=t.hasAdHocSender,i=t.botId,s=t.botProfile,o=t.icons;var l={};i&&(l=n()({},l,{botId:i}));var c=o||s&&s.icons;if(c){var u=c.image_36||c.image_48;var d=c.image_64||c.image_72;var p=c.emoji;u&&(l=n()({},l,{imageUrl:u}));d&&(l=n()({},l,{imageUrl2x:d}));p&&(l=n()({},l,{emoji:p}))}r&&(l=n()({},l,{userId:r}));return v.a.createElement(I["b"],n()({className:"c-search_message__avatar",ariaHidden:"true",isAdHocMember:a,size:36,isInteractive:true,showCard:true,showTooltip:true,tabIndex:"-1"},l))}},{key:"renderTimestamp",value:function e(){var t=this.props,r=t.ts,a=t.permalink;return v.a.createElement(N["b"],{onClick:this.onTimestampClick,timestamp:r,relative:false,full:false,link:a})}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return v.a.createElement("div",{className:"c-search_message__gutter"},this.renderAvatar());return v.a.createElement("div",{className:"c-search_message__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,r=t.user,a=t.botId,n=t.botProfile,i=t.username,s=t.theme,o=t.channelName;return v.a.createElement("div",{className:"c-search_message__content_header","data-qa":"search_message_header"},v.a.createElement(F["a"],{userId:r,botId:a,botProfile:n,username:i,channelName:o,isInteractive:true}),"light"===s&&this.renderTimestamp())}},{key:"renderAttachments",value:function e(){var t=this;var r=this.props,a=r.attachments,i=r.expanded,s=r.ts,o=r.channel,l=r.canBeTruncated,c=r.hasText;if(!a.length)return null;if(i||!l)return h.a.map(a,function(e){return v.a.createElement(A["a"],n()({key:e.id},Object(k["b"])(e),{isOnlyMessageContent:c,messageTs:s,activeChannelId:o.id,showDelete:false}))});var u=h.a.map(a,function(e,r){var a=Object(k["b"])(e);var n=null;if(Object(O["c"])(a)){var i=a.serviceIcon||a.authorIcon;var o=a.serviceName||a.authorName;var l=o===a.authorName?a.authorSubname:a.authorName;n=v.a.createElement("div",null,v.a.createElement(M["a"],{icon:i,name:o,link:a.serviceUrl||a.authorLink,subname:l,subnameLink:a.authorLink}))}var c=a.extracts;var u=null;c&&c.title&&(u=v.a.createElement("div",{"data-qa":"search-attachment-title",className:"c-search_message__attachment_title"},h.a.map(c.title,function(e,t){var r=0===t&&e.truncated_head;var a=e.truncated_tail;return v.a.createElement(f["Fragment"],{key:t}," ",r?"\u2026":null,Z(e.text),a?"\u2026":null)})));var d=null;c&&c.pretext&&(d=h.a.map(c.pretext,function(e,r){var a=0===r&&e.truncated_head;var n=e.truncated_tail;return v.a.createElement("span",{className:"c-message_attachment__pretext",key:r}," ",v.a.createElement(f["Fragment"],null,a?t.renderEllipsisButton("leading"):null,v.a.createElement(j["a"],{text:e.text}),n?t.renderEllipsisButton("trailing"):null))}));var p=null;c&&c.text&&(p=h.a.map(c.text,function(e,r){var a=0===r&&e.truncated_head;var n=e.truncated_tail;return v.a.createElement(f["Fragment"],{key:r}," ",a?t.renderEllipsisButton("leading"):null,v.a.createElement(j["a"],{text:e.text}),n?t.renderEllipsisButton("trailing"):null)}));var m=null;Object(O["f"])(a)&&(m=v.a.createElement("div",null,v.a.createElement(P["a"],{botId:a.botId,icon:a.footerIcon,isAppUnfurl:a.isAppUnfurl,text:a.footer,ts:s})));return v.a.createElement("div",{"data-qa":"search-message-attachment",className:"c-search_message__attachment",key:t.props.iid+"-attachment-"+r},v.a.createElement(R["a"],{color:a.color}),v.a.createElement("div",{className:"c-search_message__attachment_body"},n,u,d,p,m))});return v.a.createElement("div",{className:"c-search_message__attachments"},u)}},{key:"renderReactionsAndReplies",value:function e(){var t=this.props,r=t.reactions,a=t.isCrossWorkspace,n=t.permalinkToMessageThread;var i=this.props.reply_count;if(!r.length&&!i)return null;var s=h.a.chain(r).sortBy(function(e){return-e.count}).take(2).value();var o=h.a.sumBy(r,"count");var l=null;var c=null;o>0&&(l=v.a.createElement("span",{"data-qa":"search-reaction-count",className:"c-search_message__reactions_count"},z.t("{totalReactionCount, plural, =1 {# reaction} other {# reactions}}",{totalReactionCount:o})));if(i>0){var u=z.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:i});c=a?v.a.createElement(H["a"],{"data-qa":"search-replies",className:"c-search_message__replies_count",href:n},v.a.createElement(U["a"],{type:"comment-alt"}),u):v.a.createElement(G["a"],{"data-qa":"search-replies",className:"c-search_message__replies_count",onClick:this.onRepliesClick},v.a.createElement(U["a"],{type:"comment-alt"}),u)}return v.a.createElement("div",{"data-qa":"search-reactions",className:"c-search_message__reactions"},h.a.map(s,function(e){return v.a.createElement(x["b"],{text:":"+e.name+":",key:e.name,emojiSize:x["a"].SMALL})}),l,c)}},{key:"renderFile",value:function e(){var t=this.props.files;if(!t||!t.length)return null;var r=t[0];if(!r)return null;return v.a.createElement(D["a"],{key:r.id,file:r,onClick:this.onFileClick})}},{key:"renderActions",value:function e(){var t=_()("c-search_message__actions","c-message_actions__container--search",{"c-search_message__actions--dense":"dense"===this.props.theme});return v.a.createElement(L["a"],{className:t,ariaLabel:z.t("Message actions")},v.a.createElement(B["a"],{"data-qa":"copy-link",iconType:"link",ariaHasPopup:false,label:z.t("Copy link"),onClick:this.onCopyLink}))}},{key:"render",value:function e(){var t=this.props,r=t.theme,a=t.canBeTruncated,n=t.expanded;var i=_()("c-search_message","c-search_message--"+r,{"c-search_message--collapsed":!n&&a,"c-search_message--focus":this.state.hasKeyboardFocus});return v.a.createElement(T["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},v.a.createElement("div",{className:i,role:"presentation","data-qa":"search_result",onClick:this.onClick,onMouseMove:this.onMouseMove},this.renderGutter(),v.a.createElement("div",{className:"c-search_message__content"},this.renderContentHeader(),this.renderText(),this.renderAttachments(),this.renderReactionsAndReplies(),this.renderFile(),this.renderActions())))}}]);return t}(f["PureComponent"]);J.displayName="SearchResult";function Z(e){return Object(E["a"])(e,function(e,t){return v.a.createElement("span",{className:"c-search__match",key:t},e)})}J.defaultProps=Y;t["a"]=J},function(e,t,r){"use strict";var a=r(129);var n=r(1);var i=r.n(n);var s=r(76);var o=r(15);var l=r.n(o);var c=r(1743);var u=r.n(c);var d={children:a["b"].node,className:a["b"].string,ariaLabel:a["b"].string};var p={children:null,className:null,ariaLabel:null};var m=function e(t){var r=t.className,a=t.children,n=t.ariaLabel;return i.a.createElement("div",{className:l()("c-message_actions__container",r),role:"group","aria-label":n},a)};m.displayName="MessageActionContainer";m.defaultProps=p;t["a"]=Object(s["pure"])(m)},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var a=r(142);var n=r(23);var i=r(50);var s=r(26);var o=r(16);var l=r(48);var c=r(219);var u=r(30);var d=r(164);var p=r(39);var m=function e(t,r,a){return"USD"===t&&r!==u["e"].UNITED_STATES&&"es-ES"!==a&&"fr-FR"!==a};var h=function e(t){var r=Object(n["getTeamId"])(t);var u=Object(i["getTeamById"])(t,r);var h=Object(l["getTeamDisplayName"])(u);var f=Object(o["isRestricted"])(Object(s["getCurrentMember"])(t));var v=Object(a["selectActiveCurrency"])(t);var b=Object(p["f"])();var g=m(v,Object(c["getCompanyAddressCountry"])(t),b);var _=Object(d["a"])({state:t});var y=Object(a["selectActiveProductId"])(t);var k={teamName:h,isUserRestricted:f,yearlyPlanCostPerTerm:Object(a["selectCostPerTermForYearlyPlan"])(t),monthlyPlanCostPerTerm:Object(a["selectCostPerTermForMonthlyPlan"])(t),availableCurrencies:Object(a["selectAvailableCurrencies"])(t),planCostPerTerm:Object(a["selectActivePlanCostPerTerm"])(t),planIsYearly:Object(a["selectActivePlanIsYearly"])(t),numMonthsPerPlan:Object(a["selectActivePlanMonthsCount"])(t),planCurrency:v,numBillableMembers:Object(a["selectBillableActiveUsers"])(t),numInactiveMembers:Object(a["selectInactiveUsers"])(t),isZeroActiveMembers:Object(a["isZeroRealActiveUsers"])(t),totalMembers:Object(a["selectTotalUsers"])(t),paidSeats:Object(a["selectPaidSeats"])(t),tax:Object(a["selectTax"])(t),teamCredits:Object(a["selectCurrentTeamCredits"])(t),currentTeamCredits:Object(a["selectCurrentTeamCredits"])(t),totalCost:Object(a["selectSubtotal"])(t),totalCostWithTax:Object(a["selectTotalRecurring"])(t),totalRecurringTax:Object(a["selectTotalRecurringTax"])(t),isCostValid:Object(a["isCostValid"])(t),didCostFetchFail:Object(a["isAPIError"])(t),isPlansAndCostDataLoaded:Object(a["selectIsPlansAndCostDataLoaded"])(t),showCurrencyLabel:g,clogger:_,activeProductId:y};return k}},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(129);var s=r(76);var o=r(10);var l=r(855);var c=new o["b"]("pricing_calculator");var u={planIsYearly:i["b"].bool,formattedPlanCost:i["b"].string,billedMembers:i["b"].number,numInactiveMembers:i["b"].number,featureCheckoutFlowTranslations:i["b"].bool};var d={planIsYearly:true,formattedPlanCost:"",billedMembers:0,numInactiveMembers:0,featureCheckoutFlowTranslations:false};function p(e){var t=e.planIsYearly,r=e.billedMembers,a=e.numInactiveMembers,i=e.formattedPlanCost,s=e.featureCheckoutFlowTranslations;if(!s)return null;var o=n.a.createElement(l["a"],{type:"times-small",className:"sk_light_gray"});var u=a?c.rt("{billedMembers, plural, =1 {# active member} other {# active members}}",{billedMembers:r}):c.rt("{billedMembers, plural, =1 {# member} other {# members}}",{billedMembers:r});var d=t?c.t("1 year"):c.t("1 month");return n.a.createElement("div",{className:"display_flex flex_wrap align_items_center"},n.a.createElement("div",null,i),o,n.a.createElement("div",null,u),o,n.a.createElement("div",null,d))}p.displayName="SubtotalCalculation";p.defaultProps=d;t["a"]=Object(s["pure"])(p)},,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(9);var s=r.n(i);var o=r(1);var l=r.n(o);var c=r(129);var u=r(77);var d=r(26);var p=r(31);var m=r(872);var h=r(29);var f=r(164);var v=r(16);var b=Object(p["b"])("Opens app permission dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.appUserId,i=r.cancelText,o=r.channelId,c=r.eventId,p=r.goButtonText,b=r.onAuthorize,g=r.onDismiss,_=r.referringEventId,y=r.referringUiContext,k=r.renderTitle,O=r.scopeInfo,E=r.title;var w=_;var C=y;var S=function e(r){var n,i;var l=Object(d["getMemberById"])(t(),a);var u=s()({},h["p"].action,r);var p=Object(f["a"])({state:t()});p.track(c,s()({contexts:(i={},s()(i,h["b"].ui_context,u),s()(i,h["b"].referring_ui_context,C),s()(i,h["b"].core,(n={},s()(n,h["c"].app_id,Object(v["getAppIdFromMember"])(l)),s()(n,h["c"].channel_id,o),n)),i)},h["b"].referring_event_id,w));w=c;C=u};var j={appUserId:a,cancelText:i,channelId:o,goButtonText:p,onAuthorize:function e(){S(h["o"].ALLOW);return b()},onDismiss:function e(){S(h["o"].DO_NOT_ALLOW);return g()},onClose:function e(){S(h["o"].CLOSE)},renderTitle:k,scopeInfo:O,title:E};var I=l.a.createElement(m["b"],n()({},j));e(Object(u["openModal"])({element:I}));S(h["o"].IMPRESSION)});b.propTypes={appUserId:c["b"].string.isRequired,goButtonText:c["b"].string,cancelText:c["b"].string,scopeInfo:c["b"].arrayOf(c["b"].shape({scopes:c["b"].arrayOf(c["b"].string),is_dangerous:c["b"].bool,short_description:c["b"].string.isRequired,long_description:c["b"].string})).isRequired,onAuthorize:c["b"].func.isRequired,onDismiss:c["b"].func,channelId:c["b"].string,eventId:c["b"].oneOfType([c["b"].string,c["b"].number]),referringEventId:c["b"].oneOfType([c["b"].string,c["b"].number]),referringUiContext:c["b"].object,renderTitle:c["b"].func,title:c["b"].string};t["a"]=b},,function(e,t,r){"use strict";r.r(t);var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(129);var u=r(4);var d=r(19);var p=r(12);var m;function h(e){if(!e||!e.id)return false;if(Object(p["isIm"])(e)&&!e.name&&!Object(p["getMemberIdFromIm"])(e))return false;if(Object(p["isMpim"])(e)&&!e.name&&!e._internal_name)return false;if(!e.name)return false;return true}function f(e,t){if(!t||!t.id||Object(p["isFromAnotherTeam"])(t))return e;e=v(e,t.id);var r=t.id;var a=l.a.toLower(t.name);var n={};if(Object(p["isIm"])(t)&&Object(p["getMemberIdFromIm"])(t)){var i=Object(p["getMemberIdFromIm"])(t);e.ims[i]=r;e.ims[a]=r;n.ims=[i,a]}else if(Object(p["isMpim"])(t)&&t._internal_name){var s=t._internal_name;e.mpims[s]=r;e.mpims[a]=r;n.mpims=[s,a]}else{e.channelsAndGroups[a]=r;n.channelsAndGroups=[a]}e.reverseMap[r]=n;return e}function v(e,t){if(!t)return e;if(!e.reverseMap||!e.reverseMap[t]||l.a.isEmpty(e.reverseMap[t]))return e;var r=s()({},e);var a=e.reverseMap[t];Object.keys(a).forEach(function(e){var t=a[e];if(!t||!t.length)return;t.forEach(function(t){delete r[e][t]})});r.reverseMap[t]={};return r}function b(e,t){if(!t||!t.length||!l.a.isArray(t))return e;var r=l.a.filter(t,h);if(!r.length)return e;var a={channelsAndGroups:s()({},e.channelsAndGroups),ims:s()({},e.ims),mpims:s()({},e.mpims),reverseMap:s()({},e.reverseMap)};r.forEach(function(e){f(a,e)});return a}var g={channelsAndGroups:{},ims:{},mpims:{},reverseMap:{}};var _=Object(u["c"])((m={},n()(m,d["addOrReplaceChannels"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channels,a=t.reason;if(!a)return e;return b(e,r)}),n()(m,d["removeChannels"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ids;if(!r||!r.length)return e;var a={channelsAndGroups:s()({},e.channelsAndGroups),ims:s()({},e.ims),mpims:s()({},e.mpims),reverseMap:s()({},e.reverseMap)};r.forEach(function(e){v(a,e)});return a}),m),g);_.propTypes={channelsAndGroups:c["b"].objectOf(c["b"].string),ims:c["b"].objectOf(c["b"].string),mpims:c["b"].objectOf(c["b"].string),reverseMap:c["b"].objectOf(c["b"].shape({channelsAndGroups:c["b"].arrayOf(c["b"].string),ims:c["b"].arrayOf(c["b"].string),mpims:c["b"].arrayOf(c["b"].string)}))};t["default"]=_},function(e,t,r){"use strict";r.r(t);r.d(t,"setMarkingState",function(){return m});r.d(t,"clearAllMarkingFlags",function(){return h});r.d(t,"clearMarkingFlagsForIds",function(){return f});r.d(t,"getAllIdsNeedingMarking",function(){return g});r.d(t,"getAllUnmutedIdsNeedingMarking",function(){return _});r.d(t,"getAllMutedIdsNeedingMarking",function(){return y});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(129);var u=r(4);var d=r(374);var p;var m=Object(u["a"])("Update the apiNeedsMarking flag for a channel");m.propTypes={id:c["b"].string.isRequired,needsApiMarking:c["b"].bool.isRequired};var h=Object(u["a"])("Wipe out all API needs marking flags when they are all completed");h.propTypes=null;var f=Object(u["a"])("Remove API needs marking flags for specified IDs");f.propTypes=c["b"].arrayOf(c["b"].string).isRequired;var v={};var b=Object(u["c"])((p={},n()(p,m,function(e,t){if(t.needsApiMarking)return s()({},e,n()({},t.id,t.needsApiMarking));return l.a.omit(e,t.id)}),n()(p,h,function(e){if(l.a.isEqual(e,v))return e;return v}),n()(p,f,function(e,t){if(l.a.isEqual(e,v))return e;return l.a.omit(e,t)}),p),v);b.propTypes=c["b"].objectOf(c["b"].bool);t["default"]=b;var g=Object(u["d"])(function(e){var t=e&&e.channelsMeta&&e.channelsMeta.needsApiMarking;if(!t)return[];return l.a.keys(t)});var _=Object(u["d"])(function(e){var t=g(e);return l.a.filter(t,function(t){return!Object(d["isChannelMutedById"])(e,t)})});var y=Object(u["d"])(function(e){var t=g(e);return l.a.filter(t,function(t){return Object(d["isChannelMutedById"])(e,t)})})},function(e,t,r){"use strict";var a=r(1133);t["a"]=[a["b"]]},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(1384);var l=r.n(o);var c=r(185);var u="_testOnlyFlush";var d=false;var p=function e(t){return function(){if(Object(c["a"])()&&!d){var e=t.apply(void 0,arguments);return s()({},e,{subscribeImmediate:e.subscribe})}var r=void 0;var a=void 0;var i=function e(){a=null;if(r){var t=r;r=null;t()}};var l=function e(t){if(a)return;r=t;a=requestAnimationFrame(i)};var p=Object(o["batchedSubscribe"])(l)(t);return s()({},p.apply(void 0,arguments),n()({},u,i))}};t["b"]=p;var m={setEnableEvenInTests:function e(t){d=t}}},,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(129);var s=r(4);var o=r(37);var l=r(670);var c=r(795);var u=r(796);var d=r(17);var p="IMPROVED_SEARCH";var m=Object(s["e"])("Clog a search open event using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.tab;e(Object(o["setTabOnly"])({tab:a}));var i=t();Object(d["a"])({getState:t}).info(p,'Switching to tab "'+a+'"');e(Object(u["a"])(n()({method:"search_tab",request_id:Object(l["a"])(i)},Object(c["a"])(i))))});m.propTypes={method:i["b"].string};t["a"]=m},,,,,,,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(14);var f=r(15);var v=r.n(f);var b=r(2);var g=r(11);var _=r(1147);var y=r(10);var k=r(456);var O=r(174);var E=r(1766);var w=new y["b"]("workspace_directory");var C={large:"large",small:"small"};var S={large:64,small:48};var j={team:d["b"].shape({id:d["b"].string,description:d["b"].string,discoverable:d["b"].string,name:d["b"].string,domain:d["b"].string,is_member:d["b"].bool,date_requested_join:d["b"].oneOfType([d["b"].string,d["b"].number]),icon:d["b"].object,is_inactive:d["b"].bool,user_counts:d["b"].object}).isRequired,size:d["b"].oneOf(Object(b["values"])(C)),featureZeroWorkspaceOnboarding:d["b"].bool.isRequired,className:d["b"].string,onActionReject:d["b"].func,onActionResolve:d["b"].func,anchorPage:d["b"].string,openDialog:d["b"].func,doLaunchInNewTab:d["b"].bool};var I={allowInstantJoin:false,size:C.large,className:"",onActionResolve:b["noop"],onActionReject:b["noop"],anchorPage:"",openDialog:b["noop"],doLaunchInNewTab:false};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onCardClick=r.onCardClick.bind(r);r.onKeyPress=r.onKeyPress.bind(r);r.onResize=r.onResize.bind(r);r.openDialog=r.openDialog.bind(r);r.state={isMobileView:false};return r}s()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(O["c"])());window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.setIsMobileView(Object(O["c"])())}},{key:"onCardClick",value:function e(t){t.stopPropagation();t.preventDefault();this.isSmallVariationCard()&&this.openDialog()}},{key:"onKeyPress",value:function e(t,r){t.preventDefault();if("Enter"===t.key)switch(r){case"openDialog":if(this.isSmallVariationCard())return this.openDialog();break;default:}return null}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"isSmallVariationCard",value:function e(){return this.props.size===C.small}},{key:"isLargeVariationCard",value:function e(){return this.props.size===C.large}},{key:"openDialog",value:function e(){var t=this.props,r=t.team,e=t.openDialog;e({team:r})}},{key:"renderAvatar",value:function e(){var t=this.props.team;var r=this.isLargeVariationCard()&&!this.state.isMobileView?S[C.large]:S[C.small];return m.a.createElement("div",{className:"display_flex"},m.a.createElement(k["a"],{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:r,entityData:t,featureReactMessages:true,featureReactMemberProfileCard:true}))}},{key:"renderWorkspaceName",value:function e(){var t=this.props.team.name;return m.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":true,title:t},t)}},{key:"renderWorkspaceSubtitle",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.team;if(!r)return null;var n=this.state.isMobileView;var i=a.date_requested_join,s=a.discoverable,o=a.domain,l=a.user_counts;l=void 0===l?{}:l;var c=l.active_members,u=void 0===c?0:c;var d=w.t("{activeMembers} active members",{activeMembers:u?Object(y["k"])(u):0});var p=void 0;p=this.isLargeVariationCard()&&!n?m.a.createElement("div",null,m.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},d),m.a.createElement("span",{className:"overflow_ellipsis"},o+".slack.com")):this.isSmallVariationCard()&&"closed"===s&&i?m.a.createElement("span",null,w.t("Awaiting admin approval")):m.a.createElement("span",{className:"overflow_ellipsis"},d);return m.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":true},p)}},{key:"renderWorkspaceStatus",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.team;if(!r||this.isSmallVariationCard())return null;var n=Object(O["f"])(a,{context:"largeCard",featureZeroWorkspaceOnboarding:r});if(!n)return null;return m.a.createElement("div",{className:"p-workspace_directory_card__status"},n)}},{key:"renderWorkspaceDescription",value:function e(){var t=this.props.team.description;return m.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":true},t)}},{key:"renderButton",value:function e(){var t=this.props,r=t.team,a=t.size,n=t.onActionReject,i=t.onActionResolve,s=t.anchorPage,o=t.doLaunchInNewTab;var l=this.isLargeVariationCard()?"large":"medium";return m.a.createElement(_["a"],{team:r,buttonContext:a+"Card",featureZeroWorkspaceOnboarding:true,customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:n,onActionResolve:i,anchorPage:s,doLaunchInNewTab:o,size:l})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.featureZeroWorkspaceOnboarding,n=r.size,i=r.className;if(!a)return null;var s=this.props.team.id;var o=v()("p-workspace_directory_card",i,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return m.a.createElement("div",{className:o,onClick:this.onCardClick,onKeyPress:function e(r){return t.onKeyPress(r,"openDialog")},"data-workspace-id":s,"data-qa-ws-directory-card":true,"data-qa-ws-directory-card-size":n,role:"button",tabIndex:"0"},m.a.createElement("div",{className:"display_flex flex_direction_column"},m.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),m.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}]);return t}(p["Component"]);T.displayName="WorkspaceDirectoryCard";T.defaultProps=I;var N=function e(t){return{featureZeroWorkspaceOnboarding:Object(g["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding")}};var A={};var R=Object(h["connect"])(N)(T);r.d(t,false,function(){return});r.d(t,false,function(){return});var M=t["a"]=R},,,function(e,t,r){"use strict";var a=r(32);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(5);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(7);var p=r.n(d);var m=r(8);var h=r.n(m);var f=r(129);var v=r(1);var b=r.n(v);var g=r(14);var _=r(2);var y=r(270);var k=r(11);var O=r(26);var E=r(20);var w=r(18);var C=r(10);var S=r(174);var j=new C["b"]("workspace_directory");var I={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"};var T={team:f["b"].shape({id:f["b"].string,description:f["b"].string,discoverable:f["b"].string,name:f["b"].string,domain:f["b"].string,is_member:f["b"].bool,date_requested_join:f["b"].oneOfType([f["b"].string,f["b"].number]),icon:f["b"].object,is_inactive:f["b"].bool,user_counts:f["b"].object}).isRequired,buttonContext:f["b"].oneOf(Object(_["values"])(S["a"])),featureZeroWorkspaceOnboarding:f["b"].bool.isRequired,customClasses:f["b"].string,onWorkspaceLaunch:f["b"].func,onDefaultButtonClick:f["b"].func,doLaunchInNewTab:f["b"].bool,displayDirectoryInModal:f["b"].bool,onActionReject:f["b"].func,onActionResolve:f["b"].func,anchorPage:f["b"].string,doUpsertJoin:f["b"].bool,callJoinWorkspace:f["b"].func,callRequestToJoinWorkspace:f["b"].func,size:f["b"].oneOf(["medium","large"])};var N={buttonContext:"largeCard",onClick:_["noop"],customClasses:"",onWorkspaceLaunch:_["noop"],onDefaultButtonClick:_["noop"],doLaunchInNewTab:false,displayDirectoryInModal:false,callJoinWorkspace:_["noop"],callRequestToJoinWorkspace:_["noop"],size:"large",onActionReject:_["noop"],onActionResolve:_["noop"],anchorPage:void 0,doUpsertJoin:false};var A=function e(t){var r=t.displayDirectoryInModal;var a="primary";var n="join";var i=r?j.t("Join and Open"):j.t("Join and Launch Slack");return{text:i,type:a,"data-qa-ws-directory-button-type":a,"data-qa-ws-directory-button-text":n,"data-qa":n}};var R=function e(){var t="primary";var r="request_to_join";return{text:j.t("Request to Join"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":r,"data-qa":r}};var M=function e(){var t="primary";var r="request_sent";return{text:j.t("Request Sent"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":r,"data-qa":r,disabled:true}};var P=function e(t){var r=t.displayDirectoryInModal;var a="primary";var n="launch";var i=r?j.t("Open"):j.t("Launch in Slack");return{text:i,type:a,"data-qa-ws-directory-button-type":a,"data-qa-ws-directory-button-text":n,"data-qa":n}};var x=function e(){var t="outline";var r="default";return{type:t,text:j.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":r,"data-qa":r}};var D=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={loading:false};r.buttonType=null;r.onClick=r.onClick.bind(r);r.onKeyPress=r.onKeyPress.bind(r);return r}u()(t,[{key:"onKeyPress",value:function e(t){t.stopPropagation();t.preventDefault();13===t.which&&this.handleButtonAction()}},{key:"onClick",value:function e(t){t.stopPropagation();t.preventDefault();this.handleButtonAction()}},{key:"onWorkspaceJoin",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.windowOpener;var n=this.props,i=n.team,o=n.onActionReject,l=n.onActionResolve,c=n.anchorPage,u=n.doUpsertJoin;return this.props.callJoinWorkspace({teamId:i.id,anchorPage:c,doUpsertJoin:u}).then(function(){var e={};u&&(e.workspace=s()({},i,{is_member:true}));l(e)}).then(function(){return t.props.onWorkspaceLaunch(a)}).catch(function(e){if(a){t.setLoading(false);a.close()}o({node:b.a.createElement("span",null,j.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:e})})}},{key:"onWorkspaceRequestToJoin",value:function e(){var t=this;var r=this.props,a=r.team,n=r.onActionReject,i=r.onActionResolve,o=r.anchorPage;return this.props.callRequestToJoinWorkspace({teamId:a.id,anchorPage:o}).then(function(){i({node:b.a.createElement("div",{className:"display_flex"},b.a.createElement(w["b"],{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),b.a.createElement("span",null,j.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:s()({},a,{date_requested_join:String(Math.floor(Date.now()))})})}).then(function(){t.setLoading(false)}).catch(function(e){n({node:b.a.createElement("span",null,j.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:e})})}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getButtonProps",value:function e(t){var r=this.props.displayDirectoryInModal;switch(t){case I.launch:return P({displayDirectoryInModal:r});case I.request:return R();case I.join:return A({displayDirectoryInModal:r});case I.request_sent:return M();case I.default:return x();default:return null}}},{key:"handleButtonAction",value:function e(){var t=this.props.doLaunchInNewTab;if("default"===this.buttonType)return this.props.onDefaultButtonClick();this.setLoading(true);if("join"===this.buttonType){if(t){var r=window.open("","_blank");return this.onWorkspaceJoin({windowOpener:r})}return this.onWorkspaceJoin()}if("request"===this.buttonType)return this.onWorkspaceRequestToJoin();if("launch"===this.buttonType){this.props.onWorkspaceLaunch();t&&this.setLoading(false)}return null}},{key:"render",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.team,i=t.buttonContext,o=t.customClasses,l=t.size;var c=this.state.loading;var u=U(a,{context:i,featureZeroWorkspaceOnboarding:r});this.buttonType=u;var d=this.getButtonProps(u);if(!u||Object(_["isEmpty"])(d))return null;var p=a.id;var m=d.text,h=n()(d,["text"]);var f=h.disabled||c;return b.a.createElement(E["b"],s()({},h,{className:o,role:"button",tabIndex:"0",onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":p,"data-qa-ws-directory-button":true,loading:c,disabled:f,size:l}),m)}}]);return t}(v["Component"]);D.displayName="WorkspaceDirectoryButton";D.defaultProps=N;var F=function e(t,r){var a=r.team,n=r.onActionResolve,i=r.anchorPage,s=r.doLaunchInNewTab,o=r.channelRedirect,l=r.postLaunchAction,c=r.userIdFromURL;var u=Object(O["getCurrentMember"])(t);return{featureZeroWorkspaceOnboarding:Object(k["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),displayDirectoryInModal:Object(k["isClientApp"])(t),onWorkspaceLaunch:function e(r){return Object(S["i"])(t,{team:a,user:u,onActionResolve:n,anchorPage:i,doLaunchInNewTab:s,windowOpener:r,channelRedirect:o,postLaunchAction:l,userIdFromURL:c})}}};var L={callJoinWorkspace:y["c"],callRequestToJoinWorkspace:y["e"]};var B=Object(g["connect"])(F,L)(D);function U(e,t){var r=t.context,a=void 0===r?S["a"].smallCard:r,n=t.featureZeroWorkspaceOnboarding,i=void 0===n||n;if(!i)return null;var s=e.is_member,o=e.date_requested_join,l=e.is_assigned,c=e.discoverable;if(s)return I.launch;if(a!==S["a"].smallCard){if(l)return I.join;switch(c){case"open":return I.join;case"closed":if(!o)return I.request;if(a===S["a"].largeCard)return I.request_sent;break;case"unlisted":break;default:}return null}return I.default}r.d(t,false,function(){return});var q=t["a"]=B},,,,,,,,function(e,t,r){"use strict";var a=r(1399);t["a"]=a["a"]},,function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(216);function n(e){return Object(a["a"])((e||"").trim().toLowerCase())}},function(e,t,r){"use strict";var a=r(24);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(129);var h=r(1);var f=r.n(h);var v=r(104);var b=r(15);var g=r.n(b);var _=r(2);var y=r(20);var k=r(18);var O=r(188);var E=r(10);var w=r(2130);var C=new E["b"]("coachmarks");var S=150;var j=-500;var I={children:m["b"].element,className:m["b"].string,position:m["b"].string,delay:m["b"].number,content:m["b"].oneOfType([m["b"].node,m["b"].func]),zIndex:m["b"].oneOf(["above_fs","fs","menu","below_menu"]),onContinue:m["b"].func,onShow:m["b"].func,onSkip:m["b"].func,hasCloseButton:m["b"].bool,hasSkipLink:m["b"].bool,hasSkipButton:m["b"].bool,skipButtonText:m["b"].string,continueButtonText:m["b"].string,skipLinkPre:m["b"].string,skipLinkText:m["b"].string,title:m["b"].node,shouldShow:m["b"].oneOfType([m["b"].func,m["b"].bool])};var T={children:void 0,className:void 0,position:"right",delay:0,content:"",zIndex:"above_fs",onContinue:_["noop"],onShow:_["noop"],onSkip:_["noop"],hasCloseButton:true,hasSkipLink:true,hasSkipButton:false,skipButtonText:"",skipLinkPre:C.t("Done?"),skipLinkText:C.t("Click here to skip"),continueButtonText:C.t("Got it!"),title:"",shouldShow:false};var N=function(e){p()(t,e);function t(){s()(this,t);var e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={isShowing:false,contentsRect:null};e.setCoachmarkedContentRef=e.setCoachmarkedContentRef.bind(e);e.setCoachmarkRef=e.setCoachmarkRef.bind(e);e.maybeShowCoachmark=e.maybeShowCoachmark.bind(e);e.measureContents=e.measureContents.bind(e);e.onSkipClick=e.onSkipClick.bind(e);e.onCloseClick=e.onCloseClick.bind(e);e.onContinueClick=e.onContinueClick.bind(e);e.onResize=Object(_["debounce"])(e.measureContentsAndSetState.bind(e),S,{maxWait:S});return e}l()(t,[{key:"componentWillMount",value:function e(){this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay)}},{key:"componentWillReceiveProps",value:function e(t){this.props.shouldShow!==t.shouldShow&&true===t.shouldShow?this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay):this.props.shouldShow!==t.shouldShow&&false===t.shouldShow&&this.hideCoachmark()}},{key:"componentWillUnmount",value:function e(){this.hideCoachmark();window.clearTimeout(this.delayTimer);this.onResize.cancel();if(this.listenerInstalled){window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}}},{key:"onSkipClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"SKIP")}},{key:"onCloseClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"CLOSE")}},{key:"onContinueClick",value:function e(t){this.hideCoachmark();this.props.onContinue(t)}},{key:"setCoachmarkedContentRef",value:function e(t){this.coachmarkedContent=t}},{key:"setCoachmarkRef",value:function e(t){this.coachmark=t}},{key:"measureContents",value:function e(){if(this.coachmarkedContent)return Object(v["findDOMNode"])(this.coachmarkedContent).getBoundingClientRect();return null}},{key:"measureContentsAndSetState",value:function e(){var t=this;this.setState(function(){return{contentsRect:t.measureContents()}})}},{key:"maybeShowCoachmark",value:function e(){var t=this;var r=Object(_["isFunction"])(this.props.shouldShow)?this.props.shouldShow():this.props.shouldShow;if(r){this.setState(function(){return{isShowing:true,contentsRect:t.measureContents()}});window.addEventListener("resize",this.onResize);this.listenerInstalled=true;this.props.onShow()}else this.hideCoachmark()}},{key:"hideCoachmark",value:function e(){this.setState(function(){return{isShowing:false,contentsRect:null}});window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}},{key:"renderCloseButton",value:function e(){if(!this.props.hasCloseButton)return null;return f.a.createElement(y["c"],{className:"p-coachmark__close_btn","data-qa":"coachmark_close_btn",onClick:this.onCloseClick,"aria-label":C.t("Close")},f.a.createElement(k["a"],{type:"times"}))}},{key:"renderTitle",value:function e(){return f.a.createElement("h3",{className:"p-coachmark__title"},this.props.title)}},{key:"renderContent",value:function e(){return f.a.createElement("div",{className:"p-coachmark__content"},this.props.content)}},{key:"renderSkipLink",value:function e(){if(!this.props.hasSkipLink)return null;var t=this.props.skipLinkPre;var r=this.props.skipLinkText;return f.a.createElement("div",{className:"p-coachmark__skip_link"},f.a.createElement("span",null,t),t&&" ",f.a.createElement(y["c"],{className:"p-coachmark__skip_link_button","data-qa":"coachmark_skip_link",onClick:this.onSkipClick},r))}},{key:"renderSkipButton",value:function e(){if(!this.props.hasSkipButton)return null;return f.a.createElement(y["d"],{onClick:this.onSkipClick,type:"outline",className:"p-coachmark__skip_button margin_right_50","data-qa":"coachmark_skip_btn"},this.props.skipButtonText)}},{key:"renderFooter",value:function e(){var t=this.props.hasSkipLink?"p-coachmark__footer":g()("p-coachmark__footer","margin_top_100");return f.a.createElement("div",{className:t},this.renderSkipLink(),this.renderSkipButton(),f.a.createElement(y["d"],{onClick:this.onContinueClick,className:"p-coachmark__continue_button","data-qa":"coachmark_continue_btn"},this.props.continueButtonText))}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.position,i=t.zIndex;var s=this.state,o=s.isShowing,l=s.contentsRect;var c=g()("p-coachmark","p-coachmark--"+a,this.props.className);var u=o&&f.a.createElement(O["a"],{isOpen:o,position:a,targetBounds:l,allowanceX:j,allowanceY:j,zIndex:i,key:"coachmark-popover",onClose:this.onCloseClick},f.a.createElement("div",{className:c,"data-qa":"coachmark",ref:this.setCoachmarkRef},f.a.createElement("div",{className:"p-coachmark__callout"}),this.renderCloseButton(),this.renderTitle(),this.renderContent(),this.renderFooter()));return f.a.cloneElement(r,{ref:this.setCoachmarkedContentRef},[].concat(n()(f.a.Children.toArray(r.props.children)),[u]))}}]);return t}(h["PureComponent"]);N.displayName="Coachmark";N.defaultProps=T;var A=N;var R=t["a"]=A},function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(2);var n=r.n(a);var i=/\.spec\.jsx?$/;function s(e){return!i.test(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r={};if(!e||!Object(a["isFunction"])(e.keys))throw new Error("Cannot call importAll without a valid require.context.\n\t\t\tSee https://webpack.js.org/guides/dependency-management/#require-context.");var n=t?e.keys():e.keys().filter(s);n.forEach(function(t){r[t]=e(t)});return r}},function(e,t,r){"use strict";r.d(t,"c",function(){return s});r.d(t,"a",function(){return o});r.d(t,"b",function(){return l});var a=r(2);var n=r.n(a);var i=r(13);var s=Object(i["c"])("TS.ui.channel_browser.start",n.a.noop);var o=Object(i["c"])("TS.ui.channel_browser.highlightPendingInvitationsOnNextOpen",n.a.noop);var l=Object(i["c"])("TS.ui.channel_browser.openConnectedWorkspacesModal",n.a.noop)},,,function(e,t,r){"use strict";r.r(t);r.d(t,"noopAction",function(){return o});var a=r(9);var n=r.n(a);var i=r(129);var s=r(4);var o=Object(s["a"])("NOOP");o.propTypes=null;var l=0;var c=Object(s["c"])(n()({},o,function(e){return e+1}),l);c.propTypes=i["b"].number;t["default"]=c},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(13);var n=Object(a["c"])("TS.ui.channel_prefs_dialog.start")},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h={item:d["b"].object};var f={item:{}};var v=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.item;var r=t.member.profile.image_48+" 1x, "+t.member.profile.image_72+" 2x";return m.a.createElement("div",{className:"c-lazy_filter_select__member_item"},m.a.createElement("img",{alt:"",className:"c-lazy_filter_select__member_list_icon",src:t.member.profile.image_48,srcSet:r}),m.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},t.member.profile.real_name),m.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},"@",t.member.name))}}]);return t}(p["PureComponent"]);v.displayName="LazyFilterSelectMemberListItem";t["a"]=v;v.defaultProps=f},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h={item:d["b"].object};var f={item:{}};var v=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.item;return m.a.createElement("div",{className:"c-lazy_filter_select__member_token",key:t.id},m.a.createElement("img",{alt:"",className:"c-lazy_filter_select__member_token_icon",src:t.member.profile.image_48}),m.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},t.member.profile.real_name))}}]);return t}(p["PureComponent"]);v.displayName="LazyFilterSelectMemberToken";t["a"]=v;v.defaultProps=f},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(129);var s=r(31);var o=r(77);var l=r(759);var c=Object(s["b"])("Opens the custom status input in a dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.fromKeyboardShortcut,i=void 0!==a&&a;e(Object(o["openModal"])({element:n.a.createElement(l["c"],{useDialog:true,focusOnMount:true,openedFromKeyboardShortcut:i})}))});c.propTypes={fromKeyboardShortcut:i["b"].bool};t["a"]=c},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(14);var f=r(2);var v=r.n(f);var b=r(72);var g=r(44);var _=r(36);var y=r(11);var k=r(78);var O=r(10);var E=r(1442);var w=r(103);var C=r(1171);var S=new O["b"]("msg_edit");var j={ts:m["b"].string.isRequired,channelId:m["b"].string.isRequired,subtype:m["b"].string,removeMessage:m["b"].func,hasFile:m["b"].bool,fileMode:m["b"].string,rollup:b["a"].Rollup(),useBulkDelete:m["b"].bool};var I={removeMessage:f["noop"],subtype:void 0,hasFile:false,fileMode:void 0,rollup:void 0,useBulkDelete:false};var T=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}s()(t,[{key:"onGo",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.removeMessage,i=t.useBulkDelete,s=t.rollup;var o=i?Object(f["reduce"])(s,function(e,t){return e.concat(t.timestamps)},[]):[];o.sort();n({channelId:a,ts:r,rollupTimestamps:i&&o?o:[]}).catch(f["noop"])}},{key:"getBodyText",value:function e(){var t=this.props.subtype;if(!t)return null;var r=this.getFileLabel();if("file_upload"===t){if("file"===r)return S.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===r)return S.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===r)return S.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===t){if("file"===r)return S.t("Note that deleting this message will not unshare the file.");if("snippet"===r)return S.t("Note that deleting this message will not unshare the snippet.");if("post"===r)return S.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===t)return S.t("Note that deleting this message will not delete the comment.");return null}},{key:"getFileLabel",value:function e(){var t=this.props,r=t.hasFile,a=t.fileMode;if(!r)return null;if("snippet"===a)return"snippet";if("post"===a)return"post";return"file"}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.rollup,i=t.useBulkDelete;var s=this.getBodyText();return p.a.createElement(w["a"],{title:S.t("Delete message"),goButtonText:S.t("Delete"),goButtonType:"danger",onGo:this.onGo},S.t("Are you sure you want to delete this message? This cannot be undone."),s&&p.a.createElement("div",{className:"margin_top_50"},s),p.a.createElement("div",{className:"margin_top_100"},p.a.createElement(C["a"],{ts:r,channelId:a,rollup:i&&n?n:null,isStandalone:true})))}}]);return t}(d["PureComponent"]);T.displayName="BaseDeleteMessageDialog";T.defaultProps=I;var N=function e(t,r){var a=r.channelId,n=r.ts,i=r.rollup;var s=Object(y["isFeatureEnabled"])(t,"feature_file_threads");var o=Object(y["isFeatureEnabled"])(t,"feature_allow_bulk_delete_join_leave_messages");var l=Object(g["getMessageByTimestamp"])(t,a,n);var c=s?null:l.file;var u=s?l.files:null;var d=s?Object(k["getFileById"])(t,Object(f["first"])(u)):Object(k["getFileById"])(t,c);var p=false;var m=void 0;if(d){p=true;m=d.mode}var h=!!(o&&i);return{hasFile:p,fileMode:m,subtype:Object(_["getMessageSubtype"])(l),rollup:i,useBulkDelete:h}};var A={removeMessage:E["a"]};var R=Object(h["connect"])(N,A)(T);R.propTypes={channelId:m["b"].string.isRequired,ts:m["b"].string.isRequired};t["a"]=R},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(14);var f=r(2);var v=r.n(f);var b=r(12);var g=r(10);var _=r(19);var y=r(1442);var k=r(103);var O=r(1171);var E=new g["b"]("msg_edit");var w={ts:m["b"].string.isRequired,channelId:m["b"].string.isRequired,channelType:m["b"].string,removeMessage:m["b"].func};var C={channelType:void 0,removeMessage:f["noop"]};var S=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}s()(t,[{key:"onGo",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.removeMessage;n({channelId:a,ts:r,broadcastDelete:true}).catch(f["noop"])}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.channelType;var i=void 0;var s=void 0;if("channel"===n){i=E.t("Remove from channel");s=E.t("Are you sure you want to remove this message from the channel?")}else{i=E.t("Remove from conversation");s=E.t("Are you sure you want to remove this message from the conversation?")}return p.a.createElement(k["a"],{title:i,goButtonText:E.t("Remove message"),onGo:this.onGo},p.a.createElement("div",{className:"margin_bottom_100"},s,E.t("The original reply will still be visible in its thread.")),p.a.createElement(O["a"],{ts:r,channelId:a,isStandalone:true}))}}]);return t}(d["PureComponent"]);S.displayName="BaseRemoveBroadcastDialog";S.defaultProps=C;var j=function e(t,r){var a=r.channelId;var n=Object(_["getChannelById"])(t,a);var i=Object(b["getChannelType"])(n);return{channelType:i}};var I={removeMessage:y["a"]};var T=Object(h["connect"])(j,I)(S);T.propTypes={channelId:m["b"].string.isRequired};t["a"]=T},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(14);var h=r(129);var f=r(15);var v=r.n(f);var b=r(2);var g=r.n(b);var _=r(346);var y=r(323);var k=r(36);var O=r(70);var E=r(666);var w=r(1429);var C=r(865);var S=r(2275);var j=r.n(S);var I={msg:h["b"].object.isRequired,className:h["b"].string,children:h["b"].node,position:h["b"].oneOf(["default","inside","above"]),show:h["b"].bool,showComment:h["b"].bool,showShare:h["b"].bool,showReact:h["b"].bool,showJump:h["b"].bool,jumpOrigin:h["b"].string,messageContainerType:h["b"].oneOf(Object(b["values"])(O["MESSAGE_CONTAINERS"])),viewContext:h["b"].string,hover:h["b"].bool,setHover:h["b"].func,isEditing:h["b"].bool,maybeStartEditingMessage:h["b"].func,renderOffscreen:h["b"].bool};var T={className:void 0,children:void 0,position:"default",show:void 0,showComment:true,showShare:true,showReact:true,showJump:false,jumpOrigin:void 0,messageContainerType:void 0,viewContext:void 0,hover:false,setHover:b["noop"],isEditing:false,maybeStartEditingMessage:b["noop"],renderOffscreen:false};var N=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMenuOpen=r.onMenuOpen.bind(r);r.onMenuClose=r.onMenuClose.bind(r);r.startEditing=r.startEditing.bind(r);r.renderActions=r.renderActions.bind(r);return r}s()(t,[{key:"onMenuOpen",value:function e(){this.props.setHover(true)}},{key:"onMenuClose",value:function e(){this.props.setHover(false)}},{key:"startEditing",value:function e(){var t=this.props,r=t.msg,a=t.viewContext;var n=r.channel,i=r.ts;this.props.maybeStartEditingMessage({viewContext:a,channelId:n,ts:i})}},{key:"renderActions",value:function e(){var t=this.props,r=t.msg,a=t.hover,n=t.show,i=t.showComment,s=t.showShare,o=t.showReact,l=t.showJump,c=t.jumpOrigin,u=t.messageContainerType,d=t.isEditing,m=t.renderOffscreen;if(false===n)return null;if(void 0===n&&!a&&!m)return null;if(d)return null;var h=r.ts,f=r.thread_ts,v=r.channel,b=r.file,g=r.comment,_=r.subtype;return p.a.createElement(w["a"],{ts:h,threadTs:f,channelId:v,reactionKey:Object(y["b"])(r),isStarred:Object(k["isStarred"])(r,b,g),isReply:Object(k["isReply"])(r),isEphemeral:Object(k["isEphemeral"])(r),subtype:_,comment:r.comment&&r.comment.id,fileIds:r.files,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,onEmojiPickerOpen:this.onMenuOpen,onEmojiPickerClose:this.onMenuClose,showComment:i,showShare:s,showReact:o,showJump:l,jumpOrigin:c,editHandler:this.startEditing,messageContainerType:u,renderOffscreen:m&&!a&&!n})}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.position;var n=v()("c-message_kit__actions","c-message_kit__actions--"+a,this.props.className);return p.a.createElement("div",{className:n,style:{position:"relative"}},r,this.renderActions())}}]);return t}(d["PureComponent"]);N.displayName="MessageActions";N.defaultProps=T;var A=function e(t,r){var a=r.msg,n=r.viewContext;var i=a.channel,s=a.ts;var o=Object(_["getMessageEditData"])(t,{channelId:i,ts:s,viewContext:n}),l=o.isEditing;return{isEditing:l}};var R={maybeStartEditingMessage:function e(){return _["maybeStartEditingMessage"].apply(void 0,arguments)}};t["a"]=Object(E["b"])(Object(C["b"])(Object(m["connect"])(A,R)(N)))},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(14);var s=r(2);var o=r.n(s);var l=r(129);var c=r(17);var u=r(164);var d=r(4);var p=r(44);var m=r(1425);var h=r(371);var f=r(162);var v=r(26);var b=r(23);var g=r(50);var _=r(19);var y=r(78);var k=r(21);var O=r(279);var E=r(494);var w=r(346);var C=r(11);var S=r(12);var j=r(36);var I=r(61);var T=r(323);var N=r(465);var A=r(457);var R=r(791);var M=r(113);var P=r(692);var x=r(415);var D=r(807);var F=r(1120);var L=r(167);var B=r(272);var U=r(9);var q=r.n(U);var G=r(67);var H=r.n(G);var W=r(5);var V=r.n(W);var z=r(6);var Q=r.n(z);var K=r(7);var Y=r.n(K);var J=r(8);var Z=r.n(J);var X=r(1);var $=r.n(X);var ee=r(15);var te=r.n(ee);var re=r(345);var ae=r(370);var ne=r(1426);var ie=r(1395);var se=r(72);var oe=r(70);var le=r(656);var ce=r(226);var ue=r(501);var de=r(144);var pe=r(491);var me=r(269);var he=r(10);function fe(e,t){if(!e||!t)return false;if(t(e))return true;return fe(e.parentElement,t)}function ve(e){return fe(e,function(e){return"A"===e.nodeName})}var be=r(352);var ge=r(165);var _e=r(1427);var ye=r(20);var ke=r(255);var Oe=r(1626);var Ee=r(173);var we=r(1142);var Ce=r(87);var Se=r(41);var je=r(228);var Ie=r(613);var Te=r(786);var Ne=r(1428);var Ae=r(18);var Re=r(756);var Me=r(991);var Pe=r(737);var xe=r(1104);var De=r(665);var Fe=r(712);var Le=r(464);var Be=new he["b"]("threads");function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.latestReply,r=e.replyCount,a=e.do24hrTime;if(Object(x["a"])(Object(M["a"])(t),new Date)){if(1===r)return Be.t("Today at {time}",{time:Object(de["a"])(t,{do24hrTime:a})});return Be.t("Last reply today at {time}",{time:Object(de["a"])(t,{do24hrTime:a})})}if(1===r)return Object(Le["a"])(t);return Be.t("Last reply {time_ago}",{time_ago:Object(Le["a"])(t)})}var qe=r(189);var Ge=r(777);var He=new he["b"]("threads");var We={replies:l["b"].array,replyCount:l["b"].number.isRequired,replyUsers:l["b"].arrayOf(l["b"].string),replyUsersCount:l["b"].number,latestReply:l["b"].string,channelId:l["b"].string.isRequired,threadTs:l["b"].string.isRequired,do24hrTime:l["b"].bool,showThreadOrRefresh:l["b"].func,featureNewRepliesAfterBcast:l["b"].bool};var Ve={replies:null,do24hrTime:false,replyUsers:[],replyUsersCount:0,latestReply:null,showThreadOrRefresh:o.a.noop,featureNewRepliesAfterBcast:false};function ze(e,t){var r=Object(Ge["a"])(e);return $.a.createElement(Ee["b"],{key:e,userId:r?null:e,botId:r?e:null,size:24,additionalOverlay:t,showCard:true,ariaHidden:"true",tabIndex:"-1"})}ze.displayName="renderSingleAvatar";var Qe=function(e){Z()(t,e);function t(e){V()(this,t);var r=Y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openThread=r.openThread.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.state={hasKeyboardFocus:false};return r}Q()(t,[{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;r&&"keydown"===r.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getLastReplyTs",value:function e(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){var t=o.a.last(this.props.replies);if(t)return t.ts}return null}},{key:"openThread",value:function e(t){t.preventDefault();this.props.showThreadOrRefresh({channelId:this.props.channelId,threadTs:this.props.threadTs})}},{key:"renderFaces",value:function e(){var t=void 0;t=this.props.replyUsers&&this.props.replyUsers.length?o.a.reject(this.props.replyUsers,function(e){return"B00"===e}):o()(this.props.replies).map("user").reject(function(e){return"B00"===e}).uniq().value();var r=this.props.replyUsersCount?this.props.replyUsersCount:t.length;if(t.length>5)return o()(t).take(4).map(function(e){return ze(e)}).value().concat(ze(t[4],r-5));return o.a.map(t,function(e){return ze(e)})}},{key:"render",value:function e(){var t=this.props,r=t.replyCount,a=t.channelId,n=t.threadTs,i=t.do24hrTime,s=t.featureNewRepliesAfterBcast;var o=He.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:r});var l=Object(qe["b"])(a,n);var c=this.getLastReplyTs();var u="";u=s?Ue({latestReply:c,replyCount:r,do24hrTime:i}):Object(x["a"])(Object(M["a"])(c),new Date)?1===r?He.t("Today at {time}",{time:Object(de["a"])(c,{do24hrTime:i})}):He.t("Last reply today at {time}",{time:Object(de["a"])(c,{do24hrTime:i})}):1===r?Object(Le["a"])(c):He.t("Last reply {time_ago}",{time_ago:Object(Le["a"])(c)});var d=te()("c-message__reply_bar",{"c-message__reply_bar--focus":this.state.hasKeyboardFocus});return $.a.createElement(ke["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},$.a.createElement("div",{role:"presentation",className:d,onClick:this.openThread,"data-qa":"reply_bar"},this.renderFaces(),$.a.createElement("a",{className:"c-message__reply_count",href:l,target:"_blank",rel:"noopener noreferrer"},o),$.a.createElement("div",{className:"c-message__reply_bar_description"},$.a.createElement("span",{className:"c-message__reply_bar_last_reply"},u),$.a.createElement("span",{className:"c-message__reply_bar_view_thread"},He.t("View thread"))),$.a.createElement(Ae["a"],{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":true})))}}]);return t}($.a.PureComponent);Qe.displayName="ReplyBar";Qe.defaultProps=Ve;function Ke(e){return{do24hrTime:Object(k["getUserPref"])(e,"time24"),featureNewRepliesAfterBcast:Object(C["isFeatureEnabled"])(e,"feature_new_replies_after_bcast")}}var Ye=Object(i["connect"])(Ke,{showThreadOrRefresh:Fe["showThreadOrRefresh"]})(Qe);var Je=r(1008);var Ze=r(735);var Xe=r(3339);var $e=r(1105);var et=r(1139);var tt=r(150);var rt=r(443);var at=r(1122);var nt=r(1446);var it=new he["b"]("threads");var st={ts:l["b"].string.isRequired,threadTs:l["b"].string.isRequired,channelId:l["b"].string.isRequired,rootText:l["b"].string,theme:l["b"].string,replyCount:l["b"].number,replyUsers:l["b"].arrayOf(l["b"].string),replyUsersCount:l["b"].number,featureFileThreads:l["b"].bool,showThread:l["b"].func,featureNewRepliesAfterBcast:l["b"].bool};var ot={rootText:null,theme:"light",replyCount:0,replyUsers:void 0,replyUsersCount:0,featureFileThreads:false,showThread:s["noop"],featureNewRepliesAfterBcast:false};var lt=function(e){Z()(t,e);function t(e){V()(this,t);var r=Y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openThread=r.openThread.bind(r);return r}Q()(t,[{key:"openThread",value:function e(t){var r=this.props,a=r.showThread,n=r.channelId,i=r.threadTs,s=r.ts;t.preventDefault();a({channelId:n,threadTs:i,highlightTs:s})}},{key:"renderRepliersSummary",value:function e(t){var r=this.props,a=r.replyCount,n=r.replyUsers,i=r.replyUsersCount,s=r.featureFileThreads,o=r.featureNewRepliesAfterBcast;if(!a||!i)return null;if(o)return null;return $.a.createElement("div",{className:"c-message__broadcast_repliers"},s?null:$.a.createElement(Ae["a"],{type:"comment_alt",className:"c-message__broadcast_repliers_icon"}),$.a.createElement("a",{className:"c-message__broadcast_repliers_link",href:t,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},$.a.createElement(nt["a"],{replyCount:a,replyUsers:n,replyUsersCount:i,prefixWithReplyCount:true,broadcastPreabmle:true})))}},{key:"render",value:function e(){var t=this;var r=Object(j["constructMsgPermalink"])(this.props.channelId,this.props.ts,this.props.threadTs);var a=void 0;if(this.props.rootText)a=$.a.createElement("div",{className:"c-message__broadcast_preamble"},$.a.createElement("span",{className:"c-message__broadcast_preamble_meta"},Object(at["a"])()),$.a.createElement("a",{className:"c-message__broadcast_preamble_link",href:r,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},$.a.createElement(Ce["a"],{text:this.props.rootText,noHighlights:true,noHexColors:true,noJumbomoji:true,noLinking:true,noCode:true,noQuotes:true,customLineEnding:"\u2026"})));else{var n=it.rt("replied to <a>a thread</a>",null,function(e){var a=e.key,n=e.text;return $.a.createElement("a",{className:"c-message__broadcast_preamble_link",key:a,href:r,target:"_blank",rel:"noopener noreferrer",onClick:t.openThread},n)});a=$.a.createElement("div",{className:"c-message__broadcast_preamble"},n)}if("light"===this.props.theme)return $.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},a,this.renderRepliersSummary(r));return a}}]);return t}(rt["a"]);lt.displayName="ThreadBroadcastPreamble";lt.propTypes=st;lt.defaultProps=ot;var ct=lt;function ut(e,t){var r=t.threadTs,a=t.channelId;var n=Object(p["getMessageByTimestamp"])(e,a,r);if(!n)return{};var i=n.reply_count;var s=n.replies||[];var l=void 0;l=n.reply_users?n.reply_users:o()(s).map("user").uniq().value();var c=n.reply_users_count?n.reply_users_count:l.length;var u=Object(j["getMessageRootText"])(n);var d=Object(C["isFeatureEnabled"])(e,"feature_file_threads");if(d&&n.files&&n.files.length){var m=o.a.first(n.files);var h=Object(y["getFileById"])(e,m);u=Object(j["getMessageRootText"])(n,h)}return{rootText:u,replyCount:i,replyUsers:l,replyUsersCount:c,theme:Object(k["getUserMessagesTheme"])(e),featureFileThreads:d,featureNewRepliesAfterBcast:Object(C["isFeatureEnabled"])(e,"feature_new_replies_after_bcast")}}var dt={showThread:tt["g"]};var pt=Object(i["connect"])(ut,dt)(ct);var mt=r(65);var ht=new he["b"]("message");var ft={ts:l["b"].string.isRequired,threadTs:l["b"].string.isRequired,channelId:l["b"].string.isRequired,latestReply:l["b"].string.isRequired,showThread:l["b"].func,featureNewRepliesAfterBcast:l["b"].bool};var vt={showThread:s["noop"],featureNewRepliesAfterBcast:false};var bt=function(e){Z()(t,e);function t(e){V()(this,t);var r=Y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}Q()(t,[{key:"onClick",value:function e(t){var r=this.props,a=r.channelId,n=r.threadTs,i=r.ts;t.preventDefault();this.props.showThread({channelId:a,threadTs:n,highlightTs:i})}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.latestReply,n=t.featureNewRepliesAfterBcast;if(!n||!a)return null;if(a<=r)return null;return $.a.createElement(mt["a"],{className:"c-message__broadcast_footer",onClick:this.onClick},ht.t("View newer replies"))}}]);return t}(X["PureComponent"]);bt.displayName="ThreadBroadcastFooter";bt.defaultProps=vt;var gt=function e(t,r){var a=r.channelId,n=r.threadTs;var i=Object(p["getMessageByTimestamp"])(t,a,n);return{latestReply:Object(j["getLatestReply"])(i),featureNewRepliesAfterBcast:Object(C["isFeatureEnabled"])(t,"feature_new_replies_after_bcast")}};var _t=Object(i["connect"])(gt,{showThread:tt["g"]})(bt);var yt=r(1429);var kt=r(1432);var Ot=r(1141);var Et=r(1433);var wt=r(1434);var Ct=r(664);var St=r(348);var jt=r(48);var It=function e(){return Object(St["c"])("stars")};var Tt={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"};var Nt={isPinned:l["b"].bool,isStarred:l["b"].bool,isEphemeral:l["b"].bool,isCustomResponse:l["b"].bool,isSliHighlight:l["b"].bool,isSelfIm:l["b"].bool,isSlackbotIm:l["b"].bool,primaryType:l["b"].oneOf(["ephemeral","custom_response","pinned","starred","sli_highlight"]),sliHighlight:l["b"].shape({loading:l["b"].bool,isHighlight:l["b"].bool,feedbackOptions:l["b"].object,justification:l["b"].string,feedback:l["b"].string}),isHovered:l["b"].bool,channelId:l["b"].string,ts:l["b"].string,currentUserId:l["b"].string,pinnedByMemberId:l["b"].string,teamDisplayName:l["b"].string,featureTeambot:l["b"].bool.isRequired};var At={isPinned:false,isStarred:false,isEphemeral:false,isCustomResponse:false,isSliHighlight:false,isSelfIm:false,isSlackbotIm:false,primaryType:void 0,sliHighlight:void 0,isHovered:false,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0,teamDisplayName:"",featureTeambot:false};var Rt=function(e){Z()(t,e);function t(e){V()(this,t);var r=Y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderHighlight=r.renderHighlight.bind(r);return r}Q()(t,[{key:"renderHighlight",value:function e(){var t=this.props,r=t.sliHighlight,a=t.channelId,n=t.ts,i=t.isHovered;if(!Object(O["shouldShowHighlightsLabel"])(r))return null;return $.a.createElement(wt["a"],{channelId:a,ts:n,isHovered:i,sliHighlight:r})}},{key:"renderPinnedBy",value:function e(t){return $.a.createElement(Ct["a"],{id:t,className:"c-message__label_link"})}},{key:"renderStarButton",value:function e(t){var r=t.text;return $.a.createElement(ye["c"],{onClick:It,className:"c-message__label_button"},r)}},{key:"render",value:function e(){var t=this.props,r=t.primaryType,a=t.isPinned,n=t.isStarred,i=t.isEphemeral,s=t.isCustomResponse,o=t.isSliHighlight,l=t.isSelfIm,c=t.isSlackbotIm,u=t.teamDisplayName,d=t.featureTeambot,p=t.currentUserId,m=t.pinnedByMemberId;var h=Object(Et["a"])({isPinned:a,isStarred:n,isEphemeral:i,isCustomResponse:s,isSliHighlight:o,teamDisplayName:u,featureTeambot:d,isSelfIm:l,isSlackbotIm:c,currentUserId:p,pinnedBy:m,renderHighlight:this.renderHighlight,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton});if(!h)return null;var f=Tt[r];return $.a.createElement("div",{className:"c-message__label"},$.a.createElement("div",{className:"c-message__label__gutter"},f&&$.a.createElement(Ae["b"],{type:f,className:"c-message__label__icon",size:"inherit",inline:true})),$.a.createElement("div",{className:"c-message__label__text"},h))}}]);return t}(X["PureComponent"]);Rt.displayName="MessageLabel";Rt.defaultProps=At;var Mt=function e(t,r){var a=r.sourceTeamId;var n=Object(g["getTeamById"])(t,a);return{teamDisplayName:Object(jt["getTeamDisplayName"])(n),featureTeambot:Object(C["isFeatureEnabled"])(t,"feature_teambot_active")}};var Pt=Object(i["connect"])(Mt)(Rt);var xt=r(1038);var Dt=new he["b"]("message");var Ft=200;var Lt=20;var Bt="theme_install_button";var Ut=1541628e3;var qt={quote:true,pre:true};var Gt={ts:l["b"].string,messageNotFound:l["b"].bool,channelId:l["b"].string,alertType:l["b"].string,subtype:l["b"].string,text:l["b"].string,noSpecials:l["b"].bool,theme:l["b"].oneOf(["dense","light"]),userId:l["b"].string,botId:l["b"].string,appId:l["b"].string,username:l["b"].string,hasAdHocSender:l["b"].bool,reactionKey:l["b"].string,reactionKeyForInitialFileComment:l["b"].string,replies:l["b"].arrayOf(l["b"].shape({ts:l["b"].string,user:l["b"].string})),replyCount:l["b"].number,replyUsers:l["b"].arrayOf(l["b"].string),replyUsersCount:l["b"].number,latestReply:l["b"].string,threadsEverythingPref:l["b"].bool,expandInlineImgsPref:l["b"].bool,expandNonMediaAttachmentsPref:l["b"].bool,threadTs:l["b"].string,attachments:l["b"].arrayOf(l["b"].shape({color:l["b"].string,fallback:l["b"].string})),fileId:l["b"].string,fileIds:l["b"].arrayOf(l["b"].string),comment:l["b"].shape({id:l["b"].string,user:l["b"].string,comment:l["b"].string,is_starred:l["b"].bool}),isUpload:l["b"].bool,showUser:l["b"].bool,isFileFollowup:l["b"].bool,isEditing:l["b"].bool,isHovered:l["b"].bool,maybeStartEditingMessage:l["b"].func,edited:l["b"].shape({ts:l["b"].string,user:l["b"].string}),isLast:l["b"].bool,rollup:se["a"].Rollup(),logMessage:l["b"].func,setUnreadPoint:l["b"].func,isStarred:l["b"].bool,isStandalone:l["b"].bool,isPinned:l["b"].bool,currentUserId:l["b"].string,pinnedByMemberId:l["b"].string,sliHighlight:l["b"].shape({loading:l["b"].bool,isHighlight:l["b"].bool,feedbackOptions:l["b"].object,justification:l["b"].string,feedback:l["b"].string}),isEphemeral:l["b"].bool,isDeleting:l["b"].bool,icons:l["b"].shape({emoji:l["b"].string}),botProfile:l["b"].object,slackbotFeels:l["b"].string,fadeAwayHighlight:l["b"].bool,doneHighlighting:l["b"].func,isUnprocessed:l["b"].bool,showResend:l["b"].bool,showCancel:l["b"].bool,sourceTeamId:l["b"].string,resendMsg:l["b"].func,removeMsg:l["b"].func,unfurlLinkCache:l["b"].instanceOf(Re["a"]),shouldJumpToTimestamp:l["b"].bool,isSelfIm:l["b"].bool,isSlackbotIm:l["b"].bool,teamDomain:l["b"].string,featureTinyspeck:l["b"].bool.isRequired,featureFileThreads:l["b"].bool.isRequired,featureHideUnfurlUrls:l["b"].bool.isRequired,featureBetterRtlInput:l["b"].bool,featureAttachmentsV2:l["b"].bool,useGlobalNav:l["b"].bool,renderFileThread:l["b"].bool,channelSessionId:l["b"].string,previousMessageIsPinned:l["b"].bool,previousMessageIsEphemeral:l["b"].bool,previousMessageIsStarred:l["b"].bool,previousMessageSubtype:l["b"].string,previousMessageSliHighlight:l["b"].object,previousMessagePinnedByMemberId:l["b"].string,renderActions:l["b"].bool,renderActionsOffscreen:l["b"].bool,messageContainerType:l["b"].string,ariaAssertive:l["b"].bool,clogger:l["b"].object.isRequired,blocks:l["b"].array,serviceTeamId:l["b"].string};var Ht={ts:null,messageNotFound:false,channelId:void 0,text:null,noSpecials:false,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:false,reactionKey:null,reactionKeyForInitialFileComment:null,replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:false,showUser:true,isFileFollowup:false,isEditing:false,isHovered:false,maybeStartEditingMessage:s["noop"],edited:null,isLast:false,rollup:null,logMessage:s["noop"],setUnreadPoint:s["noop"],isStarred:false,isStandalone:false,isPinned:false,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:false,isDeleting:false,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:false,doneHighlighting:s["noop"],isUnprocessed:false,showResend:false,showCancel:false,sourceTeamId:"",resendMsg:s["noop"],removeMsg:s["noop"],unfurlLinkCache:null,shouldJumpToTimestamp:false,isSelfIm:false,isSlackbotIm:false,featureBetterRtlInput:false,featureAttachmentsV2:false,teamDomain:void 0,useGlobalNav:false,renderFileThread:false,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:false,renderActionsOffscreen:false,messageContainerType:void 0,ariaAssertive:void 0,blocks:void 0,serviceTeamId:void 0};var Wt=Object(c["b"])();var Vt=function(e){Z()(t,e);function t(e){V()(this,t);var r=Y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setRef=r.setRef.bind(r);r.onContainerClick=r.onContainerClick.bind(r);r.onTimestampClick=r.onTimestampClick.bind(r);r.startEditing=r.startEditing.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.onMouseEnter=r.onMouseEnter.bind(r);r.onMouseLeave=r.onMouseLeave.bind(r);r.onMenuToggle=r.onMenuToggle.bind(r);r.startHighlightingTimer=r.startHighlightingTimer.bind(r);r.onDoneHighlighting=r.onDoneHighlighting.bind(r);r.onDeleteAnimationTick=r.onDeleteAnimationTick.bind(r);r.onDeleteAnimationEnd=r.onDeleteAnimationEnd.bind(r);r.resendMsg=r.resendMsg.bind(r);r.removeMsg=r.removeMsg.bind(r);r.formatInlineAttachmentMaybe=r.formatInlineAttachmentMaybe.bind(r);r.formatThemeInstallButton=r.formatThemeInstallButton.bind(r);r.customFormatHandler=r.customFormatHandler.bind(r);r.customContentHandler=r.customContentHandler.bind(r);r.clogMessageClick=r.clogMessageClick.bind(r);r.clogUserClick=r.clogUserClick.bind(r);r.shouldShowAttachment=r.shouldShowAttachment.bind(r);r.messageRef=null;r.deleteAnimation=null;r.hasDisplayedContent=true;r.inlineAttachmentsKey=0;r.setAttachmentsSorted();r.state={isHovered:e.isHovered,actionsMenuOpen:false,height:null,hasKeyboardFocus:false};return r}Q()(t,[{key:"componentDidMount",value:function e(){this.props.fadeAwayHighlight&&this.startHighlightingTimer();this.isDeleting()&&this.onDeleteAnimationEnd()}},{key:"componentWillReceiveProps",value:function e(t){var r=this.props.fadeAwayHighlight;t.fadeAwayHighlight&&!r&&this.startHighlightingTimer();this.isDeleting(t)&&!this.isDeleting()&&this.startDeleteAnimation();this.setAttachmentsSorted(t);this.setState(function(){return{isHovered:t.isHovered}})}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.onDoneHighlighting()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onContainerClick",value:function e(t){if(t.shiftKey&&Object(be["a"])(t)&&!ve(t.target)){t.stopPropagation();this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});return}if(t.altKey){t.preventDefault();this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts})}}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;r&&"keydown"===r.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onMouseEnter",value:function e(){this.setState(function(){return{isHovered:true}})}},{key:"onMouseLeave",value:function e(){this.setState(function(){return{isHovered:false}})}},{key:"onMenuToggle",value:function e(t){var r=this;if(!t){setTimeout(function(){r.setState(function(){return{actionsMenuOpen:false}})},100);return}this.setState(function(){return{actionsMenuOpen:t}})}},{key:"onDoneHighlighting",value:function e(){this.props.doneHighlighting();this.highlightTimer=null}},{key:"onDeleteAnimationTick",value:function e(t){var r=t.value,a=t.nextTick;if(!this.messageRef)return;this.setState(function(){return{height:r}},a)}},{key:"onDeleteAnimationEnd",value:function e(){this.removeMsg();this.deleteAnimation=null}},{key:"onTimestampClick",value:function e(t){t.preventDefault();this.props.shouldJumpToTimestamp&&Object(ge["p"])(this.props.channelId,this.props.ts,this.props.threadTs)}},{key:"setAttachmentsSorted",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=r.attachments,n=r.text;var i=o.a.chain(a).filter(this.shouldShowAttachment).map(ce["b"]).partition(function(e){return t.isInlineImage(e,n)}).value(),s=H()(i,2),l=s[0],c=s[1];this.attachmentsInline&&l&&!Object(me["a"])(this.attachmentsInline,l,2)&&(this.inlineAttachmentsKey+=1);this.attachmentsInline=l;this.attachmentsBelow=c}},{key:"setRef",value:function e(t){this.messageRef=t}},{key:"getTextWithThemes",value:function e(){if(!this.props.text)return this.props.text;var t=this.props.useGlobalNav?/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){8})(#[A-Fa-f0-9]{6})(\b)/g:/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g;return this.props.text.replace(t,function(e){return e+" <"+Bt+"|"+e+">"})}},{key:"getUrlsToHide",value:function e(){var t=this.props,r=t.attachments,a=t.featureHideUnfurlUrls;if(!a)return[];return o.a.chain(r).filter(this.shouldShowAttachment).map(ce["b"]).filter("isMsgUnfurl").map("fromUrl").map(s["unescape"]).compact().value()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});var r=t?t.message:"";var a=t?t.stack:"";var n=this.props||{};var i=n.channel&&n.channelId;Wt.error("Message componentDidCatch: "+n.subtype+" "+n.ts+" in "+i+", "+r);a&&Wt.error(a)}},{key:"clogMessageClick",value:function e(t){var r=this.props,a=r.ts,i=r.channelId,s=r.userId,o=r.botId,l=r.appId,c=r.channelSessionId,u=r.clogger;var d=n()({},t,{message_timestamp:a,channel_id:i,channel_type:i?i.charAt(0):"",channel_session_id:c,member_id:s,app_id:l,bot_id:o,request_id:null});u.track("MSG_LINK_CLICKED",d);t&&"msg_photo_expand"===t.subtype&&u.track("MSG_PHOTO_EXPAND",d)}},{key:"clogUserClick",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.userId,i=t.botId,s=t.appId,o=t.clogger;o.track("USERNAME_CLICK",{message_timestamp:r,channel_id:a,channel_type:a?a.charAt(0):null,member_id:n,app_id:s,bot_id:i})}},{key:"isInlineImage",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.text;return r&&-1!==o.a.unescape(r).indexOf(t.fromUrl)&&Object(je["k"])(t)}},{key:"shouldShowAttachment",value:function e(t){var r=this.props,a=r.text,n=r.subtype,i=r.isStandalone,s=r.expandInlineImgsPref,o=r.expandNonMediaAttachmentsPref;return Object(ae["g"])({attachment:t,messageText:a,messageSubtype:n,messageIsStandalone:i,expandInlineImgsPref:s,expandNonMediaAttachmentsPref:o})}},{key:"isDeleting",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var e=t.isDeleting,r=t.isStandalone;return e&&!r}},{key:"startHighlightingTimer",value:function e(){if(this.highlightTimer)return;this.highlightTimer=setTimeout(this.onDoneHighlighting,4500)}},{key:"startDeleteAnimation",value:function e(){if(!this.messageRef)return;var t=this.messageRef.clientHeight;this.deleteAnimation=Object(le["a"])({fromValue:t,toValue:0,duration:Ft,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startEditing",value:function e(){var t=this.props,r=t.maybeStartEditingMessage,a=t.channelId,n=t.ts;r({channelId:a,ts:n})}},{key:"formatInlineAttachmentMaybe",value:function e(t){var r=t.item,a=t.getDefaultOutput;var i=this.props,l=i.ts,c=i.channelId;var u=r.url;var d=Object(s["find"])(this.attachmentsInline,{fromUrl:o.a.unescape(u)});if(!d)return a();return $.a.createElement(X["Fragment"],null,a(),$.a.createElement(Oe["a"],n()({},d,{messageTs:l,activeChannelId:c,clogLinkClick:this.clogMessageClick,isInline:true})))}},{key:"formatThemeInstallButton",value:function e(t){var r=t.item;var a=r.contents[0].text.replace(/\s/g,"").split(",");return $.a.createElement("div",{className:"c-message__theme_button_container"},$.a.createElement(Ot["a"],{colors:a,clogLinkClick:this.clogMessageClick}))}},{key:"customContentHandler",value:function e(t){var r=this.props.edited;var a=t;var n=this.getUrlsToHide();n.length&&(a=Object(xe["a"])({content:t,urls:n}));if(r){var i=o.a.last(a)||{};a.push({type:"custom_edited_label",omitWhitespace:!!qt[i.type]})}this.hasDisplayedContent=!!a.length;return a}},{key:"customFormatHandler",value:function e(t){var r=t.item,a=t.getDefaultOutput;var n=void 0;"link"===r.type?n=r.url===Bt?this.formatThemeInstallButton(t):this.formatInlineAttachmentMaybe(t):"custom_edited_label"===r.type&&(n=this.renderEditedLabel({omitWhitespace:r.omitWhitespace}));return n||a()}},{key:"focusFirst",value:function e(t){this.focusNode(Object(ue["b"])(t))}},{key:"focusLast",value:function e(t){this.focusNode(Object(ue["c"])(t))}},{key:"focusNode",value:function e(t){if(!t)return;if(document.activeElement===t)return;t.focus();t.classList.add("focus-ring")}},{key:"isTombstone",value:function e(){return"tombstone"===this.props.subtype}},{key:"shouldShowResendControls",value:function e(){var t=this.props,r=t.showResend,a=t.showCancel;return r||a}},{key:"resendMsg",value:function e(){var t=this.props,r=t.ts,a=t.channelId;this.props.resendMsg(a,r)}},{key:"removeMsg",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.messageContainerType,i=t.subtype;var s="thread_broadcast"===i&&n===oe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE;this.props.removeMsg({channelId:a,ts:r,broadcastDelete:s})}},{key:"shouldShowMessageLabel",value:function e(t){var r=t.labelTypes;var a=this.props,n=a.showUser,i=a.isFileFollowup,s=a.pinnedByMemberId,l=a.previousMessageIsStarred,c=a.previousMessageIsPinned,u=a.previousMessageIsEphemeral,d=a.previousMessageSubtype,p=a.previousMessageSliHighlight,m=a.previousMessagePinnedByMemberId;if(o.a.isEmpty(r))return false;if(r.sliHighlight)return true;if(!n||i){var h=Object(ie["a"])({isStarred:l,isPinned:c,isEphemeral:u,subtype:d,sliHighlight:p});if(Object(me["a"])(r,h))return r.isPinned&&h.isPinned&&m!==s}return true}},{key:"renderTimestamp",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.isHiddenFromCopy,a=void 0!==r&&r;var i=this.props,s=i.teamDomain,o=i.channelId,l=i.ts,c=i.threadTs,u=i.isStandalone;if(!l||!o)return null;var d=void 0;var p=void 0;if(!u){d=Object(j["constructAbsoluteMsgPermalink"])({teamDomain:s,channelId:o,ts:l,threadTs:c});p=this.onTimestampClick}var m={};a&&(m["data-stringify-text"]="");return $.a.createElement(Ze["b"],n()({timestamp:l,relative:false,full:false,link:d,onClick:p},m))}},{key:"renderAvatar",value:function e(){var t=36;if(this.isTombstone())return $.a.createElement("div",{className:"c-message__tombstone_icon"},$.a.createElement(Ae["a"],{type:"trash",align:"top"}));var r=this.props,a=r.userId,n=r.hasAdHocSender,i=r.botId,s=r.botProfile,o=r.isStandalone,l=r.icons,c=r.slackbotFeels;return $.a.createElement(Ee["b"],{className:"c-message__avatar",userId:a,isAdHocMember:n,botId:i,botProfile:s,slackbotFeels:c,size:t,icons:l,isInteractive:!o,showCard:true,showTooltip:true,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}},{key:"renderGutter",value:function e(){if("light"===this.props.theme){if(this.props.isFileFollowup)return $.a.createElement("div",{className:"c-message__gutter c-message__gutter--empty"});if(this.props.isEditing||this.props.showUser)return $.a.createElement("div",{className:"c-message__gutter"},this.renderAvatar())}return $.a.createElement("div",{className:"c-message__gutter"},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}},{key:"renderContent",value:function e(){var t=this.props,r=t.showUser,a=t.theme,n=t.isStandalone,i=t.reactionKey,s=t.reactionKeyForInitialFileComment;return $.a.createElement("div",{className:"c-message__content","data-qa":"message_content"},r&&this.renderContentHeader(),"light"===a&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFileThreads(),this.renderAttachments(),!n&&!this.isTombstone()&&this.renderReactions(i),this.renderInitialFileComment(),!n&&!this.isTombstone()&&this.renderReactions(s),!n&&this.renderReplyBar(),this.renderThreadBroadcastFooter(),this.shouldShowResendControls()&&this.renderResendControls())}},{key:"renderContentHeader",value:function e(){var t=this.props,r=t.userId,a=t.botId,n=t.username,i=t.theme,s=t.isStandalone,o=t.botProfile;if(this.isTombstone())return null;return $.a.createElement("div",{className:"c-message__content_header"},$.a.createElement(De["a"],{userId:r,botId:a,username:n,isInteractive:!s,botProfile:o,clogLinkClick:this.clogUserClick}),"light"===i&&this.renderTimestamp(),"dense"===i&&$.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),$.a.createElement("br",null)),"dense"===i&&" ","dense"===i&&this.renderThreadBroadcastPreamble())}},{key:"renderThreadBroadcastPreamble",value:function e(){var t=this.props,r=t.ts,a=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!r||!n||s||"thread_broadcast"!==i)return null;return $.a.createElement(pt,{ts:r,threadTs:a,channelId:n})}},{key:"renderThreadBroadcastFooter",value:function e(){var t=this.props,r=t.ts,a=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!r||!n||!a||s||"thread_broadcast"!==i)return null;return $.a.createElement(_t,{ts:r,threadTs:a,channelId:n})}},{key:"renderEditedLabel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.omitWhitespace,a=void 0!==r&&r;var n=this.props.edited;var i=n.ts;var s=$.a.createElement("span",{key:"edited",className:"c-message__edited_label"},!a&&"\xa0",Dt.t("(edited)"));if(i){var o=Dt.t("{date} at {time}",{date:Object(pe["a"])(i,{shortenMonth:true}),time:Object(de["a"])(i)});return $.a.createElement(Se["d"],{key:"edited",delay:Se["a"],tip:o},s)}return s}},{key:"renderReplyBar",value:function e(){var t=this.props,r=t.replies,a=t.replyCount,n=t.replyUsers,i=t.replyUsersCount,s=t.latestReply,o=t.channelId,l=t.threadTs;if(!o||!a)return null;return $.a.createElement(Ye,{channelId:o,threadTs:l,replies:r,replyCount:a,replyUsers:n,replyUsersCount:i,latestReply:s})}},{key:"renderReactions",value:function e(t){if("file_comment"===this.props.subtype&&this.props.featureFileThreads)return null;if(!t)return null;return $.a.createElement(we["a"],{reactionKey:t})}},{key:"renderAttachments",value:function e(){var t=this;var r=this.props,a=r.ts,i=r.channelId;var o=this.attachmentsBelow;if(!o||!o.length)return null;var l=Object(s["map"])(o,function(e,r){var s=e.id||r+1;var o=e.botId||t.props.botId;return $.a.createElement(Oe["a"],n()({},e,{service:o,messageTs:a,activeChannelId:i,key:s,clogLinkClick:t.clogMessageClick,isOnlyMessageContent:!t.hasDisplayedContent}))});var c=l.splice(Lt);return $.a.createElement("div",{className:"c-message__attachments"},l,this.renderAttachmentsOverLimitMaybe(c))}},{key:"renderAttachmentsOverLimitMaybe",value:function e(t){if(!t.length)return null;var r={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(re["a"])("attachmentsOverLimit",this.props.ts,{limit:Lt})};return $.a.createElement("div",null,$.a.createElement(Ie["a"],r,t),$.a.createElement(Te["a"],n()({},r,{render:function e(r,a){return $.a.createElement(Ne["a"],{isExpanded:r.isExpanded,onClick:a,attachmentsOverLimitCount:t.length})}})))}},{key:"renderFile",value:function e(){var t=this.props,r=t.fileId,a=t.comment,n=t.subtype,i=t.renderFileThread;if(!r)return null;var s=null;var o=null;a&&"file_comment"===n&&(o=this.renderFileComment());"file_comment"===n||i||(s=this.renderInlineFile());return[s,o]}},{key:"renderInlineFile",value:function e(){var t=this.props,r=t.ts,a=t.fileId,n=t.channelId,i=t.subtype,s=t.unfurlLinkCache,o=t.isUpload,l=t.userId;if(!a||!n)return null;return $.a.createElement(Je["a"],{key:"inline-file",fileId:a,ts:r,subtype:i,channelId:n,unfurlLinkCache:s,isUpload:o,userId:l,clogLinkClick:this.clogMessageClick})}},{key:"renderFileComment",value:function e(){var t=this.props,r=t.fileId,a=t.comment,n=t.isFileFollowup,i=t.theme,s=t.subtype,o=t.userId;if(!r||!a)return null;var l="file_comment"===s&&(!n||"dense"===i)&&$.a.createElement(Xe["a"],{fileId:r,comment:a,followup:n,key:a.id+"-meta"});return[l||null,$.a.createElement(Ce["a"],{text:a.comment,memberId:o,className:"c-message__comment c-message__body",key:a.id+"-body",clogLinkClick:this.clogMessageClick})]}},{key:"renderInitialFileComment",value:function e(){var t=this.props,r=t.comment,a=t.subtype;if(!r||"file_share"!==a)return null;return this.renderFileComment()}},{key:"renderFileThreads",value:function e(){var t=this;if(!this.props.renderFileThread)return null;var r=this.props,a=r.ts,n=r.fileIds,i=r.channelId,s=r.subtype,o=r.unfurlLinkCache,l=r.isUpload,c=r.userId,u=r.botId,d=r.text;if(!n||!n.length||!i)return null;if("file_comment"===s)return null;var p=n.map(function(e){return $.a.createElement(Je["a"],{key:e,fileId:e,ts:a,subtype:s,channelId:i,unfurlLinkCache:o,isUpload:l,userId:c,botId:u,clogLinkClick:t.clogMessageClick})});var m=te()("c-message__files","c-message__files--file_threads_meta_data",{"c-message__files--empty_body":!d||"file_mention"===s});return $.a.createElement("div",{className:m},p)}},{key:"renderRollup",value:function e(){var t=this.props,r=t.rollup,a=t.channelId,n=t.userId;if(!r||!a)return null;return $.a.createElement($e["a"],{rollup:r,channelId:a,user:n})}},{key:"renderAutomatedSubtype",value:function e(){return $.a.createElement(et["a"],{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}},{key:"renderBody",value:function e(){var t=this.props,r=t.ts,a=t.fileId,n=t.subtype,i=t.rollup,s=t.userId,o=t.edited,l=t.noSpecials,c=t.ariaAssertive,u=t.attachments,d=t.featureBetterRtlInput,p=t.blocks,m=t.featureAttachmentsV2,h=t.channelId,f=t.botId,v=t.isEphemeral,b=t.serviceTeamId;if(this.isTombstone())return $.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},Dt.t("This message was deleted."));if(!r)return $.a.createElement("span",{className:"c-message__body c-message__body--unknown"});if(a||"file_comment"===n||"file_mention"===n)return null;if(i)return this.renderRollup();if(Object(N["a"])(n))return this.renderAutomatedSubtype();var g=te()("c-message__body",{"c-message__body--me":"me_message"===n,"c-message__body--dir":d});if(p&&m){var _={serviceId:f,serviceTeamId:b,container:{type:Pe["b"].message,messageTs:r,channelId:h,isEphemeral:v}};return $.a.createElement(Me["a"],{containerActionsPayload:_,blocks:p,service:f})}var y=parseInt(r,10)>Ut;return $.a.createElement(Ce["a"],{className:g,text:this.getTextWithThemes(),memberId:s,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:true,clogLinkClick:this.clogMessageClick,noSpecials:l,ariaAssertive:c,ignoredPropEdited:o,ignoredPropAttachments:u,featureBetterRtlInput:d,addDirectionAttr:y})}},{key:"renderActions",value:function e(){var t=this;var r=this.props,a=r.ts,n=r.reactionKey,i=r.fileId,s=r.fileIds,o=r.comment,l=r.replies,c=r.replyCount,u=r.rollup,d=r.threadsEverythingPref,p=r.threadTs,m=r.channelId,h=r.subtype,f=r.isStarred,v=r.isPinned,b=r.isEphemeral,g=r.isDeleting,_=r.isStandalone,y=r.setUnreadPoint,k=r.theme,e=r.renderActions,O=r.renderActionsOffscreen,E=r.messageContainerType;var w=this.state,C=w.actionsMenuOpen,S=w.isHovered,j=w.hasKeyboardFocus;if(!a||!m)return null;var I=O&&!j&&!S&&!e;if(!C&&!S&&!j&&!I&&!e)return null;if(g||_)return null;return $.a.createElement(yt["a"],{reactionKey:n,fileId:i,fileIds:s,comment:o&&o.id,replies:l,replyCount:c,rollup:u,ts:a,threadsEverythingPref:d,threadTs:p,channelId:m,subtype:h,isStarred:f,isPinned:v,isEphemeral:b,editHandler:this.startEditing,unreadHandler:y,onMenuOpen:function e(){return t.onMenuToggle(true)},onMenuClose:function e(){return t.onMenuToggle(false)},theme:k,renderOffscreen:I,messageContainerType:E})}},{key:"renderEdit",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.messageContainerType;if(!a||!r)return null;return $.a.createElement("div",{className:"c-message__content"},$.a.createElement(kt["a"],{channelId:r,ts:a,messageContainerType:n}))}},{key:"renderResendControls",value:function e(){var t=this.props,r=t.showResend,a=t.showCancel;var n=null;r&&(n=$.a.createElement(ye["c"],{className:"c-message__resend",onClick:this.resendMsg},Dt.t("Try again")));var i=null;a&&(i=$.a.createElement(ye["c"],{className:"c-message__cancel",onClick:this.removeMsg},Dt.t("Cancel")));var s=null;r&&a&&(s=" | ");return $.a.createElement("div",{className:"c-message__resend_controls"},$.a.createElement("div",{className:"c-message__resend_column"}),Dt.t("Slack couldn\u2019t send this message"),n,s,i)}},{key:"renderError",value:function e(){if(!this.props.featureTinyspeck)return null;var t=this.props,r=t.ts,a=t.channelId;var n={background:"#FFCFCF",padding:"24px"};return $.a.createElement("div",{style:n},$.a.createElement("strong",null,"Message ",r," in ",a," failed to render."," "),"Please go to #triage-core and"," ",$.a.createElement("strong",null,"read up to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.")}},{key:"renderMessageLabel",value:function e(t){var r=t.labelTypes,a=t.primaryLabelType;var i=this.props,s=i.sliHighlight,o=i.isSlackbotIm,l=i.isSelfIm,c=i.channelId,u=i.ts,d=i.currentUserId,p=i.pinnedByMemberId,m=i.sourceTeamId;var h=this.state.isHovered;if(!this.shouldShowMessageLabel({labelTypes:r}))return null;return $.a.createElement(Pt,n()({},r,{primaryType:a,channelId:c,ts:u,isHovered:h,isSlackbotIm:o,isSelfIm:l,sliHighlight:s,currentUserId:d,pinnedByMemberId:p,sourceTeamId:m}))}},{key:"render",value:function e(){var t;if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var r=this.props,a=r.theme,n=r.isEditing,i=r.showUser,s=r.alertType,o=r.fadeAwayHighlight,l=r.isLast,c=r.isStandalone,u=r.isUnprocessed,d=r.subtype,p=r.rollup,m=r.sliHighlight,h=r.isPinned,f=r.isEphemeral,v=r.isStarred;var b=this.state,g=b.isHovered,_=b.actionsMenuOpen,y=b.height;var k=Object(ie["a"])({isPinned:h,isEphemeral:f,isStarred:v,subtype:d,sliHighlight:m});var E=Object(ne["a"])(k);var w=te()("c-message",(t={},q()(t,"c-message--"+a,a),q()(t,"c-message--hover",g||_),q()(t,"c-message--focus",this.state.hasKeyboardFocus),q()(t,"c-message--adjacent",!n&&!i&&!c),q()(t,"c-message--thread_broadcast","thread_broadcast"===d),q()(t,"c-message--highlight_yellow_bg","shared_channel_join"===s),q()(t,"c-message--highlight",!c&&n),q()(t,"c-message--fade_highlight",o&&!E),q()(t,"c-message--last",l),q()(t,"c-message--rollup",p),q()(t,"c-message--standalone",c),q()(t,"c-message--unprocessed",u),q()(t,"c-message--resend",this.shouldShowResendControls()),q()(t,"c-message--deleting",this.isDeleting()),q()(t,"c-message--editing",n),q()(t,"c-message--sli_highlight_negative",Object(O["isNegativeHighlightFeedback"])(m)),q()(t,"c-message--"+E,E),t));var C={};null!==y&&(C={height:y});return $.a.createElement(ke["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},$.a.createElement("div",{ref:this.setRef,className:w,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,style:C,role:"document","data-qa":"message_container"},this.renderMessageLabel({labelTypes:k,primaryLabelType:E}),this.renderGutter(),!c&&n&&this.renderEdit(),(c||!n)&&this.renderContent(),!c&&!n&&this.renderActions()))}}]);return t}(X["PureComponent"]);Vt.displayName="Message";Vt.defaultProps=Ht;var zt=Object(_e["a"])(Vt);function Qt(e,t,r){if(!r)return true;if(Object(N["a"])(t.subtype)||Object(N["a"])(r.subtype))return true;if(Object(A["b"])(t.subtype)||Object(A["b"])(r.subtype))return true;if("thread_broadcast"===t.subtype)return true;if(r.reply_count||t.reply_count)return true;var a=Object(M["a"])(t.ts);var n=Object(M["a"])(r.ts);var i=Object(P["a"])(a,n);var s=Object(x["a"])(a,n);if(i>5||!s)return true;var o=Object(j["getMsgSenderEntity"])(e,t);var l=Object(j["getMsgSenderEntity"])(e,r);if(o.userId&&o.userId===l.userId)return false;if(o.botId&&!o.userId&&o.botId===l.botId){if(o.username&&o.username!==l.username)return true;return false}if(o.username&&o.username===l.username)return false;return true}function Kt(e,t){var r=t.message;var a=Object(j["shouldRenderFileThread"])(r,{featureFileThreads:Object(C["isFeatureEnabled"])(e,"feature_file_threads"),featureFileThreadsDarkLaunch:Object(C["isFeatureEnabled"])(e,"feature_file_threads_dark_launch")});var n=a?null:r.file;var i=a?r.files:null;var o=a?Object(y["getFileById"])(e,Object(s["first"])(i)):Object(y["getFileById"])(e,n);return{fileId:n,fileIds:i,file:o}}var Yt=function e(t,r){var a=r.ts,i=r.channelId,s=r.previousMessageTs;var o=Object(p["getMessageByTimestamp"])(t,i,a);var l=Object(k["getUserMessagesTheme"])(t);var c=Object(k["getUserPref"])(t,"threads_everything");var d=Object(k["getUserPref"])(t,"expand_inline_imgs");var m=Object(k["getUserPref"])(t,"expand_non_media_attachments");var h=Object(_["getChannelById"])(t,i);var N=Object(C["isFeatureEnabled"])(t,"feature_file_threads");var A=Object(C["isFeatureEnabled"])(t,"feature_file_threads_dark_launch");var M=Object(C["isFeatureEnabled"])(t,"feature_hide_unfurl_urls");var P=Object(C["isFeatureEnabled"])(t,"feature_better_rtl_input");var x=Object(C["isFeatureEnabled"])(t,"feature_attachments_v2");if(!o)return{channelId:i,featureTinyspeck:Object(C["isFeatureEnabled"])(t,"feature_tinyspeck"),featureFileThreads:N,featureHideUnfurlUrls:M,messageNotFound:true};var D=Object(j["shouldRenderFileThread"])(o,{featureFileThreads:N,featureFileThreadsDarkLaunch:A});var U=Kt(t,{message:o}),q=U.file,G=U.fileId,H=U.fileIds;var W=Object(p["getMessageByTimestamp"])(t,i,s);var V=Qt(t,o,W);var z=Object(F["a"])(o,W);var Q=Object(T["b"])(o,q);var K=Object(T["c"])(o,q);var Y=Object(j["getMsgSenderEntity"])(t,o);var J=Y.botId&&Object(f["getBotByMsg"])(t,o);var Z=J?J.app_id:null;var X=o.slackbot_feels||null;var $=o.comment&&q&&Object(y["getFileCommentById"])(t,q.id,o.comment.id)||o.comment;q&&"file_share"===o.subtype&&o.upload&&($=q.initial_comment);var ee=Object(O["getMessageMetaData"])(t,{channelId:i,ts:a}),te=ee.isDeleting,re=ee.sliHighlight;var ae=Object(w["getMessageEditData"])(t,{channelId:i,ts:a}),ne=ae.isEditing;var ie=void 0;ie=D?Object(j["getMessagePinnedInfo"])(o):q?Object(I["getFilePinnedInfoByChannelId"])({file:q,channelId:i}):Object(j["getMessagePinnedInfo"])(o);var se=ie?ie.pinnedBy:null;var oe=void 0;if(W){var le=void 0;if(D)le=Object(j["getMessagePinnedInfo"])(W);else{var ce=Kt(t,{message:W});le=ce.file?Object(I["getFilePinnedInfoByChannelId"])({file:ce.file,channelId:i}):Object(j["getMessagePinnedInfo"])(W)}var ue=le?le.pinnedBy:null;oe={previousMessageIsStarred:Object(j["isStarred"])(W),previousMessageIsPinned:Object(B["c"])(W,h),previousMessageIsEphemeral:Object(j["isEphemeral"])(W),previousMessageSubtype:W.subtype,previousMessageSliHighlight:W.sliHighlight,previousMessagePinnedByMemberId:ue}}var de=o.thread_ts;var pe=void 0;if(de){pe={replyCount:o.reply_count};if(o.replies)pe.replies=o.replies;else{pe.replyUsers=o.reply_users;pe.replyUsersCount=o.reply_users_count;pe.latestReply=o.latest_reply}}var me=Object(C["getCurrentUserId"])(t);var he=Object(g["getCurrentTeam"])(t);var fe=Object(b["getTeamId"])(t);var ve=he&&he.domain;var be=Object(u["a"])({state:t});var ge=void 0;if(J){var _e=Object(v["getMemberById"])(t,o.user);var ye=Object(E["getTeamIdFromBotOrUser"])({bot:J,botProfile:o.bot_profile,member:_e,teamId:fe});ge=Object(E["getTeamIdFromBotAppUser"])(_e,ye)}return n()({channelId:i,clogger:be,blocks:o.blocks,alertType:o.alert_type,subtype:o.subtype,text:o.text,noSpecials:false===o.mrkdwn,theme:l},Y,{appId:Z,hasAdHocSender:Object(R["a"])(o)},pe,{threadTs:de,threadsEverythingPref:c,expandInlineImgsPref:d,expandNonMediaAttachmentsPref:m,attachments:o.attachments,fileId:G,fileIds:H,comment:$,isUpload:o.upload,reactionKey:Q,reactionKeyForInitialFileComment:K,showUser:V,isFileFollowup:z,edited:o.edited,isStarred:Object(j["isStarred"])(o,q,"file_comment"===o.subtype&&$,N),isPinned:Object(B["c"])(o,h),currentUserId:me,pinnedByMemberId:se,sliHighlight:re,botProfile:o.bot_profile,slackbotFeels:X,icons:o.icons,isEditing:ne,isUnprocessed:Object(j["isTempMsg"])(o)&&!Object(j["isEphemeral"])(o),isEphemeral:Object(j["isEphemeral"])(o),isDeleting:te,showResend:o.showResend,showCancel:o.showCancel,isSlackbotIm:Object(S["isSlackbot"])(h),sourceTeamId:Object(j["getSourceTeamId"])(o)||Object(b["getTeamId"])(t),isSelfIm:Object(S["isYou"])(me,h),teamDomain:ve},oe,{featureTinyspeck:Object(C["isFeatureEnabled"])(t,"feature_tinyspeck"),featureFileThreads:N,featureHideUnfurlUrls:M,featureBetterRtlInput:P,useGlobalNav:Object(L["b"])(t),renderFileThread:D,featureAttachmentsV2:x,ariaAssertive:Object(j["isDisconnectedFeedback"])(o),serviceTeamId:ge})};var Jt=Object(d["e"])("log message to console (for debugging)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var s=Object(p["getMessageByTimestamp"])(i,a,n);var o=Object(_["getChannelById"])(i,a);if(s){Object(c["a"])({getState:t}).warn(s);e(Object(D["c"])({message:s,modelObject:o}))}});Jt.propTypes={channelId:l["b"].string.isRequired,ts:l["b"].string.isRequired};var Zt={logMessage:Jt,maybeStartEditingMessage:w["maybeStartEditingMessage"],removeMsg:h["a"],resendMsg:m["a"]};var Xt=t["a"]=Object(i["connect"])(Yt,Zt)(zt)},,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(14);var f=r(63);var v=r(21);var b=r(11);var g=r(10);var _=r(491);var y=r(144);var k=r(665);var O=r(87);var E=r(2);var w=r(787);var C=r(13);var S=Object(C["c"])("TS.ui.comments.startDelete");var j=r(18);var I=r(54);var T=r(121);var N=new g["b"]("comments");var A={isStarred:m["b"].bool,updateStar:m["b"].func,commentId:m["b"].string,fileId:m["b"].string,featureReactThreads:m["b"].bool};var R={isStarred:false,updateStar:E["noop"],commentId:void 0,fileId:void 0,featureReactThreads:false};var M=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);r.toggleStar=r.toggleStar.bind(r);r.deleteComment=r.deleteComment.bind(r);return r}s()(t,[{key:"toggleStar",value:function e(){var t=this.props,r=t.commentId,a=t.fileId,n=t.isStarred;if(!r||!a)return;this.props.updateStar(!n,{file_comment:r,file_comment_file:a})}},{key:"deleteComment",value:function e(){var t=this.props,r=t.commentId,a=t.fileId;if(!r||!a)return;S(a,r)}},{key:"renderMenu",value:function e(t){if(!this.props.featureReactThreads)return null;var r=this.props.isStarred;return p.a.createElement(I["f"],t,p.a.createElement(I["b"],{label:r?N.t("Unstar this file comment"):N.t("Star this file comment"),onSelected:this.toggleStar}),p.a.createElement(I["d"],null),p.a.createElement(I["b"],{label:N.t("Delete comment"),danger:true,onSelected:this.deleteComment}))}},{key:"render",value:function e(){if(!this.props.featureReactThreads)return null;return p.a.createElement(I["e"],{renderMenu:this.renderMenu,position:"left-bottom"},p.a.createElement(T["a"],{className:"p-comment__actions",ariaLabel:N.t("Show more actions")},p.a.createElement(j["b"],{type:"cog",size:"inherit"})))}}]);return t}(d["PureComponent"]);M.displayName="CommentActions";M.defaultProps=R;var P=Object(h["connect"])(function(e){return{featureReactThreads:Object(b["isFeatureEnabled"])(e,"feature_react_threads")}},{updateStar:w["a"]})(M);var x=r(2210);var D=new g["b"]("comments");var F={featureFileThreads:m["b"].bool,featureReactThreads:m["b"].bool,time24:m["b"].bool,comment:m["b"].shape({id:m["b"].string,user:m["b"].string,timestamp:m["b"].number,comment:m["b"].string}).isRequired,fileId:m["b"].string};var L={featureFileThreads:true,featureReactThreads:false,time24:false,fileId:void 0};var B=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.comment,a=t.time24,n=t.featureFileThreads,i=t.featureReactThreads,s=t.fileId;if(!n&&!Object(f["a"])())return null;var o=r.user,l=r.timestamp,c=r.comment,u=r.is_starred,d=r.id;return p.a.createElement("div",{className:"p-comment"},p.a.createElement("div",{className:"p-comment__header"},o?p.a.createElement(k["a"],{userId:o}):null,p.a.createElement("span",{className:"p-comment__timestamp"},D.t("{date} at {time}",{date:Object(_["a"])(l,{shortenMonth:true}),time:Object(y["a"])(l,{do24hrTime:a})})),i&&p.a.createElement(P,{isStarred:u,commentId:d,fileId:s})),p.a.createElement("div",{className:"p-comment__body"},p.a.createElement(O["a"],{text:c,memberId:o})))}}]);return t}(d["PureComponent"]);B.displayName="Comment";B.defaultProps=L;function U(e){return{featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads"),featureReactThreads:Object(b["isFeatureEnabled"])(e,"feature_react_threads"),time24:Object(v["getUserPref"])(e,"time24")}}var q=t["a"]=Object(h["connect"])(U)(B)},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(3);var p=r.n(d);var m=r(129);var h=r(1);var f=r.n(h);var v=r(2);var b=r(408);var g={stepIndex:m["b"].number,steps:m["b"].arrayOf(m["b"].shape(p()({},b["a"].propTypes))).isRequired,isSteppingBack:m["b"].bool,breadcrumbTitles:m["b"].arrayOf(m["b"].string),modalClasses:m["b"].string,onCancel:m["b"].func.isRequired,position:m["b"].string,isOpen:m["b"].bool,showOpenTransition:m["b"].bool,showCloseTransition:m["b"].bool};var _={stepIndex:0,isSteppingBack:false,breadcrumbTitles:[],modalClasses:"",position:null,isOpen:true,showOpenTransition:true,showCloseTransition:true};var y=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickBack=r.onClickBack.bind(r);r.onClickGo=r.onClickGo.bind(r);r.state={stepIndex:r.props.stepIndex,isSteppingBack:r.props.isSteppingBack};return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateStepState(t.stepIndex)}},{key:"onClickGo",value:function e(){var t=this.state.stepIndex;var r=this.getStep(t);if(r.onGo){r.onGo();return}this.goToNextStep()}},{key:"onClickBack",value:function e(){var t=this.state.stepIndex;var r=this.getStep(t);if(r.onBack){r.onBack();return}this.goToPreviousStep()}},{key:"setStepDirection",value:function e(t){this.setState(function(){return{isSteppingBack:t}})}},{key:"getIndex",value:function e(){return this.state.stepIndex}},{key:"setIndex",value:function e(t){this.setState(function(){return{stepIndex:t}})}},{key:"getStepNumber",value:function e(){return this.getIndex()+1}},{key:"setStepNumber",value:function e(t){this.setIndex(t-1)}},{key:"getCurrentStep",value:function e(){return this.getStep(this.state.stepIndex)}},{key:"getStep",value:function e(t){var r=this.props.steps;return r[t]}},{key:"getStepContent",value:function e(){var t=this.getCurrentStep();if(Object(v["isFunction"])(t.children))return t.children();return t.children}},{key:"maybeUpdateStepState",value:function e(t){var r=t!==this.props.stepIndex;if(r){this.setIndex(t);var a=t<this.props.stepIndex;this.setStepDirection(a)}}},{key:"isModalSteppingBack",value:function e(){return this.state.isSteppingBack}},{key:"goToNextStep",value:function e(){var t=this.props.steps;this.setState(function(e){var r=e.stepIndex+1;if(r<t.length)return{stepIndex:r,isSteppingBack:false};return e})}},{key:"goToPreviousStep",value:function e(){this.setState(function(e){var t=e.stepIndex-1;if(e.stepIndex>=0)return{stepIndex:t,isSteppingBack:true};return e})}},{key:"render",value:function e(){var t=this.getCurrentStep();var r=this.getIndex();var a=this.isModalSteppingBack();var n=this.props,i=n.breadcrumbTitles,s=n.isOpen,o=n.showOpenTransition,l=n.showCloseTransition,c=n.position;var u=p()({},t,{isSteppingBack:a,currentStepIndex:r,breadcrumbTitles:i,isOpen:s,showCloseTransition:l,showOpenTransition:o,position:c,onGo:this.onClickGo,onBack:this.onClickBack,modalClasses:this.props.modalClasses,onCancel:this.props.onCancel});return f.a.createElement(b["a"],u,this.getStepContent())}}]);return t}(h["PureComponent"]);y.displayName="SteppedFullscreenModal";y.defaultProps=_;var k=y;var O=t["a"]=k},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";t.__esModule=true;t.INIT_ACTION=t.ActionCreators=t.ActionTypes=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.liftAction=y;t.liftReducerWith=k;t.unliftState=O;t.unliftStore=E;t.default=w;var i=r(1767);var s=m(i);var o=r(1798);var l=m(o);var c=r(1802);var u=m(c);var d=r(705);var p=m(d);function m(e){return e&&e.__esModule?e:{default:e}}var h=t.ActionTypes={PERFORM_ACTION:"PERFORM_ACTION",RESET:"RESET",ROLLBACK:"ROLLBACK",COMMIT:"COMMIT",SWEEP:"SWEEP",TOGGLE_ACTION:"TOGGLE_ACTION",SET_ACTIONS_ACTIVE:"SET_ACTIONS_ACTIVE",JUMP_TO_STATE:"JUMP_TO_STATE",JUMP_TO_ACTION:"JUMP_TO_ACTION",REORDER_ACTION:"REORDER_ACTION",IMPORT_STATE:"IMPORT_STATE",LOCK_CHANGES:"LOCK_CHANGES",PAUSE_RECORDING:"PAUSE_RECORDING"};var f=t.ActionCreators={performAction:function e(t){if(!(0,u.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');return{type:h.PERFORM_ACTION,action:t,timestamp:Date.now()}},reset:function e(){return{type:h.RESET,timestamp:Date.now()}},rollback:function e(){return{type:h.ROLLBACK,timestamp:Date.now()}},commit:function e(){return{type:h.COMMIT,timestamp:Date.now()}},sweep:function e(){return{type:h.SWEEP}},toggleAction:function e(t){return{type:h.TOGGLE_ACTION,id:t}},setActionsActive:function e(t,r){var a=arguments.length<=2||void 0===arguments[2]||arguments[2];return{type:h.SET_ACTIONS_ACTIVE,start:t,end:r,active:a}},reorderAction:function e(t,r){return{type:h.REORDER_ACTION,actionId:t,beforeActionId:r}},jumpToState:function e(t){return{type:h.JUMP_TO_STATE,index:t}},jumpToAction:function e(t){return{type:h.JUMP_TO_ACTION,actionId:t}},importState:function e(t,r){return{type:h.IMPORT_STATE,nextLiftedState:t,noRecompute:r}},lockChanges:function e(t){return{type:h.LOCK_CHANGES,status:t}},pauseRecording:function e(t){return{type:h.PAUSE_RECORDING,status:t}}};var v=t.INIT_ACTION={type:"@@INIT"};function b(e,t,r){var a=r;var i=void 0;try{a=e(r,t)}catch(e){i=e.toString();"object"===("undefined"===typeof window?"undefined":n(window))&&("undefined"!==typeof window.chrome||"undefined"!==typeof window.process&&"renderer"===window.process.type)?setTimeout(function(){throw e}):console.error(e)}return{state:a,error:i}}function g(e,t,r,a){if(!a)return{state:e(r,t)};return b(e,t,r)}function _(e,t,r,a,n,i,s,o){if(!e||-1===t||t>=e.length&&e.length===i.length)return e;var l=e.slice(0,t);for(var c=t;c<i.length;c++){var u=i[c];var d=n[u].action;var p=l[c-1];var m=p?p.state:a;var h=s.indexOf(u)>-1;var f=void 0;f=h?p:o&&p&&p.error?{state:m,error:"Interrupted by an error up the chain"}:g(r,d,m,o);l.push(f)}return l}function y(e){return f.performAction(e)}function k(e,t,r,n){var i={monitorState:r(void 0,{}),nextActionId:1,actionsById:{0:y(v)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:true===n.shouldStartLocked,isPaused:false===n.shouldRecordChanges};return function(o,c){var u=o||i;var d=u.monitorState;var p=u.actionsById;var m=u.nextActionId;var f=u.stagedActionIds;var b=u.skippedActionIds;var k=u.committedState;var O=u.currentStateIndex;var E=u.computedStates;var w=u.isLocked;var C=u.isPaused;o||(p=a({},p));function S(e){var t=e;var r=f.slice(1,t+1);for(var a=0;a<r.length;a++){if(E[a+1].error){t=a;r=f.slice(1,t+1);break}delete p[r[a]]}b=b.filter(function(e){return-1===r.indexOf(e)});f=[0].concat(f.slice(t+1));k=E[t].state;E=E.slice(t);O=O>t?O-t:0}function j(t){var i;var s=void 0;if(t){s=E[O];d=r(d,c)}else s=g(e,c.action,E[O].state,false);if(!n.pauseActionType||1===m)return{monitorState:d,actionsById:{0:y(v)},nextActionId:1,stagedActionIds:[0],skippedActionIds:[],committedState:s.state,currentStateIndex:0,computedStates:[s],isLocked:w,isPaused:true};if(t){O===f.length-1&&O++;f=[].concat(f,[m]);m++}return{monitorState:d,actionsById:a({},p,(i={},i[m-1]=y({type:n.pauseActionType}),i)),nextActionId:m,stagedActionIds:f,skippedActionIds:b,committedState:k,currentStateIndex:O,computedStates:[].concat(E.slice(0,f.length-1),[s]),isLocked:w,isPaused:true}}var I=0;switch(c.type){case h.PERFORM_ACTION:if(w)return o||i;if(C)return j();n.maxAge&&f.length===n.maxAge&&S(1);O===f.length-1&&O++;var T=m++;p[T]=c;f=[].concat(f,[T]);I=f.length-1;break;case h.RESET:p={0:y(v)};m=1;f=[0];b=[];k=t;O=0;E=[];break;case h.COMMIT:p={0:y(v)};m=1;f=[0];b=[];k=E[O].state;O=0;E=[];break;case h.ROLLBACK:p={0:y(v)};m=1;f=[0];b=[];O=0;E=[];break;case h.TOGGLE_ACTION:var N=function(){var e=c.id;var t=b.indexOf(e);b=-1===t?[e].concat(b):b.filter(function(t){return t!==e});I=f.indexOf(e);return"break"}();if("break"===N)break;case h.SET_ACTIONS_ACTIVE:var A=c.start;var R=c.end;var M=c.active;var P=[];for(var x=A;x<R;x++)P.push(x);b=M?(0,s.default)(b,P):(0,l.default)(b,P);I=f.indexOf(A);break;case h.JUMP_TO_STATE:O=c.index;I=Infinity;break;case h.JUMP_TO_ACTION:var D=f.indexOf(c.actionId);-1!==D&&(O=D);I=Infinity;break;case h.SWEEP:f=(0,s.default)(f,b);b=[];O=Math.min(O,f.length-1);break;case h.REORDER_ACTION:var F=c.actionId;var L=f.indexOf(F);if(L<1)break;var B=c.beforeActionId;var U=f.indexOf(B);if(U<1){var q=f.length;U=B>f[q-1]?q:1}var G=L-U;if(G>0){f=[].concat(f.slice(0,U),[F],f.slice(U,L),f.slice(L+1));I=U}else if(G<0){f=[].concat(f.slice(0,L),f.slice(L+1,U),[F],f.slice(U));I=L}break;case h.IMPORT_STATE:if(Array.isArray(c.nextLiftedState)){p={0:y(v)};m=1;f=[0];b=[];O=c.nextLiftedState.length;E=[];k=c.preloadedState;I=0;c.nextLiftedState.forEach(function(e){p[m]=y(e);f.push(m);m++})}else{var H=c.nextLiftedState;d=H.monitorState;p=H.actionsById;m=H.nextActionId;f=H.stagedActionIds;b=H.skippedActionIds;k=H.committedState;O=H.currentStateIndex;E=H.computedStates;c.noRecompute&&(I=Infinity)}break;case h.LOCK_CHANGES:w=c.status;I=Infinity;break;case h.PAUSE_RECORDING:C=c.status;if(C)return j(true);p={0:y(v)};m=1;f=[0];b=[];k=E[O].state;O=0;E=[];break;case"@@redux/INIT":if(false===n.shouldHotReload){p={0:y(v)};m=1;f=[0];b=[];k=0===E.length?t:E[O].state;O=0;E=[]}I=0;if(n.maxAge&&f.length>n.maxAge){E=_(E,I,e,k,p,f,b,n.shouldCatchErrors);S(f.length-n.maxAge);I=Infinity}break;default:I=Infinity;break}E=_(E,I,e,k,p,f,b,n.shouldCatchErrors);d=r(d,c);return{monitorState:d,actionsById:p,nextActionId:m,stagedActionIds:f,skippedActionIds:b,committedState:k,currentStateIndex:O,computedStates:E,isLocked:w,isPaused:C}}}function O(e){var t=e.computedStates;var r=e.currentStateIndex;var a=t[r].state;return a}function E(e,t){var r;var i=void 0;function s(){var t=O(e.getState());void 0!==t&&(i=t);return i}return a({},e,(r={liftedStore:e,dispatch:function t(r){e.dispatch(y(r));return r},getState:s,replaceReducer:function r(a){e.replaceReducer(t(a))}},r[p.default]=function(){return a({},e[p.default](),{subscribe:function t(r){if("object"!==("undefined"===typeof r?"undefined":n(r)))throw new TypeError("Expected the observer to be an object.");function a(){r.next&&r.next(s())}a();var i=e.subscribe(a);return{unsubscribe:i}}})},r))}function w(){var e=arguments.length<=0||void 0===arguments[0]?function(){return null}:arguments[0];var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(null!=t.maxAge&&t.maxAge<2)throw new Error("DevTools.instrument({ maxAge }) option, if specified, may not be less than 2.");return function(r){return function(a,n,i){function s(r){if("function"!==typeof r){if(r&&"function"===typeof r.default)throw new Error('Expected the reducer to be a function. Instead got an object with a "default" field. Did you pass a module instead of the default export? Try passing require(...).default instead.');throw new Error("Expected the reducer to be a function.")}return k(r,n,e,t)}var o=r(s(a),i);if(o.liftedStore)throw new Error("DevTools instrumentation should not be applied more than once. Check your store configuration.");return E(o,s)}}}},function(e,t,r){var a=r(1788);function n(e,t){var r=null==e?0:e.length;return!!r&&a(e,t,0)>-1}e.exports=n},function(e,t){function r(e,t,r){var a=-1,n=null==e?0:e.length;while(++a<n)if(r(t,e[a]))return true;return false}e.exports=r},function(e,t){function r(e,t){var r=-1,a=null==e?0:e.length,n=Array(a);while(++r<a)n[r]=t(e[r],r,e);return n}e.exports=r},function(e,t,r){var a=r(842),n=r(1792),i=r(1794);function s(e,t){return i(n(e,t,a),e+"")}e.exports=s},function(e,t,r){var a=r(1311),n=r(725);function i(e){return n(e)&&a(e)}e.exports=i},function(e,t,r){var a=r(726),n=r(647);var i=a(n,"Set");e.exports=i},function(e,t,r){var a=r(911),n=r(1809),i=r(1810),s=r(1811),o=r(1812),l=r(1813);function c(e){var t=this.__data__=new a(e);this.size=t.size}c.prototype.clear=n;c.prototype["delete"]=i;c.prototype.get=s;c.prototype.has=o;c.prototype.set=l;e.exports=c},function(e,t,r){var a=r(1814),n=r(725);function i(e,t,r,s,o){if(e===t)return true;if(null==e||null==t||!n(e)&&!n(t))return e!==e&&t!==t;return a(e,t,r,s,i,o)}e.exports=i},function(e,t,r){var a=r(1039),n=r(1815),i=r(1042);var s=1,o=2;function l(e,t,r,l,c,u){var d=r&s,p=e.length,m=t.length;if(p!=m&&!(d&&m>p))return false;var h=u.get(e);if(h&&u.get(t))return h==t;var f=-1,v=true,b=r&o?new a:void 0;u.set(e,t);u.set(t,e);while(++f<p){var g=e[f],_=t[f];if(l)var y=d?l(_,g,f,t,e,u):l(g,_,f,e,t,u);if(void 0!==y){if(y)continue;v=false;break}if(b){if(!n(t,function(e,t){if(!i(b,t)&&(g===e||c(g,e,r,l,u)))return b.push(t)})){v=false;break}}else if(!(g===_||c(g,_,r,l,u))){v=false;break}}u["delete"](e);u["delete"](t);return v}e.exports=l},function(e,t,r){var a=r(1035);function n(e){return e===e&&!a(e)}e.exports=n},function(e,t){function r(e,t){return function(r){if(null==r)return false;return r[e]===t&&(void 0!==t||e in Object(r))}}e.exports=r},function(e,t,r){var a=r(1342),n=r(914);function i(e,t){t=a(t,e);var r=0,i=t.length;while(null!=e&&r<i)e=e[n(t[r++])];return r&&r==i?e:void 0}e.exports=i},function(e,t,r){var a=r(648),n=r(1044),i=r(1832),s=r(1835);function o(e,t){if(a(e))return e;return n(e,t)?[e]:i(s(e))}e.exports=o},function(e,t,r){"use strict";t.__esModule=true;function a(e){return e&&e.__esModule?e["default"]:e}var n=r(1852);t.threezerotwofour=a(n);var i=r(1853);t.apathy=a(i);var s=r(1854);t.ashes=a(s);var o=r(1855);t.atelierDune=a(o);var l=r(1856);t.atelierForest=a(l);var c=r(1857);t.atelierHeath=a(c);var u=r(1858);t.atelierLakeside=a(u);var d=r(1859);t.atelierSeaside=a(d);var p=r(1860);t.bespin=a(p);var m=r(1861);t.brewer=a(m);var h=r(1862);t.bright=a(h);var f=r(1863);t.chalk=a(f);var v=r(1864);t.codeschool=a(v);var b=r(1865);t.colors=a(b);var g=r(1866);t["default"]=a(g);var _=r(1867);t.eighties=a(_);var y=r(1868);t.embers=a(y);var k=r(1869);t.flat=a(k);var O=r(1870);t.google=a(O);var E=r(1871);t.grayscale=a(E);var w=r(1872);t.greenscreen=a(w);var C=r(1873);t.harmonic=a(C);var S=r(1874);t.hopscotch=a(S);var j=r(1875);t.isotope=a(j);var I=r(1876);t.marrakesh=a(I);var T=r(1877);t.mocha=a(T);var N=r(1878);t.monokai=a(N);var A=r(1879);t.ocean=a(A);var R=r(1880);t.paraiso=a(R);var M=r(1881);t.pop=a(M);var P=r(1882);t.railscasts=a(P);var x=r(1883);t.shapeshifter=a(x);var D=r(1884);t.solarized=a(D);var F=r(1885);t.summerfruit=a(F);var L=r(1886);t.tomorrow=a(L);var B=r(1887);t.tube=a(B);var U=r(1888);t.twilight=a(U)},function(e,t,r){"use strict";t.__esModule=true;t.updateScrollTop=n;t.startConsecutiveToggle=s;var a=t.UPDATE_SCROLL_TOP="@@redux-devtools-log-monitor/UPDATE_SCROLL_TOP";function n(e){return{type:a,scrollTop:e}}var i=t.START_CONSECUTIVE_TOGGLE="@@redux-devtools-log-monitor/START_CONSECUTIVE_TOGGLE";function s(e){return{type:i,id:e}}},function(e,t,r){"use strict";t.__esModule=true;var a=r(32);var n=w(a);var i=r(5);var s=w(i);var o=r(7);var l=w(o);var c=r(8);var u=w(c);var d=r(3);var p=w(d);var m=r(727);var h=w(m);var f=r(1);var v=w(f);var b=r(690);var g=w(b);var _=r(1346);var y=w(_);var k=r(1911);var O=w(k);var E=r(1349);function w(e){return e&&e.__esModule?e:{default:e}}var C=function e(t){return t};var S=function e(t,r,a){return 0===a};var j=function e(t,r,a,n){return v["default"].createElement("span",null,a," ",n)};var I=function e(t){var r=t[0];return v["default"].createElement("span",null,r,":")};var T=function e(){return false};function N(e,t){var r={getArrowStyle:"arrow",getListStyle:"nestedNodeChildren",getItemStringStyle:"nestedNodeItemString",getLabelStyle:"label",getValueStyle:"valueText"};var a=(0,h["default"])(r).filter(function(e){return t[e]});if(a.length>0){e="string"===typeof e?{extend:e}:(0,p["default"])({},e);a.forEach(function(a){console.error('Styling method "'+a+'" is deprecated, use "theme" property instead');e[r[a]]=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var s=e.style;return{style:(0,p["default"])({},s,t[a].apply(t,n))}}})}return e}function A(e){var t=N(e.theme,e);e.invertTheme&&("string"===typeof t?t+=":inverted":t&&t.extend?t="string"===typeof t?(0,p["default"])({},t,{extend:t.extend+":inverted"}):(0,p["default"])({},t,{extend:(0,E.invertTheme)(t.extend)}):t&&(t=(0,E.invertTheme)(t)));return{styling:(0,O["default"])(t)}}var R=function(e){(0,u["default"])(t,e);function t(r){(0,s["default"])(this,t);var a=(0,l["default"])(this,e.call(this,r));a.state=A(r);return a}t.prototype.componentWillReceiveProps=function e(t){var r=this;["theme","invertTheme"].find(function(e){return t[e]!==r.props[e]})&&this.setState(A(t))};t.prototype.shouldComponentUpdate=function e(t){var r=this;return!!(0,h["default"])(t).find(function(e){return"keyPath"===e?t[e].join("/")!==r.props[e].join("/"):t[e]!==r.props[e]})};t.prototype.render=function e(){var t=this.props,r=t.data,a=t.keyPath,i=t.postprocessValue,s=t.hideRoot,o=t.theme,l=t.invertTheme,c=(0,n["default"])(t,["data","keyPath","postprocessValue","hideRoot","theme","invertTheme"]);var u=this.state.styling;return v["default"].createElement("ul",u("tree"),v["default"].createElement(y["default"],(0,p["default"])({},(0,p["default"])({postprocessValue:i,hideRoot:s,styling:u},c),{keyPath:s?[]:a,value:i(r)})))};return t}(v["default"].Component);R.propTypes={data:g["default"].oneOfType([g["default"].array,g["default"].object]).isRequired,hideRoot:g["default"].bool,theme:g["default"].oneOfType([g["default"].object,g["default"].string]),invertTheme:g["default"].bool,keyPath:g["default"].arrayOf(g["default"].oneOfType([g["default"].string,g["default"].number])),postprocessValue:g["default"].func,sortObjectKeys:g["default"].oneOfType([g["default"].func,g["default"].bool])};R.defaultProps={shouldExpandNode:S,hideRoot:false,keyPath:["root"],getItemString:j,labelRenderer:I,valueRenderer:C,postprocessValue:C,isCustomNode:T,collectionLimit:50,invertTheme:true};t["default"]=R},function(e,t,r){"use strict";t.__esModule=true;var a=r(3);var n=k(a);var i=r(32);var s=k(i);var o=r(1);var l=k(o);var c=r(690);var u=k(c);var d=r(1898);var p=k(d);var m=r(1899);var h=k(m);var f=r(1904);var v=k(f);var b=r(1905);var g=k(b);var _=r(1910);var y=k(_);function k(e){return e&&e.__esModule?e:{default:e}}var O=function e(t){var r=t.getItemString,a=t.keyPath,i=t.labelRenderer,o=t.styling,c=t.value,u=t.valueRenderer,d=t.isCustomNode,m=(0,s["default"])(t,["getItemString","keyPath","labelRenderer","styling","value","valueRenderer","isCustomNode"]);var f=d(c)?"Custom":(0,p["default"])(c);var b={getItemString:r,key:a[0],keyPath:a,labelRenderer:i,nodeType:f,styling:o,value:c,valueRenderer:u};var _=(0,n["default"])({},m,b,{data:c,isCustomNode:d});switch(f){case"Object":case"Error":case"WeakMap":case"WeakSet":return l["default"].createElement(h["default"],_);case"Array":return l["default"].createElement(v["default"],_);case"Iterable":case"Map":case"Set":return l["default"].createElement(g["default"],_);case"String":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return'"'+t+'"'}}));case"Number":return l["default"].createElement(y["default"],b);case"Boolean":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return t?"true":"false"}}));case"Date":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return t.toISOString()}}));case"Null":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(){return"null"}}));case"Undefined":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(){return"undefined"}}));case"Function":case"Symbol":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return t.toString()}}));case"Custom":return l["default"].createElement(y["default"],b);default:return null}};O.propTypes={getItemString:u["default"].func.isRequired,keyPath:u["default"].arrayOf(u["default"].oneOfType([u["default"].string,u["default"].number])).isRequired,labelRenderer:u["default"].func.isRequired,styling:u["default"].func.isRequired,value:u["default"].any,valueRenderer:u["default"].func.isRequired,isCustomNode:u["default"].func.isRequired};t["default"]=O},function(e,t,r){e.exports={default:r(1900),__esModule:true}},function(e,t,r){"use strict";t.__esModule=true;var a=r(3);var n=c(a);var i=r(1);var s=c(i);var o=r(690);var l=c(o);function c(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){var r=t.styling,a=t.arrowStyle,i=t.expanded,o=t.nodeType,l=t.onClick;return s["default"].createElement("div",(0,n["default"])({},r("arrowContainer",a),{onClick:l}),s["default"].createElement("div",r(["arrow","arrowSign"],o,i,a),"\u25b6","double"===a&&s["default"].createElement("div",r(["arrowSign","arrowSignInner"]),"\u25b6")))};u.propTypes={styling:l["default"].func.isRequired,arrowStyle:l["default"].oneOf(["single","double"]),expanded:l["default"].bool.isRequired,nodeType:l["default"].string.isRequired,onClick:l["default"].func.isRequired};u.defaultProps={arrowStyle:"single"};t["default"]=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getBase16Theme=t.createStyling=t.invertTheme=void 0;var a=r(40);var n=E(a);var i=r(3);var s=E(i);var o=r(67);var l=E(o);var c=r(727);var u=E(c);var d=r(1912);var p=E(d);var m=r(1343);var h=O(m);var f=r(1913);var v=E(f);var b=r(1914);var g=E(b);var _=r(1919);var y=E(_);var k=r(1920);function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function E(e){return e&&e.__esModule?e:{default:e}}var w=h.default;var C=(0,u.default)(w);var S=function e(t){return t<.25?1:t<.5?.9-t:1.1-t};var j=(0,y.default)(g.default,k.rgb2yuv,function(e){var t=(0,l.default)(e,3),r=t[0],a=t[1],n=t[2];return[S(r),a,n]},k.yuv2rgb,v.default);var I=function e(t){return function(e){return{className:[e.className,t.className].filter(Boolean).join(" "),style:(0,s.default)({},e.style||{},t.style||{})}}};var T=function e(t,r){if(void 0===t)return r;if(void 0===r)return t;var a="undefined"===typeof t?"undefined":(0,n.default)(t);var i="undefined"===typeof r?"undefined":(0,n.default)(r);switch(a){case"string":switch(i){case"string":return[r,t].filter(Boolean).join(" ");case"object":return I({className:t,style:r});case"function":return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return I({className:t})(r.apply(void 0,[e].concat(n)))}}case"object":switch(i){case"string":return I({className:r,style:t});case"object":return(0,s.default)({},r,t);case"function":return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return I({style:t})(r.apply(void 0,[e].concat(n)))}}case"function":switch(i){case"string":return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return t.apply(void 0,[I(e)({className:r})].concat(n))};case"object":return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return t.apply(void 0,[I(e)({style:r})].concat(n))};case"function":return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return t.apply(void 0,[r.apply(void 0,[e].concat(n))].concat(n))}}}};var N=function e(t,r){var a=(0,u.default)(r);for(var n in t)-1===a.indexOf(n)&&a.push(n);return a.reduce(function(e,a){return e[a]=T(t[a],r[a]),e},{})};var A=function e(t,r){for(var a=arguments.length,i=Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];if(null===r)return t;Array.isArray(r)||(r=[r]);var l=r.map(function(e){return t[e]}).filter(Boolean);var c=l.reduce(function(e,t){"string"===typeof t?e.className=[e.className,t].filter(Boolean).join(" "):"object"===("undefined"===typeof t?"undefined":(0,n.default)(t))?e.style=(0,s.default)({},e.style,t):"function"===typeof t&&(e=(0,s.default)({},e,t.apply(void 0,[e].concat(i))));return e},{className:"",style:{}});c.className||delete c.className;0===(0,u.default)(c.style).length&&delete c.style;return c};var R=t.invertTheme=function e(t){return(0,u.default)(t).reduce(function(e,r){return e[r]=/^base/.test(r)?j(t[r]):"scheme"===r?t[r]+":inverted":t[r],e},{})};var M=t.createStyling=(0,p.default)(function(e){for(var t=arguments.length,r=Array(t>3?t-3:0),a=3;a<t;a++)r[a-3]=arguments[a];var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o=n.defaultBase16,l=void 0===o?w:o,c=n.base16Themes,d=void 0===c?null:c;var m=P(i,d);m&&(i=(0,s.default)({},m,i));var h=C.reduce(function(e,t){return e[t]=i[t]||l[t],e},{});var f=(0,u.default)(i).reduce(function(e,t){return-1===C.indexOf(t)?(e[t]=i[t],e):e},{});var v=e(h);var b=N(f,v);return(0,p.default)(A,2).apply(void 0,[b].concat(r))},3);var P=t.getBase16Theme=function e(t,r){t&&t.extend&&(t=t.extend);if("string"===typeof t){var a=t.split(":"),n=(0,l.default)(a,2),i=n[0],s=n[1];t=(r||{})[i]||h[i];"inverted"===s&&(t=R(t))}return t&&t.hasOwnProperty("base00")?t:void 0}},function(e,t){var r=/-?\d+(\.\d+)?%?/g;function a(e){return e.match(r)}e.exports=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(14);var f=r(2);var v=r.n(f);var b=r(164);var g=r(10);var _=r(344);var y=r(128);var k=new g["b"]("admin");var O={searchMembers:d["b"].func.isRequired,clogger:d["b"].object.isRequired};var E={searchMembers:f["noop"]};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isSearching:false};r.searchMembers=r.searchMembers.bind(r);r.handleSearchInputChange=r.handleSearchInputChange.bind(r);r.handleSearchInputOnFocus=r.handleSearchInputOnFocus.bind(r);r.throttledSearchMembers=Object(f["throttle"])(r.searchMembers,300,{leading:false});return r}s()(t,[{key:"handleSearchInputChange",value:function e(t){var r=t.target.value||"";this.throttledSearchMembers(r)}},{key:"handleSearchInputOnFocus",value:function e(){var t=this.props.clogger;t.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"click",ui_element:"admin_search"}}})}},{key:"searchMembers",value:function e(t){var r=this;var a=this.props.clogger;this.props.searchMembers({searchQuery:t}).then(function(){r.setState(function(){return{isSearching:false}})});a.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"search",ui_element:"admin_search"}}})}},{key:"render",value:function e(){var t=k.t("Search current members");return m.a.createElement(_["a"],{className:"p-admin_member_table__search_input",placeholder:t,icon:"search",autoFocus:false,isLoading:this.state.isSearching,onChange:this.handleSearchInputChange,onFocus:this.handleSearchInputOnFocus})}}]);return t}(p["PureComponent"]);w.displayName="AdminMemberSearch";w.defaultProps=E;var C=function e(t){return{clogger:Object(b["a"])({state:t})}};var S=function e(t){return{searchMembers:function e(r){return t(Object(y["searchMembers"])(r))}}};t["a"]=Object(h["connect"])(C,S)(w)},function(e,t,r){"use strict";t.__esModule=true;t.default=void 0;var a=r(1847);var n=i(a);function i(e){return e&&e.__esModule?e:{default:e}}t.default=n.default},function(e,t,r){"use strict";t.__esModule=true;function a(e){return function(t){var r=t.dispatch,a=t.getState;return function(t){return function(n){if("function"===typeof n)return n(r,a,e);return t(n)}}}}var n=a();n.withExtraArgument=a;t["default"]=n},function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.batchedSubscribe=n;function n(e){if("function"!==typeof e)throw new Error("Expected batch to be a function.");var t=[];var r=t;function n(){r===t&&(r=t.slice())}function i(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var t=true;n();r.push(e);return function a(){if(!t)return;t=false;n();var i=r.indexOf(e);r.splice(i,1)}}function s(){var e=t=r;for(var a=0;a<e.length;a++)e[a]()}function o(){e(s)}return function(e){return function(){var t=e.apply(void 0,arguments);var r=t.subscribe;function n(){var e=t.dispatch.apply(t,arguments);o();return e}return a({},t,{dispatch:n,subscribe:i,subscribeImmediate:r})}}}},function(e,t,r){"use strict";r.r(t);r.d(t,"getAppToEdit",function(){return s});r.d(t,"getAppName",function(){return o});r.d(t,"getAppIcons",function(){return l});var a=r(129);var n=r(4);var i=r(11);var s=Object(n["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.appId;var a=Object(i["getFromBootData"])(e,"app_to_edit");if(a&&a.encoded_id===r)return a;return null});s.propTypes={appId:a["b"].string.isRequired};var o=Object(n["d"])(function(e,t){var r=s(e,t);return r&&r.name});o.propTypes={appId:a["b"].string.isRequired};var l=Object(n["d"])(function(e,t){var r=s(e,t);return r&&r.payload&&r.payload.icons||{}});l.propTypes={appId:a["b"].string.isRequired}},,,,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(14);var f=r(711);var v=r(13);var b=Object(v["c"])("TS.generic_notification_banner.banner_to_show_sig.dispatch");var g=Object(v["c"])("TS.ui.banner.isDunningBanner",function(){return false});var _=Object(v["c"])("TS.ui.banner.show");var y=r(11);var k=r(10);var O=r(164);var E=r(21);var w=r(760);var C=r(27);var S=r(65);var j=r(2);var I=r(15);var T=r.n(I);var N=r(855);var A=r(20);var R=r(2243);var M=new k["b"]("notification_banner");var P={learn_more:M.t("Learn More"),show_me:M.t("Show Me"),skip:M.t("Skip for Now")};var x={imgSrc:m["b"].string,imgAlt:m["b"].string,headerText:m["b"].node,bodyText:m["b"].node,bodyClass:m["b"].string,goButtonText:m["b"].string,goButtonClass:m["b"].string,onGo:m["b"].func,showGoButton:m["b"].bool,isLearnMoreButton:m["b"].bool,shouldCloseOnGo:m["b"].bool,cancelButtonText:m["b"].string,cancelButtonClass:m["b"].string,onCancel:m["b"].func,showCancelButton:m["b"].bool,showCloseIcon:m["b"].bool,onCloseIcon:m["b"].func,closeBanner:m["b"].func.isRequired,onCloseBanner:m["b"].func,bannerPrefs:m["b"].shape({countPref:m["b"].string.isRequired,tsPref:m["b"].string.isRequired})};var D={imgSrc:"",imgAlt:"",headerText:"",bodyText:"",bodyClass:"",goButtonText:"",goButtonClass:"",onGo:j["noop"],showGoButton:true,isLearnMoreButton:false,shouldCloseOnGo:true,cancelButtonText:P.skip,cancelButtonClass:"",onCancel:j["noop"],showCancelButton:true,showCloseIcon:false,onCloseIcon:j["noop"],onCloseBanner:j["noop"],bannerPrefs:{}};var F=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["handleGoButton","handleCancelButton","handleCloseIcon"]);return r}s()(t,[{key:"closeBanner",value:function e(){var t=this.props,r=t.onCloseBanner,a=t.bannerPrefs;this.props.closeBanner({bannerPrefs:a});r()}},{key:"handleGoButton",value:function e(){var t=this.props,r=t.onGo,a=t.shouldCloseOnGo;a&&this.closeBanner();r()}},{key:"handleCancelButton",value:function e(){var t=this.props.onCancel;this.closeBanner();t()}},{key:"handleCloseIcon",value:function e(){var t=this.props.onCloseIcon;this.closeBanner();t()}},{key:"renderHeader",value:function e(){var t=this.props,r=t.headerText,a=t.imgSrc,n=t.imgAlt;if(!r)return null;return p.a.createElement("h1",{className:"p-message_pane_banner__header"},a&&p.a.createElement("div",{className:"p-message_pane_banner__header_img_container"},p.a.createElement("img",{src:a,alt:n,className:"p-message_pane_banner__header_img","data-qa":"message_pane_banner_header_img"})),r)}},{key:"renderBody",value:function e(){var t=this.props,r=t.bodyText,a=t.bodyClass;if(!r)return null;var n=T()("p-message_pane_banner__body",a);return p.a.createElement("div",{className:n},r)}},{key:"renderGoButton",value:function e(){var t=this.props,r=t.goButtonText,a=t.goButtonClass,n=t.isLearnMoreButton;var i=n?P.learn_more:P.show_me;var s=T()("p-message_pane_banner__button ","p-message_pane_banner__button--go",a);return p.a.createElement(A["b"],{className:s,onClick:this.handleGoButton,size:"small"},r||i)}},{key:"renderCancelButton",value:function e(){var t=this.props,r=t.cancelButtonText,a=t.cancelButtonClass;var n=T()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",a);return p.a.createElement(A["b"],{className:n,onClick:this.handleCancelButton,size:"small",type:"outline"},r)}},{key:"renderCloseIcon",value:function e(){return p.a.createElement(A["c"],{ariaLabel:M.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon},p.a.createElement(N["a"],{type:"times"}))}},{key:"render",value:function e(){var t=this.props,r=t.showGoButton,a=t.showCancelButton,n=t.showCloseIcon;return p.a.createElement("div",{className:"p-message_pane_banner"},this.renderHeader(),this.renderBody(),p.a.createElement("div",{className:"p-message_pane_banner__button_container"},r&&this.renderGoButton(),a&&this.renderCancelButton()),n&&this.renderCloseIcon())}}]);return t}(d["PureComponent"]);F.displayName="MessagePaneBanner";F.defaultProps=D;var L={closeBanner:f["closeBanner"]};var B=Object(h["connect"])(null,L)(F);var U=new k["b"]("send_btn");var q={closeBanner:m["b"].func.isRequired,hasSendButton:m["b"].bool.isRequired,sendButtonAutoSet:m["b"].bool.isRequired,clogger:m["b"].object.isRequired};var G={countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"};var H=258;var W="I18N_BANNER";var V=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onPrefLinkClick=r.onPrefLinkClick.bind(r);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(W,{contexts:{ui_context:{step:H,action:"impression"}}})}},{key:"componentWillUpdate",value:function e(t){var r=this.props,a=r.hasSendButton,n=r.sendButtonAutoSet;n===t.sendButtonAutoSet&&a===t.hasSendButton||this.props.closeBanner()}},{key:"onPrefLinkClick",value:function e(){var t=this.props.clogger;t.track(W,{contexts:{ui_context:{step:H,action:"click",ui_element:"prefs_button"}}});Object(w["a"])("advanced","#msg_input_send_btn_label");this.props.closeBanner()}},{key:"renderBodyText",value:function e(){var t=this;return p.a.createElement("div",null,U.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},function(){return p.a.createElement("div",{className:"inline_block"},p.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(C["isMac"])()?"\u2318":"Ctrl"),p.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))}),p.a.createElement("br",null),U.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},function(e){var r=e.text;return p.a.createElement(S["a"],{onClick:t.onPrefLinkClick},r)}))}},{key:"render",value:function e(){var t=U.t("Just for Japan: a button for sending");var r=U.t("Got It");var a="p-message_pane_banner__body--taller-line-height";return p.a.createElement(B,{headerText:t,bodyText:this.renderBodyText(),bodyClass:a,goButtonText:r,showCancelButton:false,showCloseIcon:true,bannerPrefs:G})}}]);return t}(d["PureComponent"]);V.displayName="I18nJapanBetaSendBtnBanner";var z=function e(t){return{hasSendButton:Object(E["getUserPref"])(t,"msg_input_send_btn"),sendButtonAutoSet:Object(E["getUserPref"])(t,"msg_input_send_btn_auto_set"),clogger:Object(O["a"])({state:t})}};var Q={closeBanner:f["closeBanner"]};var K={CLOG_STEP:H,CLOG_EVENT_ID:W};var Y=Object(h["connect"])(z,Q)(V);var J=r(3);var Z=r.n(J);var X=r(69);var $=r(19);var ee=r(12);var te=r(50);var re=r(48);var ae=r(481);var ne={isSharedChannel:m["b"].bool,sharedTeamNames:m["b"].arrayOf(m["b"].node),bannerPrefs:m["b"].shape({countPref:m["b"].string,tsPref:m["b"].string}).isRequired,clogStep:m["b"].number.isRequired,onGoUrl:m["b"].string.isRequired,goButtonText:m["b"].string.isRequired,headerText:m["b"].node.isRequired,renderBodyText:m["b"].func.isRequired,clogger:m["b"].object.isRequired};var ie={isSharedChannel:false,sharedTeamNames:[]};var se=["UPGRDEXP_FREE_TRIAL_FOR_SC","GROWTH_PRICING"];var oe=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["onGo","onCloseIcon","renderBodyText"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:"impression"})}},{key:"onGo",value:function e(){var t=this.props.onGoUrl;this.clog({action:"click",ui_element:"billing_link"});window.open(t,"_blank")}},{key:"onCloseIcon",value:function e(){this.clog({action:"close",ui_element:"btn_close"})}},{key:"clog",value:function e(t){var r=this.props,a=r.clogStep,n=r.clogger;var i=Z()({step:a},t);se.forEach(function(e){n.track(e,{contexts:{ui_context:i}})})}},{key:"renderBodyText",value:function e(){var t=this.props,e=t.renderBodyText,r=t.sharedTeamNames;return e(r)}},{key:"render",value:function e(){var t=this.props,r=t.isSharedChannel,a=t.headerText,n=t.goButtonText,i=t.bannerPrefs;if(!r)return null;return p.a.createElement(B,{headerText:a,bodyText:this.renderBodyText(),goButtonText:n,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:i})}}]);return t}(d["PureComponent"]);oe.displayName="EscTrialBanner";oe.defaultProps=ie;var le=function e(t){var r=Object(X["getPrimaryView"])(t);var a=Object($["getChannelById"])(t,r);var n=Object(ee["isExternallySharedChannel"])(a);var i=[];if(n){var s=Object(ee["getMaybePendingSharedTeamIds"])(a);Object(j["isEmpty"])(s)||(i=Object(j["map"])(s,function(e){var r=Object(te["getTeamById"])(t,e);return Object(re["isUnknown"])(r)?p.a.createElement(ae["a"],{type:"unknown"}):Object(re["getTeamDisplayName"])(r)}))}return{isSharedChannel:n,sharedTeamNames:i,clogger:Object(O["a"])({state:t})}};var ce={clogEventIds:se};var ue=Object(h["connect"])(le)(oe);var de=new k["b"]("trial_expiration_banners");var pe={numDaysLeft:m["b"].number.isRequired,expirationDate:m["b"].string.isRequired};var me={countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"};var he=168;var fe="/admin/billing";var ve=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["renderBodyText","renderHeaderText"]);return r}s()(t,[{key:"renderBodyText",value:function e(t){var r=this.props.expirationDate;var a=Object(k["g"])(t,{noEscape:true,react:true});return de.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:r,shared_team_name:a})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return de.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=de.t("Upgrade Now");return p.a.createElement(ue,{bannerPrefs:me,clogStep:he,onGoUrl:fe,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);ve.displayName="TwoWeeksLeftEscTrialBanner";var be={LEARN_MORE_URL:fe};var ge=ve;var _e=new k["b"]("trial_expiration_banners");var ye={numDaysLeft:m["b"].number.isRequired,expirationDate:m["b"].string.isRequired};var ke={countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"};var Oe=167;var Ee="/admin/billing";var we=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["renderBodyText","renderHeaderText"]);return r}s()(t,[{key:"renderBodyText",value:function e(t){var r=this.props.expirationDate;var a=Object(k["g"])(t,{noEscape:true,react:true});return _e.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before {expiration_date}.",{expiration_date:r,shared_team_name:a},function(e){var t=e.text;return p.a.createElement("strong",{className:"sk_warning_red"},t)})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return _e.t("Only {num_of_days} days left on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=_e.t("Upgrade Now");return p.a.createElement(ue,{bannerPrefs:ke,clogStep:Oe,onGoUrl:Ee,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);we.displayName="OneWeekLeftEscTrialBanner";var Ce={LEARN_MORE_URL:Ee};var Se=we;var je=new k["b"]("free_trial_banners");var Ie={clogger:m["b"].object.isRequired};var Te={countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"};var Ne=205;var Ae="UPGRDEXP_FREE_TRIAL_IN_PROD";var Re="/trial";var Me=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["onGo","onCloseIcon"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(Ae,{contexts:{ui_context:{step:Ne,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.clogger;t.track(Ae,{contexts:{ui_context:{step:Ne,action:"click",ui_element:"learn_more_btn"}}});window.open(Re,"_blank")}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(Ae,{contexts:{ui_context:{step:Ne,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){return{headerText:je.t("Start your free trial of the Standard plan"),bodyText:je.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")}}},{key:"render",value:function e(){var t=this.getContent();if(Object(j["isEmpty"])(t))return null;return p.a.createElement(B,{headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Te})}}]);return t}(d["PureComponent"]);Me.displayName="InProdTrialMessagePaneBanner";var Pe=function e(t){return{clogger:Object(O["a"])({state:t})}};var xe=Object(h["connect"])(Pe)(Me);var De=new k["b"]("free_trial_banners");var Fe={expirationDate:m["b"].string.isRequired,clogger:m["b"].object.isRequired};var Le={expirationDate:""};var Be={countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"};var Ue=207;var qe="UPGRDEXP_FREE_TRIAL_IN_PROD";var Ge="/trial";var He=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["onGo","onCloseIcon"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(qe,{contexts:{ui_context:{step:Ue,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.clogger;t.track(qe,{contexts:{ui_context:{step:Ue,action:"click",ui_element:"learn_more_btn"}}});window.open(Ge,"_blank")}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(qe,{contexts:{ui_context:{step:Ue,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){var t=this.props.expirationDate;return{headerText:De.t("Your free trial offer is about to expire"),bodyText:De.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:t})}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(B,{headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Be})}}]);return t}(d["PureComponent"]);He.displayName="InProdTrialReminderBanner";He.defaultProps=Le;var We=function e(t){return{clogger:Object(O["a"])({state:t})}};var Ve=Object(h["connect"])(We)(He);var ze=r(150);var Qe=r(351);var Ke=new k["b"]("notification_banner");var Ye={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"};var Je=200;var Ze="UPGRDEXP_ENFORCE_FILE_LIMITS";var Xe="/pricing?ui_element=11&ui_step="+Je;var $e={teamName:m["b"].string.isRequired,userId:m["b"].string.isRequired,closeBanner:m["b"].func.isRequired,showFileList:m["b"].func.isRequired,experimentGroup:m["b"].string.isRequired,clogger:m["b"].object.isRequired};var et=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["onGo","onCloseIcon","onDeleteFilesLinkClicked"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(Ze,{contexts:{ui_context:{step:Je,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.clogger;t.track(Ze,{contexts:{ui_context:{step:Je,action:"click",ui_element:"pricing_button"}}});t.track("GROWTH_PRICING",{contexts:{ui_context:{step:Je,action:"click",ui_element:"pricing_button"}}});window.open(Xe,"_blank")}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(Ze,{contexts:{ui_context:{step:Je,action:"close",ui_element:"btn_close"}}})}},{key:"onDeleteFilesLinkClicked",value:function e(){var t=this.props,r=t.userId,a=t.clogger;this.props.closeBanner({bannerPrefs:Ye});this.props.showFileList({user:r});a.track(Ze,{contexts:{ui_context:{step:Je,action:"click",ui_element:"file_storage_link"}}})}},{key:"getHeaderText",value:function e(){var t=this.props.teamName;return Ke.rt("{name_of_workspace} is almost out of space",{name_of_workspace:t})}},{key:"getBodyText",value:function e(){var t=this;if("treatment"===this.props.experimentGroup)return Ke.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.');return Ke.rt("Your workspace is getting close to the free plan\u2019s <limit>5 GB storage limit</limit>. To get some more space, you can either <button>delete older files</button> or upgrade to a paid plan.",{},function(e){var r=e.key,a=e.tag,n=e.text;if("limit"===a)return p.a.createElement("span",{key:r,className:"bold"},n);return p.a.createElement("button",{key:r,className:"c-link--button",onClick:t.onDeleteFilesLinkClicked},n)})}},{key:"render",value:function e(){var t=Ke.t("See Plans");return p.a.createElement(B,{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:t,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Ye})}}]);return t}(d["PureComponent"]);et.displayName="ApproachingFileLimitBanner";var tt=function e(t){return{teamName:Object(te["getCurrentTeam"])(t).name,userId:Object(y["getCurrentUserId"])(t),experimentGroup:Object(Qe["getGroupForUser"])(t,"approaching_file_limit_banner_v2"),clogger:Object(O["a"])({state:t})}};var rt={closeBanner:f["closeBanner"],showFileList:ze["d"]};var at=Object(h["connect"])(tt,rt)(et);var nt=new k["b"]("client");var it={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"};var st=63;var ot="GROWTH_PRICING";var lt="/pricing?ui_element=11&ui_step="+st;var ct={messagesCount:m["b"].number.isRequired,clogger:m["b"].object.isRequired};var ut=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["onGo","onCloseBanner"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(ot,{limit_meter_messages_count:r,contexts:{ui_context:{step:st,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(ot,{limit_meter_messages_count:r,contexts:{ui_context:{step:st,action:"click",ui_element:"pricing_button"}}});window.open(lt,"_blank")}},{key:"onCloseBanner",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(ot,{limit_meter_messages_count:r,contexts:{ui_context:{step:st,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){return{headerText:nt.t("Your workspace is getting close to the 10k message limit"),bodyText:nt.t("All of your messages are saved in Slack, but on the Free plan you can only see and search the 10,000 most recent. For your full message history, upgrade to a paid plan.")}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(B,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:it})}}]);return t}(d["PureComponent"]);ut.displayName="ApproachingMsgLimitBanner";var dt=function e(t){return{clogger:Object(O["a"])({state:t})}};var pt=Object(h["connect"])(dt)(ut);var mt=new k["b"]("client");var ht={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"};var ft=64;var vt="GROWTH_PRICING";var bt="/pricing?ui_element=11&ui_step="+ft;var gt={messagesCount:m["b"].number.isRequired,clogger:m["b"].object.isRequired};var _t=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["onGo","onCloseBanner"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(vt,{limit_meter_messages_count:r,contexts:{ui_context:{step:ft,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(vt,{limit_meter_messages_count:r,contexts:{ui_context:{step:ft,action:"click",ui_element:"pricing_button"}}});window.open(bt,"_blank")}},{key:"onCloseBanner",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(vt,{limit_meter_messages_count:r,contexts:{ui_context:{step:ft,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){return{headerText:mt.t("You\u2019ve just reached the 10k message limit"),bodyText:mt.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(B,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:ht})}}]);return t}(d["PureComponent"]);_t.displayName="JustReachedMsgLimitBanner";var yt=function e(t){return{clogger:Object(O["a"])({state:t})}};var kt=Object(h["connect"])(yt)(_t);var Ot=r(444);var Et=new k["b"]("client");var wt={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"};var Ct=65;var St="GROWTH_PRICING";var jt="/pricing?ui_element=11&ui_step="+Ct;var It={messagesCount:m["b"].number.isRequired,clogger:m["b"].object.isRequired};var Tt=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["onGo","onCloseBanner"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(St,{limit_meter_messages_count:r,contexts:{ui_context:{step:Ct,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(St,{limit_meter_messages_count:r,contexts:{ui_context:{step:Ct,action:"click",ui_element:"pricing_button"}}});window.open(jt,"_blank")}},{key:"onCloseBanner",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(St,{limit_meter_messages_count:r,contexts:{ui_context:{step:Ct,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){var t=this.props.messagesCount;var r=this.roundNumOfMsgsBeyondLimit(t-1e4);if(!r)return null;return{headerText:Et.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:r}),bodyText:Et.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. Upgrade to a paid plan for access to your full history \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:r})}}},{key:"roundNumOfMsgsBeyondLimit",value:function e(t){if(!t||t<=0)return t;if(t>9&&t<100)return 10*Math.floor(t/10);if(t>=100&&t<=999999){var r=100*Math.floor(t/100);return Object(k["k"])(r)}if(t>999999)return Object(Ot["a"])(t);return null}},{key:"render",value:function e(){var t=this.getContent();if(!t)return null;return p.a.createElement(B,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:wt})}}]);return t}(d["PureComponent"]);Tt.displayName="ThirtyDaysAfterMsgLimitBanner";var Nt=function e(t){return{clogger:Object(O["a"])({state:t})}};var At=Object(h["connect"])(Nt)(Tt);var Rt=r(29);var Mt=r(23);var Pt=r(682);var xt=r(3547);var Dt=r(821);var Ft=r(3456);var Lt=new k["b"]("team_creation");var Bt={countPref:"team_creation_account_setup_banner_cta_count",tsPref:"team_creation_account_setup_banner_cta_last_ts"};var Ut="team_creation_dialog_mount_point";var qt={featureTractorOnboarding:m["b"].bool.isRequired,featureTractorMoreStrings:m["b"].bool.isRequired,clogger:m["b"].object.isRequired,teamId:m["b"].string.isRequired,hasInvited:m["b"].bool,workflow:m["b"].object,activeWorkflowTask:m["b"].string,completeWorkflowTask:m["b"].func};var Gt={hasInvited:false,workflow:null,activeWorkflowTask:"",completeWorkflowTask:j["noop"]};var Ht=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["onGo","getBannerContent"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.activeWorkflowTask;this.loadFirstImageForDialog();"start_team_creator_account_setup"===t&&this.props.completeWorkflowTask({taskSubtype:"start_team_creator_account_setup"})}},{key:"onGo",value:function e(){var t=this.props,r=t.activeWorkflowTask,a=t.teamId,n=t.hasInvited,i=t.clogger;var s=r;"start_team_creator_account_setup"!==r&&"complete_team_creator_account_setup"!==r&&(s="invite_team_creator_account_setup");i.track(Rt["j"].GROWTH_BANNER_TRACTOR,{contexts:{ui_context:{step:Ft["a"][s],action:"click"}}});if("start_team_creator_account_setup"===r||"complete_team_creator_account_setup"===r)return Object(xt["a"])(a,document.getElementById(Ut));if(!n)return Object(Dt["a"])();return null}},{key:"getBannerContent",value:function e(){var t=this.props,r=t.activeWorkflowTask,a=t.hasInvited,n=t.clogger;var i=r;"start_team_creator_account_setup"!==r&&"complete_team_creator_account_setup"!==r&&(i="invite_team_creator_account_setup");n.track(Rt["j"].GROWTH_BANNER_TRACTOR,{contexts:{ui_context:{step:Ft["a"][i],action:"impression"}}});if("start_team_creator_account_setup"===r)return this.getFirstSetupBannerContent();if("complete_team_creator_account_setup"===r)return this.getSecondSetupBannerContent();if(!a)return this.getInvitesBannerContent();return{}}},{key:"getFirstSetupBannerContent",value:function e(){var t=this.props,r=t.hasInvited,a=t.featureTractorMoreStrings;var n=a&&r?Lt.t("You can send messages here right away \u2014 but to get the most out of Slack, the next steps are to save your account and then get the conversation started."):Lt.t("You can send messages here right away \u2013 but to get the most out of Slack, the next step is to save your account and invite a few people to join the conversation.");return{headerText:Lt.t("Here it is! The first channel in your team\u2019s Slack workspace"),bodyText:n,imgSrc:cdn_url+"/08b1d/img/tractor/banners/first_setup@2x.png",goButtonText:Lt.t("Save Your Account")}}},{key:"getSecondSetupBannerContent",value:function e(){var t=this.props,r=t.hasInvited,a=t.featureTractorMoreStrings;var n=a&&r?Lt.t("To see what teamwork is like in Slack, take a moment to save your account."):Lt.t("To see what teamwork is like in Slack, take a moment to save your account and invite some teammates to join your workspace.");return{headerText:Lt.t("Save your account and start collaborating"),bodyText:n,imgSrc:cdn_url+"/08b1d/img/tractor/banners/second_setup@2x.png",goButtonText:Lt.t("Save Your Account")}}},{key:"getInvitesBannerContent",value:function e(){if(this.props.featureTractorMoreStrings)return{headerText:Lt.t("Bring your team into Slack"),bodyText:Lt.t("Slack is better with teammates \u2013 invite them to start collaborating."),imgSrc:cdn_url+"/08b1d/img/tractor/banners/invite_others@2x.png",goButtonText:Lt.t("Add People")};return{headerText:"Bring your team into Slack",bodyText:"Slack is better with teammates \u2013 invite them to start collaborating.",imgSrc:cdn_url+"/08b1d/img/tractor/banners/invite_others@2x.png",goButtonText:"Add People"}}},{key:"loadFirstImageForDialog",value:function e(){var t=new Image;var r=new Image;t.src=Ft["b"].profile+".png";r.src=Ft["b"].profile+"@2x.png"}},{key:"render",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.props,r=t.hasInvited,a=t.workflow;if(null===a||"completed"===a.state&&r)return null;var n=this.getBannerContent(),i=n.headerText,s=n.bodyText,o=n.imgSrc,l=n.goButtonText;return p.a.createElement(B,{bodyClass:"p-message_pane_banner__body--wider-text",headerText:i,bodyText:s,onGo:this.onGo,shouldCloseOnGo:false,imgSrc:o,goButtonText:l,showCancelButton:false,bannerPrefs:Bt})}}]);return t}(d["PureComponent"]);Ht.displayName="TeamCreationAccountSetupBanner";Ht.defaultProps=Gt;var Wt=function e(t){return{featureTractorOnboarding:Object(y["isFeatureEnabled"])(t,"feature_tractor_onboarding"),featureTractorMoreStrings:Object(y["isFeatureEnabled"])(t,"feature_tractor_more_strings"),clogger:Object(O["a"])({state:t}),teamId:Object(Mt["getTeamId"])(t),hasInvited:Object(E["getUserPref"])(t,"has_invited"),workflow:Object(Pt["getWorkflow"])(t),activeWorkflowTask:Object(Pt["getActiveWorkflowTask"])(t)}};var Vt={completeWorkflowTask:Pt["completeWorkflowTask"]};var zt=Object(h["connect"])(Wt,Vt)(Ht);var Qt={bannerName:m["b"].string,bannerData:m["b"].object,loadBanner:m["b"].func.isRequired,featureModernizeBannersV3:m["b"].bool.isRequired};var Kt={bannerName:"",bannerData:{}};var Yt=function e(){return p.a.createElement(Y,null)};Yt.displayName="renderI18nJapanBetaSendBtnBanner";var Jt=function e(t){var r=t.bannerData;return p.a.createElement(ge,{numDaysLeft:r.no_of_days_left,expirationDate:r.pay_date_next})};Jt.displayName="renderTwoWeeksLeftEscTrialBanner";var Zt=function e(t){var r=t.bannerData;return p.a.createElement(Se,{numDaysLeft:r.no_of_days_left,expirationDate:r.pay_date_next})};Zt.displayName="renderOneWeekLeftEscTrialBanner";var Xt=function e(){return p.a.createElement(at,null)};Xt.displayName="renderApproachingFileLimitBanner";var $t=function e(t){var r=t.bannerData;return p.a.createElement(xe,{numMsgs:r.messages_count_abbrev})};$t.displayName="renderInProdTrialBanner";var er=function e(t){var r=t.bannerData;return p.a.createElement(Ve,{expirationDate:r.expiration_date})};er.displayName="renderInProdTrialReminderBanner";var tr=function e(t){var r=t.bannerData;return p.a.createElement(pt,{messagesCount:r.messages_count})};tr.displayName="renderApproachingMsgLimitBanner";var rr=function e(t){var r=t.bannerData;return p.a.createElement(kt,{messagesCount:r.messages_count})};rr.displayName="renderJustReachedMsgLimitBanner";var ar=function e(t){var r=t.bannerData;return p.a.createElement(At,{messagesCount:r.messages_count})};ar.displayName="renderThirtyDaysAfterMsgLimitBanner";var nr=function e(){return p.a.createElement(zt,null)};nr.displayName="renderTeamCreationAccountSetupBanner";var ir={activation_msg_limit_banner:null};var sr={i18n_japan_beta_send_btn_banner:Yt,two_weeks_left_esc_trial_banner:Jt,one_week_left_esc_trial_banner:Zt,in_prod_trial_banner:$t,in_prod_trial_reminder_banner:er,approaching_file_limit_banner:Xt,approaching_msg_limit_banner:tr,just_reached_msg_limit_banner:rr,thirty_days_after_msg_limit_banner:ar,team_creation_account_setup_banner:nr};var or=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.props.loadBanner()}},{key:"render",value:function e(){var t=this.props,r=t.bannerName,a=t.bannerData,n=t.featureModernizeBannersV3;if(!r)return null;if(g(r)){_(r,a);return null}var i=sr[r];n&&(i=i||ir[r]);if(!i){b({name:r,data:a});return null}return i({bannerData:a})}}]);return t}(d["PureComponent"]);or.displayName="MessagePaneBannerContainer";or.defaultProps=Kt;var lr=function e(t){return{bannerName:Object(f["getMessagePaneBannerName"])(t),bannerData:Object(f["getMessagePaneBannerData"])(t),featureModernizeBannersV3:Object(y["isFeatureEnabled"])(t,"feature_modernize_banners_v3")}};var cr={loadBanner:f["loadBanner"]};var ur=t["a"]=Object(h["connect"])(lr,cr)(or)},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(129);var h=r(1);var f=r.n(h);var v=r(14);var b=r(2);var g=r.n(b);var _=r(15);var y=r.n(_);var k=r(10);var O=r(469);var E=r(18);var w=r(173);var C=r(121);var S=r(11);var j=new k["b"]("admin");var I={member:m["b"].object.isRequired,isEnterprise:m["b"].bool};var T={member:{},isEnterprise:false};var N=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){var t=void 0;var r=void 0;var a=this.props,n=a.member,i=a.isEnterprise;if(n.deleted){t="minus";r="deactivated"}else if(n.is_primary_owner){t=j.t("Primary Owner");r="primary_owner"}else if(n.is_owner){t=j.t("Workspace Owner");r="owner"}else if(n.is_admin){t=j.t("Workspace Admin");r="admin"}else if(n.is_ultra_restricted){t=j.t("Single-Channel Guest");r="ultra_restricted"}else if(n.is_restricted){t=j.t("Multi-Channel Guest");r="restricted"}else if(i){t=j.t("Full Member");r="member"}else{t=j.t("Full Member");r="member"}var s=y()("p-admin_member_table__member_type_icon","p-admin_member_table__member_type_icon--"+r,{hidden:"deactivated"===r});var o=y()({hidden:"deactivated"===r});var l=y()({hidden:"deactivated"!==r});return f.a.createElement("div",{className:"p-admin_member_table__member_type"},f.a.createElement("div",{className:s}),f.a.createElement("div",{className:o},t),f.a.createElement(E["b"],{type:t,className:l}))}}]);return t}(h["PureComponent"]);N.displayName="AdminMemberType";N.defaultProps=T;var A=function e(t){var r={isEnterprise:Object(S["pageNeedsEnterprise"])(t)};return r};var R=Object(v["connect"])(A)(N);var M=r(714);var P=r(164);var x=r(225);var D=r(50);var F=r(77);var L=r(212);var B=r(16);var U=r(679);var q=r(48);var G=r(13);var H=Object(G["c"])("TS.utility.enterprise.getProviderLabel",b["noop"]);var W=r(719);var V=r(41);var z=new k["b"]("member_actions");var Q={action:m["b"].string.isRequired,team:m["b"].object,target:m["b"].object,currentUser:m["b"].object,targetUserName:m["b"].string,targetIdpGroups:m["b"].array};var K={action:"",team:null,target:null,currentUser:null,targetUserName:"",targetIdpGroups:[]};var Y=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"getFormattedIdpGroups",value:function e(){var t=this.props.targetIdpGroups;var r=g.a.map(t,"name");if(g.a.isEmpty(r))return"";if(1===r.length)return g.a.head(r);return z.t("{group_name} and {num_remaining_groups} more",{num_remaining_groups:r.length-1,group_name:g.a.head(r)})}},{key:"getIdpLabel",value:function e(){var t=Object(W["c"])()?Object(W["c"])():"single sign-on";return H(Object(W["b"])(),t)}},{key:"render",value:function e(){var t=this.props,r=t.action,a=t.team,n=t.target,i=t.currentUser,s=t.targetUserName,o=t.targetIdpGroups;var l=g.a.map(o,"name").length;var c=void 0;var u=void 0;var d=void 0;switch(r){case"activate":c=a&&Object(q["isEnterpriseTeam"])(a)&&Object(B["isOrgDeleted"])(n)?z.t("Reactivate account"):a&&Object(q["isEnterpriseTeam"])(a)?z.t("Add to workspace"):z.t("Activate account");break;case"activate_as_guest":c=z.t("Activate as Guest");break;case"cant_reactivate_as_guest":c=f.a.createElement(V["d"],{tip:z.t("{name} is a Full Member on other workspaces in this organization. Their account type must be the same for every workspace.",{name:this.props.targetUserName}),"data-qa":"tooltip-cant-reactivate-guest",zIndex:"above_fs"},f.a.createElement("span",null,z.t("Can\u2019t reactivate as Guest")));break;case"deactivate":c=a&&Object(q["isEnterpriseTeam"])(a)?z.t("Remove from workspace"):z.t("Deactivate account");break;case"cant_deactivate":c=f.a.createElement(V["d"],{tip:z.t("{name} is part of {num_groups, plural, =1 {one {idp_label} group} other {# {idp_label} groups}} assigned to this workspace: ({label}).",{name:s,num_groups:l,label:this.getFormattedIdpGroups(),idp_label:this.getIdpLabel()}),"data-qa":"tooltip-cant-deactivate",zIndex:"above_fs"},f.a.createElement("span",null,z.t("Can\u2019t remove member")));break;case"cant_convert_or_deactivate":c=f.a.createElement(V["d"],{tip:z.t("{name} can\u2019t be removed, because they\u2019re part of {num_groups, plural, =1 {one {idp_label} group} other {# {idp_label} groups}} assigned to this workspace: ({label}). They also belong to multiple workspaces in this organization, so their account type can only be changed at the org level.",{name:s,num_groups:l,label:this.getFormattedIdpGroups(),idp_label:this.getIdpLabel()}),"data-qa":"tooltip-cant-convert-or-deactivate",zIndex:"above_fs"},f.a.createElement("span",null,z.t("Can\u2019t remove member")));break;case"demote_admin":c=z.t("Change to Full Member");break;case"demote_owner":c=z.t("Change to Admin");break;case"promote_to_member":c=z.t("Change to Full Member");break;case"promote_to_admin":c=z.t("Change to Admin");break;case"promote_to_owner":c=z.t("Change to Owner");break;case"convert_to_guest":c=z.t("Change to Guest");break;case"cant_convert_member_role":d=z.t("Can\u2019t change account type");if(Object(B["isUltraRestricted"])(n))u=z.t("{name} is a Single-Channel Guest on other workspaces in this organization, so their account type can only be changed at the org level.",{name:s});else if(Object(B["isGuest"])(n))u=z.t("{name} is a Multi-Channel Guest on other workspaces in this organization, so their account type can only be changed at the org level.",{name:s});else{d=z.t("Can\u2019t change to guest");u=z.t("{name} is a Full Member on other workspaces in this organization, so their account type can only be changed at the org level.",{name:s})}c=f.a.createElement(V["d"],{tip:u,"data-qa":"tooltip-cant-convert-member-role",zIndex:"above_fs"},f.a.createElement("span",null,d));break;case"promote_to_mc_guest":c=z.t("Change to Multi-Channel Guest");break;case"demote_to_sc_guest":c=z.t("Change to Single-Channel Guest");break;case"transfer_ownership":c=z.t("Transfer ownership");break;case"send_sso":c=z.t("Send SSO binding email");break;case"disable_2fa":c=z.t("Disable two-factor authentication");break;case"edit_member_profile":c=n.id===i.id?z.t("Edit your info"):z.t("Edit info");break;default:c="";break}return c}}]);return t}(h["PureComponent"]);Y.displayName="MemberActionLabel";Y.defaultProps=K;var J=function e(t,r){var a=r.target;return{currentUser:Object(x["b"])(t),targetUserName:Object(B["getPrefCompliantMemberName"])(t,a,true,true),targetIdpGroups:Object(U["getIdpGroupsForMember"])(t,a.id)}};var Z=Object(v["connect"])(J)(Y);var X=r(54);var $=r(20);var ee=r(103);var te=r(283);var re=r(128);var ae=r(40);var ne=r.n(ae);var ie=r(19);var se=r(213);var oe=r(661);var le=r(151);var ce=r(88);var ue=r(338);var de=r(660);var pe=r(263);var me=r(35);var he=r.n(me);var fe=r(359);var ve=r(113);var be=r(285);var ge=r(930);var _e=new k["b"]("admin");var ye={currentExpirationTs:m["b"].number,onExpirationChange:m["b"].func,clogger:m["b"].object.isRequired};var ke={currentExpirationTs:null,onExpirationChange:b["noop"]};var Oe="-1";var Ee=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={selectedExpirationOption:null,selectedCustomExpiration:null};var a=e.currentExpirationTs;a&&(r.state.selectedExpirationOption={label:r.makeCurrentExpirationString(),value:String(a)});r.handleExpirationChange=r.handleExpirationChange.bind(r);r.handleDatePickerChange=r.handleDatePickerChange.bind(r);r.onClickExpiration=r.onClickExpiration.bind(r);return r}l()(t,[{key:"onClickExpiration",value:function e(){var t=this.props.clogger;t.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"click",ui_element:"ADMIN_ACTION_UPDATE_TIME_LIMIT"}}})}},{key:"makeCurrentExpirationString",value:function e(){var t=this.props.currentExpirationTs;if(!t)return null;var r=Object(fe["a"])(t,"{date}");return _e.t("Deactivate on {date}",{date:r})}},{key:"makeGuestExpirationTsFromDate",value:function e(t){t.setHours(23,59,59,0);return t.getTime()/1e3}},{key:"makeStandardExpirationTs",value:function e(){var t=this.props.currentExpirationTs;var r=this.state.selectedExpirationOption.value;var a=void 0;if("0"===r)a=0;else if(r===String(t))a=null;else{var n=new Date;var i=parseInt(r,10);n.setDate(n.getDate()+i);a=this.makeGuestExpirationTsFromDate(n)}return a}},{key:"makeCustomExpirationTs",value:function e(){var t=this.state.selectedCustomExpiration;var r=Object(ve["a"])(t,{parseFormat:"YYYY-MM-DD"});return this.makeGuestExpirationTsFromDate(r)}},{key:"handleExpirationChange",value:function e(t,r){var a=this;this.setState(function(){return{selectedExpirationOption:{value:t,label:r}}},function(){var e=t!==Oe?a.makeStandardExpirationTs():null;a.props.onExpirationChange(e)})}},{key:"handleDatePickerChange",value:function e(t){var r=this;this.setState(function(){return{selectedCustomExpiration:t}},function(){var e=r.makeCustomExpirationTs();r.props.onExpirationChange(e)})}},{key:"maybeRenderDatePicker",value:function e(){var t=this.state,r=t.selectedExpirationOption,a=t.selectedCustomExpiration;if(!r||r.value!==Oe)return null;var n=he()().add(1,"day").format("YYYY-MM-DD");var i=Object(ve["a"])(a,{parseFormat:"YYYY-MM-DD",returnMoment:true});var s=_e.t("Deactivate on {date}",{date:i.format("MMMM D, YYYY")});return f.a.createElement(ge["b"],{position:"bottom",offsetX:-231,offsetY:-369,selectedDate:a,dateFormat:"YYYY-MM-DD",onDateChange:this.handleDatePickerChange,disableDatesBefore:n,dropdownClassName:"p-admin_member_table__date_picker_wrapper",calendarClassName:"p-admin_member_table__date_picker",modalBodyOpenClassName:"c-date_picker__ReactModal__Body--open"},f.a.createElement(C["a"],{className:"p-admin_member_table__date_picker_trigger",ariaLabel:_e.t("Custom expiration date"),"data-qa":"guest_expiration_input_custom_date"},f.a.createElement(E["b"],{type:"calendar",className:"p-search_filter__calendar_icon margin_right_50"}),f.a.createElement("span",null,a?s:"")))}},{key:"render",value:function e(){var t=this.props.currentExpirationTs;var r=this.state.selectedExpirationOption;var a=[{label:_e.t("No limit"),value:"0"},{label:_e.t("7 days"),value:"7"},{label:_e.t("30 days"),value:"30"},{label:_e.t("60 days"),value:"60"},{label:_e.t("Custom"),value:Oe}];t&&a.push({label:this.makeCurrentExpirationString(),value:String(t)});return f.a.createElement(f.a.Fragment,null,f.a.createElement(ce["a"],{htmlFor:"guest_expiration",text:_e.rt('<span className="bold">Set a time limit</span> <span className="sk_dark_gray">(optional)</span>')},f.a.createElement(be["d"],{id:"guest_expiration",options:a,selectedOption:r,onChange:this.handleExpirationChange,value:r?r.value:null,isDisabled:false,onOpen:this.onClickExpiration})),this.maybeRenderDatePicker(),f.a.createElement("p",{className:"p-admin_member_table__caption"},_e.t("Guest accounts will expire on 11:59PM on the last day. We\u2019ll send you a message 2 days prior as a reminder.")))}}]);return t}(h["PureComponent"]);Ee.displayName="GuestExpirationInput";Ee.defaultProps=ke;var we=function e(t){return{clogger:Object(P["a"])({state:t})}};var Ce=Object(v["connect"])(we)(Ee);var Se=new k["b"]("member_actions");var je={action:m["b"].oneOf(["activate_as_guest","convert_to_guest","promote_to_mc_guest","demote_to_sc_guest"]).isRequired,target:m["b"].object.isRequired,showToast:m["b"].func,closeModal:m["b"].func,channels:m["b"].array,isLoadingChannels:m["b"].bool,isPaid:m["b"].bool,isEnterprise:m["b"].bool,unarchivedPublicAndPrivateChannels:m["b"].array,promoteToMcGuest:m["b"].func,demoteToScGuest:m["b"].func,convertMemberToMcGuest:m["b"].func,convertMemberToScGuest:m["b"].func,loadChannels:m["b"].func.isRequired,clogger:m["b"].object};var Ie={action:"",target:{},showToast:g.a.noop,closeModal:g.a.noop,channels:null,isPaid:false,isEnterprise:false,unarchivedPublicAndPrivateChannels:[],promoteToMcGuest:g.a.noop,demoteToScGuest:g.a.noop,convertMemberToMcGuest:g.a.noop,convertMemberToScGuest:g.a.noop,loadChannels:g.a.noop,isLoadingChannels:false,clogger:{track:g.a.noop}};var Te={growth_id:"GROWTH_PRICING",admin_id:"ADMIN_SITE_MANAGE_MEMBERS_ACTION",pricing_button:"pricing_button",activate_as_guest:"ADMIN_ACTION_ACTIVATE_AS_GUEST",convert_to_guest:"ADMIN_ACTION_DEMOTE_MEMBER_TO_GUEST",promote_to_mc_guest:"ADMIN_ACTION_PROMOTE_URA_TO_RA",demote_to_sc_guest:"ADMIN_ACTION_DEMOTE_RA_TO_URA",add_channel_for_mc_guest:"ADMIN_ACTION_ADD_RA_TO_CHANNEL",remove_channel_for_mc_guest:"ADMIN_ACTION_REMOVE_RA_FROM_CHANNEL",edit_channel_for_sc_guest:"ADMIN_ACTION_EDIT_URA_CHANNEL",edit_expiration_ts:"ADMIN_ACTION_CHOOSE_TIME_LIMIT_OPTION"};var Ne="p-admin_member_table_dialog__ReactModal__Body--open";var Ae=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={expirationTs:void 0,newChannelIds:[],convertToGuestStep:void 0,convertToGuestType:null,goButtonIsPending:false,shouldShowChannelPickerError:false};g.a.bindAll(r,["setInputRef","clogAdminActions","onExpirationChange","addHiddenChannelIds","getResultsForChannelsQuery","getPreselectedItems","onChannelPickerChange","onGoConvertGuestType","onGuestTypeChange","onGoConvertToGuest","onGoUpgrade","onCancelConvertToGuest","shouldShowChannelPickerError"]);"convert_to_guest"!==e.action&&"activate_as_guest"!==e.action||(r.state.convertToGuestStep=1);return r}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props.target;this.props.loadChannels({memberId:t.id,isGuest:Object(B["isRestricted"])(t),isDeactivated:Object(B["isDeleted"])(t)})}},{key:"componentWillReceiveProps",value:function e(t){t.channels&&!this.props.channels&&this.setState(function(){return{newChannelIds:g.a.map(t.channels,"id")}})}},{key:"onExpirationChange",value:function e(t){this.setState(function(){return{expirationTs:t}})}},{key:"onChannelPickerChange",value:function e(t){var r=this;var a=g.a.map(t,"id");this.setState(function(){return{newChannelIds:a,shouldShowChannelPickerError:r.shouldShowChannelPickerError(a)}})}},{key:"onGoConvertGuestType",value:function e(){var t=this;var r=[];var a=this.props,n=a.action,i=a.target,s=a.showToast;var o=this.state.expirationTs;this.setState(function(){return{goButtonIsPending:true}});var l=this.inputList.getSelectedValue();l=g.a.chain(l).map("id").reject(function(e){return"0"===e}).value();if("promote_to_mc_guest"===n){l=this.addHiddenChannelIds(l);g.a.isEmpty(l)?this.setState(function(){return{goButtonIsPending:false}}):this.props.promoteToMcGuest({memberId:i.id,channelIdsToAdd:l,expirationTs:o}).then(function(){t.setState(function(){return{goButtonIsPending:false}});s(n);t.props.closeModal();r.push(n);o&&r.push("edit_expiration_ts");r.map(function(e){return t.clogAdminActions("admin_id","update",e)})}).catch(function(e){t.setState(function(){return{goButtonIsPending:false}});s(n,{isSuccessful:false});t.props.closeModal();throw e})}else"demote_to_sc_guest"!==n||g.a.isEmpty(l)?this.setState(function(){return{goButtonIsPending:false}}):this.props.demoteToScGuest({memberId:i.id,channelId:l[0],expirationTs:o}).then(function(){t.setState(function(){return{goButtonIsPending:false}});s(n);t.props.closeModal();r.push(n);o&&r.push("edit_expiration_ts");l.length&&r.push("edit_channel_for_sc_guest");r.map(function(e){return t.clogAdminActions("admin_id","update",e)})}).catch(function(e){t.setState(function(){return{goButtonIsPending:false}});s(n,{isSuccessful:false});t.props.closeModal();throw e})}},{key:"onGuestTypeChange",value:function e(t){t.persist();this.setState(function(){return{convertToGuestType:t.target.value}})}},{key:"onGoUpgrade",value:function e(){window.open("/pricing?ui_element=11&ui_step=33","_blank");this.clogAdminActions("admin_id","click","pricing_button");this.clogAdminActions("growth_id","click","pricing_button")}},{key:"onGoConvertToGuest",value:function e(){var t=this;var r=[];var a=this.props,n=a.target,i=a.showToast,s=a.action;var o=this.state,l=o.convertToGuestStep,c=o.convertToGuestType,u=o.expirationTs;if(1===l)this.setState(function(){return{convertToGuestStep:2}});else if(2===l){this.setState(function(){return{goButtonIsPending:true}});var d=this.inputList.getSelectedValue();d=g.a.chain(d).map("id").reject(function(e){return"0"===e}).value();if("multi_channel"===c){d=this.addHiddenChannelIds(d);g.a.isEmpty(d)?this.setState(function(){return{goButtonIsPending:false}}):this.props.convertMemberToMcGuest({memberId:n.id,expirationTs:u,channelIds:d}).then(function(){t.setState(function(){return{goButtonIsPending:false}});i("demote_to_mc_guest");t.props.closeModal();r.push(s);u&&r.push("edit_expiration_ts");d.length&&r.push("add_channel_for_mc_guest");r.map(function(e){return t.clogAdminActions("admin_id","update",e)})}).catch(function(e){t.setState(function(){return{goButtonIsPending:false}});i("demote_to_mc_guest",{isSuccessful:false});t.props.closeModal();throw e})}else"single_channel"!==c||g.a.isEmpty(d)?this.setState(function(){return{goButtonIsPending:false}}):this.props.convertMemberToScGuest({memberId:n.id,channelId:d[0],expirationTs:u}).then(function(){t.setState(function(){return{goButtonIsPending:true}});i("demote_to_sc_guest");t.props.closeModal();r.push(s);u&&r.push("edit_expiration_ts");d[0]&&r.push("edit_channel_for_sc_guest");r.map(function(e){return t.clogAdminActions("admin_id","update",e)})}).catch(function(e){t.setState(function(){return{goButtonIsPending:false}});i("demote_to_sc_guest",{isSuccessful:false});t.props.closeModal();throw e})}}},{key:"onCancelConvertToGuest",value:function e(){if(1===this.state.convertToGuestStep)return this.props.closeModal();return this.setState(function(){return{convertToGuestStep:1}})}},{key:"setInputRef",value:function e(t){this.inputList=t}},{key:"getPreselectedItems",value:function e(){var t=this.props,r=t.channels,a=t.action;var i=this.state.convertToGuestType;if(!r||!r.length||"demote_to_sc_guest"===a||"single_channel"===i)return[];return r.map(function(e){return n()({},e,{label:f.a.createElement(le["a"],{channel:e}),preselected:true})})}},{key:"getResultsForChannelsQuery",value:function e(t){var r=this.props.channels;var a=r?g.a.map(r,"id"):[];if(!t){var i=this.props.unarchivedPublicAndPrivateChannels.map(function(e){return n()({},e,{label:f.a.createElement(le["a"],{channel:e}),preselected:g.a.includes(a,e.id)})});return Promise.resolve({items:i,replace_all_items:true})}return Object(pe["a"])(t,{channels:{include_archived:false},groups:true,enterprise_channels:{remote_limit:96},tiered:true}).then(function(e){var t=e.map(function(e){var t=e.model_ob;return n()({},t,{label:f.a.createElement(le["a"],{channel:t}),preselected:g.a.includes(a,t.id)})});return{items:t,replace_all_items:true}})}},{key:"addHiddenChannelIds",value:function e(t){var r=this.props.channels;if(!r||!r.length)return t;var a=g.a.filter(r,function(e){return e.isUnknown||e.isNonExistent});if(!a)return t;if(!!a&&a.length){a.map(function(e){return t.push(e.id)});return t}return t}},{key:"clogAdminActions",value:function e(t,r,a){var n=this.props.clogger;n.track(Te[t],{contexts:{ui_context:{step:"admin_home",action:r,ui_element:Te[a],ui_component:"dialog"}}})}},{key:"chooseDialogTitle",value:function e(){var t=this.state,r=t.convertToGuestStep,a=t.convertToGuestType;var n=this.props.action;if(2===r){if("multi_channel"===a){if("activate_as_guest"===n)return Se.t("Activate as a Multi-Channel Guest");return Se.t("Change to a Multi-Channel Guest")}if("single_channel"===a){if("activate_as_guest"===n)return Se.t("Activate as a Single-Channel Guest");return Se.t("Change to a Single-Channel Guest")}}if("activate_as_guest"===n)return Se.t("Activate as a guest account");return Se.t("Change to a guest account")}},{key:"shouldShowChannelPickerError",value:function e(t){var r=this.props.channels;var a=g.a.filter(r,function(e){return!e||e.isUnknown||e.isNonExistent});return t.length<1&&a.length<1}},{key:"shouldDisableGoButton",value:function e(){var t=this.state,r=t.goButtonIsPending,a=t.expirationTs,n=t.newChannelIds,i=t.convertToGuestStep,s=t.convertToGuestType;var o=this.props.channels;if(!g.a.isEmpty(o)&&"object"===("undefined"===typeof o?"undefined":ne()(o)))return false;var l=null===a||r||0===n.length;if(i){if(1===i)return!s;return 2===i&&l}return l}},{key:"renderConvertToGuestDialogStep",value:function e(){if(1===this.state.convertToGuestStep)return this.renderChooseGuestType();if(2===this.state.convertToGuestStep)return this.renderSetGuestInfo();return null}},{key:"renderSetGuestInfo",value:function e(){var t=this.props,r=t.action,a=t.target;var n=this.state.convertToGuestType;var i=Object(B["getMemberRealName"])(a);var s=void 0;"promote_to_mc_guest"===r?s=Se.rt("Currently, <strong>{targetName}</strong> is in the channel below. You can remove or add any channels you\u2019d like. In the future, <strong>{targetName}</strong> will only be able to join channels by invitation.",{targetName:i}):"demote_to_sc_guest"===r?s=Se.rt("Choose the channel <strong>{targetName}</strong> should be a member of.",{targetName:i}):Object(B["isRestricted"])(a)||"multi_channel"!==n&&"single_channel"!==n||(s=Se.rt("Right now, <strong>{targetName}</strong> is a member of this workspace. Changing to a guest account will restrict the channels they can access.",{targetName:Object(B["getMemberRealName"])(a)}));return f.a.createElement(f.a.Fragment,null,f.a.createElement("p",null,s),this.renderChannelPicker(),f.a.createElement(Ce,{currentExpirationTs:a.profile.guest_expiration_ts,onExpirationChange:this.onExpirationChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props,r=t.action,a=t.target,n=t.channels,i=t.isLoadingChannels;var s=this.state,o=s.convertToGuestType,l=s.shouldShowChannelPickerError;var c=Object(B["getMemberRealName"])(a);var u=void 0;"promote_to_mc_guest"===r||"multi_channel"===o?u=Se.t("{possessiveTargetName} channels",{possessiveTargetName:Object(k["n"])(Object(k["c"])(c))}):"demote_to_sc_guest"!==r&&"single_channel"!==o||(u=Se.t("{possessiveTargetName} channel",{possessiveTargetName:Object(k["n"])(Object(k["c"])(c))}));var d=f.a.createElement(oe["a"],{ref:this.setInputRef,single:"demote_to_sc_guest"===r||"single_channel"===o,items:this.getPreselectedItems(),dataPromise:this.getResultsForChannelsQuery,maxHeightOfList:150,onValueChange:this.onChannelPickerChange,placeholderText:Se.t("Choose a channel"),preventScroll:"multi_channel"===o,setSelected:false});var p=null;if(("multi_channel"===o||"promote_to_mc_guest"===r)&&!!n&&n.length){var m=g.a.filter(n,function(e){return e.isUnknown||e.isNonExistent}).length;m&&(p=Object(B["isUltraRestricted"])(a)||1===m?Se.t("Currently in {numPrivateChannels, plural, =1 {a private channel} other {# private channels}}",{numPrivateChannels:m,fallbackHash:"4f07954ed71ea0b29ffacd93f95c681f490fb1d8",fallbackHashNs:"admin"}):Se.t("+{numPrivateChannels, plural, =1 {# other private channel} other {# other private channels}}",{numPrivateChannels:m}))}var h=y()("p-admin_member_table__edit_channels",{"p-admin_member_table__edit_channels--error":l});return f.a.createElement("div",{className:h},f.a.createElement(ce["a"],{text:u}),i?f.a.createElement("span",{"data-qa":"loading_channels_label"},Se.t("Loading channels...")):d,p?f.a.createElement("span",{className:"c-hint","data-qa":"hidden_channels_note"},p):null,l?f.a.createElement(se["a"],{id:"guest_channel_picker_error",level:"error",type:"inline",className:"p-admin_member_table__edit_channels_error_label"},Se.t("Each guest needs to be in at least one channel.")):null)}},{key:"renderChooseGuestType",value:function e(){var t=void 0;var r=this.props,a=r.action,n=r.target;var i=Object(B["getMemberRealName"])(n);var s=Object(k["c"])(i);t="activate_as_guest"===a?Se.rt("Right now, <strong>{targetName}</strong> account for this workspace is deactivated. Activating their account as a guest will give them access to specific channels within the workspace.",{targetName:s}):Se.rt("Right now, <strong>{targetName}</strong> is a member of this workspace. Changing to a guest account will restrict the channels they can access.",{targetName:Object(B["getMemberRealName"])(n)});var o="guest_type";var l=f.a.createElement("span",null,f.a.createElement("strong",null,Se.t("Multi-Channel Guest")),f.a.createElement("div",{className:"sk_dark_gray"},Se.t("Multi-Channel Guests are billed as regular members, and can be added to unlimited channels.")));var c=f.a.createElement("span",null,f.a.createElement("strong",null,Se.t("Single-Channel Guest")),f.a.createElement("div",{className:"sk_dark_gray"},Se.t("Single-Channel Guests are free. You can add up to 5 of them per paid member of your workspace.")));return f.a.createElement(f.a.Fragment,null,f.a.createElement("p",{className:"margin_bottom_200"},t),f.a.createElement(de["a"],{field:o,legendText:Se.t("Choose account type")},f.a.createElement(ce["a"],{text:l,htmlFor:o+"-1",type:"inline",cursor:"pointer"},f.a.createElement(ue["a"],{id:o+"-1",name:o,value:"multi_channel",checked:"multi_channel"===this.state.convertToGuestType,onChange:this.onGuestTypeChange})),f.a.createElement(ce["a"],{text:c,htmlFor:o+"-2",type:"inline",cursor:"pointer"},f.a.createElement(ue["a"],{id:o+"-2",name:o,value:"single_channel",checked:"single_channel"===this.state.convertToGuestType,onChange:this.onGuestTypeChange}))),f.a.createElement("p",{className:"p-admin_member_table__caption"},Se.t("Guest accounts will expire on 11:59PM on the last day. We\u2019ll send you a message 2 days prior as a reminder.")))}},{key:"renderPaidFeatureDialog",value:function e(){return f.a.createElement(ee["a"],{title:Se.t("Guests are available for paid workspaces"),goButtonText:Se.t("Learn more"),cancelText:Se.t("Cancel"),onGo:this.onGoUpgrade,truncateTitle:false,overlayClassName:"p-admin_member_table__dialog_overlay",modalBodyOpenClassName:Ne,"data-qa":"convert_to_guest_upgrade_dialog"},f.a.createElement("p",{className:"margin_bottom_200"},Se.rt("Your workspace is currently on our <strong>Free plan</strong>. Upgrading to our <strong>Standard plan</strong> will give you access to additional user management features:")),f.a.createElement("ul",null,f.a.createElement("li",null,Se.rt("<strong>Multi-Channel Guests</strong> are paid users that can only access channels that they are invited to join.")),f.a.createElement("li",null,Se.rt("<strong>Single-Channel Guests</strong> are free accounts that can only participate in a single channel."))))}},{key:"renderConvertToGuestDialog",value:function e(){var t=this.state,r=t.convertToGuestStep,a=t.goButtonIsPending;return f.a.createElement(ee["a"],{title:this.chooseDialogTitle(),goButtonText:1===r?Se.t("Next"):Se.t("Save"),onCancel:this.onCancelConvertToGuest,onClose:this.props.closeModal,cancelText:1===r?Se.t("Cancel"):Se.t("Previous"),onGo:this.onGoConvertToGuest,goButtonIsPending:a,goButtonIsDisabled:this.shouldDisableGoButton(),truncateTitle:false,overlayClassName:"p-admin_member_table__dialog_overlay",modalBodyOpenClassName:Ne,footerText:"Step "+r+" of 2",shouldCloseOnGo:false,shouldCloseOnCancel:false},this.renderConvertToGuestDialogStep())}},{key:"renderConvertGuestTypeDialog",value:function e(){var t=this.props.action;var r=this.state.goButtonIsPending;return f.a.createElement(ee["a"],{title:"promote_to_mc_guest"===t?Se.t("Change to a Multi-Channel Guest"):Se.t("Change to a Single-Channel Guest"),goButtonText:Se.t("Save"),onGo:this.onGoConvertGuestType,goButtonIsPending:r,goButtonIsDisabled:this.shouldDisableGoButton(),truncateTitle:false,overlayClassName:"p-admin_member_table__dialog_overlay",modalBodyOpenClassName:Ne,shouldCloseOnGo:false},this.renderSetGuestInfo())}},{key:"render",value:function e(){var t=this.props,r=t.action,a=t.isPaid,n=t.isEnterprise;if(!a&&!n)return this.renderPaidFeatureDialog();if("promote_to_mc_guest"===r||"demote_to_sc_guest"===r)return this.renderConvertGuestTypeDialog();if("convert_to_guest"===r||"activate_as_guest"===r)return this.renderConvertToGuestDialog();return null}}]);return t}(h["PureComponent"]);Ae.displayName="ChangeToGuestDialog";Ae.defaultProps=Ie;var Re=function e(t,r){var a=r.target;return{isLoadingChannels:Object(re["getIsLoadingChannels"])(t),channels:Object(re["getChannelsById"])(t,a.id),isPaid:Object(q["isPaidTeam"])(Object(D["getCurrentTeam"])(t)),isEnterprise:Object(S["pageNeedsEnterprise"])(t),unarchivedPublicAndPrivateChannels:Object(ie["getUnarchivedPublicAndPrivateChannels"])(t),clogger:Object(P["a"])({state:t})}};var Me=function e(t){return{promoteToMcGuest:function e(r){var a=r.memberId,n=r.channelIdsToAdd,i=r.channelIdsToRemove,s=r.expirationTs;return t(Object(re["promoteToMcGuest"])({memberId:a,channelIdsToAdd:n,channelIdsToRemove:i,expirationTs:s}))},demoteToScGuest:function e(r){var a=r.memberId,n=r.channelId,i=r.expirationTs;return t(Object(re["demoteToScGuest"])({memberId:a,channelId:n,expirationTs:i}))},convertMemberToMcGuest:function e(r){var a=r.memberId,n=r.channelIds,i=r.expirationTs;return t(Object(re["convertMemberToMcGuest"])({memberId:a,channelIds:n,expirationTs:i}))},convertMemberToScGuest:function e(r){var a=r.memberId,n=r.channelId,i=r.expirationTs;return t(Object(re["convertMemberToScGuest"])({memberId:a,channelId:n,expirationTs:i}))},closeModal:function e(){return t(Object(F["closeModal"])())},loadChannels:function e(r){var a=r.memberId,n=r.isGuest,i=r.isDeactivated;return t(Object(re["loadChannels"])({memberId:a,isGuest:n,isDeactivated:i}))}}};var Pe=Object(v["connect"])(Re,Me)(Ae);var xe=r(478);var De=r(17);var Fe=r(1112);var Le=r(190);var Be=new k["b"]("admin");var Ue={loadChannels:m["b"].func.isRequired,target:m["b"].object.isRequired,team:m["b"].object.isRequired,isPaid:m["b"].bool,isEnterprise:m["b"].bool,showToast:m["b"].func,currentUser:m["b"].object.isRequired,channels:m["b"].array,isLoadingChannels:m["b"].bool,unarchivedPublicAndPrivateChannels:m["b"].array,formErrors:m["b"].array,editMemberProfile:m["b"].func,editGuestExpiration:m["b"].func,addAndRemoveGuestChannels:m["b"].func,editSingleChannelGuestChannel:m["b"].func,clearMemberInfoFormErrors:m["b"].func,closeModal:m["b"].func.isRequired,targetUserName:m["b"].string,clogger:m["b"].object.isRequired};var qe={loadChannels:g.a.noop,target:{},team:{},isPaid:false,isEnterprise:false,showToast:g.a.noop,currentUser:{},channels:null,unarchivedPublicAndPrivateChannels:[],formErrors:[],editMemberProfile:g.a.noop,editGuestExpiration:g.a.noop,addAndRemoveGuestChannels:g.a.noop,editSingleChannelGuestChannel:g.a.noop,clearMemberInfoFormErrors:g.a.noop,closeModal:g.a.noop,targetUserName:null,isLoadingChannels:false};var Ge=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.target;r.state={realName:Object(B["getMemberRealName"])(a),displayName:Object(B["getMemberProfileFieldDisplayName"])(a),email:a.profile.email,expirationTs:void 0,newChannelIds:[],goButtonIsPending:false,isEmailValidated:true,shouldShowChannelPickerError:false,isSpeedBumpEnabled:true};g.a.bindAll(r,["onRealNameChange","onDisplayNameChange","onEmailChange","onExpirationChange","getResultsForChannelsQuery","getPreselectedItems","getSpeedBumpBodyText","onChannelPickerChange","onClose","onSubmit","maybeRenderGuestChannelPicker","maybeRenderGuestExpirationField","renderRealNameField","renderDisplayNameField","renderEmailField","shouldDisableGoButton","shouldShowDialogSpeedBump","shouldShowChannelPickerError"]);return r}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props.target;Object(B["isRestricted"])(t)&&this.props.loadChannels({memberId:t.id,isGuest:true})}},{key:"onRealNameChange",value:function e(t){this.props.clearMemberInfoFormErrors();var r=null;""===t&&(r=Object(xe["a"])("name_invalid_name_required"));this.setState(function(){return{realName:t,realNameErrorText:r}})}},{key:"onDisplayNameChange",value:function e(t){this.props.clearMemberInfoFormErrors();this.setState(function(){return{displayName:t}})}},{key:"onEmailChange",value:function e(t){this.setState(function(){return{isSpeedBumpEnabled:true}});this.props.clearMemberInfoFormErrors();var r=Object(Fe["a"])(t);var a=null;""===t?a=Object(xe["a"])("name_invalid_name_required"):r||(a=Object(xe["a"])("invalid_email"));this.setState(function(){return{email:t,emailErrorText:a}})}},{key:"onExpirationChange",value:function e(t){this.setState(function(){return{expirationTs:t}})}},{key:"onChannelPickerChange",value:function e(t){var r=this;var a=g.a.map(t,"id");this.setState(function(){return{newChannelIds:a,shouldShowChannelPickerError:r.shouldShowChannelPickerError(a)}})}},{key:"onClose",value:function e(){this.props.clearMemberInfoFormErrors()}},{key:"onSubmit",value:function e(){var t=this;this.props.clearMemberInfoFormErrors();this.setState(function(){return{goButtonIsPending:true}});var r=this.props.target;var a=this.state,n=a.realName,i=a.displayName,s=a.email;var o=[];var l=[];var c={};if(n!==r.profile.real_name){c.realName=n;l.push("ADMIN_ACTION_EDIT_FULL_NAME")}if(i!==r.profile.display_name){c.displayName=i;l.push("ADMIN_ACTION_EDIT_DISPLAYNAME")}if(s!==r.profile.email){c.email=s;l.push("ADMIN_ACTION_EDIT_EMAIL")}g.a.size(c)>0&&o.push(this.props.editMemberProfile({memberId:r.id,profile:c}));if(Object(B["isRestricted"])(r)){var u=this.props.channels;var d=this.state.newChannelIds;var p=g.a.chain(u).reject(function(e){return e.isUnknown||e.isNonExistent}).map("id").value();var m=Object(De["b"])();if(g.a.xor(d,p).length)if(Object(B["isUltraRestricted"])(r))if(1===d.length){o.push(this.props.editSingleChannelGuestChannel({memberId:r.id,channelId:d[0]}));l.push("ADMIN_ACTION_EDIT_URA_CHANNEL")}else m.warn("Single-Channel Guests must remain in at exactly one channel.");else{var h=g.a.difference(d,p);var f=g.a.difference(p,d);var v=p.length+h.length-f.length;if(v>=1){o.push(this.props.addAndRemoveGuestChannels({memberId:r.id,channelIdsToAdd:g.a.compact(h),channelIdsToRemove:g.a.compact(f)}));h.length&&l.push("ADMIN_ACTION_ADD_RA_TO_CHANNEL");f.length&&l.push("ADMIN_ACTION_REMOVE_RA_FROM_CHANNEL")}else m.warn("Multi-Channel Guests must remain in at least one channel.")}var b=this.state.expirationTs;if(null!==b&&void 0!==b){o.push(this.props.editGuestExpiration({memberId:r.id,expirationTs:b}));l.push("ADMIN_ACTION_CHOOSE_TIME_LIMIT_OPTION")}}Promise.all(o).then(function(e){t.setState(function(){return{goButtonIsPending:false}});var r=void 0;!!e&&e.length&&!!e[0]&&e[0].formError&&(r=e[0].formError.error);var a=g.a.some(e,{isProfileFormValid:false});var n=t.props.clogger;if(a)if("email_taken"===r){var i=Be.t("That email address is being used by another account.",{fallbackHash:"b5a28911800f8de8e1dee7d81e697ee8615c0195",fallbackHashNs:"web_admin"});t.setState(function(){return{emailErrorText:i,isSpeedBumpEnabled:false}})}else t.setState(function(){return{isSpeedBumpEnabled:false}});else{t.onClose();t.props.closeModal();t.props.showToast("edit_member_profile",{isSuccessful:true});g.a.forEach(l,function(e){n.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"update",ui_element:e,ui_component:"dialog"}}})})}})}},{key:"getPreselectedItems",value:function e(){var t=this.props.channels;if(!t)return[];return t.map(function(e){return n()({},e,{label:f.a.createElement(le["a"],{channel:e}),preselected:true})})}},{key:"getResultsForChannelsQuery",value:function e(t){var r=this.props.channels;var a=r?g.a.map(r,"id"):[];if(!t){var i=this.props.unarchivedPublicAndPrivateChannels.map(function(e){return n()({},e,{label:f.a.createElement(le["a"],{channel:e}),preselected:g.a.includes(a,e.id)})});return Promise.resolve({items:i,replace_all_items:true})}return Object(pe["a"])(t,{channels:{include_archived:false},groups:true,enterprise_channels:{remote_limit:96},tiered:true}).then(function(e){var t=e.map(function(e){var t=e.model_ob;return n()({},t,{label:f.a.createElement(le["a"],{channel:t}),preselected:g.a.includes(a,e.model_ob.id)})});return{items:t,replace_all_items:true}})}},{key:"getSpeedBumpBodyText",value:function e(){var t=this.props,r=t.currentUser,a=t.target,n=t.targetUserName;var i=[];i.push(Be.rt('<p class="p-admin_member_table__speedbump_header">Change email?</p>'));a.id===r.id?i.push(Be.rt('<p class="p-admin_member_table__speedbump_p">You are about to change your email address from <strong>{currentEmail}</strong> to <strong>{newEmail}</strong>.</p>',{currentEmail:g.a.escape(a.profile.email),newEmail:g.a.escape(this.state.email)})):i.push(Be.rt('<p class="p-admin_member_table__speedbump_p">You are about to change the email address for <strong>{memberName}</strong> from <strong>{currentEmail}</strong> to <strong>{newEmail}</strong>.</p>',{memberName:n,currentEmail:g.a.escape(a.profile.email),newEmail:g.a.escape(this.state.email)}));a.id===r.id?i.push(Be.rt('<p class="p-admin_member_table__speedbump_p">A confirmation email will be sent to your new address. The change will take effect when the new address is confirmed.</p>')):Object(B["isDeleted"])(a)?i.push(Be.rt('<p class="p-admin_member_table__speedbump_p">Because this account is disabled, the change will take effect immediately.</p>')):i.push(Be.rt('<p class="p-admin_member_table__speedbump_p">A notification email will be sent to the user at both the old and new address. The change will take effect immediately.</p>'));return i}},{key:"shouldShowDialogSpeedBump",value:function e(t){return"go"===t&&this.props.target.profile.email!==this.state.email}},{key:"shouldShowChannelPickerError",value:function e(t){var r=this.props.channels;var a=g.a.filter(r,function(e){return!e||e.isUnknown||e.isNonExistent});return t.length<1&&a.length<1}},{key:"shouldDisableGoButton",value:function e(){var t=this.state,r=t.expirationTs,a=t.emailErrorText,n=t.realNameErrorText,i=t.goButtonIsPending,s=t.shouldShowChannelPickerError;var o=s||null===r||i||!!n||!!a;return o}},{key:"maybeRenderGuestChannelPicker",value:function e(){var t=this.props,r=t.target,a=t.channels,n=t.isLoadingChannels;var i=this.state.shouldShowChannelPickerError;if(!Object(B["isRestricted"])(r))return null;var s=Object(B["getMemberRealName"])(r);var o=Be.t("{possessiveTargetName} channels",{possessiveTargetName:Object(k["n"])(Object(k["c"])(s))});Object(B["isUltraRestricted"])(r)&&(o=Be.t("{possessiveTargetName} channel",{possessiveTargetName:Object(k["n"])(Object(k["c"])(s))}));var l=f.a.createElement(oe["a"],{single:Object(B["isUltraRestricted"])(r),items:this.getPreselectedItems(),dataPromise:this.getResultsForChannelsQuery,maxHeightOfList:150,onValueChange:this.onChannelPickerChange,placeholderText:Be.t("Choose a channel"),setSelected:false});var c=null;if(a){var u=g.a.filter(a,function(e){return e.isUnknown||e.isNonExistent}).length;u&&(c=Object(B["isUltraRestricted"])(r)?Be.t("Currently in {numPrivateChannels, plural, =1 {a private channel} other {# private channels}}",{numPrivateChannels:u}):Be.t("+{numPrivateChannels, plural, =1 {# other private channel} other {# other private channels}}",{numPrivateChannels:u}))}var d=y()("p-admin_member_table__edit_channels","p-admin_member_table__edit_channels--list_top",{"p-admin_member_table__edit_channels--error":i});return f.a.createElement("div",{className:d},f.a.createElement(ce["a"],{className:"p-admin_member_table__edit_profile_label",text:o}),n?Be.t("Loading channels..."):l,c?f.a.createElement("span",{className:"c-hint"},c):null,i?f.a.createElement(se["a"],{id:"guest_channel_picker_error",level:"error",type:"inline",className:"p-admin_member_table__edit_channels_error_label"},Be.t("Each guest needs to be in at least one channel.")):null)}},{key:"maybeRenderGuestExpirationField",value:function e(){var t=this.props.target;if(!Object(B["isRestricted"])(t))return null;return f.a.createElement(Ce,{currentExpirationTs:t.profile.guest_expiration_ts,onExpirationChange:this.onExpirationChange})}},{key:"renderRealNameField",value:function e(){var t=this.props.formErrors;var r=this.state,a=r.realName,n=r.realNameErrorText;var i=null;var s=t.length&&g.a.find(t,{field:"real_name"});s&&(i=Object(xe["a"])(Object(xe["c"])(s.error)));return f.a.createElement(ce["a"],{htmlFor:"input_real_name",className:"p-admin_member_table__edit_profile_label",text:Be.t("Full name"),key:"label_real_name"},f.a.createElement(Le["a"],{id:"input_real_name",name:"input_real_name",type:"text",className:"p-admin_member_table__edit_profile_input",value:a,onChange:this.onRealNameChange,maxCharacterLimit:80,errorLevel:"error",errorText:n||i,isRequired:true}))}},{key:"renderDisplayNameField",value:function e(){var t=this.props,r=t.team,a=t.formErrors;var n=this.state,i=n.displayName,s=n.displayNameErrorText;var o=!(Object(q["isSsoEnabled"])(r)&&false===r.prefs.sso_choose_username);var l=null;var c=a.length&&g.a.find(a,{field:"display_name"});c&&(l=Object(xe["a"])(Object(xe["c"])(c.error)));return f.a.createElement(ce["a"],{htmlFor:"input_display_name",className:"p-admin_member_table__edit_profile_label",text:Be.t("Display name"),key:"label_display_name",optional:true},f.a.createElement(Le["a"],{id:"input_display_name",name:"input_display_name",type:"text",className:"p-admin_member_table__edit_profile_input",value:i,isDisabled:!o,onChange:this.onDisplayNameChange,maxCharacterLimit:80,errorLevel:"error",errorText:s||l}))}},{key:"renderEmailField",value:function e(){var t=this.props,r=t.isPaid,a=t.target,n=t.formErrors,i=t.isEnterprise;var s=this.state,o=s.email,l=s.emailErrorText;var c=null;var u=!!a.email_is_editable&&(r||i);var d=n.length&&g.a.find(n,{field:"email"});d&&(c=Object(xe["a"])(Object(xe["c"])(d.error)));return f.a.createElement(ce["a"],{htmlFor:"input_email",className:"p-admin_member_table__edit_profile_label",text:Be.t("Email"),key:"label_email"},f.a.createElement(Le["a"],{id:"input_email",name:"input_email",type:"text",className:"p-admin_member_table__edit_profile_input",value:o,isDisabled:!u,onChange:this.onEmailChange,maxCharacterLimit:80,errorLevel:"error",errorText:l||c}))}},{key:"render",value:function e(){var t=this.props.target;var r=this.state,a=r.goButtonIsPending,n=r.isSpeedBumpEnabled;return f.a.createElement(ee["a"],{title:Be.t("About {targetName}",{targetName:Object(k["n"])(Object(B["getMemberRealName"])(t))}),goButtonText:Be.t("Save"),onGo:this.onSubmit,onClose:this.onClose,goButtonIsPending:a,goButtonIsDisabled:this.shouldDisableGoButton(),overlayClassName:"p-admin_member_table__dialog_overlay",modalBodyOpenClassName:"p-admin_member_table_dialog__ReactModal__Body--open",shouldCloseOnGo:false,getShouldShowSpeedBump:this.shouldShowDialogSpeedBump,speedBumpCancelButtonText:Be.t("Cancel"),speedBumpContinueButtonText:Be.t("Save Changes"),speedBumpContinueButtonType:"primary",speedBumpBodyText:this.getSpeedBumpBodyText(),isSpeedBumpEnabled:n},f.a.createElement("p",null,Be.t("Joined on {date}.",{date:Object(fe["a"])(t.created,"{date}")})),this.renderRealNameField(),this.renderDisplayNameField(),this.renderEmailField(),this.maybeRenderGuestChannelPicker(),this.maybeRenderGuestExpirationField())}}]);return t}(h["PureComponent"]);Ge.displayName="EditMemberInfoDialog";Ge.defaultProps=qe;var He=function e(t,r){var a=r.target,n=r.team;return{isPaid:Object(q["isPaidTeam"])(n),isEnterprise:Object(S["pageNeedsEnterprise"])(t),isLoadingChannels:Object(re["getIsLoadingChannels"])(t),currentUser:Object(x["b"])(t),channels:Object(re["getChannelsById"])(t,a.id),unarchivedPublicAndPrivateChannels:Object(ie["getUnarchivedPublicAndPrivateChannels"])(t),formErrors:Object(re["getMemberInfoFormErrors"])(t),targetUserName:Object(B["getPrefCompliantMemberName"])(t,a,true,true),clogger:Object(P["a"])({state:t})}};var We={loadChannels:re["loadChannels"],editMemberProfile:re["editMemberProfile"],editGuestExpiration:re["editGuestExpiration"],addAndRemoveGuestChannels:re["addAndRemoveGuestChannels"],clearMemberInfoFormErrors:re["clearMemberInfoFormErrors"],closeModal:F["closeModal"],editSingleChannelGuestChannel:re["editSingleChannelGuestChannel"]};var Ve=Object(v["connect"])(He,We)(Ge);var ze=r(463);var Qe=new k["b"]("admin");var Ke={target:m["b"].object.isRequired,showToast:m["b"].func,submitDeactivateMember:m["b"].func,closeModal:m["b"].func,isEnterprise:m["b"].bool,clogger:m["b"].object.isRequired};var Ye={target:{},showToast:b["noop"],submitDeactivateMember:b["noop"],closeModal:b["noop"],isEnterprise:false};var Je=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={goButtonIsPending:false};r.onGo=r.onGo.bind(r);return r}l()(t,[{key:"onGo",value:function e(){var t=this;var r=this.props,a=r.target,n=r.showToast,i=r.isEnterprise,s=r.clogger;this.setState(function(){return{goButtonIsPending:true}});var o=i?"remove":"deactivate";this.props.submitDeactivateMember({target:a}).then(function(){t.setState(function(){return{goButtonIsPending:false}});n(o);t.props.closeModal();s.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"update",ui_element:"ADMIN_ACTION_DEACTIVATE",ui_component:"dialog"}}})}).catch(function(){n(o,{isSuccessful:false})})}},{key:"render",value:function e(){var t=this.props,r=t.target,a=t.isEnterprise;var n=this.state.goButtonIsPending;var i=Object(k["n"])(Object(B["getMemberRealName"])(r));var s=null;var o=null;var l=void 0;if(a){o=Qe.t("Remove {targetName}?",{targetName:i});l=f.a.createElement("div",null,Qe.t("Removing a member will not remove their messages or files. Depending on the access settings for this workspace, this member may be able to rejoin or be invited to this join this workspace again at any time."))}else{o=Qe.t("Deactivate {targetName}?",{targetName:i});r.app_count>0&&(s=f.a.createElement("li",null,Qe.t("Apps or integrations set up by the member will be disabled.")));l=f.a.createElement("div",null,f.a.createElement("p",null,Qe.t("What happens when an account is deactivated?")),f.a.createElement("ul",null,f.a.createElement("li",null,Qe.t("The member will no longer be able to sign in to the workspace.")),s,f.a.createElement("li",null,Qe.t("The member's messages and files will still be accessible in Slack."))))}return f.a.createElement(ee["a"],{title:o,goButtonText:a?Qe.t("Remove"):Qe.t("Deactivate"),goButtonType:"danger",goButtonIsPending:n,goButtonIsDisabled:n,shouldCloseOnGo:false,onGo:this.onGo,truncateTitle:false,overlayClassName:"p-admin_member_table__dialog_overlay"},l)}}]);return t}(h["PureComponent"]);Je.displayName="DeactivateMemberDialog";Je.defaultProps=Ye;var Ze=function e(t){return{isEnterprise:Object(S["pageNeedsEnterprise"])(t),clogger:Object(P["a"])({state:t})}};var Xe={submitDeactivateMember:ze["n"],closeModal:F["closeModal"]};var $e=Object(v["connect"])(Ze,Xe)(Je);var et=r(170);var tt=r(473);var rt=r(1002);var at=new k["b"]("admin");var nt={target:m["b"].object.isRequired,enterprise:m["b"].object.isRequired,enterpriseURL:m["b"].string};var it={target:{},enterprise:{},enterpriseURL:""};var st=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){var t=this.props,r=t.target,a=t.enterprise,n=t.enterpriseURL;var i=Object(k["n"])(Object(k["c"])(Object(B["getMemberRealName"])(r)));var s=Object(rt["b"])(a);return f.a.createElement(ee["a"],{title:at.t("This account can\u2019t be reactivated here"),goButtonText:at.t("Okay"),showCancelButton:false},f.a.createElement("p",null,at.rt("To reactivate {possessiveTargetName} account for <strong>{enterpriseName}</strong> you\u2019ll need to do so from the <a>Admin Dashboard</a>.",{possessiveTargetName:i,enterpriseName:s},function(e){var t=e.tag,r=e.text,a=e.key;if("a"!==t)return null;return f.a.createElement("a",{key:a,href:n+"/manage",target:"_blank",rel:"noopener noreferrer",className:"no_underline","data-clog-event":"ADMIN_SITE_MANAGE_MEMBERS_ACTION","data-clog-ui-element":"LINK_ENTERPRISE","data-clog-ui-action":"click","data-clog-ui-step":"ADMIN_HOME","data-clog-ui-component":"dialog"},r)})))}}]);return t}(h["PureComponent"]);st.displayName="ActivateOrgMemberDialog";st.defaultProps=it;var ot=function e(t){return{enterprise:Object(et["getEnterprise"])(t),enterpriseURL:Object(tt["a"])(t,Object(rt["a"])(Object(et["getEnterprise"])(t)))}};var lt=Object(v["connect"])(ot)(st);var ct=new k["b"]("member_actions");var ut={team:m["b"].object.isRequired,actor:m["b"].object.isRequired,target:m["b"].object.isRequired,onClick:m["b"].func,onClose:m["b"].func,actions:m["b"].array,openModal:m["b"].func,makeAdmin:m["b"].func,makeRegular:m["b"].func,updateOwnerStatus:m["b"].func,disableTwoFactorAuth:m["b"].func,sendSsoBindEmailToMember:m["b"].func,enqueueToast:m["b"].func,clogger:m["b"].object.isRequired,isEnterprise:m["b"].bool.isRequired};var dt={team:{},actor:{},target:{},onClick:g.a.noop,onClose:g.a.noop,actions:[],openModal:g.a.noop,makeAdmin:g.a.noop,isEnterprise:false,makeRegular:g.a.noop,updateOwnerStatus:g.a.noop,disableTwoFactorAuth:g.a.noop,sendSsoBindEmailToMember:g.a.noop,enqueueToast:g.a.noop};var pt="MENU_SEPARATOR";var mt=["activate","activate_as_guest","cant_reactivate_as_guest",pt,"edit_member_profile","disable_2fa","send_sso",pt,"transfer_ownership","promote_to_owner","demote_owner","promote_to_admin","demote_admin","convert_to_guest","promote_to_member","promote_to_mc_guest","demote_to_sc_guest","cant_convert_member_role",pt,"cant_convert_or_deactivate","deactivate"];var ht=["cant_deactivate","cant_convert_member_role","cant_reactivate_as_guest","cant_convert_or_deactivate"];var ft={activate:"ADMIN_ACTION_ACTIVATE_MEMBER",activate_as_guest:"ADMIN_ACTION_ACTIVATE_AS_GUEST",deactivate:"ADMIN_ACTION_DEACTIVATE",promote_to_admin:"ADMIN_ACTION_PROMOTE_MEMBER_TO_ADMIN",demote_admin:"ADMIN_ACTION_DEMOTE_ADMIN_TO_MEMBER",promote_to_member:"ADMIN_ACTION_PROMOTE_GUEST_TO_MEMBER",demote_owner:"ADMIN_ACTION_DEMOTE_OWNER_TO_ADMIN",promote_to_owner:"ADMIN_ACTION_PROMOTE_ADMIN_TO_OWNER",convert_to_guest:"ADMIN_ACTION_DEMOTE_MEMBER_TO_GUEST",promote_to_mc_guest:"ADMIN_ACTION_PROMOTE_URA_TO_RA",demote_to_sc_guest:"ADMIN_ACTION_DEMOTE_RA_TO_URA",disable_2fa:"ADMIN_ACTION_DISABLE_2FA",send_sso:"ADMIN_ACTION_SEND_SSO_EMAIL",edit_member_profile:"ADMIN_ACTION_EDIT_MEMBER_PROFILE",transfer_ownership:"ADMIN_ACTION_TRANSFER_OWNERSHIP"};var vt=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));g.a.bindAll(r,["clogAdminAction","renderActionMenu","renderMenuItem","showDialog","showToast"]);return r}l()(t,[{key:"onMenuItemSelect",value:function e(t){var r=this.props,a=r.target,n=r.isEnterprise;this.clogAdminAction("click",t,"menu");switch(t){case"activate":if(n&&Object(B["isOrgDeleted"])(a))return this.showDialog(t);return this.dispatchMemberActionAndShowToast(this.props.makeRegular,t);case"activate_as_guest":return this.showDialog(t);case"deactivate":return this.showDialog(t);case"promote_to_admin":return this.dispatchMemberActionAndShowToast(this.props.makeAdmin,t);case"demote_admin":case"promote_to_member":return this.dispatchMemberActionAndShowToast(this.props.makeRegular,t);case"demote_owner":case"promote_to_owner":return this.dispatchMemberActionAndShowToast(this.props.updateOwnerStatus,t);case"convert_to_guest":return this.showDialog(t);case"promote_to_mc_guest":return this.showDialog(t);case"demote_to_sc_guest":return this.showDialog(t);case"disable_2fa":return this.showDialog(t);case"send_sso":return this.dispatchMemberActionAndShowToast(this.props.sendSsoBindEmailToMember,t);case"edit_member_profile":return this.showDialog(t);default:return null}}},{key:"clogAdminAction",value:function e(t,r,a){var n=this.props.clogger;n.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:t,ui_element:ft[r],ui_component:a}}})}},{key:"dispatchMemberActionAndShowToast",value:function e(t,r){var a=this;var n=this.props.target;t({memberId:n.id,action:r}).then(function(){a.showToast(r);var e="disable_2fa"===r?"dialog":"menu";a.clogAdminAction("update",r,e)}).catch(function(e){a.showToast(r,{isSuccessful:false});throw e})}},{key:"showDialog",value:function e(t){switch(t){case"deactivate":this.props.openModal({element:this.renderDeactivateDialog()});break;case"activate":this.props.openModal({element:this.renderOrgActivateDialog()});break;case"activate_as_guest":this.props.openModal({element:this.renderChangeToGuestDialog(t)});break;case"convert_to_guest":this.props.openModal({element:this.renderChangeToGuestDialog(t)});break;case"promote_to_mc_guest":this.props.openModal({element:this.renderChangeToGuestDialog(t)});break;case"demote_to_sc_guest":this.props.openModal({element:this.renderChangeToGuestDialog(t)});break;case"edit_member_profile":this.props.openModal({element:this.renderEditMemberInfoDialog()});break;case"disable_2fa":this.props.openModal({element:this.renderDisable2faDialog()});break;default:break}}},{key:"showToast",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isSuccessful:true};var a=r.isSuccessful;var n=this.props.target;var i=Object(k["n"])(Object(B["getMemberRealName"])(n));var s=Object(k["n"])(Object(k["c"])(Object(B["getMemberRealName"])(n)));var o="";switch(t){case"activate":o=a?ct.t("Reactivated {possessiveTargetName} account",{possessiveTargetName:s}):ct.t("Couldn\u2019t reactivate {possessiveTargetName} account",{possessiveTargetName:s});break;case"deactivate":o=a?ct.t("Deactivated {possessiveTargetName} account",{possessiveTargetName:s}):ct.t("Couldn\u2019t deactivate {possessiveTargetName} account",{possessiveTargetName:s});break;case"remove":o=a?ct.t("Removed {possessiveTargetName} account",{possessiveTargetName:s}):ct.t("Couldn\u2019t remove {possessiveTargetName} account",{possessiveTargetName:s});break;case"promote_to_admin":case"demote_owner":o=a?ct.t("{targetName} is now an admin",{targetName:i}):ct.t("Couldn\u2019t make {targetName} an admin",{targetName:i});break;case"demote_admin":case"promote_to_member":o=a?ct.t("{targetName} is now a member",{targetName:i}):ct.t("Couldn\u2019t make {targetName} a member",{targetName:i});break;case"promote_to_owner":o=a?ct.t("{targetName} is now an owner",{targetName:i}):ct.t("Couldn\u2019t make {targetName} an owner",{targetName:i});break;case"promote_to_mc_guest":case"demote_to_mc_guest":o=a?ct.t("{targetName} is now a Multi-Channel Guest",{targetName:i}):ct.t("Couldn\u2019t make {targetName} a Multi-Channel Guest",{targetName:i});break;case"demote_to_sc_guest":o=a?ct.t("{targetName} is now a Single-Channel Guest",{targetName:i}):ct.t("Couldn\u2019t make {targetName} a Single-Channel Guest",{targetName:i});break;case"disable_2fa":o=a?ct.t("Disabled two-factor authentication for {targetName}",{targetName:i}):ct.t("Couldn\u2019t disable two-factor authentication for {targetName}",{targetName:i});break;case"send_sso":o=a?ct.t("Sent an SSO email to {targetName}",{targetName:i}):ct.t("Couldn\u2019t send SSO email to {targetName}",{targetName:i});break;case"edit_member_profile":o=a?ct.t("Updated {possessiveTargetName} profile",{possessiveTargetName:s}):ct.t("Couldn\u2019t update {possessiveTargetName} profile",{possessiveTargetName:s});break;default:break}return this.props.enqueueToast({element:f.a.createElement(te["b"],{position:"bottom-right",toastClasses:"p-admin_member_table__toast",shouldAutoFade:a},a?f.a.createElement(E["b"],{type:"check-circle-o-large",className:"sk_seafoam_green margin_right_50",inline:true}):f.a.createElement(E["b"],{type:"warning-filled",className:"sk_warning_red margin_right_75",inline:true}),f.a.createElement("span",null,o))})}},{key:"renderDeactivateDialog",value:function e(){return f.a.createElement($e,{target:this.props.target,showToast:this.showToast})}},{key:"renderOrgActivateDialog",value:function e(){return f.a.createElement(lt,{target:this.props.target})}},{key:"renderChangeToGuestDialog",value:function e(t){return f.a.createElement(Pe,{action:t,target:this.props.target,showToast:this.showToast})}},{key:"renderDisable2faDialog",value:function e(){var t=this;var r=this.props.target;var a=function e(){t.dispatchMemberActionAndShowToast(t.props.disableTwoFactorAuth,"disable_2fa")};return f.a.createElement(ee["a"],{title:ct.t("Disable two-factor authentication?"),goButtonText:ct.t("Disable 2FA"),onGo:a,truncateTitle:false,overlayClassName:"p-admin_member_table__dialog_overlay"},f.a.createElement("p",null,ct.rt("<b>{targetName}</b> will no longer need access to their phone to sign in to Slack. Note that admins can\u2019t re-enable 2FA for any members other than themselves.",{targetName:Object(k["n"])(Object(B["getMemberRealName"])(r))})))}},{key:"renderEditMemberInfoDialog",value:function e(){var t=this.props,r=t.target,a=t.team;return f.a.createElement(Ve,{target:r,team:a,showToast:this.showToast})}},{key:"renderDisabledMenuButton",value:function e(){var t=this.props,r=t.actor,a=t.target;var n=void 0;n=!Object(B["isOwner"])(r)&&Object(B["isAdmin"])(a)?ct.t("You\u2019ll need to ask a Workspace Owner to edit this account."):ct.t("There aren\u2019t any actions for you to take on {targetName}",{targetName:Object(B["getMemberRealName"])(a)});return f.a.createElement(V["d"],{tip:n},f.a.createElement($["c"],{className:"p-admin_member_table__menu_button p-admin_member_table__menu_button--disabled",disabled:true},f.a.createElement(E["b"],{type:"ellipsis"})))}},{key:"renderMenuItem",value:function e(t,r){var a=this;if(t===pt)return f.a.createElement(X["d"],{key:"separator_"+r});var n=this.props,i=n.team,s=n.target;var o="transfer_ownership"===t?"/admin/transfer":null;var l="deactivate"===t;var c=g.a.includes(ht,t);var u=y()("no_underline",{"p-admin_member_table__menu_item--disabled":c});var d=f.a.createElement(Z,{action:t,team:i,target:s});return f.a.createElement(X["b"],{key:s.id,label:d,onSelected:function e(){return a.onMenuItemSelect(t)},href:o,className:u,danger:l,disabled:c,"data-qa":t})}},{key:"renderActionMenu",value:function e(t){var r=this;var a=[];g.a.map(mt,function(e){g.a.includes(r.props.actions,e)&&a.push(e);e===pt&&g.a.last(a)!==pt&&a.push(e)});a=g.a.chain(a).dropWhile(function(e){return e===pt}).dropRightWhile(function(e){return e===pt}).value();return f.a.createElement(X["f"],n()({},t,{width:"auto"}),g.a.map(a,this.renderMenuItem))}},{key:"render",value:function e(){var t=this.props,r=t.target,a=t.actions,n=t.onClick,i=t.onClose;if(0===a.length||0===g.a.difference(a,ht).length)return this.renderDisabledMenuButton();return f.a.createElement("div",null,f.a.createElement(X["e"],{renderMenu:this.renderActionMenu,position:"bottom-right",offsetX:20,onClick:n,onClose:i},f.a.createElement($["c"],{className:"p-admin_member_table__menu_button","aria-label":ct.t("Actions for {targetName}",{targetName:Object(k["n"])(Object(B["getMemberRealName"])(r))})},f.a.createElement(E["b"],{type:"ellipsis"}))))}}]);return t}(h["PureComponent"]);vt.displayName="AdminMemberTableRowMenu";vt.defaultProps=dt;var bt=function e(t,r){var a=r.target;return{isEnterprise:Object(S["pageNeedsEnterprise"])(t),team:Object(D["getCurrentTeam"])(t),actor:Object(x["b"])(t),actions:Object(re["getActionsForMember"])(t,a),clogger:Object(P["a"])({state:t})}};var gt={openModal:F["openModal"],makeAdmin:re["makeAdmin"],makeRegular:re["makeRegular"],updateOwnerStatus:re["updateOwnerStatus"],disableTwoFactorAuth:re["disableTwoFactorAuth"],sendSsoBindEmailToMember:re["sendSsoBindEmailToMember"],enqueueToast:L["enqueueToast"]};var _t=Object(v["connect"])(bt,gt,null,{withRef:true})(vt);var yt=r(26);var kt=r(1741);var Ot=new k["b"]("admin");var Et={currentUser:m["b"].object.isRequired,members:m["b"].array.isRequired,team:m["b"].object,sortBy:m["b"].string,sortDir:m["b"].string,filter:m["b"].object,filterCount:m["b"].number,isFiltered:m["b"].bool,isEnterprise:m["b"].bool,headerItemOnClick:m["b"].func,sortMembers:m["b"].func,fetchNewPage:m["b"].func,resetMemberFilters:m["b"].func,numTotalResults:m["b"].number,searchQuery:m["b"].string,clogger:m["b"].object.isRequired,isLoadingNewPage:m["b"].bool,isLoadingNewQuery:m["b"].bool};var wt={currentUser:{},members:[],team:{},sortBy:"real_name",sortDir:"asc",filter:{},filterCount:0,isFiltered:true,isEnterprise:false,headerItemOnClick:b["noop"],sortMembers:b["noop"],fetchNewPage:b["noop"],resetMemberFilters:b["noop"],numTotalResults:null,isLoadingNewPage:false,isLoadingNewQuery:false,searchQuery:""};var Ct="asc";var St="desc";var jt="arrow-down-medium";var It="arrow-up-medium";var Tt={};Tt[Ct]=jt;Tt[St]=It;var Nt=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={rowListItems:[],height:null,offset:null,activeRowId:null};r.tableViewControllerRef=null;Object(b["bindAll"])(r,["onClickAllFiltersBtn","headerItemOnClick","refreshTableHeight","refreshTableHeightPolitely","onRequestNextPage","makeRow","menuTriggerOnClick","menuOnClose","shouldShowFilterWarningRow"]);var a=r.props.isEnterprise;r.headerData=[{id:"real_name",value:Ot.t("Name"),sortable:true,className:"p-admin_member_table__header--name"},{id:"accountType",value:Ot.t("Account type"),sortable:false,className:"p-admin_member_table__header--account_type"},{id:"billingStatus",value:a?Ot.t("Account status"):Ot.t("Billing status"),sortable:false,className:"p-admin_member_table__header--status"},{id:"authentication",value:Ot.t("Authentication"),sortable:false,className:"p-admin_member_table__header--authentication"},{id:"actions",value:null,sortable:false,className:"p-admin_member_table__header--actions",noHover:true}];r.menuRefs={};r.rowCounter=0;var n=r.headerData.length;r.setMenuRef=function(e){var t=r.rowCounter*n;var a=t+n;var i="row_"+r.rowCounter+"_item"+a;r.rowCounter+=1;r.menuRefs[i]=e?e.getWrappedInstance():null};return r}l()(t,[{key:"componentWillMount",value:function e(){var t=this.props.members;t.length&&this.makeRows()}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function e(t,r){this.maybeMakeNewRows(t,r)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely);this.menuRefCounter=0}},{key:"onRequestNextPage",value:function e(t){var r=this.props,a=r.members,n=r.numTotalResults;if(n&&a.length>=n)return;this.props.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"onClickAllFiltersBtn",value:function e(){var t=this.props.clogger;this.props.resetMemberFilters({deactivated:true,orgDeactivated:this.props.isEnterprise});window.scrollTo(0,0);t.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"click",ui_element:"ADMIN_BTN_RESET_FILTERS",ui_component:"table"}}})}},{key:"sortableHeaderItemOnClick",value:function e(t){var r=this.props,a=r.sortBy,n=r.sortDir;var i=a;var s=n;if(t.id===a)s=n&&n!==Ct?Ct:St;else{i=t.id;s=Ct}this.props.sortMembers({sortBy:i,sortDir:s})}},{key:"headerItemOnClick",value:function e(t){var r=this.props.clogger;if(t.sortable){this.sortableHeaderItemOnClick(t);r.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{sort_by:t.id,contexts:{ui_context:{step:"admin_home",action:"click",ui_element:"admin_sort_by"}}})}return this.props.headerItemOnClick()}},{key:"menuTriggerOnClick",value:function e(t){this.setState(function(){return{activeRowId:t}});var r=this.props.clogger;r.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"click",ui_element:"admin_btn_row_menu"}}})}},{key:"menuOnClose",value:function e(){this.setState(function(){return{activeRowId:null}})}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var r=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var a=r.getBoundingClientRect();var n=0;var i=t-(a&&a.top);var s=64;var o=Math.max(s,i-n);var l={height:o+"px"};this.setState(l)}},{key:"makeHeaders",value:function e(t){var r=this;var a=[];t.forEach(function(e){a.push(r.makeHeader(e))});return a}},{key:"makeHeader",value:function e(t){var r=this.props.sortBy;var a=n()({},t,{onClick:this.headerItemOnClick});t.sortable&&(a.iconType=this.determineSortIcon(t.id,t));r===t.id&&(a.className=y()(a.className,"p-admin_member_table__row_header--active"));return a}},{key:"makeRowTemplate",value:function e(){var t=this;var r=this.props.currentUser;return{items:[{value:function e(t){var a=Object(B["getMemberRealName"])(t);var n=Object(B["getMemberProfileFieldDisplayName"])(t);var i=t.profile.email;var s=y()("p-admin_member_table__row__real_name",{normal:!!t.deleted});var o=y()("p-admin_member_table__row__display_name",{hidden:!n});var l=t.id===r.id;return f.a.createElement("div",{className:"p-admin_member_table__row__name"},f.a.createElement(w["b"],{size:36,userId:t.id,teamId:t.team_id,className:"p-admin_member_table__row__avatar",showBadge:false,isInteractive:false}),f.a.createElement("div",{className:"display_flex flex_direction_column overflow_ellipsis"},f.a.createElement("div",{className:s},a,l?Ot.t(" (you)"):null),f.a.createElement("div",{className:"p-admin_member_table__row__display_name_and_email"},f.a.createElement("div",{className:o},f.a.createElement("span",null,n),f.a.createElement("span",{className:"p-admin_member_table__row__name_divider"})),f.a.createElement("div",{className:"p-admin_member_table__row__email"},i))))},className:"p-admin_member_table_row_item--name"},{value:function e(t){var r=null;if(Object(B["isRestricted"])(t)&&!Object(B["isDeleted"])(t)&&t.profile.guest_expiration_ts){var a=Object(O["a"])(t.profile.guest_expiration_ts,{omitTime:true,dateFormat:"MMM D, YYYY"});r=f.a.createElement("span",{className:"p_admin_member_table__guest_expiration"},Ot.t("Deactivate on {date}",{date:a}))}return f.a.createElement(f.a.Fragment,null,f.a.createElement(R,{member:t}),r)},className:"p-admin_member_table_row_item--account_type"},{value:function e(r){var a=void 0;var n=t.props.isEnterprise;var i=Object(B["isOrgDeleted"])(r);a=n&&r.deleted&&!i?Ot.t("Removed"):n&&r.deleted&&i?Ot.t("Deactivated"):r.deleted?Ot.t("Deactivated"):r.is_pending?Ot.t("Invited"):!n&&r.is_inactive?Ot.t("Inactive"):n?Ot.t("Enabled"):Ot.t("Active");return f.a.createElement("div",null,a)},className:"p-admin_member_table_row_item--status"},{value:function e(t){var r=void 0;r=t.deleted?"minus":t.has_sso_token&&t.two_factor_auth_enabled?Ot.t("SSO + 2FA"):t.has_sso_token?Ot.t("SSO"):t.two_factor_auth_enabled?Ot.t("2FA"):Ot.t("Default");var a=y()({hidden:"minus"===r});var n=y()({hidden:"minus"!==r});return f.a.createElement("div",null,f.a.createElement("div",{className:a},r),f.a.createElement(E["b"],{type:r,className:n}))},className:"p-admin_member_table_row_item--authentication"},{value:function e(r,a){return f.a.createElement(_t,{ref:t.setMenuRef,target:r,team:t.props.team,onClick:function e(){return t.menuTriggerOnClick(a)},onClose:t.menuOnClose})},className:"p-admin_member_table_row_item--actions"}]}}},{key:"determineSortIcon",value:function e(t){var r=this.props,a=r.sortBy,n=r.sortDir;if(t!==a)return;var i=n===Ct?jt:It;return i}},{key:"makeFilterWarningRowTemplate",value:function e(){var t=this;return{items:[{value:function e(){var r=Ot.rt("<b>Didn\u2019t find what you\u2019re looking for?</b> Some members may be hidden because of the filters you\u2019ve selected.");return f.a.createElement("div",{className:"p-admin_member_table__filter_row__item"},f.a.createElement("div",{className:"p-admin_member_table__filter_row__avatar"},f.a.createElement(E["b"],{type:"user_groups",className:"p-admin_member_table__filter_row__avatar_icon"})),f.a.createElement("p",{className:"no_margin"},r,f.a.createElement(C["a"],{onClick:t.onClickAllFiltersBtn,className:"p-admin_member_table__filter_row__btn"},Ot.t("Show all members",{fallbackHash:"354b26f6624a4b4b332fb0bcc9fc6f12e7536d81"}))))},className:"p-admin_member_table__filter_row"}]}}},{key:"makeNoSearchResultsRowTemplate",value:function e(){var t=this;return{items:[{value:function e(){return f.a.createElement("div",null,Ot.rt("No results matching <b>{searchQuery}</b>.",{searchQuery:t.props.searchQuery}))},className:"p-admin_member_table__search_row"}]}}},{key:"makeRow",value:function e(t,r,a){var n=y()({"p-admin_member_table__row--deactivated":t.deleted,"p-admin_member_table__row--active":this.state.activeRowId===a});var i={id:"row_"+a,items:[],className:n};if(!r||!r.items)return[];r.items.forEach(function(e,r){var n={value:e.value(t),id:"row_"+a+"_item"+r};if(e.className){n.className=e.className;"p-admin_member_table_row_item--actions"===e.className&&(n.value=e.value(t,a))}i.items.push(n)});return i}},{key:"makeRows",value:function e(t){var r=this;var a=[];var n=t||0;var i=this.props.members;var s={rowListItems:a};i&&i.length&&i.forEach(function(e){a.push(r.makeRow(e,r.makeRowTemplate(),n));n+=1});if(this.shouldShowFilterWarningRow()){a.push(this.makeRow({},this.makeFilterWarningRowTemplate(),n));n+=1}if(this.shouldShowNoSearchResultsRow()){a.push(this.makeRow({},this.makeNoSearchResultsRowTemplate(),n));n+=1}this.setState(s)}},{key:"maybeMakeNewRows",value:function e(t,r){var a=this.props.members;var n=this.state,i=n.offset,s=n.activeRowId;r.activeRowId!==s&&this.makeRows();t.members!==a&&this.makeRows(i)}},{key:"shouldShowFilterWarningRow",value:function e(){var t=this.props,r=t.filter,a=t.filterCount,n=t.isFiltered,i=t.isEnterprise,s=t.isLoadingNewQuery;if(s)return false;if(!n)return true;if(i&&2===a&&r.billingStatus.deactivated&&r.billingStatus.orgDeactivated)return false;if(!i&&1===a&&r.billingStatus.deactivated)return false;return true}},{key:"shouldShowNoSearchResultsRow",value:function e(){var t=this.props,r=t.filter,a=t.filterCount,n=t.isEnterprise,i=t.numTotalResults,s=t.isLoadingNewQuery;if(n)return 2===a&&r.billingStatus.deactivated&&r.billingStatus.orgDeactivated&&!i&&!s;return 1===a&&r.billingStatus.deactivated&&!i&&!s}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.isLoadingNewPage,n=r.isLoadingNewQuery;var i=this.state,s=i.height,o=i.rowListItems,l=i.offset;var c=!l||n;var u=a||n;return f.a.createElement("div",{className:"p-admin_member_table","data-qa":"admin_member_table"},f.a.createElement(M["a"],{headers:this.makeHeaders(this.headerData),headerItemOnClick:this.headerItemOnClick,rows:o,height:s,onRequestNextPage:this.onRequestNextPage,newQuery:c,isLoading:u,ref:function e(r){t.tableViewControllerRef=r},rowClassName:"p-admin_member_table__row",rowHeaderItemClassName:"p-admin_member_table__row_header",useKeyboardNavigableTable:true}))}}]);return t}(h["PureComponent"]);Nt.displayName="AdminMemberTable";Nt.defaultProps=wt;function At(e){return{currentUser:Object(yt["getCurrentMember"])(e),sortDir:Object(re["getSortDirection"])(e),sortBy:Object(re["getSortBy"])(e),members:Object(re["getMembers"])(e),filter:Object(re["getFilter"])(e),filterCount:Object(re["getFilterCount"])(e),isFiltered:Object(re["getIsFiltered"])(e),isEnterprise:Object(S["pageNeedsEnterprise"])(e),numTotalResults:Object(re["getNumTotalResults"])(e),isLoadingNewPage:Object(re["getIsLoadingNewPage"])(e),isLoadingNewQuery:Object(re["getIsLoadingNewQuery"])(e),searchQuery:Object(re["getSearchQuery"])(e),clogger:Object(P["a"])({state:e})}}var Rt=function e(t){return{sortMembers:function e(r){return t(Object(re["sortMembers"])(r))},fetchNewPage:function e(){return t(Object(re["fetchNewPage"])())},resetMemberFilters:function e(r){return t(Object(re["resetMemberFilters"])(r))}}};var Mt=t["a"]=Object(v["connect"])(At,Rt)(Nt)},function(e,t,r){"use strict";var a=r(14);var n=r(142);var i=r(1125);var s=r(3);var o=r.n(s);var l=r(5);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var m=r.n(p);var h=r(8);var f=r.n(h);var v=r(1);var b=r.n(v);var g=r(15);var _=r.n(g);var y=r(129);var k=r(2);var O=r(10);var E=r(452);var w=r(159);var C=r(118);var S=r(20);var j=r(1126);var I=new O["b"]("pricing_calculator");var T={planIsYearly:y["b"].bool.isRequired,planCostPerTerm:y["b"].number.isRequired,planCurrency:y["b"].string.isRequired,teamName:y["b"].string,numInactiveMembers:y["b"].number.isRequired,isZeroActiveMembers:y["b"].bool.isRequired,totalMembers:y["b"].number.isRequired,paidSeats:y["b"].number.isRequired,totalCost:y["b"].number.isRequired,totalCostWithTax:y["b"].number.isRequired,totalRecurringTax:y["b"].number.isRequired,tax:y["b"].shape({value:y["b"].number,type:y["b"].string}),showCurrencyLabel:y["b"].bool,featureCheckoutFlowTranslations:y["b"].bool};var N={tax:null,teamName:"",showCurrencyLabel:false,featureCheckoutFlowTranslations:false};var A=function(e){f()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderRow",value:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=_()("p-pricing_calculator__table_row","p-pricing_calculator__table_row--"+a.type);return b.a.createElement("div",{className:n},b.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--key","data-qa":"pricing_calculator_table_item_"+a.type+"_key"},t),b.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--value","data-qa":"pricing_calculator_table_item_"+a.type+"_value"},r))}},{key:"renderSubtotalRow",value:function e(){var t=this.props,r=t.planIsYearly,a=t.planCostPerTerm,n=t.paidSeats,i=t.numInactiveMembers,s=t.isZeroActiveMembers,o=t.totalMembers,l=t.totalCost,c=t.teamName,u=t.planCurrency,d=t.featureCheckoutFlowTranslations;var p=void 0;s?p=I.rt("Your team hasn\u2019t been especially active on Slack lately. We\u2019ll only charge you for one member today, but as your team becomes active that could change. <a>Learn about billing</a>",null,function(e){var t=e.text,r=e.key;return b.a.createElement("a",{key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)}):i&&(p=I.rt("{teamName} has {totalMembers, plural, =1 {# member} other {# members}}, but {numInactiveMembers, plural, =1 {# isn\u2019t} other {# aren\u2019t}} actively using Slack. We won\u2019t charge you for {numInactiveMembers, plural, =1 {them} other {them}}, as part of our <a>Fair Billing policy</a>.",{teamName:c,totalMembers:o,numInactiveMembers:i,fallbackHash:"dbc00b53e0783bd19d07fb7811c83b75647ee285"},function(e){var t=e.text,r=e.key;return b.a.createElement("a",{key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)}));var m=b.a.createElement("div",null,b.a.createElement(j["a"],{planIsYearly:r,billedMembers:n,numInactiveMembers:i,formattedPlanCost:Object(E["a"])(a,u),featureCheckoutFlowTranslations:d}),p&&b.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},p));var h=Object(E["a"])(l,u);return this.renderRow(m,h,{type:"subtotal"})}},{key:"renderTaxRow",value:function e(){var t=this.props,r=t.tax,a=t.totalRecurringTax,n=t.planCurrency;var i=void 0;var s=void 0;if(r){switch(r.type){case"vat":i=I.t("Estimated VAT",{fallbackHash:"dbbd5280272ac77ded46312841ade3c45ec237e7"});break;case"sales_tax":i=I.t("Estimated sales tax");break;default:i=I.t("Estimated tax");break}s=Object(E["a"])(a,n)}else{i=I.t("Tax");s=I.t("Applied at checkout")}return this.renderRow(i,s,{type:"tax"})}},{key:"renderTotalRow",value:function e(){var t=this.props,r=t.planCurrency,a=t.totalCostWithTax,n=t.planIsYearly,i=t.showCurrencyLabel;var s=void 0;var o=void 0;if(n){s=I.t("Yearly payment");o=I.rt("Your yearly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var t=e.text,r=e.key;return b.a.createElement("a",{key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)})}else{s=I.t("Monthly payment");o=I.rt("Your monthly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var t=e.text,r=e.key;return b.a.createElement("a",{key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)})}var l=b.a.createElement("div",null,s,b.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},o));var c=""+Object(E["a"])(a,r);i&&(c=c+" "+r);return this.renderRow(l,c,{type:"total"})}},{key:"render",value:function e(){return b.a.createElement("div",{className:"p-pricing_calculator__table"},this.renderSubtotalRow(),this.renderTaxRow(),this.renderTotalRow())}}]);return t}(v["PureComponent"]);A.displayName="PricingCalculatorTable";A.defaultProps=N;var R=A;var M=Object(w["a"])("feature_checkout_flow_translations")(A);var P=r(2029);var x=new O["b"]("pricing_calculator");var D={isUserRestricted:y["b"].bool,title:y["b"].string,showHeader:y["b"].bool,headerBackgroundColor:y["b"].string,yearlyPlanCostPerTerm:y["b"].number,monthlyPlanCostPerTerm:y["b"].number,planLevel:y["b"].string.isRequired,planIsYearly:y["b"].bool,numMonthsPerPlan:y["b"].number,planCostPerTerm:y["b"].number,planCurrency:y["b"].string,numInactiveMembers:y["b"].number,isZeroActiveMembers:y["b"].bool,totalMembers:y["b"].number,paidSeats:y["b"].number,totalCost:y["b"].number,totalCostWithTax:y["b"].number,totalRecurringTax:y["b"].number,teamName:y["b"].string,tax:y["b"].object,teamCredits:y["b"].number,showSubmitButton:y["b"].bool,submitButtonText:y["b"].string,onSubmit:y["b"].func,display:y["b"].oneOf(["boxed","inline"]),loadPlansAndCostData:y["b"].func,switchTerms:y["b"].func,updatePlanLevel:y["b"].func,isPlansAndCostDataLoaded:y["b"].bool,showCurrencyLabel:y["b"].bool,clogger:y["b"].object,activeProductId:y["b"].string,featureCheckoutFlowTranslations:y["b"].bool};var F={isUserRestricted:false,title:"",showHeader:true,headerBackgroundColor:"sk_fill_blue",yearlyPlanCostPerTerm:0,monthlyPlanCostPerTerm:0,planIsYearly:false,numMonthsPerPlan:1,planCostPerTerm:0,planCurrency:"USD",numInactiveMembers:0,isZeroActiveMembers:true,totalMembers:0,paidSeats:0,totalCost:0,totalCostWithTax:0,totalRecurringTax:0,teamName:"",tax:null,teamCredits:0,showSubmitButton:true,submitButtonText:null,onSubmit:k["noop"],display:"inline",loadPlansAndCostData:k["noop"],switchTerms:k["noop"],updatePlanLevel:k["noop"],isPlansAndCostDataLoaded:false,showCurrencyLabel:false,clogger:{track:k["noop"]},activeProductId:"",featureCheckoutFlowTranslations:false};var L=function(e){f()(t,e);function t(e){c()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={submitButtonIsPending:false};Object(k["bindAll"])(r,["handleSubmit","switchtoYearly","switchToMonthly"]);return r}d()(t,[{key:"componentDidMount",value:function e(){if(!this.props.isPlansAndCostDataLoaded){this.props.updatePlanLevel(this.props.planLevel);this.props.loadPlansAndCostData({isFinalReview:false})}}},{key:"switchtoYearly",value:function e(){return this.props.switchTerms("yearly")}},{key:"switchToMonthly",value:function e(){return this.props.switchTerms("monthly")}},{key:"handleSubmit",value:function e(){var t=this;this.props.clogger.track("billing_checkout_v2",{contexts:{ui_context:{step:"checkout_pricing_calculator",action:"click",ui_element:"btn_calculator_check_out",ui_component:"pricing_calculator"}},pay_prod_selected:this.props.activeProductId,has_plan:true});this.setState(function(e){return o()({},e,{submitButtonIsPending:true})},function(){try{t.props.onSubmit()}catch(e){t.setState(function(e){return o()({},e,{submitButtonIsPending:false})})}})}},{key:"renderHeader",value:function e(){var t=this.props,r=t.title,a=t.headerBackgroundColor;if(!r)return null;var n=_()("p-pricing_calculator__header","p-pricing_calculator__header--"+a);return b.a.createElement("h3",{className:n,"data-qa":"pricing_calculator_header"},r)}},{key:"renderTermsToggle",value:function e(){var t=this.props,r=t.yearlyPlanCostPerTerm,a=t.monthlyPlanCostPerTerm,n=t.planIsYearly,i=t.planCurrency,s=t.featureCheckoutFlowTranslations;if(!s)return null;var o=Object(E["a"])(r,i);var l=Object(E["a"])(a,i);var c=_()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":n});var u=_()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":!n});return b.a.createElement("div",{className:"p-pricing_calculator__terms_toggle_container","data-qa":"pricing_calculator_terms_toggle_container"},b.a.createElement(S["c"],{onClick:this.switchtoYearly,className:c,"data-qa":"pricing_calculator_terms_toggle_yearly"},b.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),b.a.createElement("h3",null,x.t("Pay each year")),b.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},x.t("{yearlyPlanCostPerTermFormatted} per member, per year",{yearlyPlanCostPerTermFormatted:o}))),b.a.createElement(S["c"],{onClick:this.switchToMonthly,className:u,"data-qa":"pricing_calculator_terms_toggle_monthly"},b.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),b.a.createElement("h3",null,x.t("Pay each month")),b.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},x.t("{monthlyPlanCostPerTermFormatted} per member, per month",{monthlyPlanCostPerTermFormatted:l}))))}},{key:"renderCreditToast",value:function e(){var t=this.props,r=t.teamName,a=t.teamCredits,n=t.planCurrency;if(!a)return null;var i=Object(E["a"])(Math.abs(a),n);var s=a>0?x.rt("{teamName} has <strong>{creditsAppliedFormatted} in credit</strong>, which will be applied at checkout.",{teamName:r,creditsAppliedFormatted:i}):x.rt("{teamName}\u2018s account has an outstanding balance of <strong>{creditsAppliedFormatted}</strong>, which will be added to the final price during checkout",{teamName:r,creditsAppliedFormatted:i});return b.a.createElement(C["d"],{type:"inline",className:"p-pricing_calculator__credit_alert","data-qa":"pricing_calculator_credit_alert"},s)}},{key:"renderSubmitBtn",value:function e(){var t=this.props,r=t.submitButtonText,a=t.showSubmitButton;var n=this.state.submitButtonIsPending;if(!a)return null;return b.a.createElement(S["b"],{id:"pricing_calculator_submit_btn",size:"large",className:"p-pricing_calculator__submit_btn",onClick:this.handleSubmit,loading:n,"data-qa":"pricing_calculator_submit_btn"},r||x.t("Upgrade"))}},{key:"render",value:function e(){var t=this.props,r=t.isUserRestricted,a=t.showHeader,n=t.showSubmitButton,i=t.display,s=t.teamCredits,o=t.isPlansAndCostDataLoaded;if(!o||r)return null;var l=_()("p-pricing_calculator","p-pricing_calculator--"+i,{"p-pricing_calculator--has-header":this.props.showHeader});return b.a.createElement("div",{className:l,"data-qa":"pricing_calculator_container"},a&&this.renderHeader(),b.a.createElement("div",{className:"p-pricing_calculator__body"},this.renderTermsToggle(),b.a.createElement(M,this.props),!!s&&this.renderCreditToast(),n&&this.renderSubmitBtn()))}}]);return t}(v["PureComponent"]);L.displayName="PricingCalculator";L.displayName="PricingCalculator";L.defaultProps=F;var B=Object(w["a"])("feature_checkout_flow_translations")(L);var U=function e(t){return Object(i["a"])(t)};var q=function e(t){return{loadPlansAndCostData:function e(r){return t(Object(n["fetchPlansAndCostData"])(r))},switchTerms:function e(r){return t(Object(n["changeActivePlan"])({term:r}))},updatePlanLevel:function e(r){return t(Object(n["updatePlanLevel"])(r))}}};var G=Object(a["connect"])(U,q)(B);r.d(t,false,function(){return});var H=t["a"]=G},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(129);var h=r(1);var f=r.n(h);var v=r(14);var b=r(2);var g=r(15);var _=r.n(g);var y=r(11);var k=r(170);var O=r(473);var E=r(1010);var w=r(81);var C=r(10);var S=r(178);var j=r(20);var I=r(48);var T=r(1760);var N=new C["b"]("custom_tos");var A={hasCustomTOS:m["b"].bool,customTOSTimestamp:m["b"].number,disablePrivacyAndCookiePolicy:m["b"].bool,enterprise:m["b"].shape({name:m["b"].string,domain:m["b"].string}),orgUrl:m["b"].string,customTOSViewLink:m["b"].string,team:m["b"].shape({name:m["b"].string}),safeAbsRootURL:m["b"].string,featureZeroWorkspaceOnboarding:m["b"].bool.isRequired,onSubmit:m["b"].func,onlyDisplayCard:m["b"].bool};var R={hasCustomTOS:false,disablePrivacyAndCookiePolicy:false,enterprise:null,orgUrl:"",customTOSTimestamp:0,customTOSViewLink:"",team:null,safeAbsRootURL:"https://slack.com/",onSubmit:b["noop"],onlyDisplayCard:false};var M=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={buttonIsPending:false};r.onClick=r.onClick.bind(r);return r}l()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.setButtonPending(true);this.props.onSubmit()}},{key:"setButtonPending",value:function e(t){this.setState(function(){return{buttonIsPending:t}})}},{key:"maybeRenderSlackUserTOS",value:function e(){var t=this.props.hasCustomTOS;if(t)return null;return f.a.createElement("li",null,this.renderSlackUserTOS())}},{key:"maybeRenderEnterpriseTOS",value:function e(){var t=this.props.hasCustomTOS;if(!t)return null;return f.a.createElement("li",null,this.renderEnterpriseTOS())}},{key:"maybeRenderCookiePolicy",value:function e(){var t=this.props.disablePrivacyAndCookiePolicy;if(t)return null;return f.a.createElement("li",null,this.renderCookiePolicy())}},{key:"maybeRenderPrivacyPolicy",value:function e(){var t=this.props.disablePrivacyAndCookiePolicy;if(t)return null;return f.a.createElement("li",null,this.renderPrivacyPolicy())}},{key:"renderCookiePolicy",value:function e(){var t=this.props,r=t.safeAbsRootURL,a=t.featureZeroWorkspaceOnboarding;if(!a)return null;return f.a.createElement("a",{href:r+"cookie-policy",target:"_blank",rel:"noopener noreferrer"},N.t("Slack\u2019s Cookie Policy"))}},{key:"renderPrivacyPolicy",value:function e(){var t=this.props,r=t.safeAbsRootURL,a=t.featureZeroWorkspaceOnboarding;if(!a)return null;return f.a.createElement("a",{href:r+"privacy-policy",target:"_blank",rel:"noopener noreferrer"},N.t("Slack\u2019s Privacy Policy"))}},{key:"renderEnterpriseTOS",value:function e(){var t=this.props,r=t.customTOSViewLink,a=t.enterprise,n=t.featureZeroWorkspaceOnboarding;if(!n)return null;return f.a.createElement("a",{href:""+r,target:"_blank",rel:"noopener noreferrer"},N.t("{enterpriseName}\u2019s Terms of Service",{enterpriseName:a.name}))}},{key:"renderSlackUserTOS",value:function e(){var t=this.props,r=t.safeAbsRootURL,a=t.featureZeroWorkspaceOnboarding;if(!a)return null;return f.a.createElement("a",{href:r+"terms-of-service/user",target:"_blank",rel:"noopener noreferrer"},N.t("Slack\u2019s User Terms of Service"))}},{key:"renderTOSHeading",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.customTOSTimestamp;if(!r)return null;var n=void 0;n=a?N.t("Review and accept the updated terms of service"):N.t("Review the terms of service");return f.a.createElement("div",{className:"p-tos__heading"},n)}},{key:"renderTOSSubheading",value:function e(){var t=this.props,r=t.customTOSTimestamp,a=t.enterprise,n=t.customTOSViewLink,i=t.team,s=t.featureZeroWorkspaceOnboarding;if(!s)return null;if(Object(b["isNull"])(Object(w["getReferrerSafeLinkAttrs"])(n))){if(!Object(b["isEmpty"])(i))return f.a.createElement("div",null,f.a.createElement("p",{className:"p-tos__subheading"},N.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(I["getTeamDisplayName"])(i),enterpriseName:a.name})),f.a.createElement("p",{className:"p-tos__subheading"},n));return f.a.createElement("div",null,f.a.createElement("p",{className:"p-tos__subheading"},N.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:')),f.a.createElement("p",{className:"p-tos__subheading"},n))}if(r)return f.a.createElement("p",{className:"p-tos__subheading"},N.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to <a>{enterpriseName}\u2019s Terms of Service</a>, updated on {TOSUpdatedOn}.',{enterpriseName:a.name,customTOSViewLink:n,TOSUpdatedOn:Object(S["a"])(r)},function(e){var t=e.text,r=e.key,a=e.tag;if("a"===a)return f.a.createElement("a",{href:n,target:"_blank",key:r,rel:"noopener noreferrer"},t);return null}));if(!Object(b["isEmpty"])(i))return f.a.createElement("p",{className:"p-tos__subheading"},N.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(I["getTeamDisplayName"])(i),enterpriseName:a.name}));return f.a.createElement("p",{className:"p-tos__subheading"},N.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:'))}},{key:"renderTOSLinks",value:function e(){var t=this.props.customTOSTimestamp;if(t)return null;return f.a.createElement("div",{className:"p-tos__body"},f.a.createElement("ul",{className:"no_bullets margin_left_0"},this.maybeRenderSlackUserTOS(),this.maybeRenderPrivacyPolicy(),this.maybeRenderCookiePolicy(),this.maybeRenderEnterpriseTOS()))}},{key:"renderTOSBody",value:function e(){return f.a.createElement("div",{className:"p-tos__body"},this.renderTOSLinks(),this.renderSubmitButton())}},{key:"renderSubmitButton",value:function e(){if(!this.props.featureZeroWorkspaceOnboarding)return null;var t=this.state.buttonIsPending;return f.a.createElement(j["b"],{id:"submit_btn",type:"primary",className:"p-tos__button",onClick:this.onClick,loading:t,disabled:t,"data-qa":"submit_button"},N.t("I Agree"))}},{key:"renderCard",value:function e(){var t=_()("p-tos__card",{margin_top_0:this.props.onlyDisplayCard});return f.a.createElement("div",{className:t},f.a.createElement("div",{className:"p-tos__content"},this.renderTOSHeading(),this.renderTOSSubheading(),this.renderTOSBody()))}},{key:"render",value:function e(){var t=this.props,r=t.enterprise,a=t.onlyDisplayCard,n=t.orgUrl;return f.a.createElement("div",{className:"p-tos"},!a&&f.a.createElement(E["a"],{team:r,title:n,logoAriaLabel:"Slack"}),this.renderCard())}}]);return t}(h["PureComponent"]);M.displayName="TermsOfService";M.defaultProps=R;var P=function e(t){var r=Object(y["getFromBootData"])(t,"custom_tos");var a=r.enterprise;var i=Object(y["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding");var s=Object(k["getPotentiallyUnknownEnterprise"])(t);Object(b["isEmpty"])(s)||(a=s);var o=Object(O["c"])(t,a.domain);return n()({},r,{enterprise:a,orgUrl:o,featureZeroWorkspaceOnboarding:i})};var x=Object(v["connect"])(P)(M);r.d(t,"a",function(){return M});var D=t["b"]=x},function(e,t,r){"use strict";var a=r(279);t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,r=void 0!==t&&t,n=e.isEphemeral,i=void 0!==n&&n,s=e.isStarred,o=void 0!==s&&s,l=e.isBroadcast,c=void 0!==l&&l,u=e.subtype,d=e.sliHighlight;var p="slackbot_response"===u;var m=Object(a["shouldShowHighlightsLabel"])(d);return{isPinned:r,isStarred:o,isEphemeral:i,isBroadcast:c,isCustomResponse:p,isSliHighlight:m}}},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(32);var s=r.n(i);var o=r(5);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(7);var p=r.n(d);var m=r(8);var h=r.n(m);var f=r(1);var v=r.n(f);var b=r(129);var g=r(15);var _=r.n(g);var y=r(14);var k=r(2086);var O=r(2);var E=r(11);var w=r(123);var C=r(19);var S=r(26);var j=r(77);var I=r(212);var T=r(150);var N=r(278);var A=r(105);var R=r(165);var M=r(63);var P=r(10);var x=r(17);var D=r(283);var F=r(358);var L=r(151);var B=r(20);var U=r(54);var q=r(701);var G=r(673);var H=r(618);var W=r(167);var V=r(715);var z=r(41);var Q=r(18);var K=r(103);var Y=r(213);var J=r(88);var Z=r(190);var X=r(811);var $=r(31);var ee=r(267);var te=r(676);var re=80;var ae=new P["b"]("user_groups");var ne=void 0;function ie(e){if(!Object(E["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;ne={hasNameRequiredWarning:ae.t("Please enter a name for this group."),hasMaxLengthWarning:ae.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:re}),hasNameTakenWarning:ae.t("This name is already in use by another group."),unknownError:ae.t("Sorry, something went wrong. Please try a different name.")}}var se=Object($["b"])("Validate user group name",function(e,t,r){var a=r.name,n=r.prevName;if(a===n)return Promise.resolve("");ie(t());if(!a.trim())return Promise.resolve(ne.hasNameRequiredWarning);if(Object(te["a"])(a)>re)return Promise.resolve(ne.hasMaxLengthWarning);return e(Object(ee["n"])({name:a})).then(function(e){var t=e.error;if("name_already_exists"===t)return ne.hasNameTakenWarning;if(t)return ne.unknownError;return""})});se.propTypes={name:b["b"].string,prevName:b["b"].string};var oe=se;var le={};Object.defineProperty(le,"handleErrorSnameErrorStringstrings",{get:function e(){return ne},set:function e(t){ne=t}});var ce=new P["b"]("user_groups");var ue=80;var de=void 0;function pe(e){if(!Object(E["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;de={hasHandleRequiredWarning:ce.t("Please enter a handle for this group."),hasMaxLengthWarning:ce.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:ue}),hasSpecialsWarning:ce.t("Handles can only contain letters or numbers."),hasPunctuationWarning:ce.t("Handles can only contain letters or numbers."),hasLowercaseWarning:ce.t("Handles can only be in lowercase."),hasHandleTakenWarning:ce.t("This handle is already in use by a member, channel, or another group."),unknownError:ce.t("Sorry, something went wrong. Please try a different handle.")}}var me=Object($["b"])("Validate user group handle",function(e,t,r){var a=r.handle,n=r.prevHandle;if(a===n)return Promise.resolve("");pe(t());if(!a.trim())return Promise.resolve(de.hasHandleRequiredWarning);if(/[ .,;'`~!@#$%^&*+=\\:"<>?|]/.test(a.trim()))return Promise.resolve(de.hasSpecialsWarning);if(/^[-|_]+$/.test(a))return Promise.resolve(de.hasPunctuationWarning);if(/[A-Z]/.test(a))return Promise.resolve(de.hasLowercaseWarning);if(Object(te["a"])(a)>ue)return Promise.resolve(de.hasMaxLengthWarning);return e(Object(ee["m"])({handle:a})).then(function(e){var t=e.error;if("handle_already_exists"===t)return de.hasHandleTakenWarning;if(t)return de.unknownError;return""})});me.propTypes={handle:b["b"].string,prevHandle:b["b"].string};var he=me;var fe={};Object.defineProperty(fe,"handleErrorStrings",{get:function e(){return de},set:function e(t){de=t}});var ve=r(12);var be=r(661);var ge=r(263);var _e=new P["b"]("user_groups");var ye={selectedChannels:b["b"].array,getChannelById:b["b"].func.isRequired,featureSonicUserGroups:b["b"].bool.isRequired,onRef:b["b"].func.isRequired};var ke={selectedChannels:[]};var Oe=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={selectedChannels:r.props.selectedChannels,hideList:true};Object(O["bindAll"])(r,["getResultsForChannelsQuery","createSelectItems","onItemAdded","onItemRemoved","createTokenTemplate","listItemClass","hideList"]);return r}u()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onGetSelectedDefaultChannels",value:function e(){return this.state.selectedChannels}},{key:"onItemAdded",value:function e(t){var r=this.state.selectedChannels;r.push(t.id);this.setState(function(){return{selectedChannels:r}});this.hideList(true)}},{key:"onItemRemoved",value:function e(t){var r=Object(O["remove"])(this.state.selectedChannels,function(e){return e===t.id});this.setState(function(){return{selectedChannels:r}})}},{key:"getResultsForChannelsQuery",value:function e(t){var r=this;this.hideList(!t);if(!t)return Promise.resolve({items:this.createSelectItems(this.props.selectedChannels),replace_all_items:true});return Object(ge["a"])(t,{channels:{include_archived:true,exclude_required:true},enterprise_channels:{remote_limit:96},groups:{include_archived:true},tiered:true}).then(function(e){var t=r.props.selectedChannels;var a=e.map(function(e){var r=Object(ve["getDisplayName"])(e.model_ob);if(-1!==t.indexOf(e.model_ob.id))return n()({},e.model_ob,{label:r,preselected:true});return n()({},e.model_ob,{label:r})});return{items:a}})}},{key:"hideList",value:function e(t){this.setState(function(){return{hideList:t}})}},{key:"createSelectItems",value:function e(t){var r=this;return Object(O["map"])(t,function(e){var t=r.props.getChannelById(e);var a=Object(ve["getDisplayName"])(t);return n()({},t,{label:a,preselected:true})})}},{key:"createTokenTemplate",value:function e(t){return v.a.createElement("div",{className:"margin_left_50"},v.a.createElement(L["a"],{channel:t}))}},{key:"listItemClass",value:function e(){return"display_flex align_items_center"}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=_e.t("Default channels");var r=_e.t("Group members are added to these channels automatically.");return v.a.createElement(J["a"],{htmlFor:"default_channel_label",id:"user_group_default_channel",key:"user_group_default_channel",text:t,optional:true},v.a.createElement(be["a"],{items:this.createSelectItems(this.props.selectedChannels),dataPromise:this.getResultsForChannelsQuery,onItemAdded:this.onItemAdded,onItemRemoved:this.onItemRemoved,template:this.createTokenTemplate,tokenTemplate:this.createTokenTemplate,listItemClass:this.listItemClass,hideList:this.state.hideList,forceListAbove:true}),v.a.createElement("div",{className:"c-hint"},r))}}]);return t}(f["PureComponent"]);Oe.displayName="UserGroupDefaultChannelPicker";Oe.defaultProps=ke;var Ee=function e(t){return{getChannelById:function e(r){return Object(C["getChannelById"])(t,r)},featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var we=Object(y["connect"])(Ee)(Oe);var Ce=new P["b"]("user_groups");var Se={detailsFormValues:b["b"].shape({name:b["b"].string,handle:b["b"].string,purpose:b["b"].string,channels:b["b"].array}),validateUserGroupHandle:b["b"].func.isRequired,validateUserGroupName:b["b"].func.isRequired,setFormErrors:b["b"].func.isRequired,featureSonicUserGroups:b["b"].bool.isRequired,onRef:b["b"].func.isRequired,errors:b["b"].shape({nameError:b["b"].string,handleError:b["b"].string,purposeError:b["b"].string}),submitError:b["b"].string,setRequiredFieldsEmpty:b["b"].func.isRequired};var je={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},closeModal:O["noop"],errors:{nameError:"",handleError:"",purposeError:""},submitError:""};var Ie=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};var a=!r.state.name||!r.state.handle;r.props.setRequiredFieldsEmpty(a);Object(O["bindAll"])(r,["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","onSubmit","setUserGroupFormRef","maybeRenderApiError"]);r.postValidateHandle=null;r.postValidateName=null;return r}u()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this)}},{key:"componentDidUpdate",value:function e(t){if(t!==this.props){var r=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(r)}}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onNameChange",value:function e(t){var r=this;if(this.postValidateName){this.postValidateName.cancel();this.postValidateName=null}this.setState(function(){return{name:t}});this.postValidateName=this.props.validateUserGroupName({name:t}).then(function(e){r.props.setFormErrors({nameError:e})}).finally(function(){r.postValidateName=null});return this.postValidateName}},{key:"onHandleChange",value:function e(t){var r=this;if(this.postValidateHandle){this.postValidateHandle.cancel();this.postValidateHandle=null}var a=t.replace(/ /g,"");this.setState(function(){return{handle:a}});if(" "!==t.charAt(0)){this.postValidateHandle=this.props.validateUserGroupHandle({handle:a}).then(function(e){r.props.setFormErrors({handleError:e})}).finally(function(){r.postValidateHandle=null});return this.postValidateHandle}return Promise.resolve()}},{key:"onPurposeChange",value:function e(t){this.setState(function(){return{purpose:t}})}},{key:"onChannelsUpdate",value:function e(t){this.setState(function(){return{channels:t}})}},{key:"onSubmit",value:function e(){var t=this.defaultChannelsRef.onGetSelectedDefaultChannels();this.onChannelsUpdate(t);return n()({},this.state,{channels:t})}},{key:"setUserGroupFormRef",value:function e(t){this.defaultChannelsRef=t}},{key:"hasValidationErrors",value:function e(t){return Object(O["find"])(t,function(e){return e})}},{key:"maybeRenderApiError",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){var t=Ce.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return v.a.createElement(Y["a"],{level:"error",type:"inline"},t)}return false}},{key:"renderUserGroupNameField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=Ce.t("Name");var a=Ce.t("e.g. Accounts Team");return v.a.createElement("div",null,v.a.createElement(J["a"],{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:r},v.a.createElement(Z["a"],{name:"user_group_name",id:"name_input",placeholder:a,labelId:"user_group_name",value:this.state.name,type:"text",onChange:function e(r){return t.onNameChange(r)},errorText:this.props.errors.nameError,isRequired:true})))}},{key:"renderUserGroupHandleField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=Ce.t("e.g. accounts-team");var a=Ce.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces.");var n=Ce.t("Handle");return v.a.createElement("div",null,v.a.createElement(J["a"],{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:n},v.a.createElement(Z["a"],{name:"user_group_handle",id:"handle_input",placeholder:r,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:function e(r){return t.onHandleChange(r)},errorText:this.props.errors.handleError,hintText:a,isRequired:true,icon:"mentions"})))}},{key:"renderUserGroupPurposeField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=140;var a=Ce.t("Purpose");var n=Ce.t("What is this group about?");return v.a.createElement("div",null,v.a.createElement(J["a"],{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:a,optional:true},v.a.createElement(X["a"],{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:function e(r){return t.onPurposeChange(r)},errorText:this.props.errors.purposeError,hintText:n,maxCharacterLimit:r})))}},{key:"renderDefaultChannelSelect",value:function e(){var t=this;return v.a.createElement(we,{selectedChannels:this.state.channels,onRef:function e(r){return t.setUserGroupFormRef(r)}})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",null,this.maybeRenderApiError(),v.a.createElement("form",null,this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect()))}}]);return t}(f["PureComponent"]);Ie.displayName="UserGroupEditCreateForm";Ie.defaultProps=je;var Te=function e(t){return{featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Ne={validateUserGroupName:oe,validateUserGroupHandle:he};var Ae=Object(y["connect"])(Te,Ne)(Ie);var Re=r(24);var Me=r.n(Re);var Pe=r(23);var xe=r(797);var De=r(16);var Fe=r(344);var Le=r(92);var Be=r(177);var Ue=r(2105);var qe=new P["b"]("user_groups");var Ge={groupId:b["b"].string,featureSonicUserGroups:b["b"].bool,userGroupMemberIds:b["b"].array,fetchAndUpsertUserGroupMembers:b["b"].func,teamId:b["b"].string,search:b["b"].func};var He={groupId:void 0,featureSonicUserGroups:false,userGroupMemberIds:[],fetchAndUpsertUserGroupMembers:O["noop"],teamId:void 0,search:O["noop"]};var We=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={updatedGroupMembers:e.userGroupMemberIds,searchResults:[],searchQuery:"",loading:false,resultFocusIndex:-1,lastKnownResultFocusIndex:-1,displayNoMemberError:false};Object(O["bindAll"])(r,["onSearchInputChange","onClearSearch","setAddMember","setRemoveMember","setListRef","setAddedMembersTitleRef","handleUpKey","handleDownKey","handleEnterKey","onSearchInputFocusIn","onSearchInputFocusOut"]);r.list=null;r.addedMembersTitle=null;r.ADDED_MEMBERS_TITLE_HEIGHT=22;return r}u()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.props.groupId;if(r){this.setLoading(true);this.props.fetchAndUpsertUserGroupMembers({groupId:r}).then(function(e){Object(O["isEmpty"])(e)?t.getMembers(""):t.setState(function(){return{updatedGroupMembers:e,loading:false}})})}else this.getMembers("")}},{key:"componentDidUpdate",value:function e(t,r){!Object(O["isEqual"])(this.state.searchResults,r.searchResults||!Object(O["isEqual"])(this.state.searchQuery,r.searchQuery))&&this.list&&this.list.scrollToOffset(0);r.updatedGroupMembers.length!==this.state.updatedGroupMembers.length&&Object(O["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.addedMembersTitle&&(this.ADDED_MEMBERS_TITLE_HEIGHT=this.addedMembersTitle.clientHeight)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onSearchInputChange",value:function e(t){this.state.displayNoMemberError&&this.setDisplayNoMemberError(false);var r=t&&t.target&&t.target.value;if(r){this.getMembers(r);this.setSearchQuery(r);this.setResultFocusIndex(0)}else this.onClearSearch()}},{key:"onClearSearch",value:function e(){Object(O["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.setSearchQuery("");this.setResultFocusIndex(0);this.setDisplayNoMemberError(false)}},{key:"onSearchInputFocusIn",value:function e(){this.bindKeyCommands();if(this.state.lastKnownResultFocusIndex<0){this.setLastKnownResultFocusIndex(0);this.setResultFocusIndex(0)}else this.setResultFocusIndex(this.state.lastKnownResultFocusIndex)}},{key:"onSearchInputFocusOut",value:function e(){this.keyCommands&&this.keyCommands.reset();this.setLastKnownResultFocusIndex(this.state.resultFocusIndex);this.setResultFocusIndex(-1)}},{key:"getUpdatedUserGroupMembers",value:function e(){return this.state.updatedGroupMembers}},{key:"setSearchQuery",value:function e(t){this.setState(function(){return{searchQuery:t}})}},{key:"setSearchResults",value:function e(t){this.setState(function(){return{searchResults:t}})}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"setDisplayNoMemberError",value:function e(t){this.setState(function(){return{displayNoMemberError:t}})}},{key:"setRemoveMember",value:function e(t){this.setState(function(e){return{updatedGroupMembers:Object(O["without"])(e.updatedGroupMembers,t)}})}},{key:"setAddMember",value:function e(t){this.setState(function(e){return{updatedGroupMembers:[t].concat(Me()(e.updatedGroupMembers))}},this.onClearSearch)}},{key:"setResultFocusIndex",value:function e(t){this.setState(function(){return{resultFocusIndex:t}})}},{key:"setLastKnownResultFocusIndex",value:function e(t){this.setState(function(){return{lastKnownResultFocusIndex:t}})}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setAddedMembersTitleRef",value:function e(t){this.addedMembersTitle=t}},{key:"getMembers",value:function e(t){var r=this;this.setLoading(true);return this.props.search({query:t,options:{entities:{members:{includeSelf:true,onlyLocalTeam:true,includeSlackbot:false,includeBots:false,includeDeleted:true}},allowEmptyQuery:true,sort:{frecency:false,selfFirst:false},limit:40}}).then(function(e){var t=Object(O["filter"])(e,function(e){if(!e)return false;if(Object(De["isGuest"])(e))return false;if(e.enterprise_user){var t=e.enterprise_user.teams;if(!t)return false;if(!Object(O["includes"])(t,r.props.teamId))return false}return true});var a=Object(O["sortBy"])(t,["real_name"]);var n=a.map(function(e){return e.id});r.setSearchResults(n);r.setLoading(false)})}},{key:"getRowProps",value:function e(t){var r=this;if(!this.props.featureSonicUserGroups)return{};var a=this.state.updatedGroupMembers;if(Object(O["includes"])(a,t))return{onClick:function e(){return r.setRemoveMember(t)},text:qe.t("Remove")};return{onClick:function e(){return r.setAddMember(t)},text:qe.t("Add")}}},{key:"getDisplayedListLength",value:function e(){var t=this.state,r=t.searchResults,a=t.searchQuery,n=t.updatedGroupMembers;if(a)return r.length;return n.length?n.length:r.length}},{key:"handleUpKey",value:function e(t){t.preventDefault();var r=this.state.resultFocusIndex;var a=this.getDisplayedListLength();a?this.setResultFocusIndex(0===r?a-1:r-1):this.setResultFocusIndex(0)}},{key:"handleDownKey",value:function e(t){t.preventDefault();var r=this.state.resultFocusIndex;var a=this.getDisplayedListLength();a?this.setResultFocusIndex((r+1)%a):this.setResultFocusIndex(0)}},{key:"handleEnterKey",value:function e(t){if(this.state.resultFocusIndex<0)return;t.preventDefault();var r=this.state,a=r.searchQuery,n=r.searchResults,i=r.updatedGroupMembers,s=r.resultFocusIndex;if(a){var o=n[s];this.setSearchQuery("");Object(O["includes"])(i,o)?this.setRemoveMember(o):this.setAddMember(o)}else{var l=i[s];this.setRemoveMember(l)}}},{key:"bindKeyCommands",value:function e(){var t=[{keys:["up"],handler:this.handleUpKey},{keys:["down"],handler:this.handleDownKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new Be["a"]);this.keyCommands.bindAll(t)}},{key:"validateUpdatedGroupMemberCount",value:function e(){var t=this.state.updatedGroupMembers.length>0;t||this.setDisplayNoMemberError(true);return t}},{key:"doDisplayGroupMembersList",value:function e(){return!this.state.searchQuery&&!!this.state.updatedGroupMembers.length}},{key:"maybeRenderAddedMembersTitle",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!this.doDisplayGroupMembersList())return null;return v.a.createElement("div",{className:"p-user_group_member_management__list_title",ref:this.setAddedMembersTitleRef},qe.t("Added members"))}},{key:"maybeRenderNoMembersAlert",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!this.state.displayNoMemberError)return null;return v.a.createElement(Y["a"],{type:"inline",level:"error",className:"margin_right_150 margin_left_150"},qe.t("User groups need to have at least one member."))}},{key:"renderLoadingSpinner",value:function e(){return v.a.createElement("div",{className:"full_height full_width display_flex align_items_center"},v.a.createElement(Le["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderRowButton",value:function e(t){var r=t.text,a=s()(t,["text"]);return v.a.createElement("div",{className:"p-user_group_member_management__row_button"},v.a.createElement(B["d"],n()({size:"small",type:"outline"},a,{tabIndex:"-1"}),r))}},{key:"renderMemberRow",value:function e(t){var r=t.id,a=t.index;var i=this.getRowProps(r),o=i.onClick,l=s()(i,["onClick"]);var c=_()({"p-user_group_member_management__row_container--active":a===this.state.resultFocusIndex});return v.a.createElement("div",{className:c},v.a.createElement("div",{className:"p-user_group_member_management__row"},v.a.createElement("div",{className:"p-user_group_member_management__row_member"},v.a.createElement(F["a"],{id:r,size:"medium",showTooltip:false}))),this.renderRowButton(n()({onClick:o},l)))}},{key:"renderMemberList",value:function e(){var t=this.state,r=t.searchResults,a=t.loading,n=t.updatedGroupMembers;if(a)return this.renderLoadingSpinner();if(this.doDisplayGroupMembersList())return this.renderList({items:n});if(Object(O["isEmpty"])(r))return this.renderEmptyList();return this.renderList({items:r})}},{key:"renderList",value:function e(t){var r=this;var a=t.items;var n=[].concat(a);var i=this.doDisplayGroupMembersList();var s=void 0;s=this.state.resultFocusIndex>-1?n[this.state.resultFocusIndex]:this.state.lastKnownResultFocusIndex>-1?n[this.state.lastKnownResultFocusIndex]:n[0];return v.a.createElement(k["a"],null,function(e){var t=e.width,o=e.height;return v.a.createElement(G["a"],{width:t,height:i?o-r.ADDED_MEMBERS_TITLE_HEIGHT:o,keys:n,ref:r.setListRef,rowRenderer:function e(t){return r.renderMemberRow({id:a[t],index:t})},itemToScroll:s,hideHiddenStopTabs:true})})}},{key:"renderEmptyList",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",{className:"p-user_group_member_management__empty"},v.a.createElement("div",{className:"margin_top_100 margin_bottom_100"},qe.rt("No matches found for <strong>{searchQuery}</strong>",{searchQuery:this.state.searchQuery})),v.a.createElement(B["d"],{type:"outline",size:"small",onClick:this.onClearSearch},qe.t("Clear Search")))}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=_()("p-user_group_member_management__search",{"p-user_group_member_management__search--no_list_title":!this.doDisplayGroupMembersList()});return v.a.createElement("div",{className:t,"data-qa-user-group-member-management-search-container":true},v.a.createElement(J["a"],{className:"bold",text:qe.t("Add members"),"data-qa-user-group-member-management-search-label":true},v.a.createElement(Fe["a"],{placeholder:qe.t("Search by name"),icon:"search",autoFocus:true,onChange:this.onSearchInputChange,value:this.state.searchQuery,onFocus:this.onSearchInputFocusIn,onBlur:this.onSearchInputFocusOut,callOnFocusOnAutoFocus:true})))}},{key:"render",value:function e(){return v.a.createElement("div",{className:"overflow_hidden","data-qa-user-group-member-management-body":true},this.maybeRenderNoMembersAlert(),this.renderSearch(),v.a.createElement("div",{className:"p-user_group_member_management__list"},this.maybeRenderAddedMembersTitle(),this.renderMemberList()))}}]);return t}(f["PureComponent"]);We.displayName="UserGroupMemberManagement";We.defaultProps=He;var Ve=function e(t,r){var a=r.groupId;var n=Object(w["getUserGroupById"])(t,a);var i=Object(A["g"])(n);return{featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups"),userGroupMemberIds:i,teamId:Object(Pe["getTeamId"])(t)}};var ze={search:xe["a"],fetchAndUpsertUserGroupMembers:w["fetchAndUpsertUserGroupMembers"]};var Qe=Object(y["connect"])(Ve,ze,null,{withRef:true})(We);var Ke=r(67);var Ye=r.n(Ke);var Je=Object($["b"])("Validate the user group form",function(e,t,r){var a=r.name,n=r.handle,i=r.prevName,s=r.prevHandle;return Promise.all([e(oe({name:a,prevName:i})),e(he({handle:n,prevHandle:s}))]).then(function(e){var t=Ye()(e,2),r=t[0],a=t[1];return{nameError:r,handleError:a}})});Je.propTypes={name:b["b"].string,handle:b["b"].string,prevName:b["b"].string,prevHandle:b["b"].string};var Ze=Je;var Xe=new P["b"]("user_groups");var $e={userGroupId:b["b"].string,userGroupName:b["b"].string,userGroupHandle:b["b"].string,userGroupPurpose:b["b"].string,userGroupDefaultChannels:b["b"].array,createUserGroup:b["b"].func.isRequired,updateUserGroup:b["b"].func.isRequired,validate:b["b"].func.isRequired,featureSonicUserGroups:b["b"].bool.isRequired,closeModal:b["b"].func,enqueueToast:b["b"].func,showUserGroupDetails:b["b"].func};var et={userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:O["noop"],enqueueToast:O["noop"],showUserGroupDetails:O["noop"]};var tt=void 0;var rt=Object(x["b"])();var at=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={formSubmitDisabled:true,formSubmitPending:false,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:false,detailsFormValues:{name:r.props.userGroupName,handle:r.props.userGroupHandle,purpose:r.props.userGroupPurpose,channels:r.props.userGroupDefaultChannels}};Object(O["bindAll"])(r,["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo"]);r.formRef=null;return r}u()(t,[{key:"componentWillMount",value:function e(){this.createDialogViewInfo();this.props.userGroupId?this.setDialogStep(tt.edit.id):this.setDialogStep(tt.details.id)}},{key:"onDetailsStepComplete",value:function e(){var t=this;var r=this.formRef.onSubmit();this.setFormSubmitPending(true);return this.props.validate(n()({},r,{prevName:this.props.userGroupName,prevHandle:this.props.userGroupHandle})).then(function(e){t.setFormErrors(e);if(t.hasValidationErrors(e)){t.setFormSubmitPending(false);return}if(t.state.formStep===tt.edit.id)t.onEditDialogSubmit(r);else{t.setDetailsFormValues(r);t.setDialogStep(tt.members.id);t.setFormSubmitPending(false)}})}},{key:"onEditDialogSubmit",value:function e(t){var r=this;var a=t.name,n=t.handle,i=t.purpose,s=t.channels;if(!this.props.featureSonicUserGroups)return null;var o=this.props.userGroupId;return this.props.updateUserGroup({groupId:o,name:a,handle:n,description:i,channels:s}).then(function(){r.props.enqueueToast({element:v.a.createElement(D["b"],null,Xe.t("Group has been updated."))});r.onSubmitSuccess()}).catch(function(e){rt.error("Error editing user group: "+e);r.onSubmitFailure(e)})}},{key:"onCreateDialogSubmit",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=this.state.detailsFormValues;r=void 0===r?{}:r;var a=r.name,n=r.handle,i=r.purpose,s=r.channels;if(!this.userGroupMemberManagementRef)return false;var o=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!o)return false;var l=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.createUserGroup({name:a,handle:n,description:i,channels:s,users:l}).then(function(e){var r=e.id;return t.props.showUserGroupDetails({groupId:r})}).then(function(){t.props.enqueueToast({element:v.a.createElement(D["b"],null,Xe.t("User group created!"))});t.onSubmitSuccess()}).catch(function(e){rt.error("Error creating user group: "+e);t.onSubmitFailure(e)})}},{key:"onSubmitSuccess",value:function e(){this.setFormSubmitPending(false);this.props.closeModal();this.setApiError("")}},{key:"onSubmitFailure",value:function e(t){this.setFormSubmitPending(false);this.setApiError(t)}},{key:"getMemberSelectorDialogProps",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;return{title:tt.members.title,contentLabel:tt.members.title,shouldCloseOnGo:true,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:tt.members.goButtonText,shouldCloseOnCancel:false,cancelText:Xe.t("Back"),onCancel:function e(){t.setDialogStep(tt.details.id)},footerText:tt.members.footerText}}},{key:"getDetailsFormDialogProps",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.state.formStep;var r=Object(O["find"])(tt,function(e){return e.id===t});return{title:r.title,contentLabel:r.title,goButtonText:r.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:true,cancelText:Xe.t("Cancel"),shouldCloseOnGo:false,footerText:r.footerText}}},{key:"setFormErrors",value:function e(t){this.setState(function(e){return{errors:n()({},e.errors,t)}})}},{key:"setDetailsFormValues",value:function e(t){this.setState(function(e){return{detailsFormValues:n()({},e.detailsFormValues,t)}})}},{key:"setFormSubmitPending",value:function e(t){this.setState(function(){return{formSubmitPending:t}})}},{key:"setDialogStep",value:function e(t){this.setState(function(){return{formStep:t}})}},{key:"setUserGroupFormRef",value:function e(t){this.formRef=t}},{key:"setApiError",value:function e(t){this.setState(function(){return{submitError:t}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setRequiredFieldsEmpty",value:function e(t){this.setState(function(){return{requiredFieldsEmpty:t}})}},{key:"createDialogViewInfo",value:function e(){if(!this.props.featureSonicUserGroups)return;tt={details:{id:"details",footerText:Xe.t("Step 1 of 2"),title:Xe.t("Create User Group"),goButtonText:Xe.t("Next")},members:{id:"members",footerText:Xe.t("Step 2 of 2"),title:Xe.t("Add members"),goButtonText:Xe.t("Create Group")},edit:{id:"edit",footerText:null,title:Xe.t("Edit User Group"),goButtonText:Xe.t("Save")}}}},{key:"hasValidationErrors",value:function e(t){return!!Object(O["find"])(t,function(e){return e.length})}},{key:"renderDetailsForm",value:function e(){var t=this;return v.a.createElement("div",null,v.a.createElement(Ae,n()({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:function e(r){return t.setUserGroupFormRef(r)},setRequiredFieldsEmpty:this.setRequiredFieldsEmpty})))}},{key:"renderMemberSelector",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(Qe,{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef})}},{key:"renderDialogStep",value:function e(){if(this.state.formStep===tt.details.id||this.state.formStep===tt.edit.id)return this.renderDetailsForm();if(this.state.formStep===tt.members.id)return this.renderMemberSelector();return""}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty;var r=this.state.formStep===tt.details.id||this.state.formStep===tt.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return v.a.createElement(K["a"],n()({showCancelButton:true,goButtonIsDisabled:t,goButtonIsPending:this.state.formSubmitPending},r),this.renderDialogStep())}}]);return t}(f["PureComponent"]);at.displayName="UserGroupEditCreateDialog";at.defaultProps=et;var nt=function e(t,r){var a=Object(w["getUserGroupById"])(t,r.userGroupId);return{userGroupName:Object(O["get"])(a,"name",""),userGroupHandle:Object(O["get"])(a,"handle",""),userGroupPurpose:Object(O["get"])(a,"description",""),userGroupDefaultChannels:Object(O["get"])(a,"prefs.channels",[]),featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var it={createUserGroup:w["createUserGroup"],updateUserGroup:w["updateUserGroup"],closeModal:j["closeModal"],enqueueToast:I["enqueueToast"],showUserGroupDetails:T["h"],validate:Ze};var st=Object(y["connect"])(nt,it)(at);var ot=new P["b"]("user_groups");var lt={list:"list",details:"details"};var ct={openUserGroupList:b["b"].func.isRequired,openModal:b["b"].func.isRequired,view:b["b"].oneOf(Object(O["values"])(lt)),featureSonicUserGroups:b["b"].bool,useGlobalNav:b["b"].bool};var ut={view:lt.list,featureSonicUserGroups:false,useGlobalNav:false};var dt=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openCreateEditDialog=r.openCreateEditDialog.bind(r);return r}u()(t,[{key:"openCreateEditDialog",value:function e(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"maybeRenderDetailsHeader",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!(this.props.view===lt.details))return null;return v.a.createElement(B["c"],{onClick:this.props.openUserGroupList,className:"p-user_group_header"},v.a.createElement("div",{className:"p-user_group_header__title--clickable"},v.a.createElement(Q["b"],{type:"chevron-medium-left",className:"p-user_group_header__back_button"}),ot.t("User Groups")))}},{key:"maybeRenderCreationIcon",value:function e(){if(!Object(H["a"])())return null;return v.a.createElement(z["d"],{tip:ot.t("Create a user group"),delay:z["a"]},v.a.createElement(B["c"],{onClick:this.openCreateEditDialog,className:"p-user_group_header__create","aria-label":ot.t("Create a user group")},v.a.createElement(Q["b"],{type:"compose-dm",size:"inherit"})))}},{key:"maybeRenderListHeader",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!(this.props.view===lt.list))return null;return v.a.createElement("div",{className:"p-user_group_header"},v.a.createElement("span",{className:"p-user_group_header__title"},ot.t("User Groups")),this.maybeRenderCreationIcon())}},{key:"renderCreateEditDialog",value:function e(){return v.a.createElement(st,null)}},{key:"render",value:function e(){if(this.props.useGlobalNav)return null;return v.a.createElement(V["a"],null,this.maybeRenderDetailsHeader(),this.maybeRenderListHeader())}}]);return t}(f["Component"]);dt.displayName="UserGroupsFlexpaneHeader";var pt=function e(t){return{featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups"),useGlobalNav:Object(W["b"])(t)}};var mt=function e(t){return{openModal:function e(){return t(j["openModal"].apply(void 0,arguments))},openUserGroupList:function e(){return t(Object(T["i"])())}}};dt.defaultProps=ut;var ht=Object(y["connect"])(pt,mt)(dt);var ft=r(69);var vt=r(3477);var bt={groupId:b["b"].string.isRequired,isActive:b["b"].bool.isRequired,isAutoGenerated:b["b"].bool.isRequired,isDetailsView:b["b"].bool,featureSonicUserGroups:b["b"].bool,onEnableUserGroup:b["b"].func,onDisableUserGroup:b["b"].func,openModal:b["b"].func,canEditUserGroups:b["b"].func,canCreateAndDeleteUserGroups:b["b"].func,menuProps:b["b"].object,onClick:b["b"].func};var gt={isDetailsView:false,featureSonicUserGroups:false,onEnableUserGroup:O["noop"],onDisableUserGroup:O["noop"],canEditUserGroups:O["noop"],canCreateAndDeleteUserGroups:O["noop"],openModal:O["noop"],menuProps:{},onClick:O["noop"]};var _t=new P["b"]("user_groups");var yt=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"]);return r}u()(t,[{key:"onEnableUserGroup",value:function e(){this.props.onClick();return this.props.onEnableUserGroup()}},{key:"onDisableUserGroup",value:function e(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})});this.props.onClick()}},{key:"onEditDetails",value:function e(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}},{key:"onEditMembers",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"getEditMenuItems",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,r=t.isAutoGenerated,a=t.isDetailsView;if(r&&a)return null;var n=[];a||r||n.push({key:"menu-edit-members",label:_t.t("Edit group members..."),onSelected:this.onEditMembers});n.push({key:"menu-edit-details",label:_t.t("Edit group details..."),onSelected:this.onEditDetails});return n}},{key:"getMenuItems",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=[];if(this.userGroupIsEditable()){var a=this.getEditMenuItems();a&&r.push.apply(r,Me()(a))}this.canEnableUserGroup()?r.push({key:"menu-enable",label:_t.t("Enable group"),onSelected:function e(){return t.onEnableUserGroup()}}):this.canDisableUserGroup()&&r.push({key:"menu-disable",label:_t.t("Deactivate group"),danger:true,onSelected:function e(){return t.onDisableUserGroup()}});return r}},{key:"userGroupIsEditable",value:function e(){return this.props.canEditUserGroups()&&this.props.isActive}},{key:"canDisableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}},{key:"canEnableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}},{key:"renderConfirmationDialog",value:function e(t){var r=t.action,a=t.onSubmit;var n=this.props.groupId;return v.a.createElement(Kt,{groupId:n,action:r,onSubmit:a})}},{key:"renderEditDialog",value:function e(t){return v.a.createElement(st,{userGroupId:t})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return v.a.createElement(or,{groupId:t})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(U["f"],n()({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(function(e){return v.a.createElement(U["b"],e)}))}}]);return t}(f["PureComponent"]);yt.displayName="UserGroupContextMenu";yt.defaultProps=gt;var kt=function e(t,r){var a=r.groupId,n=r.isDetailsView;var i=Object(w["getUserGroupById"])(t,a);var s=Object(A["q"])(i);var o=Object(A["l"])(i);var l=Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups");return{isActive:s,isAutoGenerated:o,isDetailsView:n,canEditUserGroups:function e(){return Object(A["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(A["b"])(t)},featureSonicUserGroups:l}};var Ot=function e(t,r){var a=r.groupId;return{openModal:function e(){return t(j["openModal"].apply(void 0,arguments))},onLoad:function e(){return t(Object(w["fetchAndUpsertUserGroupMembers"])({groupId:a}))},onDisableUserGroup:function e(){t(Object(w["disableAndUpdateUserGroup"])({groupId:a})).then(function(){return t(Object(ft["setSecondaryView"])({routeName:vt["j"],flexName:"groups",flexParams:{}}))})},onEnableUserGroup:function e(){t(Object(w["enableAndUpdateUserGroup"])({groupId:a})).then(function(){return t(Object(ft["setSecondaryView"])({routeName:vt["i"],flexName:"groups",flexParams:{groupId:a}}))})}}};var Et=Object(y["connect"])(kt,Ot)(yt);var wt=r(2106);var Ct=new P["b"]("user_groups");var St={userGroup:b["b"].object,onEditMembers:b["b"].func.isRequired,onEditDetails:b["b"].func.isRequired,featureSonicUserGroups:b["b"].bool.isRequired};var jt={userGroup:void 0};var It=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderUserGroupOptionsMenu=r.renderUserGroupOptionsMenu.bind(r);return r}u()(t,[{key:"renderUserGroupOptionsMenu",value:function e(t){return v.a.createElement(Et,{menuProps:t,groupId:this.props.userGroup.id,isDetailsView:true})}},{key:"renderUserGroupOptions",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(U["e"],{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},v.a.createElement(z["d"],{tip:Ct.t("More actions"),delay:z["a"],position:"top-right"},v.a.createElement(B["d"],{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":true,icon:"ellipsis"})))}},{key:"renderEditMembersButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(B["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":true},Ct.t("Edit Members"))}},{key:"renderEditDetailsButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(B["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":true},Ct.t("Edit Details"))}},{key:"renderPrimaryAction",value:function e(){if(Object(A["l"])(this.props.userGroup))return this.renderEditDetailsButton();return this.renderEditMembersButton()}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions())}}]);return t}(f["Component"]);It.displayName="UserGroupsDetailsActionBar";var Tt=function e(t,r){var a=r.groupId;return{userGroup:Object(w["getUserGroupById"])(t,a),featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};It.defaultProps=jt;var Nt=Object(y["connect"])(Tt)(It);var At={members:"members",channels:"channels"};var Rt=new P["b"]("user_groups");var Mt={userGroup:b["b"].shape({created_by:b["b"].string,date_create:b["b"].number,date_delete:b["b"].number,date_update:b["b"].number,deleted_by:b["b"].string,description:b["b"].string,enterprise_subteam_id:b["b"].string,handle:b["b"].string,id:b["b"].string,is_external:b["b"].bool,is_subteam:b["b"].bool,is_usergroup:b["b"].bool,name:b["b"].string,prefs:b["b"].shape({channels:b["b"].array,groups:b["b"].array}),team_id:b["b"].string,updated_by:b["b"].string,user_count:b["b"].number,users:b["b"].array,_name_lc:b["b"].string}),fetchUserGroupMembers:b["b"].func,onChannelSwitch:b["b"].func,removeMember:b["b"].func,removeChannel:b["b"].func,openModal:b["b"].func,openUserGroupList:b["b"].func,enqueueToast:b["b"].func,canEditUserGroups:b["b"].func,canCreateAndDeleteUserGroups:b["b"].func,groupId:b["b"].string.isRequired,userGroupMembers:b["b"].array,newMembers:b["b"].array,userGroupDefaultChannels:b["b"].array,featureSonicUserGroups:b["b"].bool};var Pt={userGroup:{},fetchUserGroupMembers:O["noop"],onChannelSwitch:O["noop"],removeMember:O["noop"],removeChannel:O["noop"],openModal:O["noop"],openUserGroupList:O["noop"],enqueueToast:O["noop"],canEditUserGroups:O["noop"],canCreateAndDeleteUserGroups:O["noop"],userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],featureSonicUserGroups:false};var xt=Object(x["b"])();var Dt=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog"]);return r}u()(t,[{key:"componentDidMount",value:function e(){Object(A["q"])(this.props.userGroup)&&this.props.fetchUserGroupMembers()}},{key:"componentDidUpdate",value:function e(t){var r=t.userGroup,a=r.users,n=s()(r,["users"]);var i=this.props.userGroup,o=i.users,l=s()(i,["users"]);Object(O["isEqual"])(n,l)||this.props.fetchUserGroupMembers()}},{key:"onRemoveMember",value:function e(t){var r=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:function e(){r.props.removeMember(t).then(function(){r.props.enqueueToast({element:v.a.createElement(D["b"],null,Rt.t("Member removed from group."))})}).catch(function(e){xt.error("Error removing member from user group: "+e);"no_users_provided"===e.data.error&&r.props.enqueueToast({element:v.a.createElement(D["b"],null,Rt.t("User groups need to have at least one member."))})})},id:t})})}},{key:"onRemoveChannel",value:function e(t){var r=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:function e(){r.props.removeChannel(t).then(function(){r.props.enqueueToast({element:v.a.createElement(D["b"],null,Rt.t("Channel removed from group."))})}).catch(function(e){xt.error("Error removing default channel from user group: "+e)})},id:t})})}},{key:"onAddMembers",value:function e(){this.displayMemberManagementDialog()}},{key:"onAddChannels",value:function e(){this.displayEditDetailsDialog()}},{key:"onRemoveFromGroup",value:function e(t){var r=t.type,a=t.id;r===At.members?this.onRemoveMember(a):r===At.channels&&this.onRemoveChannel(a)}},{key:"onViewProfile",value:function e(t,r){var a=r.type,n=r.id;if(a===At.members)return Object(R["h"])(n,"groups",{userGroupId:this.props.userGroup.id});if(a===At.channels)return this.props.onChannelSwitch(n);return null}},{key:"getTabs",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,r=t.userGroup,a=t.userGroupDefaultChannels,n=void 0===a?[]:a;var i=Object(A["k"])(r);return[{title:Rt.rt("Members"),titleCount:i,id:"user-groups-members-tab",content:this.renderMembersList()},{title:Rt.rt("Channels"),titleCount:n.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}},{key:"displayMemberManagementDialog",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"displayEditDetailsDialog",value:function e(){this.props.openModal({element:this.renderEditDetailsDialog()})}},{key:"userGroupIsEditable",value:function e(){var t=this.props.userGroup;return this.props.canEditUserGroups()&&Object(A["q"])(t)}},{key:"canRemoveItem",value:function e(t){var r=this.props.userGroup;if(t===At.members&&Object(A["l"])(r))return false;return true}},{key:"renderHeader",value:function e(){var t=this.props.userGroup;return v.a.createElement("div",{className:"p-user_group_details__section"},v.a.createElement("div",{className:"p-user_group_details__name"},Object(A["h"])(t)),v.a.createElement("div",{className:"p-user_group_details__description"},Object(A["e"])(t)),v.a.createElement("div",{className:"p-user_group_details__handle"},Object(A["f"])(t,{includeAtSign:true})))}},{key:"renderActions",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;if(!this.userGroupIsEditable()||!this.props.canCreateAndDeleteUserGroups())return null;return v.a.createElement("div",{className:"p-user_group_details__section"},v.a.createElement(Nt,{groupId:this.props.groupId,onEditMembers:function e(){return t.displayMemberManagementDialog()},onEditDetails:function e(){return t.displayEditDetailsDialog()}}))}},{key:"renderTabs",value:function e(){var t="user-groups-members-tab";var r=this.getTabs();var a=_()("p-user_group_details__tab_container",{"p-user_group_details__tab_container--sonic":Object(M["a"])(),"p-user_group_details__tab_container--legacy":!Object(M["a"])()});return v.a.createElement("div",{className:a,"data-qa-user-group-details-tabs":true},v.a.createElement(q["a"],{tabs:r,defaultTabId:t,fullHeight:true,fullWidthMenu:true}))}},{key:"renderListItemOptionsMenu",value:function e(t){var r=this;var a=t.menuProps,i=t.id,s=t.type;if(!this.props.featureSonicUserGroups)return null;var o=s===At.channels?Rt.t("Open channel"):Rt.t("View profile");var l=[v.a.createElement(U["b"],{key:i,label:o,onSelected:function e(t){return r.onViewProfile(t,{type:s,id:i})}})];this.canRemoveItem(s)&&l.push(v.a.createElement(U["b"],{key:i,label:Rt.t("Remove from group..."),onSelected:function e(){return r.onRemoveFromGroup({type:s,id:i})},danger:true}));return v.a.createElement(U["f"],n()({},a,{width:"auto"}),l)}},{key:"renderMemberItem",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.userGroupIsEditable();var n=Object(O["includes"])(this.props.newMembers,r);var i=_()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":a,"p-user_group_base_row--active":n});var s={className:i,isContextButtonVisible:a,onClick:function e(a){return t.onViewProfile(a,{type:At.members,id:r.id})},renderMenu:function e(a){return t.renderListItemOptionsMenu({menuProps:a,id:r.id,type:At.members})},customProps:{key:r.id,"data-qa-user-group-details-members-list-item":true,"data-qa-user-group-details-members-list-item-id":r.id}};return v.a.createElement(er,s,v.a.createElement("div",{className:"full_width"},v.a.createElement(F["a"],{id:r.id,size:"medium",showTooltip:false,forcedPrimary:"real_name",showPresence:false,showStatus:false,"data-qa-user-group-details-members-list-item-member":true})))}},{key:"renderChannelItem",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.userGroupIsEditable();var n=_()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":a});var i=r.purpose?v.a.createElement("div",{className:"p-user_group_details__channel_purpose"},r.purpose.value):null;var s={className:n,isContextButtonVisible:a,onClick:function e(a){return t.onViewProfile(a,{type:At.channels,id:r.id})},renderMenu:function e(a){return t.renderListItemOptionsMenu({menuProps:a,id:r.id,type:At.channels})},customProps:{key:r.id,"data-qa-user-group-details-channels-list-item":true,"data-qa-user-group-details-channels-list-item-id":r.id}};return v.a.createElement(er,s,v.a.createElement("div",{className:"p-user_group_details__list_item_info"},v.a.createElement(L["a"],{channel:r,className:"bold cursor_pointer"}),i))}},{key:"renderMembersList",value:function e(){var t=this;var r=this.props.userGroupMembers;if(!r||Object(O["isEmpty"])(r))return this.renderEmptyMemberState();this.memberListKeys=Object(O["map"])(r,"id");return v.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":true},v.a.createElement(k["a"],null,function(e){var a=e.width,n=e.height;return v.a.createElement(G["a"],{width:a,height:n,keys:t.memberListKeys,rowRenderer:function e(a){return t.renderMemberItem(r[a])}})}))}},{key:"renderChannelsList",value:function e(){var t=this;var r=this.props.userGroupDefaultChannels;if(!r||Object(O["isEmpty"])(r))return this.renderEmptyChannelState();this.channelListKeys=Object(O["map"])(r,"id");return v.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":true},v.a.createElement(k["a"],null,function(e){var a=e.width,n=e.height;return v.a.createElement(G["a"],{width:a,height:n,keys:t.channelListKeys,rowRenderer:function e(a){return t.renderChannelItem(r[a])}})}))}},{key:"renderEmptyMemberState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.userGroupIsEditable()?v.a.createElement(B["d"],{type:"outline",size:"small",onClick:this.onAddMembers},Rt.t("Add Members")):null;return v.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":true,"data-qa-user-group-details-empty-list-type":At.members},v.a.createElement("div",{className:"p-user_group_details__empty_list_header"},Rt.t("No members")),t)}},{key:"renderEmptyChannelState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.userGroupIsEditable()?v.a.createElement(B["d"],{type:"outline",size:"small",onClick:this.onAddChannels},Rt.t("Add Default Channels")):null;return v.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":true,"data-qa-user-group-details-empty-list-type":At.channels},v.a.createElement("div",{className:"p-user_group_details__empty_list_header"},Rt.t("No default channels")),v.a.createElement("div",{className:"p-user_group_details__empty_list_subtext"},Rt.t("All members of a user group are automatically added to its default channels.")),t)}},{key:"renderConfirmationDialog",value:function e(t){var r=t.action,a=t.onSubmit,n=t.id;var i=this.props.groupId;return v.a.createElement(Kt,{action:r,onSubmit:a,id:n,groupId:i})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return v.a.createElement(or,{groupId:t})}},{key:"renderEditDetailsDialog",value:function e(){var t=this.props.groupId;return v.a.createElement(st,{userGroupId:t})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.userGroup;var r=_()("p-user_group__content",{"p-user_group__content--legacy":!Object(M["a"])()});return v.a.createElement("div",{className:"full_height"},v.a.createElement(ht,{view:lt.details}),v.a.createElement("div",{className:r},v.a.createElement("div",{className:"p-user_group_details","data-qa-user-group-details":true,"data-qa-user-group-details-id":t.id},this.renderHeader(),this.renderActions(),this.renderTabs())))}}]);return t}(f["PureComponent"]);Dt.displayName="UserGroupDetails";Dt.defaultProps=Pt;var Ft=function e(t,r){var a=r.groupId;var n=Object(w["getUserGroupById"])(t,a);var i=Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups");if(Object(A["p"])(n))return{userGroup:n,featureSonicUserGroups:i};var s=Object(A["g"])(n);var o=Object(O["map"])(s,function(e){return Object(S["getMemberById"])(t,e)});var l=Object(A["d"])(n);var c=Object(O["map"])(l,function(e){return Object(C["getChannelById"])(t,e)});return{userGroup:n,featureSonicUserGroups:i,userGroupMembers:o,userGroupDefaultChannels:c,canEditUserGroups:function e(){return Object(A["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(A["b"])(t)}}};var Lt=function e(t,r){var a=r.groupId;return{openModal:function e(){return t(j["openModal"].apply(void 0,arguments))},fetchUserGroupMembers:function e(){return t(Object(w["fetchAndUpsertUserGroupMembers"])({groupId:a}))},removeMember:function e(r){return t(Object(w["removeUserGroupMember"])({groupId:a,memberId:r}))},removeChannel:function e(r){return t(Object(w["removeUserGroupChannel"])({groupId:a,channelId:r}))},onChannelSwitch:function e(r){return t(Object(N["a"])({id:r}))},openUserGroupList:function e(){return t(Object(T["i"])())},enqueueToast:function e(){return t(I["enqueueToast"].apply(void 0,arguments))}}};var Bt=Object(y["connect"])(Ft,Lt)(Dt);var Ut=r(201);var qt=r(160);var Gt=new P["b"]("user_groups");var Ht={disable_group:"disable_group",remove_member:"remove_member",remove_channel:"remove_channel"};var Wt={action:b["b"].oneOf(Object(O["values"])(Ht)).isRequired,onSubmit:b["b"].func.isRequired,label:b["b"].string,groupName:b["b"].string,featureSonicUserGroups:b["b"].bool};var Vt={label:"",groupName:"",featureSonicUserGroups:false};var zt=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGo=r.onGo.bind(r);return r}u()(t,[{key:"onGo",value:function e(){return this.props.onSubmit()}},{key:"getTitle",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,r=t.action,a=t.groupName;switch(r){case"disable_group":return Gt.t("Deactivate {groupName}?",{groupName:a});case"remove_member":return Gt.t("Remove from group?");case"remove_channel":return Gt.t("Remove default channel?");default:}return""}},{key:"getButtonText",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props.action;switch(t){case"disable_group":return Gt.t("Deactivate");case"remove_member":case"remove_channel":return Gt.t("Remove");default:}return""}},{key:"getDialogBody",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,r=t.groupName,a=t.label,n=t.action;switch(n){case"disable_group":return Gt.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:r});case"remove_member":return Gt.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:a,groupName:r});case"remove_channel":return Gt.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:a,groupName:r});default:}return""}},{key:"render",value:function e(){return v.a.createElement(K["a"],{showHeader:true,showGoButton:true,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},v.a.createElement("p",null,this.getDialogBody()))}}]);return t}(f["Component"]);zt.displayName="UserGroupConfirmationDialog";zt.defaultProps=Vt;var Qt=function e(t,r){var a=r.id,n=r.groupId;var i="";var s=Object(w["getUserGroupById"])(t,n);if(Object(qt["a"])(a)){var o=Object(C["getChannelById"])(t,a);i=Object(ve["getDisplayName"])(o)}else if(Object(Ut["a"])(a)){var l=Object(S["getMemberById"])(t,a);i=Object(De["getMemberRealName"])(l)}return{groupName:Object(A["h"])(s),label:i,featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Kt=Object(y["connect"])(Qt)(zt);var Yt=r(826);var Jt=r(2347);var Zt={renderMenu:b["b"].func.isRequired,className:b["b"].string,children:b["b"].node,isContextButtonVisible:b["b"].bool,onClick:b["b"].func.isRequired,customProps:b["b"].object};var Xt={className:"",children:"",isContextButtonVisible:false,customProps:{}};var $t=function(e){h()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"renderContextButton",value:function e(){var t=this.props,r=t.isContextButtonVisible,a=t.renderMenu;if(!r)return null;var n={icon:"ellipsis",tooltip:"",onClick:a,menuProps:{renderMenu:a,width:"auto"}};return v.a.createElement(Yt["b"],{customClasses:"p-user_group_base_row__list_item_option"},v.a.createElement(Yt["a"],n))}},{key:"render",value:function e(){var t=this.props,r=t.className,a=t.onClick,i=t.customProps,s=t.children;var o=_()("p-user_group_base_row__list_item",r);return v.a.createElement("div",{className:"p-user_group_base_row"},v.a.createElement(B["c"],n()({onClick:a,className:o},i),s),this.renderContextButton())}}]);return t}(f["PureComponent"]);$t.displayName="UserGroupBaseRow";$t.defaultProps=Xt;var er=$t;var tr=new P["b"]("user_groups");var rr={featureSonicUserGroups:b["b"].bool,groupId:b["b"].string.isRequired,bulkUpsertUserGroupMembers:b["b"].func.isRequired,enqueueToast:b["b"].func.isRequired};var ar={featureSonicUserGroups:false,userGroupMemberIds:[]};var nr=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={searchResultMode:false};Object(O["bindAll"])(r,["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef"]);r.userGroupMemberManagementRef=null;return r}u()(t,[{key:"onSave",value:function e(){if(!this.userGroupMemberManagementRef)return false;var t=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!t)return false;var r=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(r).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}},{key:"onUpsertSuccess",value:function e(){if(!this.props.featureSonicUserGroups)return;this.props.enqueueToast({element:v.a.createElement(D["b"],null,tr.t("Group has been updated."))})}},{key:"onUpsertFailure",value:function e(t){Object(x["b"])().error("Error updating user group members: "+JSON.stringify(t))}},{key:"onToggleSearchResultsMode",value:function e(){this.setState(function(e){return{searchResultMode:!e.searchResultMode}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=tr.t("Edit members");return v.a.createElement(K["a"],{showHeader:true,showGoButton:true,showFooter:true,bodyClassName:"p-user_group_member_management__dialog_body",title:t,contentLabel:t,goButtonText:tr.t("Save"),onGo:this.onSave,goOnEnterPressed:false},v.a.createElement(Qe,{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef}))}}]);return t}(f["PureComponent"]);nr.displayName="UserGroupMemberManagementDialog";nr.defaultProps=ar;var ir=function e(t){return{featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var sr=function e(t,r){var a=r.groupId;return{bulkUpsertUserGroupMembers:function e(r){return t(Object(w["bulkUpsertUserGroupMembers"])({groupId:a,users:r}))},enqueueToast:function e(){return t(I["enqueueToast"].apply(void 0,arguments))}}};var or=Object(y["connect"])(ir,sr)(nr);var lr=r(650);var cr=r(616);var ur=r(3274);var dr=r(1437);var pr=r(2107);var mr={userGroups:b["b"].object,featureSonicUserGroups:b["b"].bool,featureLazyUserGroups:b["b"].bool,fetchAndUpsertUserGroups:b["b"].func,openModal:b["b"].func,searchTerm:b["b"].string,searchQuery:b["b"].string,onSearchInputChange:b["b"].func,onClearSearch:b["b"].func,setSearchQuery:b["b"].func};var hr={userGroups:{},featureSonicUserGroups:false,featureLazyUserGroups:false,fetchAndUpsertUserGroups:O["noop"],openModal:O["noop"],searchTerm:"",searchQuery:"",onSearchInputChange:O["noop"],onClearSearch:O["noop"],setSearchQuery:O["noop"]};var fr=new P["b"]("user_groups");var vr=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["onCreateUserGroup","onSearchInputChange","renderRow"]);return r}u()(t,[{key:"componentDidMount",value:function e(){this.props.featureLazyUserGroups||this.props.fetchAndUpsertUserGroups()}},{key:"onCreateUserGroup",value:function e(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"onSearchInputChange",value:function e(t){if(this.props.featureLazyUserGroups)return this.props.setSearchQuery(t.target.value);return this.props.onSearchInputChange(t)}},{key:"onClearSearch",value:function e(t){if(this.props.featureLazyUserGroups)return this.props.setSearchQuery("");return this.props.onClearSearch(t)}},{key:"getSortedResults",value:function e(t){return Object(O["sortBy"])(t,function(e){var t=Object(A["h"])(e);return t.toLocaleLowerCase()})}},{key:"getSearchResults",value:function e(t,r){var a=this;if(!r)return Object.values(t);return Object(O["filter"])(t,function(e){if(!e)return false;var t=Object(A["h"])(e);var n=Object(A["f"])(e)||"";var i=Object(A["e"])(e)||"";if(a.checkForMatch(t,r))return true;if(a.checkForMatch(n,r))return true;if(a.checkForMatch(i,r,false))return true;return false})}},{key:"getGroupedUserGroups",value:function e(t){var r=Object(O["groupBy"])(t,function(e){return Object(A["q"])(e)?"active":"inactive"});r.active=r.active||[];r.inactive=r.inactive||[];return r.active.concat(r.inactive)}},{key:"checkForMatch",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.prepStringForSearch(t,a).includes(this.prepStringForSearch(r,a))}},{key:"prepStringForSearch",value:function e(t,r){if(!t)return"";var a=t.toLocaleLowerCase();r&&(a=a.replace(/[\s-_]/g,""));return Object(P["a"])(a)}},{key:"renderSearch",value:function e(){var t=void 0;t=this.props.featureLazyUserGroups?this.props.searchQuery:this.props.searchTerm;if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",{className:"p-user_group_list__search"},v.a.createElement(Fe["a"],{value:t,onChange:this.onSearchInputChange,placeholder:fr.t("Find by name..."),icon:"search"}))}},{key:"renderRow",value:function e(t){var r=this.keys[t];return v.a.createElement(dr["a"],{id:r})}},{key:"renderEmptyListView",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=void 0;var r=void 0;if(Object(H["a"])()){t=fr.t("Organize your team");r=v.a.createElement(B["d"],{type:"outline",size:"small",onClick:this.onCreateUserGroup},fr.t("Create a User Group"))}else t=fr.t("No user groups yet");return v.a.createElement("div",{className:"p-user_group_list__empty_list"},v.a.createElement("div",{className:"p-user_group_list__empty_list_header"},t),v.a.createElement("div",{className:"p-user_group_list__empty_list_subtext"},fr.t("User groups make it easy to get the attention of many members at once.")),r)}},{key:"renderEmptySearchResults",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",{className:"p-user_group_list__empty_search_results"},v.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},fr.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.props.searchTerm})),v.a.createElement(B["d"],{type:"outline",size:"small",onClick:this.props.onClearSearch},fr.t("Clear Search")))}},{key:"renderSearchableList",value:function e(){return v.a.createElement(ur["a"],{onCreateUserGroup:this.onCreateUserGroup,includeDeactivated:true})}},{key:"renderGroupList",value:function e(){var t=this;var r=this.getSearchResults(this.props.userGroups,this.props.searchTerm);if(Object(O["isEmpty"])(r))return this.renderEmptySearchResults();var a=this.getSortedResults(r);var n=this.getGroupedUserGroups(a);this.keys=Object(O["map"])(n,"id");var i=59;return v.a.createElement("div",{className:"p-user_group_list__groups"},v.a.createElement(k["a"],null,function(e){var r=e.width,a=e.height;return v.a.createElement(G["a"],{width:r,height:a-i,keys:t.keys,rowRenderer:t.renderRow})}))}},{key:"renderContent",value:function e(){if(this.props.featureLazyUserGroups)return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:"p-user_groups_flexpane"},this.renderSearch(),this.renderSearchableList()));var t=this.props,r=t.featureSonicUserGroups,a=t.userGroups;if(!r)return null;var n=Object(O["isEmpty"])(a)?this.renderEmptyListView():v.a.createElement(v.a.Fragment,null,this.renderSearch(),this.renderGroupList());var i=_()("p-user_group__content",{"p-user_group__content--legacy":!Object(M["a"])()});return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:i},v.a.createElement("div",{className:"p-user_group_list"},n)))}},{key:"renderCreateEditDialog",value:function e(){return v.a.createElement(st,null)}},{key:"render",value:function e(){var t=this.props.featureSonicUserGroups;if(!t)return null;var r=this.renderContent();return v.a.createElement(v.a.Fragment,null,v.a.createElement(ht,{view:lt.list}),r)}}]);return t}(f["PureComponent"]);vr.displayName="UserGroupList";vr.defaultProps=hr;var br=function e(t,r){var a=Object(w["getAllUserGroups"])(t);var i=Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups");var s=Object(E["isFeatureEnabled"])(t,"feature_lazy_user_groups");return n()({userGroups:a,searchQuery:Object(cr["getSearchQuery"])(t),featureSonicUserGroups:i,featureLazyUserGroups:s},r)};var gr={fetchAndUpsertUserGroups:w["fetchAndUpsertUserGroups"],openModal:j["openModal"],setSearchQuery:cr["setSearchQuery"]};var _r=Object(y["connect"])(br,gr)(vr);var yr=r(2353);var kr={groupId:b["b"].string,featureSonicUserGroups:b["b"].bool,userGroupMembers:b["b"].array};var Or={groupId:null,featureSonicUserGroups:false,openModal:O["noop"],userGroupMembers:[],openUserGroupList:O["noop"]};var Er=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={newMembers:[],timeoutId:null,searchTerm:""};Object(O["bindAll"])(r,["onSearchInputChange","onClearSearch"]);return r}u()(t,[{key:"componentDidUpdate",value:function e(t){var r=this;var a=[];t.userGroupMembers.length&&!Object(O["isEqual"])(t.userGroupMembers,this.props.userGroupMembers)&&(a=Object(O["differenceBy"])(this.props.userGroupMembers,t.userGroupMembers,"id"));if(a.length){this.setState(function(){return{newMembers:a}});var n=this.state.timeoutId;n&&clearTimeout(n);var i=setTimeout(function(){r.setState(function(){return{newMembers:[]}})},1050);this.setState(function(){return{timeoutId:i}})}}},{key:"onSearchInputChange",value:function e(t){var r=t.target.value;this.setState(function(){return{searchTerm:r}})}},{key:"onClearSearch",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.groupId;var r=this.state,a=r.newMembers,n=r.searchTerm;if(t)return v.a.createElement(Bt,{groupId:t,newMembers:a});return v.a.createElement(_r,{searchTerm:n,onSearchInputChange:this.onSearchInputChange,onClearSearch:this.onClearSearch})}}]);return t}(f["PureComponent"]);Er.displayName="UserGroupsFlexpane";Er.defaultProps=Or;var wr=function e(t){var r=void 0;r=Object(E["isFeatureEnabled"])(t,"feature_remove_flexpane_store")?Object(ft["getFlexParams"])(t)[0]:Object(lr["getFlexpaneState"])(t).flexExtra;var a=Object(w["getUserGroupById"])(t,r);var n=Object(A["g"])(a);var i=Object(O["map"])(n,function(e){return Object(S["getMemberById"])(t,e)});return{groupId:r,userGroupMembers:i,featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Cr=Object(y["connect"])(wr)(Er);r.d(t,false,function(){return Bt});r.d(t,"d",function(){return st});r.d(t,"b",function(){return Kt});r.d(t,"c",function(){return Et});r.d(t,"a",function(){return er});r.d(t,"e",function(){return or});r.d(t,false,function(){return we});var Sr=t["f"]=Cr},,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(104);var l=r.n(o);var c=r(14);var u=r(2);var d=r.n(u);var p=r(139);var m=r(33);var h=r(5);var f=r.n(h);var v=r(7);var b=r.n(v);var g=r(6);var _=r.n(g);var y=r(8);var k=r.n(y);var O=r(129);var E=r(15);var w=r.n(E);var C=r(50);var S=r(993);var j=r(164);var I=r(48);var T=r(10);var N=r(245);var A=r(161);var R=r(408);var M=r(344);var P=r(92);var x=r(20);var D=r(803);var F=r(77);var L=r(94);var B=r(1160);var U=r(135);var q=r(12);var G=r(18);var H=r(54);var W=r(337);var V=r(41);var z=r(103);var Q=r(227);var K=r(88);var Y=r(213);var J=r(2080);var Z=new T["b"]("connected_workspaces");var X={currentTeam:O["b"].object.isRequired,workspace:O["b"].object.isRequired,workspaceChannels:O["b"].array.isRequired,onClose:O["b"].func.isRequired,openModal:O["b"].func,submitDisconnectSharedTeam:O["b"].func,clogger:O["b"].object.isRequired};var $={currentTeam:{},workspace:{},workspaceChannels:[],onClose:d.a.noop,openModal:d.a.noop,submitDisconnectSharedTeam:d.a.noop};var ee="SHARED_CHANNELS_MANAGE_MODAL_ACTION";var te=function(e){k()(t,e);function t(e){f()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isCheckboxChecked:false};r.renderActionMenu=r.renderActionMenu.bind(r);r.showDialog=r.showDialog.bind(r);r.handleCheckboxChange=r.handleCheckboxChange.bind(r);return r}_()(t,[{key:"componentDidUpdate",value:function e(t,r){this.dialog&&r.isCheckboxChecked!==this.state.isCheckboxChecked&&this.dialog.render({goButtonIsDisabled:!this.state.isCheckboxChecked,goOnEnterPressed:this.state.isCheckboxChecked})}},{key:"calculateChannelNumbers",value:function e(){var t=this.props.workspaceChannels;var r=d.a.partition(t,function(e){return!e||Object(q["isPrivateChannel"])(e)});if(!r)return{numTotalChannels:0,numPrivateChannels:0};var a=r[1].length;var n=r[0].length;return{numPublicChannels:a,numPrivateChannels:n}}},{key:"createChannelString",value:function e(t){var r=t.numPublicChannels,a=t.numPrivateChannels;var n=Z.t("{count, plural, =1 {# channel} other {# channels}}",{count:r+a});var i=a?Z.t(" ({count} private)",{count:a}):"";return""+n+i}},{key:"handleCheckboxChange",value:function e(){this.setState(function(e){return{isCheckboxChecked:!e.isCheckboxChecked}})}},{key:"showDialog",value:function e(){this.dialog=this.props.openModal({element:this.renderDialog()})}},{key:"renderDialog",value:function e(){var t=this;var r=this.props,a=r.currentTeam,n=r.onClose,i=r.clogger;var o=this.props.workspace,l=o.name,c=o.id;var u=Z.rt("<strong>This cannot be undone</strong>. Please double-check the info below.");var d=this.calculateChannelNumbers();var p=Z.t("{count, plural, =1 {# public channel} other {# public channels}}",{count:d.numPublicChannels});var m=Z.t("{count, plural, =1 {# private channel} other {# private channels}}",{count:d.numPrivateChannels});return s.a.createElement(z["a"],{title:Z.t("Stop sharing all channels with {workspaceName}?",{workspaceName:l}),goButtonText:Z.t("Stop Sharing"),goButtonType:"danger",onCancel:function e(){i.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_CANCEL_BTN"})},onGo:function e(){i.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_CONFIRM_BTN"});t.props.submitDisconnectSharedTeam({targetTeamId:c}).then(n)},truncateTitle:false,goButtonIsDisabled:!this.state.isCheckboxChecked,goOnEnterPressed:this.state.isCheckboxChecked},s.a.createElement(Y["a"],{level:"error"},u),s.a.createElement("p",null,s.a.createElement("strong",null,Z.t("What will happen:"))),s.a.createElement("ul",null,s.a.createElement("li",null,Z.t("{currentTeamName} and {targetWorkspaceName} will keep separate copies of each channel.",{currentTeamName:Object(I["getTeamDisplayName"])(a),targetWorkspaceName:l})),s.a.createElement("li",null,Z.t("Each workspace can continue using their copies.")),s.a.createElement("li",null,Z.t("You won\u2019t be able to reshare any of these channels."))),s.a.createElement("p",null,s.a.createElement("strong",null,Z.t("You\u2019re about to stop sharing:"))),s.a.createElement("ul",null,d.numPublicChannels?s.a.createElement("li",null,p):"",d.numPrivateChannels?s.a.createElement("li",null,m):"",s.a.createElement("li",null,Z.t("All direct and group messages"))),s.a.createElement(K["a"],{text:Z.rt("<strong>Yes, stop sharing all channels with {targetWorkspaceName}</strong>",{targetWorkspaceName:l}),htmlFor:"confirmStopSharingAll",type:"inline",cursor:"pointer"},s.a.createElement(Q["a"],{id:"confirmStopSharingAll",isRequired:true,onChange:this.handleCheckboxChange})))}},{key:"renderActionMenu",value:function e(t){var r=this;var a=this.props,i=a.workspaceChannels,o=a.clogger;var l=this.props.workspace,c=l.id,u=l.domain;var d=Z.t("Stop sharing {count, plural, =1 {this channel} other {these channels}}",{count:i.length});return s.a.createElement(H["f"],n()({},t,{width:"auto"}),s.a.createElement(H["b"],{label:Z.t("View shared channels"),onSelected:function e(){Object(B["c"])({show_which_channels:"ext_shared_team_"+c,onBack:B["b"]});o.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_VIEW_CHANNELS_BTN"});r.props.onClose()}}),s.a.createElement(H["b"],{label:Z.t("Share a new channel"),onSelected:function e(){Object(D["c"])({team_url:u,element:"SHARED_CHANNELS_MANAGE_MODAL_SHARE_NEW_BTN"});o.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_SHARE_NEW_BTN"});r.props.onClose()}}),s.a.createElement(H["b"],{label:d,danger:true,onSelected:function e(){o.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_BTN"});r.showDialog()}}))}},{key:"render",value:function e(){var t=this;var r=this.props.workspace,a=r.id,n=r.name,i=r.domain,o=r.icon;var l=this.props.clogger;var c=this.createChannelString(this.calculateChannelNumbers());return s.a.createElement("div",{className:"p-connected_workspaces_row"},s.a.createElement("div",{className:"p-connected_workspaces_row__item"},s.a.createElement(W["b"],{teamName:n,size:35,icon:o,className:"p-connected_workspaces_row__workspace_icon margin_right_75"}),s.a.createElement("div",{className:"p-connected_workspaces_row__workspace_info"},s.a.createElement("div",{className:"p-connected_workspaces_row__workspace_name overflow_ellipsis"},n),s.a.createElement("div",{className:"p-connected_workspaces_row__workspace_domain overflow_ellipsis"},i+".slack.com"))),s.a.createElement("div",{className:"p-connected_workspaces_row__item"},s.a.createElement(V["d"],{tip:Z.t("View channels"),position:"top"},s.a.createElement(x["c"],{className:"p-connected_workspaces_row__channels overflow_ellipsis",ariaLabel:Z.t("View {channelCountString} in {name}",{channelCountString:c,name:n}),onClick:function e(){Object(B["c"])({show_which_channels:"ext_shared_team_"+a,onBack:B["b"]});l.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_CHANNEL_COUNT_BTN"});t.props.onClose()}},c))),s.a.createElement("div",{className:"p-connected_workspaces_row__item"},s.a.createElement("div",{className:"p-connected_workspaces_row__actions"},s.a.createElement(H["e"],{renderMenu:this.renderActionMenu,position:"bottom-right",offsetX:20},s.a.createElement(x["c"],{ariaLabel:Z.t("More options for {name}",{name:n})},s.a.createElement(G["a"],{type:"ellipsis"}))))))}}]);return t}(i["Component"]);te.displayName="ConnectedWorkspacesRow";te.defaultProps=$;var re=function e(t,r){var a=d.a.map(r.workspace.channels,function(e){return Object(L["f"])(t,e)});return{workspaceChannels:a,currentTeam:Object(C["getCurrentTeam"])(t),clogger:Object(j["a"])({state:t})}};var ae={openModal:F["openModal"],submitDisconnectSharedTeam:U["E"]};var ne=Object(c["connect"])(re,ae)(te);var ie=new T["b"]("connected_workspaces");var se={currentTeam:O["b"].object.isRequired,onBack:O["b"].func,onClose:O["b"].func.isRequired,referringUiElement:O["b"].string,fetchAndUpsertExternalTeams:O["b"].func,clogger:O["b"].object.isRequired};var oe={currentTeam:{},onBack:null,onClose:d.a.noop,referringUiElement:null,fetchAndUpsertExternalTeams:d.a.noop};var le="SHARED_CHANNELS_MANAGE_MODAL_OPEN";var ce=function(e){k()(t,e);_()(t,null,[{key:"filterWorkspaces",value:function e(t,r){if(!t||!t.trim())return r;var a=d.a.toLower(t);var n=[];for(var i=0;i<r.length;i+=1){var s=d.a.toLower(r[i].name);var o=r[i].domain;if(s&&(-1!==s.indexOf(a)||-1!==o.indexOf(a))){n.push(r[i]);if(n.length===r.length)break}}return n}}]);function t(e){f()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderConnectedWorkspacesRow=r.renderConnectedWorkspacesRow.bind(r);r.handleSearchInputChange=r.handleSearchInputChange.bind(r);r.state={searchQuery:"",isLoading:true,workspaces:[]};return r}_()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.props,a=r.referringUiElement,n=r.clogger;var i={event:le};a&&(i.element=a);n.trackClickWithContext(i);this.props.fetchAndUpsertExternalTeams().then(function(e){t.setState(function(){return{isLoading:false,workspaces:e}})})}},{key:"handleSearchInputChange",value:function e(t){this.setState(function(){return{searchQuery:t.target.value}})}},{key:"renderSearchInput",value:function e(){if(this.state.isLoading)return null;return s.a.createElement(A["a"],{enabled:["feature_esc_connected_workspaces_search"]},s.a.createElement(M["a"],{className:"margin_top_150",placeholder:ie.t("Search by workspace..."),icon:"search",autoFocus:true,onChange:this.handleSearchInputChange}))}},{key:"renderConnectedWorkspacesRow",value:function e(t){if(!t.channels.length)return null;var r=this.props.onClose;return s.a.createElement(ne,{workspace:t,key:t.id,onClose:r})}},{key:"renderNoConnectedWorkspacesState",value:function e(){var t=this;return s.a.createElement(A["a"],{enabled:["feature_esc_connected_workspaces_search"]},s.a.createElement("div",{className:"p-connected_workspaces__empty"},s.a.createElement("span",{className:"p-connected_workspaces__no_shared_channels"},ie.rt("Shared channels let you work with other companies and teams, from right inside Slack. <a>Learn more</a>",null,function(e){var t=e.key,r=e.text;return s.a.createElement("a",{key:t,href:"https://get.slack.help/hc/articles/115004151183"},r)})),s.a.createElement(x["d"],{type:"outline",className:"margin_top_100",onClick:function e(){Object(D["c"])();t.props.onClose()}},ie.t("Create a Shared Channel"))))}},{key:"renderNoSearchResultsState",value:function e(){return s.a.createElement(A["a"],{enabled:["feature_esc_connected_workspaces_search"]},s.a.createElement("div",{className:"p-connected_workspaces__empty"},s.a.createElement("span",null,ie.rt("No matches found for <strong>{query}</strong>",{query:this.state.searchQuery}))))}},{key:"renderWorkspaces",value:function e(){var r=this.state,a=r.isLoading,n=r.searchQuery,i=r.workspaces;if(a)return null;if(!i.length)return this.renderNoConnectedWorkspacesState();var o=t.filterWorkspaces(n,i);if(!o.length)return this.renderNoSearchResultsState();var l=o.sort(function(e,t){return Object(N["a"])(e.name,t.name)});var c=l.map(this.renderConnectedWorkspacesRow);return s.a.createElement("div",null,s.a.createElement("div",{className:"p-connected_workspaces_row p-connected_workspaces_row--header"},s.a.createElement("div",{className:"p-connected_workspaces_row__item"},ie.t("Workspace")),s.a.createElement("div",{className:"p-connected_workspaces_row__item"},ie.t("Shared channels")),s.a.createElement("div",{className:"p-connected_workspaces_row__item"})),c)}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.currentTeam,n=r.onBack,i=r.onClose;var o=this.state.workspaces;var l=d.a.chain(o).filter(function(e){return e.channels.length>0}).size().value();var c=ie.rt("<strong>{currentTeamName}</strong> is currently sharing channels with {count, plural, =1 {<strong># other workspace</strong>.} other {<strong># other workspaces</strong>.}}",{currentTeamName:Object(I["getTeamDisplayName"])(a),count:l});var u=w()("p-connected_workspaces__list",{"p-connected_workspaces__list--loading":this.state.isLoading});return s.a.createElement(R["a"],{showBackButton:!!n,showCancelButton:false,showGoButton:false,onBack:function e(){t.props.onBack();t.props.onClose()},onCancel:i,modalClasses:"p-connected_workspaces_modal",title:ie.t("Manage shared channels")},s.a.createElement("div",{className:"p-connected_workspaces"},s.a.createElement("div",{className:"p-connected_workspaces__header"},s.a.createElement("div",{className:"p-connected_workspaces__header_description"},s.a.createElement(A["a"],{enabled:["feature_esc_connected_workspaces_search"]},o.length?c:ie.rt("Currently, <strong>{currentTeamName}</strong> isn\u2019t sharing any channels.",{currentTeamName:Object(I["getTeamDisplayName"])(a)})),s.a.createElement(A["a"],{disabled:["feature_esc_connected_workspaces_search"]},c))),this.renderSearchInput(),s.a.createElement("div",{className:u},s.a.createElement(P["a"],{className:"p-connected_workspaces__spinner",size:"jumbo"}),this.renderWorkspaces())))}}]);return t}(i["Component"]);ce.displayName="ConnectedWorkspaces";ce.defaultProps=oe;var ue=function e(t){return{currentTeam:Object(C["getCurrentTeam"])(t),clogger:Object(j["a"])({state:t})}};var de={fetchAndUpsertExternalTeams:S["a"]};var pe=Object(c["connect"])(ue,de)(ce);var me=pe;r.d(t,"a",function(){return he});r.d(t,"b",function(){return fe});var he=function e(t,r){var a=document.getElementById("connected_workspaces_dialog_mount_point");if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(m["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(a)})};Object(p["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(me,n()({},r,{onClose:o}))),a)};var fe=function e(t){l.a.unmountComponentAtNode(t)};var ve={mountConnectedWorkspaces:he,unmountConnectedWorkspaces:fe}},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(129);var h=r(1);var f=r.n(h);var v=r(2);var b=r(732);var g=r(2075);var _={action:m["b"].node};var y={action:null};var k=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){return f.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(h["PureComponent"]);k.displayName="ActionBarItem";k.defaultProps=y;var O=k;var E={title:m["b"].node.isRequired,actions:m["b"].array,"data-qa":m["b"].string};var w={actions:[],"data-qa":void 0};var C=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"renderActionItems",value:function e(){var t=this.props.actions;var r=Object(v["map"])(t,function(e,t){return f.a.createElement(O,{key:t,action:e})});return r}},{key:"render",value:function e(){return f.a.createElement("div",{className:"p-action_bar display_flex align_items_center justify_content_between sk_off_white_bg"},f.a.createElement("span",n()({},Object(b["a"])(this.props),{className:"p-action_bar_title black"}),this.props.title),f.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(h["PureComponent"]);C.displayName="ActionBar";C.defaultProps=w;var S=t["a"]=C},,,,,,,,,,function(e,t,r){(function(t){e.exports=t["EXIF"]=r(1955)}).call(this,r(49))},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(14);var h=r(129);var f=r(10);var v=r(2);var b=r.n(v);var g=r(54);var _=r(448);var y=r(889);var k=r(151);var O=r(12);var E=r(1011);var w=r(11);var C=r(21);var S=r(240);var j=r(760);var I=r(1164);var T=r(1445);var N=r(1001);var A=r(29);var R=r(164);var M=new f["b"]("do_not_disturb");var P={snoozeNotifications:h["b"].func.isRequired,currentChannel:h["b"].object,featureSonicDnd:h["b"].bool,featureBetterSnooze:h["b"].bool,featureGlobalNav:h["b"].bool,menuProps:h["b"].object,openDndDialog:h["b"].func,showCustomNewBadge:h["b"].bool,setUserPrefByApi:h["b"].func,clogger:h["b"].object};var x={currentChannel:{},featureSonicDnd:false,featureBetterSnooze:false,featureGlobalNav:false,menuProps:{},openDndDialog:v["noop"],showCustomNewBadge:true,setUserPrefByApi:v["noop"],clogger:{track:v["noop"]}};var D=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderSettingsMenuItem",value:function e(){var t=this.props,r=t.currentChannel,a=t.featureSonicDnd;if(!a)return null;if(!r.id||Object(O["isIm"])(r))return null;var n=p.a.createElement(k["a"],{channelId:r.id,iconProps:{inherit:true,align:"baseline"},inline:true});var i=M.rt("Settings for {name}\u2026",{name:p.a.createElement("strong",null,n),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return p.a.createElement(g["b"],{label:i,onSelected:function e(){return Object(I["a"])(r.id)}})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.menuProps,n=r.featureSonicDnd,i=r.featureBetterSnooze,s=r.featureGlobalNav,o=r.showCustomNewBadge,l=r.clogger;if(!n)return null;var c=void 0;var u=void 0;var d=void 0;var m=void 0;var h=void 0;var f=void 0;if(i){c=M.t("Custom\u2026");u=M.rt("Custom\u2026 {new_badge}",{new_badge:p.a.createElement(y["a"],{className:"p-dnd_menu__new_pill"},M.t("NEW"))});d=M.t("Until tomorrow");m=M.t("Until next week");h=M.t("30 minutes");f=M.t("Pause notifications")}return p.a.createElement(g["f"],a,p.a.createElement(g["c"],{label:i?f:M.t("Snooze notifications")}),!i&&p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:M.t("20 minutes"),onSelected:function e(){var r=20;t.props.snoozeNotifications({duration:r});l.track(A["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:A["h"].DURATION_20_MINUTES,dnd_snooze_type:A["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_20"}),i&&p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:h,onSelected:function e(){var r=30;t.props.snoozeNotifications({duration:r});l.track(A["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:A["h"].DURATION_30_MINUTES,dnd_snooze_type:A["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_30"}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:M.t("1 hour"),onSelected:function e(){var r=60;t.props.snoozeNotifications({duration:r});l.track(A["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:A["h"].DURATION_1_HOUR,dnd_snooze_type:A["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_60"}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:M.t("2 hours"),onSelected:function e(){var r=120;t.props.snoozeNotifications({duration:r});l.track(A["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:A["h"].DURATION_2_HOURS,dnd_snooze_type:A["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_120"}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:M.t("4 hours"),onSelected:function e(){var r=240;t.props.snoozeNotifications({duration:r});l.track(A["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:A["h"].DURATION_4_HOURS,dnd_snooze_type:A["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_240"}),!i&&p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:M.t("8 hours"),onSelected:function e(){var r=480;t.props.snoozeNotifications({duration:r});l.track(A["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:A["h"].DURATION_8_HOURS,dnd_snooze_type:A["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_480"}),!i&&p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:M.t("24 hours"),onSelected:function e(){var r=1440;t.props.snoozeNotifications({duration:r});l.track(A["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:A["h"].DURATION_24_HOURS,dnd_snooze_type:A["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_1440"}),i&&p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:d,onSelected:function e(){var r=Object(N["d"])();t.props.snoozeNotifications({duration:r});l.track(A["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:A["h"].DURATION_TOMORROW,dnd_snooze_type:A["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_tomorrow"}),i&&p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:m,onSelected:function e(){var r=Object(N["c"])();t.props.snoozeNotifications({duration:r});l.track(A["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:A["h"].DURATION_NEXT_WEEK,dnd_snooze_type:A["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_next_week"}),i&&p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:o?u:c,onSelected:function e(){t.props.openDndDialog();t.props.setUserPrefByApi({pref:"dnd_custom_new_badge_seen",value:true});l.track(A["j"].DND_OPEN_CUSTOM_SNOOZE_DIALOG)},"data-qa":"snooze_btn_custom"}),p.a.createElement(g["d"],null),p.a.createElement(g["b"],{label:M.t("Do Not Disturb schedule\u2026",{fallbackHash:"b6cf7bdcaf556e9e48b6518df7714995aaae446b"}),onSelected:function e(){return Object(j["a"])("notifications","#prefs_dnd")}}),!s&&p.a.createElement(g["d"],null),!s&&this.renderSettingsMenuItem(),!s&&p.a.createElement(g["b"],{label:M.t("Your notification preferences\u2026",{fallbackHash:"4fa8d4f0498a550e3cf075dc9c810f7b6f771e65"}),onSelected:function e(){return Object(j["a"])("notifications")}}))}}]);return t}(d["PureComponent"]);D.displayName="DndDisabledMenu";D.defaultProps=x;var F=function e(t){return{featureBetterSnooze:Object(w["isFeatureEnabled"])(t,"feature_better_snooze"),featureGlobalNav:Object(w["isFeatureEnabled"])(t,"feature_global_nav"),showCustomNewBadge:!Object(C["getUserPref"])(t,"dnd_custom_new_badge_seen"),clogger:Object(R["a"])({state:t})}};var L={snoozeNotifications:E["e"],openDndDialog:T["a"],setUserPrefByApi:S["c"]};t["a"]=Object(m["connect"])(F,L)(D)},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(48);var f={additionalItemCopy:d["b"].string,item:d["b"].object};var v={additionalItemCopy:"",item:{}};var b=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.additionalItemCopy,a=t.item;var n=a.team.icon.image_44+" 1x, "+a.team.icon.image_88+" 2x";return m.a.createElement("div",{className:"c-lazy_filter_select__team_item",key:"team-list-item-"+a.id},m.a.createElement("img",{alt:"",className:"c-lazy_filter_select__team_list_icon",src:a.team.icon.image_44,srcSet:n}),m.a.createElement("div",{className:"c-lazy_filter_select__team_token_name"},Object(h["getTeamDisplayName"])(a.team)," ",r&&m.a.createElement("span",null," - ",r)))}}]);return t}(p["PureComponent"]);b.displayName="LazyFilterSelectTeamListItem";t["a"]=b;b.defaultProps=v},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(48);var f={additionalItemCopy:d["b"].string,item:d["b"].object};var v={additionalItemCopy:"",item:{}};var b=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.additionalItemCopy,a=t.item;return m.a.createElement("div",{className:"c-lazy_filter_select__team_token",key:"team-token-"+a.id},m.a.createElement("img",{alt:"",className:"c-lazy_filter_select__team_token_icon",src:a.team.icon.image_44}),m.a.createElement("div",{className:"c-lazy_filter_select__team_token_name"},Object(h["getTeamDisplayName"])(a.team)," ",r&&m.a.createElement("span",null," - ",r)))}}]);return t}(p["PureComponent"]);b.displayName="LazyFilterSelectTeamToken";t["a"]=b;b.defaultProps=v},,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(14);var h=r(129);var f=r(1);var v=r.n(f);var b=r(15);var g=r.n(b);var _=r(2);var y=r.n(_);var k=r(11);var O=r(19);var E=r(21);var w=r(12);var C=r(350);var S=r(18);var j=r(10);var I=r(707);var T=r(41);var N=r(20);var A=r(88);var R=r(227);var M=r(660);var P=r(338);var x=r(118);var D=r(760);var F=r(102);var L=r(2193);var B=r.n(L);var U=new j["b"]("prefs");var q={channelType:h["b"].string,isGeneralChannel:h["b"].bool,disableIgnoreAtChannelOption:h["b"].bool,notificationsEnabled:h["b"].bool,notificationDisabledType:h["b"].oneOf(["not_allowed","not_yet_allowed","impossible",null]),onClose:h["b"].func,desktop:h["b"].string,mobile:h["b"].string,muted:h["b"].bool,suppressAtChannel:h["b"].bool,channelId:h["b"].string.isRequired,featureTurnMpdmNotifsOn:h["b"].bool.isRequired,setChannelNotificationOverrideAndCallApi:h["b"].func.isRequired};var G={channelType:"channel",isGeneralChannel:false,disableIgnoreAtChannelOption:false,notificationsEnabled:true,notificationDisabledType:null,onClose:y.a,desktop:"mentions_dms",mobile:"mentions_dms",muted:false,suppressAtChannel:false};var H=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,n=a.desktop,i=a.mobile;r.state={shouldUseDifferentSettingsForMobile:n!==i};r.onMuteCheckboxClick=r.onMuteCheckboxClick.bind(r);r.onSuppressAtChannelClick=r.onSuppressAtChannelClick.bind(r);r.onDesktopEverythingRadioClick=r.onDesktopEverythingRadioClick.bind(r);r.onDesktopMentionsDmsRadioClick=r.onDesktopMentionsDmsRadioClick.bind(r);r.onDesktopNothingRadioClick=r.onDesktopNothingRadioClick.bind(r);r.onMobileSelectChange=r.onMobileSelectChange.bind(r);r.onMobileOverrideCheckboxClick=r.onMobileOverrideCheckboxClick.bind(r);r.onOpenPreferencesDialogLinkClick=r.onOpenPreferencesDialogLinkClick.bind(r);return r}l()(t,[{key:"onMuteCheckboxClick",value:function e(){this.updateChannelNotificationSetting("muted",!this.props.muted)}},{key:"onSuppressAtChannelClick",value:function e(){this.updateChannelNotificationSetting("suppress_at_channel",!this.props.suppressAtChannel)}},{key:"onDesktopEverythingRadioClick",value:function e(){var t=!this.state.shouldUseDifferentSettingsForMobile;this.updateChannelNotificationSetting("desktop","everything",t)}},{key:"onDesktopMentionsDmsRadioClick",value:function e(){var t=!this.state.shouldUseDifferentSettingsForMobile;this.updateChannelNotificationSetting("desktop","mentions_dms",t)}},{key:"onDesktopNothingRadioClick",value:function e(){var t=!this.state.shouldUseDifferentSettingsForMobile;this.updateChannelNotificationSetting("desktop","nothing",t)}},{key:"onMobileSelectChange",value:function e(t){this.updateChannelNotificationSetting("mobile",t.target.value)}},{key:"onMobileOverrideCheckboxClick",value:function e(t){t.target.checked||this.updateChannelNotificationSetting("mobile",this.props.desktop);this.setState(function(e){return{shouldUseDifferentSettingsForMobile:!e.shouldUseDifferentSettingsForMobile}})}},{key:"onOpenPreferencesDialogLinkClick",value:function e(){this.props.onClose();Object(D["a"])("notifications","#growls_permission_div")}},{key:"updateChannelNotificationSetting",value:function e(t,r,a){var n=this.props.channelId;if(!n||!t||null==r)return null;return this.props.setChannelNotificationOverrideAndCallApi({name:t,value:r,channelId:n,sync:a}).then(function(){return null}).catch(function(e){Object(F["a"])(e);return null})}},{key:"getDisabledIgnoreAtChannelTooltipText",value:function e(){var t=this.props,r=t.isGeneralChannel,a=t.featureTurnMpdmNotifsOn;if(!a)return"";if(r)return U.rt("A Workspace Owner has restricted who can post to general and/or restricted the use of <b>{channel}</b> and/or <b>{everyone}</b> to admins and/or owners. These notifications can not be ignored.",{channel:Object(I["a"])({type:"channel"}),everyone:Object(I["a"])({type:"everyone"})});return U.rt("A Workspace Owner has restricted the use of <b>{channel}</b> to admins and/or owners. These notifications cannot be ignored.",{channel:Object(I["a"])({type:"channel"})})}},{key:"getIgnoreAtChannelQualifierText",value:function e(){var t=this.props,r=t.desktop,a=t.mobile,n=t.muted,i=t.disableIgnoreAtChannelOption,s=t.notificationsEnabled,o=t.featureTurnMpdmNotifsOn;if(!o)return"";if(i||n||!s)return"";if("mentions_dms"===r&&"everything"===a)return U.rt("(on desktop)");if("everything"===r&&"mentions_dms"===a)return U.rt("(on mobile)");return""}},{key:"getDisabledIgnoreAtChannelLabelSubtext",value:function e(){return v.a.createElement(T["d"],{tip:this.getDisabledIgnoreAtChannelTooltipText(),zIndex:"above_fs"},v.a.createElement("span",null,U.rt("Disabled by an admin")," ",v.a.createElement(S["a"],{type:"question_circle",inherit:true,align:"baseline"})))}},{key:"renderIgnoreAtChannelOption",value:function e(){var t=this.props,r=t.desktop,a=t.mobile,n=t.suppressAtChannel,i=t.disableIgnoreAtChannelOption,s=t.featureTurnMpdmNotifsOn;if(!s)return null;if("mentions_dms"!==r&&"mentions_dms"!==a)return"";var o=U.rt("Ignore notifications for <strong>@channel</strong> and <strong>@here</strong> {qualifier_text}",{qualifier_text:this.getIgnoreAtChannelQualifierText()});return v.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__suppress_checkbox",type:"inline",cursor:i?null:"pointer",disabled:i,text:o,subtext:i?this.getDisabledIgnoreAtChannelLabelSubtext():null},v.a.createElement(R["a"],{id:"p-channel_notification_settings__suppress_checkbox",checked:n&&!i,onChange:this.onSuppressAtChannelClick,disabled:i}))}},{key:"renderMutingOptions",value:function e(){var t=this.props,r=t.channelType,a=t.muted,n=t.featureTurnMpdmNotifsOn;if(!n)return null;var i="mpim"===r;var s=i?U.rt("group DM"):U.rt("channel");var o=U.rt("Mute this {channelTypeText}",{channelTypeText:s});var l=U.rt("You won't receive notifications for this {channelTypeText}, and it will appear grayed out in your channel list.",{channelTypeText:s});return v.a.createElement("div",{className:"margin_bottom_100"},v.a.createElement("h3",{className:"margin_bottom_50"},U.rt("Muting options")),v.a.createElement("div",{className:"margin_bottom_50"},v.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__mute_checkbox",cursor:"pointer",type:"inline",text:o,subtext:l},v.a.createElement(R["a"],{id:"p-channel_notification_settings__mute_checkbox",checked:a,onChange:this.onMuteCheckboxClick}))),this.renderIgnoreAtChannelOption())}},{key:"renderDisabledNotificationsWarning",value:function e(){var t=this;var r=this.props,a=r.notificationDisabledType,n=r.featureTurnMpdmNotifsOn;if(!n)return null;if("impossible"===a)return v.a.createElement(x["d"],{level:"warning"},U.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",null,function(e){var t=e.text;return v.a.createElement("a",{href:"/downloads",target:"_blank"},t)}));if("not_yet_allowed"===a)return v.a.createElement(x["d"],{level:"warning"},U.rt("You have not yet allowed desktop notification. Open the <a>Preferences Dialog</a> and follow the instructions to set them up.",null,function(e){var r=e.text;return v.a.createElement(N["a"],{type:"link",onClick:t.onOpenPreferencesDialogLinkClick},r)}));if("not_allowed"===a)return v.a.createElement(x["d"],{level:"warning"},U.rt("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.",{fallbackHash:"1bfe8c2c1bd598dfe77ef1aa51e43c16d70b8174"}));return null}},{key:"getRadioButtonLabelClassNames",value:function e(t){if(!t)return"";return g()("p-channel_notification_settings__notification_option",{selected:t===this.props.desktop})}},{key:"renderEnabledNotificationsOptions",value:function e(){var t=this.props,r=t.desktop,a=t.mobile;return v.a.createElement("div",null,v.a.createElement(M["a"],{className:"margin_bottom_25",legendId:"notification_options_title"},v.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__everything_checkbox",className:this.getRadioButtonLabelClassNames("everything"),cursor:"pointer",type:"inline",text:U.rt("All new messages")},v.a.createElement(P["a"],{name:"p-channel_notification_settings__notification_radio_buttons",value:"everything",id:"p-channel_notification_settings__everything_checkbox",checked:"everything"===r,onChange:this.onDesktopEverythingRadioClick})),v.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__mentions_checkbox",className:this.getRadioButtonLabelClassNames("mentions_dms"),cursor:"pointer",type:"inline",text:U.rt("Just mentions & keywords")},v.a.createElement(P["a"],{name:"p-channel_notification_settings__notification_radio_buttons",value:"mentions_dms",id:"p-channel_notification_settings__mentions_checkbox",checked:"mentions_dms"===r,onChange:this.onDesktopMentionsDmsRadioClick})),v.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__nothing_checkbox",className:this.getRadioButtonLabelClassNames("nothing"),cursor:"pointer",type:"inline",text:U.rt("Nothing")},v.a.createElement(P["a"],{name:"p-channel_notification_settings__notification_radio_buttons",value:"nothing",id:"p-channel_notification_settings__nothing_checkbox",checked:"nothing"===r,onChange:this.onDesktopNothingRadioClick}))),v.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__mobile_override_checkbox",className:"bold",cursor:"pointer",type:"inline",text:U.rt("Use different settings for my mobile device")},v.a.createElement(R["a"],{id:"p-channel_notification_settings__mobile_override_checkbox",checked:this.state.shouldUseDifferentSettingsForMobile,onChange:this.onMobileOverrideCheckboxClick})),this.state.shouldUseDifferentSettingsForMobile&&v.a.createElement(A["a"],{htmlFor:"channel_notification_settings__mobile_override_select",className:"select small inline_block"},v.a.createElement("select",{id:"p-channel_notification_settings__mobile_override_select",className:"small auto_width block",value:a,onChange:this.onMobileSelectChange,tabIndex:0},v.a.createElement("option",{value:"everything"},U.rt("All new messages")),v.a.createElement("option",{value:"mentions_dms"},U.rt("Just mentions & keywords")),v.a.createElement("option",{value:"nothing"},U.rt("Nothing")))))}},{key:"renderNotificationOptions",value:function e(){var t=this.props,r=t.muted,a=t.notificationsEnabled;if(r)return"";var n="en-us";var i="https://get.slack.help/hc/"+n+"/articles/201355156-Desktop-notifications";return v.a.createElement("div",null,v.a.createElement("h3",{className:"margin_bottom_50"},v.a.createElement("span",{id:"notification_options_title"},U.rt("Notify me about\u2026")),v.a.createElement("a",{className:"p-channel_notification_settings__about_link",href:i,target:"_blank",rel:"noopener noreferrer"},U.rt("About notifications")," ",v.a.createElement(S["a"],{type:"question_circle"}))),a?this.renderEnabledNotificationsOptions():this.renderDisabledNotificationsWarning())}},{key:"render",value:function e(){if(!this.props.featureTurnMpdmNotifsOn)return null;return v.a.createElement("div",{className:"p-channel_notification_settings"},this.renderMutingOptions(),this.renderNotificationOptions())}}]);return t}(f["Component"]);H.displayName="ChannelNotificationSettings";H.defaultProps=G;function W(e,t){var r=Object(E["getTeamPref"])(e,"who_can_at_channel");var a=Object(E["getTeamPref"])(e,"who_can_at_everyone");var n=Object(E["getTeamPref"])(e,"who_can_post_general");if("admin"===r||"owner"===r)return true;if(t&&("admin"===n||"owner"===n||"admin"===a||"owner"===a))return true;return false}function V(e,t){var r=t.channelId,a=t.onClose;if(!r){Object(F["a"])(new Error("Could not render ChannelNotificationSettings: No channel ID found."));return{featureTurnMpdmNotifsOn:Object(k["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")}}var i=Object(O["getChannelById"])(e,r);if(!i){Object(F["a"])(new Error("Could not render ChannelNotificationSettings: No channel found."));return{featureTurnMpdmNotifsOn:Object(k["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")}}var s=Object(w["getChannelType"])(i);var o=Object(w["isGeneral"])(i);var l=W(e,o);var c=Object(C["g"])();var u=Object(C["c"])(e,r);var d=Object(C["d"])(e,r);var p=!!Object(E["getNotificationsChannelPref"])(e,r,"muted");var m=!!Object(E["getNotificationsChannelPref"])(e,r,"suppress_at_channel");return n()({channelId:r,channelType:s,isGeneralChannel:o,disableIgnoreAtChannelOption:l},c,{onClose:a,desktop:u,mobile:d,muted:p,suppressAtChannel:m,featureTurnMpdmNotifsOn:Object(k["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")})}var z={setChannelNotificationOverrideAndCallApi:E["setChannelNotificationOverrideAndCallApi"]};t["a"]=Object(m["connect"])(V,z)(H)},function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(2);var n=r.n(a);var i=r(10);var s=new i["b"]("channel_sidebar");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.displayName,a=e.isShared,i=e.isOrgShared,o=e.isYou,l=e.isMuted,c=e.hasUnreads,u=e.hasDraft,d=e.isArchived,p=e.unreadCount,m=e.badgeCount,h=e.isSelected,f=e.userActive,v=e.isTyping;var b=[h?s.t("selected"):null];if("channel"===t)b.push(a||i?s.t("shared channel"):s.t("channel"));else if("private"===t)b.push(s.t("private channel"));else if("mpim"===t)b.push(s.t("group direct message",{fallbackHash:"e50045943dfaafc5cbbee9a7d1aba5fb2ce026da"}));else if("im"===t){b.push(s.t("direct message"));b.push(f?s.t("active"):s.t("away"))}d&&b.push(s.t("archived"));l&&b.push(s.t("muted"));c&&p&&!m&&b.push(s.t("{count} unread {count, plural, =1 {message} other {messages}}",{count:p}));m&&b.push(s.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:m}));u&&b.push(s.t("has draft"));v&&b.push(s.t("typing"));var g=o?s.t("{name} (you)",{name:r}):r;var _=n()(b).filter(n.a.identity).join(", ");return g+" ("+_+")"}},function(e,t,r){"use strict";r.d(t,"a",function(){return u});r.d(t,"b",function(){return d});var a=r(67);var n=r.n(a);var i=r(214);var s=r(708);var o=r(823);var l=r(10);var c=new l["b"]("menu");var u=function e(t){var r=t.id,a=t.name,n=t.isChannel,l=t.isStarred,u=t.canMute,d=t.canLeave;var p=void 0;var m=void 0;var h=void 0;var f=void 0;var v=void 0;if(n){p=c.t("Star Channel");m=c.t("Unstar Channel");h=c.t("Mute {channel}",{channel:"#"+a});f=c.t("Unmute {channel}",{channel:"#"+a});v=c.t("Leave {channel}",{channel:"#"+a})}else{p=c.t("Star Conversation");m=c.t("Unstar Conversation");h=c.t("Mute Conversation");f=c.t("Unmute Conversation");v=c.t("Leave Conversation")}var b=[{label:l?m:p,click:function e(){return Object(o["a"])(null,r)},id:"star:"+r}];d&&b.push({label:v,click:function e(){return Object(i["o"])(r)},id:"leave:"+r});u&&b.push({label:Object(s["b"])(r)?f:h,click:function e(){return Object(s["c"])(r)},id:"mute:"+r});return b};var d=function e(t){var r=t.split(":"),a=n()(r,2),l=a[0],c=a[1];switch(l){case"star":Object(o["a"])(null,c);break;case"mute":Object(s["c"])(c);break;case"leave":Object(i["o"])(c);break;default:break}}},function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});var a=r(13);var n=Object(a["c"])("TS.ui.jumper.start",function(){return null});var i=Object(a["c"])("TS.ui.jumper.getSessionId",function(){return null});var s={start:n}},function(e,t,r){"use strict";var a=r(129);var n=r(1);var i=r.n(n);var s=r(14);var o=r(262);var l=r.n(o);var c=r(21);var u=r(167);var d=r(748);var p=r(1106);var m=r(17);var h={theme:a["b"].oneOf(["custom_theme","default","default_theme","hoth_theme","monument_theme","chocolate_theme","ocean_theme","workhard_theme","solanum_theme","brinjal_theme","cotton_theme","eco_theme","neue_theme","cloud_theme","kaiyo_theme","midnight_theme","stark_theme"]),custom:a["b"].object,useGlobalNav:a["b"].bool};var f={theme:"default_theme",custom:{},useGlobalNav:false};var v=function e(t){var r=Object(p["b"])(t.theme,t.custom,{useGlobalNav:t.useGlobalNav});if(!r){Object(m["b"])().warn('Theme: could not identify theme "'+t.theme+'" ('+t.custom+")");return null}var a=Object(d["c"])(r,{useGlobalNav:t.useGlobalNav});var n=r.text_color;var s=Object(d["b"])(r.column_bg,25);var o=Object(d["b"])(r.column_bg,35);var l=Object(u["a"])(r);var c="\n\t\t.p-channel_sidebar {\n\t\t\tbackground: "+r.column_bg+";\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close {\n\t\t\tcolor: "+r.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: "+r.hover_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: "+a+';\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: '+s+";\n\t\t\tcolor: "+a+';\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: '+o+";\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__channel--im .c-presence--active,\n\t\t.p-channel_sidebar__channel--im-slackbot:before {\n\t\t\tcolor: "+r.active_presence+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im.p-channel_sidebar__channel--selected .c-presence,\n\t\t.p-channel_sidebar__channel--im-slackbot.p-channel_sidebar__channel--selected:before {\n\t\t\tcolor: "+r.active_item_text+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im .c-presence--away {\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: "+r.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected:before,\n\t\t.p-channel_sidebar__channel--selected:hover:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: "+r.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__badge,\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: "+r.badge+";\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: "+Object(d["e"])(n,.45)+";\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: 0 0 0 1px "+n+", 0 0 0 5px "+Object(d["e"])(n,.3)+";\n\t\t}\n\t\t.p-channel_sidebar__channel.focus-ring .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.focus-ring .p-channel_sidebar__name {\n\t\t\tbox-shadow: 0 0 0 1px "+n+", 0 0 0 5px "+Object(d["e"])(n,.3)+";\n\t\t}\n\n\t\t/** `opacity: 1` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading_label--clickable:hover,\n\t\t.p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: "+s+";\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: "+o+";\n\t\t}\n\n\t\t/** Global Nav (DEPRECATED BUT KEEP FOR SONIC) **/\n\t\t.p-global_nav__top {\n\t\t\tbackground: "+l.nav_bar_bg+";\n\t\t\tcolor: "+l.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__top:after {\n\t\t\tbackground: "+l.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__sidebar {\n\t\t\tbackground: "+r.column_bg+";\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-global_nav__top_user_presence {\n\t\t\tbackground: "+l.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--active {\n\t\t\tcolor: "+r.active_presence+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--away {\n\t\t\tcolor: "+l.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__sidebar_jumper:hover,\n\t\t.p-global_nav__sidebar_button:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t/** Classic Nav (WIP) **/\n\t\t.p-classic_nav__team_header {\n\t\t\tbackground: "+r.column_bg+";\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-classic_nav__team_header:hover {\n\t\t\tbackground: "+r.menu_bg+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--active {\n\t\t\tcolor: "+r.active_presence+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--away {\n\t\t\tcolor: "+a+";\n\t\t}\n\t";return i.a.createElement("style",{className:"p-channel_sidebar__theme--"+t.theme},c)};v.displayName="Theme";v.defaultProps=f;var b=Object(o["createSelector"])([function(e){return Object(c["getUserPref"])(e,"sidebar_theme_custom_values")}],function(e){try{return JSON.parse(e)}catch(e){return{}}});var g=function e(t){var r=Object(c["getUserPref"])(t,"sidebar_theme");var a=b(t);return{theme:r,custom:a,useGlobalNav:Object(u["b"])(t)}};t["a"]=Object(s["connect"])(g)(v)},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(2);var h=r.n(m);var f=r(1);var v=r.n(f);var b=r(14);var g=r(15);var _=r.n(g);var y=r(129);var k=r(11);var O=r(50);var E=r(499);var w=r(10);var C=r(20);var S=r(131);var j=r(3453);var I=new w["b"]("files");var T={status:y["b"].oneOf([E["IDLE"],E["UPLOADING"],E["COMPLETE"],E["CANCELED"]]),fileName:y["b"].string,percentComplete:y["b"].number,cancelable:y["b"].bool,cancelUpload:y["b"].func,isRetry:y["b"].bool,teamId:y["b"].string,featureModernFileUpload:y["b"].bool};var N={fileName:"",percentComplete:0,status:E["UPLOADING"],cancelable:false,cancelUpload:m["noop"],isRetry:false,teamId:void 0,featureModernFileUpload:false};var A=function(e){p()(t,e);u()(t,null,[{key:"renderComplete",value:function e(){var t=I.t("Processing uploaded file\u2026 complete!");return v.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},v.a.createElement("div",{className:"p-file_upload_banner__text"},t))}}]);function t(e){s()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.cancel=r.cancel.bind(r);r.clearOverrides=r.clearOverrides.bind(r);r.doneProlongingStatus=r.doneProlongingStatus.bind(r);r.state={statusOverride:null,fileNameOverride:null,timer:null,fading:false};return r}u()(t,[{key:"componentWillReceiveProps",value:function e(t){var r=this;var a=[E["COMPLETE"],E["CANCELED"]];this.props.status!==t.status&&Object(m["includes"])(a,t.status)&&this.setState(function(){return{statusOverride:t.status,fileNameOverride:t.fileName,timer:setTimeout(r.doneProlongingStatus,1e3)}})}},{key:"componentWillUnmount",value:function e(){this.state.timer&&clearTimeout(this.state.timer)}},{key:"getStatus",value:function e(){var t=this.props.status;var r=this.state.statusOverride;return r||t}},{key:"getFileName",value:function e(){var t=this.props.fileName;var r=this.state.fileNameOverride;return r||t}},{key:"cancel",value:function e(){var t=this.props,r=t.featureModernFileUpload,a=t.teamId;var n=this.props.cancelUpload;if(r){var i=Object(j["a"])(a);n=i.cancelCurrentUpload.bind(i)}setTimeout(function(){n()},1)}},{key:"clearOverrides",value:function e(){this.setState(function(){return{statusOverride:null,fileNameOverride:null,timer:null,fading:false}})}},{key:"doneProlongingStatus",value:function e(){var t=this;this.props.status===E["IDLE"]?this.setState(function(){return{fading:true,timer:setTimeout(t.clearOverrides,250)}}):this.clearOverrides()}},{key:"renderCanceled",value:function e(){var t=this.getFileName();var r=I.t("Canceling {fileName}\u2026",{fileName:Object(w["n"])(t)});return v.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},v.a.createElement("div",{className:"p-file_upload_banner__text"},r))}},{key:"renderUploading",value:function e(){var t=this.props,r=t.fileName,a=t.percentComplete,n=t.cancelable,i=t.isRetry;var s=a>=99;var o=void 0;if(s)o=I.t("Processing uploaded file\u2026");else{o=i?I.t("Re-uploading {fileName}",{fileName:Object(w["n"])(r)}):I.t("Uploading {fileName}",{fileName:Object(w["n"])(r)});o+="\u2026"+a+"%"}var l=_()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":s});var c={width:a+"%"};var u=null;n&&!s&&(u=v.a.createElement(C["c"],{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},I.t("cancel")));return[v.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},v.a.createElement("span",{className:l,style:c})),v.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},o),u]}},{key:"render",value:function e(){var r=this.getStatus();var a=this.state.fading;if(r===E["IDLE"])return null;var n=void 0;n=r===E["UPLOADING"]?this.renderUploading():r===E["COMPLETE"]?t.renderComplete():this.renderCanceled();var i=_()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":a});return v.a.createElement("div",{className:i},n)}}]);return t}(f["PureComponent"]);A.displayName="FileUploadBanner";A.defaultProps=N;function R(e){var t=Object(E["getFileUploadState"])(e);var r=Object(O["getCurrentTeam"])(e);return n()({},t,{teamId:r.id,cancelUpload:S["a"],featureModernFileUpload:Object(k["isFeatureEnabled"])(e,"feature_modern_file_upload")})}t["a"]=Object(b["connect"])(R)(A)},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var a=r(13);var n=Object(a["c"])("TS.client.ui.files.backButtonOnClick");var i=Object(a["c"])("TS.client.ui.files.chooseFile")},function(e,t,r){"use strict";r.d(t,"a",function(){return b});var a=r(1);var n=r.n(a);var i=r(129);var s=r(2);var o=r.n(s);var l=r(10);var c=r(713);var u=r(121);var d=r(18);var p=r(2081);var m=r.n(p);var h=new l["b"]("comments");var f={toggleList:i["b"].func,commentCount:i["b"].number,expanded:i["b"].bool};var v={toggleList:s["noop"],commentCount:0,expanded:false};function b(e){var t=e.toggleList,r=e.commentCount,a=e.expanded;return n.a.createElement("div",{className:"p-comment_list__toggle_container"},n.a.createElement(c["a"],{onClick:t},h.t("See older comments")),n.a.createElement(u["a"],{className:"p-comment_list__toggle_count_button",onClick:t,ariaLabel:h.t("Click to expand")},n.a.createElement(d["b"],{type:"comment-alt"}),n.a.createElement("span",{className:"p-comment_list__toggle_count"},r),a?n.a.createElement(d["b"],{type:"caret-down",className:"p-comment_list__toggle_caret"}):n.a.createElement(d["b"],{type:"caret-right",className:"p-comment_list__toggle_caret"})))}b.displayName="CommentListToggle";b.defaultProps=v},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(15);var f=r.n(h);var v=r(2);var b=r.n(v);var g=r(72);var _=r(497);var y=r(667);var k=r(876);var O={file:g["a"].File().isRequired,clogLinkClick:m["b"].func,className:m["b"].string,fullWidth:m["b"].bool,onClick:m["b"].func,useRowAction:m["b"].bool};var E={clogLinkClick:v["noop"],className:null,fullWidth:false,onClick:v["noop"],useRowAction:false};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.props.onClick(t,this.props.file)}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.clogLinkClick,n=t.fullWidth,i=t.useRowAction;var s=f()("p-contextual_file",this.props.className);return p.a.createElement(_["a"],{file:r,className:s,fullWidth:n,clogLinkClick:a,useRowAction:i},p.a.createElement(y["a"],{file:r,onClick:this.onClick},p.a.createElement(k["a"],{file:r})))}}]);return t}(d["PureComponent"]);w.displayName="ContextualFile";w.defaultProps=E;t["a"]=w},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(2);var n=r.n(a);var i=r(13);var s=Object(i["c"])("TS.ui.channel_invite_modal.startInviteToChannelModal",n.a.noop)},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(14);var f=r(2);var v=r.n(f);var b=r(15);var g=r.n(b);var _=r(69);var y=r(150);var k=r(1156);var O=r(165);var E=r(348);var w=r(18);var C=r(20);var S=r(63);var j=r(3477);var I={flexName:m["b"].string,flexParams:m["b"].arrayOf(m["b"].string),flexOrigin:m["b"].string,flexOriginId:m["b"].string,previewFile:m["b"].func,showUserGroupList:m["b"].func,setSecondaryView:m["b"].func,size:m["b"].oneOf(["large","medium"]),className:m["b"].string};var T={flexName:void 0,flexParams:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:f["noop"],showUserGroupList:f["noop"],setSecondaryView:f["noop"],size:"large",className:void 0};var N=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.getOrigin=r.getOrigin.bind(r);r.openOrigin=r.openOrigin.bind(r);return r}s()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.flexOrigin,a=t.flexName;if(r)return this.openOrigin();switch(a){case"files":return Object(S["a"])()?this.props.setSecondaryView({routeName:j["d"],flexName:"files"}):Object(E["c"])("files");case"team":return Object(O["m"])();case"groups":return this.props.showUserGroupList();default:return null}}},{key:"getOrigin",value:function e(){var t=this.props,r=t.flexOrigin,a=t.flexName,n=t.flexParams;var i=n&&n[0];if(r)return r;switch(a){case"files":return Object(k["a"])(i)?"files":null;case"team":case"groups":return i?"groups":null;default:return null}}},{key:"openOrigin",value:function e(){var t=this.props,r=t.flexOrigin,a=t.flexOriginId;switch(r){case"member_preview":return Object(O["m"])();case"starred_items":return this.props.setSecondaryView({routeName:j["g"],flexName:"starred_items"});case"channel_page":case"group_page":case"im_page":return Object(E["c"])("details");case"mentions":return Object(E["c"])("mentions");case"file_details":return Object(k["a"])(a)?this.props.previewFile({fileId:a}):Object(E["c"])("files");default:return null}}},{key:"render",value:function e(){var t=this.getOrigin();if(!t)return null;var r=this.props,a=r.size,n=r.className;var i="chevron-"+a+"-left";return p.a.createElement(C["c"],{className:g()("p-global_nav__flex_btn","p-global_nav__flex_btn--back",n),onClick:this.onClick},p.a.createElement(w["b"],{type:i}))}}]);return t}(d["Component"]);N.displayName="FlexBack";N.defaultProps=T;var A=function e(t){return{flexName:Object(_["getSecondaryView"])(t),flexParams:Object(_["getFlexParams"])(t),flexOrigin:Object(_["getFlexOrigin"])(t),flexOriginId:Object(_["getFlexOriginId"])(t)}};t["a"]=Object(h["connect"])(A,{previewFile:y["c"],showUserGroupList:y["i"],setSecondaryView:_["setSecondaryView"]})(N)},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(371);var n=r(683);var i=r(44);function s(e,t){return function(r,s){var o=Object(i["getMessageByTimestamp"])(s(),e,t);if(!o)return;r(Object(a["a"])({channelId:e,ts:t}));r(Object(n["d"])(o,t))}}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,r=e.isStarred,a=e.isEphemeral,n=e.isBroadcast,i=e.isCustomResponse,s=e.isSliHighlight;if(n)return"broadcast";if(t)return"pinned";if(r)return"starred";if(a)return"ephemeral";if(i)return"custom_response";if(s)return"sli_highlight";return}},function(e,t,r){"use strict";r.d(t,"a",function(){return b});var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(97);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(2);var h=r.n(m);var f=r(62);var v=r(218);function b(e){return function(t){p()(r,t);function r(t){n()(this,r);var a=l()(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));a.uniqueId=Object(m["uniqueId"])();a.name=Object(m["snakeCase"])(e.name);a.logMetrics=Object(v["a"])(1);return a}s()(r,[{key:"componentWillMount",value:function e(){var t;this.logMetrics&&f["e"]("react_"+this.name+"_mount_mark_"+this.uniqueId);for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillMount",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillMount",this)).call.apply(t,[this].concat(n))}},{key:"componentDidMount",value:function e(){var t;for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidMount",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidMount",this)).call.apply(t,[this].concat(n));this.logMetrics&&f["g"]("react_"+this.name+"_mount","react_"+this.name+"_mount_mark_"+this.uniqueId)}},{key:"componentWillUpdate",value:function e(){var t;this.logMetrics&&f["e"]("react_"+this.name+"_update_mark_"+this.uniqueId);for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillUpdate",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillUpdate",this)).call.apply(t,[this].concat(n))}},{key:"componentDidUpdate",value:function e(){var t;for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidUpdate",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidUpdate",this)).call.apply(t,[this].concat(n));this.logMetrics&&f["g"]("react_"+this.name+"_update","react_"+this.name+"_update_mark_"+this.uniqueId)}}]);return r}(e)}},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(129);var s=r(76);var o=r(2);var l=r.n(o);var c=r(10);var u=r(161);var d=r(734);var p=r(476);var m=new c["b"]("attachments");var h={isExpanded:i["b"].bool,onClick:i["b"].func,attachmentsOverLimitCount:i["b"].number};var f={isExpanded:false,onClick:o["noop"],attachmentsOverLimitCount:0};var v=function e(t){var r=t.isExpanded,a=t.onClick,i=t.attachmentsOverLimitCount;return n.a.createElement(u["a"],{enabled:["feature_react_messages"]},n.a.createElement("div",{className:"c-message_attachment"},n.a.createElement(d["a"],null),n.a.createElement("div",{className:"c-message_attachment__body"},n.a.createElement(p["a"],{onClick:a,text:r?m.t("Show fewer items"):m.t("{count, plural, =1 {Show remaining # item} other {Show remaining # items}}",{count:i})}))))};v.displayName="MessageAttachmentOverLimitButton";v.defaultProps=f;t["a"]=Object(s["pure"])(v)},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(14);var f=r(2);var v=r.n(f);var b=r(15);var g=r.n(b);var _=r(72);var y=r(29);var k=r(164);var O=r(610);var E=r(787);var w=r(11);var C=r(78);var S=r(19);var j=r(150);var I=r(23);var T=r(322);var N=r(626);var A=r(1430);var R=r(36);var M=r(465);var P=r(361);var x=r(10);var D=r(286);var F=r(457);var L=r(63);var B=r(454);var U=r(1431);var q=r(969);var G=r(794);var H=r(189);var W=r(3288);var V=r(1169);var z=r(1168);var Q=r(3563);var K=r(70);var Y=r(77);var J=r(54);var Z=r(427);var X=r(1124);var $=r(825);var ee=new x["b"]("message");var te={reactionKey:m["b"].string,fileId:m["b"].string,fileIds:m["b"].arrayOf(m["b"].string),comment:m["b"].string,replies:m["b"].arrayOf(m["b"].shape({ts:m["b"].string,user:m["b"].string})),teamId:m["b"].string.isRequired,replyCount:m["b"].number,ts:m["b"].string,rollup:_["a"].Rollup(),threadTs:m["b"].string,channel:m["b"].object,file:m["b"].object,subtype:m["b"].string,channelId:m["b"].string,theme:m["b"].oneOf(["dense","light"]),isStarred:m["b"].bool,isPinned:m["b"].bool,isEphemeral:m["b"].bool,isFileAuthorExternal:m["b"].bool,isReply:m["b"].bool,messageContainerType:m["b"].string,editHandler:m["b"].func,unreadHandler:m["b"].func,onMenuOpen:m["b"].func,onMenuClose:m["b"].func,onEmojiPickerOpen:m["b"].func,onEmojiPickerClose:m["b"].func,showComment:m["b"].bool,showShare:m["b"].bool,showReact:m["b"].bool,showJump:m["b"].bool,jumpOrigin:m["b"].string,changeReactionFromUserAction:m["b"].func,pinMessage:m["b"].func,unpinMessage:m["b"].func,updateStar:m["b"].func,featureFileThreads:m["b"].bool,renderMenuBelowTrigger:m["b"].bool,renderOffscreen:m["b"].bool.isRequired,openModal:m["b"].func,previewFile:m["b"].func,showThread:m["b"].func,addReminderForMessage:m["b"].func,featureOfflineMode:m["b"].bool,wasRecentlyOnline:m["b"].bool,clogger:m["b"].object.isRequired};var re={reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,rollup:void 0,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:false,isPinned:false,isEphemeral:false,isFileAuthorExternal:false,isReply:false,messageContainerType:void 0,editHandler:v.a.noop,unreadHandler:v.a.noop,onMenuOpen:v.a.noop,onMenuClose:v.a.noop,onEmojiPickerOpen:v.a.noop,onEmojiPickerClose:v.a.noop,showComment:true,showShare:true,showReact:true,showJump:false,jumpOrigin:null,changeReactionFromUserAction:v.a.noop,pinMessage:v.a.noop,unpinMessage:v.a.noop,updateStar:v.a.noop,featureFileThreads:false,renderMenuBelowTrigger:true,renderOffscreen:false,openModal:v.a.noop,previewFile:v.a.noop,showThread:v.a.noop,addReminderForMessage:v.a.noop,featureOfflineMode:false,wasRecentlyOnline:false};var ae={x:0,y:-8};var ne={x:4,y:-16};var ie={x:50,y:0};var se=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={moreActionsMenuOpen:false,subscribed:"loading"};Object(f["bindAll"])(r,["onAddReaction","onEmojiSelected","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onJump","onSubscribe","renderMoreActionsMenu"]);return r}s()(t,[{key:"onStar",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.fileId,i=t.fileIds,s=t.featureFileThreads,o=t.comment,l=t.subtype,c=t.isStarred;var u={channel:r,timestamp:a};n&&(u={file:n});if(o&&"file_comment"===l){var d=s&&i&&i[0]||n;u={file_comment:o,file_comment_file:d}}this.props.updateStar(!c,u);var p=c?y["q"].UNSTAR_MESSAGE_BUTTON:y["q"].STAR_MESSAGE_BUTTON;this.trackAction(p)}},{key:"onAddReaction",value:function e(t){if(!this.props.reactionKey)return;Object(B["a"])({e:t,rxn_key:this.props.reactionKey});this.trackAction(y["q"].ADD_REACTION_BUTTON)}},{key:"onEmojiSelected",value:function e(t,r){var a=this.props.reactionKey;this.props.changeReactionFromUserAction({key:a,name:r})}},{key:"onComment",value:function e(){if(this.props.fileId&&!this.props.featureFileThreads)this.props.previewFile({fileId:this.props.fileId});else{var t=this.props.threadTs||this.props.ts;this.props.showThread({channelId:this.props.channel.id,threadTs:t})}var r=this.state.subscribed?y["q"].REPLY_TO_THREAD_BUTTON:y["q"].START_A_THREAD_BUTTON;this.trackAction(r)}},{key:"onShare",value:function e(){this.props.fileId&&"file_comment"!==this.props.subtype?Object(q["a"])(this.props.fileId,false,false,this.props.channel,true):Object(U["a"])(this.props.ts,this.props.channel);this.trackAction(y["q"].SHARE_MESSAGE_BUTTON)}},{key:"onEdit",value:function e(t){this.props.onMenuClose();this.props.editHandler();t.stopPropagation();this.trackAction(y["q"].EDIT_MESSAGE_BUTTON,true)}},{key:"onDelete",value:function e(){var t=this.props,r=t.channelId,a=t.ts;this.props.openModal({element:p.a.createElement(z["a"],{channelId:r,ts:a})});this.trackAction(y["q"].DELETE_MESSAGE_BUTTON,true)}},{key:"onMarkUnread",value:function e(){this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts});this.trackAction(y["q"].MARK_UNREAD_BUTTON,true)}},{key:"onRemind",value:function e(t){var r=this;var a=this.props,n=a.channel,i=a.ts,s=a.subtype;this.trackAction(y["q"].REMIND_ME_BUTTON,true);return function(){r.props.addReminderForMessage({time:t,message_channel:n.id,message_ts:i,respond_in_channel:"thread_broadcast"===s})}}},{key:"onSubscribe",value:function e(){var t=this.props,r=t.replies,a=t.ts,n=t.channel;var i=this.state.subscribed;var s=r.length&&r[r.length-1].ts;Object(G["e"])(n.id,a,!i,s);var o=i?y["q"].UNFOLLOW_MESSAGE_BUTTON:y["q"].FOLLOW_MESSAGE_BUTTON;this.trackAction(o,true)}},{key:"onPin",value:function e(){var t=this.props,r=t.ts,a=t.channel,n=t.isPinned,i=t.pinMessage,s=t.unpinMessage;if(n){s({ts:r,channelId:a.id});this.trackAction(y["q"].UNPIN_FROM_THIS_CONVERSATION_BUTTON,true)}else{i({ts:r,channelId:a.id});this.trackAction(y["q"].PIN_TO_THIS_CONVERSATION_BUTTON,true)}}},{key:"onCopyLink",value:function e(){var t=this.props,r=t.channel,a=t.ts,n=t.threadTs,i=t.file,s=t.subtype;var o=Object(H["a"])(r.id,a,n);i&&"file_comment"!==s&&(o=i.permalink);Object(P["writeText"])(o);this.trackAction(y["q"].COPY_LINK_BUTTON,true)}},{key:"onJump",value:function e(){var t=this.props,r=t.channel,a=t.ts,n=t.teamId,i=t.isReply,s=t.jumpOrigin;var o=this.props.threadTs||this.props.ts;if(i)this.props.showThread({channelId:r.id,threadTs:o,highlightTs:a,origin:s});else{var l=Object(D["a"])({channelId:r.id,ts:a,threadTs:o});Object(D["d"])(n,l)}}},{key:"onRemoveBroadcast",value:function e(){var t=this.props,r=t.channelId,a=t.ts;this.props.openModal({element:p.a.createElement(V["a"],{channelId:r,ts:a})});this.trackAction(y["q"].REMOVE_FROM_CONVERSATION_BUTTON,true)}},{key:"onMoreActionsMenuOpen",value:function e(){this.setState(function(){return{moreActionsMenuOpen:true}});this.props.onMenuOpen();this.trackAction(y["q"].MORE_ACTIONS_BUTTON)}},{key:"onMoreActionsMenuClose",value:function e(){this.setState(function(){return{moreActionsMenuOpen:false}});this.props.onMenuClose()}},{key:"onMenuSelectAction",value:function e(t,r){if(r.id===K["SLACK_ACTION_IDS"].editMessage){this.onEdit(t);return true}return false}},{key:"isAutomated",value:function e(){return Object(M["a"])(this.props.subtype)}},{key:"isTemp",value:function e(){return this.props.ts.indexOf("x")>-1}},{key:"trackAction",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a={action:y["o"].CLICK,ui_element:t};r&&(a.step=y["r"].MORE_ACTIONS_MENU);var n=this.props.clogger;n.track(y["j"].MSG_ACTION,{contexts:{ui_context:a}})}},{key:"renderStar",value:function e(){var t=this.props,r=t.fileId,a=t.subtype,n=t.isStarred,i=t.isEphemeral,s=t.channel;if(i||"tombstone"===a)return null;var o="message";r&&(o="file_comment"===a?"file comment":"file");var l=void 0;l=n?"file"===o?ee.t("Unstar file"):"file comment"===o?ee.t("Unstar file comment"):ee.t("Unstar message"):"file"===o?ee.t("Star file"):"file comment"===o?ee.t("Star file comment"):ee.t("Star message");return p.a.createElement($["a"],{iconType:n?"small-star-filled":"small-star",label:l,onClick:this.onStar,"data-qa":"star_message",tooltipPosition:s?"top":"top-right"})}},{key:"renderShare",value:function e(){if(!this.props.showShare)return null;var t=this.props,r=t.ts,a=t.subtype,n=t.featureFileThreads,i=t.isEphemeral;if(i||"tombstone"===a||Object(R["isTempTs"])(r))return null;if(n&&"file_comment"===a)return null;var s="file_share"===a||"file_mention"===a?ee.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):ee.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return p.a.createElement($["a"],{iconType:"share-action",label:s,onClick:this.onShare,"data-qa":"share_message"})}},{key:"renderReaction",value:function e(){if(!this.props.showReact)return null;if("tombstone"===this.props.subtype||this.props.isEphemeral)return null;if("file_comment"===this.props.subtype&&this.props.featureFileThreads)return null;if(Object(L["a"])())return p.a.createElement(W["a"],{onEmojiSelected:this.onEmojiSelected,onClick:this.props.onEmojiPickerOpen,onClose:this.props.onEmojiPickerClose,showHandyReactions:true},p.a.createElement($["a"],{iconType:"small-reaction",label:ee.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),"data-qa":"add_reaction_action"}));return p.a.createElement($["a"],{iconType:"small-reaction",label:ee.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"})}},{key:"renderJump",value:function e(){if(!this.props.showJump)return null;if(!this.props.channel)return null;return p.a.createElement($["a"],{iconType:"jump",label:ee.t("Jump"),onClick:this.onJump,"data-qa":"jump_to_message"})}},{key:"renderComment",value:function e(){if(!this.props.showComment)return null;if(this.props.isFileAuthorExternal)return null;if(this.isAutomated()||this.isTemp()||this.props.isEphemeral)return null;if(this.props.featureFileThreads&&Object(F["b"])(this.props.subtype))return null;var t=void 0;t=this.props.fileId&&!this.props.featureFileThreads?ee.t("Add comment",{fallbackHash:"17279ab497dcbdcde85b46254a98e8017a95cebe"}):this.props.replyCount||"thread_broadcast"===this.props.subtype?ee.t("Reply to thread"):ee.t("Start a thread");return p.a.createElement($["a"],{iconType:"small-reply",label:t,onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread"})}},{key:"renderEllipsis",value:function e(){var t=this.props,r=t.renderMenuBelowTrigger,a=t.channel,n=t.featureOfflineMode,i=t.wasRecentlyOnline;if(!a)return null;var s=ee.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"});n&&!i&&(s=p.a.createElement(Q["a"],{tooltipLabel:ee.t("More actions")}));return p.a.createElement(J["e"],{renderMenu:this.renderMoreActionsMenu,position:r?"right-bottom":"top-right",allowanceX:r?ie.x:0,offsetX:r?ne.x:ae.x,offsetY:r?ne.y:ae.y,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},p.a.createElement($["a"],{iconType:"small-ellipsis",label:s,tooltipPosition:"top-right","data-qa":"more_message_actions"}))}},{key:"renderMoreActionsMenu",value:function e(t){var r=this.props,a=r.channel,n=r.ts,i=r.messageContainerType,s=r.rollup;var o=t.onTriggerClose,l=t.onMenuItemSelected;return p.a.createElement(Z["a"],{rollup:s,ts:n,channelId:a.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:o,onMenuItemSelected:l,messageContainerType:i})}},{key:"render",value:function e(){var t=g()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen});var r=ee.t("Message actions");return p.a.createElement(X["a"],{className:t,ariaLabel:r},this.renderReaction(),this.renderJump(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis())}}]);return t}(d["PureComponent"]);se.displayName="MessageActions";se.defaultProps=re;var oe=function e(t,r){var a=r.fileId,n=r.channelId;return{channel:Object(S["getChannelById"])(t,n),file:Object(C["getFileById"])(t,a),isFileAuthorExternal:Object(C["isFileAuthorExternal"])(t,a),featureFileThreads:Object(w["isFeatureEnabled"])(t,"feature_file_threads"),teamId:Object(I["getTeamId"])(t),clogger:Object(k["a"])({state:t}),featureOfflineMode:Object(w["isFeatureEnabled"])(t,"feature_offline_mode"),wasRecentlyOnline:Object(N["wasRecentlyOnline"])(t)}};var le={changeReactionFromUserAction:T["changeReactionFromUserAction"],pinMessage:O["pinMessage"],unpinMessage:O["unpinMessage"],updateStar:E["a"],openModal:Y["openModal"],previewFile:j["c"],showThread:j["g"],addReminderForMessage:A["a"]};t["a"]=Object(h["connect"])(oe,le)(se)},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(129);var n=r(25);var i=r(22);var s=Object(i["a"])("Adds a reminder for a message via API call",function(e,t,r){return e(Object(n["a"])({method:"reminders.addFromMessage",args:r}))});s.propTypes={time:a["b"].oneOf(["in 20 minutes","in 1 hour","in 3 hours","tomorrow","next week"]).isRequired,message_channel:a["b"].string.isRequired,message_ts:a["b"].string.isRequired,respond_in_channel:a["b"].bool}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(13);var n=Object(a["c"])("TS.ui.share_message_dialog.start",function(){return null});var i={start:n}},function(e,t,r){"use strict";var a=r(9);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(2);var h=r.n(m);var f=r(129);var v=r(1);var b=r.n(v);var g=r(14);var _=r(11);var y=r(77);var k=r(44);var O=r(19);var E=r(21);var w=r(26);var C=r(346);var S=r(1169);var j=r(1168);var I=r(990);var T=r(70);var N=r(4);var A=r(683);var R=Object(N["e"])("Count the number of characters over the message length limit",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.text;var i=Object(A["b"])(t(),{channelId:a,text:n}),s=i.rawText;return Math.max(0,s.length-T["MAX_MESSAGE_INPUT_LENGTH"])});R.propTypes={channelId:f["b"].string,text:f["b"].string};var M=R;var P=r(12);var x=r(36);var D=r(20);var F=r(18);var L=r(430);var B=r(1004);var U=r(63);var q=r(10);var G=r(657);var H=r(171);var W=r(3460);var V=r(143);var z=r(454);var Q=r(761);var K=r(666);var Y=60;var J=1e3;var Z=new q["b"]("message");var X={ts:f["b"].string.isRequired,text:f["b"].string.isRequired,saveMessageEdit:f["b"].func,channelId:f["b"].string,viewContext:f["b"].string,isSelfIm:f["b"].bool,setDidRequestToStopEditing:f["b"].func,updateEditState:f["b"].func,stopEditingMessage:f["b"].func,updateHasUnsavedChanges:f["b"].func,canDelete:f["b"].bool,canUnbroadcast:f["b"].bool,initialEditText:f["b"].string,initialFormattedText:f["b"].oneOfType([f["b"].string,f["b"].object]),didRequestToStopEditing:f["b"].bool,editWindowMin:f["b"].number,isAdminUser:f["b"].bool,useJumbomoji:f["b"].bool,messageContainerType:f["b"].string,openModal:f["b"].func,countCharsOverMessageLimit:f["b"].func,featureFileThreads:f["b"].bool};var $={saveMessageEdit:h.a.noop,channelId:null,viewContext:void 0,isSelfIm:false,setDidRequestToStopEditing:h.a.noop,updateEditState:h.a.noop,stopEditingMessage:h.a.noop,updateHasUnsavedChanges:h.a.noop,canDelete:true,canUnbroadcast:false,initialEditText:null,initialFormattedText:void 0,didRequestToStopEditing:false,editWindowMin:-1,isAdminUser:false,useJumbomoji:false,messageContainerType:void 0,openModal:h.a.noop,countCharsOverMessageLimit:h.a.identity,featureFileThreads:false};var ee="message_pane_edit_input";function te(e){Object(z["a"])({e:e,input_to_fill:"#"+ee,offset_y:-8})}var re=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setTextyRef=r.setTextyRef.bind(r);r.maybeSave=r.maybeSave.bind(r);r.onTimerInterval=r.onTimerInterval.bind(r);r.renderTimeoutErrorDialog=r.renderTimeoutErrorDialog.bind(r);r.renderLengthErrorDialog=r.renderLengthErrorDialog.bind(r);r.renderUnknownErrorDialog=r.renderUnknownErrorDialog.bind(r);r.stopEditingMessage=r.stopEditingMessage.bind(r);r.handleSaveEditError=r.handleSaveEditError.bind(r);r.onEnter=r.onEnter.bind(r);r.onTextChange=r.onTextChange.bind(r);r.renderInput=r.renderInput.bind(r);r.texty=null;r.syncEditStateOnUnmount=true;r.editWindowTimeout=null;r.componentDidUnmount=false;r.enableBroadcastKeywords=!(r.props.messageContainerType===T["MESSAGE_CONTAINERS"].THREADS_FLEXPANE);r.textyModules={tabcomplete:{searchOptions:{},positionMenu:function e(t){t.style.width=r.texty.container.offsetWidth+"px";Object(G["a"])(t,r.texty.container)},completers:["channels","emoji","members"]}};r.state={editSecondsRemaining:r.countRemainingSeconds(),numCharsOverLimit:r.props.countCharsOverMessageLimit({channelId:r.props.channelId,text:r.getEditText()})};return r}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.isSelfIm,a=t.editWindowMin;a>=0&&!r&&(this.editWindowTimeout=setInterval(this.onTimerInterval,J))}},{key:"componentWillReceiveProps",value:function e(t){t.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}},{key:"componentWillUpdate",value:function e(t,r){var a=r.editSecondsRemaining;a<=0&&clearInterval(this.editWindowTimeout)}},{key:"componentWillUnmount",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.viewContext;if(this.syncEditStateOnUnmount){var i=this.texty.value();var s=this.hasUnsavedChanges();this.props.updateEditState({viewContext:n,channelId:r,ts:a,editText:i,hasUnsavedChanges:s})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout);this.componentDidUnmount=true}},{key:"onEnter",value:function e(){this.maybeSave();return false}},{key:"onTextChange",value:function e(){var t=this.props,r=t.didRequestToStopEditing,a=t.channelId,i=t.ts,s=t.viewContext;var o=this.state.numCharsOverLimit;var l=this.props.countCharsOverMessageLimit({channelId:a,text:this.getEditText()});(l>0||o>0)&&this.setState(function(){return{numCharsOverLimit:l}});this.props.updateHasUnsavedChanges({viewContext:s,channelId:a,ts:i,hasUnsavedChanges:this.hasUnsavedChanges()});r&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(n()({},a,n()({},i,false)))}},{key:"onTimerInterval",value:function e(){var t=this;this.setState(function(){return{editSecondsRemaining:t.countRemainingSeconds()}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"getEditText",value:function e(){var t=this.props,r=t.initialEditText,a=t.text;if(this.texty)return this.texty.value();if(h.a.isString(r))return r;return a}},{key:"countRemainingSeconds",value:function e(){var t=this.props,r=t.isSelfIm,a=t.editWindowMin,n=t.ts;if(a<0||r)return null;var i=Object(H["j"])(n);var s=60*a*1e3;var o=i.getTime()+s;return Math.round((o-Date.now())/1e3)}},{key:"hasUnsavedChanges",value:function e(){var t=this.props,r=t.initialEditText,a=t.text;if(this.texty)return this.texty.value()!==a;return h.a.isString(r)&&a!==r}},{key:"startDelete",value:function e(){var t=this.props,r=t.channelId,a=t.text,n=t.canDelete,i=t.canUnbroadcast,s=t.ts,o=t.viewContext;if(n){this.props.openModal({element:b.a.createElement(j["a"],{channelId:r,ts:s})});return}if(i){this.props.openModal({element:b.a.createElement(S["a"],{channelId:r,ts:s})});return}var l=a.replace(/~/g,"");var c="~"+l+"~";this.props.saveMessageEdit({channelId:r,text:c,viewContext:o,ts:s}).catch(this.handleSaveEditError)}},{key:"maybeSave",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.viewContext;var i=this.state,s=i.editSecondsRemaining,o=i.numCharsOverLimit;if(o>0)return false;if(h.a.isNumber(s)&&s<=0)return false;if(this.texty.isEmpty({doIgnoreWhitespace:true})){this.startDelete();return false}this.props.saveMessageEdit({channelId:r,text:this.getEditText(),viewContext:n,ts:a}).catch(this.handleSaveEditError);return true}},{key:"handleSaveEditError",value:function e(t){var r=t.message;switch(r){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}},{key:"stopEditingMessage",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.viewContext;this.syncEditStateOnUnmount=false;this.props.stopEditingMessage({viewContext:n,channelId:r,ts:a})}},{key:"shouldShowLengthWarning",value:function e(){var t=this.state.numCharsOverLimit;return t>0}},{key:"shouldShowTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;return h.a.isNumber(t)&&t<Y}},{key:"shouldShowUnsavedWarning",value:function e(){var t=this.props.didRequestToStopEditing;return t&&this.hasUnsavedChanges()}},{key:"isSavingDisabled",value:function e(){var t=this.state.editSecondsRemaining;var r=h.a.isNumber(t)&&t<=0;return r||this.shouldShowLengthWarning()}},{key:"renderTimeoutErrorDialog",value:function e(){var t=this.props,r=t.editWindowMin,a=t.isAdminUser;var n=Object(H["m"])(r,{units:"minutes"});var i=Z.t("Message editing failed");var s=Z.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:b.a.createElement("b",null,n)});var o=void 0;a&&(o=Z.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,function(e){var t=e.text;return b.a.createElement("a",{href:"/admin/settings#message_editing",target:"_new"},t)}));this.props.openModal({element:b.a.createElement(Q["a"],{title:i},b.a.createElement("p",null,s),o)})}},{key:"renderUnknownErrorDialog",value:function e(){var t=Z.t("Message editing failed");var r=Z.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:b.a.createElement(Q["a"],{title:t},r)})}},{key:"renderLengthErrorDialog",value:function e(){var t=Z.t("Message editing failed");var r=Z.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:b.a.createElement(Q["a"],{title:t},r)})}},{key:"renderLengthWarning",value:function e(){var t=Z.t("text is too long!");return b.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},t)}},{key:"renderTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;var r=void 0;t<=0?r=Z.t("(your time to edit ran out)"):t<=Y&&(r=Z.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:t}));return b.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},r)}},{key:"renderUnsavedWarning",value:function e(){var t=Z.rt("Finish editing this message first! Or press <b>escape</b> if you\u2019ve changed your mind.",{fallbackHash:"3480a7bdfba580c87d36cd0fc11d286cecbdbe27"});return b.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},t)}},{key:"renderWarningMessages",value:function e(){var t=this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning();var r=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning();var a=this.shouldShowLengthWarning()&&this.renderLengthWarning();if(!t&&!r&&!a)return null;return b.a.createElement("div",{className:"c-message__editor__messages"},t,r,a)}},{key:"renderInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.modules,a=t.isOpen;var n=this.props,i=n.initialFormattedText,s=n.text,o=n.useJumbomoji,l=n.channelId,c=n.featureFileThreads;var u=s||!c?Z.t("Edit message"):Z.t("Add message");return b.a.createElement(L["g"],{id:ee,ref:this.setTextyRef,className:"c-message__editor__input",modules:r,ariaLabel:u,placeholder:u,initialText:i,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:o,isAutocompleteOpen:a,focusOnMount:true,useLegacyCreate:!Object(U["a"])(),channelId:l,enableBroadcastKeywords:this.enableBroadcastKeywords})}},{key:"renderLegacyAutocomplete",value:function e(){return this.renderInput({modules:this.textyModules})}},{key:"renderModernAutocomplete",value:function e(){return b.a.createElement(B["a"],{completeOnMembers:true,completeOnChannels:true,completeOnCommands:true,channelId:this.props.channelId,renderInput:this.renderInput,shouldCompleteOnTab:true})}},{key:"render",value:function e(){return b.a.createElement("div",{className:"c-message__editor","data-qa":"message_editor"},b.a.createElement("div",{className:"c-message__editor__input_container"},Object(U["a"])()?this.renderModernAutocomplete():this.renderLegacyAutocomplete(),b.a.createElement(D["c"],{onClick:te,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},b.a.createElement(F["a"],{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),b.a.createElement(F["a"],{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),b.a.createElement(F["a"],{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"}))),b.a.createElement("div",{className:"c-message__editor__footer"},b.a.createElement(D["d"],{type:"outline",size:"small",onClick:this.stopEditingMessage},Z.t("Cancel")),b.a.createElement(D["d"],{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},b.a.createElement(F["a"],{type:"enter",className:"margin_right_50"}),Z.t("Save Changes")),this.renderWarningMessages()))}}]);return t}(v["PureComponent"]);re.displayName="BaseEditMessage";re.defaultProps=$;function ae(e,t){var r=t.ts,a=t.channelId,n=t.viewContext,i=t.messageContainerType;var s=Object(k["getMessageByTimestamp"])(e,a,r);if(!s)return{};var o=Object(O["getChannelById"])(e,a);var l=Object(E["getTeamPref"])(e,"msg_edit_window_mins");var c=Object(w["getCurrentMember"])(e);var u=Object(E["getUserPref"])(e,"jumbomoji");var d=Object(x["canDeleteMessage"])(e,{message:s,channel:o,messageContainerType:i});var p=Object(x["canRemoveBroadcast"])(e,{message:s,channel:o,messageContainerType:i});var m=Object(C["getMessageEditData"])(e,{viewContext:n,channelId:a,ts:r}),f=m.editText,v=m.didRequestToStopEditing;var b=h.a.isString(f)&&f||s.text||"";var g=void 0;g=Object(_["isFeatureEnabled"])(e,"feature_modern_edit_format")?Object(W["a"])(e,{text:b}):Object(V["c"])(b,null,{for_edit:true});return{channelId:o.id,isSelfIm:Object(P["isYou"])(c.id,o),canDelete:d,canUnbroadcast:p,text:s.text||"",initialEditText:f,initialFormattedText:g,ts:r,editWindowMin:l,isAdminUser:c.is_admin,didRequestToStopEditing:v,useJumbomoji:u,featureFileThreads:Object(_["isFeatureEnabled"])(e,"feature_file_threads")}}var ne={saveMessageEdit:I["a"],setDidRequestToStopEditing:C["setDidRequestToStopEditing"],updateEditState:C["updateEditState"],stopEditingMessage:C["stopEditingMessage"],updateHasUnsavedChanges:C["updateHasUnsavedChanges"],openModal:y["openModal"],countCharsOverMessageLimit:M};var ie=Object(K["b"])(Object(g["connect"])(ae,ne)(re));ie.propTypes={ts:f["b"].string.isRequired,channelId:f["b"].string.isRequired};var se=t["a"]=ie},function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(10);var n=new a["b"]("message");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentUserId,r=e.pinnedBy,a=e.renderPinnedBy;if(r){if(r===t)return n.t("Pinned by you");return n.rt("Pinned by {member}",{member:a(r)})}return n.t("Pinned")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.long,r=void 0!==t&&t,a=e.renderStarButton,i=e.featureMessageLabelsCopy;if(r)return n.rt("<star>Added to your starred items</star>",null,a);if(i)return n.rt("<star>Starred</star>",null,a);return n.rt("<star>starred</star>",null,a)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,r=e.isStarred,a=e.isEphemeral,o=e.isBroadcast,l=e.isCustomResponse,c=e.isSliHighlight,u=e.isSelfIm,d=e.isSlackbotIm,p=e.currentUserId,m=e.pinnedBy,h=e.teamDisplayName,f=e.featureTeambot,v=e.renderPinnedBy,b=e.renderStarButton,g=e.renderHighlight,_=e.renderBroadcast,y=e.featureMessageLabelsCopy;if(a){if(!u&&!d)return n.t("Only visible to you");return null}if(y&&o){if(t&&r)return n.rt("<a>Also sent to the channel</a> \u2219 {pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:v}),starred:s({renderStarButton:b,featureMessageLabelsCopy:y}),fallbackHash:"d2f0c6a83913776accbe386c64ce06300680f44f"},_);if(r)return n.rt("<a>Also sent to the channel</a> \u2219 {starred}",{starred:s({renderStarButton:b,featureMessageLabelsCopy:y}),fallbackHash:"aead0d7a1eed4a8c18d29d9377a3f4fabc60f2cc"},_);if(t)return n.rt("<a>Also sent to the channel</a> \u2219 {pinned}",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:v}),fallbackHash:"b25a074514a36f2157703e7f0f332143878f55a8"},_);return n.rt("<a>Also sent to the channel</a>",{fallbackHash:"5ee7c5390f0e1abffe537265bbbbb3316238001a"},_)}if(l&&!f||l&&f&&(!h||h===n.t("Unknown Workspace"))){if(t&&r)return n.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:v}),starred:s({renderStarButton:b,featureMessageLabelsCopy:y})});if(r)return n.rt("{starred} \u2219 Custom response",{starred:s({long:true,renderStarButton:b,featureMessageLabelsCopy:y})});if(t)return n.rt("{pinned} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:v})});return n.t("Custom response")}if(l&&f){var k=h&&h.length>25?h.substring(0,25).concat("\u2026"):h;if(t&&r)return n.rt("{pinned} \u2219 {starred} \u2219 {teamName} custom response",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:v}),starred:s({renderStarButton:b,featureMessageLabelsCopy:y}),teamName:k});if(r)return n.rt("{starred} \u2219 {teamName} custom response",{starred:s({long:true,renderStarButton:b,featureMessageLabelsCopy:y}),teamName:k});if(t)return n.rt("{pinned} \u2219 {teamName} custom response",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:v}),teamName:k});return n.t("{teamName} custom response",{teamName:k})}if(c){if(t&&r)return n.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:g(),pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:v}),starred:s({renderStarButton:b,featureMessageLabelsCopy:y})});if(r)return n.rt("{starred} \u2219 {highlight}",{highlight:g(),starred:s({long:true,renderStarButton:b,featureMessageLabelsCopy:y})});if(t)return n.rt("{pinned} \u2219 {highlight}",{highlight:g(),pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:v})});return n.rt("{highlight}",{highlight:g()})}if(t&&r)return n.rt("{pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:v}),starred:s({renderStarButton:b,featureMessageLabelsCopy:y})});if(t)return i({currentUserId:p,pinnedBy:m,renderPinnedBy:v});if(r)return s({long:true,renderStarButton:b,featureMessageLabelsCopy:y});return null}},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(14);var f=r(15);var v=r.n(f);var b=r(2);var g=r.n(b);var _=r(279);var y=r(41);var k=r(10);var O=r(18);var E=r(20);var w=r(87);var C=r(54);var S=new k["b"]("message");var j={channelId:d["b"].string.isRequired,ts:d["b"].string.isRequired,isHovered:d["b"].bool,sliHighlight:d["b"].shape({loading:d["b"].bool,isHighlight:d["b"].bool,feedbackOptions:d["b"].object,justification:d["b"].string,feedback:d["b"].string}),onSliHighlightsDefaultFeedback:d["b"].func,onSliHighlightsSecondaryFeedbackOption:d["b"].func};var I={isHovered:false,justification:null,sliHighlight:null,onSliHighlightsDefaultFeedback:g.a.noop,onSliHighlightsSecondaryFeedbackOption:g.a.noop};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSliHighlightsFeedbackDefaultPositive=r.onSliHighlightsFeedbackDefaultPositive.bind(r);r.onSliHighlightsFeedbackDefaultNegative=r.onSliHighlightsFeedbackDefaultNegative.bind(r);r.renderNegativeFeedbackMenu=r.renderNegativeFeedbackMenu.bind(r);return r}s()(t,[{key:"onSliHighlightsFeedbackDefaultPositive",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(true)}},{key:"onSliHighlightsFeedbackDefaultNegative",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(false)}},{key:"renderPositiveHighlightLabel",value:function e(){return m.a.createElement("span",null,m.a.createElement("span",{className:"c-message__label__highlight_title"},S.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}},{key:"renderFeedbackControls",value:function e(){var t=this.props,r=t.isHovered,a=t.sliHighlight;var n="default_positive"===a.feedback;if(r){var i=v()({"c-message__label__highlight_positive":true,"c-message__label__highlight_positive--active":n});var s=v()({"c-message__label__highlight_negative":true,"c-message__label__highlight_negative--inactive":n});return m.a.createElement("span",null,S.t("Is this helpful?"),m.a.createElement(y["d"],{tip:n?S.t("Thank you!"):S.t("This was helpful")},m.a.createElement(E["c"],{className:i,onClick:this.onSliHighlightsFeedbackDefaultPositive},m.a.createElement(O["b"],{type:"thumbs-up",size:"inherit",inline:true}))),m.a.createElement(y["d"],{tip:S.t("This wasn\u2019t helpful")},m.a.createElement(E["c"],{className:s,onClick:this.onSliHighlightsFeedbackDefaultNegative},m.a.createElement(O["b"],{type:"thumbs-down",size:"inherit",inline:true}))))}return m.a.createElement(w["a"],{text:this.props.sliHighlight.justification})}},{key:"renderNegativeHighlightLabel",value:function e(){return m.a.createElement("span",null,m.a.createElement("strong",null,S.t("What\u2019s not working about this highlight?"))," ",S.t("Let us know, and we\u2019ll adjust."),"\xa0",m.a.createElement(C["e"],{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},m.a.createElement(E["c"],{className:"c-message__label__feedback_dropdown btn_unstyle sk_fill_blue"},S.t("Give Feedback")," ",m.a.createElement(O["b"],{type:"chevron-down",inline:true}))))}},{key:"renderNegativeFeedbackMenu",value:function e(t){var r=this;var a=this.props.sliHighlight.feedbackOptions;if(g.a.isEmpty(a))return null;return m.a.createElement(C["f"],t,g.a.map(a.negative,function(e){return m.a.createElement(C["b"],{key:e.args.ts,label:m.a.createElement(w["a"],{text:e.text,noLinking:true,showTooltips:false}),onSelected:function t(){return r.props.onSliHighlightsSecondaryFeedbackOption(e.args)}})}))}},{key:"render",value:function e(){var t=this.props.sliHighlight;if(!t.feedback||"default_positive"===t.feedback)return this.renderPositiveHighlightLabel();return this.renderNegativeHighlightLabel()}}]);return t}(p["PureComponent"]);T.displayName="SliHighlightsMessageLabel";T.defaultProps=I;function N(e,t){var r=t.channelId,a=t.ts,n=t.sliHighlight;return{onSliHighlightsDefaultFeedback:function t(i){return e(Object(_["setFeedbackForHighlight"])({channelId:r,ts:a,feedback:i?"default_positive":"default_negative",leftFeedback:i,args:n.feedbackOptions[i?"default_positive":"default_negative"].args,requestId:n.requestId}))},onSliHighlightsSecondaryFeedbackOption:function t(i){return e(Object(_["setFeedbackForHighlight"])({channelId:r,ts:a,feedback:"negative",leftFeedback:true,args:i,requestId:n.requestId}))}}}t["a"]=Object(h["connect"])(null,N)(T)},,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(2);var p=r.n(d);var m=r(1);var h=r.n(m);var f=r(129);var v=r(14);var b=r(11);var g=r(10);var _=r(15);var y=r.n(_);var k=r(2278);var O=r.n(k);var E=new g["b"]("threads");var w=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={spriteLoaded:false};return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=new Image;this.spritePromise=new Promise(function(e){r.onload=function(){e()};r.src=cdn_url+"/a7c8f/img/dragdrop_threads_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.useNightIllustration;var n=this.state.spriteLoaded;if(!r)return null;var i=false;if(Object(d["isBoolean"])(a))i=a;else{var s=new Date;var o=s.getHours();i=o>=20||o<8}var l=y()("p-thread_drag_overlay",{"p-thread_drag_overlay--night":!!i});var c="";n&&(c=h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_01"}),h.a.createElement("div",{className:"p-thread_drag_overlay__anim_card_01"}),h.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_02"})));var u=E.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately');return h.a.createElement("div",{className:l},h.a.createElement("div",{className:"p-thread_drag_overlay__info"},h.a.createElement("div",{className:"p-thread_drag_overlay__anim"},c),h.a.createElement("div",{className:"p-thread_drag_overlay__title"},E.t("Upload to thread")),h.a.createElement("div",{className:"p-thread_drag_overlay__subtitle"},u)))}}]);return t}(m["PureComponent"]);w.displayName="DragOverlay";w.defaultProps={featureFileThreads:true,useNightIllustration:void 0};function C(e){return{featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads")}}t["a"]=Object(v["connect"])(C)(w)},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(1);var h=r.n(m);var f=r(129);var v=r(14);var b=r(15);var g=r.n(b);var _=r(2);var y=r.n(_);var k=r(10);var O=r(123);var E=r(11);var w=r(105);var C=r(150);var S=r(1396);var j=r(2350);var I=r.n(j);var T={id:f["b"].string.isRequired,name:f["b"].string.isRequired,description:f["b"].string,isActive:f["b"].bool,handle:f["b"].string.isRequired,userCount:f["b"].number.isRequired,canEditUserGroups:f["b"].func.isRequired,canCreateAndDeleteUserGroups:f["b"].func.isRequired,featureSonicUserGroups:f["b"].bool,onClick:f["b"].func,showUserGroupDetails:f["b"].func.isRequired,featureLazyUserGroups:f["b"].bool};var N={description:null,isActive:false,canEditUserGroups:_["noop"],canCreateAndDeleteUserGroups:_["noop"],featureSonicUserGroups:false,featureLazyUserGroups:false,onClick:_["noop"]};var A=new k["b"]("user_groups");var R=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(r,["onRowClick","onMenuClick","renderContextMenu"]);return r}l()(t,[{key:"onRowClick",value:function e(t){var r=this.props,a=r.id,n=r.isActive;n&&this.props.showUserGroupDetails({groupId:a});this.props.onClick(t,a)}},{key:"onMenuClick",value:function e(t){var r=this.props.id;this.props.onClick(t,r)}},{key:"renderName",value:function e(){var t=this.props,r=t.name,a=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=g()("black",{sk_dark_gray:!a});var s=a?r:A.t("{name} (Deactivated)",{name:r});return h.a.createElement("div",{className:i},s)}},{key:"renderDescription",value:function e(){var t=this.props,r=t.description,a=t.isActive;if(!r)return null;var n=g()("overflow_ellipsis",{sk_dark_gray:!a});return h.a.createElement("div",{className:n},r)}},{key:"renderHandle",value:function e(){var t=this.props.handle;if(!t)return null;return h.a.createElement("span",{className:"p-user_group_row__handle"},t)}},{key:"renderContextMenu",value:function e(t){return h.a.createElement(S["c"],{menuProps:t,groupId:this.props.id,onClick:this.onMenuClick})}},{key:"render",value:function e(){var t=this.props,r=t.userCount,a=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=g()("p-user_group_row",{"p-user_group_row--inactive":!a});var s={onClick:this.onRowClick,renderMenu:this.renderContextMenu,className:i,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups()};return h.a.createElement(S["a"],s,this.renderName(),this.renderDescription(),this.renderHandle(),h.a.createElement("span",{className:"p-user_group_row__count"},A.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:r})))}}]);return t}(m["PureComponent"]);R.displayName="UserGroupRow";R.defaultProps=N;var M=function e(t,r){var a=r.id;var i=Object(O["getUserGroupById"])(t,a);var s={canEditUserGroups:function e(){return Object(w["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(w["b"])(t)},featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups"),featureLazyUserGroups:Object(E["isFeatureEnabled"])(t,"feature_lazy_user_groups")};if(!i)return s;return n()({name:Object(w["h"])(i),description:Object(w["e"])(i),handle:Object(w["f"])(i),userCount:Object(w["k"])(i),isActive:Object(w["q"])(i)},s)};var P={showUserGroupDetails:C["h"]};t["a"]=Object(v["connect"])(M,P)(R)},,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(2);var s=r(1);var o=r.n(s);var l=r(129);var c=r(31);var u=r(17);var d=r(77);var p=r(14);var m=r(761);var h=r(10);var f=r(420);var v=r(70);var b=r(11);var g=new h["b"]("file-upload");var _={SINGLE:"single",MULTIPLE:"multiple",ALL:"all"};function y(e){var t=e.type,r=e.proceedToNextDialog,a=e.featureFileThreads;if(!a)return null;var n=g.t("File too large");var s="";s=t===_.ALL?g.t("All of those files are too large and cannot be uploaded. The limit is {limit}.",{limit:Object(f["a"])(v["UPLOAD_FILE_SIZE_LIMIT_BYTES"])}):t===_.SINGLE?g.t("That file is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(f["a"])(v["UPLOAD_FILE_SIZE_LIMIT_BYTES"])}):g.t("We\u2019ll upload what we can, but one or more of those files is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(f["a"])(v["UPLOAD_FILE_SIZE_LIMIT_BYTES"])});var l=t===_.MULTIPLE?function(){Object(i["defer"])(function(){r()})}:i["noop"];return o.a.createElement(m["a"],{title:n,onGo:l},o.a.createElement("p",null,s))}y.displayName="FileUploadSizeAlert";y.defaultProps={type:_.SINGLE,proceedToNextDialog:i["noop"],featureFileThreads:true};function k(e){return{featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads")}}var O=Object(p["connect"])(k)(y);var E=r(5);var w=r.n(E);var C=r(6);var S=r.n(C);var j=r(7);var I=r.n(j);var T=r(8);var N=r.n(T);var A=r(15);var R=r.n(A);var M=r(626);var P=r(131);var x=r(469);var D=r(278);var F=r(859);var L=r(755);var B=r(617);var U=r(21);var q=r(928);var G=r(1409);function H(e){return new Promise(function(t,r){var a=Object(u["b"])();try{var n=new FileReader;n.onload=function(e){var r=Object(G["readFromBinaryFile"])(e.target.result);r&&"number"===typeof r.Orientation?t(r.Orientation):t(null)};n.readAsArrayBuffer(e)}catch(e){a.warn("Error reading exif data");a.warn(e);r(e)}})}var W=r(50);var V=r(48);var z=r(3453);var Q=r(118);var K=r(103);var Y=r(20);var J=r(190);var Z=r(88);var X=r(227);var $=r(65);var ee=r(3563);var te=r(961);var re=r(966);var ae=r(808);var ne=r(968);var ie=r(19);var se=r(44);var oe=r(36);var le=r(1446);var ce=r(1127);var ue=new h["b"]("file-upload");function de(e){var t=e.replyCount,r=e.replyUsers,a=e.replyUsersCount,n=e.featureFileThreads;if(!n)return null;if(!r)return null;return o.a.createElement("div",{className:"p-file_upload_dialog__thread_label"},ue.t("Sharing file in a thread"),o.a.createElement("br",null),o.a.createElement(le["a"],{replyCount:t,replyUsers:r,replyUsersCount:a}))}de.displayName="FileUploadThreadLabel";de.defaultProps={replyCount:void 0,replyUsers:void 0,replyUsersCount:void 0,featureFileThreads:true};function pe(e,t){var r=t.channelId,a=t.threadTs;var n=Object(se["getMessageByTimestamp"])(e,r,a);if(!n){var s=Object(ie["getChannelById"])(e,r);n=Object(B["d"])(s,a);n||(n=Object(ce["a"])(s,a))}if(!n)return{};var o=Object(oe["getReplyUsers"])(n);var l=Object(oe["getReplyUsersCount"])(n);if(n.replies){o=Object(i["map"])(n.replies,"user");n.user&&o.push(n.user);l=Object(i["uniq"])(o).length}else n.user&&o.push(n.user);return{replyCount:Object(oe["getReplyCount"])(n),replyUsers:o,replyUsersCount:l,featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads")}}var me=Object(p["connect"])(pe)(de);var he=r(2280);var fe=new h["b"]("file-upload");var ve="file-upload-name";var be="file-upload-share-with";var ge={files:l["b"].array.isRequired,featureFileThreads:l["b"].bool,selectedChannelId:l["b"].string,setSelectedChannel:l["b"].func,canPostInSelectedChannel:l["b"].bool,closeModal:l["b"].func,switchToChannel:l["b"].func,getShareableChannelId:l["b"].func,msgText:l["b"].string,setMsgText:l["b"].func,disallowedKeywordInMsgText:l["b"].string,initialText:l["b"].string,initialBroadcast:l["b"].bool,retentionDuration:l["b"].number,threadTs:l["b"].string,overStorageLimit:l["b"].bool,isStdPlan:l["b"].bool,isPlusPlan:l["b"].bool,isEnterprisePlan:l["b"].bool,channelType:l["b"].string,selectedChannelName:l["b"].string,fromPaste:l["b"].bool,teamId:l["b"].string,featureModernFileUpload:l["b"].bool,isOffline:l["b"].bool,featureOfflineMode:l["b"].bool};var _e={featureFileThreads:true,selectedChannelId:null,setSelectedChannel:i["noop"],canPostInSelectedChannel:false,selectedChannelIsGeneral:false,closeModal:i["noop"],switchToChannel:i["noop"],getShareableChannelId:i["noop"],canPost:function e(){return false},msgText:"",setMsgText:i["noop"],disallowedKeywordInMsgText:null,initialText:"",initialBroadcast:false,retentionDuration:null,threadTs:null,overStorageLimit:false,isStdPlan:false,isPlusPlan:false,isEnterprisePlan:false,channelType:"channel",selectedChannelName:"",fromPaste:false,teamId:void 0,featureModernFileUpload:false,isOffline:false,featureOfflineMode:false};var ye=Object(u["b"])();var ke=function(e){N()(t,e);function t(e){w()(this,t);var r=I()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGo=r.onGo.bind(r);r.onCancel=r.onCancel.bind(r);r.onCancelAll=r.onCancelAll.bind(r);r.onCancelDiscard=r.onCancelDiscard.bind(r);r.closeDialog=r.closeDialog.bind(r);r.onTextChange=r.onTextChange.bind(r);r.onFileNameChange=r.onFileNameChange.bind(r);r.onShareWithChange=r.onShareWithChange.bind(r);r.onBroadcastChange=r.onBroadcastChange.bind(r);r.onEditCollapsedFileNameClick=r.onEditCollapsedFileNameClick.bind(r);r.setFileNameInputRef=r.setFileNameInputRef.bind(r);r.fileNameInput=null;r.initialText=r.props.initialText;r.state=n()({confirmClose:false,confirmCancelAll:false,submitting:false},r.getStateForFileAtIndex(0),{broadcast:e.initialBroadcast});return r}S()(t,[{key:"componentDidMount",value:function e(){var t=this.props.files;var r=this.state||0,a=r.fileIndex;t&&this.maybeLoadImagePreview(t[a])}},{key:"onCancel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r=this.props.msgText;var a=this.state,n=a.confirmClose,i=a.confirmCancelAll;if(!n&&r&&r.length>v["CONFIRM_DISCARD_TEXT_LENGTH"]){this.setState(function(){return{confirmClose:true,confirmCancelAll:t}});return false}t||!this.hasMoreFiles()||i?this.closeDialog():this.goToNextFile();return false}},{key:"onCancelAll",value:function e(){return this.onCancel(true)}},{key:"onCancelDiscard",value:function e(){this.setState(function(){return{confirmClose:false,confirmCancelAll:false}});return false}},{key:"onGo",value:function e(){var t=this;var r=this.state,a=r.shareWith,n=r.fileName,i=r.fileIndex,s=r.confirmClose,o=r.broadcast;var l=this.props,c=l.selectedChannelId,u=l.msgText,d=l.threadTs,p=l.featureModernFileUpload,m=l.teamId;if(this.isGoDisabled())return false;if(s)return this.onCancel();this.initialText=null;var h=this.props,f=h.switchToChannel,v=h.files,b=h.getShareableChannelId;var g=v[i];var _=a?b({channelOrMemberId:c}):Promise.resolve(null);_.then(function(e){if(g.is_box||g.is_dropbox)Object(P["t"])({link:g.link,filename:g.name,title:n||t.initialFileName(g),channels:e,initial_comment:a?u:null,is_box:g.is_box,is_dropbox:g.is_dropbox,thread_ts:e?d:null,broadcast:e&&d?o:null});else if(p){var r=Object(z["a"])(m);r.uploadFile({file:g,shareData:{channelId:e,title:n||t.initialFileName(g),introMessage:a?u:null,threadTs:e?d:null,broadcast:e&&d?o:null,is_dropbox:g.is_dropbox,is_box:g.is_box}})}else Object(P["t"])({file:g,filename:g.name,title:n||t.initialFileName(g),channels:e,initial_comment:a?u:null,thread_ts:e?d:null,broadcast:e&&d?o:null});if(t.hasMoreFiles())t.goToNextFile();else{t.closeDialog();e&&!d&&f({id:e})}t.setState(function(){return{submitting:false}})});this.setState(function(){return{submitting:true}});return false}},{key:"onTextChange",value:function e(t){var r=t.text,a=t.overLimit;this.props.setMsgText(r);this.setState(function(){return{overMsgLengthLimit:a}})}},{key:"onFileNameChange",value:function e(t){this.setState(function(){return{fileName:t,overFileNameLimit:t.length>v["MAX_FILENAME_LENGTH"]}})}},{key:"onShareWithChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{shareWith:!!r}})}},{key:"onBroadcastChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{broadcast:!!r}})}},{key:"onEditCollapsedFileNameClick",value:function e(){this.setState(function(){return{collapseFileNameInput:false}});this.fileNameInput.focus()}},{key:"setFileNameInputRef",value:function e(t){this.fileNameInput=t}},{key:"getStateForFileAtIndex",value:function e(t){var r=this.props.files;var a=r[t];var n=a&&Object(i["includes"])(a.type,"image");return{fileIndex:t,defaultFileName:this.initialFileName(a),fileName:"",shareWith:true,previewDataUrl:null,overMsgLengthLimit:false,overFileNameLimit:false,exifOrientation:null,previewImageDimensionsRatio:null,collapseFileNameInput:n,broadcast:false}}},{key:"getStorageWarning",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.overStorageLimit,n=t.isStdPlan,i=t.isPlusPlan,s=t.isEnterprisePlan,l=t.files;var c=this.state.fileIndex;if(!r)return null;var u=l[c];if(!a||u.is_dropbox||u.is_box||u.is_external)return null;if(n)return fe.rt("Your workspace has reached the Standard plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,function(e){var t=e.text;return o.a.createElement("a",{href:"/pricing?ui_step=70&ui_element=5",target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"pricing_link","data-clog-ui-action":"click","data-clog-ui-step":"file_upload"},t)});if(i)return fe.rt("Your workspace has reached the Plus plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,function(e){var t=e.text;return o.a.createElement("a",{href:"/pricing?ui_step=70&ui_element=5",target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"pricing_link","data-clog-ui-action":"click","data-clog-ui-step":"file_upload"},t)});if(s)return fe.rt("It looks like your organization\u2019s reached the file storage limit. If that sounds wrong, you may want to <a>contact Slack</a>.",null,function(e){var t=e.text;return o.a.createElement("a",{href:"/help/requests/new",target:"_blank"},t)});return fe.rt("Your workspace has reached the Free plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade to a paid plan</a>.",null,function(e){var t=e.text;return o.a.createElement("a",{href:"/pricing?ui_step=70&ui_element=5",target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"pricing_link","data-clog-ui-action":"click","data-clog-ui-step":"file_upload"},t)})}},{key:"isMultipleFiles",value:function e(){return this.props.files.length>1}},{key:"hasMoreFiles",value:function e(){if(!this.isMultipleFiles())return false;var t=this.props.files;var r=this.state.fileIndex;return t.length>r+1}},{key:"goToNextFile",value:function e(){var t=this;var r=this.props,a=r.files,i=r.setMsgText;var s=this.state.fileIndex;this.setState(function(){return n()({confirmClose:false},t.getStateForFileAtIndex(s+1))},function(){t.maybeLoadImagePreview(a[s+1])});i("")}},{key:"closeDialog",value:function e(){var t=this;this.props.closeModal();if(this.initialText){var r=this.initialText;setTimeout(function(){t.props.threadTs?Object(B["g"])(r,t.props.initialBroadcast):Object(L["c"])(r)},10)}}},{key:"initialFileName",value:function e(t){if(!this.props.featureFileThreads)return t.name;if(!t.name||this.props.fromPaste)return fe.t("Pasted image at {date}",{date:Object(x["a"])(Date.now()/1e3)});return t.name}},{key:"isGoDisabled",value:function e(){var t=this.state,r=t.submitting,a=t.shareWith,n=t.overMsgLengthLimit,i=t.overFileNameLimit;var s=this.props,o=s.canPostInSelectedChannel,l=s.disallowedKeywordInMsgText,c=s.isOffline,u=s.featureOfflineMode;return r||a&&!o||a&&!!l||n||i||u&&c}},{key:"maybeLoadImagePreview",value:function e(t){var r=this;if(!window.FileReader)return;if(t.is_box||t.is_dropbox)return;if("string"===typeof t){this.setState(function(){return{previewDataUrl:"data:image/png;base64,"+t,collapseFileNameInput:true}});return}try{var a=new FileReader;a.onload=function(e){var a=e.target.result;if(!Object(i["startsWith"])(a,"data:image/"))return;r.loadImagePreviewWithOrientation(t,a)};a.onloadstart=function(e){if(e.total>33554432){ye.info("UPLOAD-DIALOG","Skipping image preview for large file: "+e.total);a.abort()}};a.readAsDataURL(t)}catch(e){ye.warn("Error loading upload preview");ye.warn(e)}}},{key:"loadImagePreviewWithOrientation",value:function e(t,r){var a=this;H(t).then(function(e){if(!e||1===e){a.setState(function(){return{previewDataUrl:r,collapseFileNameInput:true}});return}var t=new Image;t.onload=function(){var n=t.width;var i=t.height;var s=i/n;a.setState(function(){return{previewDataUrl:r,previewImageDimensionsRatio:s,exifOrientation:e,collapseFileNameInput:true}})};t.src=r})}},{key:"renderBroadcastCheckbox",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.threadTs,n=t.channelType,i=t.selectedChannelName;var s=this.state.broadcast;if(!r||!a)return null;var l="broadcast-to-channel";var c="";c="mpim"===n?fe.t("Also send to the group"):"im"===n?fe.t("Also send as direct message"):fe.rt("Also send to <span></span>",null,function(){return o.a.createElement("span",{className:"p-file_upload_dialog__broadcast_channel_name"},i)});return o.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--broadcast"},o.a.createElement(Z["a"],{text:c,className:"p-file_upload_dialog__broadcast_label",htmlFor:l,type:"inline"},o.a.createElement(X["a"],{className:"p-file_upload_dialog__broadcast_checkbox",id:l,checked:s,onChange:this.onBroadcastChange})))}},{key:"renderImagePreview",value:function e(){if(!this.props.featureFileThreads)return null;var t=this.state,r=t.previewDataUrl,a=t.previewImageDimensionsRatio,n=t.exifOrientation,i=t.fileName;if(!this.state.previewDataUrl)return null;var s=fe.t("Preview of {fileName}",{fileName:i});var l=void 0;2===n?l="scaleX(-1)":3===n?l="rotate(180deg)":4===n?l="rotate(180deg) scaleX(-1)":5===n?l="rotate(90deg) scale("+a+", -"+a+")":6===n?l="rotate(90deg) scale("+a+")":7===n?l="rotate(90deg) scale(-"+a+", "+a+")":8===n&&(l="rotate(-90deg) scale("+a+", "+a+")");var c={};l&&(c.transform=l);return o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement("div",{className:"p-file_upload_dialog__preview"},o.a.createElement("div",{style:c},o.a.createElement("img",{className:"p-file_upload_dialog__preview_image",src:r,alt:s}))))}},{key:"renderShareWith",value:function e(){var t=this.props,r=t.threadTs,a=t.featureFileThreads,n=t.selectedChannelId;var i=this.state.shareWith;if(!a)return null;if(r)return o.a.createElement(me,{channelId:n,threadTs:r});return o.a.createElement(Z["a"],{text:fe.t("Share with:"),htmlFor:be,type:"inline"},o.a.createElement(X["a"],{id:be,defaultChecked:i,onChange:this.onShareWithChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props,r=t.selectedChannelId,a=t.setSelectedChannel,n=t.threadTs;var i=this.state.shareWith;if(n)return null;return o.a.createElement(re["a"],{initialChannelId:r,onChange:a,isDisabled:!i})}},{key:"renderCancelAllButton",value:function e(){if(!this.props.featureFileThreads)return null;return o.a.createElement(Y["d"],{type:"outline",className:"p-file_upload_dialog__footer_cancel_all",onClick:this.onCancelAll,tabIndex:"-1","data-qa":"dialog-cancel-all"},fe.t("Cancel All"))}},{key:"renderMultiFileShareInputs",value:function e(){if(!this.isMultipleFiles())return null;return o.a.createElement("div",{className:"p-file_upload_dialog__section"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderFooterExtra",value:function e(){if(this.isMultipleFiles())return this.renderCancelAllButton();return o.a.createElement("div",{className:"p-file_upload_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderWarning",value:function e(){var t=this.getStorageWarning();var r=Object(ne["a"])(this.props);if(!r&&!t)return null;return o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement(Q["d"],{type:"inline",level:"warning"},t?o.a.createElement("span",{className:"p-share_dialog__warning_message"},t):null,r))}},{key:"renderCollapsedFileName",value:function e(){var t=this.props.featureFileThreads;var r=this.state,a=r.defaultFileName,n=r.collapseFileNameInput;if(!t)return null;var i=R()("p-file-upload_dialog__preview_file_name",{"p-file-upload_dialog__preview_file_name--hide":!n});var s=fe.rt("edit");var l=fe.rt("Edit file name: {fileName}",{fileName:a});return o.a.createElement("div",{className:i},o.a.createElement("span",{className:"p-file-upload_dialog__preview_file_name_text"},a),o.a.createElement($["a"],{className:"p-file-upload_dialog__preview_file_name_edit",onClick:this.onEditCollapsedFileNameClick,tabIndex:n?null:"-1","aria-label":l},s))}},{key:"renderExpandedFileNameInput",value:function e(){var t=this.state,r=t.fileName,a=t.defaultFileName,n=t.collapseFileNameInput;var i=R()("p-file_upload_dialog__file_name_input",{"p-file_upload_dialog__file_name_input--hide":n});return o.a.createElement(Z["a"],{text:fe.t("File name"),htmlFor:ve,className:i},o.a.createElement(J["a"],{id:ve,name:ve,value:r,maxCharacterLimit:v["MAX_FILENAME_LENGTH"],counterMinimumCharacters:v["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onFileNameChange,placeholder:a,tabIndex:n?"-1":null,ref:this.setFileNameInputRef}))}},{key:"renderFileNameInput",value:function e(){return o.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section_file_name"},this.renderCollapsedFileName(),this.renderExpandedFileNameInput())}},{key:"renderRetentionWarning",value:function e(){var t=this.props,r=t.retentionDuration,a=t.featureFileThreads;if(!a||!r)return null;return o.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--retention_duration"},o.a.createElement("span",null,fe.t("Due to your custom file retention policy, this file will be deleted after {duration}",{duration:Object(q["a"])(r)})))}},{key:"render",value:function e(){if(!this.props.featureFileThreads)return null;var t=this.props,r=t.files,a=t.msgText,n=t.selectedChannelId,i=t.threadTs,s=t.featureOfflineMode,l=t.isOffline;var c=this.state,u=c.fileIndex,d=c.shareWith,p=c.confirmClose;var m=fe.t("Add a message about the file",{fallbackHash:"76426947fe26fc3fa06b6bf272f55b1b45248641"});var h=fe.t("Upload a file",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6"});this.isMultipleFiles()&&(h=fe.t("Upload a file ({number} of {total})",{number:u+1,total:r.length,fallbackHash:"98feccd29dda6dfff23692d85c563aada4877d37"}));var f=false;var v=R()("p-file_upload_dialog",{"p-file_upload_dialog--multiple":this.isMultipleFiles()&&!p});var b="";s&&l&&(b=o.a.createElement(ee["a"],{tooltipLabel:fe.t("Upload file")}));return o.a.createElement(K["a"],{className:v,title:h,shouldCloseOnOverlayClick:f,onClose:this.onCancel,onCancel:p?this.onCancelDiscard:this.onCancel,onGo:p?this.onCancel:this.onGo,useSlackScrollbarWithPadding:true,cancelText:p?fe.t("No, keep it"):null,goButtonIsDisabled:this.isGoDisabled(),goButtonTooltip:b,goButtonText:p?fe.t("Yes, discard the message"):fe.t("Upload"),footerText:p?fe.t("Closing the window will discard your message"):this.renderFooterExtra(),goButtonType:p?"danger":"primary",showCancelButton:p},this.renderWarning(),o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement(te["a"],{channelId:n,threadTs:i,text:a,onTextChange:this.onTextChange,ariaLabel:m,placeholder:m,enabled:d,focusOnMount:true,onEnter:this.onGo,enableBroadcastKeywords:!i})),this.renderBroadcastCheckbox(),this.renderImagePreview(),this.renderFileNameInput(),this.renderMultiFileShareInputs(),this.renderRetentionWarning())}}]);return t}(s["PureComponent"]);ke.displayName="FileUploadDialog";ke.defaultProps=_e;function Oe(e,t){var r=Object(W["getCurrentTeam"])(e);var a={overStorageLimit:Object(V["isOverStorageLimit"])(r),isStdPlan:Object(V["isOnStandardPlan"])(r),isPlusPlan:Object(V["isOnPlusPlan"])(r),isEnterprisePlan:Object(V["isEnterpriseTeam"])(r)};return n()({},Object(ae["b"])(e,t),a,{retentionDuration:parseInt(Object(U["getTeamPref"])(e,"file_retention_type"),10)?Object(U["getTeamPref"])(e,"file_retention_duration"):null,featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads"),teamId:r.id,featureModernFileUpload:Object(b["isFeatureEnabled"])(e,"feature_modern_file_upload"),isOffline:!Object(M["isOnline"])(e),featureOfflineMode:Object(b["isFeatureEnabled"])(e,"feature_offline_mode")})}var Ee={closeModal:d["closeModal"],switchToChannel:D["a"],getShareableChannelId:F["a"]};var we=Object(p["connect"])(Oe,Ee)(ke);var Ce=Object(ae["a"])(we);var Se=new h["b"]("file_upload");function je(e){var t=e.proceedToNextDialog,r=e.featureModernFileUpload,a=e.excludedFiles,n=e.goodFiles;if(!r)return null;var s=void 0;var l=void 0;var c=void 0;var u=void 0;var d=void 0;var p=void 0;var h="";var f=a.length+n.length;if(a.length){s=[];u="";p="";s=a.map(function(e){return o.a.createElement("li",{key:e.name},o.a.createElement("strong",null,e.name))});if(a.length>1){l=a.length===f?Se.t("All files unsupported"):Se.t("Some files unsupported");d=Se.t("Try uploading a .zip version of these files instead.");u=o.a.createElement("ul",null,s)}else if(1===a.length){l=Se.t("File unsupported");d=Se.t("Try uploading a .zip version of this file instead.")}n.length>1?p=Se.t("(Don\u2019t worry, your other files are next.)"):1===n.length&&(p=Se.t("(Don\u2019t worry, your other file is next.)"));c=1===a.length?Se.rt("Sorry, {excluded_file} is a type of file not supported by Slack",{excluded_file:o.a.createElement("strong",null,a[0].name)}):a.length===f?Se.t("Sorry, none of those file types are supported by Slack."):Se.t("Sorry, some of those file types are not supported by Slack.");h=o.a.createElement("div",null,o.a.createElement("p",null,c),u,o.a.createElement("p",null,d),o.a.createElement("p",null,p))}var v=function e(){Object(i["defer"])(function(){t()})};return o.a.createElement(m["a"],{title:l,onGo:v},h)}je.displayName="FileUploadUnsupportedAlert";je.defaultProps={proceedToNextDialog:i["noop"],featureModernFileUpload:false,goodFiles:[],excludedFiles:[]};function Ie(e){return{featureModernFileUpload:Object(b["isFeatureEnabled"])(e,"feature_modern_file_upload")}}var Te=Object(p["connect"])(Ie)(je);var Ne=r(61);var Ae=Object(c["b"])("Takes N files and opens the file upload dialog",function(e,t,r){var a=r.files,s=r.threadTs;if(!a||!a.length){Object(u["a"])({getState:t}).error("No files passed to openFileUploadDialog");return}var l=function t(i){var l=Me(s);var c=Re(s);e(Object(d["openModal"])({element:o.a.createElement(Ce,n()({},r,{files:i,initialText:c,initialBroadcast:l,fileSizeExceeded:i.length<a.length}))}))};var c=function t(r){var a=r.filter(function(e){return Object(i["isString"])(e)||"undefined"===typeof e.size||e.size<=v["UPLOAD_FILE_SIZE_LIMIT_BYTES"]});if(a.length<r.length)1===r.length?e(Object(d["openModal"])({element:o.a.createElement(O,{type:_.SINGLE})})):a.length?e(Object(d["openModal"])({element:o.a.createElement(O,{type:_.MULTIPLE,proceedToNextDialog:function e(){return l(a)}})})):e(Object(d["openModal"])({element:o.a.createElement(O,{type:_.ALL})}));else{if(!a.length)return;l(a)}};var p=function t(r){Object(Ne["validateFiles"])(r,function(t){t.excludedFiles.length?e(Object(d["openModal"])({element:o.a.createElement(Te,{goodFiles:t.goodFiles,excludedFiles:t.excludedFiles,proceedToNextDialog:function e(){return c(t.goodFiles)}})})):t.goodFiles.length&&c(t.goodFiles)})};Object(b["isFeatureEnabled"])(t(),"feature_modern_file_upload")?p(a):c(a)});Ae.propTypes={files:l["b"].array.isRequired,initialChannelId:l["b"].string,threadTs:l["b"].string,fromPaste:l["b"].bool};function Re(e){if(e&&Object(B["b"])()===e){var t=Object(B["h"])();t&&Object(B["c"])();return t}var r=Object(L["b"])();r&&Object(L["c"])("");return r}function Me(e){if(!e||Object(B["b"])()!==e)return false;return Object(B["e"])()}var Pe=t["a"]=Ae},,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r(14);var h=r(2);var f=r(23);var v=function e(t,r){return t+"-"+r};var b={add:function e(t,r,a){this.sections||(this.sections={});var n=v(t,r);if(this.sections[n])throw new Error('A section has already been specified at "'+n+'"');this.sections[n]=a},remove:function e(t,r){if(!this.sections)return;var a=v(t,r);if(!this.sections[a])return;this.sections[a]=null;delete this.sections[a]},get:function e(t,r){if(!this.sections)return;return this.sections[v(t,r)]}};var g=b;var _={teamId:d["b"].string.isRequired,order:d["b"].number.isRequired,component:d["b"].object.isRequired,children:d["b"].node};var y={order:void 0,component:void 0,children:null};var k=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.component,i=a.focus,s=a.blur;var o=Object(h["isFunction"])(i)&&Object(h["isFunction"])(s);if(o)return l()(r);throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}s()(t,[{key:"componentWillMount",value:function e(){var t=this.props,r=t.teamId,a=t.order,n=t.component;g.add(r,a,n)}},{key:"componentWillUnmount",value:function e(){var t=this.props,r=t.teamId,a=t.order;g.remove(r,a)}},{key:"render",value:function e(){return this.props.children}}]);return t}(p["PureComponent"]);k.displayName="FocusableSection";k.defaultProps=y;var O=function e(t){return{teamId:Object(f["getTeamId"])(t)}};var E=Object(m["connect"])(O)(k);r.d(t,"a",function(){return E});r.d(t,"b",function(){return g})},function(e,t,r){"use strict";var a=r(129);var n=r(3);var i=r.n(n);var s=r(25);var o=r(22);var l=r(36);var c=1.75;var u=100;var d=10;var p=Object(o["a"])("Deletes a message",function(e,t,r){var a=r.channelId,n=r.ts,o=r.broadcastDelete,m=r.attempts,h=void 0===m?0:m;if(Object(l["isTempTs"])(n))return Promise.reject(new Error("message_not_found"));var f={channel:a,ts:n};o&&(f.broadcast_delete=true);return e(Object(s["a"])({method:"chat.delete",args:f})).catch(function(t){var a=t.data,n=void 0===a?{}:a;if("message_not_found"===n.error&&h<d){var s=u*c;return Promise.delay(s).then(function(){return e(p(i()({},r,{attempts:h+1})))})}return Promise.reject(new Error(n.error||"unknown_error"))})});p.propTypes={channelId:a["b"].string,ts:a["b"].string,broadcastDelete:a["b"].bool,attempts:a["b"].number};var m=p;var h=Object(o["a"])("Deletes a join/leave message rollup",function(e,t,r){var a=r.channelId,n=r.firstMessageTs,i=r.lastMessageTs;var o={channel_id:a,first_message_ts:n,last_message_ts:i};return e(Object(s["a"])({method:"chat.deleteBulkJoinLeave",args:o}))});h.propTypes={channelId:a["b"].string,firstMessageTs:a["b"].string,lastMessageTs:a["b"].string};var f=h;var v=r(4);var b=r(19);var g=r(122);var _=r(44);var y=r(279);var k=r(11);var O=r(241);var E=Object(v["e"])("Animate a message deletion as well as calling the delete API endpoint",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts,i=r.broadcastDelete,s=void 0!==i&&i,o=r.rollupTimestamps;var c=t();var u=Object(_["getMessageByTimestamp"])(c,a,n);var d=o&&o.length>1;if(!u)return Promise.resolve();d||Object(l["getReplyCount"])(u)||e(Object(y["animateDeleteMessage"])({channelId:a,ts:n}));if(Object(l["isTempTs"])(n)||Object(l["isEphemeral"])(u)){var p=Object(k["isFeatureEnabled"])(c,"feature_react_threads");if(Object(l["isReply"])(u)&&!p){var h=Object(b["getChannelById"])(c,a);Object(O["j"])(h,u)}return Promise.resolve()}if(d){var v=o[0];var E=o.pop();return e(f({channelId:a,firstMessageTs:v,lastMessageTs:E}))}return e(m({channelId:a,ts:n,broadcastDelete:s})).then(function(){if(Object(k["isFeatureEnabled"])(c,"feature_degraded_send")&&Object(l["isReply"])(u)){var e=Object(b["getChannelById"])(c,a);Object(O["j"])(e,u)}}).catch(function(t){if("message_not_found"!==t.message){e(Object(y["animateDeleteMessage"])({channelId:a,ts:n,isDeleting:false}));if(s)e(Object(_["showThreadBroadcast"])({channelId:a,ts:n}));else{e(Object(g["addTimestamps"])({channelId:a,timestamps:[n]}));e(Object(_["addMessages"])([u]))}}throw t})});E.propTypes={channelId:a["b"].string.isRequired,ts:a["b"].string.isRequired,broadcastDelete:a["b"].bool,rollupTimestamps:a["b"].array};var w=t["a"]=E;var C={animateAndDeleteMessageApi:E}},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(2);var f=r(15);var v=r.n(f);var b=r(2122);var g={title:d["b"].string,titleClass:d["b"].string,description:d["b"].node,className:d["b"].string};var _={title:"",titleClass:"",description:null,className:""};var y=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;var t=this.props,r=t.titleClass,a=t.className;var n=v()(a,r);return m.a.createElement("h4",{className:n},this.props.title)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return m.a.createElement("span",{className:"sk_dark_grey"},this.props.description)}},{key:"render",value:function e(){return m.a.createElement("div",{className:"p-ent_settings_item_header"},this.renderTitle(),this.renderDescription())}}]);return t}(p["PureComponent"]);y.displayName="SettingsItemHeader";y.defaultProps=_;var k=y;var O=r(10);var E=r(20);var w=r(2124);var C=new O["b"]("enterprise_settings");var S={editOnly:d["b"].bool,enabled:d["b"].bool,onEnable:d["b"].func,onDisable:d["b"].func,onEdit:d["b"].func.isRequired};var j={editOnly:false,enabled:false,onEnable:h["noop"],onDisable:h["noop"],onEdit:h["noop"]};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onEnable=r.onEnable.bind(r);r.onDisable=r.onDisable.bind(r);r.onEdit=r.onEdit.bind(r);return r}s()(t,[{key:"onEnable",value:function e(t){t.stopPropagation();this.props.onEnable(t)}},{key:"onDisable",value:function e(t){t.stopPropagation();this.props.onDisable(t)}},{key:"onEdit",value:function e(t){t.stopPropagation();this.props.onEdit(t)}},{key:"renderEnable",value:function e(){var t=C.t("Enable");return m.a.createElement("div",{className:"p-ent_settings_item_button_control"},m.a.createElement(E["d"],{type:"outline",size:"small",onClick:this.onEnable},t))}},{key:"renderDisable",value:function e(){var t=C.t("Disable");var r=C.t("Edit");return m.a.createElement("div",{className:"p-ent_settings_item_button_control"},m.a.createElement(E["d"],{type:"danger",size:"small",onClick:this.onDisable},t),m.a.createElement(E["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},r))}},{key:"renderEdit",value:function e(){var t=C.t("Edit");return m.a.createElement("div",{className:"p-ent_settings_item_button_control"},m.a.createElement(E["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},t))}},{key:"renderButtonControls",value:function e(){var t=this.props,r=t.editOnly,a=t.enabled;if(r)return this.renderEdit();return a?this.renderDisable():this.renderEnable()}},{key:"render",value:function e(){return this.renderButtonControls()}}]);return t}(p["PureComponent"]);I.displayName="SettingsItemButtonControl";I.defaultProps=j;var T=I;var N=r(2126);var A={label:d["b"].string.isRequired,state:d["b"].string.isRequired,type:d["b"].string.isRequired,description:d["b"].node,onClick:d["b"].func,control:d["b"].object.isRequired};var R={label:"",state:"",type:"",description:null,onClick:h["noop"],control:{}};var M=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderLabel",value:function e(){return m.a.createElement(k,{title:this.props.label,className:"p_ent_settings_item__label"})}},{key:"renderState",value:function e(){var t=this.props,r=t.state,a=t.description;return m.a.createElement(k,{title:r,description:a,className:"bold"})}},{key:"renderButtonControl",value:function e(){var t=this.props.control,r=t.editOnly,a=t.enabled,n=t.onEnable,i=t.onDisable,s=t.onEdit;return m.a.createElement(T,{editOnly:r,enabled:a,onEnable:n,onDisable:i,onEdit:s})}},{key:"renderControl",value:function e(){return"button"===this.props.control.type?this.renderButtonControl():null}},{key:"render",value:function e(){return m.a.createElement("div",{className:"p-ent_settings_item",onClick:this.props.onClick,role:"presentation"},this.renderLabel(),this.renderState(),this.renderControl())}}]);return t}(p["PureComponent"]);M.displayName="SettingsItem";M.defaultProps=R;var P=t["a"]=M},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(2);var f=r(15);var v=r.n(f);var b=r(151);var g=r(14);var _=r(16);var y=r(12);var k={unreadCount:d["b"].number};var O={unreadCount:void 0};var E=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.unreadCount;if(!t)return null;var r=t<10?t:"9+";return m.a.createElement("span",{className:"c-search_autocomplete__unread_count"},r)}}]);return t}(p["PureComponent"]);E.displayName="UnreadCount";function w(e,t){var r=t.model;var a=void 0;a=Object(_["isMember"])(r)?Object(_["getImUnreadCountByMember"])(e,r):Object(y["getBadgeCountWithMuted"])(r);return{unreadCount:a}}E.defaultProps=O;var C=Object(g["connect"])(w)(E);var S=r(10);var j=r(18);var I=new S["b"]("search");var T=function e(){return m.a.createElement("div",{className:"c-search_autocomplete__suggestion_hint"},m.a.createElement("span",{className:"description"},I.t("Jump to")),m.a.createElement(j["b"],{type:"enter",size:"inherit",className:"ts_icon_enter modifier_icon"}))};T.displayName="JumpHint";var N=T;var A={id:d["b"].string.isRequired,index:d["b"].number.isRequired,suggestion:d["b"].object.isRequired,isSelected:d["b"].bool.isRequired,onDelete:d["b"].func,onMouseUp:d["b"].func.isRequired,onMouseMove:d["b"].func.isRequired,onMouseLeave:d["b"].func.isRequired};var R={onDelete:h["noop"]};var M=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.id,a=t.index,n=t.isSelected,i=t.suggestion,s=t.onMouseUp,o=t.onMouseMove,l=t.onMouseLeave,c=t.showUnreadCount,u=t.hasChannelNameCollision;var d=i.suggestion_replacement,p=i.exact_string,h=i.featureVector;var f=this.props.suggestion.channel||this.props.suggestion.mpim;return m.a.createElement("li",{"data-index":a,"data-type":i.type,"data-replacement":d,"data-exact-string":p,"data-feature-vector":h,"data-is-navigational":true,"data-id":f.id,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onMouseLeave:l,onClick:s,className:v()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement(b["a"],{className:"c-search_autocomplete__channel",channel:f,showDraftIcon:true,inline:true,showTeamIconForXwsChannels:true,showTeamIconForLocalChannels:u}),c&&m.a.createElement(C,{model:f}),!c&&m.a.createElement(N,null))}}]);return t}(p["PureComponent"]);M.displayName="SuggestionChannel";var P=M;M.defaultProps=R;var x=r(87);var D=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.id,a=t.index,n=t.isSelected,i=t.suggestion,s=t.onMouseUp,o=t.onMouseMove,l=t.onMouseLeave,c=t.showUnreadCount;var u=i.suggestion_replacement,d=i.exact_string,p=i.featureVector,h=i.file;return m.a.createElement("div",{"data-index":a,"data-type":i.type,"data-replacement":u,"data-exact-string":d,"data-feature-vector":p,"data-id":h.id,"data-is-navigational":true,key:h.id,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onMouseLeave:l,onClick:s,className:v()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement(j["b"],{file:"tiny",type:this.props.suggestion.type,className:"c-search_autocomplete__icon  c-search_autocomplete__icon--file"}),m.a.createElement("div",{className:"c-search_autocomplete__filetype_title"},m.a.createElement(x["a"],{text:h.title,noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true})),m.a.createElement("div",{className:"c-search_autocomplete__filetype_description"},this.props.suggestion.fileTypeDescription),!c&&m.a.createElement(N,null))}}]);return t}(p["PureComponent"]);D.displayName="SuggestionFile";var F=D;D.defaultProps=R;var L=r(3);var B=r.n(L);var U=r(310);var q=r(20);var G=r(868);var H=r(280);var W=r(699);var V=new S["b"]("search");var z={exactQueryString:d["b"].string.isRequired,onDelete:d["b"].func,searchSessionId:d["b"].string.isRequired,querySessionId:d["b"].string.isRequired,searchDelete:d["b"].func.isRequired};var Q={onDelete:h["noop"]};var K=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(h["bindAll"])(r,["onClick"]);return r}s()(t,[{key:"onClick",value:function e(t){var r=this;t.stopPropagation();var a=Object(G["a"])(this.props.exactQueryString,{shouldRenderEmojiAsText:true});this.props.searchDelete({terms:a,searchSessionId:this.props.searchSessionId,querySessionId:this.props.querySessionId}).then(function(){r.props.onDelete()})}},{key:"render",value:function e(){return m.a.createElement("div",{className:"c-search_autocomplete__suggestion_action"},m.a.createElement(q["c"],{className:"c-search_autocomplete__suggestion_delete",onClick:this.onClick,label:V.t("delete history result")},m.a.createElement(j["b"],{type:"times_small",inline:true})))}}]);return t}(p["PureComponent"]);K.displayName="Delete";K.defaultProps=Q;var Y=function e(t){return{searchDelete:function e(){return t(H["g"].apply(void 0,arguments))},querySessionId:t(Object(W["getQuerySessionId"])()),searchSessionId:t(Object(W["getSearchSessionId"])())}};var J=Object(g["connect"])(null,Y)(K);var Z=r(27);var X=new S["b"]("search");var $=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.user,a=t.fullNameOrDisplayName,n=t.filter;var i=Object(_["isRestricted"])(r);var s=Object(_["isExternal"])(r);var o=Object(_["isBotUser"])(r);var l=Object(Z["isHighResolutionScreen"])();var c=void 0;c="from"===n?X.t("from")+":":"to"===n?X.t("to")+":":null;var u={backgroundImage:"url("+(l?r.profile.image_48:r.profile.image_24)+")"};return m.a.createElement("span",{className:v()("token","member_token",{ra:i,external_member:s}),"data-member-id":r.id},m.a.createElement("span",{className:v()({bot:o,member_preview_link:!o},"member_image","thumb_24"),"data-member-id":r.id,"data-thumb-size":"24",style:u,"aria-hidden":"true"})," ",m.a.createElement("span",{className:"token_label"},c,m.a.createElement("b",null,"@",a)))}}]);return t}(p["PureComponent"]);$.displayName="SuggestionQueryUserFilterBase";$.defaultProps={filter:void 0};var ee=function e(t,r){var a=r.user;return{fullNameOrDisplayName:Object(_["getPrefCompliantMemberName"])(t,a)}};var te=Object(g["connect"])(ee)($);var re=te;var ae=new S["b"]("search");var ne=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.isPrivate,a=t.displayName,n=t.unknownFallback;var i=ae.t("in:");return m.a.createElement("span",{className:"token channel_token"},m.a.createElement("span",{className:"token_label"},a?m.a.createElement(m.a.Fragment,null,i,r&&m.a.createElement("i",{className:"ts_icon ts_icon_lock"}),m.a.createElement("b",null,a)):n))}}]);return t}(p["PureComponent"]);ne.displayName="SuggestionQueryInFilterBase";ne.defaultProps={displayName:void 0,isPrivate:void 0};var ie=function e(t,r){var a=r.user,n=r.channel,i=r.fallbackChannelName,s=r.unknownFallback;var o="";var l=n&&Object(y["isPrivateChannel"])(n);a&&!Object(_["isUnknownOrNonExistent"])(a)?o="@"+Object(_["getPrefCompliantMemberName"])(t,a):n&&!Object(y["isUnknownOrNonExistent"])(n)?o=Object(y["getDisplayNameForChannel"])(t,n):Object(y["isUnknownOrNonExistent"])(n)&&(o=i);return{unknownFallback:s,displayName:o,isPrivate:l}};var se=Object(g["connect"])(ie)(ne);se.propTypes={user:d["b"].object,channel:d["b"].object,fallbackChannelName:d["b"].string,unknownFallback:d["b"].string.isRequired};se.defaultProps={user:void 0,channel:void 0,fallbackChannelName:void 0};var oe=se;var le=r(143);var ce=new S["b"]("search");var ue=function e(t){var r=t.theAttribute;return m.a.createElement("span",{className:"token has_token"},m.a.createElement("span",{className:"token_label"},ce.t("has"),":",m.a.createElement("b",null,m.a.createElement(x["a"],{text:Object(le["a"])(r),noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true}))))};ue.displayName="SuggestionQueryHasFilter";var de=ue;var pe=new S["b"]("search");var me=function e(t){var r=t.fileType;return m.a.createElement("span",{className:"token type_token"},m.a.createElement("span",{className:"token_label"},pe.t("type"),":",m.a.createElement("b",null,r)))};me.displayName="SuggestionQueryTypeFilter";var he=me;var fe=new S["b"]("search");var ve={before:fe.t("before"),after:fe.t("after"),on:fe.t("on"),during:fe.t("during")};var be=function e(t){var r=t.modifierName,a=t.dateString;return m.a.createElement("span",{className:"token date_token"},m.a.createElement("span",{className:"token_label"},ve[r],": ",a))};be.displayName="SuggestionQueryDateFilter";var ge=be;var _e=new S["b"]("search");function ye(e,t){return Object(h["flatten"])(e.map(function(e){return[t,e]})).slice(1)}var ke=B()({},A,{getClnMessage:d["b"].func.isRequired});var Oe=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this;var r=this.props,a=r.id,n=r.index,i=r.isSelected,s=r.suggestion,o=r.onDelete,l=r.onMouseUp,c=r.onMouseMove,u=r.onMouseLeave,d=r.showUnreadCount;var p=s.suggestion_replacement,h=s.exact_string,f=s.token_list,b=s.featureVector,g=s.isCustomDateFilter,_=s.deletable;return m.a.createElement("div",{"data-index":n,"data-type":s.type,"data-replacement":p,"data-exact-string":h,"data-feature-vector":b,"data-is-custom-date-filter":g,"data-is-replacement-full":true,id:a,role:"option",tabIndex:"-1","aria-selected":i,onMouseMove:c,onMouseLeave:u,onClick:l,className:v()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":i})},m.a.createElement(j["b"],{type:"search-medium",className:"c-search_autocomplete__icon c-search_autocomplete__icon--query"}),m.a.createElement("div",{className:"c-search_autocomplete__query_text truncate-left"},m.a.createElement("span",{className:"truncate-left__content"},m.a.createElement("span",{className:"truncate_left__size"},ye(f.map(function(e,r){switch(true){case e.is_type_string:return m.a.createElement(x["a"],{key:r,text:t.props.getClnMessage(e.string),noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true});case e.is_type_phrase:return"\u201c"+e.phrase+"\u201d";case e.is_type_member_filter&&e.is_type_from_filter:return m.a.createElement(re,{key:r,filter:"from",user:e.user});case e.is_type_member_filter&&e.is_type_to_filter:return m.a.createElement(re,{key:r,filter:"to",user:e.user});case e.is_type_member:return m.a.createElement(re,{key:r,user:e.user});case e.is_type_in_filter:return m.a.createElement(oe,{key:r,user:e.user,channel:e.channel,fallbackChannelName:e.fallbackChannelName,unknownFallback:e.string});case e.is_type_has_filter:return m.a.createElement(de,{key:r,theAttribute:e.thing});case e.is_type_type_filter:return m.a.createElement(he,{key:r,fileType:e.file_type});case e.is_type_date_filter:return m.a.createElement(ge,{key:r,modifierName:e.modifier_name,dateString:e.date_string_normalized});default:return null}})," ")))),_?m.a.createElement(J,{exactQueryString:h,onDelete:o}):!d&&m.a.createElement("div",{className:"c-search_autocomplete__suggestion_hint"},m.a.createElement("span",{className:"description"},_e.t("Search")),m.a.createElement(j["b"],{type:"enter",size:"inherit",className:"c-search_autocomplete__action_icon"})))}}]);return t}(p["PureComponent"]);Oe.displayName="SuggestionQuery";Oe.defaultProps=R;var Ee=function e(t){return{getClnMessage:function e(r){return Object(U["b"])(t,r,{isInternalMessage:false})}}};var we=Object(g["connect"])(Ee)(Oe);var Ce=r(358);var Se=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.id,a=t.index,n=t.isSelected,i=t.suggestion,s=t.onMouseUp,o=t.onMouseMove,l=t.onMouseLeave,c=t.showUnreadCount;var u=i.suggestion_replacement,d=i.exact_string,p=i.featureVector,h=i.user;var f=h&&h.profile&&h.profile.bot_id;return m.a.createElement("div",{"data-index":a,"data-type":i.type,"data-replacement":u,"data-exact-string":d,"data-feature-vector":p,"data-bot-id":f,"data-id":h.id,"data-is-navigational":true,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onMouseLeave:l,onClick:s,className:v()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement("span",{className:"c-search_autocomplete__member"},m.a.createElement(Ce["a"],{id:h.id,size:"small",showPresence:true,showAvatar:true})),c&&m.a.createElement(C,{model:h}),!c&&m.a.createElement(N,null))}}]);return t}(p["PureComponent"]);Se.displayName="SuggestionUser";var je=Se;Se.defaultProps=R;var Ie=r(337);var Te=r(1933);var Ne={className:d["b"].string,displayName:d["b"].string.isRequired,id:d["b"].string.isRequired,inline:d["b"].bool};var Ae={className:void 0,inline:false};var Re=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.displayName,a=t.id,n=t.inline,i=t.className;return m.a.createElement("span",{className:v()("c-team_name",i)},m.a.createElement(Ie["b"],{id:a,className:"c-team_name__icon"}),m.a.createElement("span",{className:v()("c-team_name__text",{"c-team_name__text--inline":!n})},r))}}]);return t}(p["PureComponent"]);Re.displayName="TeamName";var Me=Re;Re.defaultProps=Ae;Re.displayName="TeamName";var Pe=Me;var xe=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.id,a=t.index,n=t.isSelected,i=t.suggestion,s=t.onMouseUp,o=t.onMouseMove,l=t.onMouseLeave,c=t.showUnreadCount;var u=i.suggestion_replacement,d=i.exact_string,p=i.featureVector;var h=this.props.suggestion.team;return m.a.createElement("li",{"data-index":a,"data-type":i.type,"data-replacement":u,"data-exact-string":d,"data-feature-vector":p,"data-is-navigational":true,"data-id":h.id,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onMouseLeave:l,onClick:s,className:v()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement(Pe,{className:"c-search_autocomplete__team",id:h.id,displayName:h.name,inline:true}),!c&&m.a.createElement(N,null))}}]);return t}(p["PureComponent"]);xe.displayName="SuggestionTeam";var De=xe;xe.defaultProps=R;var Fe=r(1935);var Le={className:d["b"].string,displayName:d["b"].string.isRequired,id:d["b"].string.isRequired,inline:d["b"].bool};var Be={className:void 0,inline:false};var Ue=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.displayName,a=t.id,n=t.className,i=t.inline;var s="list";"Vall_threads"===a?s="small-reply":"Vall_unreads"===this.props.id&&(s="list");return m.a.createElement("span",{className:v()("c-view_name",n)},m.a.createElement(j["b"],{className:"c-view_name__icon",type:s}),m.a.createElement("span",{className:v()("c-view_name__text",{"c-view_name__text--inline":!i})},r))}}]);return t}(p["PureComponent"]);Ue.displayName="ViewName";var qe=Ue;Ue.defaultProps=Be;Ue.displayName="ViewName";var Ge=qe;var He=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.id,a=t.index,n=t.isSelected,i=t.suggestion,s=t.onMouseUp,o=t.onMouseMove,l=t.onMouseLeave,c=t.showUnreadCount;var u=i.suggestion_replacement,d=i.exact_string,p=i.featureVector;var h=this.props.suggestion.view;return m.a.createElement("li",{"data-index":a,"data-type":i.type,"data-replacement":u,"data-exact-string":d,"data-feature-vector":p,"data-is-navigational":true,"data-id":h.id,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onMouseLeave:l,onClick:s,className:v()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},m.a.createElement(Ge,{displayName:h.name,id:h.id,className:"c-search_autocomplete__view",inline:true}),!c&&m.a.createElement(N,null))}}]);return t}(p["PureComponent"]);He.displayName="SuggestionView";var We=He;He.defaultProps=R;r.d(t,"b",function(){return Qe});var Ve={index:d["b"].number.isRequired,suggestion:d["b"].object.isRequired,isSelected:d["b"].bool.isRequired,onSelected:d["b"].func,onAccept:d["b"].func,onDelete:d["b"].func,showUnreadCount:d["b"].bool,hasChannelNameCollision:d["b"].bool};var ze={onAccept:h["noop"],onSelected:h["noop"],onDelete:h["noop"],showUnreadCount:false,hasChannelNameCollision:false};var Qe=function e(t){return"c-search_autcomplete__suggestion_"+t};var Ke=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(h["bindAll"])(r,["onMouseUp","onMouseMove","onMouseLeave","onDelete"]);return r}s()(t,[{key:"onMouseUp",value:function e(t){if(0!==t.button||t.ctrlKey)return;this.props.onAccept()}},{key:"onMouseMove",value:function e(){if(this.props.isSelected)return;this.props.onSelected(this.props.index,true)}},{key:"onMouseLeave",value:function e(){this.props.onSelected(null,false)}},{key:"onDelete",value:function e(){this.props.onDelete(this.props.suggestion)}},{key:"componentTypeFromSuggestion",value:function e(t){if(t.is_type_query_completion)return we;if(t.is_type_user)return je;if(t.is_type_channel||t.is_type_mpim)return P;if(t.is_type_file)return F;if(t.is_type_view)return We;if(t.is_type_team)return De;return null}},{key:"render",value:function e(){var t=Qe(this.props.index);return m.a.createElement(this.componentTypeFromSuggestion(this.props.suggestion),{id:t,index:this.props.index,isSelected:this.props.isSelected,suggestion:this.props.suggestion,onDelete:this.onDelete,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,showUnreadCount:this.props.showUnreadCount,hasChannelNameCollision:this.props.hasChannelNameCollision})}}]);return t}(p["PureComponent"]);Ke.displayName="Suggestion";Ke.defaultProps=ze;var Ye=t["a"]=Ke},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(31);var s=r(77);var o=r(5);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(7);var p=r.n(d);var m=r(8);var h=r.n(m);var f=r(14);var v=r(129);var b=r(35);var g=r.n(b);var _=r(2);var y=r(10);var k=r(103);var O=r(472);var E=r(475);var w=r(121);var C=r(88);var S=r(164);var j=r(29);var I=r(824);var T=r(1001);var N=r(171);var A=r(21);var R=r(1011);var M=r(11);var P=r(1745);var x=new y["b"]("do_not_disturb");var D={snoozeNotifications:v["b"].func.isRequired,do24hrTime:v["b"].bool,featureBetterSnooze:v["b"].bool,clogger:v["b"].object};var F={do24hrTime:false,featureBetterSnooze:false,clogger:{track:_["noop"]}};var L=function(e){h()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=g()().add(1,"hour").startOf("hour");var n=a.format("YYYY-MM-DD");var i=a.format("HH:mm");var s=g()(n+" "+i).unix();r.state={snoozeEndDate:n,snoozeEndTime:i,snoozeEndTs:s};r.onDateChange=r.onDateChange.bind(r);r.onTimeChange=r.onTimeChange.bind(r);r.onGo=r.onGo.bind(r);return r}u()(t,[{key:"onDateChange",value:function e(t){var r=this.state.snoozeEndTime;this.setState(function(){return{snoozeEndDate:t,snoozeEndTs:g()(t+" "+r).unix()}})}},{key:"onTimeChange",value:function e(t){var r=this.state.snoozeEndDate;this.setState(function(){return{snoozeEndTime:t,snoozeEndTs:g()(r+" "+t).unix()}})}},{key:"onGo",value:function e(){var t=this.props.clogger;var r=this.state.snoozeEndTs;var a=Object(T["a"])(r);if(a<=0)return;this.props.snoozeNotifications({duration:a});t.track(j["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:j["h"].DURATION_CUSTOM})}},{key:"getTimeSelectOptions",value:function e(){var t=this.props.do24hrTime;var r=this.state.snoozeEndDate;var a=r===g()().format("YYYY-MM-DD");var n=g()().format("HH:mm");var i=Object.keys(I["a"]).filter(function(e){return!(a&&e<n)}).map(function(e){return{value:e,label:t?e:I["a"][e]}});return i}},{key:"render",value:function e(){var t=this.props.featureBetterSnooze;var r=this.state,a=r.snoozeEndDate,i=r.snoozeEndTime,s=r.snoozeEndTs;if(!t)return null;var o=Object(T["a"])(s)<=0;var l=Object(N["g"])(s);var c=x.t("Pause notifications until\u2026");var u=g()().format("YYYY-MM-DD");var d=g()().add(1,"year").format("YYYY-MM-DD");return n.a.createElement(k["a"],{title:c,goButtonText:x.t("Pause Notifications"),goButtonType:"primary",goButtonIsDisabled:o,onGo:this.onGo,showCancelButton:false},n.a.createElement(C["a"],{htmlFor:"dnd_dialog_date_button",text:x.t("Date")},n.a.createElement(O["d"],{position:"bottom",offsetX:67,dateFormat:"YYYY-MM-DD",selectedDate:a,onDateChange:this.onDateChange,disableDatesBefore:u,disableDatesAfter:d},n.a.createElement(w["a"],{id:"dnd_dialog_date_button",className:"p-dnd_dialog__date_picker_trigger",ariaLabel:x.t("Date to snooze notifications until")},l))),n.a.createElement(C["a"],{htmlFor:"dnd_dialog_time_select",text:x.t("Time")},n.a.createElement(E["b"],{id:"dnd_dialog_time_select",options:this.getTimeSelectOptions(),onChange:this.onTimeChange,value:i,useFilteredInput:false,usePlaceholderOption:false})))}}]);return t}(a["PureComponent"]);L.displayName="DndDialog";L.defaultProps=F;var B=function e(t){return{featureBetterSnooze:Object(M["isFeatureEnabled"])(t,"feature_better_snooze"),do24hrTime:Object(A["getUserPref"])(t,"time24"),clogger:Object(S["a"])({state:t})}};var U={snoozeNotifications:R["e"]};var q=Object(f["connect"])(B,U)(L);var G=Object(i["b"])("Opens the DND dialog",function(e,t,r){e(Object(s["openModal"])({element:n.a.createElement(q,r)}))});G.propTypes=null;var H=t["a"]=G},function(e,t,r){"use strict";var a=r(129);var n=r(1);var i=r.n(n);var s=r(14);var o=r(76);var l=r(2);var c=r(11);var u=r(41);var d=r(10);var p=r(1121);var m=new d["b"]("threads");var h={participantNames:a["b"].arrayOf(a["b"].string).isRequired,replyUsersCount:a["b"].number.isRequired,replyCount:a["b"].number,prefixWithReplyCount:a["b"].bool,includesSelf:a["b"].bool,broadcastPreabmle:a["b"].bool};var f={replyCount:0,prefixWithReplyCount:false,includesSelf:false,broadcastPreabmle:false};function v(e){var t=e.participantNames,r=e.includesSelf,a=e.replyCount,n=e.replyUsersCount,i=e.prefixWithReplyCount,s=e.broadcastPreabmle;if(s&&1===a)return m.rt("1 reply");if(r)switch(n){case 1:if(i)return m.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from you",{replyCount:a});return m.t("Just you");case 2:if(i)return m.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName} and you",{replyCount:a,userName:t[0]});return m.rt("{userName} and you",{userName:t[0]});default:if(i)return m.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and you",{replyCount:a,userName1:t[0],userName2:t[1]});return m.rt("{userName1}, {userName2}, and you",{userName1:t[0],userName2:t[1]})}var o=Object(d["g"])(t,{noEscape:true}).join("");if(i)return m.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {names}",{replyCount:a,names:o});return o}function b(e){var t=e.participantNames,r=e.replyUsersCount,a=e.replyCount,n=e.prefixWithReplyCount;var s=r-2;var o=Object(l["drop"])(t,2);o.length<s&&o.push(m.rt("others"));var c=Object(d["g"])(o,{noEscape:true}).join("");if(n)return m.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{replyCount:a,userName1:t[0],userName2:t[1],numOthers:s},function(e){var t=e.text;return i.a.createElement(u["d"],{tip:c},i.a.createElement("span",null,t))});return m.rt("{userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{userName1:t[0],userName2:t[1],numOthers:s},function(e){var t=e.text;return i.a.createElement(u["d"],{tip:c},i.a.createElement("span",null,t))})}function g(e){var t=e.participantNames,r=e.replyUsersCount,a=e.replyCount,n=e.prefixWithReplyCount,s=e.includesSelf,o=e.broadcastPreabmle;return i.a.createElement("span",{className:"p-thread_participant_list"},r<=3?v({participantNames:t,replyCount:a,replyUsersCount:r,prefixWithReplyCount:n,includesSelf:s,broadcastPreabmle:o}):b({participantNames:t,replyCount:a,replyUsersCount:r,prefixWithReplyCount:n}))}g.displayName="ThreadParticipantList";g.defaultProps=f;var _=Object(o["pure"])(g);function y(e,t){var r=t.replyUsers;var a=t.replyUsersCount;var n=Object(c["getCurrentUserId"])(e);var i=Object(l["includes"])(r,n);var s=Object(p["a"])(e,r);a||(a=r.length);return{participantNames:s,replyUsersCount:a,includesSelf:i}}var k=Object(s["connect"])(y)(g);r.d(t,false,function(){return});r.d(t,false,function(){return});var O=t["a"]=k},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,,,,,,,,,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,,,,,,function(e,t,r){},function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},function(e,t,r){var a=r(1768),n=r(1036),i=r(1333),s=r(1334);var o=i(function(e,t){return s(e)?a(e,n(t,1,s,true)):[]});e.exports=o},function(e,t,r){var a=r(1039),n=r(1330),i=r(1331),s=r(1332),o=r(1309),l=r(1042);var c=200;function u(e,t,r,u){var d=-1,p=n,m=true,h=e.length,f=[],v=t.length;if(!h)return f;r&&(t=s(t,o(r)));if(u){p=i;m=false}else if(t.length>=c){p=l;m=false;t=new a(t)}e:while(++d<h){var b=e[d],g=null==r?b:r(b);b=u||0!==b?b:0;if(m&&g===g){var _=v;while(_--)if(t[_]===g)continue e;f.push(b)}else p(t,g,u)||f.push(b)}return f}e.exports=u},function(e,t,r){var a=r(1770),n=r(911),i=r(1041);function s(){this.size=0;this.__data__={hash:new a,map:new(i||n),string:new a}}e.exports=s},function(e,t,r){var a=r(1771),n=r(1772),i=r(1773),s=r(1774),o=r(1775);function l(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var a=e[t];this.set(a[0],a[1])}}l.prototype.clear=a;l.prototype["delete"]=n;l.prototype.get=i;l.prototype.has=s;l.prototype.set=o;e.exports=l},function(e,t,r){var a=r(910);function n(){this.__data__=a?a(null):{};this.size=0}e.exports=n},function(e,t){function r(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=r},function(e,t,r){var a=r(910);var n="__lodash_hash_undefined__";var i=Object.prototype;var s=i.hasOwnProperty;function o(e){var t=this.__data__;if(a){var r=t[e];return r===n?void 0:r}return s.call(t,e)?t[e]:void 0}e.exports=o},function(e,t,r){var a=r(910);var n=Object.prototype;var i=n.hasOwnProperty;function s(e){var t=this.__data__;return a?void 0!==t[e]:i.call(t,e)}e.exports=s},function(e,t,r){var a=r(910);var n="__lodash_hash_undefined__";function i(e,t){var r=this.__data__;this.size+=this.has(e)?0:1;r[e]=a&&void 0===t?n:t;return this}e.exports=i},function(e,t){function r(){this.__data__=[];this.size=0}e.exports=r},function(e,t,r){var a=r(912);var n=Array.prototype;var i=n.splice;function s(e){var t=this.__data__,r=a(t,e);if(r<0)return false;var n=t.length-1;r==n?t.pop():i.call(t,r,1);--this.size;return true}e.exports=s},function(e,t,r){var a=r(912);function n(e){var t=this.__data__,r=a(t,e);return r<0?void 0:t[r][1]}e.exports=n},function(e,t,r){var a=r(912);function n(e){return a(this.__data__,e)>-1}e.exports=n},function(e,t,r){var a=r(912);function n(e,t){var r=this.__data__,n=a(r,e);if(n<0){++this.size;r.push([e,t])}else r[n][1]=t;return this}e.exports=n},function(e,t,r){var a=r(913);function n(e){var t=a(this,e)["delete"](e);this.size-=t?1:0;return t}e.exports=n},function(e,t){function r(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=r},function(e,t,r){var a=r(913);function n(e){return a(this,e).get(e)}e.exports=n},function(e,t,r){var a=r(913);function n(e){return a(this,e).has(e)}e.exports=n},function(e,t,r){var a=r(913);function n(e,t){var r=a(this,e),n=r.size;r.set(e,t);this.size+=r.size==n?0:1;return this}e.exports=n},function(e,t){var r="__lodash_hash_undefined__";function a(e){this.__data__.set(e,r);return this}e.exports=a},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t,r){var a=r(1789),n=r(1790),i=r(1791);function s(e,t,r){return t===t?i(e,t,r):a(e,n,r)}e.exports=s},function(e,t){function r(e,t,r,a){var n=e.length,i=r+(a?1:-1);while(a?i--:++i<n)if(t(e[i],i,e))return i;return-1}e.exports=r},function(e,t){function r(e){return e!==e}e.exports=r},function(e,t){function r(e,t,r){var a=r-1,n=e.length;while(++a<n)if(e[a]===t)return a;return-1}e.exports=r},function(e,t,r){var a=r(1793);var n=Math.max;function i(e,t,r){t=n(void 0===t?e.length-1:t,0);return function(){var i=arguments,s=-1,o=n(i.length-t,0),l=Array(o);while(++s<o)l[s]=i[t+s];s=-1;var c=Array(t+1);while(++s<t)c[s]=i[s];c[t]=r(l);return a(e,this,c)}}e.exports=i},function(e,t){function r(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}e.exports=r},function(e,t,r){var a=r(1795),n=r(1797);var i=n(a);e.exports=i},function(e,t,r){var a=r(1796),n=r(1316),i=r(842);var s=n?function(e,t){return n(e,"toString",{configurable:true,enumerable:false,value:a(t),writable:true})}:i;e.exports=s},function(e,t){function r(e){return function(){return e}}e.exports=r},function(e,t){var r=800,a=16;var n=Date.now;function i(e){var t=0,i=0;return function(){var s=n(),o=a-(s-i);i=s;if(o>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}e.exports=i},function(e,t,r){var a=r(1036),n=r(1333),i=r(1799),s=r(1334);var o=n(function(e){return i(a(e,1,s,true))});e.exports=o},function(e,t,r){var a=r(1039),n=r(1330),i=r(1331),s=r(1042),o=r(1800),l=r(1043);var c=200;function u(e,t,r){var u=-1,d=n,p=e.length,m=true,h=[],f=h;if(r){m=false;d=i}else if(p>=c){var v=t?null:o(e);if(v)return l(v);m=false;d=s;f=new a}else f=t?[]:h;e:while(++u<p){var b=e[u],g=t?t(b):b;b=r||0!==b?b:0;if(m&&g===g){var _=f.length;while(_--)if(f[_]===g)continue e;t&&f.push(g);h.push(b)}else if(!d(f,g,r)){f!==h&&f.push(g);h.push(b)}}return h}e.exports=u},function(e,t,r){var a=r(1335),n=r(1801),i=r(1043);var s=1/0;var o=a&&1/i(new a([,-0]))[1]==s?function(e){return new a(e)}:n;e.exports=o},function(e,t){function r(){}e.exports=r},function(e,t,r){var a=r(771),n=r(1803),i=r(725);var s="[object Object]";var o=Function.prototype,l=Object.prototype;var c=o.toString;var u=l.hasOwnProperty;var d=c.call(Object);function p(e){if(!i(e)||a(e)!=s)return false;var t=n(e);if(null===t)return true;var r=u.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==d}e.exports=p},function(e,t,r){var a=r(1310);var n=a(Object.getPrototypeOf,Object);e.exports=n},function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default=c;var n=r(1805);var i=l(n);var s=r(842);var o=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.default;if(!e)return function(e){return function(){return e.apply(void 0,arguments)}};function n(e){return a({},e,{actionsById:(0,i.default)(e.actionsById,function(e){return a({},e,{action:r(e.action)})}),committedState:t(e.committedState),computedStates:e.computedStates.map(function(e){return a({},e,{state:t(e.state)})})})}return function(t){return function(r,i,s){var o="redux-dev-session-"+e;var l=void 0;try{var c=localStorage.getItem(o);if(c){l=n(JSON.parse(c))||i;t(r,i)}}catch(e){console.warn("Could not read debug session from localStorage:",e);try{localStorage.removeItem(o)}finally{l=void 0}}var u=t(r,l,s);return a({},u,{dispatch:function e(t){u.dispatch(t);try{localStorage.setItem(o,JSON.stringify(u.getState()))}catch(e){console.warn("Could not write debug session to localStorage:",e)}return t}})}}}},function(e,t,r){var a=r(1315),n=r(1304),i=r(1806);function s(e,t){var r={};t=i(t,3);n(e,function(e,n,i){a(r,n,t(e,n,i))});return r}e.exports=s},function(e,t,r){var a=r(1807),n=r(1830),i=r(842),s=r(648),o=r(1840);function l(e){if("function"==typeof e)return e;if(null==e)return i;if("object"==typeof e)return s(e)?n(e[0],e[1]):a(e);return o(e)}e.exports=l},function(e,t,r){var a=r(1808),n=r(1829),i=r(1340);function s(e){var t=n(e);if(1==t.length&&t[0][2])return i(t[0][0],t[0][1]);return function(r){return r===e||a(r,e,t)}}e.exports=s},function(e,t,r){var a=r(1336),n=r(1337);var i=1,s=2;function o(e,t,r,o){var l=r.length,c=l,u=!o;if(null==e)return!c;e=Object(e);while(l--){var d=r[l];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return false}while(++l<c){d=r[l];var p=d[0],m=e[p],h=d[1];if(u&&d[2]){if(void 0===m&&!(p in e))return false}else{var f=new a;if(o)var v=o(m,h,p,e,t,f);if(!(void 0===v?n(h,m,i|s,o,f):v))return false}}return true}e.exports=o},function(e,t,r){var a=r(911);function n(){this.__data__=new a;this.size=0}e.exports=n},function(e,t){function r(e){var t=this.__data__,r=t["delete"](e);this.size=t.size;return r}e.exports=r},function(e,t){function r(e){return this.__data__.get(e)}e.exports=r},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t,r){var a=r(911),n=r(1041),i=r(1040);var s=200;function o(e,t){var r=this.__data__;if(r instanceof a){var o=r.__data__;if(!n||o.length<s-1){o.push([e,t]);this.size=++r.size;return this}r=this.__data__=new i(o)}r.set(e,t);this.size=r.size;return this}e.exports=o},function(e,t,r){var a=r(1336),n=r(1338),i=r(1816),s=r(1819),o=r(1825),l=r(648),c=r(1306),u=r(1308);var d=1;var p="[object Arguments]",m="[object Array]",h="[object Object]";var f=Object.prototype;var v=f.hasOwnProperty;function b(e,t,r,f,b,g){var _=l(e),y=l(t),k=_?m:o(e),O=y?m:o(t);k=k==p?h:k;O=O==p?h:O;var E=k==h,w=O==h,C=k==O;if(C&&c(e)){if(!c(t))return false;_=true;E=false}if(C&&!E){g||(g=new a);return _||u(e)?n(e,t,r,f,b,g):i(e,t,k,r,f,b,g)}if(!(r&d)){var S=E&&v.call(e,"__wrapped__"),j=w&&v.call(t,"__wrapped__");if(S||j){var I=S?e.value():e,T=j?t.value():t;g||(g=new a);return b(I,T,r,f,g)}}if(!C)return false;g||(g=new a);return s(e,t,r,f,b,g)}e.exports=b},function(e,t){function r(e,t){var r=-1,a=null==e?0:e.length;while(++r<a)if(t(e[r],r,e))return true;return false}e.exports=r},function(e,t,r){var a=r(841),n=r(1817),i=r(1037),s=r(1338),o=r(1818),l=r(1043);var c=1,u=2;var d="[object Boolean]",p="[object Date]",m="[object Error]",h="[object Map]",f="[object Number]",v="[object RegExp]",b="[object Set]",g="[object String]",_="[object Symbol]";var y="[object ArrayBuffer]",k="[object DataView]";var O=a?a.prototype:void 0,E=O?O.valueOf:void 0;function w(e,t,r,a,O,w,C){switch(r){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return false;e=e.buffer;t=t.buffer;case y:if(e.byteLength!=t.byteLength||!w(new n(e),new n(t)))return false;return true;case d:case p:case f:return i(+e,+t);case m:return e.name==t.name&&e.message==t.message;case v:case g:return e==t+"";case h:var S=o;case b:var j=a&c;S||(S=l);if(e.size!=t.size&&!j)return false;var I=C.get(e);if(I)return I==t;a|=u;C.set(e,t);var T=s(S(e),S(t),a,O,w,C);C["delete"](e);return T;case _:if(E)return E.call(e)==E.call(t)}return false}e.exports=w},function(e,t,r){var a=r(647);var n=a.Uint8Array;e.exports=n},function(e,t){function r(e){var t=-1,r=Array(e.size);e.forEach(function(e,a){r[++t]=[a,e]});return r}e.exports=r},function(e,t,r){var a=r(1820);var n=1;var i=Object.prototype;var s=i.hasOwnProperty;function o(e,t,r,i,o,l){var c=r&n,u=a(e),d=u.length,p=a(t),m=p.length;if(d!=m&&!c)return false;var h=d;while(h--){var f=u[h];if(!(c?f in t:s.call(t,f)))return false}var v=l.get(e);if(v&&l.get(t))return v==t;var b=true;l.set(e,t);l.set(t,e);var g=c;while(++h<d){f=u[h];var _=e[f],y=t[f];if(i)var k=c?i(y,_,f,t,e,l):i(_,y,f,e,t,l);if(!(void 0===k?_===y||o(_,y,r,i,l):k)){b=false;break}g||(g="constructor"==f)}if(b&&!g){var O=e.constructor,E=t.constructor;O!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof O&&O instanceof O&&"function"==typeof E&&E instanceof E)&&(b=false)}l["delete"](e);l["delete"](t);return b}e.exports=o},function(e,t,r){var a=r(1821),n=r(1822),i=r(1032);function s(e){return a(e,i,n)}e.exports=s},function(e,t,r){var a=r(1314),n=r(648);function i(e,t,r){var i=t(e);return n(e)?i:a(i,r(e))}e.exports=i},function(e,t,r){var a=r(1823),n=r(1824);var i=Object.prototype;var s=i.propertyIsEnumerable;var o=Object.getOwnPropertySymbols;var l=o?function(e){if(null==e)return[];e=Object(e);return a(o(e),function(t){return s.call(e,t)})}:n;e.exports=l},function(e,t){function r(e,t){var r=-1,a=null==e?0:e.length,n=0,i=[];while(++r<a){var s=e[r];t(s,r,e)&&(i[n++]=s)}return i}e.exports=r},function(e,t){function r(){return[]}e.exports=r},function(e,t,r){var a=r(1826),n=r(1041),i=r(1827),s=r(1335),o=r(1828),l=r(771),c=r(1317);var u="[object Map]",d="[object Object]",p="[object Promise]",m="[object Set]",h="[object WeakMap]";var f="[object DataView]";var v=c(a),b=c(n),g=c(i),_=c(s),y=c(o);var k=l;(a&&k(new a(new ArrayBuffer(1)))!=f||n&&k(new n)!=u||i&&k(i.resolve())!=p||s&&k(new s)!=m||o&&k(new o)!=h)&&(k=function(e){var t=l(e),r=t==d?e.constructor:void 0,a=r?c(r):"";if(a)switch(a){case v:return f;case b:return u;case g:return p;case _:return m;case y:return h}return t});e.exports=k},function(e,t,r){var a=r(726),n=r(647);var i=a(n,"DataView");e.exports=i},function(e,t,r){var a=r(726),n=r(647);var i=a(n,"Promise");e.exports=i},function(e,t,r){var a=r(726),n=r(647);var i=a(n,"WeakMap");e.exports=i},function(e,t,r){var a=r(1339),n=r(1032);function i(e){var t=n(e),r=t.length;while(r--){var i=t[r],s=e[i];t[r]=[i,s,a(s)]}return t}e.exports=i},function(e,t,r){var a=r(1337),n=r(1831),i=r(1837),s=r(1044),o=r(1339),l=r(1340),c=r(914);var u=1,d=2;function p(e,t){if(s(e)&&o(t))return l(c(e),t);return function(r){var s=n(r,e);return void 0===s&&s===t?i(r,e):a(t,s,u|d)}}e.exports=p},function(e,t,r){var a=r(1341);function n(e,t,r){var n=null==e?void 0:a(e,t);return void 0===n?r:n}e.exports=n},function(e,t,r){var a=r(1833);var n=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var s=/\\(\\)?/g;var o=a(function(e){var t=[];n.test(e)&&t.push("");e.replace(i,function(e,r,a,n){t.push(a?n.replace(s,"$1"):r||e)});return t});e.exports=o},function(e,t,r){var a=r(1834);var n=500;function i(e){var t=a(e,function(e){r.size===n&&r.clear();return e});var r=t.cache;return t}e.exports=i},function(e,t,r){var a=r(1040);var n="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(n);var r=function(){var a=arguments,n=t?t.apply(this,a):a[0],i=r.cache;if(i.has(n))return i.get(n);var s=e.apply(this,a);r.cache=i.set(n,s)||i;return s};r.cache=new(i.Cache||a);return r}i.Cache=a;e.exports=i},function(e,t,r){var a=r(1836);function n(e){return null==e?"":a(e)}e.exports=n},function(e,t,r){var a=r(841),n=r(1332),i=r(648),s=r(1045);var o=1/0;var l=a?a.prototype:void 0,c=l?l.toString:void 0;function u(e){if("string"==typeof e)return e;if(i(e))return n(e,u)+"";if(s(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}e.exports=u},function(e,t,r){var a=r(1838),n=r(1839);function i(e,t){return null!=e&&n(e,t,a)}e.exports=i},function(e,t){function r(e,t){return null!=e&&t in Object(e)}e.exports=r},function(e,t,r){var a=r(1342),n=r(1033),i=r(648),s=r(1307),o=r(1034),l=r(914);function c(e,t,r){t=a(t,e);var c=-1,u=t.length,d=false;while(++c<u){var p=l(t[c]);if(!(d=null!=e&&r(e,p)))break;e=e[p]}if(d||++c!=u)return d;u=null==e?0:e.length;return!!u&&o(u)&&s(p,u)&&(i(e)||n(e))}e.exports=c},function(e,t,r){var a=r(1841),n=r(1842),i=r(1044),s=r(914);function o(e){return i(e)?a(s(e)):n(e)}e.exports=o},function(e,t){function r(e){return function(t){return null==t?void 0:t[e]}}e.exports=r},function(e,t,r){var a=r(1341);function n(e){return function(t){return a(t,e)}}e.exports=n},function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default=f;var n=r(1);var i=d(n);var s=r(1844);var o=d(s);var l=r(14);var c=r(1329);var u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e){var t,r;var s=n.Children.only(e);var c=s.props;var d=s.type;var f=(0,l.connect)(function(e){return e})(d);return r=t=function(e){h(t,e);function t(r,a){p(this,t);var n=m(this,e.call(this,r,a));if(!r.store&&!a.store){console.error('Redux DevTools could not render. You must pass the Redux store to <DevTools> either as a "store" prop or by wrapping it in a <Provider store={store}>.');return m(n)}a.store?n.liftedStore=a.store.liftedStore:n.liftedStore=r.store.liftedStore;n.liftedStore||console.error("Redux DevTools could not render. Did you forget to include DevTools.instrument() in your store enhancer chain before using createStore()?");return n}t.prototype.render=function e(){if(!this.liftedStore)return null;return i.default.createElement(f,a({},c,{store:this.liftedStore}))};return t}(n.Component),t.contextTypes={store:o.default.object},t.propTypes={store:o.default.object},t.instrument=function(e){return(0,u.default)(function(e,t){return d.update(c,e,t)},e)},r}},function(e,t,r){var a,n,i;false;e.exports=r(1845)()},function(e,t,r){"use strict";var a=r(343);var n=r(342);var i=r(1846);e.exports=function(){function e(e,t,r,a,s,o){if(o===i)return;n(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};r.checkPropTypes=a;r.PropTypes=r;return r}},function(e,t,r){"use strict";var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=a},function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n=r(1);var i=E(n);var s=r(915);var o=E(s);var l=r(843);var c=E(l);var u=r(1851);var d=O(u);var p=r(931);var m=r(1344);var h=r(1890);var f=E(h);var v=r(1891);var b=E(v);var g=r(1894);var _=E(g);var y=r(1923);var k=E(y);function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function E(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=p.ActionCreators.toggleAction;var I=p.ActionCreators.setActionsActive;var T={container:{fontFamily:"monaco, Consolas, Lucida Console, monospace",position:"relative",overflowY:"hidden",width:"100%",height:"100%",minWidth:300,direction:"ltr"},elements:{position:"absolute",left:0,right:0,top:0,bottom:0,overflowX:"hidden",overflowY:"auto"}};var N=function(e){S(t,e);function t(r){w(this,t);var a=C(this,e.call(this,r));a.shouldComponentUpdate=c.default;a.updateScrollTop=(0,k.default)(function(){var e=a.node;a.props.dispatch((0,m.updateScrollTop)(e?e.scrollTop:0))},500);a.handleToggleAction=a.handleToggleAction.bind(a);a.handleToggleConsecutiveAction=a.handleToggleConsecutiveAction.bind(a);a.getRef=a.getRef.bind(a);return a}t.prototype.scroll=function e(){var t=this.node;if(!t)return;if(this.scrollDown){var r=t.offsetHeight;var a=t.scrollHeight;t.scrollTop=a-r;this.scrollDown=false}};t.prototype.componentDidMount=function e(){var t=this.node;if(!t||!this.props.monitorState)return;if(this.props.preserveScrollTop){t.scrollTop=this.props.monitorState.initialScrollTop;t.addEventListener("scroll",this.updateScrollTop)}else{this.scrollDown=true;this.scroll()}};t.prototype.componentWillUnmount=function e(){var t=this.node;t&&this.props.preserveScrollTop&&t.removeEventListener("scroll",this.updateScrollTop)};t.prototype.componentWillReceiveProps=function e(t){var r=this.node;if(r)if(this.props.stagedActionIds.length<t.stagedActionIds.length){var a=r.scrollTop;var n=r.offsetHeight;var i=r.scrollHeight;this.scrollDown=Math.abs(i-(a+n))<20}else this.scrollDown=false;else this.scrollDown=true};t.prototype.componentDidUpdate=function e(){this.scroll()};t.prototype.handleToggleAction=function e(t){this.props.dispatch(j(t))};t.prototype.handleToggleConsecutiveAction=function e(t){var r=this.props;var a=r.monitorState;var n=r.actionsById;var i=a.consecutiveToggleStartId;if(i&&n[i]){var s=this.props.skippedActionIds;var o=Math.min(i,t);var l=Math.max(i,t);var c=s.indexOf(i)>-1;this.props.dispatch(I(o,l+1,c));this.props.dispatch((0,m.startConsecutiveToggle)(null))}else t>0&&this.props.dispatch((0,m.startConsecutiveToggle)(t))};t.prototype.getTheme=function e(){var t=this.props.theme;if("string"!==typeof t)return t;if("undefined"!==typeof d[t])return d[t];console.warn("DevTools theme "+t+" not found, defaulting to nicinabox");return d.nicinabox};t.prototype.getRef=function e(t){this.node=t};t.prototype.render=function e(){var t=this.getTheme();var r=this.props.monitorState.consecutiveToggleStartId;var n=this.props;var s=n.dispatch;var o=n.actionsById;var l=n.skippedActionIds;var c=n.stagedActionIds;var u=n.computedStates;var d=n.currentStateIndex;var p=n.select;var m=n.expandActionRoot;var h=n.expandStateRoot;var f=n.markStateDiff;var v={theme:t,actionsById:o,skippedActionIds:l,stagedActionIds:c,computedStates:u,currentStateIndex:d,consecutiveToggleStartId:r,select:p,expandActionRoot:m,expandStateRoot:h,markStateDiff:f,onActionClick:this.handleToggleAction,onActionShiftClick:this.handleToggleConsecutiveAction};return i.default.createElement("div",{style:a({},T.container,{backgroundColor:t.base00})},!this.props.hideMainButtons&&i.default.createElement(b.default,{theme:t,dispatch:s,hasStates:u.length>1,hasSkippedActions:l.length>0}),i.default.createElement("div",{style:this.props.hideMainButtons?T.elements:a({},T.elements,{top:30}),ref:this.getRef},i.default.createElement(_.default,v)))};return t}(n.Component);N.update=f.default;N.propTypes={dispatch:o.default.func,computedStates:o.default.array,actionsById:o.default.object,stagedActionIds:o.default.array,skippedActionIds:o.default.array,monitorState:o.default.shape({initialScrollTop:o.default.number,consecutiveToggleStartId:o.default.number}),preserveScrollTop:o.default.bool,select:o.default.func,theme:o.default.oneOfType([o.default.object,o.default.string]),expandActionRoot:o.default.bool,expandStateRoot:o.default.bool,markStateDiff:o.default.bool,hideMainButtons:o.default.bool};N.defaultProps={select:function e(t){return t},theme:"nicinabox",preserveScrollTop:true,expandActionRoot:true,expandStateRoot:true,markStateDiff:false};t.default=N},function(e,t,r){"use strict";var a=r(343);var n=r(342);var i=r(1849);e.exports=function(){function e(e,t,r,a,s,o){if(o===i)return;n(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};r.checkPropTypes=a;r.PropTypes=r;return r}},function(e,t,r){"use strict";var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=a},function(e,t,r){"use strict";t.__esModule=true;t["default"]=a;function a(e,t){if(e===t)return true;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return false;var r=Object.keys(e);var a=Object.keys(t);if(r.length!==a.length)return false;var n=Object.prototype.hasOwnProperty.bind(t);for(var i=0;i<r.length;i++)if(!n(r[i])||e[r[i]]!==t[r[i]])return false;return true}e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;function a(e){return e&&e.__esModule?e["default"]:e}function n(e,t){var r=t({},e);delete r["default"];return r}function i(e,t){var r=Object.getOwnPropertyNames(t);for(var a=0;a<r.length;a++){var n=r[a];var i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}var s=r(1343);i(t,n(s,i));var o=r(1889);t.nicinabox=a(o)},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"brewer",author:"timoth\xe9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"nicinabox",author:"nicinabox (http://github.com/nicinabox)",base00:"#2A2F3A",base01:"#3C444F",base02:"#4F5A65",base03:"#BEBEBE",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#FFFFFF",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#FC6D24",base0A:"#ddb26f",base0B:"#A1C659",base0C:"#12cfc0",base0D:"#6FB3D2",base0E:"#D381C3",base0F:"#deaf8f"};e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=true;t.default=s;var a=r(1344);function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r=arguments[2];if(!e.preserveScrollTop)return 0;return r.type===a.UPDATE_SCROLL_TOP?r.scrollTop:t}function i(e,t,r){return r.type===a.START_CONSECUTIVE_TOGGLE?r.id:t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=arguments[2];return{initialScrollTop:n(e,t.initialScrollTop,r),consecutiveToggleStartId:i(e,t.consecutiveToggleStartId,r)}}},function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n=r(1);var i=m(n);var s=r(915);var o=m(s);var l=r(843);var c=m(l);var u=r(931);var d=r(1892);var p=m(d);function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=u.ActionCreators.reset;var g=u.ActionCreators.rollback;var _=u.ActionCreators.commit;var y=u.ActionCreators.sweep;var k={textAlign:"center",borderBottomWidth:1,borderBottomStyle:"solid",borderColor:"transparent",zIndex:1,display:"flex",flexDirection:"row"};var O=function(e){v(t,e);function t(r){h(this,t);var a=f(this,e.call(this,r));a.shouldComponentUpdate=c.default;a.handleReset=a.handleReset.bind(a);a.handleRollback=a.handleRollback.bind(a);a.handleSweep=a.handleSweep.bind(a);a.handleCommit=a.handleCommit.bind(a);return a}t.prototype.handleRollback=function e(){this.props.dispatch(g())};t.prototype.handleSweep=function e(){this.props.dispatch(y())};t.prototype.handleCommit=function e(){this.props.dispatch(_())};t.prototype.handleReset=function e(){this.props.dispatch(b())};t.prototype.render=function e(){var t=this.props;var r=t.theme;var n=t.hasStates;var s=t.hasSkippedActions;return i.default.createElement("div",{style:a({},k,{borderColor:r.base02})},i.default.createElement(p.default,{theme:r,onClick:this.handleReset,enabled:true},"Reset"),i.default.createElement(p.default,{theme:r,onClick:this.handleRollback,enabled:n},"Revert"),i.default.createElement(p.default,{theme:r,onClick:this.handleSweep,enabled:s},"Sweep"),i.default.createElement(p.default,{theme:r,onClick:this.handleCommit,enabled:n},"Commit"))};return t}(n.Component);O.propTypes={dispatch:o.default.func,theme:o.default.object};t.default=O},function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n=r(1);var i=u(n);var s=r(1893);var o=u(s);var l=r(843);var c=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h={base:{cursor:"pointer",fontWeight:"bold",borderRadius:3,padding:4,marginLeft:3,marginRight:3,marginTop:5,marginBottom:5,flexGrow:1,display:"inline-block",fontSize:"0.8em",color:"white",textDecoration:"none"}};var f=function(e){m(t,e);function t(r){d(this,t);var a=p(this,e.call(this,r));a.shouldComponentUpdate=c.default;a.handleMouseEnter=a.handleMouseEnter.bind(a);a.handleMouseLeave=a.handleMouseLeave.bind(a);a.handleMouseDown=a.handleMouseDown.bind(a);a.handleMouseUp=a.handleMouseUp.bind(a);a.onClick=a.onClick.bind(a);a.state={hovered:false,active:false};return a}t.prototype.handleMouseEnter=function e(){this.setState({hovered:true})};t.prototype.handleMouseLeave=function e(){this.setState({hovered:false})};t.prototype.handleMouseDown=function e(){this.setState({active:true})};t.prototype.handleMouseUp=function e(){this.setState({active:false})};t.prototype.onClick=function e(){if(!this.props.enabled)return;this.props.onClick&&this.props.onClick()};t.prototype.render=function e(){var t=a({},h.base,{backgroundColor:this.props.theme.base02});this.props.enabled&&this.state.hovered&&(t=a({},t,{backgroundColor:(0,o.default)(this.props.theme.base02,.2)}));this.props.enabled||(t=a({},t,{opacity:.2,cursor:"text",backgroundColor:"transparent"}));return i.default.createElement("a",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.onClick,style:t},this.props.children)};return t}(i.default.Component);t.default=f},function(e,t,r){"use strict";t.__esModule=true;t.default=function(e,t){var r=String(e).replace(/[^0-9a-f]/gi,"");r.length<6&&(r=r.replace(/(.)/g,"$1$1"));var a=t||0;var n="#";var i=void 0;for(var s=0;s<3;++s){i=parseInt(r.substr(2*s,2),16);i=Math.round(Math.min(Math.max(0,i+i*a),255)).toString(16);n+=("00"+i).substr(i.length)}return n}},function(e,t,r){"use strict";t.__esModule=true;var a=r(1);var n=d(a);var i=r(915);var s=d(i);var o=r(1895);var l=d(o);var c=r(843);var u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){h(t,e);function t(){var r,a,n;p(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return n=(r=(a=m(this,e.call.apply(e,[this].concat(s))),a),a.shouldComponentUpdate=u.default,r),m(a,n)}t.prototype.render=function e(){var t=[];var r=this.props;var a=r.theme;var i=r.actionsById;var s=r.computedStates;var o=r.currentStateIndex;var c=r.consecutiveToggleStartId;var u=r.select;var d=r.skippedActionIds;var p=r.stagedActionIds;var m=r.expandActionRoot;var h=r.expandStateRoot;var f=r.markStateDiff;var v=r.onActionClick;var b=r.onActionShiftClick;for(var g=0;g<p.length;g++){var _=p[g];var y=i[_].action;var k=s[g];var O=k.state;var E=k.error;var w=void 0;g>0&&(w=s[g-1].state);t.push(n.default.createElement(l.default,{key:_,theme:a,select:u,action:y,actionId:_,state:O,previousState:w,collapsed:d.indexOf(_)>-1,inFuture:g>o,selected:c===g,error:E,expandActionRoot:m,expandStateRoot:h,markStateDiff:f,onActionClick:v,onActionShiftClick:b}))}return n.default.createElement("div",null,t)};return t}(a.Component);f.propTypes={actionsById:s.default.object,computedStates:s.default.array,stagedActionIds:s.default.array,skippedActionIds:s.default.array,currentStateIndex:s.default.number,consecutiveToggleStartId:s.default.number,select:s.default.func.isRequired,onActionClick:s.default.func.isRequired,theme:s.default.oneOfType([s.default.object,s.default.string]),expandActionRoot:s.default.bool,expandStateRoot:s.default.bool};t.default=f},function(e,t,r){"use strict";t.__esModule=true;var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var i=r(1);var s=f(i);var o=r(915);var l=f(o);var c=r(1345);var u=f(c);var d=r(1922);var p=f(d);var m=r(843);var h=f(m);function f(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _={entry:{display:"block",WebkitUserSelect:"none"},root:{marginLeft:0}};var y=function e(t,r){return r.reduce(function(e,t){return e&&e[t]},t)};var k=function e(t,r,a){var n=[].concat(a).reverse().slice(1);return y(t,n)===y(r,n)};var O=function(e){g(t,e);function t(r){v(this,t);var a=b(this,e.call(this,r));a.shouldComponentUpdate=h.default;a.handleActionClick=a.handleActionClick.bind(a);a.shouldExpandNode=a.shouldExpandNode.bind(a);return a}t.prototype.printState=function e(t,r){var i=this;var o=r;if(!o)try{var l=function(){var e=i.props.select(t);var r=void 0;i.props.markStateDiff?function(){var t="undefined"!==typeof i.props.previousState?i.props.select(i.props.previousState):void 0;var a=function r(a,s,o){var l=a.style;return{style:n({},l,{backgroundColor:k(e,t,o)?"transparent":i.props.theme.base01})}};var s=function e(t,r){var a=t.style;return{style:n({},a,r.length>1?{}:_.root)}};r={extend:i.props.theme,tree:_.tree,value:a,nestedNode:s}}():r=i.props.theme;return{v:s.default.createElement(u.default,{theme:r,data:e,invertTheme:false,keyPath:["state"],shouldExpandNode:i.shouldExpandNode})}}();if("object"===("undefined"===typeof l?"undefined":a(l)))return l.v}catch(e){o="Error selecting state."}return s.default.createElement("div",{style:{color:this.props.theme.base08,paddingTop:20,paddingLeft:30,paddingRight:30,paddingBottom:35}},o)};t.prototype.handleActionClick=function e(t){var r=this.props;var a=r.actionId;var n=r.onActionClick;var i=r.onActionShiftClick;a>0&&(t.shiftKey?i(a):n(a))};t.prototype.shouldExpandNode=function e(t,r,a){return this.props.expandStateRoot&&0===a};t.prototype.render=function e(){var t=this.props;var r=t.actionId;var a=t.error;var i=t.action;var o=t.state;var l=t.collapsed;var c=t.selected;var u=t.inFuture;var d={opacity:l?.5:1,cursor:r>0?"pointer":"default"};return s.default.createElement("div",{style:{opacity:c?.4:u?.6:1,textDecoration:l?"line-through":"none",color:this.props.theme.base06}},s.default.createElement(p.default,{theme:this.props.theme,collapsed:l,action:i,expandActionRoot:this.props.expandActionRoot,onClick:this.handleActionClick,style:n({},_.entry,d)}),!l&&s.default.createElement("div",{style:{paddingLeft:16}},this.printState(o,a)))};return t}(i.Component);O.propTypes={state:l.default.object.isRequired,action:l.default.object.isRequired,actionId:l.default.number.isRequired,select:l.default.func.isRequired,inFuture:l.default.bool,error:l.default.string,onActionClick:l.default.func.isRequired,onActionShiftClick:l.default.func.isRequired,collapsed:l.default.bool,selected:l.default.bool,expandActionRoot:l.default.bool,expandStateRoot:l.default.bool};t.default=O},function(e,t,r){"use strict";var a=r(343);var n=r(342);var i=r(1897);e.exports=function(){function e(e,t,r,a,s,o){if(o===i)return;n(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};r.checkPropTypes=a;r.PropTypes=r;return r}},function(e,t,r){"use strict";var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=a},function(e,t,r){"use strict";t.__esModule=true;var a=r(275);var n=i(a);t["default"]=s;function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&"function"===typeof e[n["default"]])return"Iterable";return t}},function(e,t,r){"use strict";t.__esModule=true;var a=r(3);var n=f(a);var i=r(32);var s=f(i);var o=r(1347);var l=f(o);var c=r(1);var u=f(c);var d=r(690);var p=f(d);var m=r(1046);var h=f(m);function f(e){return e&&e.__esModule?e:{default:e}}function v(e){var t=(0,l["default"])(e).length;return t+" "+(1!==t?"keys":"key")}var b=function e(t){var r=t.data,a=(0,s["default"])(t,["data"]);return u["default"].createElement(h["default"],(0,n["default"])({},a,{data:r,nodeType:"Object",nodeTypeIndicator:"Error"===a.nodeType?"Error()":"{}",createItemString:v,expandable:(0,l["default"])(r).length>0}))};b.propTypes={data:p["default"].object,nodeType:p["default"].string};t["default"]=b},function(e,t,r){r(1901);var a=r(52).Object;e.exports=function e(t){return a.getOwnPropertyNames(t)}},function(e,t,r){r(770)("getOwnPropertyNames",function(){return r(277).f})},function(e,t,r){"use strict";t.__esModule=true;var a=r(296);var n=c(a);var i=r(1347);var s=c(i);var o=r(727);var l=c(o);t["default"]=h;function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if("Object"===e)return(0,l["default"])(t).length;if("Array"===e)return t.length;return Infinity}function d(e){return"function"===typeof e.set}function p(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Infinity;var o=void 0;if("Object"===e){var l=(0,s["default"])(t);"undefined"!==typeof r&&l.sort(r);l=l.slice(a,i+1);o={entries:l.map(function(e){return{key:e,value:t[e]}})}}else if("Array"===e)o={entries:t.slice(a,i+1).map(function(e,t){return{key:t+a,value:e}})};else{var c=0;var u=[];var p=true;var m=d(t);for(var h=t,f=Array.isArray(h),v=0,h=f?h:(0,n["default"])(h);;){var b;if(f){if(v>=h.length)break;b=h[v++]}else{v=h.next();if(v.done)break;b=v.value}var g=b;if(c>i){p=false;break}a<=c&&(m&&Array.isArray(g)?"string"===typeof g[0]||"number"===typeof g[0]?u.push({key:g[0],value:g[1]}):u.push({key:"[entry "+c+"]",value:{"[key]":g[0],"[value]":g[1]}}):u.push({key:c,value:g}));c++}o={hasMore:!p,entries:u}}return o}function m(e,t,r){var a=[];while(t-e>r*r)r*=r;for(var n=e;n<=t;n+=r)a.push({from:n,to:Math.min(t,n+r-1)});return a}function h(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Infinity;var s=p.bind(null,e,t,r);if(!a)return s().entries;var o=i<Infinity;var l=Math.min(i-n,u(e,t));if("Iterable"!==e){if(l<=a||a<7)return s(n,i).entries}else if(l<=a&&!o)return s(n,i).entries;var c=void 0;if("Iterable"===e){var d=s(n,n+a-1),h=d.hasMore,f=d.entries;c=h?[].concat(f,m(n+a,n+2*a-1,a)):f}else c=o?m(n,i,a):[].concat(s(0,a-5).entries,m(a-4,l-5,a),s(l-4,l-1).entries);return c}},function(e,t,r){"use strict";t.__esModule=true;var a=r(3);var n=b(a);var i=r(5);var s=b(i);var o=r(7);var l=b(o);var c=r(8);var u=b(c);var d=r(1);var p=b(d);var m=r(690);var h=b(m);var f=r(1348);var v=b(f);function b(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,u["default"])(t,e);function t(r){(0,s["default"])(this,t);var a=(0,l["default"])(this,e.call(this,r));a.state={expanded:false};a.handleClick=a.handleClick.bind(a);return a}t.prototype.render=function e(){var t=this.props,r=t.styling,a=t.from,i=t.to,s=t.renderChildNodes,o=t.nodeType;return this.state.expanded?p["default"].createElement("div",r("itemRange",this.state.expanded),s(this.props,a,i)):p["default"].createElement("div",(0,n["default"])({},r("itemRange",this.state.expanded),{onClick:this.handleClick}),p["default"].createElement(v["default"],{nodeType:o,styling:r,expanded:false,onClick:this.handleClick,arrowStyle:"double"}),a+" ... "+i)};t.prototype.handleClick=function e(){this.setState({expanded:!this.state.expanded})};return t}(p["default"].Component);g.propTypes={styling:h["default"].func.isRequired,from:h["default"].number.isRequired,to:h["default"].number.isRequired,renderChildNodes:h["default"].func.isRequired,nodeType:h["default"].string.isRequired};t["default"]=g},function(e,t,r){"use strict";t.__esModule=true;var a=r(3);var n=m(a);var i=r(32);var s=m(i);var o=r(1);var l=m(o);var c=r(690);var u=m(c);var d=r(1046);var p=m(d);function m(e){return e&&e.__esModule?e:{default:e}}function h(e){return e.length+" "+(1!==e.length?"items":"item")}var f=function e(t){var r=t.data,a=(0,s["default"])(t,["data"]);return l["default"].createElement(p["default"],(0,n["default"])({},a,{data:r,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:h,expandable:r.length>0}))};f.propTypes={data:u["default"].array};t["default"]=f},function(e,t,r){"use strict";t.__esModule=true;var a=r(3);var n=f(a);var i=r(32);var s=f(i);var o=r(296);var l=f(o);var c=r(1906);var u=f(c);t["default"]=b;var d=r(1);var p=f(d);var m=r(1046);var h=f(m);function f(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var r=0;var a=false;if((0,u["default"])(e.size))r=e.size;else for(var n=e,i=Array.isArray(n),s=0,n=i?n:(0,l["default"])(n);;){var o;if(i){if(s>=n.length)break;o=n[s++]}else{s=n.next();if(s.done)break;o=s.value}var c=o;if(t&&r+1>t){a=true;break}r+=1}return(a?">":"")+r+" "+(1!==r?"entries":"entry")}function b(e){var t=(0,s["default"])(e,[]);return p["default"].createElement(h["default"],(0,n["default"])({},t,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:v}))}},function(e,t,r){e.exports={default:r(1907),__esModule:true}},function(e,t,r){r(1908);e.exports=r(52).Number.isSafeInteger},function(e,t,r){var a=r(86);var n=r(1909);var i=Math.abs;a(a.S,"Number",{isSafeInteger:function e(t){return n(t)&&i(t)<=9007199254740991}})},function(e,t,r){var a=r(68);var n=Math.floor;e.exports=function e(t){return!a(t)&&isFinite(t)&&n(t)===t}},function(e,t,r){"use strict";t.__esModule=true;var a=r(1);var n=o(a);var i=r(690);var s=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){var r=t.nodeType,a=t.styling,i=t.labelRenderer,s=t.keyPath,o=t.valueRenderer,l=t.value,c=t.valueGetter;return n["default"].createElement("li",a("value",r,s),n["default"].createElement("label",a(["label","valueLabel"],r,s),i(s,r,false,false)),n["default"].createElement("span",a("valueText",r,s),o.apply(void 0,[c(l),l].concat(s))))};l.propTypes={nodeType:s["default"].string.isRequired,styling:s["default"].func.isRequired,labelRenderer:s["default"].func.isRequired,keyPath:s["default"].arrayOf(s["default"].oneOfType([s["default"].string,s["default"].number])).isRequired,valueRenderer:s["default"].func.isRequired,value:s["default"].any,valueGetter:s["default"].func};l.defaultProps={valueGetter:function e(t){return t}};t["default"]=l},function(e,t,r){"use strict";t.__esModule=true;var a=r(3);var n=l(a);var i=r(1349);var s=r(1921);var o=l(s);function l(e){return e&&e.__esModule?e:{default:e}}var c=function e(t){return{BACKGROUND_COLOR:t.base00,TEXT_COLOR:t.base07,STRING_COLOR:t.base0B,DATE_COLOR:t.base0B,NUMBER_COLOR:t.base09,BOOLEAN_COLOR:t.base09,NULL_COLOR:t.base08,UNDEFINED_COLOR:t.base08,FUNCTION_COLOR:t.base08,SYMBOL_COLOR:t.base08,LABEL_COLOR:t.base0D,ARROW_COLOR:t.base0D,ITEM_STRING_COLOR:t.base0B,ITEM_STRING_EXPANDED_COLOR:t.base03}};var u=function e(t){return{String:t.STRING_COLOR,Date:t.DATE_COLOR,Number:t.NUMBER_COLOR,Boolean:t.BOOLEAN_COLOR,Null:t.NULL_COLOR,Undefined:t.UNDEFINED_COLOR,Function:t.FUNCTION_COLOR,Symbol:t.SYMBOL_COLOR}};var d=function e(t){var r=c(t);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:r.BACKGROUND_COLOR},value:function e(t,r,a){var i=t.style;return{style:(0,n["default"])({},i,{paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:a.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"})}},label:{display:"inline-block",color:r.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:function e(t,a){var i=t.style;return{style:(0,n["default"])({},i,{color:u(r)[a]})}},itemRange:function e(t,a){return{style:{paddingTop:a?0:"0.25em",cursor:"pointer",color:r.LABEL_COLOR}}},arrow:function e(t,r,a){var i=t.style;return{style:(0,n["default"])({},i,{marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:a?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:a?"rotateZ(90deg)":"rotateZ(0deg)",transform:a?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"})}},arrowContainer:function e(t,r){var a=t.style;return{style:(0,n["default"])({},a,{display:"inline-block",paddingRight:"0.5em",paddingLeft:"double"===r?"1em":0,cursor:"pointer"})}},arrowSign:{color:r.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:function e(t,r,a,i,s){var o=t.style;return{style:(0,n["default"])({},o,{position:"relative",paddingTop:"0.25em",marginLeft:r.length>1?"0.875em":0,paddingLeft:s?0:"1.125em"})}},rootNode:{padding:0,margin:0},nestedNodeLabel:function e(t,r,a,i,s){var o=t.style;return{style:(0,n["default"])({},o,{margin:0,padding:0,WebkitUserSelect:s?"inherit":"text",MozUserSelect:s?"inherit":"text",cursor:s?"pointer":"default"})}},nestedNodeItemString:function e(t,a,i,s){var o=t.style;return{style:(0,n["default"])({},o,{paddingLeft:"0.5em",cursor:"default",color:s?r.ITEM_STRING_EXPANDED_COLOR:r.ITEM_STRING_COLOR})}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:function e(t,r,a){var i=t.style;return{style:(0,n["default"])({},i,{padding:0,margin:0,listStyle:"none",display:a?"block":"none"})}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}};t["default"]=(0,i.createStyling)(d,{defaultBase16:o["default"]})},function(e,t,r){(function(t){var r="Expected a function";var a="__lodash_placeholder__";var n=1,i=2,s=4,o=8,l=16,c=32,u=64,d=128,p=256,m=512;var h=1/0,f=9007199254740991,v=1.7976931348623157e308,b=NaN;var g=[["ary",d],["bind",n],["bindKey",i],["curry",o],["curryRight",l],["flip",m],["partial",c],["partialRight",u],["rearg",p]];var _="[object Function]",y="[object GeneratorFunction]",k="[object Symbol]";var O=/[\\^$.*+?()[\]{}|]/g;var E=/^\s+|\s+$/g;var w=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,C=/\{\n\/\* \[wrapped with (.+)\] \*/,S=/,? & /;var j=/^[-+]0x[0-9a-f]+$/i;var I=/^0b[01]+$/i;var T=/^\[object .+?Constructor\]$/;var N=/^0o[0-7]+$/i;var A=/^(?:0|[1-9]\d*)$/;var R=parseInt;var M="object"==typeof t&&t&&t.Object===Object&&t;var P="object"==typeof self&&self&&self.Object===Object&&self;var x=M||P||Function("return this")();function D(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function F(e,t){var r=-1,a=e?e.length:0;while(++r<a)if(false===t(e[r],r,e))break;return e}function L(e,t){var r=e?e.length:0;return!!r&&U(e,t,0)>-1}function B(e,t,r,a){var n=e.length,i=r+(a?1:-1);while(a?i--:++i<n)if(t(e[i],i,e))return i;return-1}function U(e,t,r){if(t!==t)return B(e,q,r);var a=r-1,n=e.length;while(++a<n)if(e[a]===t)return a;return-1}function q(e){return e!==e}function G(e,t){var r=e.length,a=0;while(r--)e[r]===t&&a++;return a}function H(e,t){return null==e?void 0:e[t]}function W(e){var t=false;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function V(e,t){var r=-1,n=e.length,i=0,s=[];while(++r<n){var o=e[r];if(o===t||o===a){e[r]=a;s[i++]=r}}return s}var z=Function.prototype,Q=Object.prototype;var K=x["__core-js_shared__"];var Y=function(){var e=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var J=z.toString;var Z=Q.hasOwnProperty;var X=Q.toString;var $=RegExp("^"+J.call(Z).replace(O,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ee=Object.create;var te=Math.max,re=Math.min;var ae=function(){var e=be(Object,"defineProperty"),t=be.name;return t&&t.length>2?e:void 0}();function ne(e){return Ie(e)?ee(e):{}}function ie(e){if(!Ie(e)||ke(e))return false;var t=je(e)||W(e)?$:T;return t.test(we(e))}function se(e,t,r,a){var n=-1,i=e.length,s=r.length,o=-1,l=t.length,c=te(i-s,0),u=Array(l+c),d=!a;while(++o<l)u[o]=t[o];while(++n<s)(d||n<i)&&(u[r[n]]=e[n]);while(c--)u[o++]=e[n++];return u}function oe(e,t,r,a){var n=-1,i=e.length,s=-1,o=r.length,l=-1,c=t.length,u=te(i-o,0),d=Array(u+c),p=!a;while(++n<u)d[n]=e[n];var m=n;while(++l<c)d[m+l]=t[l];while(++s<o)(p||n<i)&&(d[m+r[s]]=e[n++]);return d}function le(e,t){var r=-1,a=e.length;t||(t=Array(a));while(++r<a)t[r]=e[r];return t}function ce(e,t,r){var a=t&n,i=ue(e);function s(){var t=this&&this!==x&&this instanceof s?i:e;return t.apply(a?r:this,arguments)}return s}function ue(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=ne(e.prototype),a=e.apply(r,t);return Ie(a)?a:r}}function de(e,t,r){var a=ue(e);function n(){var i=arguments.length,s=Array(i),o=i,l=ve(n);while(o--)s[o]=arguments[o];var c=i<3&&s[0]!==l&&s[i-1]!==l?[]:V(s,l);i-=c.length;if(i<r)return he(e,t,pe,n.placeholder,void 0,s,c,void 0,void 0,r-i);var u=this&&this!==x&&this instanceof n?a:e;return D(u,this,s)}return n}function pe(e,t,r,a,s,c,u,p,h,f){var v=t&d,b=t&n,g=t&i,_=t&(o|l),y=t&m,k=g?void 0:ue(e);function O(){var n=arguments.length,i=Array(n),o=n;while(o--)i[o]=arguments[o];if(_)var l=ve(O),d=G(i,l);a&&(i=se(i,a,s,_));c&&(i=oe(i,c,u,_));n-=d;if(_&&n<f){var m=V(i,l);return he(e,t,pe,O.placeholder,r,i,m,p,h,f-n)}var E=b?r:this,w=g?E[e]:e;n=i.length;p?i=Oe(i,p):y&&n>1&&i.reverse();v&&h<n&&(i.length=h);this&&this!==x&&this instanceof O&&(w=k||ue(w));return w.apply(E,i)}return O}function me(e,t,r,a){var i=t&n,s=ue(e);function o(){var t=-1,n=arguments.length,l=-1,c=a.length,u=Array(c+n),d=this&&this!==x&&this instanceof o?s:e;while(++l<c)u[l]=a[l];while(n--)u[l++]=arguments[++t];return D(d,i?r:this,u)}return o}function he(e,t,r,a,l,d,p,m,h,f){var v=t&o,b=v?p:void 0,g=v?void 0:p,_=v?d:void 0,y=v?void 0:d;t|=v?c:u;t&=~(v?u:c);t&s||(t&=~(n|i));var k=r(e,t,l,_,b,y,g,m,h,f);k.placeholder=a;return Ee(k,e,t)}function fe(e,t,a,s,d,p,m,h){var f=t&i;if(!f&&"function"!=typeof e)throw new TypeError(r);var v=s?s.length:0;if(!v){t&=~(c|u);s=d=void 0}m=void 0===m?m:te(Re(m),0);h=void 0===h?h:Re(h);v-=d?d.length:0;if(t&u){var b=s,g=d;s=d=void 0}var _=[e,t,a,s,d,b,g,p,m,h];e=_[0];t=_[1];a=_[2];s=_[3];d=_[4];h=_[9]=null==_[9]?f?0:e.length:te(_[9]-v,0);!h&&t&(o|l)&&(t&=~(o|l));if(t&&t!=n)y=t==o||t==l?de(e,t,h):t!=c&&t!=(n|c)||d.length?pe.apply(void 0,_):me(e,t,a,s);else var y=ce(e,t,a);return Ee(y,e,t)}function ve(e){var t=e;return t.placeholder}function be(e,t){var r=H(e,t);return ie(r)?r:void 0}function ge(e){var t=e.match(C);return t?t[1].split(S):[]}function _e(e,t){var r=t.length,a=r-1;t[a]=(r>1?"& ":"")+t[a];t=t.join(r>2?", ":" ");return e.replace(w,"{\n/* [wrapped with "+t+"] */\n")}function ye(e,t){t=null==t?f:t;return!!t&&("number"==typeof e||A.test(e))&&e>-1&&e%1==0&&e<t}function ke(e){return!!Y&&Y in e}function Oe(e,t){var r=e.length,a=re(t.length,r),n=le(e);while(a--){var i=t[a];e[a]=ye(i,r)?n[i]:void 0}return e}var Ee=ae?function(e,t,r){var a=t+"";return ae(e,"toString",{configurable:true,enumerable:false,value:Pe(_e(a,Ce(ge(a),r)))})}:xe;function we(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ce(e,t){F(g,function(r){var a="_."+r[0];t&r[1]&&!L(e,a)&&e.push(a)});return e.sort()}function Se(e,t,r){t=r?void 0:t;var a=fe(e,o,void 0,void 0,void 0,void 0,void 0,t);a.placeholder=Se.placeholder;return a}function je(e){var t=Ie(e)?X.call(e):"";return t==_||t==y}function Ie(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Te(e){return!!e&&"object"==typeof e}function Ne(e){return"symbol"==typeof e||Te(e)&&X.call(e)==k}function Ae(e){if(!e)return 0===e?e:0;e=Me(e);if(e===h||e===-h){var t=e<0?-1:1;return t*v}return e===e?e:0}function Re(e){var t=Ae(e),r=t%1;return t===t?r?t-r:t:0}function Me(e){if("number"==typeof e)return e;if(Ne(e))return b;if(Ie(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ie(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(E,"");var r=I.test(e);return r||N.test(e)?R(e.slice(2),r?2:8):j.test(e)?b:+e}function Pe(e){return function(){return e}}function xe(e){return e}Se.placeholder={};e.exports=Se}).call(this,r(49))},function(e,t,r){var a=r(1047);function n(e){var t=Math.round(a(e,0,255));var r=t.toString(16);return 1==r.length?"0"+r:r}function i(e){var t=4===e.length?n(255*e[3]):"";return"#"+n(e[0])+n(e[1])+n(e[2])+t}e.exports=i},function(e,t,r){var a=r(1915);var n=r(1916);var i=r(1917);var s=r(1918);function o(e){var t=a(e);var r=s(t);4===t.length&&r.push(t[3]);return r}var l={"#":n,hsl:o,rgb:i};function c(e){for(var t in l)if(0===e.indexOf(t))return l[t](e)}c.rgb=i;c.hsl=a;c.hex=n;e.exports=c},function(e,t,r){var a=r(1350);var n=r(1047);function i(e,t){e=parseFloat(e);switch(t){case 0:return n(e,0,360);case 1:case 2:return n(e,0,100);case 3:return n(e,0,1)}}function s(e){return a(e).map(i)}e.exports=s},function(e,t){function r(e){var t="#";for(var r=1;r<e.length;r++){var a=e.charAt(r);t+=a+a}return t}function a(e){4!==e.length&&5!==e.length||(e=r(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var a=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(a)}return t}e.exports=a},function(e,t,r){var a=r(1350);var n=r(1047);function i(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*n(parseInt(e,10),0,100)/100):n(parseInt(e,10),0,255):n(parseFloat(e),0,1)}function s(e){return a(e).map(i)}e.exports=s},function(e,t){function r(e){var t=e[0]/360,r=e[1]/100,a=e[2]/100,n,i,s,o,l;if(0==r){l=255*a;return[l,l,l]}i=a<.5?a*(1+r):a+r-a*r;n=2*a-i;o=[0,0,0];for(var c=0;c<3;c++){s=t+1/3*-(c-1);s<0&&s++;s>1&&s--;l=6*s<1?n+6*(i-n)*s:2*s<1?i:3*s<2?n+(i-n)*(2/3-s)*6:n;o[c]=255*l}return o}e.exports=r},function(e,t,r){(function(t){var r="Expected a function";var a=9007199254740991;var n="[object Arguments]",i="[object Function]",s="[object GeneratorFunction]";var o="object"==typeof t&&t&&t.Object===Object&&t;var l="object"==typeof self&&self&&self.Object===Object&&self;var c=o||l||Function("return this")();function u(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function d(e,t){var r=-1,a=t.length,n=e.length;while(++r<a)e[n+r]=t[r];return e}var p=Object.prototype;var m=p.hasOwnProperty;var h=p.toString;var f=c.Symbol,v=p.propertyIsEnumerable,b=f?f.isConcatSpreadable:void 0;var g=Math.max;function _(e,t,r,a,n){var i=-1,s=e.length;r||(r=O);n||(n=[]);while(++i<s){var o=e[i];t>0&&r(o)?t>1?_(o,t-1,r,a,n):d(n,o):a||(n[n.length]=o)}return n}function y(e,t){t=g(void 0===t?e.length-1:t,0);return function(){var r=arguments,a=-1,n=g(r.length-t,0),i=Array(n);while(++a<n)i[a]=r[t+a];a=-1;var s=Array(t+1);while(++a<t)s[a]=r[a];s[t]=i;return u(e,this,s)}}function k(e){return y(function(t){t=_(t,1);var a=t.length,n=a;e&&t.reverse();while(n--)if("function"!=typeof t[n])throw new TypeError(r);return function(){var e=0,r=a?t[e].apply(this,arguments):arguments[0];while(++e<a)r=t[e].call(this,r);return r}})}function O(e){return w(e)||E(e)||!!(b&&e&&e[b])}function E(e){return S(e)&&m.call(e,"callee")&&(!v.call(e,"callee")||h.call(e)==n)}var w=Array.isArray;function C(e){return null!=e&&I(e.length)&&!j(e)}function S(e){return N(e)&&C(e)}function j(e){var t=T(e)?h.call(e):"";return t==i||t==s}function I(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function T(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function N(e){return!!e&&"object"==typeof e}var A=k();e.exports=A}).call(this,r(49))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.yuv2rgb=a;t.rgb2yuv=n;function a(e){var t=e[0],r=e[1],a=e[2],n,i,s;n=1*t+0*r+1.13983*a;i=1*t+-.39465*r+-.5806*a;s=1*t+2.02311*r+0*a;n=Math.min(Math.max(0,n),1);i=Math.min(Math.max(0,i),1);s=Math.min(Math.max(0,s),1);return[255*n,255*i,255*s]}function n(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255;var n=.299*t+.587*r+.114*a;var i=-.14713*t+-.28886*r+.436*a;var s=.615*t+-.51499*r+-.10001*a;return[n,i,s]}},function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"}},function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n=r(1);var i=l(n);var s=r(1345);var o=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r={};for(var a in e){if(t.indexOf(a)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,a))continue;r[a]=e[a]}return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m={actionBar:{paddingTop:8,paddingBottom:7,paddingLeft:16},payload:{margin:0,paddingLeft:16,overflow:"auto"}};var h=function(e){p(t,e);function t(r){u(this,t);var a=d(this,e.call(this,r));a.shouldExpandNode=a.shouldExpandNode.bind(a);return a}t.prototype.renderPayload=function e(t){return i.default.createElement("div",{style:a({},m.payload,{backgroundColor:this.props.theme.base00})},Object.keys(t).length>0?i.default.createElement(o.default,{theme:this.props.theme,invertTheme:false,keyPath:["action"],data:t,shouldExpandNode:this.shouldExpandNode}):"")};t.prototype.shouldExpandNode=function e(t,r,a){return this.props.expandActionRoot&&0===a};t.prototype.render=function e(){var t=this.props.action;var r=t.type;var n=c(t,["type"]);return i.default.createElement("div",{style:a({backgroundColor:this.props.theme.base02,color:this.props.theme.base06},this.props.style)},i.default.createElement("div",{style:m.actionBar,onClick:this.props.onClick},null!==r&&r.toString()),this.props.collapsed?"":this.renderPayload(n))};return t}(n.Component);t.default=h},function(e,t,r){(function(t){var r="Expected a function";var a=NaN;var n="[object Symbol]";var i=/^\s+|\s+$/g;var s=/^[-+]0x[0-9a-f]+$/i;var o=/^0b[01]+$/i;var l=/^0o[0-7]+$/i;var c=parseInt;var u="object"==typeof t&&t&&t.Object===Object&&t;var d="object"==typeof self&&self&&self.Object===Object&&self;var p=u||d||Function("return this")();var m=Object.prototype;var h=m.toString;var f=Math.max,v=Math.min;var b=function(){return p.Date.now()};function g(e,t,a){var n,i,s,o,l,c,u=0,d=false,p=false,m=true;if("function"!=typeof e)throw new TypeError(r);t=O(t)||0;if(_(a)){d=!!a.leading;p="maxWait"in a;s=p?f(O(a.maxWait)||0,t):s;m="trailing"in a?!!a.trailing:m}function h(t){var r=n,a=i;n=i=void 0;u=t;o=e.apply(a,r);return o}function g(e){u=e;l=setTimeout(E,t);return d?h(e):o}function y(e){var r=e-c,a=e-u,n=t-r;return p?v(n,s-a):n}function k(e){var r=e-c,a=e-u;return void 0===c||r>=t||r<0||p&&a>=s}function E(){var e=b();if(k(e))return w(e);l=setTimeout(E,y(e))}function w(e){l=void 0;if(m&&n)return h(e);n=i=void 0;return o}function C(){void 0!==l&&clearTimeout(l);u=0;n=c=i=l=void 0}function S(){return void 0===l?o:w(b())}function j(){var e=b(),r=k(e);n=arguments;i=this;c=e;if(r){if(void 0===l)return g(c);if(p){l=setTimeout(E,t);return h(c)}}void 0===l&&(l=setTimeout(E,t));return o}j.cancel=C;j.flush=S;return j}function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function k(e){return"symbol"==typeof e||y(e)&&h.call(e)==n}function O(e){if("number"==typeof e)return e;if(k(e))return a;if(_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var r=o.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):s.test(e)?a:+e}e.exports=g}).call(this,r(49))},,,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){var a,i;(function(){var r=false;var s=this;var o=function(e){if(e instanceof o)return e;if(!(this instanceof o))return new o(e);this.EXIFwrapped=e};true;"undefined"!==typeof e&&e.exports&&(t=e.exports=o);t.EXIF=o;var l=o.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"};var c=o.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};var u=o.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"};var d=o.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"};var p=o.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function m(e,t,r){e.addEventListener?e.addEventListener(t,r,false):e.attachEvent&&e.attachEvent("on"+t,r)}function h(e){return!!e.exifdata}function f(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"";e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");var r=atob(e);var a=r.length;var n=new ArrayBuffer(a);var i=new Uint8Array(n);for(var s=0;s<a;s++)i[s]=r.charCodeAt(s);return n}function v(e,t){var r=new XMLHttpRequest;r.open("GET",e,true);r.responseType="blob";r.onload=function(e){200!=this.status&&0!==this.status||t(this.response)};r.send()}function b(e,t){function a(r){var a=g(r);e.exifdata=a||{};var n=_(r);e.iptcdata=n||{};if(o.isXmpEnabled){var i=I(r);e.xmpdata=i||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var n=f(e.src);a(n)}else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){a(e.target.result)};v(e.src,function(e){i.readAsArrayBuffer(e)})}else{var s=new XMLHttpRequest;s.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";a(s.response);s=null};s.open("GET",e.src,true);s.responseType="arraybuffer";s.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var i=new FileReader;i.onload=function(e){r&&console.log("Got file of length "+e.target.result.byteLength);a(e.target.result)};i.readAsArrayBuffer(e)}}function g(e){var t=new DataView(e);r&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){r&&console.log("Not a valid JPEG");return false}var a=2,n=e.byteLength,i;while(a<n){if(255!=t.getUint8(a)){r&&console.log("Not a valid marker at offset "+a+", found: "+t.getUint8(a));return false}i=t.getUint8(a+1);r&&console.log(i);if(225==i){r&&console.log("Found 0xFFE1 marker");return j(t,a+4,t.getUint16(a+2)-2)}a+=2+t.getUint16(a+2)}}function _(e){var t=new DataView(e);r&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){r&&console.log("Not a valid JPEG");return false}var a=2,n=e.byteLength;var i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};while(a<n){if(i(t,a)){var s=t.getUint8(a+7);s%2!==0&&(s+=1);0===s&&(s=4);var o=a+8+s;var l=t.getUint16(a+6+s);return k(e,o,l)}a++}}var y={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function k(e,t,r){var a=new DataView(e);var n={};var i,s,o,l,c;var u=t;while(u<t+r){if(28===a.getUint8(u)&&2===a.getUint8(u+1)){l=a.getUint8(u+2);if(l in y){o=a.getInt16(u+3);c=o+5;s=y[l];i=S(a,u+5,o);n.hasOwnProperty(s)?n[s]instanceof Array?n[s].push(i):n[s]=[n[s],i]:n[s]=i}}u++}return n}function O(e,t,a,n,i){var s=e.getUint16(a,!i),o={},l,c,u;for(u=0;u<s;u++){l=a+12*u+2;c=n[e.getUint16(l,!i)];!c&&r&&console.log("Unknown tag: "+e.getUint16(l,!i));o[c]=E(e,l,t,a,i)}return o}function E(e,t,r,a,n){var i=e.getUint16(t+2,!n),s=e.getUint32(t+4,!n),o=e.getUint32(t+8,!n)+r,l,c,u,d,p,m;switch(i){case 1:case 7:if(1==s)return e.getUint8(t+8,!n);l=s>4?o:t+8;c=[];for(d=0;d<s;d++)c[d]=e.getUint8(l+d);return c;case 2:l=s>4?o:t+8;return S(e,l,s-1);case 3:if(1==s)return e.getUint16(t+8,!n);l=s>2?o:t+8;c=[];for(d=0;d<s;d++)c[d]=e.getUint16(l+2*d,!n);return c;case 4:if(1==s)return e.getUint32(t+8,!n);c=[];for(d=0;d<s;d++)c[d]=e.getUint32(o+4*d,!n);return c;case 5:if(1==s){p=e.getUint32(o,!n);m=e.getUint32(o+4,!n);u=new Number(p/m);u.numerator=p;u.denominator=m;return u}c=[];for(d=0;d<s;d++){p=e.getUint32(o+8*d,!n);m=e.getUint32(o+4+8*d,!n);c[d]=new Number(p/m);c[d].numerator=p;c[d].denominator=m}return c;case 9:if(1==s)return e.getInt32(t+8,!n);c=[];for(d=0;d<s;d++)c[d]=e.getInt32(o+4*d,!n);return c;case 10:if(1==s)return e.getInt32(o,!n)/e.getInt32(o+4,!n);c=[];for(d=0;d<s;d++)c[d]=e.getInt32(o+8*d,!n)/e.getInt32(o+4+8*d,!n);return c}}function w(e,t,r){var a=e.getUint16(t,!r);return e.getUint32(t+2+12*a,!r)}function C(e,t,r,a){var n=w(e,t+r,a);if(!n)return{};if(n>e.byteLength)return{};var i=O(e,t,t+n,d,a);if(i["Compression"])switch(i["Compression"]){case 6:if(i.JpegIFOffset&&i.JpegIFByteCount){var s=t+i.JpegIFOffset;var o=i.JpegIFByteCount;i["blob"]=new Blob([new Uint8Array(e.buffer,s,o)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i["Compression"])}else 2==i["PhotometricInterpretation"]&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}function S(e,t,r){var a="";for(n=t;n<t+r;n++)a+=String.fromCharCode(e.getUint8(n));return a}function j(e,t){if("Exif"!=S(e,t,4)){r&&console.log("Not valid EXIF data! "+S(e,t,4));return false}var a,n,i,s,o,d=t+6;if(18761==e.getUint16(d))a=false;else{if(19789!=e.getUint16(d)){r&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");return false}a=true}if(42!=e.getUint16(d+2,!a)){r&&console.log("Not valid TIFF data! (no 0x002A)");return false}var m=e.getUint32(d+4,!a);if(m<8){r&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(d+4,!a));return false}n=O(e,d,d+m,c,a);if(n.ExifIFDPointer){s=O(e,d,d+n.ExifIFDPointer,l,a);for(i in s){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[i]=p[i][s[i]];break;case"ExifVersion":case"FlashpixVersion":s[i]=String.fromCharCode(s[i][0],s[i][1],s[i][2],s[i][3]);break;case"ComponentsConfiguration":s[i]=p.Components[s[i][0]]+p.Components[s[i][1]]+p.Components[s[i][2]]+p.Components[s[i][3]];break}n[i]=s[i]}}if(n.GPSInfoIFDPointer){o=O(e,d,d+n.GPSInfoIFDPointer,u,a);for(i in o){switch(i){case"GPSVersionID":o[i]=o[i][0]+"."+o[i][1]+"."+o[i][2]+"."+o[i][3];break}n[i]=o[i]}}n["thumbnail"]=C(e,d,m,a);return n}function I(e){if(!("DOMParser"in self))return;var t=new DataView(e);r&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){r&&console.log("Not a valid JPEG");return false}var a=2,n=e.byteLength,i=new DOMParser;while(a<n-4){if("http"==S(t,a,4)){var s=a-1;var o=t.getUint16(a-2)-1;var l=S(t,s,o);var c=l.indexOf("xmpmeta>")+8;l=l.substring(l.indexOf("<x:xmpmeta"),c);var u=l.indexOf("x:xmpmeta")+10;l=l.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(u);var d=i.parseFromString(l,"text/xml");return N(d)}a++}}function T(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var r=0;r<e.attributes.length;r++){var a=e.attributes.item(r);t["@attributes"][a.nodeName]=a.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes.item(n);var s=i.nodeName;if(null==t[s])t[s]=T(i);else{if(null==t[s].push){var o=t[s];t[s]=[];t[s].push(o)}t[s].push(T(i))}}return t}function N(e){try{var t={};if(e.children.length>0)for(var r=0;r<e.children.length;r++){var a=e.children.item(r);var n=a.attributes;for(var i in n){var s=n[i];var o=s.nodeName;var l=s.nodeValue;void 0!==o&&(t[o]=l)}var c=a.nodeName;if("undefined"==typeof t[c])t[c]=T(a);else{if("undefined"==typeof t[c].push){var u=t[c];t[c]=[];t[c].push(u)}t[c].push(T(a))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}o.enableXmp=function(){o.isXmpEnabled=true};o.disableXmp=function(){o.isXmpEnabled=false};o.getData=function(e,t){if((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)return false;h(e)?t&&t.call(e):b(e,t);return true};o.getTag=function(e,t){if(!h(e))return;return e.exifdata[t]};o.getIptcTag=function(e,t){if(!h(e))return;return e.iptcdata[t]};o.getAllTags=function(e){if(!h(e))return{};var t,r=e.exifdata,a={};for(t in r)r.hasOwnProperty(t)&&(a[t]=r[t]);return a};o.getAllIptcTags=function(e){if(!h(e))return{};var t,r=e.iptcdata,a={};for(t in r)r.hasOwnProperty(t)&&(a[t]=r[t]);return a};o.pretty=function(e){if(!h(e))return"";var t,r=e.exifdata,a="";for(t in r)r.hasOwnProperty(t)&&("object"==typeof r[t]?r[t]instanceof Number?a+=t+" : "+r[t]+" ["+r[t].numerator+"/"+r[t].denominator+"]\r\n":a+=t+" : ["+r[t].length+" values]\r\n":a+=t+" : "+r[t]+"\r\n");return a};o.readFromBinaryFile=function(e){return g(e)};true;!(a=[],i=function(){return o}.apply(t,a),void 0!==i&&(e.exports=i))}).call(this)},,function(e,t,r){},,function(e,t,r){},function(e,t){},,function(e,t,r){"use strict";var a=r(2);var n=r(129);var i=r(4);var s=r(11);var o=r(3437);var l=r(480);var c=r(17);var u=r(1127);var d=r(189);var p=r(1007);var m=r(3);var h=r.n(m);var f=r(32);var v=r.n(f);var b=r(23);var g=r(19);var _=r(709);var y=r(122);var k=r(12);var O=r(312);var E=r(44);var w=r(26);var C=r(21);var S=r(62);var j=r(36);function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,r=e.channel,a=e.userIsAway,n=e.userPresenceLastChanged,i=e.currentUserId,o=e.highlightWords,l=e.messages,c=void 0===l?[]:l;var u=0;var d=0;c.forEach(function(e){if(!e)return;if(Object(j["isMessageUnread"])(e,Object(k["getLastReadTs"])(r),i)){u+=1;Object(j["shouldMessageBadgeChannel"])({state:t,msg:e,channel:r,currentUserId:i,userIsAway:a,userPresenceLastChanged:n,highlightWords:o,isAppMsg:Object(j["isAppMessage"])(t,e),featureWtaNotifications:Object(s["isFeatureEnabled"])(t,"feature_wta_notifications"),teamId:Object(b["getTeamId"])(t)})&&(d+=1)}});return{unreadCnt:u,unreadHighlightCnt:d}}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,r=e.start,a=e.reachedStart,n=e.reachedEnd,i=e.initialCounts,s=e.messages,o=e.channel,l=e.currentUser,c=e.userIsAway,u=e.userPresenceLastChanged,d=e.highlightWords;var p=0;var m=0;var h=true;if(n){var f=I({state:t,channel:o,messages:s,userIsAway:c,userPresenceLastChanged:u,currentUserId:l.id,highlightWords:d});p=f.unreadCnt;m=f.unreadHighlightCnt;if(r<=Object(k["getLastReadTs"])(o))h=false;else{i&&p<i.unreadCnt&&(p=i.unreadCnt);i&&m<i.unreadHighlightCnt&&(m=i.unreadHighlightCnt);h=s.length<42&&!a}}else if(i){p=i.unreadCnt;m=i.unreadHighlightCnt}return{unreadCnt:p,unreadHighlightCnt:m,needFetch:h}}function N(e){if(!e)return false;if(!e.was_archived_this_session){if(Object(k["isArchived"])(e))return false;if(Object(k["isPublicChannel"])(e)&&!Object(k["isMemberOfChannel"])(e))return false}return true}var A="COUNTS";var R=Object(i["e"])("Update unread counts",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.channelId;var i=t();Object(s["isFeatureEnabled"])(i,"feature_tinyspeck")&&Object(S["e"])("rmsgs_updateUnreadCounts");var l=false;var u=Object(g["getChannelById"])(i,n,l);if(!u)return true;if(!N(u))return true;var d=Object(y["getTimestampsByChannelId"])(i,n,null),p=d.timestamps,m=d.start,h=d.reachedStart,f=d.reachedEnd;var v=Object(o["getInitialUnreadCountsByChannelId"])(i,n);var b=Object(a["map"])(p||[],function(e){return Object(E["getMessageByTimestamp"])(i,u.id,e)});var _=Object(w["getCurrentMember"])(i);var j="away"===Object(O["getPresenceByMemberId"])(i,_.id);var I=_._presence_last_changed||Object(s["getFromBootData"])(i,"start_ms");var R=T({state:i,start:m,reachedStart:h,reachedEnd:f,initialCounts:v,messages:b,channel:u,currentUser:_,userIsAway:j,userPresenceLastChanged:I,highlightWords:Object(C["getUserHighlightWords"])(i)}),M=R.unreadCnt,P=R.unreadHighlightCnt,x=R.needFetch;if(M!==Object(k["getUnreadCount"])(u)){Object(c["a"])({state:i}).info(A,"Updated unread_cnt for "+u.id+": "+M);e(Object(g["updateOneKeyForChannel"])({id:u.id,unread_cnt:M}))}if(P!==u.unread_highlight_cnt){Object(c["a"])({state:i}).info(A,"Updated unread_highlight_cnt for "+u.id+": "+P);e(Object(g["updateOneKeyForChannel"])({id:u.id,unread_highlight_cnt:P}))}Object(s["isFeatureEnabled"])(i,"feature_tinyspeck")&&Object(S["g"])("rmsgs_updateUnreadCounts","rmsgs_updateUnreadCounts");return!x});R.propTypes={channelId:n["b"].string.isRequired};var M=R;var P="COUNTS";var x=function e(t,r){if(Object(k["isUnknownOrNonExistent"])(r)){var a=t.has_unreads,n=t.mention_count_display,i=t.unread_count_display,s=t.dm_count,o=t.latest,l=t.user_id,c=v()(t,["has_unreads","mention_count_display","unread_count_display","dm_count","latest","user_id"]);var u=h()({},c);u.is_im&&(u.user=l);return u}var d={};var p=Object(k["getLastReadTs"])(t);void 0!==p&&Object(k["getLastReadTs"])(r)!==p&&(d.last_read=p);var m=Object(k["getPriority"])(t);void 0!==m&&Object(k["getPriority"])(r)!==m&&(d.priority=m);var f=Object(k["isStarred"])(t);void 0!==f&&Object(k["isStarred"])(r)!==f&&(d.is_starred=f);var b=Object(k["isOpen"])(t);(Object(k["isIm"])(t)||Object(k["isMpim"])(t))&&void 0!==b&&Object(k["isOpen"])(r)!==b&&(d.is_open=b);return d};var D=Object(i["e"])("Apply counts to channel objects and update stores",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.counts,i=void 0===n?[]:n;var l=[];var u=t();var d={};var p=[];var m=[];var h=Object(s["isFeatureEnabled"])(u,"feature_degraded_send");i.forEach(function(e){var t=Object(g["getChannelById"])(u,e.id,h);if(!t||Object(k["isNonExistent"])(t)){Object(c["a"])({state:u}).error(P,{id:e.id,has_unreads:e.has_unreads||!!e.dm_count||!!e.unread_count_display,nonExistent:Object(k["isNonExistent"])(t)},"applyCountsToChannels_missing_channel");return}if(h&&Object(k["isUnknown"])(t)){Object(c["a"])({state:u}).warn(P,"Unknown channel "+t.id+" in applyCountsToChannels");m.push(t.id)}if(Object(k["isArchived"])(t))return;if(Object(k["isPublicChannel"])(t)&&!Object(k["isMemberOfChannel"])(t))return;var r=h?x(e,t):{};var n=e.latest;n&&n!==t.latest&&(r.latest=n);var i=Object(y["getTimestampsByChannelId"])(u,t.id),s=i.reachedEnd;var o=e.has_unreads;var f=o?1:0;var v=0;var b=0;var _=false;if(Object(k["isIm"])(t)||Object(k["isIm"])(e))v=e.dm_count||f;else if(Object(k["isMpim"])(t)||Object(k["isMpim"])(e))v=e.unread_count_display||f;else{_=true;v=f;b=e.mention_count_display||0}if(!v&&b){Object(c["a"])({state:u}).warn(P,"Ignoring positive mention_count_display because has_unreads == false for "+t.id);b=0}d[t.id]={unreadCnt:v,unreadHighlightCnt:b};if(s)p.push(t.id);else{v!==Object(k["getUnreadCount"])(t)&&(r.unread_cnt=v);_&&b!==t.unread_highlight_cnt&&(r.unread_highlight_cnt=b)}if(!Object(a["isEmpty"])(r)){r.id=t.id;l.push(r)}});Object(a["isEmpty"])(l)||e(Object(g["bulkUpdateChannels"])({channels:l}));e(Object(o["setInitialUnreadCounts"])(d));p.forEach(function(t){e(M({channelId:t}))});h&&m.length&&Object(_["c"])(Object(b["getTeamId"])(u),m)});D.propTypes={counts:n["b"].array.isRequired};var F={makeBasePayload:x};var L=D;var B="COUNTS";var U=Object(i["e"])("Apply counts to channels and threads",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.channels,i=r.groups,m=r.ims,h=r.mpims,f=r.threads;var v=t();if(!Object(s["useReactMessages"])(v)||!Object(s["isClientApp"])(v))return;e(Object(o["setInitialUnreadCounts"])({}));var b=Object(a["compact"])(Object(a["concat"])(n,i,m,h));e(L({counts:b}));if(f){Object(u["c"])(f.has_unreads,f.mention_count,f.mention_count_by_channel);if(Object(s["isFeatureEnabled"])(v,"feature_react_threads")){Object(c["a"])({state:v}).info(B,"Threads has_unreads:"+f.has_unreads+" mention_count:"+f.mention_count);e(Object(l["updateUnreadThreads"])({hasUnreads:f.has_unreads,mentionCountByChannel:Object(a["isArray"])(f.mention_count_by_channel)?{}:f.mention_count_by_channel}))}}if(!Object(s["isFeatureEnabled"])(v,"feature_incremental_unread_counts")){Object(d["c"])();Object(p["a"])()}Object(c["a"])({state:v}).info(B,"Completed counts processing")});U.propTypes={channels:n["b"].array,groups:n["b"].array,ims:n["b"].array,mpims:n["b"].array,threads:n["b"].object};var q=U;r.d(t,"a",function(){return q});r.d(t,false,function(){return L});r.d(t,"b",function(){return M})},function(e,t){},function(e,t){},,function(e,t){},,,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,function(e,t,r){},,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,,function(e,t,r){},function(e,t,r){var a={"./actions.js":3499,"./activity-session.js":3497,"./add-app-to-channel.js":3408,"./add-ephemeral-feedback.js":2093,"./api-unauthed.js":3470,"./api.js":3312,"./apps.js":2094,"./automount.js":2095,"./bots.js":2096,"./calls.js":3485,"./channels.js":2097,"./connectivity.js":3308,"./console.js":2098,"./constants.js":2099,"./emoji.js":3516,"./emojiComponent.js":3517,"./enterprise.js":2100,"./enterprise/mount-create-workspace-modal.jsx":3296,"./enterprise/mount-dashboard-app-management.jsx":3550,"./enterprise/mount-dashboard-nav.jsx":3280,"./enterprise/mount-dashboard-team-apps.jsx":3294,"./enterprise/mount-migration-table.jsx":3551,"./enterprise/mount-move-channels-custom-message.jsx":3327,"./enterprise/mount-org-wide-settings-pane.jsx":3292,"./enterprise/mount-terms-of-service.jsx":3338,"./enterprise/mount-workspace-directory.jsx":3281,"./eventlog.js":2153,"./experiments-unauthed.js":3335,"./experiments.js":2154,"./flannel.js":2155,"./fuzzy-matcher.js":2156,"./greetings-earth.js":3332,"./infra/beacon-api-call.js":3330,"./infra/boot/index.js":3328,"./infra/connectivity.js":2157,"./infra/debug.js":2158,"./infra/metrics.js":2159,"./infra/rtm.js":2160,"./infra/run-cdn-download-test.js":3262,"./infra/socket-manager.js":2161,"./infra/supermodel.js":2162,"./infra/token-to-team-id.js":2163,"./lazy-filter-select.jsx":2164,"./member-counts.js":2165,"./members.js":3333,"./membership.js":2166,"./metrics-responsiveness.js":2167,"./mount-admin-member-modal.js":3323,"./mount-apps-browser.js":3305,"./mount-browser-incoming-call.js":3490,"./mount-channel-notification-settings.js":3325,"./mount-channel-options-dialog.js":3270,"./mount-channel-sidebar.js":3545,"./mount-connected-workspaces.js":2182,"./mount-custom-status-input.js":3334,"./mount-document-title.js":3474,"./mount-downloads-view.js":3301,"./mount-emoji-picker.js":3457,"./mount-favicon.js":3473,"./mount-file-upload-banner.js":3336,"./mount-files-flexpane.js":3278,"./mount-global-nav.js":3509,"./mount-image-viewer.js":3298,"./mount-keyboard-shortcuts.js":3293,"./mount-lazy-filter-select.js":3345,"./mount-member-directory-flexpane.js":3412,"./mount-menu.js":3348,"./mount-message-actions-menu.js":3349,"./mount-message-pane-banner.js":3355,"./mount-message-pane-drag-overlay.js":3446,"./mount-message-pane.js":3549,"./mount-migration-blocker.js":3309,"./mount-modal-container.js":3331,"./mount-notification-bar.js":3317,"./mount-oauth-confirm.jsx":3315,"./mount-org-retention-request.js":3282,"./mount-pricing-calculator.js":3340,"./mount-profile-flexpane.js":3310,"./mount-redox.js":3302,"./mount-scrollbar.js":3342,"./mount-service-import-mapping-form.js":3291,"./mount-starred-items-flexpane.js":3438,"./mount-team-creator-onboarding-dialog.js":3530,"./mount-thread-drag-overlay.js":3346,"./mount-threads-flexpane.js":3544,"./mount-toast.js":2286,"./mount-tooltip-tip.js":3351,"./mount-user-groups-flexpane.js":3352,"./mount-user-groups-list.js":3353,"./mpims.js":2296,"./onboarding.js":3535,"./open-app-management-modal.js":2297,"./open-app-permission-dialog.js":2298,"./open-channel-notification-settings-dialog.js":3329,"./prefs.js":3356,"./presence-manager.js":2299,"./reactions.js":2300,"./redux.js":3546,"./remove-app-from-channel.js":3341,"./rules.js":2307,"./rules/files.js":2308,"./rules/notifications.js":2309,"./search.js":3450,"./searcher.js":3347,"./send-message.js":2310,"./set-app-element-for-react-modal.js":2311,"./slash-command.js":3443,"./stars.js":2312,"./teams.js":2313,"./texty.js":3441,"./typing.js":2314,"./user-groups.js":2315,"./utility/a11y.js":3316,"./utility/broadcast-keywords.js":2316,"./utility/client-action-token.js":2317,"./utility/clipboard.js":2318,"./utility/clog.js":2319,"./utility/currency.js":2320,"./utility/date-time.js":2321,"./utility/desktop.js":3299,"./utility/environment.js":2322,"./utility/format.js":3354,"./utility/i18n.js":2323,"./utility/messages.js":2324,"./utility/search/autocomplete-suggestions.js":2325,"./utility/search/autocomplete.js":2326,"./utility/search/conversions.js":2327,"./utility/threads.js":2328,"./utility/url.js":2329,"./utility/utility.js":3559,"./utility/versions.js":2330};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=2091},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(129);var n=r(22);var i=r(25);var s=Object(n["a"])("Calls users.counts endpoint",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.reason,n=void 0===a?"users-counts-api/fetchUsersCounts":a;return e(Object(i["a"])({method:"users.counts",args:{mpim_aware:true,only_relevant_ims:true,simple_unreads:true,include_threads:true},reason:n})).then(function(e){if(!e||!e.ok)return{};var t=e.channels,r=e.groups,a=e.ims,n=e.mpims,i=e.threads;return{channels:t,groups:r,ims:a,mpims:n,threads:i}})});s.propTypes={reason:a["b"].string}},function(e,t,r){"use strict";r.r(t);var a=r(458);var n=r(51);Object(n["a"])("interop.addEphemeralFeedback",function(e){return TS.redux.dispatch(Object(a["b"])(e))})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(247);var i=r(315);var s=r(426);var o=r(875);var l=r(702);var c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.getBoundingClientRect?t.getBoundingClientRect():{}};Object(a["a"])("interop.apps",{getAppById:function e(t){return Object(n["getAppById"])(TS.redux.getState(),t)},ingestApps:function e(t){return TS.redux.dispatch(Object(n["bulkAddApps"])(t))},clearApps:function e(){return TS.redux.dispatch(Object(n["clearApps"])())},isAppSpaceEnabled:function e(){return Object(n["isAppSpaceEnabled"])(TS.redux.getState())},isGlobalActionsEnabled:function e(){return Object(n["isGlobalActionsEnabled"])(TS.redux.getState())},openAppProfileCard:function e(t,r,a,n,i){return TS.redux.dispatch(Object(o["a"])({serviceId:t,homeWorkspaceId:r,memberId:a,coordinates:c(n),popoverProps:i}))},promiseToGetLegacyAppProfileByServiceId:function e(t){return TS.redux.dispatch(Object(s["promiseToGetLegacyAppProfileByServiceId"])({serviceId:t}))},loadAppActions:function e(){return TS.redux.dispatch(Object(i["loadAppActions"])())},runAppAction:function e(t){return TS.redux.dispatch(Object(l["b"])(t))}})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(334);Object(a["a"])("interop.automount.mountAllWithStore",n["b"])},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(494);var s=r(51);var o=r(162);Object(s["a"])("interop.bots",n()({},i,{getBotState:function e(){return Object(o["getBotState"])(TS.redux.getState())},getBotById:function e(t){return Object(o["getBotById"])(TS.redux.getState(),t)},getBotNameById:function e(t){return Object(o["getBotNameById"])(TS.redux.getState(),t)},getBotInfoByMsg:function e(t){return Object(o["getBotInfoByMsg"])(TS.redux.getState(),t)},getBotConfigureUrl:function e(t){return Object(o["getBotConfigureUrl"])(TS.redux.getState(),t)},isBotExternal:function e(t){return Object(o["isBotExternal"])(TS.redux.getState(),t)},ensureBotsArePresent:function e(t){return Object(o["ensureBotsArePresent"])(TS.redux.getState(),TS.redux.dispatch,t)}}))},function(e,t,r){"use strict";r.r(t);var a=r(94);var n=r(709);var i=r(23);var s=r(353);var o=r(741);var l=r(135);var c=r(12);var u=r(51);var d=r(602);function p(e,t){var r=TS.redux.getState();var n=Object(a["f"])(r,e,t);return TS.redux.channels.interop.maybeWrapEntity(n)}function m(e,t){if(!e)return null;var r=p(e,t);if(r&&r.is_channel)return r;return null}function h(e,t){if(!e)return null;var r=p(e,t);if(r&&r.is_group&&!r.is_mpim)return r;return null}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var r=TS.redux.channels.getEntityById(e,t);if(r&&r.is_group&&r.is_mpim)return r;return null}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var r=TS.redux.channels.getEntityById(e,t);if(Object(c["isIm"])(r))return r;return null}function b(){return TS.redux.dispatch(Object(s["n"])())}function g(e,t){return TS.redux.dispatch(Object(s["G"])({channel:e,isBulkUpsert:t}))}function _(e){return TS.redux.dispatch(Object(l["c"])(e))}function y(e){return TS.redux.dispatch(Object(l["f"])(e))}function k(e){return TS.redux.dispatch(Object(l["e"])(e))}function O(e){return TS.redux.dispatch(Object(l["d"])(e))}function E(e){var t=TS.redux.getState();return Object(a["v"])(t,e)}function w(e,t){return TS.redux.dispatch(Object(l["A"])({channelId:e,topic:t}))}function C(e){var t=TS.redux.getState();var r=Object(i["getTeamId"])(t);Object(n["b"])(r,e)}function S(e){var t=TS.redux.getState();var r=Object(i["getTeamId"])(t);return Object(n["a"])(r,e)}function j(){return Object(n["e"])()}function I(e,t){return TS.redux.dispatch(Object(s["z"])({channel:e,user:t}))}Object(u["a"])("interop.channels",{disconnectChannel:l["b"],getPublicChannelById:m,getEntityById:p,getGeneralChannel:b,getGroupById:h,getImById:v,getMpimById:f,getNeedsCreatedMessageState:function e(t){return Object(o["getNeedsCreatedMessageState"])(TS.redux.getState(),t)},isImWithDeletedMember:function e(t){return Object(c["isImWithDeletedMember"])(TS.redux.getState(),t)},openConversationByMembers:Object(u["b"])(l["q"]),submitChannelPurpose:l["z"],submitChannelTopic:w,submitCreate:l["C"],submitDeclineSharedChannelInvite:function e(t){return TS.redux.dispatch(Object(l["D"])(t))},submitLeave:l["I"],joinConversationApi:s["p"],closeChannelApi:s["i"],updateOrgAccessForChannel:s["F"],upsertChannelSharesLocally:s["H"],upsertChannel:g,getChannelPinnedItemByMessage:c["getChannelPinnedItemByMessage"],channelTopicExceedsLimit:c["channelTopicExceedsLimit"],getChannelTopicError:c["getChannelTopicError"],updateChannelLastTrigger:d["updateChannelLastTrigger"],fetchAndUpsertChannelsById:_,fetchAndUpsertChannelsWithQuery:y,fetchAndUpsertChannelsFromAPI:O,fetchAndUpsertChannelsFromFlannel:k,hasChannelWithId:E,markObjectsAsFresh:C,pauseRefetch:j,isObjectFresh:S,shouldStopChannelMentions:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return c["shouldStopChannelMentions"].apply(void 0,[TS.redux.getState()].concat(r))},setConversationOpen:I})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(42);Object(a["a"])("interop.console",n)},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(51);var s=r(70);Object(i["a"])("interop.constants",n()({},s))},function(e,t,r){"use strict";r.r(t);var a=r(170);var n=r(51);function i(){var e=TS.redux.getState();return Object(a["getEnterpriseOrgURL"])(e)}Object(n["a"])("interop.enterprise",{getOrgURL:i,getPotentiallyUnknownEnterprise:function e(){return Object(a["getPotentiallyUnknownEnterprise"])(TS.redux.getState())}})},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(827);var n=r(51);Object(n["a"])("interop.Eventlog",{createInstanceForTeam:a["a"],getInstanceForTeam:a["b"]})},function(e,t,r){"use strict";r.r(t);var a=r(351);var n=r(51);Object(n["a"])("interop.experiments",{getGroupForUser:function e(t){return Object(a["getGroupForUser"])(TS.redux.getState(),t)},getAllAssignmentsForDebugging:function e(){return Object(a["getAllAssignmentsForDebugging"])(TS.redux.getState())}})},function(e,t,r){"use strict";r.r(t);var a=r(11);var n=r(313);var i=r(51);var s=r(423);Object(i["a"])("interop.Flannel",{debugSetResponseDelay:n["b"],query:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return TS.redux.dispatch(Object(n["e"])({commandType:t,args:r,attemptNumber:a}))},fetchRawMembersWithQuery:function e(t,r){return TS.redux.dispatch(Object(s["e"])({query:t,limit:r}))},fetchRawChannelsWithQuery:function e(t,r){return TS.redux.dispatch(Object(s["c"])({query:t,limit:r}))},fetchRawMembersByIds:function e(t){return TS.redux.dispatch(Object(s["d"])({ids:t}))},fetchRawChannelsByIds:function e(t){return TS.redux.dispatch(Object(s["b"])({ids:t}))},getSocketStartArgs:function e(){return Object(n["d"])(TS.redux.getState())},useSocket:function e(){return Object(a["useSocket"])(TS.redux.getState())},getFlannelConnectionUrl:n["c"]})},function(e,t,r){"use strict";r.r(t);var a=r(995);var n=r(51);Object(n["a"])("interop.FuzzyMatcher",a["a"])},function(e,t,r){"use strict";r.r(t);var a=r(612);var n=r(51);Object(n["a"])("interop.BandwidthChecker",a["a"])},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(130);Object(a["a"])("interop.debug",n)},function(e,t,r){"use strict";r.r(t);var a=r(3524);var n=r(1005);var i=r(51);Object(i["a"])("interop.metrics",Object(a["b"])("timing"));Object(i["a"])("interop.metrics.start",function(){return n["a"].start()});Object(i["a"])("interop.metrics.sendDataAndEmptyQueue",function(){return n["a"].sendDataAndEmptyQueue()})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(53);Object(a["a"])("interop.rtm",{debugGetHandlers:n["d"],debugGetPendingMessages:function e(){return Object(n["e"])(TS.boot_data.team_id)}})},function(e,t,r){"use strict";r.r(t);var a=r(336);var n=r(3484);var i=r(51);function s(e){if(!a[e])throw new Error("There is no Socket Manager action called '"+e+"'");return function(){var t=a[e].apply(a,arguments);return TS.redux.dispatch(t)}}Object(i["a"])("interop.SocketManager",{clearFastReconnectUrl:s("clearFastReconnectUrl"),debugGetInstance:s("debugGetInstance"),debugGetState:s("debugGetState"),debugResetRateLimit:s("debugResetRateLimit"),debugSetFastReconnectsEnabled:s("debugSetFastReconnectsEnabled"),debugSetSocketConnectFlakiness:s("debugSetSocketConnectFlakiness"),debugSetSocketSendFlakiness:s("debugSetSocketSendFlakiness"),debugTriggerError:s("debugTriggerError"),disconnect:s("disconnect"),finalizeProvisionalConnection:s("finalizeProvisionalConnection"),reconnectImmediately:s("reconnectImmediately"),send:s("send"),sleep:s("sleep"),start:s("start"),wake:s("wake"),maybeTickleMS:function e(){return TS.redux.dispatch(Object(n["a"])())}})},function(e,t,r){"use strict";r.r(t);var a=r(1e3);var n=r(51);Object(n["a"])("interop.supermodel",a)},function(e,t,r){"use strict";r.r(t);var a=r(671);var n=r(51);Object(n["a"])("interop.setTeamIdForToken",a["c"])},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(2);var s=r.n(i);var o=r(10);var l=r(51);var c=r(1411);var u=r(1412);var d=r(1165);var p=r(1166);function m(e){var t=new o["b"]("channel_browser");var r=t.rt("<span>Show:</span> {label}",{label:e.label},function(t){var r=t.text;return n.a.createElement("span",{key:e.id,className:"sk_dark_gray"},r)});return r}function h(e){var t=new o["b"]("channel_browser");var r=t.rt("<span>Sort:</span> {label}",{label:e.label},function(t){var r=t.text;return n.a.createElement("span",{key:e.id,className:"sk_dark_gray"},r)});return r}function f(e){var t=new o["b"]("team_picker");var r=void 0;r=e?t.rt("No teams found matching <strong>{query}</strong>",{query:s.a.escape(e)}):t.t("No teams found");return r}function v(e){return n.a.createElement(c["a"],{item:e})}v.displayName="teamPickerListItem";function b(e){return n.a.createElement(u["a"],{item:e})}b.displayName="teamPickerToken";function g(e){return n.a.createElement(d["a"],{item:e})}g.displayName="memberListItem";function _(e){return n.a.createElement(p["a"],{item:e})}_.displayName="memberListToken";Object(l["a"])("interop.lazyFilterSelect",{channelBrowserShowWhichChannelsToken:m,channelBrowserSortByToken:h,teamPickerNoResults:f,teamPickerListItem:v,teamPickerToken:b,memberListItem:g,memberListToken:_})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(967);var i=r(203);function s(e){var t=TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:e}));if(t.promise)return t.promise.then(function(){return Object(i["getCachedMemberCounts"])(TS.redux.getState(),e).counts});return Promise.resolve(t.counts)}Object(a["a"])("interop.memberCounts",{getOrFetchMemberCounts:function e(t){return TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:t}))},promiseToGetMemberCounts:s,fetchMemberCountsForTeam:function e(){return TS.redux.dispatch(Object(n["b"])())}})},function(e,t,r){"use strict";r.r(t);var a=r(264);var n=r(51);var i=r(615);function s(e){return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.apply(void 0,[TS.redux.getState()].concat(r))}}function o(e){var t=Object(i["a"])(e);if(!t.is_known){t.is_known=false;Object.defineProperty(t,"is_member",{get:function e(){throw new Error("Value for is_member is not known; check is_known before accessing this field")}})}return t}Object(n["a"])("interop.membership",{ensureChannelMembershipIsKnownForUsers:s(a["ensureChannelMembershipIsKnownForUsers"]),getCachedChannelMembershipInfoForUser:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=a["getCachedChannelMembershipInfoForUser"].apply(void 0,[TS.redux.getState()].concat(r));return o(i)}})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(828);Object(a["a"])("interop.metricsResponsiveness",{startMonitoringResponsiveness:n["f"],stopMonitoringResponsiveness:n["h"],storeResponsiveStats:n["j"],isEnabled:n["d"],getTotalBeachballCount:n["b"],getTotalStutterCount:n["c"]})},,,,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){"use strict";r.r(t);var a=r(1398);var n=r(51);Object(n["a"])("interop.mountConnectedWorkspaces",a["a"]);Object(n["a"])("interop.unmountConnectedWorkspaces",a["b"])},,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){"use strict";var a=r(129);var n=r(4);var i=r(180);var s=r(3306);var o=r(241);var l=r(471);var c=r(3475);var u=r(21);var d=r(240);var p=r(90);var m=r(37);var h=r(167);var f=r(798);var v=r(739);var b=r(165);var g=r(268);var _=Object(n["e"])("Open search UI",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.showAutocomplete,n=r.commitSearch;var s=r.query,o=r.openMethod,l=r.showTab,c=r.skipMountComponent,_=void 0!==c&&c,y=r.navigationOnly;a&&n&&(a=false);if(!s&&n){n=false;a=true}a||n||Object(m["getInterfaceMode"])(t())!==m["interfaceModes"].SEARCH_RESULTS&&(a=true);if(!Object(b["f"])())return;if(!Object(h["b"])(t())&&!Object(u["getUserHasSeenNewSearchUI"])(t())){e(Object(d["c"])({pref:"seen_new_search_ui",value:true}));window.$&&window.$(".search_new_pill").addClass("hidden")}e(Object(m["setLastOpenMethod"])({lastOpenMethod:o}));var k=t();var O=Object(i["getSearchInputBoxDisplayQuery"])(k);var E=Object(i["getSearchInputBoxUserQuery"])(k);O===s&&E===s||e(Object(i["setSearchInputBoxUserQuery"])({textyString:s}));n&&e(Object(p["setEditableRequestQueryThenRequest"])({query:s}));l&&e(Object(m["setTabOnly"])({tab:l}));var w=a?m["interfaceModes"].EDIT:m["interfaceModes"].SEARCH_RESULTS;e(Object(m["setInterfaceMode"])({interfaceMode:w}));a&&e(Object(g["openSearchAutocomplete"])());Object(h["b"])(t())||_||Object(f["a"])(t().teamId);e(Object(g["setSearchAutocompleteMode"])({searchAutocompleteMode:y?g["searchAutocompleteModes"].NAVIGATION:g["searchAutocompleteModes"].OMNI}));e(Object(v["a"])({visible:true}))});_.propTypes={query:a["b"].string.isRequired,showAutocomplete:a["b"].bool.isRequired,commitSearch:a["b"].bool.isRequired,openMethod:a["b"].string.isRequired,showTab:a["b"].string,skipMountComponent:a["b"].bool};var y=_;r.d(t,"b",function(){return k});r.d(t,"c",function(){return O});r.d(t,"f",function(){return E});r.d(t,"a",function(){return w});r.d(t,"g",function(){return C});r.d(t,"e",function(){return S});r.d(t,"d",function(){return j});var k=Object(n["e"])("open search using command+f or menu on desktop",function(e,t){var r=!Object(l["b"])();var a=void 0;if(r)try{a=Object(s["a"])(t(),Object(o["e"])(t()))+" "}catch(e){a=""}else a="";e(y({query:a,showAutocomplete:true,commitSearch:false,openMethod:"key_f"}))});k.propTypes={};var O=Object(n["e"])("open search using command+g",function(e,t){var r=Object(i["getSearchInputBoxDisplayQuery"])(t());e(y({query:r||"",showAutocomplete:!r,commitSearch:false,openMethod:"key_g"}))});O.propTypes={};var E=Object(n["e"])("open search using command+k",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.key;var n=Object(c["c"])(t());e(y({query:"",showAutocomplete:true,commitSearch:false,openMethod:"key_"+a,navigationOnly:n}))});E.propTypes={key:a["b"].string.isRequired};var w=Object(n["e"])("open search by clicking on input",function(e,t){var r=Object(i["getSearchInputBoxDisplayQuery"])(t());e(y({query:r||"",showAutocomplete:!r,commitSearch:false,openMethod:"click"}))});w.propTypes={};var C=Object(n["e"])("open search using slack command",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.query;var n=Object(i["getSearchInputBoxDisplayQuery"])(t());e(y({query:a||n,showAutocomplete:!!(a||n),commitSearch:!!a,openMethod:"command"}))});C.propTypes={};var S=Object(n["e"])("open by typing in the search input",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.query,n=void 0===a?"":a;e(y({query:n,showAutocomplete:true,commitSearch:false,openMethod:"key_tab"}))});S.propTypes={query:a["b"].string};var j=Object(n["e"])("open by clicking on files menu in flexpane",function(e,t){e(y({query:""+Object(s["a"])(t(),Object(o["e"])(t())),showAutocomplete:false,commitSearch:true,openMethod:"files",showTab:"files"}))});j.propTypes={query:a["b"].string}},function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(212);var s=r(1087);var o=r(51);Object(o["a"])("interop.mountToast",function(e){return TS.redux.dispatch(Object(i["enqueueToast"])({element:n.a.createElement(s["a"],e)}))})},function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(135);var n=r(12);var i=r(51);Object(i["a"])("interop.mpims",{convertToPrivateChannel:a["a"],makeNameForMpim:function e(t){return Object(n["makeNameForMpim"])(TS.redux.getState(),t)},getMembersInDisplayOrder:function e(t){return Object(n["getMembersInDisplayOrder"])(TS.redux.getState(),t)}})},function(e,t,r){"use strict";r.r(t);var a=r(1136);var n=r(51);Object(n["a"])("interop.openAppManagementModal",a["a"])},function(e,t,r){"use strict";r.r(t);var a=r(1128);var n=r(51);Object(n["a"])("interop.openAppPermissionDialog",function(e){return TS.redux.dispatch(Object(a["a"])(e))})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(716);Object(a["a"])("interop.presenceManager",{addMemberToPresenceSubscription:n["a"],removeMemberFromPresenceSubscription:n["c"]})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(891);var i=r(3268);Object(a["a"])("interop.reactions",{fetchReactions:n["a"],getApiArgsFromReactionKey:n["b"],submitAddOrRemoveReaction:n["d"],maybeReactToLastMessageInChannel:i["a"]})},function(e,t,r){},,function(e,t,r){var a={"./accessibility-store.js":651,"./all-threads-store.js":3543,"./all-unreads-store.js":480,"./boot-data-store.js":11,"./channel-sidebar-folders-store.js":685,"./channel-sidebar-store.js":729,"./connectivity-store.js":626,"./custom-emoji-store.js":894,"./deleted-messages-store.js":750,"./desktop-store.js":450,"./dnd-store.js":493,"./downloads-store.js":896,"./drafts-store.js":3419,"./ephemeral-messages-store.js":507,"./expandables-store.js":202,"./experiments-store.js":351,"./file-refresh-store.js":260,"./file-upload-store.js":499,"./files-flexpane-store.js":627,"./flexpane-store.js":650,"./global-nav-store.js":815,"./i18n-store.js":850,"./imports-store.js":166,"./incremental-boot-store.js":752,"./inline-file-previews-store.js":235,"./invites-store.js":3444,"./member-directory-flexpane-store.js":3303,"./message-edit-store.js":346,"./message-pane-banner-store.js":711,"./message-pane-store.js":116,"./modal-store.js":77,"./navigation-history-store.js":366,"./noop-store.js":1163,"./pending-open-channel-store.js":680,"./pins-store.js":610,"./prefs-store.js":21,"./presence-store.js":312,"./search-autocomplete-store.js":268,"./search-channels-users-store.js":751,"./search-input-box-store.js":180,"./search-results-store.js":90,"./search-session-store.js":699,"./search-ui-store.js":37,"./slash-command-store.js":653,"./socket-store.js":79,"./stars-store.js":611,"./team-creation-store.js":682,"./thread-sub-store.js":428,"./threads-flexpane-store.js":712,"./toast-store.js":212,"./typing-store.js":451,"./ui-serialization-store.js":818,"./unfurls-store.js":3522,"./unread-counts-store.js":3437,"./user-groups-flexpane-store.js":616,"./users-counts-store.js":508};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=2303},function(e,t,r){var a={"./admin-members-store.js":128,"./app-permissions-store.js":243,"./app-profiles-store.js":426,"./apps-store.js":247,"./blocks-store.js":814,"./bots-store.js":162,"./canvases-store.js":625,"./current-member-user-group-regexp-store.js":259,"./customize-emoji-store.js":432,"./developer-actions-store.js":502,"./developer-apps-store.js":1385,"./emoji-store.js":681,"./environment-store.js":816,"./idp-groups-store.js":679,"./last-network-send-store.js":893,"./member-counts-store.js":203,"./membership-store.js":264,"./messages-meta-store.js":279,"./notifications-store.js":895,"./reactions-store.js":322,"./team-id-store.js":23,"./telemetry-store.js":3548,"./user-group-membership-store.js":417,"./window-store.js":206};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=2304},function(e,t,r){var a={"./checkout-flow-store/index.js":219,"./pricing-plans-store/index.js":142,"./workspace-store/index.js":69};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=2305},function(e,t,r){var a={"./app-actions-store/index.js":315,"./channel-history-store/index.js":122,"./channels-store/index.js":19,"./enterprise-store/index.js":170,"./files-store/index.js":78,"./members-store/index.js":26,"./messages-store/index.js":44,"./teams-store/index.js":50,"./user-groups-store/index.js":123};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=2306},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1413);var s=r(12);var o=r(2180);var l=r(61);var c=r(321);var u=r(16);var d=r(36);var p=r(465);var m=r(48);var h=r(207);var f=r(1961);var v=r(258);var b=r(105);var g=r(51);Object(g["a"])("interop.rules",{channels:n()({},s,{shouldSuppressOrgChannel:o["a"],shouldStopChannelMentions:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["shouldStopChannelMentions"].apply(s,[TS.redux.getState()].concat(r))},getDisplayNameForChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["getDisplayNameForChannel"].apply(s,[TS.redux.getState()].concat(r))},isYou:function e(t){return s["isYou"](TS.model.user.id,t)},shouldShowAtChannelWarning:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["shouldShowAtChannelWarning"].apply(s,[TS.redux.getState()].concat(r))},checkForBlockedAtChannelKeyword:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["checkForBlockedAtChannelKeyword"].apply(s,[TS.redux.getState()].concat(r))}}),messages:n()({isAutomatedSubtype:p["a"]},d),files:{extendFileWithPinnedInfo:l["extendFileWithPinnedInfo"],getFileType:l["getFileType"]},user:{canLeaveChannel:v["h"],canNonAdminsAtMentionEveryoneBySettings:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["j"].apply(void 0,[TS.redux.getState()].concat(r))},canNonAdminsAtChannelOrGroupBySettings:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["i"].apply(void 0,[TS.redux.getState()].concat(r))},canAtMentionEveryone:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["b"].apply(void 0,[TS.redux.getState()].concat(r))},canAtChannelOrGroup:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["a"].apply(void 0,[TS.redux.getState()].concat(r))},canPostInGeneral:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["l"].apply(void 0,[TS.redux.getState()].concat(r))},canPostInChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["k"].apply(void 0,[TS.redux.getState()].concat(r))},canTriggerCustomResponses:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["n"].apply(void 0,[TS.redux.getState()].concat(r))},canKickFromPublicChannels:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["g"].apply(void 0,[TS.redux.getState()].concat(r))},canKickFromPrivateChannels:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["f"].apply(void 0,[TS.redux.getState()].concat(r))},canKickFromChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["e"].apply(void 0,[TS.redux.getState()].concat(r))}},unreads:n()({},f),user_groups:{isUnknownOrNonExistent:function e(){return b["p"].apply(void 0,arguments)},isNonExistent:b["n"],isUnknown:b["o"]},emoji:{getEmojiMode:function e(t){return c["g"](TS.redux.getState(),t)},shouldRenderEmojiAsText:function e(){return c["k"](TS.redux.getState())},getEmojiUrlPrefix:c["h"],isEmojiNameSafe:c["i"]},teams:n()({},m),members:n()({},u),admin:n()({},i),threads:n()({},h)})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(23);var s=r(373);var o=r(730);var l=r(61);var c=r(311);var u=r(51);var d=r(745);function p(e){var t=TS.redux.getState();var r=Object(i["getTeamId"])(t);Object(o["n"])(r,e)}function m(e){var t=TS.redux.getState();var r=Object(i["getTeamId"])(t);return Object(o["m"])(r,e)}Object(u["a"])("interop.files",n()({},l,{processFileForUpserting:function e(t){return Object(s["b"])(TS.redux.getState(),t)},fetchAndUpsertFileById:c["c"],fetchAndUpsertFilesById:c["d"],getFileMetaTemplate:d["b"],markObjectsAsFresh:p,isObjectFresh:m}))},function(e,t,r){"use strict";r.r(t);var a=r(350);var n=r(153);var i=r(807);var s=r(51);Object(s["a"])("interop.notifications",{shouldShowNotificationForChannelMessage:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a["i"].apply(void 0,[TS.redux.getState()].concat(r))},shouldShowNotificationForDirectMessage:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a["k"].apply(void 0,[TS.redux.getState()].concat(r))},shouldShowNotificationForDesktopNotification:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a["j"].apply(void 0,[TS.redux.getState()].concat(r))},showNotification:function e(t,r){return TS.redux.dispatch(Object(i["c"])({message:t,modelObject:r}))},messageForSuppressedNotification:n["b"],getCalculatedDesktopNotifySetting:a["c"],getCalculatedMobileNotifySetting:a["d"],getDefaultDesktopNotifySetting:a["e"],getDefaultMobileNotifySetting:a["f"]})},function(e,t,r){"use strict";r.r(t);var a=r(683);var n=r(51);Object(n["a"])("interop.sendMessage.resolveMessage",a["c"])},function(e,t,r){"use strict";r.r(t);var a=r(333);var n=r.n(a);var i=r(51);Object(i["a"])("interop.setAppElementForReactModal",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#client-ui";n.a.setAppElement(e)})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(611);function i(e){return TS.redux.dispatch(Object(n["fetchStarsList"])(e))}Object(a["a"])("interop.stars",{getStarsList:i})},function(e,t,r){"use strict";r.r(t);var a=r(1371);var n=r(23);var i=r(51);var s=r(993);function o(e){var t=TS.redux.getState();var r=Object(n["getTeamId"])(t);Object(a["a"])(r,e)}function l(){return Object(a["c"])()}function c(e){return TS.redux.dispatch(Object(s["c"])(e))}Object(i["a"])("interop.teams",{markObjectsAsFresh:o,pauseRefetch:l,fetchAndUpsertTeamsWithQuery:c})},function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r.n(a);var i=r(51);var s=r(451);var o=r(26);var l=r(16);function c(e){var t=TS.redux.getState();var r=Object(a["map"])(Object(s["getTyperIdsInChannel"])(t,e),function(e){return Object(o["getMemberById"])(t,e)});r.sort(function(e,r){return TS.interop.i18n.sorter(Object(l["getPrefCompliantMemberNameLowerCase"])(t,e),Object(l["getPrefCompliantMemberNameLowerCase"])(t,r))});return r}Object(i["a"])("interop.typing",{currentUserStartedTyping:s["currentUserStartedTyping"],currentUserEndedTyping:s["currentUserEndedTyping"],getTypersInChannel:c,memberStartedTyping:s["memberStartedTyping"],memberEndedTyping:s["memberEndedTyping"]})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(2);var s=r.n(i);var o=r(123);var l=r(267);var c=r(105);var u=r(259);var d=r(616);var p=r(417);var m=r(11);var h=r(51);function f(e){var t=TS.redux.getState();var r=Object(o["getUserGroupById"])(t,e);if(!r)return null;return r}function v(e){return TS.redux.dispatch(Object(l["g"])({ids:[e]})).catch(function(){return{userGroups:[]}}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userGroups,r=void 0===t?[]:t;TS.redux.dispatch(Object(o["upsertUserGroups"])({userGroups:r}));return r&&r[0]})}function b(e){return TS.redux.dispatch(Object(l["h"])({subteam:e})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.users;var a=f(e);if(!a||Object(c["p"])(a))return;TS.redux.dispatch(Object(o["bulkAddMembersToGroup"])({groupId:e,users:r}))}).then(function(){return f(e)})}function g(e,t){TS.redux.dispatch(Object(l["h"])({subteam:e})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.users;var a=f(e);if(!a||Object(c["p"])(a))return;TS.redux.dispatch(Object(o["bulkAddMembersToGroup"])({groupId:e,users:r}))}).then(function(){var r=f(e);r&&t&&t(r)})}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=f(e.subteam_id);if(!t||Object(c["p"])(t))return;var r=n()({},t);if(t.users){e.added_users&&(r.users=Object(i["union"])(t.users,e.added_users));e.removed_users&&(r.users=Object(i["difference"])(t.removed_users,e.removed_users))}r.user_count=parseInt(r.user_count,10)||0;r.user_count+=parseInt(e.added_users_count,10)||0;r.user_count=Math.max(0,r.user_count-(e.removed_users_count||0));r.date_previous_update=n()({},r,Object(i["pick"])(e,["date_update","date_previous_update"]));E(r)}function y(e){var t=TS.redux.getState();Object(m["isFeatureEnabled"])(t,"feature_lazy_user_groups")?TS.redux.dispatch(Object(p["upsertUserGroupMembership"])({groupId:e,isMember:true})):TS.redux.dispatch(Object(u["removeCurrentMemberUserGroupRegexp"])(e));var r=f(e);if(r&&!Object(c["p"])(r)&&Object(c["q"])(r)){Object(m["isFeatureEnabled"])(t,"feature_lazy_user_groups")||TS.redux.dispatch(Object(u["addCurrentMemberUserGroupRegexp"])(r));var a=Object(m["getCurrentUserId"])(t);TS.redux.dispatch(Object(o["addMemberToGroup"])({groupId:e,memberId:a}))}}function k(e){var t=TS.redux.getState();Object(m["isFeatureEnabled"])(t,"feature_lazy_user_groups")?TS.redux.dispatch(Object(p["upsertUserGroupMembership"])({groupId:e,isMember:false})):TS.redux.dispatch(Object(u["removeCurrentMemberUserGroupRegexp"])(e));var r=f(e);var a=Object(m["getCurrentUserId"])(t);r&&!Object(c["p"])(r)&&TS.redux.dispatch(Object(o["removeMemberFromGroup"])({groupId:e,memberId:a}))}function O(e){var t=TS.redux.getState();var r=Object(o["getActiveUserGroups"])(t,e);return r}function E(e){return TS.redux.dispatch(Object(o["upsertUserGroup"])({userGroup:e}))}function w(e){return TS.redux.dispatch(Object(o["upsertUserGroups"])({userGroups:e}))}function C(e){return TS.redux.dispatch(Object(l["f"])(e))}Object(h["a"])("interop.userGroups",{getUserGroupById:f,fetchUserGroupById:v,getActiveUserGroups:O,getUserGroupMembers:g,promiseToGetUserGroupMembers:b,removeSelfUserGroup:k,upsertSelfUserGroup:y,upsertUserGroup:E,upsertUserGroups:w,userGroupMembersChanged:_,createUserGroup:l["a"],updateUserGroup:l["l"],updateMembersOfUserGroup:l["k"],enableUserGroup:l["d"],disableUserGroup:l["c"],deleteUserGroup:l["b"],USER_GROUP_MSG_REGEX:c["a"],isUserGroupActive:c["q"],searchLocalUserGroups:function e(){return TS.redux.dispatch(Object(d["searchLocalUserGroups"])())},getSearchQuery:function e(){return Object(d["getSearchQuery"])(TS.redux.getState())},setSearchQuery:function e(t){return TS.redux.dispatch(Object(d["setSearchQuery"])(t))},bulkAddUserGroupMembership:function e(t){return TS.redux.dispatch(Object(p["bulkAddUserGroupMembership"])(t))},fetchAndUpsertUserGroupsWithQuery:C,canEditUserGroups:function e(){return Object(c["c"])(TS.redux.getState())},canCreateAndDeleteUserGroups:function e(){return Object(c["b"])(TS.redux.getState())},getCurrentMemberUserGroupRegExps:function e(){return Object(u["getCurrentMemberUserGroupRegExps"])(TS.redux.getState())},clearAllUserGroupMembership:function e(){return TS.redux.dispatch(Object(p["clearAllUserGroupMembership"])())},isUserGroupMember:function e(t){return Object(p["isUserGroupMember"])(TS.redux.getState(),t)}})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(2);var s=r.n(i);var o=r(70);var l=r(757);var c=r(51);function u(){return Object(i["map"])(o["BROADCAST_KEYWORDS"],function(e,t){return n()({alias:"BKchannel"===t?"group":null},Object(l["a"])(t))})}function d(e,t){return Object(i["map"])(Object(l["c"])(e,t),function(e){return n()({id:e.id,alias:"BKchannel"===e.id?"group":null},e)})}Object(c["a"])("interop.broadcast_keywords",{getAllBroadcastKeywords:u,getBroadcastKeywordsForUser:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return d.apply(void 0,[TS.redux.getState()].concat(r))}})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(51);var s=r(419);Object(i["a"])("interop.client_action_token",n()({},s["a"]))},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(361);Object(a["a"])("interop.clipboard",n)},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(55);Object(a["a"])("interop.clog",{instance:Object(n["b"])(),track:n["c"],trackClick:n["d"],trackClickWithContext:n["e"],trackForm:n["f"]})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(452);Object(a["a"])("interop.currency",{formatCurrency:n["a"]})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(113);var i=r(469);var s=r(144);var o=r(1071);var l=r(1068);var c=r(1073);var u=r(849);var d=r(360);var p=r(1072);var m=r(490);var h=r(1063);var f=r(692);var v=r(844);var b=r(846);var g=r(847);var _=r(415);var y=r(1066);var k=r(848);var O=r(672);var E=r(1070);var w=r(1064);var C=r(178);var S=r(491);var j=r(1067);var I=r(1069);var T=r(693);var N=r(1062);var A=r(464);var R=r(1061);var M=r(928);var P=r(489);var x=r(1065);var D=r(733);var F=r(728);var L=r(359);var B=r(845);Object(a["a"])("interop.datetime",{toDateObject:n["a"],toDate:i["a"],toTime:s["a"],toHourAmount:o["a"],toDayAmount:l["a"],toWeekAmount:c["a"],toTimeAmount:u["a"],timeDurationConverter:d["a"],toTimeDuration:p["a"],dateDifference:m["a"],distanceInDays:h["a"],distanceInMinutes:f["a"],distanceInSeconds:v["a"],isToday:b["a"],isYesterday:g["a"],isSameDay:_["a"],sameHour:y["a"],shouldExcludeYear:k["a"],toDayOfTheWeek:O["a"],toHour:E["a"],getActivityDayStamp:w["a"],toCalendarDate:C["a"],toCalendarDateOrNamedDay:S["a"],toCalendarDateIfYesterdayOrToday:j["a"],toFilenameFriendlyDate:I["a"],toHumanReadableDateAndTime:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return T["a"].apply(void 0,[TS.redux.getState()].concat(r))},convertISOtoUTCReadableDate:N["a"],toTimeAgo:A["a"],addDays:R["a"],daysToYearsPretty:M["a"],maybeGetRelativeDay:P["a"],millisecondsToPrettifiedTime:x["a"],prettifyDateString:D["a"],makeTsStamp:F["a"],formatDate:L["a"],memberLocalTime:B["a"]})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(51);var s=r(27);var o=s["desktopVersionFields"](),l=o.windowsAppVersion,c=o.windowsAppVersionMinor,u=o.macAppVersion,d=o.macAppVersionMinor,p=o.linuxAppVersion,m=o.linuxAppVersionMinor,h=o.desktopAppVersion;Object(i["a"])("interop.environment",n()({},s,{win_ssb_version:l,win_ssb_version_minor:c,mac_ssb_version:u,mac_ssb_version_minor:d,lin_ssb_version:p,lin_ssb_version_minor:m,desktop_app_version:h}))},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(51);var s=r(10);var o=r(27);var l=r(39);var c=r(169);var u=r(138);var d=new s["b"]("ns");var p={defaultNamespace:"ns",t:d.t};var m=[];var h=function e(t,r){var a=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p.t(t,n()({},a,{ns:r}))};o["isDev"]&&(a.toString=function(){var e=r+"."+t;if(m.indexOf(e)>=0)return"";m.push(e);var a="Dev-only alert: tried to use an i18n function as a string!\nSee console for stack trace.\n\n\t\t\tNamespace: "+r+"\n\t\t\tString: "+t;alert(a);return""});return a};Object(i["a"])("interop.i18n",{t:h,number:s["k"],percent:s["l"],deburr:s["a"],listify:s["g"],possessive:s["m"],fullPossessiveString:s["c"],safeString:s["n"],sorter:s["o"],mappedSorter:s["h"],localesEnabled:l["e"],supportedKeyboards:c["e"],keyCodeEquivalent:c["b"],keyEquivalent:c["c"],getReverseKeyCodeMap:c["a"],normalizeKeyboardFromDesktop:c["d"],locale:Object(l["f"])(),isPseudoLocale:l["d"],isLocaleCJK:l["c"],zdLocale:l["a"],number_abbreviations:u["d"],locales_number_formatting:u["c"],DEFAULT_LOCALE:s["b"].DEFAULT_LOCALE})},function(e,t,r){"use strict";r.r(t);var a=r(345);var n=r(11);var i=r(21);var s=r(23);var o=r(422);var l=r(1435);var c=r(36);var u=r(51);Object(u["a"])("interop.messages",{computeRollups:l["a"],getExpandableKey:a["a"],canCountAsUnreadForCurrentUser:c["canCountAsUnreadForCurrentUser"],preprocessImsg:function e(t,r){return TS.redux.dispatch(Object(o["a"])({imsgs:[t],channelId:r}))[0]},preprocessImsgs:function e(t,r){return TS.redux.dispatch(Object(o["a"])({imsgs:t,channelId:r}))},containsMention:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(c["containsMention"])(t,Object(n["getCurrentUserId"])(TS.redux.getState()),Object(i["getUserHighlightWords"])(TS.redux.getState()),Object(s["getTeamId"])(TS.redux.getState()),{ignoreAtHereMentions:r,ignoreHighlightWords:a,ignoreAtEveryoneMentions:o,ignoreAtChannelMentions:l})},isReply:c["isReply"],canEditMessage:c["canEditMessage"],shouldRenderFileThread:function e(t){return Object(c["shouldRenderFileThread"])(t,{featureFileThreads:Object(n["isFeatureEnabled"])(TS.redux.getState(),"feature_file_threads"),featureFileThreadsDarkLaunch:Object(n["isFeatureEnabled"])(TS.redux.getState(),"feature_file_threads_dark_launch")})},shouldIgnoreHighlightWords:c["shouldIgnoreHighlightWords"],isAppMessage:function e(t){return Object(c["isAppMessage"])(TS.redux.getState(),t)},atEveryoneRegExp:c["atEveryoneRegExp"],atChannelRegExp:c["atChannelRegExp"],atGroupRegExp:c["atGroupRegExp"],atHereRegExp:c["atHereRegExp"]})},function(e,t){},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(1114);var i=r(47);var s=r(320);var o=r(1117);var l=r(746);var c=r(1116);Object(a["a"])("interop.search_autocomplete",{suggestions:n["c"],AutocompleteQuerySuggestion:s["f"],AutocompleteSuggestionType:i["b"],warmQuerySuggestionCache:function e(){var t=TS.redux.getState().teamId;var r=Object(c["a"])(t);r.get()},clearQueryHistoryCache:function e(){var t=TS.redux.getState().teamId;var r=Object(l["a"])(t);r.flushAll()},warmFileSuggestionCache:function e(){var t=TS.redux.getState().teamId;var r=Object(o["a"])(t);r.get()}})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(736);Object(a["a"])("interop.search_conversions",{convertContentsStringForEncodedChannels:n["a"]})},function(e,t,r){"use strict";r.r(t);var a=r(207);var n=r(51);Object(n["a"])("interop.threads",{getThreadKey:a["getThreadKey"]})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(51);var s=r(81);var o=r(473);Object(i["a"])("interop.url",n()({buildWorkspaceUrl:o["b"]},s))},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(414);Object(a["a"])("interop.versions",n)},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,,function(e,t,r){},,,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"d",function(){return F});r.d(t,"c",function(){return L});r.d(t,"a",function(){return q});var a=r(9);var n=r.n(a);var i=r(24);var s=r.n(i);var o=r(3);var l=r.n(o);var c=r(5);var u=r.n(c);var d=r(6);var p=r.n(d);var m=r(7);var h=r.n(m);var f=r(8);var v=r.n(f);var b=r(129);var g=r(1);var _=r.n(g);var y=r(14);var k=r(2);var O=r.n(k);var E=r(15);var w=r.n(E);var C=r(227);var S=r(65);var j=r(11);var I=r(820);var T=r(775);var N=r(479);var A=r(3269);var R=r(695);var M=r(855);var P=r(10);var x=r(2119);var D=r.n(x);var F=b["b"].shape({selectionElementId:b["b"].string,previewText:b["b"].string,isSelected:b["b"].bool});var L=b["b"].shape({id:b["b"].string.isRequired,label:b["b"].node.isRequired,isPrimary:b["b"].bool,isDanger:b["b"].bool,disabled:b["b"].bool,appliesToCount:b["b"].number});var B={availableCount:b["b"].number.isRequired,selectedCount:b["b"].number.isRequired,items:b["b"].arrayOf(F).isRequired,featureI18nSelectionBar:b["b"].bool,actions:b["b"].arrayOf(L).isRequired,titleFormatter:b["b"].func,showingSelection:b["b"].bool,onToggleShowingSelection:b["b"].func,onToggleSelect:b["b"].func,onAction:b["b"].func,"data-qa":b["b"].string,position:b["b"].string};var U={featureI18nSelectionBar:false,showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",position:void 0};var q=76;var G=3;var H=new P["b"]("selection_bar");var W=function(e){v()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onCheckboxChange=r.onCheckboxChange.bind(r);r.onShowClick=r.onShowClick.bind(r);r.renderActionMenu=r.renderActionMenu.bind(r);r.getDefaultTitle=r.getDefaultTitle.bind(r);return r}p()(t,[{key:"onCheckboxChange",value:function e(){var t=this.props,r=t.selectedCount,a=t.availableCount,n=t.onToggleSelect;n(a!==r)}},{key:"onShowClick",value:function e(){var t=this.props,r=t.showingSelection,a=t.onToggleShowingSelection;a(!r)}},{key:"getDataQAAttr",value:function e(t){return this.props["data-qa"]+"_"+t}},{key:"getDefaultTitle",value:function e(t){if(!this.props.featureI18nSelectionBar)return null;return H.t("{selectedCount, plural,=1 {# item selected} other {# items selected}}",{selectedCount:t})}},{key:"getPreviewText",value:function e(t,r){if(!this.props.featureI18nSelectionBar)return null;var a=null;(t.length>0||r>0)&&(a=r>0?H.t("{previewSelectionItems}{ moreItemsCount, plural,=1 {, and # more} other {, and # more}}.",{previewSelectionItems:Object(P["g"])(t,{noConj:true}).join(""),moreItemsCount:r}):H.t("{previewSelectionItems}.",{previewSelectionItems:Object(P["g"])(t).join("")}));return a}},{key:"getItemListProps",value:function e(t,r){return Object(k["reduce"])(t,function(e,t,r){var a=0===r?"":" ";e.ariaControls+=""+a+t.selectionElementId;if(t.isSelected&&e.previewItems.length<G){e.previewItems.push(t.previewText);e.moreItemsCount-=1}return e},{ariaControls:"",previewItems:[],moreItemsCount:r})}},{key:"getActionProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var r=void 0;var a=Object(k["findIndex"])(t,{isPrimary:true});a=-1!==a?a:0;var n=l()({},t[a],{isPrimary:true});var i=t.length>=3;if(t.length<=1)r={primaryAction:n,isMenu:i};else if(2===t.length){var o=0===a?t[1]:t[0];r={primaryAction:n,secondaryAction:o,isMenu:i}}else{var c=[].concat(s()(t.slice(0,a)),s()(t.slice(a+1)));r={primaryAction:n,menuActions:c,isMenu:i}}return r}},{key:"renderActionLabel",value:function e(t){var r=t.label,a=t.appliesToCount;if(!this.props.featureI18nSelectionBar)return null;return a&&a>0?H.t("{action} ({count})",{action:r,count:a}):r}},{key:"renderActionButton",value:function e(t){var r=this;var a=t.id,n=t.isPrimary,i=t.isDanger,s=t.disabled;var o=I["a"].outline;i?o=I["a"].danger:n&&(o=I["a"].primary);return _.a.createElement(I["b"],{key:a,type:o,className:n?void 0:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_"+a),disabled:s,onClick:function e(){return r.props.onAction(a)}},this.renderActionLabel(t))}},{key:"renderActionMenuButton",value:function e(){if(!this.props.featureI18nSelectionBar)return null;var t=H.rt("More {chevronDownIcon}",{chevronDownIcon:_.a.createElement(M["a"],{type:"chevron-down",inline:true})});return _.a.createElement(T["a"],{renderMenu:this.renderActionMenu,position:"top-right",offsetY:-8},_.a.createElement(I["b"],{className:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_menu"),type:I["a"].outline},t))}},{key:"renderActionMenu",value:function e(t){var r=this;var a=this.getActionProps(this.props.actions),n=a.menuActions;if(!n||0===n.length)return null;return _.a.createElement(R["a"],t,n.map(function(e){return _.a.createElement(N["a"],{key:e.id,label:r.renderActionLabel(e),disabled:e.disabled,"data-qa":r.getDataQAAttr("action_menu_item_"+e.id),onSelected:function t(){return r.props.onAction(e.id)},danger:true===e.isDanger})}))}},{key:"render",value:function e(){var t;var r=this.props,a=r.availableCount,i=r.selectedCount,s=r.items,o=r.titleFormatter,l=r.showingSelection,c=r.actions,u=r.featureI18nSelectionBar,d=r.position;var p=a===i;var m=!p&&i>0;var h=this.getItemListProps(s,i),f=h.ariaControls,v=h.previewItems,b=h.moreItemsCount;var g=this.getPreviewText(v,b);var y=o||this.getDefaultTitle;var k=this.getActionProps(c),O=k.primaryAction,E=k.secondaryAction,j=k.isMenu;var I="c-selection_bar--position_"+d;var T=(t={},n()(t,I,!!d),n()(t,"c-selection_bar--position_relative","relative"===d),n()(t,"c-selection_bar--slide_up",i>0),t);var N=null;var R=null;if(u){N=m||0===i?H.t("Select all"):H.t("Deselect all");R=l?H.t("Show all"):H.t("Show selection")}return _.a.createElement("div",{className:w()("c-selection_bar",T)},_.a.createElement("div",{className:"c-selection_bar__checkbox"},_.a.createElement(A["c"],{tip:N},_.a.createElement("div",null,_.a.createElement(C["a"],{className:"c-selection_bar__checkbox_input","aria-label":g,"data-qa":this.getDataQAAttr("checkbox"),checked:p,indeterminate:m,"aria-controls":f,onChange:this.onCheckboxChange})))),_.a.createElement("div",{className:"c-selection_bar__body"},_.a.createElement("div",{className:"c-selection_bar__selected_count","data-qa":this.getDataQAAttr("title")},y(i)),_.a.createElement("div",null,_.a.createElement("span",{className:"c-selection_bar__selected_preview","data-qa":this.getDataQAAttr("preview")},g),_.a.createElement(S["a"],{className:"c-selection_bar__show_link",onClick:this.onShowClick,"data-qa":this.getDataQAAttr("show_link")},R))),_.a.createElement("div",{className:"c-selection_bar__actions"},j&&this.renderActionMenuButton(),E&&this.renderActionButton(E),O&&this.renderActionButton(O)))}}]);return t}(g["PureComponent"]);W.displayName="CoreSelectionBar";W.defaultProps=U;var V=function e(t){return{featureI18nSelectionBar:Object(j["isFeatureEnabled"])(t,"feature_i18n_selection_bar")}};t["b"]=Object(y["connect"])(V)(W)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(32);var s=r.n(i);var o=r(5);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(7);var p=r.n(d);var m=r(8);var h=r.n(m);var f=r(129);var v=r(1);var b=r.n(v);var g=r(2);var _=r(2569);var y={items:f["b"].arrayOf(_["d"]).isRequired,itemMapper:f["b"].func,actions:f["b"].arrayOf(_["c"]).isRequired,titleFormatter:f["b"].func,showingSelection:f["b"].bool,onToggleShowingSelection:f["b"].func,onToggleSelect:f["b"].func,onAction:f["b"].func,"data-qa":f["b"].string,position:f["b"].string};var k={showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",itemMapper:null,position:void 0};var O=function(e){h()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"getBaseSelectionBarProps",value:function e(t){var r=this.props.itemMapper;var a=r?t.map(r):t;var n=Object(g["reduce"])(a,function(e,t){return e+(t.isSelected?1:0)},0);return{items:a,availableCount:t.length,selectedCount:n}}},{key:"render",value:function e(){var t=this.props,r=t.items,a=s()(t,["items"]);return b.a.createElement(_["b"],n()({},this.getBaseSelectionBarProps(r),a))}}]);return t}(v["PureComponent"]);O.displayName="SelectionBar";O.defaultProps=k;var E=O;r.d(t,"a",function(){return _["b"]});var w=t["b"]=E},function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(27);var n=r(17);function i(e,t,r){var i="noversion";var s=Date.now()/1e3;var o="/api/"+e+"?_x_id="+i+"-"+s;var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState){l.onreadystatechange=null;var e={};if(200===l.status||429===l.status)try{e=JSON.parse(l.responseText)}catch(e){Object(n["b"])().warn("API","Unable to do anything with api response")}e=e||{ok:false};if(r)r(e.ok,e,t);else if(a["isDev"]){Object(n["b"])().warn("API","No callback provided. Printing response");Object(n["b"])().warn("API",e.ok,e,t)}}};var c=true;l.open("POST",o,c);var u=new FormData;var d=false;t?Object.keys(t).forEach(function(e){if("_"===e[0])return;u.append(e,t[e]);d=true}):a["isDev"]&&Object(n["b"])().warn("API","No args provided. Bold, very bold.");d?l.send(u):l.send()}window.callSlackAPIUnauthed=function(e,t,r){Object(n["b"])().warn("API","Don't use me directly! Please import callSlackApiUnauthed from api-unauthed.js");i(e,t,r)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(129);var n=r(4);var i=r(3479);var s=r(27);var o=r(271);var l=r(1134);var c=r(25);var u;(function(e){e["Accept"]="accept";e["Reject"]="reject";e["Busy"]="on_call";e["DoNotDisturb"]="dnd";e["Hangup"]="hangup"})(u||(u={}));var d=Object(n["b"])("Calls the screenhero.rooms.inviteResponse endpoint",function(e,t,r){var a=r.callId,n=r.response;var s=t();var l=Object(o["d"])(s,a);Object(i["a"])(!!l.inviterUserId,"Did not have inviter to respond with.");return e(Object(c["a"])({method:"screenhero.rooms.inviteResponse",args:{caller:l.inviterUserId,room:l.id,response:n}}))});d.propTypes=a["b"].shape({callId:a["b"].string,response:a["b"].string});var p=r(3562);var m=r(1438);var h=r(3557);r.d(t,"b",function(){return f});r.d(t,"a",function(){return v});r.d(t,"c",function(){return b});var f=Object(n["e"])("Opens a call invite window",function(e,t,r){var a=r.room;var n=r.caller;if(r.server){var i=Object(l["c"])(r.server);window.localStorage.setItem(l["b"],JSON.stringify(i))}e(Object(o["h"])({id:a,invitationStatus:l["a"].pending,inviterUserId:n}));e(Object(o["g"])(a));if(Object(s["isSSB"])()){if(Object(h["a"])()){e(Object(h["b"])(r.channel));return}e(Object(p["a"])({appName:"calls",viewId:a,params:[n],windowOptions:{height:310,width:200,backgroundColor:m["a"].backgroundColor,show:false}}))}});f.propTypes=a["b"].shape({room:a["b"].string,caller:a["b"].string});var v=Object(n["e"])("Accept an invite within sonic or the call window",function(e,t){var r=t();var a=Object(o["c"])(r);Object(i["a"])(!!a);e(Object(o["h"])({id:a.id,invitationStatus:l["a"].accepted}));if(Object(s["isSSB"])()){var n=desktop.window.getGeometryForWindow({window_token:desktop.browserWindowId});desktop.window.setBounds({window_token:desktop.browserWindowId,animate:true,bounds:{x:n.x+(n.width-m["a"].width)/2,y:n.y+(n.height-m["a"].height)/2,height:m["a"].height,width:m["a"].width}})}else e(Object(p["a"])({appName:"calls",viewId:a.id}))});var b=Object(n["e"])("Reject an invite within sonic or the call window",function(e,t){var r=t();var a=Object(o["c"])(r);Object(i["a"])(!!a);e(Object(o["h"])({id:a.id,invitationStatus:l["a"].rejected}));e(d({callId:a.id,response:u.Reject}));Object(s["isSSB"])()&&window.close()})},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(365);var n=r(780);function i(e,t){var r=Object(a["b"])(e,{highlightWords:t,shouldRenderEmojiAsText:true,emojiNames:[]});return Object(n["a"])(r)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(2);var i=r(62);var s=r(102);var o=r(17);var l="CDN-DOWNLOAD-TEST";var c="https://a.slack-edge.com/bv1-4/cdn-download-test.838a524ba45462f63be8.min.js";var u="[1][3262]";function d(){var e=Object(o["b"])({label:l});e.info("Running test");var t=(Date.now()*Math.random()).toString(36);var r=c+"?_x="+t;var a=function t(){var a=Object(n["snakeCase"])(l+" success");Object(i["c"])(a);e.info(r+" SUCCESS")};var d=function t(){var a=Object(n["snakeCase"])(l+" failure");Object(i["c"])(a);e.info(r+" FAILED");Object(s["a"])("CDN download test failed: "+r,a)};var p=document.createElement("script");p.setAttribute("type","text/javascript");p.setAttribute("src",r);p.onload=function(){try{Object(n["get"])(Object(n["find"])(window.webpackJsonp,u),u)()}catch(e){return}window.cdnDownloadTestWorked?a(r):d(r)};p.onerror=function(){d(r)};document.body.appendChild(p)}Object(a["a"])("interop.runCdnDownloadTest",d)},,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(3);var d=r.n(u);var p=r(5);var m=r.n(p);var h=r(6);var f=r.n(h);var v=r(7);var b=r.n(v);var g=r(8);var _=r.n(g);var y=r(129);var k=r(2);var O=r.n(k);var E=r(11);var w=r(77);var C=r(23);var S=r(170);var j=r(21);var I=r(17);var T=r(19);var N=r(26);var A=r(50);var R=r(803);var M=r(12);var P=r(135);var x=r(270);var D=r(48);var F=r(10);var L=r(357);var B=r(164);var U=r(13);var q=Object(U["c"])("TS.ui.channel_options_dialog.promiseToGetWhoCanPostListData",function(){return false});var G=Object(U["c"])("TS.ui.team_picker.createFilterFunction",function(){return function(){return Promise.resolve({items:[]})}});var H=Object(U["c"])("TS.permissions.members.canDisconnectSharedChannels",function(){return false});var W=Object(U["c"])("TS.ui.im_browser.showRequestToDisconnectSharedChannelModal",function(){return false});var V=r(761);var z=r(1174);var Q=r(944);var K=r(851);var Y=r(227);var J=r(88);var Z=r(213);var X=r(15);var $=r.n(X);var ee=r(18);var te=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(M["getDisplayName"])(r);var i=null;if(Object(M["isPublicChannel"])(r)||Object(M["isPrivateChannel"])(r)){var s=$()({"c-icon--align-hashmark":!Object(M["isPrivateChannel"])(r)});i=n.a.createElement(ee["a"],{className:s,inherit:true,align:"baseline",type:Object(M["isPrivateChannel"])(r)?"lock":"channel"})}var o=null;Object(M["isOrgSharedPublicOrPrivateChannel"])(r)?o=n.a.createElement(ee["a"],{align:"baseline",inherit:true,type:"shared_channel"}):Object(M["isPendingExternallySharedChannel"])(r)?o=n.a.createElement(ee["a"],{align:"baseline",inherit:true,type:"shared_channels_pending"}):Object(M["isSharedPublicOrPrivateChannel"])(r)&&(o=n.a.createElement(ee["a"],{align:"baseline",inherit:true,type:"shared_channels"}));return n.a.createElement("span",{key:t},i,a,o)};te.displayName="formatChannelName";var re=te;var ae=new F["b"]("channel_options");var ne={channel:y["b"].object.isRequired};var ie={};var se=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props.channel;return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,ae.t("Archiving is useful if you don\u2019t think you\u2019ll need this channel any longer. Here\u2019s what will happen when you archive this channel:")),n.a.createElement("ul",null,n.a.createElement("li",null,ae.t("No one will be able to send messages to it")),n.a.createElement("li",null,ae.t("Apps installed in this channel will be disabled")),n.a.createElement("li",null,ae.t("A message will be posted that you archived the channel"))),n.a.createElement("p",null,ae.t("Messages from archived channels will still show up in search and archives, the same way they do today. You can always un-archive an archived channel later, if you need it again.")),n.a.createElement("p",null,ae.rt("Are you sure you want to archive <strong>{channel}</strong>?",{channel:Object(M["getDisplayName"])(t)},function(e){var r=e.key;return re(r,t)})))}}]);return t}(a["PureComponent"]);se.displayName="ArchiveChannel";se.defaultProps=ie;var oe=se;var le=r(3553);var ce=r(676);function ue(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e)return 80;return 21}function de(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:21;var n=!t.trim();var i=Object(ce["a"])(t)>a;var s=/[ .,;'`~!@#$%^&*+=\\:"<>?|]/.test(t.trim());var o=/^[-|_]+$/.test(t);var l=/[A-Z]/.test(t);var c=false;if(t!==r&&e){var u=Object(T["getChannelByName"])(e,t)||Object(N["memberExistsWithName"])(e,t);c=!!u}return{hasNameRequiredWarning:n,hasMaxLengthWarning:i,hasSpecialsWarning:s,hasPunctuationWarning:o,hasLowercaseWarning:l,hasNameTakenWarning:c}}var pe=r(92);var me=r(349);var he=r(190);var fe=r(2195);var ve=new F["b"]("channel_options");var be=new F["b"]("ui_validation");var ge={teamId:y["b"].string.isRequired,additionalVerificationError:y["b"].oneOfType([y["b"].string,y["b"].object]),additionalVerificationGood:y["b"].bool,channel:y["b"].object,nameNeedsChecking:y["b"].bool,id:y["b"].string.isRequired,isCheckingAdditionalVerification:y["b"].bool,placeholder:y["b"].string,onInvalid:y["b"].func,onValid:y["b"].func,shouldFix:y["b"].bool,value:y["b"].string.isRequired,workspaceName:y["b"].string.isRequired,featureLongerChannelNames:y["b"].bool.isRequired,featureChannelEditCreate:y["b"].bool.isRequired,maxChannelNameLength:y["b"].number.isRequired};var _e={additionalVerificationError:"",additionalVerificationGood:false,channel:null,nameNeedsChecking:false,isCheckingAdditionalVerification:false,placeholder:"",onInvalid:k["noop"],onValid:k["noop"],shouldFix:false,value:""};var ye=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onChange=r.onChange.bind(r);r.renderWarning=r.renderWarning.bind(r);r.state={showInvalidCharactersWarning:false,showLowercaseWarning:false,showMaxLengthWarning:false,showNameRequiredWarning:false,showNameTakenWarning:false,showPunctuationWarning:false,showSpecialsWarning:false,value:r.props.value};return r}f()(t,[{key:"componentDidMount",value:function e(){this.props.nameNeedsChecking&&this.onChange(this.props.value)}},{key:"onChange",value:function e(t){var r=t;var a=this.props,n=a.nameNeedsChecking,i=a.onInvalid,s=a.onValid,o=a.shouldFix,l=a.teamId,u=a.maxChannelNameLength;o&&(r=this.fixName(r));var d=Object(c["c"])(l);var p=de(d,r,this.props.value,u),m=p.hasNameRequiredWarning,h=p.hasMaxLengthWarning,f=p.hasSpecialsWarning,v=p.hasPunctuationWarning,b=p.hasLowercaseWarning,g=p.hasNameTakenWarning;if(r===this.props.value&&!n){i({value:r});this.setState(function(){return{showLowercaseWarning:false,showMaxLengthWarning:false,showNameRequiredWarning:false,showNameTakenWarning:false,showPunctuationWarning:false,showSpecialsWarning:false,value:r}});return}b||h||m||g||v||f?i({value:r}):s({value:r});this.setState(function(){return{showLowercaseWarning:b,showMaxLengthWarning:h,showNameRequiredWarning:m,showNameTakenWarning:g,showPunctuationWarning:v,showSpecialsWarning:f,value:r}})}},{key:"fixName",value:function e(t){var r=t.toLowerCase().replace(/^#+/,"");r=r.replace(/^\s+/,"");r=r.replace(/\s+$/,"");r=r.replace(/\s/g,"-");var a=this.state.showInvalidCharactersWarning;a=!(!r||r===t);this.setState(function(){return{showInvalidCharactersWarning:a}});return r}},{key:"maybeRenderAdditionalValidationMarks",value:function e(){var t=this.props,r=t.additionalVerificationGood,a=t.isCheckingAdditionalVerification;var i=this.state,s=i.showLowercaseWarning,o=i.showMaxLengthWarning,l=i.showNameRequiredWarning,c=i.showNameTakenWarning,u=i.showPunctuationWarning,d=i.showSpecialsWarning;if(s||o||l||c||u||d)return null;if(a)return n.a.createElement("span",{className:"p-channel_name_input--validating"},n.a.createElement(pe["a"],{size:"large",className:"inline_block"}));if(r)return n.a.createElement("span",{"data-qa":"channel_name_input_validation",className:"p-channel_name_input--validating sk_seafoam_green"},ve.t("Available"),n.a.createElement(ee["a"],{align:"baseline",type:"check_circle_o_large"}));return null}},{key:"maybeRenderAdditionalVerificationWarning",value:function e(){var t=this.props.additionalVerificationError;if(!t.length)return null;return this.renderWarning(t)}},{key:"renderRules",value:function e(){var t=this.props,r=t.channel,a=t.workspaceName;var n=false;if(Object(M["isExternallySharedChannel"])(r))return this.renderWarning(ve.t("Names should be lowercase, with no spaces. Changes will only be visible to {workspaceName}.",{workspaceName:Object(F["n"])(a)}),n);return this.renderWarning(ve.t("Names should be lowercase, with no spaces."),n)}},{key:"renderNameTakenWarning",value:function e(){return this.renderWarning(be.t("{name} is already taken by a channel, username, or user group.",{name:this.state.value}))}},{key:"renderInvalidCharactersWarning",value:function e(){return this.renderWarning(ve.t("You entered some disallowed characters in the name, which we\u2019ve fixed. Make sure it looks good to you, and try again!"))}},{key:"renderLowercaseWarning",value:function e(){return this.renderWarning(be.t("Channel names must be all lowercase. Try again?"))}},{key:"renderMaxLengthWarning",value:function e(t){return this.renderWarning(be.t("Blerg, that\u2019s a bit too long! Channel names must be fewer than {maxlength} characters.",{maxlength:t+1}))}},{key:"renderRequiredWarning",value:function e(){return this.renderWarning(be.t("Don\u2019t forget to name your channel."))}},{key:"renderPunctuationWarning",value:function e(){return this.renderWarning(be.t("Names can\u2019t consist solely of punctuation. Please elaborate!"))}},{key:"renderSpecialsWarning",value:function e(){return this.renderWarning(be.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?"))}},{key:"renderWarning",value:function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var a=n.a.createElement("span",{className:"flex_none small_right_margin"},n.a.createElement(ee["a"],{type:"warning"}));var i=$()("p-channel_name_input--input_note",{"p-channel_name_input--alert":r});return n.a.createElement("span",{className:i},r&&a,n.a.createElement("span",{className:"flex_one"},t))}},{key:"renderTextInput",value:function e(t){var r=this.props,a=r.id,i=r.placeholder,s=r.featureChannelEditCreate,o=r.maxChannelNameLength;var l=this.state.value;var c=$()("c-input_text","p-channel_name_input--input",{"p-channel_name_input--input_with_warning":t});var u={id:a,placeholder:i,value:l,onChange:this.onChange,name:"channel_name_input",className:c};if(s){var p=d()({},u,{maxCharacterLimit:o});return n.a.createElement(he["a"],p)}var m=d()({},u,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"});return n.a.createElement(me["b"],m)}},{key:"render",value:function e(){var t=this.props,r=t.additionalVerificationError,a=t.maxChannelNameLength;var i=this.state,s=i.showInvalidCharactersWarning,o=i.showLowercaseWarning,l=i.showMaxLengthWarning,c=i.showNameRequiredWarning,u=i.showNameTakenWarning,d=i.showPunctuationWarning,p=i.showSpecialsWarning;var m=s||o||l||c||u||d||p;r&&r.length&&(m=true);return n.a.createElement("div",{className:"position_relative"},this.renderTextInput(m),this.maybeRenderAdditionalValidationMarks(),n.a.createElement("div",{"data-qa":"channel_name_input_warnings",className:"p-channel_name_input--warnings"},s&&this.renderInvalidCharactersWarning(),o&&this.renderLowercaseWarning(),l&&this.renderMaxLengthWarning(a),c&&this.renderRequiredWarning(),u&&this.renderNameTakenWarning(),d&&this.renderPunctuationWarning(),p&&this.renderSpecialsWarning(),this.maybeRenderAdditionalVerificationWarning()),this.renderRules())}}]);return t}(a["PureComponent"]);ye.displayName="ChannelNameInput";ye.defaultProps=_e;var ke=ye;function Oe(e){var t=Object(E["isFeatureEnabled"])(e,"feature_longer_channel_names");var r=ue(t);var a=Object(C["getTeamId"])(e);var n=Object(le["g"])(e,a);return{workspaceName:Object(D["getTeamDisplayName"])(n),featureChannelEditCreate:Object(E["isFeatureEnabled"])(e,"feature_channel_is_new_create_edit"),featureLongerChannelNames:t,maxChannelNameLength:r,teamId:a}}var Ee=Object(o["connect"])(Oe)(ye);var we=Ee;var Ce=r(1747);var Se=new F["b"]("channel_options");var je={additionalVerificationError:y["b"].oneOfType([y["b"].string,y["b"].object]),additionalVerificationGood:y["b"].bool,isCheckingAdditionalVerification:y["b"].bool,channel:y["b"].object.isRequired,currentTeam:y["b"].object,orgName:y["b"].string,onInvalidName:y["b"].func,onValidName:y["b"].func};var Ie={additionalVerificationError:"",additionalVerificationGood:false,isCheckingAdditionalVerification:false,currentTeam:{},orgName:"",onInvalidName:k["noop"],onValidName:k["noop"]};function Te(e){var t=Object(M["getDisplayName"])(e.channel);"#"===t[0]&&(t=t.substr(1));var r=e.additionalVerificationError,a=e.additionalVerificationGood,i=e.isCheckingAdditionalVerification,s=e.channel,o=e.currentTeam,l=e.orgName,c=e.onInvalidName,u=e.onValidName;return n.a.createElement("div",{className:"top_margin p-channel-options--content_text"},n.a.createElement("p",null,Se.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name to share this channel outside of <span>{teamName}</span>.",{name:Object(M["getDisplayName"])(s),orgName:l,teamName:Object(D["getTeamDisplayName"])(o)},function(e){var t=e.key,r=e.tag,a=e.text;if("strong"===r)return n.a.createElement("strong",{key:t+"-1"},re(t,s));return n.a.createElement("strong",{key:t},a)})),n.a.createElement("label",{htmlFor:"channel_rename",className:"c-label"},n.a.createElement("span",{className:"c-label__text"},Se.t("Channel name"))),n.a.createElement(we,{additionalVerificationError:r,additionalVerificationGood:a,channel:s,id:"channel_rename",isCheckingAdditionalVerification:i,onInvalid:c,onValid:u,placeholder:Se.t("Rename {title}",{title:Object(M["getDisplayName"])(s)}),shouldFix:true,value:t}))}Te.displayName="ChannelNameConflict";Te.defaultProps=Ie;function Ne(e){return{currentTeam:Object(A["getCurrentTeam"])(e),orgName:Object(S["getEnterpriseOrgName"])(e)}}var Ae=Object(o["connect"])(Ne)(Te);var Re=r(20);var Me=r(372);var Pe=r(430);var xe=r(657);var De=r(454);var Fe=r(693);var Le=r(143);var Be=r(242);var Ue=r(2074);var qe=new F["b"]("channel_options");var Ge={channel:y["b"].object.isRequired,maxLength:y["b"].number,purpose:y["b"].oneOfType([y["b"].string,y["b"].object]),purposeCreator:y["b"].object,purposeDate:y["b"].string,onChannelPurposeTextareaChange:y["b"].func.isRequired,onChannelPurposeValidationChange:y["b"].func,workspaceName:y["b"].string};var He={maxLength:250,purpose:"",purposeCreator:null,purposeDate:"",numCharsOverLimit:0,onChannelPurposeValidationChange:null,workspaceName:""};var We="react_channel_purpose_input";function Ve(e){Object(De["a"])({e:e,input_to_fill:"#"+We,offset_y:-8})}var ze=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setTextyRef=r.setTextyRef.bind(r);r.onTextChange=r.onTextChange.bind(r);r.texty=null;r.textyModules={tabcomplete:{positionMenu:function e(t){t.style.width=r.texty.container.offsetWidth+"px";Object(xe["a"])(t,r.texty.container)},completers:["channels","emoji","members"]}};r.state={numCharsOverLimit:r.countCharsOverLimit()};return r}f()(t,[{key:"onTextChange",value:function e(){var t=this.props,r=t.onChannelPurposeValidationChange,a=t.onChannelPurposeTextareaChange;var n=this.state.numCharsOverLimit;var i=this.countCharsOverLimit();if(i>0||n>0){this.setState(function(){return{numCharsOverLimit:i}});r&&r(i>0)}i<1&&a({target:{value:this.getEditText()}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"getEditText",value:function e(){var t=this.props.purpose;var r=Object(k["isString"])(t)?t:t.value;if(this.texty)return Object(Be["j"])(this.texty.value(),{enableBroadcastKeywords:false});if(Object(k["isString"])(r))return r;return""}},{key:"countCharsOverLimit",value:function e(){var t=this.getEditText();var r=this.props.maxLength;if(!r||!t.length)return 0;return Math.max(0,t.length-r)}},{key:"renderTextarea",value:function e(){var t=this.props,r=t.maxLength,a=t.purpose;var i=this.state.numCharsOverLimit;var s=i+r;var o=Object(Le["f"])(Object(k["isString"])(a)?a:a.value);var l=qe.t("Channel purpose");var c=void 0;i>0&&(c=qe.t("Text is too long! ({totalCharCount}/{maxLength} characters)",{totalCharCount:s,maxLength:r}));return n.a.createElement("div",{className:"p-channel_options--channel_purpose"},n.a.createElement(Pe["g"],{id:We,ref:this.setTextyRef,className:"c-input_textarea c-channel_purpose_input",modules:this.textyModules,ariaLabel:l,initialText:o,onTextChange:this.onTextChange,focusOnMount:true,useLegacyCreate:true,enableBroadcastKeywords:false}),n.a.createElement(Re["c"],{onClick:Ve,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},n.a.createElement(ee["a"],{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),n.a.createElement(ee["a"],{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),n.a.createElement(ee["a"],{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})),c&&n.a.createElement("p",{className:"candy_red no_bottom_margin"},c))}},{key:"renderGuidance",value:function e(){var t=this.props,r=t.channel,a=t.workspaceName;return Object(M["isExternallySharedChannel"])(r)?qe.t("Describe what this channel is for. This is only visible to {workspaceName}.",{workspaceName:Object(F["n"])(a)}):qe.t("Describe what this channel is for.")}},{key:"render",value:function e(){var t=this.props,r=t.purposeCreator,a=t.purposeDate;var i=qe.rt('Purpose <span className="normal">(optional)</span>',{fallbackHash:"a587fb8aa58d02ba9fd0f63b6a2fee69d374d87f"},function(e){var t=e.text,r=e.key;return n.a.createElement("span",{key:r,className:"normal"},t)});var s=void 0;a&&r&&a&&(s=qe.rt("The purpose was last set by <span>{member}</span> {date}.",{member:r,date:a},function(e){var t=e.key,a=e.tag,i=e.text;if("span"===a)return n.a.createElement(Me["a"],{key:t,id:r.id});return n.a.createElement("span",{key:t},i)}));return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("label",{htmlFor:"purpose_input",className:"block"},i),this.renderTextarea(),n.a.createElement("p",{className:"mini small_top_margin no_bottom_margin"},this.renderGuidance()),s&&n.a.createElement("p",{className:"mini"},s))}}]);return t}(a["PureComponent"]);ze.displayName="ChannelPurpose";ze.defaultProps=He;function Qe(e,t){var r=t.purpose;var a=Object(k["get"])(r,"creator");return{purposeCreator:a?Object(N["getMemberById"])(e,a):null,purposeDate:r.last_set&&Object(Fe["a"])(e,r.last_set),workspaceName:Object(D["getTeamDisplayName"])(Object(A["getCurrentTeam"])(e))}}var Ke=Object(o["connect"])(Qe)(ze);var Ye=new F["b"]("channel_options");var Je={channel:y["b"].object.isRequired,teamName:y["b"].string.isRequired};var Ze={};var Xe=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"shouldShowShareWarning",value:function e(){var t=this.props.channel;if(!t)return false;return Object(M["isSharedPublicOrPrivateChannel"])(t)}},{key:"renderShareWarning",value:function e(){var t=this.props,r=t.channel,a=t.teamName;if(!r)return null;if(!this.shouldShowShareWarning())return null;return n.a.createElement("li",null,Ye.rt("This update will only appear in {teamName}.",{teamName:n.a.createElement("strong",null,a)}))}},{key:"render",value:function e(){var t=this.props.teamName;return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement(Z["a"],{type:"boxed",level:"warning",icon:"warning",align:"left",className:"margin_bottom_150"},Ye.t("This change can\u2019t be undone, so please proceed with care.")),n.a.createElement("p",{className:"small_bottom_margin"},n.a.createElement("strong",null,Ye.t("Things to note:"))),n.a.createElement("ul",null,this.renderShareWarning(),n.a.createElement("li",null,Ye.t("Channel history and members will not be affected by this change.")),n.a.createElement("li",null,Ye.rt("All files shared in this channel up until this point will remain publicly accessible to everyone in {teamName}.",{teamName:n.a.createElement("strong",null,t)}))))}}]);return t}(a["PureComponent"]);Xe.displayName="ConvertChannelToPrivate";Xe.defaultProps=Ze;function $e(e,t){var r=t.channel;var a=Object(A["getCurrentTeam"])(e);return{channel:r,teamName:Object(D["getTeamDisplayName"])(a)}}var et=Object(o["connect"])($e)(Xe);var tt=r(16);var rt=r(338);var at=r(660);var nt=r(1326);var it=r(1300);function st(e){var t=e.retentionType,r=e.retentionDuration;if(!Object(k["isInteger"])(t))return false;var a=36500;return 0===t||1===t&&Object(k["isInteger"])(r)&&r>0&&r<a}function ot(e){var t=e.retentionDuration,r=e.retentionDurationUnit;if(!Object(k["isInteger"])(r))return t;return 0===r?t:365*t}var lt=new F["b"]("channel_options");var ct={member:y["b"].object.isRequired,team:y["b"].object.isRequired,onDurationChange:y["b"].func,onDurationUnitChange:y["b"].func,onTypeChange:y["b"].func,prefsLoaded:y["b"].bool,retentionDuration:y["b"].number,retentionDurationUnit:y["b"].number,retentionType:y["b"].number,teamRetentionDuration:y["b"].number,teamRetentionType:y["b"].number,durationInputRef:y["b"].func};var ut={onDurationChange:k["noop"],onDurationUnitChange:k["noop"],onTypeChange:k["noop"],prefsLoaded:false,retentionDuration:0,retentionDurationUnit:0,retentionType:0,teamRetentionDuration:0,teamRetentionType:0,durationInputRef:k["noop"]};var dt=0;var pt=1;var mt=1;var ht=0;var ft=2;var vt=3;var bt=0;var gt=47;var _t=57;var yt=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.durationChange=r.durationChange.bind(r);r.durationUnitChange=r.durationUnitChange.bind(r);r.handleKeyPress=r.handleKeyPress.bind(r);return r}f()(t,[{key:"durationChange",value:function e(t){var r=this;t.persist();Object(k["debounce"])(function(){var e=Math.round(parseFloat(t.target.value,10));r.props.onDurationChange(e)},500)()}},{key:"durationUnitChange",value:function e(t){this.props.onDurationUnitChange(parseInt(t.target.value,10))}},{key:"handleKeyPress",value:function e(t){(t.charCode<gt||t.charCode>_t)&&t.preventDefault()}},{key:"maybeRenderOldDurationInput",value:function e(){var t=this.props,r=t.retentionDuration,a=t.retentionType;if(a===dt)return null;var i={width:"60px",backgroundColor:"white"};return n.a.createElement("div",{className:"flex_none left_margin"},n.a.createElement("label",{htmlFor:"retention_duration",className:"c-label c-label__text"},lt.t("Duration")),n.a.createElement("input",{className:"p-channel_options--retention_duration c-input_text align_right",defaultValue:r,id:"retention_duration",maxLength:"4",onChange:this.durationChange,style:i,type:"text"}),n.a.createElement("span",{className:"p-channel_options--retention_duration_add_on"},lt.t("days")))}},{key:"maybeRenderDurationInput",value:function e(){var t=this.props,r=t.retentionDuration,a=t.retentionDurationUnit,i=t.retentionType,s=t.durationInputRef;if(i===dt)return null;var o=n.a.createElement("strong",null,lt.t("Delete messages and their revisions after:"));return n.a.createElement(J["a"],{className:"p-channel_options--retention_duration_label c-deprecated-icon c-icon--caret-down",text:o,htmlFor:"retention_duration"},n.a.createElement("div",{className:"display_flex"},n.a.createElement("input",{className:"p-channel_options--retention_duration c-input_text",defaultValue:0===r?"":r,id:"retention_duration",onChange:this.durationChange,onKeyPress:this.handleKeyPress,type:"text",ref:s}),n.a.createElement("select",{className:"p-channel_options--retention_duration_unit c-input_select margin_left_100",id:"retention_duration_unit",defaultValue:a,onChange:this.durationUnitChange},n.a.createElement("option",{value:"0"},lt.t("Days")),n.a.createElement("option",{value:"1"},lt.t("Years")))))}},{key:"maybeRenderDurationWarning",value:function e(){var t=this.props,r=t.member,a=t.retentionType,i=t.retentionDuration,s=t.retentionDurationUnit,o=t.teamRetentionDuration,l=t.teamRetentionType;if(a===dt)return null;var c=void 0;var u=ot({retentionDuration:i,retentionDurationUnit:s});var d=5475;if(u>=36500)c=lt.rt("When setting a time frame for deleting messages, please choose a duration less than 100 years.");else if(st({retentionType:a,retentionDuration:u}))if(u<30)c=lt.rt("<strong>This will delete all messages older than {retentionDuration, plural, =1 {# day} other {# days}}</strong>. Please double-check with your team before setting such a short retention period.",{retentionDuration:i});else if(l===ft&&u>o)c=s===bt?Object(tt["isAdmin"])(r)||Object(tt["isOwner"])(r)?lt.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# day} other {# days}}, you\u2019re choosing to keep messages for longer than the rest of your workspace.",{retentionDuration:i}):lt.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# day} other {# days}}, you\u2019re choosing to keep messages for longer than the rest of your workspace. You may want to check with an admin to make sure this is OK.",{retentionDuration:i}):Object(tt["isAdmin"])(r)||Object(tt["isOwner"])(r)?lt.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# year} other {# years}}, you\u2019re choosing to keep messages for longer than the rest of your workspace.",{retentionDuration:i}):lt.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# year} other {# years}}, you\u2019re choosing to keep messages for longer than the rest of your workspace. You may want to check with an admin to make sure this is OK.",{retentionDuration:i});else{if(l!==mt&&l!==ht||!(u>d))return null;c=lt.rt("Just a heads up: if you want to keep your messages forever, you can choose to follow your workspace\u2019s default retention settings.")}else c=lt.rt("To delete messages after a period of time, set a value greater than zero.");return n.a.createElement(Z["a"],{level:"warning"},c)}},{key:"renderSelectOption",value:function e(t,r){return n.a.createElement("option",{value:t},r)}},{key:"renderRadio",value:function e(){var t=this.props,r=t.onTypeChange,a=t.retentionType,i=t.team;var s="retention_type";var o=n.a.createElement("span",null,n.a.createElement("strong",null,lt.t("Use the default retention settings for {teamName}",{teamName:Object(D["getTeamDisplayName"])(i)})),n.a.createElement("div",{className:"sk_dark_gray"},this.renderTeamPrefMessage()));var l=n.a.createElement("span",null,n.a.createElement("strong",null,lt.t("Use custom retention settings for this conversation")),n.a.createElement("div",{className:"sk_dark_gray"},lt.t("Delete messages after a set amount of time.")));return n.a.createElement("div",{className:"flex_one"},n.a.createElement(at["a"],{className:"margin_bottom_50"},n.a.createElement(J["a"],{text:o,htmlFor:s+"_0",type:"inline",cursor:"pointer",className:"margin_bottom_75"},n.a.createElement(rt["a"],{id:s+"_0",name:s,value:0,checked:a===dt,onChange:r})),n.a.createElement(J["a"],{text:l,htmlFor:s+"_1",type:"inline",cursor:"pointer"},n.a.createElement(rt["a"],{id:s+"_1",name:s,value:1,checked:a===pt,onChange:r}))))}},{key:"renderTeamPrefMessage",value:function e(){var t=this.props,r=t.teamRetentionDuration,a=t.teamRetentionType;var n=void 0;switch(a){case mt:n=lt.t("By default, messages are kept forever.");break;case ht:n=lt.t("By default, messages are kept forever, but revisions aren\u2019t tracked.");break;case ft:if(r>364){var i=Object(k["round"])(r/365,1);n=lt.t("By default, messages older than {durationDays} days ({durationYears, plural, =1 {# year} other {# years}}) will be deleted.",{durationDays:r,durationYears:i})}else n=lt.t("By default, messages older than {teamRetentionDuration, plural, =1 {# day} other {# days}} will be deleted.",{teamRetentionDuration:r});break;case vt:if(r>364){var s=Object(k["round"])(r/365,1);n=lt.t("By default, messages older than {durationDays} days ({durationYears, plural, =1 {# year} other {# years}}) will be deleted (full history still accessible via compliance export).",{durationDays:r,durationYears:s,fallbackHash:"91a2ec5b71549f51b20023decb759e38c488cd23"})}else n=lt.t("By default, messages older than {teamRetentionDuration, plural, =1 {# day} other {# days}} will be deleted (full history still accessible via compliance export).",{teamRetentionDuration:r,fallbackHash:"546ed739919d63b927945839040c80b6968a5d2f"});break;default:n=lt.t("By default, messages are kept forever.");break}return n}},{key:"render",value:function e(){var t=this.props.prefsLoaded;if(!t)return n.a.createElement("div",{className:"p-channel_options--option_spinner"},n.a.createElement(pe["a"],{size:"jumbo"}));return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,lt.t("If you\u2019d like, you can set custom message retention for this conversation.")),this.renderRadio(),n.a.createElement("div",{className:"p-channel-options__custom_retention_container"},this.maybeRenderDurationInput(),this.maybeRenderDurationWarning()))}}]);return t}(a["PureComponent"]);yt.displayName="DataRetention";yt.defaultProps=ut;var kt=yt;var Ot=r(65);var Et=new F["b"]("channel_options");var wt={channel:y["b"].object.isRequired,showArchiveInstead:y["b"].bool.isRequired,onChangeCheckbox:y["b"].func.isRequired,onClickArchiveInstead:y["b"].func.isRequired};var Ct={};var St=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"renderArchiveInstead",value:function e(){var t=this.props,r=t.showArchiveInstead,a=t.onClickArchiveInstead;if(!r)return null;return Et.rt("<strong>Note:</strong> <a>Archiving a channel</a> lets you close out a conversation without deleting its messages.",{fallbackHash:"7a1495254985f7cbea8f1975f9ee15921929ea5c"},function(e){var t=e.text,r=e.key,i=e.tag;if("strong"===i)return n.a.createElement("strong",{key:r},t);if("a"===i)return n.a.createElement(Ot["a"],{key:r,onClick:a},t);return{text:t}})}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.onChangeCheckbox;return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,Et.rt("Are you sure you want to delete <strong>{channel}</strong>? All of the channel\u2019s messages will be removed from Slack immediately \u2014 files, however, will not be deleted. This cannot be undone.",{channel:Object(M["getDisplayName"])(r)},function(e){var t=e.key;return re(t,r)})),n.a.createElement("p",null,this.renderArchiveInstead()),n.a.createElement("p",{className:"float_left very_small_top_margin"},n.a.createElement("label",{htmlFor:"delete_channel_cb",className:"c-label--pointer display_flex align_items_center"},n.a.createElement("input",{onChange:a,id:"delete_channel_cb",type:"checkbox",className:"c-input_checkbox inline small_right_margin"}),Et.t("Yes, permanently delete this channel"))))}}]);return t}(a["PureComponent"]);St.displayName="DeleteChannel";St.defaultProps=Ct;var jt=St;var It=new F["b"]("channel_options");function Tt(){return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,It.t("Exports can take a while \u2014 especially for lengthy conversations. Slackbot will ping you when your export is done.")))}Tt.displayName="ExportHistory";var Nt=Tt;var At=r(661);var Rt=r(1412);var Mt=r(1411);var Pt=new F["b"]("channel_options");var xt={channel:y["b"].object,orgName:y["b"].string,disabledTeamIds:y["b"].arrayOf(y["b"].string),filterFunction:y["b"].func,isLoaded:y["b"].bool,onShareWithChange:y["b"].func,onTeamPickerChange:y["b"].func,originatingTeamId:y["b"].string,preselectedTeamIds:y["b"].arrayOf(y["b"].string),shareWith:y["b"].string};var Dt={channel:null,orgName:"",disabledTeamIds:[],filterFunction:null,isLoaded:false,onShareWithChange:k["noop"],onTeamPickerChange:k["noop"],originatingTeamId:"",preselectedTeamIds:[],shareWith:"specific"};var Ft=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"maybeRenderWorkspacePicker",value:function e(){var t=this.props,r=t.disabledTeamIds,a=t.filterFunction,i=t.onTeamPickerChange,s=t.originatingTeamId,o=t.preselectedTeamIds,l=t.shareWith;if("all"===l)return null;var c=void 0;c=a||G({preselected_ids:o,disabled_ids:r});return n.a.createElement("div",{className:"margin_left_150"},n.a.createElement(At["a"],{approxItemHeight:32,dataPromise:c,onValueChange:i,placeholderText:Pt.t("Add workspaces"),template:function e(t){var r={item:t};t.team.id===s&&(r.additionalItemCopy=Pt.t("Owner"));return n.a.createElement(Mt["a"],r)},tokenTemplate:function e(t){var r={item:t};t.team.id===s&&(r.additionalItemCopy=Pt.t("Owner"));return n.a.createElement(Rt["a"],r)}}))}},{key:"renderAllWorkspaces",value:function e(){var t=this.props,r=t.onShareWithChange,a=t.shareWith,i=t.orgName;var s={className:"small_right_margin",id:"all-workspaces",name:"share_with",onClick:r,value:"all"};"all"===a&&(s.defaultChecked="checked");return n.a.createElement(J["a"],{type:"inline",cursor:"pointer",className:"p-channel_options--input_label",htmlFor:"all-workspaces",text:Pt.t("All {orgName} workspaces",{orgName:i})},n.a.createElement(rt["a"],s))}},{key:"renderSpecificWorkspaces",value:function e(){var t=this.props,r=t.onShareWithChange,a=t.shareWith,i=t.orgName;var s={className:"small_right_margin",id:"specific-workspaces",name:"share_with",onClick:r,value:"specific"};"specific"===a&&(s.defaultChecked="checked");return n.a.createElement("div",null,n.a.createElement(J["a"],{type:"inline",cursor:"pointer",className:"p-channel_options--input_label",htmlFor:"specific-workspaces",text:Pt.t("Specific {orgName} workspaces",{orgName:i})},n.a.createElement(rt["a"],s)),this.maybeRenderWorkspacePicker())}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.isLoaded,i=t.orgName;if(!a)return n.a.createElement("div",{className:"p-channel_options--option_spinner"},n.a.createElement(pe["a"],{size:"jumbo"}));var s=void 0;s=Object(M["isPrivateChannel"])(r)?Pt.t("Members of the {org_name} workspaces you select will be able to join this channel, if invited.",{org_name:i}):Pt.t("Choose which {org_name} workspaces can find and join this channel.",{org_name:i});return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,s),this.renderSpecificWorkspaces(),this.renderAllWorkspaces())}}]);return t}(a["PureComponent"]);Ft.displayName="ManageWorkspaceAccess";Ft.defaultProps=Dt;function Lt(e){return{orgName:Object(S["getEnterpriseOrgName"])(e)}}var Bt=Object(o["connect"])(Lt)(Ft);var Ut=r(24);var qt=r.n(Ut);var Gt=r(481);var Ht=new F["b"]("channel_options");var Wt={allEnterpriseTeams:y["b"].array,channel:y["b"].object.isRequired,channelIsGlobalShared:y["b"].bool,newChannelName:y["b"].string,orgName:y["b"].string,shareWith:y["b"].string,teamId:y["b"].string.isRequired,teamIdsSelected:y["b"].arrayOf(y["b"].string)};var Vt={allEnterpriseTeams:[],channelIsGlobalShared:false,newChannelName:"",orgName:"",shareWith:"specific",teamIdsSelected:[]};var zt=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.pointCounter=0;return r}f()(t,[{key:"makeChannelName",value:function e(){var t=this.props,r=t.channel,a=t.newChannelName;return a&&a.length?a:Object(M["getDisplayName"])(r)}},{key:"makeTeamNamesList",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var r=this.props,a=r.teamIdsSelected,i=r.teamId;var s=Object(c["c"])(i);var o=t.length?t:a;if(o.length>=5)return Ht.t("{workspaceCount} workspaces",{workspaceCount:o.length});var l=Object(k["map"])(o,function(e){var t=Object(A["getTeamById"])(s,e);return Object(D["isUnknown"])(t)?n.a.createElement(Gt["a"],{type:"unknown"}):Object(D["getTeamDisplayName"])(t)});if(1===l.length)return l[0];return Object(F["g"])(l,{react:true,strong:true})}},{key:"renderChangesDetails",value:function e(){var t=this;var r=this.props,a=r.allEnterpriseTeams,i=r.channel,s=r.channelIsGlobalShared,o=r.orgName,l=r.shareWith,c=r.teamIdsSelected;var u=Object(k["map"])(a,"id");var p=s?u:Object(M["getSharedTeamIds"])(i);var m=Object(k["difference"])(c,Object(M["getSharedTeamIds"])(i));var h=k["without"].apply(void 0,[p].concat(qt()(c)));var f=k["without"].apply(void 0,[Object(k["intersection"])(u,p)].concat(qt()(h)));var v=[];var b=function e(r,a,n){t.pointCounter+=1;v.push({data:r,key:t.pointCounter,isHeading:!!a,iconType:n})};var g=[];var _={channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(m)};var y=function e(t){var r=t.key,a=t.tag,s=t.text;if("span"===a)return n.a.createElement("strong",{key:r},re(r,i,s));return n.a.createElement("strong",{key:r},s)};var O=true;var E="ts_icon_org_shared_channel";var w="ts_icon_warning";if("all"===l){b(Ht.rt("Share <span>{channelName}</span> with all of <strong>{orgName}</strong>.",{channelName:this.makeChannelName(),orgName:o},y),O,E);if(Object(M["isPrivateChannel"])(i))b(Ht.rt("If invited, members of <strong>{orgName}</strong> will be able to join the channel and see its message history and files.",{orgName:o,channelName:this.makeChannelName()},y));else{b(Ht.rt("All members of <strong>{orgName}</strong> will be able to find and join the channel and see its message history and files.",{orgName:o}));b(Ht.t("Members of any workspaces created in the future will also have access."))}b(Ht.rt("The channel will be notified of these changes."))}else{s&&b(Ht.rt("Stop sharing <span>{channelName}</span> with {teamNames}.",{channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(h)},y),O,w);if(!s&&m.length){b(Ht.rt("Share <span>{channelName}</span> with members of {teamNames}.",_,y),O,E);Object(M["isPrivateChannel"])(i)?m.length>1?b(Ht.rt("If invited, members of these workspaces will be able to join the channel and see its message history and files.")):b(Ht.rt("If invited, members of this workspace will be able to join the channel and see its message history and files.")):m.length>1?b(Ht.rt("All members of these workspaces will be able to find and join the channel and see its message history and files.")):b(Ht.rt("All members of this workspace will be able to find and join the channel and see its message history and files."))}m.length&&!h.length&&b(Ht.rt("The channel will be notified of these changes."));if(h.length){s||b(Ht.rt("Stop sharing <span>{channelName}</span> with {teamNames}.",{channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(h)},y),O,w);h.length>1?b(Ht.rt("Members of these workspaces will lose access to this channel\u2019s message history and files.")):b(Ht.rt("All members of {workspace} will lose access to this channel\u2019s message history and files.",{workspace:this.makeTeamNamesList(h)}));h.length>1?b(Ht.rt("Apps installed by members of these workspaces will need to be installed again.")):b(Ht.rt("Apps installed by members of {workspace} will need to be added again.",{workspace:this.makeTeamNamesList(h)}));f.length&&b(Ht.rt("Members of {workspaces} will continue to have access to this channel.",{workspaces:this.makeTeamNamesList(f)}));b(Ht.rt("The channel will be notified of these changes."))}}b(Ht.rt("<a>Learn more</a> about sharing channels within your organization.",null,function(e){var t=e.key,r=e.text;return n.a.createElement("a",{key:t,href:"https://get.slack.help/hc/en-us/articles/115001399587-Create-a-shared-channel-on-Enterprise-Grid#how-they-work",target:"_blank",rel:"noopener noreferrer"},r)}));v.forEach(function(e){var t={className:e.isHeading?"p-channel-options--workspace_access_heading":"p-channel-options--workspace_access_line_item"};g.push(n.a.createElement("p",d()({key:e.key},t),e.iconType&&n.a.createElement("ts-icon",{class:e.iconType}),e.data))});return n.a.createElement("div",{className:"p-channel-options--content_text"},g)}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderChangesDetails())}}]);return t}(a["Component"]);zt.displayName="ManageWorkspaceAccessReview";zt.defaultProps=Vt;function Qt(e,t){var r=t.channel;return{channelIsGlobalShared:Object(M["isOrgGlobalSharedPublicOrPrivateChannel"])(r),orgName:Object(S["getEnterpriseOrgName"])(e),teamId:Object(C["getTeamId"])(e),allEnterpriseTeams:Object(A["getAllEnterpriseTeams"])(e)}}var Kt=Object(o["connect"])(Qt)(zt);var Yt={children:y["b"].any,dataActionTag:y["b"].string,isDisabled:y["b"].bool,message:y["b"].any.isRequired,onClick:y["b"].func.isRequired,title:y["b"].string.isRequired};var Jt={children:null,dataActionTag:"",isDisabled:false};var Zt=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props,r=t.children,a=t.dataActionTag,i=t.isDisabled,s=t.message,o=t.onClick,l=t.title;var c=$()("channel_option_item",{"channel_option_item--disabled":i});var u=i?k["noop"]:o;return n.a.createElement(Re["c"],{className:c,"data-action":a,onClick:u,type:"link"},n.a.createElement("h3",{className:"title"},l),n.a.createElement("p",{className:"sk_dark_grey no_bottom_margin"},s),r,n.a.createElement("div",{className:"channel_option_open"},n.a.createElement(ee["a"],{className:"c-deprecated-icon--inherit",type:"arrow_large_right"})))}}]);return t}(a["PureComponent"]);Zt.displayName="Option";Zt.defaultProps=Jt;var Xt=Zt;var $t=new F["b"]("channel_options");var er={channel:y["b"].object,disableConvertToPrivate:y["b"].bool,disableRename:y["b"].bool,isAdminUser:y["b"].bool,modalClasses:y["b"].string,onClickArchive:y["b"].func,onClickConvertToPrivate:y["b"].func,onClickDelete:y["b"].func,onClickExport:y["b"].func,onClickManageOrgAccess:y["b"].func,onClickPostingPermissions:y["b"].func,onClickPurpose:y["b"].func,onClickRename:y["b"].func,onClickShareExternal:y["b"].func,onClickCancelExternalSharedChannelInvite:y["b"].func,onClickStopShareExternal:y["b"].func,orgName:y["b"].string,pendingSharedExternalSharedTeamNames:y["b"].array,showArchive:y["b"].bool.isRequired,showConvertToPrivate:y["b"].bool.isRequired,showDelete:y["b"].bool.isRequired,showExport:y["b"].bool.isRequired,showManageOrgAccess:y["b"].bool.isRequired,showPostingPermissions:y["b"].bool.isRequired,showPurpose:y["b"].bool.isRequired,showRename:y["b"].bool.isRequired,showShareExternal:y["b"].bool.isRequired,showStopShareExternal:y["b"].bool.isRequired,showSuccessAlert:y["b"].bool,successAlertHeading:y["b"].string,successAlertText:y["b"].string};var tr={channel:{},disableConvertToPrivate:false,disableRename:false,isAdminUser:false,modalClasses:"",onClickArchive:k["noop"],onClickCancelExternalSharedChannelInvite:k["noop"],onClickConvertToPrivate:k["noop"],onClickDelete:k["noop"],onClickExport:k["noop"],onClickManageOrgAccess:k["noop"],onClickPostingPermissions:k["noop"],onClickPurpose:k["noop"],onClickRename:k["noop"],onClickShareExternal:k["noop"],onClickStopShareExternal:k["noop"],orgName:"",pendingSharedExternalSharedTeamNames:[],showSuccessAlert:false,successAlertHeading:"",successAlertText:""};var rr=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"renderArchive",value:function e(){var t=this.props.onClickArchive;return n.a.createElement(Xt,{dataActionTag:"archive",message:$t.t("If you don\u2019t think it will be used anymore and you want to clean up, archive it. The channel can be unarchived later (but everyone will have been removed)."),onClick:t,title:$t.t("Archive this channel")})}},{key:"renderShareExternal",value:function e(){var t=this;var r=this.props,a=r.channel,i=r.isAdminUser,s=r.onClickShareExternal,o=r.pendingSharedExternalSharedTeamNames;var l="";var c=$t.t("Share this channel with another workspace");var u=$t.rt("Shared channels link two workspaces together. People from both sides can send messages, share files, and search the channel\u2019s history. <a>Learn more</a>",null,function(e){var t=e.text,r=e.key;return n.a.createElement("a",{key:r,href:"https://get.slack.help/hc/articles/115004151203",target:"_blank",rel:"noopener noreferrer"},t)});a.unlinked&&(l=n.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},n.a.createElement("div",{className:"c-alert__message"},$t.t("This channel was previously shared with another workspace and can\u2019t be shared again."))));if(o.length){var d=Object(F["g"])(o).join("");var p=$t.rt("{listified_pending_team_name} was already invited to this channel.",{listified_pending_team_name:n.a.createElement("strong",null,d)});var m="";if(i){var h=a.pending_shared[0];m=n.a.createElement("a",{onClick:function e(){return t.props.onClickCancelExternalSharedChannelInvite(h)},role:"button",tabIndex:"0"},$t.t("Cancel invitation"))}l=n.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},n.a.createElement("div",{className:"c-alert__message"},p,"\xa0",m))}var f=o.length>0||!!a.unlinked;return n.a.createElement(Xt,{dataActionTag:"share_external",isDisabled:f,message:u,onClick:s,title:c},l)}},{key:"renderStopShareExternal",value:function e(){var t=this.props.onClickStopShareExternal;return n.a.createElement(Xt,{dataActionTag:"stop_share_external",title:$t.t("Stop sharing this channel"),message:$t.t("You can stop sharing this channel at any time. Note that you won\u2019t be able to re-share this channel in the future."),onClick:t})}},{key:"renderConvertToPrivate",value:function e(){var t=this.props,r=t.disableConvertToPrivate,a=t.onClickConvertToPrivate;var i="";r&&(i=n.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},n.a.createElement("div",{className:"c-alert__message"},$t.t("During the beta, shared channels can\u2019t be made private."))));return n.a.createElement(Xt,{dataActionTag:"convert_private",isDisabled:r,title:$t.t("Change to a private channel"),message:$t.t("Private channels can only be joined if you are added by a current member \u2014 they won\u2019t show up in your channel browser. This change can\u2019t be undone."),onClick:a},i)}},{key:"renderManageOrgAccess",value:function e(){var t=this.props,r=t.channel,a=t.onClickManageOrgAccess,i=t.orgName;var s=void 0;s=Object(M["isOrgSharedPublicOrPrivateChannel"])(r)?Object(M["isPrivateChannel"])(r)?$t.t("Manage which members of {org_name} can be invited to join this channel.",{org_name:i}):$t.t("Manage which members of {org_name} can find and join this channel.",{org_name:i}):Object(M["isPrivateChannel"])(r)?$t.t("Members of the {org_name} workspaces you select will be able to join this channel, if invited.",{org_name:i}):$t.t("Anyone in the {org_name} workspaces you select will be able to find and join this channel.",{org_name:i});var o=void 0;o=Object(M["isOrgSharedPublicOrPrivateChannel"])(r)?$t.t("Sharing settings for this channel"):$t.t("Share this channel with other {org_name} workspaces",{org_name:i});return n.a.createElement(Xt,{dataActionTag:"convert_ent_shared",message:s,onClick:a,title:o})}},{key:"renderRename",value:function e(){var t=this.props,r=t.disableRename,a=t.onClickRename;var i="";r&&(i=n.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},n.a.createElement("div",{className:"c-alert__message"},$t.t("You don\u2019t have permission to rename this channel."))));return n.a.createElement(Xt,{dataActionTag:"rename",isDisabled:r,message:$t.t("You can rename a channel at any time. But, use it sparingly: it might confuse or disorient your colleagues!"),onClick:a,title:$t.t("Rename this channel")},i)}},{key:"renderPurpose",value:function e(){var t=this.props.onClickPurpose;var r=false;var a=void 0;a=r?$t.t("Edit the channel purpose"):$t.t("Set the channel purpose");var i=void 0;i=r?"":$t.t("Channel purposes are especially useful to new members choosing which conversations to join.");return n.a.createElement(Xt,{dataActionTag:"set_purpose",message:i,onClick:t,title:a})}},{key:"renderPostingPermissions",value:function e(){var t=this.props.onClickPostingPermissions;return n.a.createElement(Xt,{dataActionTag:"posting_permissions",message:$t.t("Change who is allowed to post messages in this channel."),onClick:t,title:$t.t("Manage posting permissions")})}},{key:"renderExport",value:function e(){var t=this.props.onClickExport;return n.a.createElement(Xt,{dataActionTag:"export",message:$t.t("Export the messages in this conversation as a JSON file."),onClick:t,title:$t.t("Export message history")})}},{key:"renderDelete",value:function e(){var t=this.props.onClickDelete;return n.a.createElement(Xt,{dataActionTag:"delete",message:$t.t("Deleting a channel will permanently remove all of its messages. This cannot be undone."),onClick:t,title:$t.t("Delete this channel")})}},{key:"renderSuccessAlert",value:function e(){var t=this.props,r=t.successAlertHeading,a=t.successAlertText;var i={level:"success",heading:r};return n.a.createElement(Z["a"],i,n.a.createElement("span",null,a))}},{key:"render",value:function e(){var t=this.props,r=t.showArchive,a=t.showConvertToPrivate,i=t.showDelete,s=t.showExport,o=t.showPostingPermissions,l=t.showPurpose,c=t.showRename,u=t.showShareExternal,d=t.showStopShareExternal,p=t.showManageOrgAccess,m=t.showSuccessAlert,h=t.modalClasses;return n.a.createElement("div",{className:h,role:"presentation"},m&&this.renderSuccessAlert(),r&&this.renderArchive(),u&&this.renderShareExternal(),d&&this.renderStopShareExternal(),a&&this.renderConvertToPrivate(),p&&this.renderManageOrgAccess(),c&&this.renderRename(),l&&this.renderPurpose(),o&&this.renderPostingPermissions(),s&&this.renderExport(),i&&this.renderDelete())}}]);return t}(a["PureComponent"]);rr.displayName="OptionsList";rr.defaultProps=tr;function ar(e){var t=Object(N["getCurrentMember"])(e);return{orgName:Object(S["getEnterpriseOrgName"])(e),isAdminUser:t.is_admin}}var nr={};var ir=Object(o["connect"])(ar,nr)(rr);var sr=r(159);var or=r(1165);var lr={item:y["b"].object};var cr={item:{}};var ur=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props.item;return n.a.createElement("div",{className:"c-lazy_filter_select__user_group_item"},n.a.createElement("div",{className:"c-lazy_filter_select__user_group_token_name"},t.user_group.name))}}]);return t}(a["PureComponent"]);ur.displayName="LazyFilterSelectUserGroupListItem";var dr=ur;ur.defaultProps=cr;function pr(e){if(e.member)return n.a.createElement(or["a"],{item:e});return n.a.createElement(dr,{item:e})}pr.displayName="getItemTemplate";var mr=r(1166);var hr={item:y["b"].object};var fr={item:{}};var vr=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props.item;return n.a.createElement("div",{className:"c-lazy_filter_select__user_group_token",key:t.id},n.a.createElement("div",{className:"c-lazy_filter_select__user_group_token_name"},t.user_group.name))}}]);return t}(a["PureComponent"]);vr.displayName="LazyFilterSelectUserGroupToken";var br=vr;vr.defaultProps=fr;function gr(e){if(e.member)return n.a.createElement(mr["a"],{item:e});return n.a.createElement(br,{item:e})}gr.displayName="getTokenTemplate";var _r=new F["b"]("channel_options");var yr={canThread:y["b"].bool,isOrgDefault:y["b"].bool,onChangeCheckbox:y["b"].func.isRequired,onChangeRadio:y["b"].func.isRequired,onChangeValueSelectedMembers:y["b"].func.isRequired,postingPermissionsLoaded:y["b"].bool,postingPermissionsSelectedMembers:y["b"].array,whoCanPost:y["b"].string,featureDefaultSharedChannels:y["b"].bool.isRequired};var kr={canThread:false,isOrgDefault:false,postingPermissionsLoaded:false,postingPermissionsSelectedMembers:null,whoCanPost:""};var Or=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"maybeRenderCheckbox",value:function e(){var t=this.props,r=t.canThread,a=t.isOrgDefault,i=t.onChangeCheckbox,s=t.featureDefaultSharedChannels;var o=_r.t("Allow members to start message threads?");var l=_r.t("With this selected, anyone will be able to add threaded replies to messages posted in this channel.");if(!s||!a)return null;return n.a.createElement("div",null,n.a.createElement("hr",{className:"top_margin bottom_margin"}),n.a.createElement(J["a"],{htmlFor:"posting_permission_can_thread",type:"inline",cursor:"pointer",text:o,subtext:l},n.a.createElement(Y["a"],{id:"posting_permission_can_thread",name:"can_thread",onChange:i,checked:r})))}},{key:"maybeRenderMemberPicker",value:function e(){var t=this.props,r=t.isOrgDefault,a=t.onChangeValueSelectedMembers,i=t.postingPermissionsSelectedMembers,s=t.whoCanPost;var o={};r&&(o.maxSelectedItems=100);var l=q(i);var c=32;if("multi"===s||"owner"===s)return n.a.createElement(At["a"],d()({onValueChange:a,template:pr,tokenTemplate:gr,dataPromise:l,approxItemHeight:c},o));return null}},{key:"formatPermissionSettings",value:function e(){var t=this.props.featureDefaultSharedChannels;var r=void 0;var a=void 0;var n=void 0;if(t){r=_r.t("Org Admins/Owners");a=_r.t("Org Admins and Owners, plus select members");n="org_admin"}else{r=_r.t("Org Admins/Owners and Workspace Admins/Owners");a=_r.t("Org and Workspace Admin/Owner, selected members");n="admin"}return[{permissionType:"ra",label:_r.t("Everyone"),hideWhenOrgDefault:true},{permissionType:"regular",label:_r.t("Everyone, except guests"),hideWhenOrgDefault:true},{permissionType:n,label:r},{permissionType:"multi",label:a}]}},{key:"renderRadios",value:function e(){var t=this.props,r=t.isOrgDefault,a=t.onChangeRadio,i=t.whoCanPost;var s="owner"===i?"multi":i;!r||"ra"!==s&&"regular"!==s||(s="admin");var o=O.a.map(this.formatPermissionSettings(),function(e){if(r&&e.hideWhenOrgDefault)return null;var t=e.permissionType===s;return n.a.createElement("div",{key:e.permissionType},n.a.createElement(J["a"],{htmlFor:"who_can_post_"+e.permissionType,type:"inline",cursor:"pointer",className:"p-channel_options--radio_label",text:e.label},n.a.createElement(rt["a"],{name:"who_can_post",value:e.permissionType,onChange:a,id:"who_can_post_"+e.permissionType,checked:t})))});return o}},{key:"render",value:function e(){var t=this.props.postingPermissionsLoaded;if(!t)return n.a.createElement("div",{className:"p-channel_options--option_spinner"},n.a.createElement(pe["a"],{size:"jumbo"}));var r=_r.t("Who can post in this channel?");return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,r),this.renderRadios(),this.maybeRenderMemberPicker(),this.maybeRenderCheckbox())}}]);return t}(a["PureComponent"]);Or.displayName="PostingPermissions";Or.defaultProps=kr;var Er=Object(sr["a"])("feature_default_shared_channels")(Or);var wr=r(103);var Cr=new F["b"]("channel_options");var Sr={canThread:y["b"].bool,onErrorDialogButtonClick:y["b"].func.isRequired,channelPrefError:y["b"].bool,whoCanPost:y["b"].string,featureDefaultSharedChannels:y["b"].bool.isRequired,openModal:y["b"].func};var jr={canThread:false,whoCanPost:"",channelPrefError:false,openModal:O.a.noop};var Ir=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"componentDidUpdate",value:function e(t){var r=this.props.channelPrefError;!t.channelPrefError&&r&&this.props.openModal({element:this.renderError()})}},{key:"maybeRenderCanThreadLabel",value:function e(){var t=this.props.canThread;var r=Cr.rt("Additionally, <strong>anyone in this channel</strong> will be able to add threaded replies to messages in this channel.");if(t)return n.a.createElement("p",null,r);return null}},{key:"renderError",value:function e(){var t=this.props.onErrorDialogButtonClick;var r=Cr.t("OK");var a=Cr.t("For some weird reason, that didn\u2019t work. Please try again.");var i=Cr.t("Could not update settings");return n.a.createElement("div",null,n.a.createElement(wr["a"],{goButtonText:r,showCancelButton:false,onGo:t,onCancel:t,title:i},n.a.createElement("p",null,a)))}},{key:"renderWhoCanPostLabel",value:function e(){var t=void 0;t=this.props.featureDefaultSharedChannels?{ra:Cr.t("Everyone"),regular:Cr.t("Everyone, except guests"),org_admin:Cr.t("Only Org Admins and Owners"),multi:Cr.t("Only Org Admins and Owners, plus select members")}:{ra:Cr.t("Everyone"),regular:Cr.t("Everyone, except guests"),admin:Cr.t("Only Org Admins and Owners, and Workspace Admins and Owners"),multi:Cr.t("Org Admins and Owners, Workspace Admins and Owners, plus selected members")};var r=this.props.whoCanPost;var a=Cr.rt("<strong>{text}</strong> will be able to post",{text:O.a.get(t,r)});return n.a.createElement("p",null,a)}},{key:"render",value:function e(){var t=Cr.t("Please note that these changes may take some time to complete.");return n.a.createElement("div",{className:"p-channel-options--content_text"},this.renderWhoCanPostLabel(),this.maybeRenderCanThreadLabel(),t)}}]);return t}(a["PureComponent"]);Ir.displayName="PostingPermissionsReview";Ir.defaultProps=jr;var Tr={openModal:w["openModal"]};var Nr=Object(o["connect"])(null,Tr)(Ir);var Ar=new F["b"]("channel_options");var Rr={additionalVerificationError:y["b"].oneOfType([y["b"].string,y["b"].object]),additionalVerificationGood:y["b"].bool,channelNameNeedsChecking:y["b"].bool,channel:y["b"].object.isRequired,isCheckingAdditionalVerification:y["b"].bool,name:y["b"].string,onInvalidName:y["b"].func,onValidName:y["b"].func};var Mr={additionalVerificationError:"",additionalVerificationGood:false,channelNameNeedsChecking:false,isCheckingAdditionalVerification:false,name:"",onInvalidName:k["noop"],onValidName:k["noop"]};var Pr=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.title=r.props.name;"#"===r.title[0]&&(r.title=r.title.substr(1));return r}f()(t,[{key:"render",value:function e(){var t=this.props,r=t.additionalVerificationError,a=t.additionalVerificationGood,i=t.channelNameNeedsChecking,s=t.channel,o=t.isCheckingAdditionalVerification,l=t.name,c=t.onInvalidName,u=t.onValidName;return n.a.createElement("div",{className:"top_margin"},n.a.createElement("label",{htmlFor:"channel_create_title",className:"c-label"},n.a.createElement("span",{className:"c-label__text"},Ar.t("Name"))),n.a.createElement(we,{additionalVerificationError:r,additionalVerificationGood:a,channel:s,nameNeedsChecking:i,id:"channel_create_title",isCheckingAdditionalVerification:o,onInvalid:c,onValid:u,placeholder:Ar.t("Rename {title}",{title:l}),shouldFix:true,value:this.title}))}}]);return t}(a["PureComponent"]);Pr.displayName="RenameChannel";Pr.defaultProps=Mr;var xr=Pr;var Dr={channel:y["b"].object.isRequired,channelName:y["b"].string,strong:y["b"].bool};var Fr={channel:{},channelName:"",strong:false};var Lr=function e(t){var r=t.channel,a=t.strong;var i=t.channelName||Object(M["getDisplayName"])(r);var s=null;if(Object(M["isPublicChannel"])(r)||Object(M["isPrivateChannel"])(r)){var o=$()({"c-icon--align-hashmark":!Object(M["isPrivateChannel"])(r)});s=n.a.createElement(ee["a"],{className:o,align:"baseline",inherit:true,type:Object(M["isPrivateChannel"])(r)?"lock":"channel"})}var l=null;Object(M["isOrgSharedPublicOrPrivateChannel"])(r)?l=n.a.createElement(ee["a"],{align:"baseline",inherit:true,type:"shared_channel"}):Object(M["isPendingExternallySharedChannel"])(r)?l=n.a.createElement(ee["a"],{align:"baseline",inherit:true,type:"shared_channels_pending"}):Object(M["isSharedPublicOrPrivateChannel"])(r)&&(l=n.a.createElement(ee["a"],{align:"baseline",inherit:true,type:"shared_channels"}));var c=$()({bold:a});return n.a.createElement("span",{className:c},s,i,l)};Lr.displayName="FormattedChannelName";Lr.defaultProps=Fr;var Br=Lr;var Ur=new F["b"]("shared_channels");var qr={channel:y["b"].object.isRequired,team:y["b"].object.isRequired,externalTeams:y["b"].array.isRequired,showLastChannelWarning:y["b"].bool,clogger:y["b"].object.isRequired};var Gr={channel:{},team:{},externalTeams:[],showLastChannelWarning:false,clogger:{}};var Hr=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.maybeRenderLastChannelWarning=r.maybeRenderLastChannelWarning.bind(r);return r}f()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.clogger,a=t.showLastChannelWarning;r.track("SHARED_CHANNELS_STOP_SHARING_MODAL_OPEN",{is_last_channel_with_team:a,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_CHANNEL_OPTIONS_STOP_SHARING_OPTION",ui_component:"CHANNEL_OPTIONS_DIALOG"}}})}},{key:"maybeRenderLastChannelWarning",value:function e(){if(!this.props.showLastChannelWarning)return null;var t=this.props.externalTeams.map(function(e){var t=e.name;return t});var r=Object(F["g"])(t,{react:true,strong:true});return n.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_error margin_bottom_150"},n.a.createElement("div",{className:"c-alert__message"},n.a.createElement("strong",null,Ur.rt("This is your only shared channel with {teamNames}",{teamNames:r})),n.a.createElement("br",null),Ur.t("If you stop sharing this channel, you won\u2019t be able to direct message members of their workspace.")))}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.team,i=t.externalTeams;var s=i.map(function(e){return Object(D["getTeamDisplayName"])(e)});var o=Object(F["g"])(s,{react:true,strong:true});var l=Object(F["g"])([Object(D["getTeamDisplayName"])(a)].concat(qt()(s)),{react:true,strong:true});return n.a.createElement("div",null,this.maybeRenderLastChannelWarning(),n.a.createElement("p",{className:"p-channel-options--content_text"},Ur.t("You can stop sharing this channel at any time. Here\u2019s what will happen:")),n.a.createElement("ul",{className:"p-channel-options--content_text"},n.a.createElement("li",null,Ur.rt("{teamNames} will keep separate copies of this channel.",{teamNames:l})),n.a.createElement("li",null,Ur.t("Each workspace can continue using their copy.")),n.a.createElement("li",null,Ur.t("Neither workspace will be able to re-share this channel."))),n.a.createElement("p",{className:"p-channel-options--content_text"},Ur.rt("Are you sure you want to stop sharing {channelName} with {teamNames}?",{channelName:n.a.createElement(Br,{channel:r,strong:true}),teamNames:o})))}}]);return t}(a["PureComponent"]);Hr.displayName="StopSharingChannel";Hr.defaultProps=Gr;function Wr(e,t){var r=t.channel;return{team:Object(A["getCurrentTeam"])(e),externalTeams:Object(M["getSharedTeamIds"])(r).map(function(t){return Object(A["getTeamById"])(e,t)}),clogger:Object(B["a"])({state:e})}}var Vr=Object(o["connect"])(Wr)(Hr);function zr(e){var t="";e&&(t="type:all");return t}function Qr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var a="";if("multi"===e){a=r?"type:org_admin":"type:admin";t&&t.length&&t.forEach(function(e){a+=",user:"+e})}else a="type:"+e;return a}var Kr=new F["b"]("channel_options");var Yr=new F["b"]("client");var Jr=new F["b"]("ui_validation");var Zr={0:"all_options",1:"archive",2:"share_external",3:"stop_sharing_external",4:"convert_private",5:"rename",6:"export",7:"delete",8:"purpose",9:"retention",10:"posting_privilege",11:"posting_privilege_review",12:"manage_org_access",13:"manage_org_access_name_conflict",14:"manage_org_access_review"};var Xr={additionalParams:y["b"].object,archiveChannelApi:y["b"].func.isRequired,cancelExternalSharedChannelInviteApi:y["b"].func.isRequired,callEnterpriseNameTaken:y["b"].func.isRequired,channel:y["b"].object,submitChannelPurpose:y["b"].func.isRequired,channelRetentionDuration:y["b"].number,channelRetentionType:y["b"].number,convertToOrgShared:y["b"].func.isRequired,convertChannelToPrivateApi:y["b"].func.isRequired,currentMember:y["b"].object,currentTeam:y["b"].object,disableConvertToPrivate:y["b"].bool,disableRename:y["b"].bool,disconnectChannel:y["b"].func.isRequired,dmRetentionDuration:y["b"].number,dmRetentionType:y["b"].number,externalSharedTeams:y["b"].array,getChannelOrgOriginatingTeam:y["b"].func.isRequired,getExternalTeamIdsConnectedOnlyByChannel:y["b"].func.isRequired,groupRetentionDuration:y["b"].number,groupRetentionType:y["b"].number,onCancel:y["b"].func.isRequired,orgName:y["b"].string,pendingSharedExternalSharedTeamNames:y["b"].array,preselectedSection:y["b"].string,renameChannelApi:y["b"].func.isRequired,showArchive:y["b"].bool.isRequired,showConvertToPrivate:y["b"].bool.isRequired,showDataRetention:y["b"].bool.isRequired,showDelete:y["b"].bool.isRequired,showExport:y["b"].bool.isRequired,showManageOrgAccess:y["b"].bool.isRequired,showPostingPermissions:y["b"].bool.isRequired,showPurpose:y["b"].bool.isRequired,showRename:y["b"].bool.isRequired,showShareExternal:y["b"].bool.isRequired,showStopShareExternal:y["b"].bool.isRequired,teamId:y["b"].string,featureDefaultSharedChannels:y["b"].bool.isRequired,updateOrgAccessForChannel:y["b"].func.isRequired,exportChannelHistory:y["b"].func.isRequired,setChannelDeleted:y["b"].func.isRequired,getChannelPref:y["b"].func.isRequired,setChannelPrefs:y["b"].func.isRequired,setChannelPurpose:y["b"].func.isRequired,openModal:y["b"].func,getDataRetention:y["b"].func,setDataRetention:y["b"].func,getExternalSharedChannelInviteDetails:y["b"].func,featureDegradedSend:y["b"].bool,clogger:y["b"].object.isRequired};var $r={additionalParams:{},channel:{},channelRetentionDuration:0,channelRetentionType:0,currentMember:{},currentTeam:{},disableConvertToPrivate:false,disableRename:false,dmRetentionDuration:0,dmRetentionType:0,externalSharedTeams:[],groupRetentionDuration:0,groupRetentionType:0,orgName:"",pendingSharedExternalSharedTeamNames:[],preselectedSection:"",teamId:"",openModal:k["noop"],getDataRetention:k["noop"],setDataRetention:k["noop"],getExternalSharedChannelInviteDetails:k["noop"],featureDegradedSend:false,clogger:{}};var ea={children:n.a.createElement("div",null),title:"",qa:"filler"};var ta=0;var ra=1;var aa=1;var na=0;var ia=2;var sa=0;var oa=function e(t){var r=Object(k["invert"])(Zr);return+r[t]};var la=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.channelNameOnInvalidName=r.channelNameOnInvalidName.bind(r);r.channelNameOnValidName=r.channelNameOnValidName.bind(r);r.channelNameOrgValidation=r.channelNameOrgValidation.bind(r);r.closeAlertDialog=r.closeAlertDialog.bind(r);r.closeModal=r.closeModal.bind(r);r.getChannelRetentionPrefs=r.getChannelRetentionPrefs.bind(r);r.getPostingPermissionPrefs=r.getPostingPermissionPrefs.bind(r);r.goBackToAllOptions=r.goBackToAllOptions.bind(r);r.goBackToManageAccessPrevStep=r.goBackToManageAccessPrevStep.bind(r);r.goToStep=r.goToStep.bind(r);r.manageOrgAccessSave=r.manageOrgAccessSave.bind(r);r.onChangeCheckboxCanThread=r.onChangeCheckboxCanThread.bind(r);r.onChangeCheckboxDelete=r.onChangeCheckboxDelete.bind(r);r.onChangeManageOrgAccessShareWith=r.onChangeManageOrgAccessShareWith.bind(r);r.onChangeManageOrgAccessTeamPicker=r.onChangeManageOrgAccessTeamPicker.bind(r);r.onChangeRadioWhoCanPost=r.onChangeRadioWhoCanPost.bind(r);r.onChangeValueSelectedMembers=r.onChangeValueSelectedMembers.bind(r);r.onChannelPurposeTextareaChange=r.onChannelPurposeTextareaChange.bind(r);r.onChannelPurposeValidationChange=r.onChannelPurposeValidationChange.bind(r);r.onClickArchiveInsteadDelete=r.onClickArchiveInsteadDelete.bind(r);r.onClickArchiveOption=r.onClickArchiveOption.bind(r);r.onClickConvertToPrivateOption=r.onClickConvertToPrivateOption.bind(r);r.onClickDataRetentionOption=r.onClickDataRetentionOption.bind(r);r.onClickDeleteOption=r.onClickDeleteOption.bind(r);r.onClickExportOption=r.onClickExportOption.bind(r);r.onClickManageOrgAccessOption=r.onClickManageOrgAccessOption.bind(r);r.onClickPostingPermissionsOption=r.onClickPostingPermissionsOption.bind(r);r.onClickPurposeOption=r.onClickPurposeOption.bind(r);r.onClickRenameOption=r.onClickRenameOption.bind(r);r.onClickShareExternalOption=r.onClickShareExternalOption.bind(r);r.onClickCancelExternalSharedChannelInvite=r.onClickCancelExternalSharedChannelInvite.bind(r);r.onClickStopShareExternalOption=r.onClickStopShareExternalOption.bind(r);r.onErrorDialogButtonClick=r.onErrorDialogButtonClick.bind(r);r.onRetentionDurationChange=r.onRetentionDurationChange.bind(r);r.onRetentionDurationUnitChange=r.onRetentionDurationUnitChange.bind(r);r.onRetentionTypeChange=r.onRetentionTypeChange.bind(r);r.setManageOrgAccessLoaded=r.setManageOrgAccessLoaded.bind(r);r.setPostingPermissionsLoaded=r.setPostingPermissionsLoaded.bind(r);r.setPostingPermissionsSelectedMembers=r.setPostingPermissionsSelectedMembers.bind(r);r.setRetentionLoaded=r.setRetentionLoaded.bind(r);r.showAlertDialog=r.showAlertDialog.bind(r);r.showSuccessAlert=r.showSuccessAlert.bind(r);r.maybeDisableRetentionGoButton=r.maybeDisableRetentionGoButton.bind(r);r.saveRetention=r.saveRetention.bind(r);r.showRetentionDialog=r.showRetentionDialog.bind(r);r.hideRetentionDialog=r.hideRetentionDialog.bind(r);r.handleRetentionCheckboxChange=r.handleRetentionCheckboxChange.bind(r);r.durationInputRef=r.durationInputRef.bind(r);var a=r.props,n=a.channel,i=a.currentTeam;var s=[];var o=[];var l="";if(Object(M["isOrgSharedPublicOrPrivateChannel"])(n))Object(M["isOrgGlobalSharedPublicOrPrivateChannel"])(n)||(s=Object(M["getSharedTeamIds"])(n));else{o=[i.id];l=i.id}r.state={canThread:false,channelNameAdditionalVerificationError:"",channelNameNeedsChecking:false,channelNameOrgIsCheckingVerification:false,channelNameValid:false,channelPrefError:false,channelToBeShared:false,goButtonIsDisabled:false,goButtonIsPending:false,isOnlyChannelWithExternalTeam:false,manageOrgAccessDisabledTeamIds:o,manageOrgAccessLoaded:false,manageOrgAccessOriginatingTeamId:l,manageOrgAccessPreviousStep:"manage_org_access",manageOrgAccessShareWith:Object(M["isOrgGlobalSharedPublicOrPrivateChannel"])(r.props.channel)?"all":"specific",manageOrgAccessTeamIds:s,newChannelName:null,postingPermissionsLoaded:false,postingPermissionsSelectedMembers:null,retentionDuration:0,retentionDurationUnit:0,retentionLoaded:false,retentionType:0,isRetentionCheckboxChecked:false,showBackButton:false,showCancelButton:false,showGoButton:false,showSuccessAlert:false,successAlertHeading:"",successAlertText:"",teamRetentionDuration:0,teamRetentionType:0,whoCanPost:null};r.debouncedChannelNameOrgValidation=Object(k["debounce"])(r.actuallyCallChannelNameOrgValidation,325,{trailing:true});r.modalRef=null;r.steps=[];r.pendingChannelNameOrgValidation=null;return r}f()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.preselectedSection,a=t.showArchive,n=t.showConvertToPrivate,i=t.showDataRetention,s=t.showDelete,o=t.showExport,l=t.showManageOrgAccess,c=t.showPostingPermissions,u=t.showPurpose,d=t.showRename;this.maybeCheckIfLastChannelWithExternalTeam();if(r.length)switch(r){case"archive":a&&this.onClickArchiveOption();break;case"convert_private":n&&this.onClickConvertToPrivateOption();break;case"convert_shared":case"manage_teams":l&&this.onClickManageOrgAccessOption();break;case"delete":s&&this.onClickDeleteOption();break;case"export":o&&this.onClickExportOption();break;case"posting_privilege":c&&this.onClickPostingPermissionsOption();break;case"purpose":u&&this.onClickPurposeOption();break;case"rename":d&&this.onClickRenameOption();break;case"retention":i&&this.onClickDataRetentionOption();break;default:break}}},{key:"componentDidUpdate",value:function e(t,r){var a=this.state.isRetentionCheckboxChecked;this.retentionDialog&&a!==r.isRetentionCheckboxChecked&&this.retentionDialog.render({goButtonIsDisabled:!a,goOnEnterPressed:a})}},{key:"onClickArchiveOption",value:function e(){this.goButtonIsDisabled(false);this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("archive")}},{key:"onClickShareExternalOption",value:function e(){Object(R["c"])({model_ob:this.props.channel,element:"shared_channels_channel_options_share_option"});this.closeModal()}},{key:"onClickCancelExternalSharedChannelInvite",value:function e(t){var r=this;var a=this.props,n=a.channel,i=a.currentMember,s=a.pendingSharedExternalSharedTeamNames;this.props.getExternalSharedChannelInviteDetails({channelId:n.id,targetTeamId:t}).then(function(e){var a=s[0];var o=e.invite.inviting_user;var l=Yr.t("Oops, something went wrong.");var c=Kr.t("For some weird reason, that didn\u2019t work. Please try again.");if(o.id===i.id)r.props.cancelExternalSharedChannelInviteApi({channelId:n.id,targetTeamId:t}).then(function(){r.showSuccessAlert({heading:Kr.t("Canceled invitation"),text:Kr.rt("If you\u2019d like, you can always reinvite <strong>{targetTeamName}</strong> (or another workspace).",{targetTeamName:a})})}).catch(function(e){r.showAlertDialog({message:c,title:l});throw e});else{var u=Kr.t("Cancel invitation?");var d=Kr.rt("This invitation was originally sent by <strong>{inviterName}</strong> to <strong>{targetTeamName}</strong>. Are you sure you want to cancel?",{inviterName:o.profile.real_name,targetTeamName:a});var p=function e(){return r.props.cancelExternalSharedChannelInviteApi({channelId:n.id,targetTeamId:t}).then(function(){r.closeAlertDialog();r.showSuccessAlert({heading:Kr.t("Canceled invitation"),text:Kr.rt("If you\u2019d like, you can always reinvite <strong>{targetTeamName}</strong> (or another workspace).",{targetTeamName:a})})}).catch(function(e){r.showAlertDialog({message:c,title:l});throw e})};r.showAlertDialog({cancelButtonText:Kr.t("Never Mind"),goButtonText:Kr.t("Cancel Invitation"),goButtonType:"danger",message:d,onGo:p,onCancel:r.closeAlertDialog,showCancelButton:true,title:u})}})}},{key:"onClickStopShareExternalOption",value:function e(){if(H()){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("stop_sharing_external")}else{W(this.props.channel);this.closeModal()}}},{key:"onClickConvertToPrivateOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("convert_private")}},{key:"onClickRenameOption",value:function e(){var t=this;this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.hideSuccessAlert();var r=true;if(this.props.additionalParams.name&&this.props.additionalParams.name.length){r=false;this.setState(function(){return{newChannelName:t.props.additionalParams.name,channelNameNeedsChecking:true}})}this.goButtonIsDisabled(r);this.showGoButton(true);this.goToStep("rename")}},{key:"onClickExportOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("export")}},{key:"onClickDeleteOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.goButtonIsDisabled(true);this.hideSuccessAlert();this.goToStep("delete")}},{key:"onClickPurposeOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("purpose")}},{key:"onClickDataRetentionOption",value:function e(){this.goButtonIsPending(false);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("retention");this.getChannelRetentionPrefs()}},{key:"onClickPostingPermissionsOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.hideSuccessAlert();this.goToStep("posting_privilege");this.getPostingPermissionPrefs()}},{key:"onClickManageOrgAccessOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.hideSuccessAlert();this.goToStep("manage_org_access");this.maybeGetOriginatingTeamAndCurrentAccess();this.setState(function(){return{channelToBeShared:true}})}},{key:"onRetentionTypeChange",value:function e(t){var r=this;var a=parseInt(t.target.value,10);this.setState(function(){return{retentionType:a}},function(){r.maybeDisableRetentionGoButton();a===ra&&r.retentionDurationInput.focus()})}},{key:"onRetentionDurationChange",value:function e(t){this.setState(function(){return{retentionDuration:parseInt(t,10)}},this.maybeDisableRetentionGoButton)}},{key:"onRetentionDurationUnitChange",value:function e(t){this.setState(function(){return{retentionDurationUnit:t}},this.maybeDisableRetentionGoButton)}},{key:"onChangeManageOrgAccessShareWith",value:function e(t){var r=t.target.value;this.setState(function(){return{manageOrgAccessShareWith:r}})}},{key:"onChangeManageOrgAccessTeamPicker",value:function e(t){var r=[];this.goButtonIsDisabled(!t.length);if(t.length){t.forEach(function(e){r.push(e.team.id)});this.setState(function(){return{manageOrgAccessTeamIds:r}})}}},{key:"onChangeCheckboxDelete",value:function e(t){var r=t.target.checked;this.goButtonIsDisabled(!r)}},{key:"onClickArchiveInsteadDelete",value:function e(t){t.preventDefault();this.onClickArchiveOption()}},{key:"onChannelPurposeTextareaChange",value:function e(t){this.newChannelPurpose(t.target.value)}},{key:"onChannelPurposeValidationChange",value:function e(t){this.goButtonIsDisabled(t)}},{key:"onChangeCheckboxCanThread",value:function e(t){var r=t.target.checked;this.setCanThreadPermission(r)}},{key:"onChangeRadioWhoCanPost",value:function e(t){var r=t.target.value;this.setWhoCanPostPermission(r)}},{key:"onChangeValueSelectedMembers",value:function e(t){var r=[];t.forEach(function(e){e.member&&r.push(e.member.id)});this.setPostingPermissionsSelectedMembers(r)}},{key:"onErrorDialogButtonClick",value:function e(){this.setChannelPrefError(false)}},{key:"getChannelRetentionPrefs",value:function e(){var t=this;var r=this.props,a=r.channel,n=r.groupRetentionType,i=r.groupRetentionDuration,s=r.dmRetentionType,o=r.dmRetentionDuration,l=r.channelRetentionType,c=r.channelRetentionDuration;this.props.getDataRetention(a).then(function(e){var r=void 0;var u=void 0;if(Object(M["isPrivateChannel"])(a)){r=parseInt(n,10);u=parseInt(i,10)}else if(Object(M["isIm"])(a)||Object(M["isMpim"])(a)){r=parseInt(s,10);u=parseInt(o,10)}else{r=parseInt(l,10);u=parseInt(c,10)}var d=parseInt(e.retentionType,10);var p=parseInt(e.retentionDuration,10);t.setState(function(){return{retentionDuration:p,retentionType:d,teamRetentionDuration:u,teamRetentionType:r}});t.setRetentionLoaded(true)})}},{key:"setRetentionLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{retentionLoaded:t}})}},{key:"getPostingPermissionPrefs",value:function e(){var t=this;var r=this.props,a=r.channel,n=r.featureDefaultSharedChannels;var i=[this.props.getChannelPref({channelId:a.id,prefName:"who_can_post"})];n&&i.push(this.props.getChannelPref({channelId:a.id,prefName:"can_thread"}));Promise.all(i).then(function(e){var r=e[0];if(!r.ok||!r.pref_value)return;var a=r.pref_value;if(a.type)if(a.user&&a.user.length&&("admin"===a.type[0]||"owner"===a.type[0]||"org_admin"===a.type[0])){t.setWhoCanPostPermission("multi");t.setPostingPermissionsSelectedMembers(a.user)}else t.setWhoCanPostPermission(a.type[0]);else t.setWhoCanPostPermission("ra");if(n){var i=e[1];if(!i.ok||!i.pref_value)return;var s=i.pref_value;s.type?t.setCanThreadPermission("all"===s.type[0]):t.setCanThreadPermission(false)}t.setPostingPermissionsLoaded(true);t.showCancelButton(true);t.showGoButton(true)})}},{key:"setCanThreadPermission",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{canThread:t}})}},{key:"setPostingPermissionsLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{postingPermissionsLoaded:t}})}},{key:"setWhoCanPostPermission",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState(function(){return{whoCanPost:t}})}},{key:"setChannelPrefError",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{channelPrefError:t}})}},{key:"setPostingPermissionsSelectedMembers",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState(function(){return{postingPermissionsSelectedMembers:t}})}},{key:"setManageOrgAccessLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{manageOrgAccessLoaded:t}})}},{key:"maybeDisableRetentionGoButton",value:function e(){var t=this.state,r=t.retentionType,a=t.retentionDuration,n=t.retentionDurationUnit;var i=n===sa?a:365*a;this.goButtonIsDisabled(!st({retentionType:r,retentionDuration:i}))}},{key:"goToStep",value:function e(t){var r=oa(t);if(r){this.modalRef.setStepNumber(r+1);return}this.modalRef.setStepNumber(1)}},{key:"maybeGetOriginatingTeamAndCurrentAccess",value:function e(){var t=this;var r=this.props.channel;var a=this.state,n=a.manageOrgAccessDisabledTeamIds,i=a.manageOrgAccessLoaded,s=a.manageOrgAccessTeamIds;if(i){this.showCancelButton(true);this.showGoButton(true);return}var o=[];Object(M["isOrgSharedPublicOrPrivateChannel"])(r)&&o.push(this.props.getChannelOrgOriginatingTeam(r.id));Promise.all(o).then(function(e){var a=s;var i=n;var o=t.state.manageOrgAccessOriginatingTeamId;if(Object(M["isOrgSharedPublicOrPrivateChannel"])(r)){o=e[0].team.id;i=[o]}a=Object(k["uniq"])(t.state.manageOrgAccessTeamIds.concat(o));t.setState(function(){return{manageOrgAccessDisabledTeamIds:i,manageOrgAccessOriginatingTeamId:o,manageOrgAccessTeamIds:a}});t.manageOrgAccessFilterFunction=G({preselected_ids:a,disabled_ids:i,sort_items_function:function e(t,r){var a=t.name.toLowerCase();var n=r.name.toLowerCase();if(a<n)return-1;if(n<a)return 1;return 0},secondary_sort_items_function:function e(t,r){if(t.id===o)return-1;if(r.id===o)return 1;return 0}});t.manageOrgAccessFilterFunction("").then(function(){t.showCancelButton(true);t.showGoButton(true);t.setManageOrgAccessLoaded(true)})}).catch(function(e){var r=Yr.t("Oops, something went wrong.");var a=Kr.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});throw e})}},{key:"maybeCheckIfLastChannelWithExternalTeam",value:function e(){var t=this;var r=this.props.channel;var a="channel-options/maybeCheckIfLastChannelWithExternalTeam";Object(M["isSharedPublicOrPrivateChannel"])(r)&&H()&&this.props.getExternalTeamIdsConnectedOnlyByChannel({channelId:r.id,reason:a}).then(function(e){t.setState(function(){return{isOnlyChannelWithExternalTeam:!!e.length}})})}},{key:"closeModal",value:function e(){this.alertDialog&&this.alertDialog.close();this.retentionDialog&&this.retentionDialog.close();this.props.onCancel()}},{key:"goBackToAllOptions",value:function e(){this.goButtonIsPending(false);this.showBackButton(false);this.showCancelButton(false);this.showGoButton(false);this.goButtonIsDisabled(false);this.goToStep("all_options")}},{key:"goButtonIsDisabled",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{goButtonIsDisabled:t}})}},{key:"goButtonIsPending",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{goButtonIsPending:t}})}},{key:"showBackButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showBackButton:t}})}},{key:"showCancelButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showCancelButton:t}})}},{key:"showGoButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showGoButton:t}})}},{key:"newChannelPurpose",value:function e(t){this.setState(function(){return{newChannelPurpose:t}})}},{key:"actuallyCallChannelNameOrgValidation",value:function e(t){var r=this;var a=this.props.channel;if(Object(M["getDisplayName"])(a)===t){this.setState(function(){return{channelNameAdditionalVerificationError:"",channelNameOrgIsCheckingVerification:false,channelNameValid:false}});this.goButtonIsDisabled(true);return}this.pendingChannelNameOrgValidation=this.props.callEnterpriseNameTaken({channel:a,newChannelName:t});this.pendingChannelNameOrgValidation.then(function(e){var i=r.props,s=i.currentTeam,o=i.orgName;var l=void 0;var c="";if(!e.ok||e.name_taken){l=false;c=r.state.channelToBeShared?Kr.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name to share this channel outside of <span>{teamName}</span>.",{name:t,orgName:o,teamName:Object(D["getTeamDisplayName"])(s)},function(e){var r=e.key,i=e.tag,s=e.text;if("strong"===i)return n.a.createElement("strong",{key:r+"-1"},re(r,a,t));return n.a.createElement("strong",{key:r},s)}):Kr.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name.",{name:t,orgName:o,teamName:Object(D["getTeamDisplayName"])(s)},function(e){var r=e.key,i=e.tag,s=e.text;if("strong"===i)return n.a.createElement("strong",{key:r+"-1"},re(r,a,t));return n.a.createElement("strong",{key:r},s)})}else l=true;r.goButtonIsDisabled(!l);r.setState(function(){return{channelNameAdditionalVerificationError:c,channelNameOrgIsCheckingVerification:false,channelNameValid:l}})}).catch(function(e){r.setState(function(){return{channelNameAdditionalVerificationError:"",channelNameOrgIsCheckingVerification:false,channelNameValid:false}});r.goButtonIsDisabled(true);var t=Yr.t("Oops, something went wrong.");var a=Kr.t("For some weird reason, that didn\u2019t work. Please try again.");r.showAlertDialog({message:a,title:t});throw e})}},{key:"channelNameOrgValidation",value:function e(t){this.setState(function(){return{channelNameOrgIsCheckingVerification:true}});this.pendingChannelNameOrgValidation&&this.pendingChannelNameOrgValidation.cancel();this.debouncedChannelNameOrgValidation(t)}},{key:"channelNameOnInvalidName",value:function e(){this.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:"",channelNameNeedsChecking:false}});this.goButtonIsDisabled(true)}},{key:"channelNameOnValidName",value:function e(t){var r=t.value;var a=this.props.channel;var n=this.state.channelToBeShared;this.setState(function(){return{channelNameAdditionalVerificationError:"",newChannelName:r,channelNameNeedsChecking:false}});Object(M["isOrgSharedPublicOrPrivateChannel"])(a)||n?this.channelNameOrgValidation(r):this.goButtonIsDisabled(false)}},{key:"manageOrgAccessSave",value:function e(){var t=this;this.goButtonIsPending(true);var r=this.props,a=r.channel,n=r.teamId;var i=this.state,s=i.manageOrgAccessShareWith,o=i.manageOrgAccessTeamIds;var l="all"===s;var u={orgWide:l};if(Object(M["isOrgSharedPublicOrPrivateChannel"])(a)){l||(u.teamIds=o);this.props.updateOrgAccessForChannel(d()({channelId:a.id},u)).then(function(){t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var r=Kr.t("Could not update settings");var a=Kr.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});throw e})}else{l||(u.targetDomains=o.map(function(e){var t=Object(c["c"])(n);var r=Object(A["getTeamById"])(t,e);return r.domain}));var p=[];this.makeChannelName()!==Object(M["getDisplayName"])(a)&&p.push(this.props.renameChannelApi({channel:a,newName:this.state.newChannelName}));Promise.all(p).then(function(){return t.props.convertToOrgShared(d()({channel:a},u))}).then(function(){t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var r=Kr.t("Could not update settings");var a=Kr.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});throw e})}}},{key:"makeChannelName",value:function e(){var t=this.props.channel;var r=this.state.newChannelName;return r&&r.length?r:Object(M["getDisplayName"])(t)}},{key:"showAlertDialog",value:function e(t){var r=t.title,a=t.message,i=t.cancelButtonText,s=void 0===i?"":i,o=t.goButtonText,l=void 0===o?"":o,c=t.goButtonType,u=void 0===c?"primary":c,p=t.onGo,m=void 0===p?k["noop"]:p,h=t.onCancel,f=void 0===h?k["noop"]:h,v=t.onClose,b=void 0===v?this.closeAlertDialog:v,g=t.showCancelButton,_=void 0!==g&&g;var y={cancelButtonText:s,children:n.a.createElement("p",null,a),goButtonText:l,goButtonType:u,onCancel:f,onClose:b,onGo:m,showCancelButton:_,title:r};this.alertDialog?this.alertDialog.render(d()({},y)):this.alertDialog=this.props.openModal({element:n.a.createElement(V["a"],y),isStackable:true})}},{key:"closeAlertDialog",value:function e(){this.setState(function(){return{goButtonIsPending:false}});this.alertDialog=null}},{key:"showSuccessAlert",value:function e(t){var r=t.heading,a=t.text;this.setState(function(){return{showSuccessAlert:true,successAlertHeading:r,successAlertText:a}})}},{key:"hideSuccessAlert",value:function e(){this.setState(function(){return{showSuccessAlert:false}})}},{key:"goBackToManageAccessPrevStep",value:function e(){this.goToStep(this.state.manageOrgAccessPreviousStep)}},{key:"saveRetention",value:function e(){var t=this;var r=this.state,a=r.retentionType,n=r.retentionDuration,i=r.retentionDurationUnit;var s=this.props.channel;this.goButtonIsPending(true);this.props.setDataRetention({channel:s,retentionDuration:ot({retentionDuration:n,retentionDurationUnit:i}),retentionType:a}).then(function(e){t.goButtonIsPending(false);if(!e.ok){var r=Yr.t("Oops, something went wrong.");var a=Kr.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});return}t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var r=Yr.t("Oops, something went wrong.");var a=Kr.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});throw e})}},{key:"showRetentionDialog",value:function e(){this.retentionDialog=this.props.openModal({element:this.renderRetentionDialog(),isStackable:true})}},{key:"hideRetentionDialog",value:function e(){this.setState(function(){return{isRetentionCheckboxChecked:false}})}},{key:"handleRetentionCheckboxChange",value:function e(){this.setState(function(e){return{isRetentionCheckboxChecked:!e.isRetentionCheckboxChecked}})}},{key:"durationInputRef",value:function e(t){this.retentionDurationInput=t}},{key:"renderRetentionDialog",value:function e(){var t=this.state,r=t.retentionType,a=t.retentionDuration,i=t.retentionDurationUnit,s=t.teamRetentionType,o=t.teamRetentionDuration;var l=this.props.channel;var c=ot({retentionDuration:a,retentionDurationUnit:i});var u=void 0;switch(r){case ta:switch(s){case aa:u=Kr.t("Use the default workspace retention settings \u2014 Keep everything");break;case na:u=Kr.t("Use the default workspace retention settings \u2014 Keep messages, but don\u2019t track revisions");break;case ia:u=Kr.t("Use the default workspace retention settings \u2014 Messages older than {duration, plural, =1 {# day} other {# days}} will be deleted.",{duration:o,fallbackHash:"7480a828b3b52106d6407a4e8f29e489ed887722"});break;default:u=Kr.t("Use the default workspace retention settings \u2014 Keep everything");break}break;case ra:if(c>364){var d=Object(k["round"])(c/365,1);u=Kr.t("Messages older than {duration, plural, =1 {# day} other {# days}} ({durationInYears, plural, =1 {# year} other {# years}}) will be deleted",{duration:c,durationInYears:d,fallbackHash:"2641d4c8882584eb6bee3cdb1172b02f43b9881f"})}else u=Kr.t("Messages older than {duration, plural, =1 {# day} other {# days}} will be deleted",{duration:c,fallbackHash:"1f76675f52cc8078d8373c5e7d241070bba730c3"});break;default:u=Kr.t("Use the default workspace retention settings");break}return n.a.createElement(K["a"],{title:Kr.t("Apply new retention settings?"),goButtonText:Kr.t("Apply Settings"),goButtonType:"danger",onCancel:this.hideRetentionDialog,onGo:this.saveRetention,goButtonIsDisabled:!this.state.isRetentionCheckboxChecked,goOnEnterPressed:this.state.isRetentionCheckboxChecked,shouldCloseOnGo:false},n.a.createElement(Z["a"],{level:"error"},Kr.rt("<strong>Warning:</strong> Messages deleted by retention settings are truly, permanently deleted. These messages can\u2019t be restored or recovered, even by Slack.")),n.a.createElement("strong",null,Kr.t("Here\u2019s what your new settings will be:")),n.a.createElement("ul",{className:"margin_top_100"},n.a.createElement("li",null,Object(M["isIm"])(l)||Object(M["isMpim"])(l)?Kr.t("In this conversation: {newSetting}",{newSetting:u}):Kr.t("In this channel: {newSetting}",{newSetting:u}))),n.a.createElement(J["a"],{text:Kr.rt("<strong>Yes, apply these new settings</strong>"),htmlFor:"dataRetentionOverrideConfirm",type:"inline",cursor:"pointer"},n.a.createElement(Y["a"],{id:"dataRetentionOverrideConfirm",isRequired:true,onChange:this.handleRetentionCheckboxChange})))}},{key:"renderOptionsListHeader",value:function e(t,r){var a=void 0;a=r||Kr.rt("Additional options for <span>{name}</span>",{name:Object(M["getDisplayName"])(t)},function(e){var r=e.key;return re(r,t)});return n.a.createElement("span",{className:"channel_options_header"},a)}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.additionalParams,i=r.currentMember,s=r.channel,o=r.currentTeam,l=r.disableConvertToPrivate,c=r.disableRename,u=r.externalSharedTeams,p=r.onCancel,m=r.pendingSharedExternalSharedTeamNames,h=r.showArchive,f=r.showConvertToPrivate,v=r.showDataRetention,b=r.showDelete,g=r.showExport,_=r.showManageOrgAccess,y=r.showPostingPermissions,O=r.showPurpose,E=r.showRename,w=r.showShareExternal,C=r.showStopShareExternal;var S=this.state,j=S.canThread,T=S.channelNameAdditionalVerificationError,N=S.channelNameNeedsChecking,A=S.channelNameOrgIsCheckingVerification,R=S.channelNameValid,P=S.channelPrefError,x=S.goButtonIsDisabled,D=S.goButtonIsPending,F=S.manageOrgAccessDisabledTeamIds,B=S.manageOrgAccessLoaded,U=S.manageOrgAccessOriginatingTeamId,q=S.manageOrgAccessShareWith,G=S.manageOrgAccessTeamIds,H=S.newChannelName,W=S.newChannelPurpose,V=S.postingPermissionsLoaded,K=S.postingPermissionsSelectedMembers,Y=S.retentionDuration,J=S.retentionDurationUnit,Z=S.retentionLoaded,X=S.retentionType,$=S.showBackButton,ee=S.showCancelButton,te=S.showGoButton,ae=S.showSuccessAlert,ne=S.successAlertHeading,ie=S.successAlertText,se=S.teamRetentionDuration,le=S.teamRetentionType,ce=S.whoCanPost;var ue={buttonAlignment:"right",goButtonIsDisabled:x,goButtonIsPending:D,showBackButton:$,showCancelButton:ee,showGoButton:te,withHeader:true};this.steps=[d()({contentLabel:"Additional Options for "+Object(M["getDisplayName"])(s),title:this.renderOptionsListHeader(s),children:n.a.createElement(ir,{channel:s,disableConvertToPrivate:l,disableRename:c,modalClasses:"p-channel_options_section",name:Object(M["getDisplayName"])(s),onClickArchive:this.onClickArchiveOption,onClickConvertToPrivate:this.onClickConvertToPrivateOption,onClickDelete:this.onClickDeleteOption,onClickExport:this.onClickExportOption,onClickManageOrgAccess:this.onClickManageOrgAccessOption,onClickPostingPermissions:this.onClickPostingPermissionsOption,onClickPurpose:this.onClickPurposeOption,onClickRename:this.onClickRenameOption,onClickShareExternal:this.onClickShareExternalOption,onClickCancelExternalSharedChannelInvite:this.onClickCancelExternalSharedChannelInvite,onClickStopShareExternal:this.onClickStopShareExternalOption,pendingSharedExternalSharedTeamNames:m,showArchive:h,showConvertToPrivate:f,showDataRetention:v,showDelete:b,showExport:g,showManageOrgAccess:_,showPostingPermissions:y,showPurpose:O,showRename:E,showShareExternal:w,showStopShareExternal:C,showSuccessAlert:ae,successAlertHeading:ne,successAlertText:ie}),qa:"all_options"},ue)];h?this.steps.push(d()({children:n.a.createElement(oe,{channel:s}),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.archiveChannelApi({channel:s});t.closeModal()},goButtonText:Kr.t("Yes, archive the channel"),title:this.renderOptionsListHeader(s,Kr.rt("Archive <strong>{name}</strong>",{name:Object(M["getDisplayName"])(s),fallbackHash:"0cf2d51d33550e37e96cafe433465fa5e0816923"},function(e){var t=e.key;return re(t,s)})),contentLabel:"Archive "+Object(M["getDisplayName"])(s),qa:"archive"},ue)):this.steps.push(ea);w?this.steps.push(d()({children:n.a.createElement("div",null,"Share external option"),onBack:this.goBackToAllOptions,title:"",qa:Zr[2]},ue)):this.steps.push(ea);if(C){var de=Kr.rt("Stop sharing {channelName}",{channelName:n.a.createElement(Br,{channel:s})});var pe=Kr.t("Stop Sharing");this.steps.push(d()({children:n.a.createElement(Vr,{channel:s,showLastChannelWarning:this.state.isOnlyChannelWithExternalTeam}),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);var r=Kr.t("This can\u2019t be undone");var a=Kr.rt("You won\u2019t be able to re-share {channelName} with {teamNames} or any other workspace.",{channelName:re(s.id,s),teamNames:Object(L["a"])(u.map(function(e){var t=e.name;return t}),{react:true,strong:true,conj:"or"})});var n=t.props.clogger;n.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_MODAL_SUBMIT_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});var i=function e(){n.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_CONFIRM_SUBMIT_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});t.props.disconnectChannel({channelId:s.id}).then(t.closeModal)};var o=function e(){n.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_CONFIRM_CANCEL_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});t.closeAlertDialog()};t.showAlertDialog({goButtonText:pe,goButtonType:"danger",message:a,onGo:i,onCancel:o,showCancelButton:true,title:r})},goButtonText:pe,goButtonType:"danger",title:this.renderOptionsListHeader(s,de),contentLabel:"Stop sharing "+Object(M["getDisplayName"])(s),qa:"stop_sharing_external"},ue))}else this.steps.push(ea);if(f){var me=void 0;var he=void 0;if(Object(M["isPublicChannel"])(s)||Object(M["isPrivateChannel"])(s)){me=Kr.rt("Change <strong>{channelName}</strong> to a private channel",{name:Object(M["getDisplayName"])(s)},function(e){var t=e.key;return re(t,s)});he="Change "+Object(M["getDisplayName"])(s)+" to a private channel"}else{me=Kr.rt("Convert this conversation to a private channel?",{fallbackHash:"5e50b350a369117078fafe9841785a5576fd4fc5"});he="Convert this conversation to a private channel?"}this.steps.push(d()({children:n.a.createElement(et,{channel:s}),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);var r=Kr.t("This can\u2019t be undone");var a=Kr.rt("Once {channelName} is made a private channel, it cannot be changed to a public channel again.",{channelName:re(s.id,s)});var n=Kr.t("Change to Private");t.showAlertDialog({goButtonText:n,goButtonType:"danger",message:a,onGo:function e(){t.props.convertChannelToPrivateApi(s.id).then(t.closeModal)},showCancelButton:true,title:r})},goButtonType:"danger",goButtonText:Kr.t("Change to Private"),title:this.renderOptionsListHeader(s,me),contentLabel:he,qa:"convert_private"},ue))}else this.steps.push(ea);var fe=Kr.t("Rename Channel");if(E){var ve={additionalVerificationError:T,additionalVerificationGood:R,channelNameNeedsChecking:N};Object(M["isOrgSharedPublicOrPrivateChannel"])(s)&&(ve.isCheckingAdditionalVerification=A);var be=Object(M["getDisplayName"])(s);a.name&&(be=a.name);var ge=Kr.rt("Rename <strong>{channelName}</strong>",{channelName:Object(M["getDisplayName"])(s)},function(e){var t=e.key;return re(t,s)});var _e="Rename "+Object(M["getDisplayName"])(s);this.steps.push(d()({children:n.a.createElement(xr,d()({},ve,{channel:s,name:be,onInvalidName:this.channelNameOnInvalidName,onValidName:this.channelNameOnValidName})),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,goButtonText:fe,onGo:function e(){t.goButtonIsPending(true);t.props.renameChannelApi({channel:s,newName:H}).then(function(e){t.goButtonIsPending(false);if(!e.ok){if(e.error&&"name_taken"===e.error){t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:Jr.t("{name} is already taken by a channel, username, or user group.",{name:H})}});return}t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:Jr.t("For some weird reason, that didn\u2019t work. Please try again to continue.")}});return}t.setState(function(){return{channelNameValid:true,channelNameAdditionalVerificationError:""}});t.closeModal()}).catch(function(e){if(e.data&&"name_taken"===e.data.error){t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:Jr.t("{name} is already taken by a channel, username, or user group.",{name:H})}});return}t.goButtonIsPending(false);t.setState(function(){return{channelNameAdditionalVerificationError:Jr.t("For some weird reason, that didn\u2019t work. Please try again to continue.")}})})},title:this.renderOptionsListHeader(s,ge),contentLabel:_e,qa:"rename"},ue))}else this.steps.push(ea);if(g){var ye=void 0;var ke=void 0;if(Object(M["isPublicChannel"])(s)||Object(M["isPrivateChannel"])(s)){ye=Kr.rt("Export message history for <strong>{name}</strong>",{name:Object(M["getDisplayName"])(s),fallbackHash:"7e98401bb334b4d48829e4fdbcd144dc8a101003"},function(e){var t=e.key;return re(t,s)});ke="Export message history for "+Object(M["getDisplayName"])(s)}else{ye=Kr.rt("Export message history for this conversation",{fallbackHash:"c1d139527fa0d1b5faa28809a3b74d183f848622"});ke="Export message history for this conversation"}this.steps.push(d()({children:n.a.createElement(Nt,null),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.exportChannelHistory(s);t.closeModal()},goButtonText:Kr.t("Export"),title:this.renderOptionsListHeader(s,ye),contentLabel:ke,qa:"export"},ue))}else this.steps.push(ea);b?this.steps.push(d()({children:n.a.createElement(jt,{channel:s,showArchiveInstead:this.props.showArchive,onClickArchiveInstead:this.onClickArchiveInsteadDelete,onChangeCheckbox:this.onChangeCheckboxDelete}),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.setChannelDeleted(s.id);t.closeModal()},goButtonText:Kr.t("Delete Channel"),goButtonType:"danger",title:this.renderOptionsListHeader(s,Kr.rt("Delete <strong>{name}</strong>",{name:Object(M["getDisplayName"])(s),fallbackHash:"73bcca2ef24ed39c3f2a63fea6c8e9e15150d0d7"},function(e){var t=e.key;return re(t,s)})),contentLabel:"Delete "+Object(M["getDisplayName"])(s),qa:"delete"},ue,{buttonAlignment:"float_right"})):this.steps.push(ea);if(O){var Oe=Kr.rt("Set channel purpose for <strong>{channelName}</strong>",{channelName:Object(M["getDisplayName"])(s)},function(e){var t=e.key;return re(t,s)});var Ee="Set channel purpose for "+Object(M["getDisplayName"])(s);this.steps.push(d()({children:n.a.createElement(Ke,{channel:s,purpose:s.purpose,onChannelPurposeTextareaChange:this.onChannelPurposeTextareaChange,onChannelPurposeValidationChange:this.onChannelPurposeValidationChange}),goButtonText:Kr.t("Update Purpose"),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);s.purpose.value!==W&&t.props.submitChannelPurpose({channelId:s.id,purpose:W}).then(function(e){if(t.props.featureDegradedSend){var r=Object(k["get"])(e,"channel.id");var a=Object(k["get"])(e,"channel.purpose");if(!r||!a)return;t.props.setChannelPurpose({id:r,purpose:a})}});t.closeModal()},title:this.renderOptionsListHeader(s,Oe),contentLabel:Ee,qa:"purpose"},ue))}else this.steps.push(ea);if(v){var we=void 0;var Ce=void 0;if(Object(M["isPublicChannel"])(s)||Object(M["isPrivateChannel"])(s)){we=Kr.rt("Edit message retention for {name}",{name:n.a.createElement(Q["b"],{channel:s,inline:true})});Ce="Edit message retention for "+Object(M["getDisplayName"])(s)}else{we=Kr.rt("Edit message retention for <strong>this conversation</strong>");Ce="Edit message retention for this conversation"}this.steps.push(d()({children:n.a.createElement(kt,{member:i,team:o,onDurationChange:this.onRetentionDurationChange,onDurationUnitChange:this.onRetentionDurationUnitChange,onTypeChange:this.onRetentionTypeChange,prefsLoaded:Z,retentionDuration:Y,retentionDurationUnit:J,retentionType:X,teamRetentionType:le,teamRetentionDuration:se,durationInputRef:this.durationInputRef}),goButtonText:Kr.t("Save"),onGo:this.showRetentionDialog,onBack:function e(){t.setRetentionLoaded(false);t.goBackToAllOptions()},onCancel:this.goBackToAllOptions,title:this.renderOptionsListHeader(s,we),contentLabel:Ce,qa:"retention",stepModalClasses:"p-channel-options__retention_modal"},ue))}else this.steps.push(ea);y?this.steps.push(d()({children:n.a.createElement(Er,{onChangeCheckbox:this.onChangeCheckboxCanThread,onChangeRadio:this.onChangeRadioWhoCanPost,isOrgDefault:Object(M["isOrgDefaultChannel"])(s),canThread:j,whoCanPost:ce,postingPermissionsSelectedMembers:K,onChangeValueSelectedMembers:this.onChangeValueSelectedMembers,postingPermissionsLoaded:V}),onBack:function e(){t.setPostingPermissionsSelectedMembers(null);t.setPostingPermissionsLoaded(false);t.goBackToAllOptions()},goButtonText:Kr.t("Review"),contentLabel:"Manage posting permissions for "+Object(M["getDisplayName"])(s),title:this.renderOptionsListHeader(s,Kr.rt("Manage posting permissions for <strong>{name}</strong>",{name:Object(M["getDisplayName"])(s),fallbackHash:"6e82adeae0a793fe96592833d990efcaf1cc8ab3"},function(e){var t=e.key;return re(t,s)})),qa:"posting_privilege"},ue),d()({children:n.a.createElement(Nr,{whoCanPost:ce,canThread:j,channelPrefError:P,onErrorDialogButtonClick:this.onErrorDialogButtonClick,featureDefaultSharedChannels:this.props.featureDefaultSharedChannels}),onGo:function e(){var r=t.props.featureDefaultSharedChannels;t.goButtonIsPending(true);var a=Qr(ce,K,r);var n={who_can_post:a};if(Object(M["isOrgDefaultChannel"])(s)){var i=zr(j);n.can_thread=i}t.props.setChannelPrefs({channelId:s.id,newPrefs:JSON.stringify(n)}).then(function(){t.setPostingPermissionsLoaded(false);t.closeModal()}).catch(function(){t.goButtonIsPending(false);t.setChannelPrefError(true)})},goButtonText:Kr.t("Set posting permissions"),title:this.renderOptionsListHeader(s,Kr.t("Review Changes")),contentLabel:"Review Changes",qa:"posting_privilege_review"},ue)):this.steps.push(ea,ea);if(_){var Se=Object(M["isOrgSharedPublicOrPrivateChannel"])(s);var je=function e(){if(Se||"specific"!==q){if(Object(M["isOrgGlobalSharedPublicOrPrivateChannel"])(s)){if("all"===q)return false}else if("specific"===q&&Object(M["getSharedTeamIds"])(s)&&Object(k["isEqual"])(G.sort(),Object(M["getSharedTeamIds"])(s).sort()))return false}else{if(!G.length)return false;if(1===G.length&&G.indexOf(o.id)>-1)return false}return true};var Ie=Kr.t("Done");je()&&(Ie=Kr.t("Review Changes"));this.steps.push(d()({children:n.a.createElement(Bt,{channel:s,disabledTeamIds:F,originatingTeamId:U,filterFunction:this.manageOrgAccessFilterFunction,isLoaded:B,onShareWithChange:this.onChangeManageOrgAccessShareWith,onTeamPickerChange:this.onChangeManageOrgAccessTeamPicker,preselectedTeamIds:G,shareWith:q}),goButtonText:Ie,onBack:function e(){t.setManageOrgAccessLoaded(false);t.goBackToAllOptions()},onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);if(!je()){t.closeModal();return}if(Se){t.goToStep("manage_org_access_review");t.goButtonIsPending(false);return}t.props.callEnterpriseNameTaken({channel:s,newChannelName:Object(M["getDisplayName"])(s)}).then(function(e){t.goButtonIsPending(false);t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access"}});if(!e.ok||e.name_taken){t.setState(function(){return{channelNameValid:false}});t.goButtonIsDisabled(true);t.modalRef.goToNextStep();return}t.goToStep("manage_org_access_review")}).catch(function(e){t.goButtonIsPending(false);t.setState(function(){return{channelNameValid:false}});var r=Yr.t("Oops, something went wrong.");var a=Kr.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});throw e})},title:this.renderOptionsListHeader(s,Kr.rt("Sharing settings for <strong>{name}</strong>",{name:Object(M["getDisplayName"])(s),fallbackHash:"14c24585b3cd497e35dfec78cc5d5aa63f7d4690"},function(e){var t=e.key;return re(t,s)})),contentLabel:"Manage access to "+Object(M["getDisplayName"])(s),qa:"manage_org_access"},ue),d()({children:n.a.createElement(Ae,{additionalVerificationError:T,additionalVerificationGood:R,channel:s,isCheckingAdditionalVerification:A,onInvalidName:this.channelNameOnInvalidName,onValidName:this.channelNameOnValidName}),onBack:function e(){t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access"}});t.goBackToManageAccessPrevStep()},onCancel:this.goBackToAllOptions,goButtonText:fe,onGo:function e(){t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access_name_conflict",channelToBeShared:false}});t.modalRef.goToNextStep()},title:this.renderOptionsListHeader(s,Kr.t("Rename this channel")),contentLabel:"Rename this channel",qa:"manage_org_access_name_conflict"},ue),d()({children:n.a.createElement(Kt,{channel:s,currentTeam:o,newChannelName:H,shareWith:q,teamIdsSelected:G}),goButtonText:Kr.t("Save Changes"),onBack:this.goBackToManageAccessPrevStep,onCancel:this.goBackToAllOptions,onGo:this.manageOrgAccessSave,title:this.renderOptionsListHeader(s,Kr.t("Review Changes")),contentLabel:"Review Changes",qa:"manage_org_access_review"},ue))}else this.steps.push(ea,ea,ea);this.steps.length!==Object(k["keys"])(Zr).length&&Object(I["a"])({teamId:this.props.teamId}).error("ChannelOptions render error: It looks like the number of modal steps doesn\u2019t match the number of steps defined in the modal mapping. Please check that you have the correct number of filler steps added if your screen is not rendered.");return n.a.createElement("div",null,n.a.createElement(z["a"],{modalClasses:"channel_options_modal",onCancel:p,position:"fixed",ref:function e(r){t.modalRef=r},showCloseTransition:true,showOpenTransition:true,steps:this.steps}))}}]);return t}(a["PureComponent"]);la.displayName="ChannelOptions";la.defaultProps=$r;function ca(e,t){var r=t.channelId;var a=Object(T["getChannelById"])(e,r);if(!a)return{featureDefaultSharedChannels:Object(E["isFeatureEnabled"])(e,"feature_default_shared_channels")};var n=Object(A["getTeamsById"])(e,a.pending_shared).map(D["getTeamDisplayName"]);var i=[];Object(M["getSharedTeamIds"])(a)&&Object(M["getSharedTeamIds"])(a).length&&(i=Object(M["getSharedTeamIds"])(a).map(function(t){return Object(A["getTeamById"])(e,t)}));return{channel:a,currentMember:Object(N["getCurrentMember"])(e),currentTeam:Object(A["getCurrentTeam"])(e),dmRetentionDuration:Object(j["getTeamPref"])(e,"dm_retention_duration"),dmRetentionType:Object(j["getTeamPref"])(e,"dm_retention_type"),externalSharedTeams:i,groupRetentionDuration:Object(j["getTeamPref"])(e,"group_retention_duration"),groupRetentionType:Object(j["getTeamPref"])(e,"group_retention_type"),orgName:Object(S["getEnterpriseOrgName"])(e),pendingSharedExternalSharedTeamNames:n,channelRetentionDuration:Object(j["getTeamPref"])(e,"retention_duration"),channelRetentionType:Object(j["getTeamPref"])(e,"retention_type"),teamId:Object(C["getTeamId"])(e),featureDefaultSharedChannels:Object(E["isFeatureEnabled"])(e,"feature_default_shared_channels"),featureDegradedSend:Object(E["isFeatureEnabled"])(e,"feature_degraded_send"),clogger:Object(B["a"])({state:e})}}var ua={archiveChannelApi:T["archiveChannelApi"],cancelExternalSharedChannelInviteApi:P["x"],callEnterpriseNameTaken:x["b"],submitChannelPurpose:P["z"],convertToOrgShared:x["f"],convertChannelToPrivateApi:T["convertChannelToPrivateApi"],openModal:w["openModal"],renameChannelApi:T["renameChannelApi"],updateOrgAccessForChannel:T["updateOrgAccessForChannel"],exportChannelHistory:T["exportChannelHistory"],setChannelDeleted:P["r"],getChannelOrgOriginatingTeam:x["m"],getChannelPref:P["l"],setChannelPrefs:P["s"],setChannelPurpose:T["setChannelPurpose"],getExternalTeamIdsConnectedOnlyByChannel:P["o"],disconnectChannel:P["b"],getDataRetention:P["m"],setDataRetention:P["v"],getExternalSharedChannelInviteDetails:P["n"]};var da=Object(o["connect"])(ca,ua)(la);var pa=[{stepName:"archive",prop:"showArchive",stepIndex:1},{stepName:"share_external",prop:"showShareExternal",stepIndex:2},{stepName:"stop_sharing_external",prop:"showStopShareExternal",stepIndex:3},{stepName:"convert_private",prop:"showConvertToPrivate",stepIndex:4},{stepName:"rename",prop:"showRename",stepIndex:5},{stepName:"export",prop:"showExport",stepIndex:6},{stepName:"delete",prop:"showDelete",stepIndex:7},{stepName:"purpose",prop:"showPurpose",stepIndex:8},{stepName:"retention",prop:"showDataRetention",stepIndex:9},{stepName:"posting_privilege",prop:"showPostingPermissions",stepIndex:10},{stepName:"manage_org_access",prop:"showManageOrgAccess",stepIndex:12}];var ma=da;var ha=function e(t,r,a){if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:i},n.a.createElement(ma,a)),r)};var fa=function e(t){s.a.unmountComponentAtNode(t)};var va={mountChannelOptions:ha,unmountChannelOptions:fa};var ba=r(51);Object(ba["a"])("interop.mountChannelOptions",ha);Object(ba["a"])("interop.unmountChannelOptions",fa)},,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(14);var f=r(262);var v=r(2086);var b=r(2);var g=r(616);var _=r(123);var y=r(11);var k=r(10);var O=r(167);var E=r(673);var w=r(884);var C=r(20);var S=r(618);var j=r(1437);var I=r(105);var T=r(800);var N=r(35);var A=r.n(N);var R=r(762);var M=r(12);var P=r(19);var x=r(16);var D=r(41);var F=new k["b"]("user_groups");var L={userGroup:m["b"].object,defaultChannelNames:m["b"].arrayOf(m["b"].string),featureLazyUserGroups:m["b"].bool,showToggle:m["b"].bool,creator:m["b"].string};var B={userGroup:{},defaultChannelNames:void 0,featureLazyUserGroups:false,showToggle:false,creator:void 0};var U=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onButtonClick=r.onButtonClick.bind(r);return r}s()(t,[{key:"onButtonClick",value:function e(t,r){var a=this.props.userGroup;Object(R["c"])({action:r,userGroup:a})}},{key:"maybeRenderDescription",value:function e(t){if(!this.props.featureLazyUserGroups)return null;var r=this.props.userGroup;var a=Object(I["e"])(r);if(!a)return null;return p.a.createElement("p",{className:t},a)}},{key:"maybeRenderHandle",value:function e(){var t=this.props.userGroup;var r=Object(I["f"])(t,{includeAtSign:true});if(!r)return null;return p.a.createElement("span",{className:"subtle_silver"},r)}},{key:"maybeRenderToggle",value:function e(){var t=this;var r=this.props.showToggle;if(!r)return null;return p.a.createElement(p.a.Fragment,null,p.a.createElement("a",{"data-action":"enable_user_group",className:"user_group_toggle_btn no_bottom_margin subtle_silver small small_right_padding",onClick:function e(r){return t.onButtonClick(r,"enable")},role:"link",tabIndex:"0"},p.a.createElement(D["d"],{position:"left",zIndex:"above_fs",tip:F.t("Enable group")},p.a.createElement("i",{className:"ts_icon ts_icon_power_off"}))))}},{key:"maybeRenderDefaultChannels",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.defaultChannelNames;if(!t||!t.length)return null;var r=Object(k["g"])(t,{react:true,noEscape:true}).join("");return p.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},p.a.createElement("span",{className:"bold"},F.t("Default channels: {channels}",{channels:r})))}},{key:"maybeRenderCreatedBy",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props,r=t.userGroup,a=t.creator;if(!r&&(!r.created_by||!r.date_create))return null;var n=F.rt("Created by <strong>{creator}</strong> on {creationDate}",{creator:a,creationDate:A()(1e3*r.date_create).format("MMMM Do, YYYY")});return p.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},n)}},{key:"maybeRenderDisableButton",value:function e(){var t=this;var r=this.props.showToggle;if(!r)return null;return p.a.createElement(D["d"],{position:"bottom",zIndex:"above_fs",tip:F.t("Disable group")},p.a.createElement(C["d"],{size:"large",type:"outline",icon:"disable",className:"user_group_toggle_btn",title:""+F.t("Disable"),"data-action":"disable_user_group",onClick:function e(r){return t.onButtonClick(r,"disable")}}))}},{key:"renderDeactivatedRow",value:function e(){var t=this.props.userGroup;var r=Object(I["h"])(t);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col span_4_of_6 small_padding no_bottom_margin"},p.a.createElement("p",{className:"no_bottom_margin subtle_silver"},p.a.createElement("span",{className:"bold"},r),F.t("(Disabled)"))),p.a.createElement("div",{className:"col span_2_of_6 small_padding no_bottom_margin float_right align_right"},this.maybeRenderToggle()))}},{key:"renderCount",value:function e(){var t=this.props.userGroup;var r=t.isExternal||Object(I["l"])(t)?p.a.createElement("i",{className:"ts_icon ts_icon_sync"}):null;return p.a.createElement("p",{className:"user_group_count no_bottom_margin float_right small subtle_silver"},r,p.a.createElement("i",{className:"ts_icon ts_icon_user"}),Object(I["k"])(t))}},{key:"renderSettingsButton",value:function e(){var t=this;return p.a.createElement(D["d"],{position:"bottom",tip:F.t("Edit group info"),zIndex:"above_fs"},p.a.createElement(C["d"],{size:"large",type:"outline",icon:"cog_o",title:""+F.t("Settings"),"data-action":"open_form",onClick:function e(r){return t.onButtonClick(r,"editInfo")}}))}},{key:"renderMemberButton",value:function e(){var t=this;var r=this.props.userGroup;var a=void 0;a=Object(I["l"])(r||r.is_external)?F.t("View group members"):F.t("Edit group members");return p.a.createElement(D["d"],{position:"bottom",tip:a,zIndex:"above_fs"},p.a.createElement(C["d"],{size:"large",type:"outline",icon:"user",title:""+F.t("Members"),"data-action":"edit_members",onClick:function e(r){return t.onButtonClick(r,"editMembers")}}))}},{key:"render",value:function e(){var t=this.props.userGroup;var r=Object(I["q"])(this.props.userGroup);if(!r)return this.renderDeactivatedRow();var a=Object(I["h"])(t);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col span_3_of_4 small_padding no_bottom_margin"},p.a.createElement("p",{className:"bold no_bottom_margin"},a," ",this.maybeRenderHandle()),this.maybeRenderDescription("small no_bottom_margin"),this.maybeRenderDefaultChannels(),this.maybeRenderCreatedBy()),p.a.createElement("div",{className:"float_right right_padding"},this.renderCount(),p.a.createElement("p",{className:"user_group_actions user_group_actions--modern small no_bottom_margin"},this.maybeRenderDisableButton(),this.renderSettingsButton(),this.renderMemberButton())))}}]);return t}(d["Component"]);U.displayName="LegacyUserGroupBrowserListItem";U.defaultProps=B;var q=function e(t,r){var a=r.id;var n=Object(_["getUserGroupById"])(t,a);var i=Object(I["d"])(n,{includePrivateChannels:false});var s=i.map(function(e){if(!e)return null;var r=Object(P["getChannelById"])(t,e);if(!r)return null;var a=Object(M["getName"])(r);if(!a)return null;return"#"+a});s=Object(b["filter"])(s);var o=Object(x["getPrefCompliantMemberNameById"])(t,n.created_by);return{userGroup:n,featureLazyUserGroups:Object(y["isFeatureEnabled"])(t,"feature_lazy_user_groups"),defaultChannels:i,defaultChannelNames:s,creator:o,showDelete:!Object(I["l"])(n)&&!n.is_external,showToggle:Object(I["b"])(t)}};var G=Object(h["connect"])(q)(U);var H=new k["b"]("user_groups");var W={id:m["b"].string.isRequired,userGroup:m["b"].object,onClick:m["b"].func,featureLazyUserGroups:m["b"].bool,isUserGroupBrowser:m["b"].bool};var V={userGroup:{},onClick:b["noop"],featureLazyUserGroups:false,isUserGroupBrowser:false};var z=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(t){this.props.onClick(t,this.props.id);return Object(T["c"])(t,this.props.id)}},{key:"maybeRenderDescription",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.userGroup;var r=Object(I["e"])(t);if(!r)return null;return p.a.createElement("p",null,r)}},{key:"maybeRenderCountOrHandle",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.userGroup;var r=Object(I["k"])(t);var a=Object(I["f"])(t,{includeAtSign:false});if(!(r||a))return null;var n=H.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:r});a&&(n=n+" - "+Object(I["f"])(t));return p.a.createElement("p",{className:"subtle_silver tiny_bottom_margin"},n)}},{key:"renderRow",value:function e(){var t=this.props,r=t.userGroup,a=t.id,n=t.isUserGroupBrowser;if(n)return p.a.createElement(G,{id:a});return p.a.createElement("div",{className:"col span_5_of_6 small_padding no_bottom_margin"},p.a.createElement("a",{"data-user-group-id":""+a,onClick:this.onClick,role:"link",tabIndex:"0"},p.a.createElement("h4",null,Object(I["h"])(r)),this.maybeRenderDescription(),this.maybeRenderCountOrHandle()))}},{key:"render",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.id;return p.a.createElement("div",{className:"user_group_item small_padding bottom_border clearfix","data-qa":"user_group_list_item","data-user-group-id":""+t},this.renderRow())}}]);return t}(d["Component"]);z.displayName="LegacyUserGroupListItem";z.defaultProps=V;var Q=function e(t,r){var a=r.id;return{userGroup:Object(_["getUserGroupById"])(t,a),featureLazyUserGroups:Object(y["isFeatureEnabled"])(t,"feature_lazy_user_groups")}};var K=Object(h["connect"])(Q)(z);var Y=r(2107);var J=new k["b"]("user_groups");var Z={userGroups:m["b"].arrayOf(m["b"].object),scrollmark:m["b"].shape({key:m["b"].string,offset:m["b"].number}),searchQuery:m["b"].string,setCursorMark:m["b"].func,fetchUserGroupsPost:m["b"].func,fetchDeactivatedUserGroupsPost:m["b"].func,saveScrollmark:m["b"].func,onCreateUserGroup:m["b"].func,isLegacy:m["b"].bool,includeDeactivated:m["b"].bool,isUserGroupBrowser:m["b"].bool,featureLazyUserGroups:m["b"].bool};var X={userGroups:[],scrollmark:void 0,searchQuery:void 0,setCursorMark:b["noop"],fetchUserGroupsPost:b["noop"],fetchDeactivatedUserGroupsPost:b["noop"],saveScrollmark:b["noop"],onCreateUserGroup:b["noop"],onGroupClick:b["noop"],isLegacy:false,includeDeactivated:false,isUserGroupBrowser:false,featureLazyUserGroups:false};var $=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGroupClick=r.onGroupClick.bind(r);r.onScroll=r.onScroll.bind(r);r.setListRef=r.setListRef.bind(r);r.fetchPost=r.fetchPost.bind(r);r.fetchDeactivatedGroups=r.fetchDeactivatedGroups.bind(r);r.fetchActiveGroups=r.fetchActiveGroups.bind(r);r.fetchAround=r.fetchAround.bind(r);r.renderRow=r.renderRow.bind(r);r.requestPost=null;r.keys=null;r.list=null;r.layout=new w["a"];r.groupsTotal=0;r.state={reachedEnd:false,fetchingDeactivatedGroups:false};return r}s()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,r=t.key,a=t.offset;this.layout.setAnchor(r,a);this.props.saveScrollmark(null)}},{key:"componentWillReceiveProps",value:function e(t){var r=this.props.searchQuery;if(t.searchQuery!==r){this.setState(function(){return{reachedEnd:false,fetchingDeactivatedGroups:false}});this.requestPost&&this.requestPost.cancel();this.requestPost=null;this.groupsTotal=0;this.layout&&this.layout.setAnchor(false)}}},{key:"componentWillUnmount",value:function e(){if(this.requestPost){this.requestPost.cancel();this.requestPost=null}}},{key:"onGroupClick",value:function e(t,r){if(!this.list)return;if(!r)return;this.props.saveScrollmark({key:r,offset:this.layout.getOffsetForKey(r)-this.list.getScrollTop()})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.state.fetchingDeactivatedGroups?this.fetchDeactivatedGroups():this.fetchActiveGroups();return this.requestPost.finally(function(){t.requestPost=null})}},{key:"fetchDeactivatedGroups",value:function e(){var t=this;return this.props.fetchDeactivatedUserGroupsPost({searchQuery:this.props.searchQuery}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.items,a=e.num_found;(t.props.userGroups.length>=t.totalGroups+a||!r.length)&&t.setState(function(){return{reachedEnd:true}})})}},{key:"fetchActiveGroups",value:function e(){var t=this;return this.props.fetchUserGroupsPost({searchQuery:this.props.searchQuery}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.items,a=e.num_found;t.totalGroups=a;if(t.props.userGroups.length>=t.totalGroups||!r.length)if(t.props.includeDeactivated){t.props.setCursorMark(null);t.setState(function(){return{fetchingDeactivatedGroups:true}})}else t.setState(function(){return{reachedEnd:true}})})}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.fetchPost()}},{key:"renderRow",value:function e(t){if(!this.props.featureLazyUserGroups)return null;var r=this.keys[t];if(!r)return null;switch(r[0]){case"L":return p.a.createElement("div",{className:"p-user_group_list__loading"},J.t("Loading\u2026"));default:return this.renderUserGroup(t)}}},{key:"renderUserGroup",value:function e(t){var r=this.props,a=r.userGroups,n=r.isLegacy,i=r.featureLazyUserGroups,s=r.isUserGroupBrowser;var o=a[t].id;if(!o)return null;if(i&&n)return p.a.createElement(K,{id:o,isUserGroupBrowser:s,onClick:this.onGroupClick});return p.a.createElement(j["a"],{id:o,onClick:this.onGroupClick})}},{key:"renderEmptyListView",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=void 0;var r=void 0;if(Object(S["a"])()){t=J.t("Organize your team");r=p.a.createElement(C["d"],{type:"outline",size:"small",onClick:this.props.onCreateUserGroup},J.t("Create a User Group"))}else t=J.t("No user groups yet");return p.a.createElement("div",{className:"p-user_group_list__empty_list","data-qa":"searchable_ug_list_empty_state"},p.a.createElement("div",{className:"p-user_group_list__empty_list_header"},t),p.a.createElement("div",{className:"p-user_group_list__empty_list_subtext"},J.t("User groups make it easy to get the attention of many members at once.")),r)}},{key:"render",value:function e(){var t=this;this.keys=this.props.includeDeactivated?this.props.userGroups.map(function(e){return e.id}):this.props.userGroups.filter(function(e){return!e.isDeactivated}).map(function(e){return e.id});if(!this.keys.length&&this.state.reachedEnd)return this.renderEmptyListView();this.state.reachedEnd||this.keys.push("Loading"+this.keys.length);return p.a.createElement("div",{className:"p-user_group_list"},p.a.createElement(v["a"],null,function(e){var r=e.width,a=e.height;return p.a.createElement(E["a"],{width:r,height:a,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.setListRef,loadAround:t.fetchAround,loadPost:t.fetchPost})}))}}]);return t}(d["PureComponent"]);$.displayName="SearchableUserGroupsList";$.defaultProps=X;var ee=function e(t,r){var a=r.map(function(e){var r=t[e];if(!r)return null;return{id:r.id,_name_lc:r._name_lc,isDeactivated:!!r.date_delete}}).filter(function(e){return e});return Object(b["sortBy"])(a,["isDeactivated","_name_lc"])};var te=Object(f["createSelector"])([_["getAllUserGroups"],g["getFlexpaneUserGroups"]],ee);var re={getUserGroups:te};var ae=t["a"]=Object(h["connect"])(function(e){return{userGroups:te(e),scrollmark:Object(g["getScrollmark"])(e),searchQuery:Object(g["getSearchQuery"])(e),featureLazyUserGroups:Object(y["isFeatureEnabled"])(e,"feature_lazy_user_groups"),useGlobalNav:Object(O["b"])(e)}},{fetchUserGroupsPost:g["fetchUserGroupsPost"],saveScrollmark:g["saveScrollmark"],setSearchQuery:g["setSearchQuery"],setCursorMark:g["setCursorMark"],fetchDeactivatedUserGroupsPost:g["fetchDeactivatedUserGroupsPost"]})($)},,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(129);var c=r(650);var u=r(69);var d=r(11);var p=r(1156);var m=r(5);var h=r.n(m);var f=r(6);var v=r.n(f);var b=r(7);var g=r.n(b);var _=r(8);var y=r.n(_);var k=r(2);var O=r.n(k);var E=r(2086);var w=r(15);var C=r.n(w);var S=r(78);var j=r(21);var I=r(26);var T=r(162);var N=r(61);var A=r(16);var R=r(72);var M=r(171);var P=r(10);var x=r(63);var D=r(167);var F=r(1420);var L=r(352);var B=r(369);var U=r(495);var q=r(265);var G=r(1074);var H=r(121);var W=r(738);var V=r(3);var z=r.n(V);var Q=r(227);var K=r(88);var Y=r(1102);var J=r(2208);var Z=new P["b"]("snippet");var X={featureFileThreads:l["b"].bool};var $={featureFileThreads:true};var ee=function(e){y()(t,e);function t(e){h()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onWrapLinesChange=r.onWrapLinesChange.bind(r);r.state={wrapLines:true};return r}v()(t,[{key:"onWrapLinesChange",value:function e(t){var r=t.target.checked;this.setState(function(e){return z()({},e,{wrapLines:!!r})})}},{key:"render",value:function e(){if(!this.props.featureFileThreads)return null;return[n.a.createElement(Y["a"],z()({key:"snippet"},this.props,{wrapLines:this.state.wrapLines})),n.a.createElement(K["a"],{key:"checkbox",text:Z.rt("Wrap"),htmlFor:"snippet-wrap",type:"inline",cursor:"pointer",className:"p-flexpane_snippet__wrap"},n.a.createElement(Q["a"],{checked:this.state.wrapLines,id:"snippet-wrap",onChange:this.onWrapLinesChange}))]}}]);return t}(a["PureComponent"]);ee.displayName="FlexpaneSnippet";ee.defaultProps=$;function te(e,t){var r=t.fileId;var a=Object(S["getFileById"])(e,r);if(!a)return{};var n=a.is_truncated,i=a.permalink;var s=a.content_highlight_html||a.preview_highlight||"";var o=false;return{file:a,snippetHtml:s,isTruncated:n,permalink:i,isExpandable:o,featureFileThreads:Object(d["isFeatureEnabled"])(e,"feature_file_threads")}}var re=Object(i["connect"])(te)(ee);var ae=r(3525);function ne(e,t){var r=t.fileId;var a=Object(S["getFileById"])(e,r);if(!a)return{};var n=a.content_html||a.preview||"";var i=false===Object(j["getUserPref"])(e,"a11y_animations");var s=false;var o=false;return{postHtml:n,file:a,timestamp:a.updated||a.timestamp,allowAnimations:!i,showActions:o,isExpandable:s}}var ie=Object(i["connect"])(ne)(ae["a"]);var se=r(1103);function oe(e,t){var r=t.fileId;var a=Object(S["getFileById"])(e,r);if(!a)return{};var n=false;var i=true;return{file:a,sentToSelf:a.sent_to_self,sender:O.a.first(a.from),to:a.to,cc:a.cc,title:a.title,subject:a.subject,timestamp:a.timestamp,attachments:a.attachments,simplifiedHtml:a.simplified_html,do24hrTime:Object(j["getUserPref"])(e,"time24"),isExpandable:n,isExpanded:i}}var le=Object(i["connect"])(oe)(se["a"]);var ce=r(65);var ue=r(18);var de=r(742);var pe=r(1173);var me=r(443);var he=r(159);var fe=r(1421);var ve=r(2081);var be={comments:l["b"].array,featureFileThreads:l["b"].bool,fileId:l["b"].string};var ge={comments:void 0,featureFileThreads:true,fileId:void 0};var _e=function(e){y()(t,e);function t(e){h()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toggle=r.toggle.bind(r);r.state={expanded:false};return r}v()(t,[{key:"toggle",value:function e(){var t=this;this.setState(function(){return{expanded:!t.state.expanded}})}},{key:"render",value:function e(){var t=this.props,r=t.comments,a=t.featureFileThreads,i=t.fileId;var s=this.state.expanded;if(!a&&!Object(x["a"])())return null;if(Object(k["isEmpty"])(r))return null;var o=r.map(function(e){var t=e.id;return n.a.createElement(pe["a"],{key:t,comment:e,fileId:i})});var l=C()("p-comment_list",{"p-comment_list--expanded":s});return n.a.createElement("div",{className:l},n.a.createElement(fe["a"],{expanded:s,commentCount:r.length,toggleList:this.toggle}),n.a.createElement("div",{className:"p-comment_list__comments"},o))}}]);return t}(me["a"]);_e.displayName="CommentList";_e.propTypes=be;_e.defaultProps=ge;var ye=Object(he["a"])("feature_file_threads")(_e);var ke=pe["a"];var Oe=r(496);var Ee=r(652);var we=r(17);var Ce=r(150);var Se=r(50);var je=r(151);var Ie=r(735);var Te=r(36);var Ne=new P["b"]("file-details");var Ae={fileId:l["b"].string.isRequired,share:l["b"].shape({sharedTeamIds:l["b"].arrayOf(l["b"].string),teamId:l["b"].string,channelId:l["b"].string,channelName:l["b"].string,isPublic:l["b"].bool,ts:l["b"].string,threadTs:l["b"].string,replyCount:l["b"].number}).isRequired,teamIdForIcon:l["b"].string,teamDomain:l["b"].string,openThread:l["b"].func,featureFileThreads:l["b"].bool};var Re={teamIdForIcon:void 0,teamDomain:void 0,openThread:O.a.noop,featureFileThreads:false};var Me=function(e){y()(t,e);function t(e){h()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onShareClick=r.onShareClick.bind(r);return r}v()(t,[{key:"onShareClick",value:function e(t){var r=this.props,a=r.share,n=r.fileId,i=r.openThread;t.preventDefault();var s=a.threadTs||a.ts;var o=s!==a.ts?a.ts:null;var l="file_details";var c=n;i({channelId:a.channelId,threadTs:s,highlightTs:o,origin:l,originId:c})}},{key:"getReplyCountText",value:function e(t,r,a){if(!this.props.featureFileThreads)return null;var i=t||{},s=i.replyCount,o=i.ts,l=i.threadTs;if(!s)return null;var c="";c=l&&o!==l?Ne.t("from a thread"):Ne.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:s});return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),n.a.createElement(ce["a"],{href:r,onClick:a},n.a.createElement("span",{className:"p-file_details__share_metadata_reply_count"},c)))}},{key:"render",value:function e(){var t=this.props,r=t.share,a=t.teamIdForIcon,i=t.teamDomain;var s=void 0;var o=false;var l=void 0;var c=void 0;if(a){s={id:r.channelId,name:r.channelName,is_channel:true,is_private:!r.isPublic,shared_team_ids:r.sharedTeamIds,team_id:a};o=true}else c=this.onShareClick;i&&(l=Object(Te["constructAbsoluteMsgPermalink"])({teamDomain:i,channelId:r.channelId,ts:r.ts,threadTs:r.threadTs}));return n.a.createElement("div",{className:"p-file_details__share",key:r.channelId+"_"+r.ts},n.a.createElement(ce["a"],{href:l,onClick:c,className:"p-file_details__share_channel_link"},n.a.createElement(je["a"],{channel:s,channelId:r.channelId,className:"p-file_details__share_channel",iconProps:{inherit:true},showTeamIconForXwsChannels:o})),n.a.createElement("span",{className:"p-file_details__share_metadata"},n.a.createElement(Ie["a"],{timestamp:r.ts,relative:true}),this.getReplyCountText(r,l,c)))}}]);return t}(a["Component"]);Me.displayName="FileDetailsShareLocation";Me.defaultProps=Re;function Pe(e,t){var r=t.share;var a=Object(Se["getCurrentTeam"])(e);if(!a)return{};var n=a.id;var i=a.enterprise_id;var s=a.domain;var o=void 0;var l=r.teamId===i&&!O.a.isEmpty(r.sharedTeamIds)&&!O.a.includes(r.sharedTeamIds,n);var c=r.teamId&&r.teamId!==n&&r.teamId!==i;if(l||c){o=O.a.first(r.sharedTeamIds)||r.teamId;var u=Object(Se["getTeamsById"])(e,[o]);s=Object(Se["isTeamExistent"])(u&&u[0])?u[0].domain:null}return{teamIdForIcon:o,teamDomain:s,featureFileThreads:Object(d["isFeatureEnabled"])(e,"feature_file_threads")}}var xe=Object(i["connect"])(Pe,{openThread:Ce["g"]})(Me);var De=new P["b"]("file-details");var Fe={file:R["a"].File(),featureFileThreads:l["b"].bool};var Le={file:null,featureFileThreads:false,openThread:O.a.noop};var Be=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"getFormattedSharesData",value:function e(t){var r=this;if(!t)return[];var a=[];O.a.forEach(t.public,function(e,t){O.a.forEach(e,function(e){var n=true;var i=r.formatShareData(e,t,n);i&&a.push(i)})});var n=[];O.a.forEach(t.private,function(e,t){O.a.forEach(e,function(e){var n=false;var i=r.formatShareData(e,t,n);i&&a.push(i)})});var i=a.concat(n);return O.a.orderBy(i,"ts","desc")}},{key:"formatShareData",value:function e(t,r,a){if("0000000000.000000"===t.ts){Object(we["b"])().warn("Skipping 0000000000.000000 share for "+this.props.file.id);return null}var n=t.reply_count||null;var i=t.reply_users;var s=t.reply_users_count;var o=t.latest_reply||t.ts;return{channelId:r,replyCount:n,replyUsers:i,replyUsersCount:s,latest:o,ts:t.ts,threadTs:t.thread_ts,channelName:t.channel_name,teamId:t.team_id,sharedTeamIds:t.shared_team_ids,isPublic:a}}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.featureFileThreads;if(!a)return null;if("docs"===r.mode)return null;if(!r||!r.shares)return null;var i=r.shares;var s=this.getFormattedSharesData(i);return n.a.createElement("div",{className:"p-file_details__shares"},n.a.createElement("div",{className:"p-file_details__share_divider"},n.a.createElement("span",null,De.rt("Shared in")),n.a.createElement("hr",null)),s.map(function(e){return n.a.createElement(xe,{key:e.ts+"-"+e.channelId,share:e,fileId:r.id})}))}}]);return t}(a["PureComponent"]);Be.displayName="FileDetailsShares";var Ue=Be;Be.defaultProps=Le;var qe=r(715);var Ge=r(20);var He=new P["b"]("file-details");var We={tryAgain:l["b"].func,featureFileThreads:l["b"].bool};var Ve={tryAgain:k["noop"],featureFileThreads:true};function ze(e){var t=e.tryAgain,r=e.featureFileThreads;if(!r)return null;return n.a.createElement("div",{className:"p-file_details__error"},n.a.createElement("p",{className:"p-file_details__error_header"},He.t("Couldn't load file")),n.a.createElement("p",null,He.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,r=e.key;return n.a.createElement("a",{href:"https://slack.com/help/contact",target:"_blank",rel:"noopener noreferrer",key:r},t)})),n.a.createElement(Ge["d"],{type:"primary",onClick:t},He.t("Try Again")))}ze.displayName="FileDetailsError";ze.defaultProps=Ve;var Qe=new P["b"]("file-details");var Ke={featureFileThreads:l["b"].bool};var Ye={featureFileThreads:true};function Je(e){var t=e.featureFileThreads;if(!t)return null;return n.a.createElement("div",{className:"p-file_details__tombstone"},n.a.createElement("div",{className:"p-file_details__tombstone_icon"},n.a.createElement(ue["b"],{type:"trash",size:"inherit"})),n.a.createElement("p",null,Qe.t("This file was deleted.")))}Je.displayName="FileDetailsTombstone";Je.defaultProps=Ye;var Ze=r(2213);var Xe=r(2082);var $e=new P["b"]("file-details");var et={file:R["a"].File(),origin:l["b"].string,featureFileThreads:l["b"].bool,useGlobalNav:l["b"].bool,do24hrTime:l["b"].bool,fileIsFetching:l["b"].bool,reloadFile:l["b"].func,userId:l["b"].string,botId:l["b"].string,ownerName:l["b"].string};var tt={file:null,origin:null,featureFileThreads:false,useGlobalNav:false,do24hrTime:false,fileIsFetching:false,reloadFile:O.a.noop,userId:"",botId:"",ownerName:""};var rt=function(e){y()(t,e);function t(e){h()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.goBack=r.goBack.bind(r);r.renderPreview=r.renderPreview.bind(r);r.renderImage=r.renderImage.bind(r);r.renderSnippet=r.renderSnippet.bind(r);r.renderPost=r.renderPost.bind(r);r.renderEmail=r.renderEmail.bind(r);r.renderGeneric=r.renderGeneric.bind(r);r.onNameClick=r.onNameClick.bind(r);return r}v()(t,[{key:"onNameClick",value:function e(t){if(Object(L["a"])(t))return;var r=this.props,a=r.userId,n=r.botId;if(!a&&!n)return;t.preventDefault();t.persist();n?Object(U["a"])(t,n):Object(B["a"])(t,a)}},{key:"goBack",value:function e(){var t=this.props.origin;Object(F["a"])(t)}},{key:"isImage",value:function e(){return"image"===Object(N["getFileType"])(this.props.file)}},{key:"renderImage",value:function e(){return n.a.createElement(W["a"],{file:this.props.file,stretch:true})}},{key:"renderSnippet",value:function e(){return n.a.createElement(re,{fileId:this.props.file.id})}},{key:"renderPost",value:function e(){return n.a.createElement(ie,{fileId:this.props.file.id})}},{key:"renderEmail",value:function e(){return n.a.createElement(le,{fileId:this.props.file.id})}},{key:"renderGeneric",value:function e(){return n.a.createElement(q["d"],{file:this.props.file})}},{key:"renderPreview",value:function e(){var t=this.props.file;var r=Object(N["getFileType"])(t);if("image"===r)return this.renderImage();if("snippet"===r)return this.renderSnippet();if("post"===r)return this.renderPost();if("docs"===r)return this.renderPost();if("email"===r)return this.renderEmail();if("generic"===r)return this.renderGeneric();return null}},{key:"renderUserNameAndTimestamp",value:function e(){var t=this.props,r=t.file,a=t.do24hrTime,i=t.featureFileThreads,s=t.ownerName,o=t.userId,l=t.botId;var c="";!Object(N["isFilePublic"])(r)&&i&&(c=n.a.createElement("div",{className:"p-file_details__private"},$e.t("Private file")));var u="";u=l?"/services/"+l:"/team/"+o;return n.a.createElement("div",{className:"p-file_details__user_meta"},n.a.createElement(ce["a"],{href:u,className:"p-file_details__user_link",onClick:this.onNameClick},s),l&&i&&n.a.createElement(Oe["a"],null),n.a.createElement("div",{className:"p-file_details__upload_date"},$e.rt("{date} at {time}",{date:Object(M["h"])(r.timestamp),time:Object(M["l"])(r.timestamp,{do24hrTime:a})})),c)}},{key:"renderBackButtonAndTitle",value:function e(){var t=this.props,r=t.origin,a=t.featureFileThreads;if(!a&&!Object(x["a"])())return null;var i=$e.rt("Files");"member_preview"===r?i=$e.rt("Member"):"starred_items"===r?i=$e.rt("Starred Items"):"search_results"===r?i=$e.rt("Search Results"):"channel_page"===r?i=$e.rt("Channel Details"):"group_page"===r?i=$e.rt("Channel Info"):"im_page"===r?i=$e.rt("Conversation Details"):"mentions"===r&&(i=$e.rt("Activity"));return n.a.createElement(H["a"],{className:"p-file_details__header_back",onClick:this.goBack},n.a.createElement(ue["a"],{type:"chevron-medium-left",className:"p-file_details__header_back_icon"}),n.a.createElement("span",null,i))}},{key:"renderComments",value:function e(){var t=this.props.file;if(O.a.isEmpty(t.comments))return null;return n.a.createElement("div",{className:"p-file_details__comments"},n.a.createElement("hr",{className:"p-file_details__comment_separator"}),n.a.createElement(ye,{comments:t.comments,fileId:t.id}))}},{key:"renderBody",value:function e(){var t=this.props,r=t.file,a=t.featureFileThreads,i=t.fileIsFetching,s=t.reloadFile;var o=a||Object(x["a"])();if(i&&!r)return null;if(!r)return n.a.createElement(ze,{tryAgain:s,featureFileThreads:o});if(Object(N["isTombstone"])(r))return n.a.createElement(Je,{featureFileThreads:o});var l={};if(this.isImage()){l.maxWidth=(r.thumb_480_w||r.thumb_360_w)+"px";l.maxHeight=(r.thumb_480_h||r.thumb_360_h)+"px"}var c=Object(N["getFileType"])(r);var u="image"===c||"snippet"===c;var d=C()("p-file_details__meta",{"p-file_details__meta--show_filename":u});return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-file_details__meta_container"},n.a.createElement("div",{className:d},u?n.a.createElement(q["c"],{file:r,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),n.a.createElement(Ee["a"],{file:r,inFileDetails:true})),n.a.createElement("div",{className:"p-file_details__preview",style:l},this.renderPreview()),this.renderComments(),n.a.createElement(Ue,{file:r,featureFileThreads:o}))}},{key:"render",value:function e(){var t=this;var r=!this.props.useGlobalNav&&n.a.createElement(qe["a"],null,this.renderBackButtonAndTitle());return n.a.createElement("div",{className:"p-file_flexpane"},r,n.a.createElement("div",{className:"p-file_flexpane__content"},n.a.createElement(E["a"],null,function(e){var r=e.width,a=e.height;return n.a.createElement(de["b"],{width:r,height:a,fade:true},n.a.createElement("div",{className:"p-file_details"},t.renderBody()))})))}}]);return t}(a["PureComponent"]);rt.displayName="FileDetails";rt.defaultProps=tt;var at=function e(t,r){var a=r.fileId;if(!a)return{};var n=Object(S["getFileById"])(t,a);if(!n)return{};var i=Object(N["getFileEntityId"])(n),s=i.userId,o=i.botId;var l=s?Object(I["getMemberById"])(t,s):null;var c=l?Object(A["getBotIdFromMember"])(l):null;var u=o||c;var p="";if(u){var m=Object(T["getBotById"])(t,u);m&&m.name&&(p=m.name)}!p&&l&&(p=Object(A["getPrefCompliantMemberName"])(t,l));p||(p=n.username);return{file:Object(S["getFileById"])(t,a),featureFileThreads:Object(d["isFeatureEnabled"])(t,"feature_file_threads"),useGlobalNav:Object(D["b"])(t),do24hrTime:Object(j["getUserPref"])(t,"time24"),userId:s,botId:u,ownerName:p}};var nt=Object(i["connect"])(at)(rt);var it=Object(G["a"])(nt,{alwaysFetchOnMount:true});var st=r(262);var ot=r(627);var lt=r(673);var ct=r(884);var ut=r(1422);var dt=r(164);var pt=r(1115);var mt=r(263);var ht=r(347);var ft=r(358);var vt=new P["b"]("files");var bt={member:l["b"].object,onChange:l["b"].func};var gt={member:null,onChange:k["noop"]};var _t=function(e){y()(t,e);function t(e){h()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onChange=r.onChange.bind(r);r.state={value:e.member?e.member.id:null,selectedOption:e.member?yt(e.member.id):null};return r}v()(t,[{key:"componentWillReceiveProps",value:function e(t){this.setState(function(){return{value:t.member?t.member.id:null,selectedOption:t.member?yt(t.member.id):null}})}},{key:"onChange",value:function e(t,r){this.setState(function(){return{value:t,selectedOption:{value:t,label:r}}});this.props.onChange(t)}},{key:"render",value:function e(){return n.a.createElement(ht["a"],{className:"p-file_list__select p-file_list__members_select",placeholder:vt.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:kt,optionsRowHeight:30})}}]);return t}(a["PureComponent"]);_t.displayName="FilesFlexpaneMembersSelect";_t.defaultProps=gt;function yt(e){return{value:e,label:n.a.createElement("div",{className:"p-file_list__select__member"},n.a.createElement(ft["a"],{id:e,size:"small",showPresence:true}))}}function kt(e){return Object(mt["a"])(e,{members:{include_self:true},sort:{allow_empty_query:true,frecency:true,self_first:true}}).then(function(e){return{options:e.map(function(e){var t=e.model_ob;return yt(t.id)})}})}var Ot=Object(i["connect"])(function(e,t){var r=t.userId;return{member:Object(I["getMemberById"])(e,r)}})(_t);var Et=r(2216);var wt=new P["b"]("files");var Ct=Object(G["a"])(ut["a"]);var St={files:l["b"].arrayOf(R["a"].File()),filetype:l["b"].string,user:l["b"].string,scrollmark:l["b"].shape({key:l["b"].string,offset:l["b"].number}),fetchFilesPre:l["b"].func,fetchFilesPost:l["b"].func,saveScrollmark:l["b"].func,setFiletype:l["b"].func,setUser:l["b"].func,previewFile:l["b"].func,clogger:l["b"].object.isRequired,featureFileThreads:l["b"].bool,useGlobalNav:l["b"].bool};var jt={files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:k["noop"],fetchFilesPost:k["noop"],saveScrollmark:k["noop"],setFiletype:k["noop"],setUser:k["noop"],previewFile:k["noop"],featureFileThreads:false,useGlobalNav:false};var It=function(e){y()(t,e);function t(e){h()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onFileClick=r.onFileClick.bind(r);r.onScroll=r.onScroll.bind(r);r.setListRef=r.setListRef.bind(r);r.fetchPre=r.fetchPre.bind(r);r.fetchPost=r.fetchPost.bind(r);r.fetchAround=r.fetchAround.bind(r);r.renderRow=r.renderRow.bind(r);r.renderFile=r.renderFile.bind(r);r.requestPre=null;r.requestPost=null;r.keys=null;r.list=null;r.layout=new ct["a"];r.state={reachedStart:false,reachedEnd:false};return r}v()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,r=t.key,a=t.offset;this.layout.setAnchor(r,a);this.props.saveScrollmark(null)}},{key:"componentWillReceiveProps",value:function e(t){var r=this.props,a=r.filetype,n=r.user;if(t.filetype!==a||t.user!==n){this.requestPre&&this.requestPre.cancel();this.requestPost&&this.requestPost.cancel();this.requestPre=null;this.requestPost=null;this.setState(function(){return{reachedStart:false,reachedEnd:false}});this.layout&&this.layout.setAnchor(false)}}},{key:"onFileClick",value:function e(t,r){if(!this.list)return;if(!r)return;var a=this.props.clogger;a.track("FLEXPANE_FILE_CLICKED",{click_file_id:r.id});this.props.saveScrollmark({key:r.id,offset:this.layout.getOffsetForKey(r.id)-this.list.getScrollTop()});this.props.previewFile({fileId:r.id})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"fetchPre",value:function e(){var t=this;if(this.requestPre)return false;if(this.state.reachedStart)return false;var r=this.props,a=r.filetype,n=r.user;this.requestPre=this.props.fetchFilesPre({types:a,user:n});return this.requestPre.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.paging;var a=r.page;1===a&&t.setState(function(){return{reachedStart:true}})}).finally(function(){t.requestPre=null})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;var r=this.props,a=r.filetype,n=r.user;this.requestPost=this.props.fetchFilesPost({types:a,user:n});return this.requestPost.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.paging;var a=r.page,n=r.pages;a>=n&&t.setState(function(){return{reachedEnd:true}})}).finally(function(){t.requestPost=null})}},{key:"fetchAround",value:function e(){if(this.requestPre&&this.requestPost)return false;if(this.state.reachedEnd)return this.fetchPre();if(this.state.reachedStart)return this.fetchPost();return this.fetchPre()}},{key:"renderRow",value:function e(t){if(!this.props.featureFileThreads&&!Object(x["a"])())return null;var r=this.keys[t];if(!r)return null;switch(r[0]){case"L":return n.a.createElement("div",{className:"p-file_list__loading"},wt.t("Loading\u2026"));case"P":return n.a.createElement("div",{className:"p-file_list__empty"},wt.t("No matching files were found."));default:return this.renderFile(t)}}},{key:"renderFile",value:function e(t){var r=this.props.files[t];if(!r)return null;var a=t===this.props.files.length-1;var i=C()("p-file_list__file",{"p-file_list__file--last":a});return n.a.createElement(Ct,{onClick:this.onFileClick,file:r,fileId:r.id,className:i,fullWidth:true})}},{key:"render",value:function e(){var t=this;this.keys=this.props.files.map(function(e){return e.id});this.state.reachedEnd||this.keys.push("Loading"+this.keys.length);!this.keys.length&&this.state.reachedStart&&this.state.reachedEnd&&this.keys.push("Placeholder");var r=this.props.useGlobalNav?"p-file_list__filters p-file_list__filters--global-nav":"p-file_list__filters";var a=this.props.useGlobalNav?null:n.a.createElement(qe["a"],{className:"p-file_list__header"},n.a.createElement("span",null,wt.rt("Files")));return n.a.createElement("div",{className:"p-file_flexpane p-file_flexpane--list"},a,n.a.createElement("div",{className:r},n.a.createElement(pt["a"],{filetype:this.props.filetype,onChange:this.props.setFiletype}),n.a.createElement(Ot,{userId:this.props.user,onChange:function e(r){t.props.setUser(r)}})),n.a.createElement("div",{className:"p-file_list"},n.a.createElement(E["a"],null,function(e){var r=e.width,a=e.height;return n.a.createElement(lt["a"],{width:r,height:a,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.setListRef,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost})})))}}]);return t}(a["PureComponent"]);It.displayName="FileList";It.defaultProps=jt;var Tt=Object(st["createSelector"])([S["getAllFiles"],ot["getFlexpaneFiles"]],function(e,t){return t.map(function(t){return e[t]}).filter(function(e){return e})});var Nt=Object(i["connect"])(function(e){return{files:Tt(e),scrollmark:Object(ot["getScrollmark"])(e),filetype:Object(ot["getFiletype"])(e),user:Object(ot["getUser"])(e),featureFileThreads:Object(d["isFeatureEnabled"])(e,"feature_file_threads"),useGlobalNav:Object(D["b"])(e),clogger:Object(dt["a"])({state:e})}},{fetchFilesPre:ot["fetchFilesPre"],fetchFilesPost:ot["fetchFilesPost"],saveScrollmark:ot["saveScrollmark"],setFiletype:ot["setFiletype"],setUser:ot["setUser"],previewFile:Ce["c"]})(It);function At(e){if(e.fileId)return n.a.createElement(it,e);if(e.list)return n.a.createElement(Nt,e);return null}At.defaultProps={fileId:null,list:false,origin:null};function Rt(e){var t=Object(c["getFlexpaneState"])(e),r=t.flexName,a=t.flexExtra,n=t.flexOrigin;if(Object(d["isFeatureEnabled"])(e,"feature_remove_flexpane_store")){r=Object(u["getSecondaryView"])(e);a=Object(u["getFlexParams"])(e)[0];n=Object(u["getFlexOrigin"])(e)}var i=Object(p["a"])(a);return{list:"files"===r&&!i,fileId:"files"===r&&i?a:null,origin:"files"===r?n:null}}var Mt=Object(i["connect"])(Rt)(At);var Pt=Mt;var xt=function e(t,r){if(!t)throw new Error("mountFilesFlexpane must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(Pt,null)),r)};var Dt=xt;var Ft=r(51);Object(Ft["a"])("interop.mountFilesFlexpane",Dt)},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(33);var c=r(51);var u=r(5);var d=r.n(u);var p=r(6);var m=r.n(p);var h=r(7);var f=r.n(h);var v=r(8);var b=r.n(v);var g=r(129);var _=r(15);var y=r.n(_);var k=r(2);var O=r.n(k);var E=r(20);var w=r(2132);var C={name:g["b"].string,avatar:g["b"].string,onClick:g["b"].oneOfType([g["b"].func,g["b"].string]).isRequired,scrollTop:g["b"].bool};var S={name:"",avatar:"",scrollTop:false};var j=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this;var r=y()("p-ent_nav_header",{"p-ent_nav_header__scroll_border":this.props.scrollTop});var a={backgroundImage:"url('"+this.props.avatar+"')"};return n.a.createElement("div",{className:r},n.a.createElement(E["c"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_header__org_img",alt:"org avatar",style:a,type:"link"}),n.a.createElement("div",{className:"p-ent_nav_header__org_name"},this.props.name))}}]);return t}(a["PureComponent"]);j.displayName="DashboardNavHeader";j.defaultProps=S;var I=j;var T=I;var N=r(9);var A=r.n(N);var R=r(18);var M=r(2134);var P={isOpen:g["b"].bool,icon:g["b"].string.isRequired,iconColor:g["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:g["b"].string.isRequired,onClick:g["b"].func.isRequired};var x={isOpen:false};var D=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t,r=this;var a=y()("p-ent_nav_item_primary","p-ent_nav_item_primary--"+this.props.iconColor,(t={},A()(t,"p-ent_nav_item_primary--expanded_"+this.props.iconColor,this.props.isOpen),A()(t,"p-ent_nav_item_primary--expanded",this.props.isOpen),t));var i="ent-nav-"+Object(k["camelCase"])(this.props.name);return n.a.createElement(E["c"],{onClick:function e(){return r.props.onClick(r.props.name)},className:a,"data-qa":i},n.a.createElement(R["a"],{type:this.props.icon}),n.a.createElement("div",{className:"p-ent_nav_item_primary__header"},this.props.name))}}]);return t}(a["PureComponent"]);D.displayName="DashboardNavItemPrimary";D.defaultProps=x;var F=D;var L=F;var B=r(2136);var U={subItems:g["b"].array.isRequired,animateClose:g["b"].bool};var q={animateClose:false};var G=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSecondaryItems=r.renderSecondaryItems.bind(r);return r}m()(t,[{key:"renderSecondaryItems",value:function e(){var t=O.a.map(this.props.subItems,function(e){var t=y()("p-ent_nav_item_secondary__item",{"p-ent_nav_item_secondary__item--selected":e.selected});var r="ent-nav-"+O.a.camelCase(e.name);return n.a.createElement(E["c"],{key:e.id,onClick:function t(){return e.onClick(e.id)},className:t,"data-qa":r},e.name," ",n.a.createElement(R["a"],{className:"p-ent_nav_item_secondary__icon",type:e.icon}))});return t}},{key:"render",value:function e(){var t=y()("p-ent_nav_item_secondary__container",{"p-ent_nav_item_secondary__container--collapse":this.props.animateClose});return n.a.createElement("div",{className:t},this.renderSecondaryItems())}}]);return t}(a["PureComponent"]);G.displayName="DashboardNavItemSecondary";G.defaultProps=q;var H=G;var W=H;var V=r(2138);var z={isOpen:g["b"].bool,animateClose:g["b"].bool,icon:g["b"].string.isRequired,iconColor:g["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:g["b"].string.isRequired,onClick:g["b"].func.isRequired,subItems:g["b"].array};var Q={isOpen:false,animateClose:false,subItems:null};var K=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toggleAnimation=r.toggleAnimation.bind(r);r.shouldAnimateClosed=r.shouldAnimateClosed.bind(r);return r}m()(t,[{key:"componentDidMount",value:function e(){var t=this.element;t&&(t.style.maxHeight=O.a.head(t.children).offsetHeight+"px")}},{key:"componentDidUpdate",value:function e(){(this.props.animateClose||this.props.isOpen)&&this.toggleAnimation()}},{key:"toggleAnimation",value:function e(){var t=this.element;if(t){var r=O.a.map(t.children,function(e){return e.offsetHeight});this.props.animateClose&&(t.style.maxHeight=O.a.head(r)+"px");this.props.isOpen&&(t.style.maxHeight=O.a.sum(r)+"px")}}},{key:"shouldAnimateClosed",value:function e(){var t=this.element;if(this.props.animateClose&&t){var r=O.a.head(t.children).offsetHeight;var a=1;var n=r-a;var i=r+a;if(t.style.maxHeight>=n+"px"&&t.style.maxHeight<=i+"px")return false;return true}return false}},{key:"render",value:function e(){var t=this;var r=A()({"p-ent_nav_item--expanded":this.props.isOpen,"p-ent_nav_item--collapse":this.shouldAnimateClosed(),"p-ent_nav_item--sub_items":this.props.subItems&&this.props.isOpen},"p-ent_nav_item--expanded_"+this.props.iconColor,this.props.isOpen||this.shouldAnimateClosed());var a=y()("p-ent_nav_item",r);var i=null;this.props.subItems&&(this.props.isOpen||this.props.animateClose)&&(i=n.a.createElement(W,{subItems:this.props.subItems,animateClose:this.props.animateClose}));return n.a.createElement("div",{ref:function e(r){t.element=r},className:a},n.a.createElement(L,{isOpen:this.props.isOpen,icon:this.props.icon,iconColor:this.props.iconColor,name:this.props.name,onClick:this.props.onClick}),n.a.createElement("div",null,i))}}]);return t}(a["PureComponent"]);K.displayName="DashboardNavItem";K.defaultProps=Q;var Y=K;var J=Y;var Z=r(2140);var X={avatar:g["b"].string,name:g["b"].string,onClick:g["b"].func.isRequired};var $={name:"",avatar:""};var ee=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this;var r={backgroundImage:"url('"+this.props.avatar+"')"};return n.a.createElement("button",{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_user_menu","data-qa":"ent-nav-user_menu","data-popover-trigger":"user_menu"},n.a.createElement("div",{className:"p-ent_nav_user_menu__avatar",alt:"user menu avatar",style:r}),n.a.createElement("div",{className:"p-ent_nav_user_menu__name"},this.props.name),n.a.createElement(R["a"],{type:"chevron-down"}))}}]);return t}(a["PureComponent"]);ee.displayName="DashboardNavUserMenu";ee.defaultProps=$;var te=ee;var re=te;var ae=r(2142);var ne={header:g["b"].shape({name:g["b"].string,avatar:g["b"].string,onClick:g["b"].oneOfType([g["b"].func,g["b"].string]).isRequired,scrollTop:g["b"].bool}).isRequired,navItems:g["b"].arrayOf(g["b"].shape({isOpen:g["b"].bool,toClose:g["b"].bool,icon:g["b"].string.isRequired,iconColor:g["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:g["b"].string.isRequired,onClick:g["b"].func.isRequired,subItems:g["b"].array})).isRequired,userMenu:g["b"].shape({avatar:g["b"].string,name:g["b"].string,onClick:g["b"].func.isRequired}).isRequired};var ie=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderNavItems=r.renderNavItems.bind(r);r.makeScrollable=r.makeScrollable.bind(r);r.onWindowResize=r.onWindowResize.bind(r);r.state={scrollTop:false,scrollBottom:false};return r}m()(t,[{key:"componentDidMount",value:function e(){this.makeScrollable();window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function e(){this.makeScrollable()}},{key:"makeScrollable",value:function e(){var t=this.element;if(t){var r=t.scrollHeight-t.scrollTop;this.setState(function(){return{scrollTop:0!==t.scrollTop,scrollBottom:!(r===t.offsetHeight)}})}}},{key:"renderNavItems",value:function e(){var t=O.a.map(this.props.navItems,function(e){return n.a.createElement(J,{key:e.id,isOpen:e.isOpen,animateClose:e.animateClose,icon:e.icon,iconColor:e.iconColor,name:e.name,onClick:e.onClick,subItems:e.subItems})});return t}},{key:"render",value:function e(){var t=this;var r=this.props.header,a=r.name,i=r.avatar,s=r.onClick;var o=y()("p-ent_nav_item__wrapper",{"p-ent_nav_item__scroll_border":this.state.scrollBottom});return n.a.createElement("div",{className:"p-ent_nav"},n.a.createElement(T,{name:a,avatar:i,onClick:s,scrollTop:this.state.scrollTop}),n.a.createElement("div",{ref:function e(r){t.element=r},onScroll:this.makeScrollable,className:o},this.renderNavItems()),n.a.createElement(re,{avatar:this.props.userMenu.avatar,name:this.props.userMenu.name,onClick:this.props.userMenu.onClick}))}}]);return t}(a["PureComponent"]);ie.displayName="DashboardNav";var se=ie;var oe=se;Object(c["a"])("interop.dashboardNav",{render:function e(t,r,a){if(!t)throw new Error("dashboardNav render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(oe,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(104);var l=r.n(o);var c=r(14);var u=r(139);var d=r(33);var p=r(32);var m=r.n(p);var h=r(9);var f=r.n(h);var v=r(5);var b=r.n(v);var g=r(7);var _=r.n(g);var y=r(6);var k=r.n(y);var O=r(8);var E=r.n(O);var w=r(129);var C=r(15);var S=r.n(C);var j=r(2);var I=r(3324);var T=r(866);var N=r(170);var A=r(26);var R=r(16);var M=r(212);var P=r(77);var x=r(11);var D=r(17);var F=r(21);var L=r(240);var B=r(10);var U=r(164);var q=r(270);var G=r(257);var H=r(18);var W=r(283);var V=r(691);var z=r(65);var Q=r(92);var K=r(456);var Y=r(408);var J=r(898);var Z=r(1144);var X=r(103);var $=r(1147);var ee=r(174);var te=r(2173);var re=new B["b"]("workspace_directory");var ae={team:w["b"].shape({admins:w["b"].arrayOf(w["b"].shape({real_name:w["b"].string})),can_leave:w["b"].bool,cannot_leave_reasons:w["b"].array,created:w["b"].number,deleted:w["b"].bool,description:w["b"].string,discoverable:w["b"].string,domain:w["b"].string,enterprise_id:w["b"].string,date_requested_join:w["b"].oneOfType([w["b"].string,w["b"].number]),icon:w["b"].object,id:w["b"].string,is_member:w["b"].bool,joined_date:w["b"].number,name:w["b"].string,user_counts:w["b"].object}).isRequired,callLeaveWorkspace:w["b"].func,onClose:w["b"].func,onActionReject:w["b"].func,onActionResolve:w["b"].func,fetchEnterpriseTeamById:w["b"].func,onLeaveReject:w["b"].func,onLeaveResolve:w["b"].func,onDone:w["b"].func,fetchTeam:w["b"].func,isGuest:w["b"].bool,displayDirectoryInModal:w["b"].bool,channelRedirect:w["b"].string,postLaunchAction:w["b"].string,userIdFromURL:w["b"].string};var ne={callLeaveWorkspace:j["noop"],onClose:j["noop"],onActionResolve:j["noop"],onActionReject:j["noop"],fetchEnterpriseTeamById:j["noop"],onLeaveReject:j["noop"],onLeaveResolve:j["noop"],onDone:j["noop"],fetchTeam:j["noop"],isGuest:false,displayDirectoryInModal:false,channelRedirect:null,postLaunchAction:null,userIdFromURL:null};var ie=function(e){E()(t,e);function t(e){b()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={team:{},loading:false};r.onDialogClose=r.onDialogClose.bind(r);r.onKeyPress=r.onKeyPress.bind(r);r.onWorkspaceLeave=r.onWorkspaceLeave.bind(r);r.setLoading=r.setLoading.bind(r);return r}k()(t,[{key:"componentDidMount",value:function e(){var t=this.props.team;this.setWorkspace(t);this.fetchWorkspaceInfo()}},{key:"onWorkspaceLeave",value:function e(t){var r=this.props,a=r.team,i=r.onLeaveReject,o=r.onLeaveResolve,l=r.onDone;t.preventDefault();return this.props.callLeaveWorkspace({teamId:a.id}).then(function(){return o({workspace:n()({},a,{is_member:false})})}).then(function(){return l()}).catch(function(e){return i({node:s.a.createElement("span",null,re.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:e})})}},{key:"onKeyPress",value:function e(t,r){t.preventDefault();if("Enter"===t.key)switch(r){case"leave":return this.onWorkspaceLeave();default:}return null}},{key:"onDialogClose",value:function e(t){if(t){t.stopPropagation();t.preventDefault()}this.props.onClose()}},{key:"setWorkspace",value:function e(t,r){this.setState(function(){return{team:t}},r)}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getTitleAria",value:function e(){var t=this.state.team.name,r=void 0===t?"":t;if(!r)return"Workspace Name";return r}},{key:"canLeaveWorkspace",value:function e(){var t=this.state.team,r=t.is_member,a=t.can_leave;var n=this.props.isGuest;return r&&a&&!n}},{key:"fetchWorkspaceInfo",value:function e(){var t=this;var r=this.props.team.id;this.setLoading(true);return this.props.fetchEnterpriseTeamById({teamId:r,additionalOptions:{include_admins:true}}).then(function(e){t.setWorkspace(e,function(){return t.setLoading(false)})})}},{key:"listifyAdminRealNames",value:function e(t){var r=Object(j["map"])(t,function(e){return Object(R["getMemberRealName"])(e)});return Object(B["g"])(r,{noEscape:true})}},{key:"renderDialogHeaderCaption",value:function e(t){var r=this.state.loading;if(r)return null;if(!t)return null;return s.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},s.a.createElement(H["b"],{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),t)}},{key:"renderButton",value:function e(){var t=this.props,r=t.onActionReject,a=t.onActionResolve;var n=this.state,i=n.team,o=n.loading;if(o)return null;var l=!Object(T["a"])();return s.a.createElement($["a"],{team:i,customClasses:"margin_top_100",buttonContext:"dialog",featureZeroWorkspaceOnboarding:true,onActionReject:r,onActionResolve:a,anchorPage:"workspace_directory",tabIndex:"0",size:"medium",doLaunchInNewTab:l,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:true})}},{key:"renderDialogHeader",value:function e(t){var r=this.state.team;var a=r.name,n=void 0===a?"":a,i=r.domain,o=void 0===i?"":i;var l=S()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(ee["c"])()});return s.a.createElement("div",{className:l},s.a.createElement(K["a"],{entityType:"workspace",dimension:100,entityData:r,featureReactMessages:true,featureReactMemberProfileCard:true}),s.a.createElement("div",{className:"p-workspace_directory_dialog__name"},re.t("{name}",{name:Object(B["n"])(n)})),s.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},re.t("{domain}.slack.com",{domain:o})),this.renderDialogHeaderCaption(t),this.renderButton())}},{key:"renderInfiniteSpinner",value:function e(){return s.a.createElement("div",{className:"overflow_hidden margin_100"},s.a.createElement(Q["a"],{size:"jumbo",className:"inline_block full_width"}))}},{key:"renderDialogBody",value:function e(){if(this.state.loading)return this.renderInfiniteSpinner();var t=this.state.team,r=t.description,a=t.admins,n=t.user_counts;var i=[];r&&i.push({heading:re.t("About"),text:r,key:"dialog-description"});i.push({heading:re.t("Active members"),text:re.t("{activeMembers}",{activeMembers:Object(B["k"])(Object(j["get"])(n,"active_members",0))}),key:"dialog-active-members"},{heading:re.t("Workspace admins"),text:this.listifyAdminRealNames(a),key:"dialog-admins"});var o=function e(t){return s.a.createElement("div",{key:t.key},s.a.createElement("p",{className:"margin_bottom_25 bold"},t.heading),s.a.createElement("p",null,t.text))};return s.a.createElement("div",{className:"p-workspace_directory_dialog__body"},i.map(function(e){return o(e)}))}},{key:"renderDialogFooter",value:function e(){var t=this;return s.a.createElement("span",{className:"p-workspace_directory_dialog__leave",role:"button",tabIndex:"0",onClick:this.onWorkspaceLeave,onKeyPress:function e(r){return t.onKeyPress(r,"leave")}},re.t("Leave this workspace"))}},{key:"renderDialogOnMobile",value:function e(t){var r=this.canLeaveWorkspace();return s.a.createElement(Y["a"],{showCancelButton:false,showCloseButton:false,showGoButton:false,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(t),s.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),r&&this.renderDialogFooter()))}},{key:"render",value:function e(){var t=this.state.team;var r=Object(ee["f"])(t,{context:"dialog"});if(Object(ee["c"])())return this.renderDialogOnMobile(r);var a=this.props.displayDirectoryInModal;var i=S()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!a});var o={contentLabel:r,className:i,showCloseButton:true,showCancelButton:false,showGoButton:false,showHeader:true,title:this.renderDialogHeader(r),titleAria:this.getTitleAria(),useSlackScrollbar:false,showFooter:false,shouldCloseOnOverlayClick:true,onClose:this.onDialogClose,onCancel:this.onDialogClose};this.canLeaveWorkspace()&&(o=n()({},o,{showFooter:true,footerText:this.renderDialogFooter()}));return s.a.createElement(X["a"],o,this.renderDialogBody())}}]);return t}(i["Component"]);ie.displayName="WorkspaceDirectoryDialog";ie.defaultProps=ne;var se={callLeaveWorkspace:q["d"],fetchEnterpriseTeamById:q["j"]};var oe=Object(c["connect"])(null,se)(ie);var le=oe;var ce=r(871);var ue=r(608);var de=r(2175);var pe={workspaces:w["b"].array.isRequired,scrollElement:w["b"].any,onScroll:w["b"].func,renderWorkspaceCard:w["b"].func,topOffset:w["b"].number};var me={scrollElement:window,onScroll:j["noop"],renderWorkspaceCard:j["noop"],topOffset:0};var he=function(e){E()(t,e);k()(t,null,[{key:"getUpdatedRowIndex",value:function e(t){var r=t.currentRow,a=void 0===r?0:r,n=t.prevColumns,i=void 0===n?0:n,s=t.updatedColumns,o=void 0===s?0:s;if(!a)return 0;if(i===o)return a;var l=a*i;return Math.floor(l/o)}}]);function t(e){b()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]);r.state={columns:3};r.list=null;r.keys=[];r.rowsByIndex=[];r.currentRow=0;return r}k()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.calculateColumns()}},{key:"componentDidUpdate",value:function e(r,a){if(this.state.columns!==a.columns){var n=t.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:a.columns,updatedColumns:this.state.columns});this.currentRow=n;var i=this.getKeyForRow(n);this.keys&&this.list.scrollToKey(i)}}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onScroll",value:function e(t){return this.props.onScroll(t)}},{key:"onResize",value:function e(){var t=this.list.getVisibleRange(),r=t.start;this.currentRow=r||0;this.calculateColumns()}},{key:"getListKeys",value:function e(){return this.keys}},{key:"getContentHeight",value:function e(){return this.list.getContentHeight()}},{key:"getKeyForRow",value:function e(t){return this.keys[t]}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setColumns",value:function e(t){this.setState(function(){return{columns:t}})}},{key:"getWorkspacesByRowIndex",value:function e(t){var r=this.state.columns;var a=this.props.workspaces;var n=this.rowsByIndex[t];var i=Math.min(n+r,a.length);return Object(j["range"])(n,i)}},{key:"calculateColumns",value:function e(){var t=window.innerWidth;var r=3;r=Object(ee["c"])(t)?1:Object(ee["d"])(t)?2:3;this.state.columns!==r&&this.setColumns(r)}},{key:"renderCell",value:function e(t){var r=this.props,a=r.workspaces,n=r.renderWorkspaceCard;var i=a[t];if(!i)return null;return s.a.createElement("div",{className:"p-workspace_grid_list__cell",key:"grid_list_cell_"+t},n(i))}},{key:"renderRow",value:function e(t){var r=this;var a=this.getWorkspacesByRowIndex(t);var n=S()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return s.a.createElement("div",{className:n},a.map(function(e){return r.renderCell(e)}))}},{key:"render",value:function e(){var t=this.props,r=t.topOffset,a=t.scrollElement,i=m()(t,["topOffset","scrollElement"]);this.rowsByIndex=Object(j["range"])(0,this.props.workspaces.length,this.state.columns);this.keys=this.rowsByIndex.map(function(e){return e.toString()});return s.a.createElement(ue["a"],n()({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},i))}}]);return t}(i["PureComponent"]);he.displayName="WorkspaceGridList";he.defaultProps=me;var fe=he;var ve=fe;var be=r(20);var ge=r(473);var _e=r(54);var ye=r(1010);var ke=r(2177);var Oe=new B["b"]("workspace_directory");var Ee={enterprise:w["b"].shape({icon:w["b"].object,id:w["b"].string,name:w["b"].string}).isRequired,user:w["b"].shape({id:w["b"].string,is_admin:w["b"].bool,is_owner:w["b"].bool,is_primary_owner:w["b"].bool,profile:w["b"].object}).isRequired,displayManageOrgButton:w["b"].bool,displaySearchBar:w["b"].bool,isMobileView:w["b"].bool,signoutUrl:w["b"].string.isRequired,prefCompliantMemberName:w["b"].string,organizationUrl:w["b"].string,selectedSearchOption:w["b"].object,onOptionSelected:w["b"].func,onClearHeaderInput:w["b"].func};var we={isMobileView:false,displayManageOrgButton:false,displaySearchBar:false,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:j["noop"],onClearHeaderInput:j["noop"]};var Ce=function(e){E()(t,e);function t(e){b()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"]);return r}k()(t,[{key:"onSelectOption",value:function e(t){this.props.onOptionSelected(t)}},{key:"onMenuItemSelected",value:function e(t){var r=this.props.signoutUrl;var a=window.location.origin+"/account/settings";switch(t){case"settings":window.open(a,"_self");break;case"signout":window.open(r,"_self");break;default:}return null}},{key:"maybeRenderManageOrganizationButton",value:function e(){if(!this.props.displayManageOrgButton)return null;var t=Oe.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return s.a.createElement(be["d"],{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank",tabIndex:"0"},t)}},{key:"maybeRenderSearchBar",value:function e(){var t=this.props.selectedSearchOption;if(!this.props.displaySearchBar||this.props.isMobileView)return null;return s.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},s.a.createElement(ce["a"],{prepopulatedOption:t,featureZeroWorkspaceOnboarding:true,membersOnly:false,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}},{key:"renderUserSettings",value:function e(){return s.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}},{key:"renderUserMenu",value:function e(t){var r=this;var a=this.props,i=a.prefCompliantMemberName,o=a.enterprise,l=a.signoutUrl;var c=function e(){return s.a.createElement(_e["b"],{key:"workspace_directory_user_menu_name",label:s.a.createElement("span",{className:"black"},i),description:Oe.t("Account settings",{fallbackHash:"e32707613d1f53b92e6162cc5ddb4a9bb58a2ec6"}),href:"/account/settings",onSelected:function e(){return r.onMenuItemSelected("settings")},className:"no_underline",role:"link"})};var u=function e(){return s.a.createElement(_e["b"],{key:"workspace_directory_user_menu_sign_out",label:Oe.t("Sign out of {orgName}",{orgName:Object(B["n"])(o.name)}),href:l,onSelected:function e(){return r.onMenuItemSelected("signout")},className:"no_underline",danger:true,role:"link"})};return s.a.createElement(_e["f"],n()({},t,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),c(),s.a.createElement(_e["d"],null),u())}},{key:"renderAvatar",value:function e(){var t=this.props.user;return s.a.createElement(_e["e"],{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},s.a.createElement(be["c"],{"aria-haspopup":true,className:"p-workspace_directory_header__user_icon",tabIndex:"0"},s.a.createElement(K["a"],{entityType:"member",dimension:36,entityData:t,customClasses:"flex_none cursor_pointer",featureReactMessages:true})))}},{key:"render",value:function e(){var t=this.props,r=t.enterprise,a=t.isMobileView,n=t.organizationUrl;var i=a?Oe.t("Directory"):Oe.t("Workspace Directory");return s.a.createElement(ye["a"],{"data-qa":"ws_directory_header",title:i,team:r,isEnterprise:true,logoAriaLabel:"Slack",logoLink:n,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}]);return t}(i["Component"]);Ce.displayName="WorkspaceDirectoryHeader";Ce.defaultProps=we;var Se=function e(t,r){var a=r.user,n=r.enterprise,i=void 0===n?{}:n;return{signoutUrl:Object(x["getFromBootData"])(t,"signout_url"),prefCompliantMemberName:Object(R["getPrefCompliantMemberName"])(t,a),organizationUrl:Object(ge["a"])(t,i.domain)}};var je=Object(c["connect"])(Se)(Ce);var Ie=je;var Te=r(2179);var Ne={title:w["b"].node,description:w["b"].node,showCloseButton:w["b"].bool,onClose:w["b"].func,className:w["b"].string,isHidden:w["b"].bool};var Ae={title:"",description:"",showCloseButton:false,onClose:j["noop"],className:"",isHidden:true};var Re=function(e){E()(t,e);function t(e){b()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClose=r.onClose.bind(r);r.onKeyPress=r.onKeyPress.bind(r);return r}k()(t,[{key:"onClose",value:function e(t){this.props.onClose(t)}},{key:"onKeyPress",value:function e(t){t.preventDefault();if(13===t.which)return this.props.onClose(t);return null}},{key:"renderCloseButton",value:function e(){var t=this.props.isHidden;return s.a.createElement(be["c"],{tabIndex:t?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},s.a.createElement(H["b"],{type:"times"}))}},{key:"renderBannerText",value:function e(){var t=this.props,r=t.title,a=t.description;return s.a.createElement("div",{className:"p-workspace_directory_banner__text"},s.a.createElement("div",{className:"p-workspace_directory_banner__title"},r),s.a.createElement("span",{className:"p-workspace_directory_banner__description"},a))}},{key:"render",value:function e(){var t=this.props,r=t.showCloseButton,a=t.className;var n=S()("p-workspace_directory_banner",a);return s.a.createElement("div",{className:n},this.renderBannerText(),r&&this.renderCloseButton())}}]);return t}(i["PureComponent"]);Re.displayName="WorkspaceDirectoryBanner";Re.defaultProps=Ae;var Me=Re;var Pe=Me;var xe=r(2078);var De=new B["b"]("workspace_directory");var Fe={enterprise:w["b"].shape({id:w["b"].string,name:w["b"].string,domain:w["b"].string,icon:w["b"].object,locale:w["b"].string}).isRequired,user:w["b"].shape({id:w["b"].string,name:w["b"].string,is_admin:w["b"].bool,is_owner:w["b"].bool,profile:w["b"].object}),fetchDirectoryWorkspaces:w["b"].func.isRequired,fetchEnterpriseTeamById:w["b"].func.isRequired,enqueueToast:w["b"].func,fetchRawMembersFromAPI:w["b"].func.isRequired,openModal:w["b"].func,closeModal:w["b"].func,allowWorkspaceRequest:w["b"].bool,showRequestDialog:w["b"].func,launchTeamId:w["b"].string,displayDirectoryInModal:w["b"].bool,onClose:w["b"].func,hasSeenOnboardingBanner:w["b"].bool,queryString:w["b"].object,setUserPrefByApi:w["b"].func,clogger:w["b"].object.isRequired};var Le={organizationName:"",organizationIcon:"https://vignette.wikia.nocookie.net/plantsvszombies/images/4/42/Shrek_emoji.png/revision/latest?cb=20160413203711",user:{},enqueueToast:j["noop"],openModal:j["noop"],closeModal:j["noop"],allowWorkspaceRequest:false,showRequestDialog:j["noop"],launchTeamId:null,displayDirectoryInModal:true,onClose:j["noop"],hasSeenOnboardingBanner:false,queryString:null,setUserPrefByApi:j["noop"]};var Be=300;var Ue=Object(D["b"])();var qe=function(e){E()(t,e);k()(t,null,[{key:"sortListByWorkspaceName",value:function e(t){return Object(j["sortBy"])(t,function(e){return e.name})}}]);function t(e){b()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isMobileView:false,hasScrolledPastHeaderPane:false,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:true,viewingHiddenWorkspace:false};r.dialog=null;r.headerPaneHeight=null;r.clientHeight=null;r.page=null;r.pageSearch=null;r.listRefs={allWorkspaces:null,yourWorkspaces:null};r.windowScroller=null;r.onboardingBannerHeight=0;r.trackingCode="";Object(j["bindAll"])(r,["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"]);return r}k()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(ee["c"])());window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setLoadingWorkspaces("allWorkspaces",true);this.setLoadingWorkspaces("yourWorkspaces",true);if(this.props.launchTeamId){this.trackingCode="workspace_url";this.fetchTeam(this.props.launchTeamId)}var t=this.props.hasSeenOnboardingBanner;this.setHideOnboardingBanner(t);Object(ee["m"])({trackingCode:this.trackingCode,clogger:this.props.clogger});var r=this.props.queryString&&Object(j["get"])(this.props.queryString,"user",null);r&&this.fetchSingleMemberToPrepopulate(r)}},{key:"componentDidUpdate",value:function e(t,r){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);var a=this.getListHeight("yourWorkspaces");a!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:a});this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(o["findDOMNode"])(this.onboardingBanner).clientHeight);!r.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition();r.selectedOption!==this.state.selectedOption&&this.fetchSearchResults();this.maybeFetchNextPage(r)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;this.setIsMobileView(Object(ee["c"])());var t=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:t})}},{key:"onScroll",value:function e(t){var r=t.currentTarget.scrollTop;var a=r>=this.headerPaneHeight;a&&this.pageSearch.getWrappedInstance().blur();a!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(a)}},{key:"onWindowScrollerScroll",value:function e(t){var r=t.scrollTop;this.doInfiniteScrollHandler({scrollTop:r})}},{key:"onModalClose",value:function e(){this.dialog&&this.dialog.close();this.props.onClose&&this.props.onClose()}},{key:"onSearchAgainButtonClick",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().onSearchAgainTriggered()}},{key:"onOnboardingBannerDismiss",value:function e(){this.setHideOnboardingBanner(true);this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:true}).catch(function(e){return Ue.error("Error setting seen_onboarding_banner user pref",e)})}},{key:"onActionReject",value:function e(t){var r=t.node,a=t.err;r&&this.setToastText(r);Ue.error("Error with Workspace Action in WorkspaceDirectory - ",a)}},{key:"onActionResolve",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.node,a=t.workspace;if(a&&a.is_member){this.onWorkspaceJoin({workspace:a});if(this.props.displayDirectoryInModal)return this.onModalClose()}r&&this.setToastText(r);return this.closeDialog()}},{key:"onWorkspaceJoin",value:function e(r){var a=this;var i=r.workspace;this.setState(function(e){var r=a.maybeUpsertWorkspaceToSearchResults(e,i);var s=e.yourWorkspaces.workspaces;var o=Object(j["unionBy"])([i],s,"id");var l=e.yourWorkspaces.totalWorkspaces+1;var c={yourWorkspaces:n()({},e.yourWorkspaces,{workspaces:t.sortListByWorkspaceName(o),totalWorkspaces:l}),searchResults:n()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(r)})};return c})}},{key:"onWorkspaceLeave",value:function e(r){var a=this;var i=r.workspace;this.setState(function(e){var r=a.maybeUpsertWorkspaceToSearchResults(e,i);var s=e.yourWorkspaces.workspaces;var o=Object(j["filter"])(s,function(e){return e.id!==i.id});var l=e.yourWorkspaces.totalWorkspaces-1;var c=e.allWorkspaces.workspaces;var u=Object(j["unionBy"])([i],c,"id");var d={yourWorkspaces:n()({},e.yourWorkspaces,{workspaces:o,totalWorkspaces:l}),allWorkspaces:n()({},e.allWorkspaces,{workspaces:t.sortListByWorkspaceName(u)}),searchResults:n()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(r)})};return d},function(){a.closeDialog()})}},{key:"onSelectOption",value:function e(t){this.setSearchResultsOptions(t)}},{key:"onClearHeaderInput",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().clearInput()}},{key:"getListHeight",value:function e(t){return this.listRefs[t]?this.listRefs[t].getContentHeight():0}},{key:"setPageRef",value:function e(t){this.page=t}},{key:"setPageSearchRef",value:function e(t){this.pageSearch=t}},{key:"setHeaderPaneRef",value:function e(t){this.headerPane=t}},{key:"setOnboardingBannerRef",value:function e(t){this.onboardingBanner=t}},{key:"setListRef",value:function e(t){var r=t.workspaceListKey,a=t.ref;this.listRefs[r]=a}},{key:"setWindowScrollerRef",value:function e(t){this.windowScroller=t}},{key:"setListTopOffset",value:function e(t){var r=t.workspaceListKey,a=t.topOffset;this.setState(function(e){return f()({},r,n()({},e[r],{topOffset:a}))})}},{key:"setSearchResultsOptions",value:function e(t){this.setState(function(){return{searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},selectedOption:t}})}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"setViewingHiddenWorkspace",value:function e(t){this.setState(function(){return{viewingHiddenWorkspace:t}})}},{key:"setHasScrolledPastHeaderPane",value:function e(t){this.setState(function(){return{hasScrolledPastHeaderPane:t}})}},{key:"setHasApiError",value:function e(t,r){this.setState(function(e){return f()({},t,n()({},e[t],{hasApiError:r}))})}},{key:"setLoadingWorkspaces",value:function e(t,r){this.setState(function(e){return f()({},t,n()({},e[t],{loadingWorkspaces:r}))})}},{key:"setDialogWorkspaceDetail",value:function e(t,r){this.setState(function(){return{dialogWorkspaceDetail:t}},r)}},{key:"setWorkspaceFetchOptions",value:function e(t,r){var a=r.workspaces,i=void 0===a?[]:a,s=r.totalWorkspaces,o=void 0===s?0:s,l=r.onWorkspaces,c=void 0!==l&&l,u=r.nextCursorMark,d=void 0===u?null:u;this.setState(function(e){return f()({},t,n()({},e[t],{workspaces:i,totalWorkspaces:o,onWorkspaces:c,nextCursorMark:d}))})}},{key:"setHideOnboardingBanner",value:function e(t){this.setState(function(){return{hideOnboardingBanner:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:s.a.createElement(W["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"getWorkspaceListTopOffset",value:function e(t){return this.state[t]?this.state[t].topOffset:0}},{key:"getListHeading",value:function e(t){var r=this.state.selectedOption;if("allWorkspaces"===t){var a=this.state.allWorkspaces.totalWorkspaces;var n=this.state.yourWorkspaces.totalWorkspaces;return De.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(a-n,0)})}if("yourWorkspaces"===t)return De.t("Your Workspaces");if("searchResults"===t){var i=this.state.searchResults,o=i.loadingWorkspaces,l=i.totalWorkspaces;var c=Object(j["get"])(r,"selectedOptionData");if(o)return null;if("member"===Object(j["get"])(r,"type")){var u=Object(R["getMemberRealName"])(c);var d=De.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:u,workspaceCount:l});return s.a.createElement(s.a.Fragment,null,s.a.createElement(K["a"],{entityType:"member",dimension:28,entityData:c,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),d)}if("workspace"===Object(j["get"])(r,"type")&&0===l)return De.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(j["get"])(r,"type")||c.id===ee["b"])&&l>0)return De.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:l,searchQuery:Object(j["get"])(c,"displayValue")});if("workspace"===Object(j["get"])(r,"type")&&l>0)return De.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:l,workspaceName:Object(j["get"])(r,"selectedOptionData.name")})}return""}},{key:"getWorkspacesForList",value:function e(t){if("allWorkspaces"===t){var r=this.state.allWorkspaces.workspaces;var a=this.state.yourWorkspaces.workspaces;return Object(j["differenceBy"])(r,a,"id")}if("yourWorkspaces"===t)return this.state.yourWorkspaces.workspaces;if("searchResults"===t)return this.state.searchResults.workspaces;return[]}},{key:"maybeUpsertWorkspaceToSearchResults",value:function e(t,r){var a=Object(j["get"])(t.searchResults,"workspaces",[]);var n=Object(j["find"])(a,function(e){return r.id===e.id});return n?Object(j["unionBy"])([r],a,"id"):a}},{key:"openWorkspaceRequestForm",value:function e(){var t=this;var r=this.props.showRequestDialog;return r({displayModernToast:function e(r){var a=r.type,n=r.errorType,i=r.teamName;var o=Object(ee["g"])({type:a,errorType:n,teamName:i});t.setToastText(s.a.createElement("div",{className:"display_flex"},"success"===a&&s.a.createElement(H["b"],{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),s.a.createElement("span",null,o)))}})}},{key:"maybeFetchNextPage",value:function e(t){!t.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces();!t.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}},{key:"fetchSearchResults",value:function e(){var t=this.state.selectedOption,r=t.selectedOptionData,a=t.type;var n={};if(!r)return;this.setLoadingWorkspaces("searchResults",true);if(Object(j["get"])(r,"id")===ee["b"])n.searchTerm=r.displayValue;else{n.id=r.id;n.type="member"===a?"single_user":"single_workspace"}Object(ee["j"])({searchType:a,clogger:this.props.clogger});this.fetchWorkspacesWithArgs(n)}},{key:"fetchSingleMemberToPrepopulate",value:function e(t){var r=this;this.props.fetchRawMembersFromAPI({ids:[t]}).then(function(e){var t={selectedOption:{selectedOptionData:e.members[0],type:"member"}};r.setState(t)})}},{key:"openDialog",value:function e(t){var r=this;var a=t.team;this.props.displayDirectoryInModal||window.history.replaceState({},"","/workspace/"+a.id);Object(ee["n"])({teamId:a.id,trackingCode:this.trackingCode,clogger:this.props.clogger});this.setDialogWorkspaceDetail(a,function(){r.dialog=r.props.openModal({element:r.renderDialog()})})}},{key:"closeDialog",value:function e(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/");this.props.closeModal()}},{key:"fetchWorkspacesWithArgs",value:function e(t){var r=t.type,a=t.id,n=t.searchTerm;var i=this.props.user.id;var s=this.state.selectedOption;var o=Object(j["isEmpty"])(s);var l=a===i&&o?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:l,additionalOptions:{type:r,id:a,searchTerm:n}})}},{key:"fetchTeam",value:function e(t){var r=this;return this.props.fetchEnterpriseTeamById({teamId:t}).then(function(e){r.setSearchResultsOptions({selectedOptionData:e,type:"workspace"});r.openDialog({team:e})}).catch(function(e){r.setViewingHiddenWorkspace(true);Ue.error("Error fetching workspace detail for launch_team_id -",e)})}},{key:"fetchWorkspaces",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.additionalOptions,i=r.workspaceListKey,s=void 0===i?"allWorkspaces":i;var o=this.state[s].nextCursorMark;this.setHasApiError(s,false);return this.props.fetchDirectoryWorkspaces(n()({nextCursorMark:o},a)).then(function(e){var r=e.num_found,a=e.on_workspaces,n=e.items;var i=n;o&&(i=Object(j["unionBy"])(t.state[s].workspaces,i,"id"));t.setWorkspaceFetchOptions(s,{workspaces:i,totalWorkspaces:r,onWorkspaces:a,nextCursorMark:e.next_cursor_mark});t.setLoadingWorkspaces(s,false)}).catch(function(e){t.setHasApiError(s,true);t.setLoadingWorkspaces(s,false);Ue.error("WorkspaceDirectory: Error in FetchWorkspaces -",e)})}},{key:"hasFetchedAllWorkspaces",value:function e(t){return this.state[t].workspaces.length>=this.state[t].totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var r=t.scrollHeight,a=t.scrollTop;return r-(a+this.clientHeight)<Be}},{key:"doInfiniteScrollHandler",value:function e(t){var r=t.scrollTop;var a=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces";var n=this.getListHeight("yourWorkspaces");"allWorkspaces"===a&&(n+=this.getListHeight("allWorkspaces"));var i=this.hasScrolledWithinScrollThreshold({scrollTop:r,scrollHeight:n});i&&!this.hasFetchedAllWorkspaces(a)?this.setLoadingWorkspaces(a,true):!i&&this.hasFetchedAllWorkspaces(a)&&this.setLoadingWorkspaces(a,false)}},{key:"renderDialog",value:function e(){var t=this.state,r=t.dialogWorkspaceDetail,a=t.displayDirectoryInModal;var n=this.props.user;var i=Object(j["get"])(this.props.queryString,"channel",null);var o=Object(j["get"])(this.props.queryString,"action",null);var l=Object(j["get"])(this.props.queryString,"user",null);var c=Object(R["isGuest"])(n);return s.a.createElement(le,{team:r,displayDirectoryInModal:a,onClose:this.closeDialog,featureZeroWorkspaceOnboarding:true,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:c,channelRedirect:i,postLaunchAction:o,userIdFromURL:l})}},{key:"renderInfiniteSpinner",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.renderFullPage;var a=S()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!r});return s.a.createElement("div",{className:a},s.a.createElement(Q["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderWorkspaceCard",value:function e(t){if(Object(j["isEmpty"])(t))return null;var r=!Object(T["a"])();return s.a.createElement(Z["a"],{team:t,key:t.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:r,doUpsertJoin:true})}},{key:"renderTitle",value:function e(){var t=this.props.enterprise.name;return s.a.createElement("div",{className:"p-workspace_directory__title"},De.t("Workspaces at {name}",{name:Object(B["n"])(t)}))}},{key:"renderWorkspaceSearchInput",value:function e(){var t=this.state.selectedOption;return s.a.createElement("div",{className:"p-workspace_directory__search"},s.a.createElement(ce["a"],{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:false,triggerAction:this.onSelectOption,prepopulatedOption:Object(j["get"])(t,"selectedOptionData")}))}},{key:"renderWorkspaceDirectoryHeaderPane",value:function e(){var t=this.props,r=t.displayDirectoryInModal,a=t.user;var n=S()("p-workspace_directory__header_pane",{margin_top_75:r});return s.a.createElement("div",{className:n,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!r&&this.renderTitle(),!Object(R["isGuest"])(a)&&this.renderWorkspaceSearchInput())}},{key:"renderListHeading",value:function e(t){return s.a.createElement("p",{className:"p-workspace_directory__list_title"},t)}},{key:"renderYourWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"yourWorkspaces"})}},{key:"renderAllWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"allWorkspaces"})}},{key:"renderSearchResults",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"searchResults"})}},{key:"renderList",value:function e(t){var r=this;var a=t.listProps,i=t.workspaceListKey;var o=this.getWorkspacesForList(i);var l=this.state[i].loadingWorkspaces;if("searchResults"===i&&Object(j["isEmpty"])(o)&&!l)return this.renderSearchEmptyState();if(Object(j["isEmpty"])(o)&&!l)return null;var c=this.getWorkspaceListTopOffset(i);var u=this.getListHeading(i);return s.a.createElement(s.a.Fragment,null,this.renderListHeading(u),s.a.createElement("div",{className:"p-workspace_directory__list"},s.a.createElement(ve,n()({scrollElement:this.page,workspaces:o,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:c,ref:function e(t){return r.setListRef({workspaceListKey:i,ref:t})}},a))),l&&this.renderInfiniteSpinner())}},{key:"renderSearchEmptyState",value:function e(){var t=this;var r=this.state,a=r.searchResults,n=r.selectedOption;var i=Object(j["get"])(n,"selectedOptionData");var o=void 0;var l=void 0;if(Object(ee["h"])(i)){var c=Object(j["get"])(a,"totalWorkspaces");var u=Object(j["get"])(a,"onWorkspaces");var d=Object(R["getMemberRealName"])(i);if(Object(J["c"])({totalWorkspaces:c,onWorkspaces:u})&&!Object(J["b"])({totalWorkspaces:c,onWorkspaces:u})){o=De.t("{memberName} hasn\u2019t joined any workspaces",{memberName:d});l=De.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,function(e){var r=e.text,a=e.key,n=e.tag;if("a"===n)return s.a.createElement(z["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:a},r);return{text:r}})}if(Object(J["b"])({totalWorkspaces:c,onWorkspaces:u})){o=De.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:d});l=De.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:d},function(e){var r=e.text,a=e.key,n=e.tag;if("a"===n)return s.a.createElement(z["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:a},r);return{text:r}})}return s.a.createElement("div",{className:"align_center"},s.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},s.a.createElement(K["a"],{entityType:"member",dimension:28,entityData:i,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),o),s.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},l))}o=De.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(j["get"])(i,"displayValue")});l=De.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,function(e){var r=e.text,a=e.key,n=e.tag;if("a"===n)return s.a.createElement(z["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:a},r);return{text:r}});return s.a.createElement("div",{className:"align_center"},s.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},o),s.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},l))}},{key:"renderOnboardingBanner",value:function e(){var t=this.props.hasSeenOnboardingBanner;if(t)return null;var r=this.state.hideOnboardingBanner;var a=S()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":r});var n=De.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return s.a.createElement(Pe,{title:De.t("What is a workspace?"),description:n,className:a,onClose:this.onOnboardingBannerDismiss,isHidden:r,showCloseButton:true,ref:this.setOnboardingBannerRef})}},{key:"renderWorkspaceRequestBanner",value:function e(){var t=this;var r=this.props.allowWorkspaceRequest;if(!r)return null;var a=De.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,function(e){var r=e.text;return s.a.createElement(z["a"],{onClick:t.openWorkspaceRequestForm},r)});return s.a.createElement(Pe,{title:De.t("Can\u2019t find your workspace?"),description:a,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:j["noop"]})}},{key:"renderDirectoryLists",value:function e(t){var r=this.state.selectedOption;var a=t.onChildScroll,i=t.registerChild,o=m()(t,["onChildScroll","registerChild"]);var l=n()({onScroll:a,scrollElement:this.page},o);var c=!!Object(j["get"])(r,"selectedOptionData");if(c)return s.a.createElement("div",{ref:i},this.renderSearchResults(l));return s.a.createElement("div",{ref:i},this.renderYourWorkspaces(l),this.renderAllWorkspaces(l))}},{key:"renderWorkspaceDirectoryBody",value:function e(){var t=this;var r=this.state,a=r.searchResults,n=r.hideOnboardingBanner;var i=S()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!n});var o={};this.onboardingBannerHeight&&!n&&(o.transform="translate3d(0, "+this.onboardingBannerHeight+"px, 0)");if(!this.page)return null;return s.a.createElement(s.a.Fragment,null,this.renderOnboardingBanner(),s.a.createElement("div",{"data-js":"workspace_directory_body",className:i,style:o},s.a.createElement(I["a"],{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},function(e){return t.renderDirectoryLists(e)}),!Object(j["get"])(a,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner()))}},{key:"renderEmptyState",value:function e(t){var r=this.props.enterprise;return s.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},s.a.createElement(Je,n()({enterprise:r},t)))}},{key:"renderDirectoryPage",value:function e(){var t=this.props.user;var r=this.state.viewingHiddenWorkspace;var a=this.state.allWorkspaces,n=a.workspaces,i=a.loadingWorkspaces;var o=this.state.yourWorkspaces,l=o.workspaces,c=o.loadingWorkspaces;var u=!c&&Object(j["isEmpty"])(l);var d=!i&&Object(j["isEmpty"])(n);if(u&&Object(R["isGuest"])(t))return this.renderEmptyState({isZeroWorkspaceGuest:true});if(d&&u)return this.renderEmptyState({isZeroWorkspaceOrg:true});if(r)return this.renderEmptyState({isHiddenWorkspace:true});return s.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}},{key:"renderWorkspaceDirectoryHeader",value:function e(){var t=this.props,r=t.user,a=t.enterprise;var n=this.state,i=n.isMobileView,o=n.hasScrolledPastHeaderPane,l=n.selectedOption;var c=r.is_admin||r.is_owner;return s.a.createElement(Ie,{enterprise:a,displayManageOrgButton:c,displaySearchBar:this.headerPane&&o,"data-js":"workspace_directory_sticky_header",user:r,isMobileView:i,selectedSearchOption:Object(j["get"])(l,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}},{key:"renderDirectoryInModal",value:function e(){var t=this.props.enterprise;var r=S()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return s.a.createElement(Y["a"],{onCancel:this.onModalClose,showCancelButton:false,showGoButton:false,title:De.t("Workspaces at {orgName}",{orgName:t.name}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:true,withHeader:true},s.a.createElement("div",{className:r,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}},{key:"render",value:function e(){var t=this.props.displayDirectoryInModal;var r=this.state.allWorkspaces,a=r.workspaces,n=r.loadingWorkspaces;var i=this.state.yourWorkspaces,o=i.workspaces,l=i.loadingWorkspaces;var c=l&&Object(j["isEmpty"])(o);var u=n&&Object(j["isEmpty"])(a);var d=c||u;if(t)return this.renderDirectoryInModal();return s.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),d&&this.renderInfiniteSpinner({renderFullPage:true}),s.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),s.a.createElement(V["a"],null))}}]);return t}(i["Component"]);qe.displayName="WorkspaceDirectory";qe.defaultProps=Le;var Ge=function e(t,r){var a=r.userId;var i=Object(N["getEnterprise"])(t);var s=Object(A["getMemberById"])(t,a);var o=Object(F["getOrgPref"])(t,"enterprise_team_creation_request");var l=o&&o.is_enabled&&!Object(R["isGuest"])(s);var c=Object(x["isClientApp"])(t);var u=Object(F["getUserPref"])(t,"seen_onboarding_banner");var d=Object(U["a"])({state:t});return{enterprise:i,user:n()({id:a},s),allowWorkspaceRequest:l,displayDirectoryInModal:c,hasSeenOnboardingBanner:u,clogger:d}};var He={enqueueToast:M["enqueueToast"],openModal:P["openModal"],closeModal:P["closeModal"],fetchRawMembersFromAPI:G["g"],setUserPrefByApi:L["c"],fetchEnterpriseTeamById:q["j"],fetchDirectoryWorkspaces:q["i"]};var We=Object(c["connect"])(Ge,He)(qe);var Ve=new B["b"]("workspace_directory");var ze={enterprise:w["b"].shape({id:w["b"].string,name:w["b"].string,domain:w["b"].string,icon:w["b"].object,locale:w["b"].string}).isRequired,isZeroWorkspaceGuest:w["b"].bool,isZeroWorkspaceOrg:w["b"].bool,isHiddenWorkspace:w["b"].bool,directoryUrl:w["b"].string};var Qe={isZeroWorkspaceGuest:false,isZeroWorkspaceOrg:false,isHiddenWorkspace:false,directoryUrl:void 0};var Ke=function(e){E()(t,e);function t(e){b()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.redirectToDirectory=r.redirectToDirectory.bind(r);return r}k()(t,[{key:"redirectToDirectory",value:function e(){var t=this.props.directoryUrl;window.open(t+"/signin/find-workspaces","_self")}},{key:"renderHeading",value:function e(){var t=this.props,r=t.enterprise,a=t.isHiddenWorkspace;var n=a?Ve.t("No workspace found"):Ve.t("No available workspaces");return s.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},s.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},s.a.createElement(K["a"],{entityType:"org",dimension:28,entityData:r,customClasses:"flex_none",featureReactMessages:true})),n)}},{key:"renderZeroWorkspaceGuestBody",value:function e(){var t=this.props.enterprise;return s.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Ve.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(B["n"])(t.name)}))}},{key:"renderZeroWorkspaceOrgBody",value:function e(){var t=this.props.enterprise;return s.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Ve.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(B["n"])(t.name)}))}},{key:"renderHiddenWorkspaceBody",value:function e(){var t=this.props.enterprise;return s.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Ve.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(B["n"])(t.name)}))}},{key:"renderBody",value:function e(){var t=this.props,r=t.isZeroWorkspaceGuest,a=t.isZeroWorkspaceOrg,n=t.isHiddenWorkspace;if(r)return this.renderZeroWorkspaceGuestBody();if(a)return this.renderZeroWorkspaceOrgBody();if(n)return this.renderHiddenWorkspaceBody();return null}},{key:"renderFooter",value:function e(){var t=this.props.enterprise;return s.a.createElement(z["a"],{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},Ve.t("View all {orgName} workspaces",{orgName:Object(B["n"])(t.name)}),s.a.createElement(H["b"],{type:"chevron-right",key:"footer-chevron-icon",inline:true}))}},{key:"render",value:function e(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}]);return t}(i["PureComponent"]);Ke.displayName="WorkspaceDirectoryEmptyState";Ke.defaultProps=Qe;var Ye=function e(t,r){var a=r.enterprise;return{directoryUrl:Object(ge["a"])(t,a.domain)}};var Je=Object(c["connect"])(Ye)(Ke);var Ze=We;var Xe=function e(t,r,a){if(!t)throw new Error("mountWorkspaceDirectory must be called with a teamId parameter");var i=Object(d["d"])(t);var o=n()({},a,{onClose:function e(){return l.a.unmountComponentAtNode(r)}});Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(Ze,o)),r)};var $e=function e(t){l.a.unmountComponentAtNode(t)};var et={mountWorkspaceDirectory:Xe,unmountWorkspaceDirectory:$e};var tt=r(51);Object(tt["a"])("interop.mountWorkspaceDirectory",Xe);Object(tt["a"])("interop.unmountWorkspaceDirectory",$e)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(129);var c=r(25);var u=r(22);var d=Object(u["a"])("Fetches org retention settings",function(e,t,r){return e(Object(c["a"])({method:"mc.enterprise.retention.get",args:{enterprise:r}}))});d.propTypes=l["b"].string.isRequired;var p=Object(u["a"])("Submits retention request to API",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.type,n=r.requestData;return e(Object(c["a"])({method:"newRequest"===a?"mc.enterprise.retention.requestChange":"mc.enterprise.retention.cancelRequest",args:n}))});p.propTypes={type:l["b"].string.isRequired,requestData:l["b"].object};var m=r(147);var h=r(9);var f=r.n(h);var v=r(3);var b=r.n(v);var g=r(5);var _=r.n(g);var y=r(6);var k=r.n(y);var O=r(7);var E=r.n(O);var w=r(8);var C=r.n(w);var S=r(2);var j=r.n(S);var I=r(10);var T=r(159);var N=r(15);var A=r.n(N);var R=r(18);var M=r(469);var P=new I["b"]("policy-retention");function x(e){return{channels:P.t("Channel Retention"),private_channels:P.t("Private Channel Retention"),dms:P.t("Direct Message Retention"),allow_override:e?P.t("Member & Admin Override"):P.t("Direct Message and Private Channel Override"),files:P.t("File Retention")}}function D(e){return{channels:[{value:4,label:e?P.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):P.t("No policy; teams can modify their own retention settings")},{value:0,label:e?P.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):P.t("Retain all messages")},{value:1,label:e?P.t("Keep all messages, including revision history"):P.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?P.t("Delete messages and their revisions after a set number of days"):P.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?P.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):P.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],private_channels:[{value:4,label:e?P.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):P.t("No policy; teams can modify their own retention settings")},{value:0,label:e?P.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):P.t("Retain all messages")},{value:1,label:e?P.t("Keep all messages, including revision history"):P.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?P.t("Delete messages and their revisions after a set number of days"):P.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?P.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):P.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],dms:[{value:0,label:e?P.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):P.t("Retain all messages")},{value:1,label:e?P.t("Keep all messages, including revision history"):P.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?P.t("Delete messages and their revisions after a set number of days"):P.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?P.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):P.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],allow_override:[{value:4,label:e?P.t("No org-wide policy \u2014 Workspace Owners can set the override policy for their workspace"):P.t("No policy; teams can set their own override policy")},{value:0,label:e?P.t("Don\u2019t allow channel and DM overrides"):P.t("Don\u2019t allow team members to override team-wide retention policies for DMs and private channels")},{value:1,label:e?P.t("Always allow channel and DM overrides"):P.t("Allow team members to override team-wide retention policies for DMs and private channels")}],files:[{value:0,label:e?P.t("Keep files"):P.t("Retain all files")},{value:1,label:e?P.t("Keep files, but only for a set number of days"):P.t("Retain all files for only a specific number of days"),showDuration:true}]}}function F(e){var t=e.policyType,r=e.featureGdprExports;var a=x(r);return a[t]}function L(e){var t=e.policyType,r=e.featureGdprExports;var a=D(r);return a[t]}function B(e){return j.a.includes(["channels","private_channels","allow_override"],e)}function U(e){var t=e.policyType,r=e.retentionType,a=e.featureGdprExports;var n=L({policyType:t,featureGdprExports:a});return j.a.get(j.a.find(n,function(e){return e.value===r}),"showDuration",false)}function q(e){var t=e.policyType,r=e.retentionType,a=e.policyDurationValue,n=e.featureGdprExports;if(j.a.isUndefined(t)||j.a.isUndefined(r))return"";var i=U({policyType:t,retentionType:r,featureGdprExports:n});var s=i?a:0;if(0===j.a.parseInt(s)||4===j.a.parseInt(r)){var o=L({policyType:t,featureGdprExports:n});var l=j.a.find(o,function(e){return e.value===r}),c=l.label;return c}if("files"===t)return n?P.t("Keep files for {policyDurationValue} days",{policyDurationValue:a}):P.t("Retain all files for only {policyDurationValue} days",{policyDurationValue:a});switch(j.a.parseInt(r)){case 2:return n?P.t("Delete messages and their revisions after {policyDurationValue} days",{policyDurationValue:a}):P.t("Retain all messages and logs for only {policyDurationValue} days",{policyDurationValue:a});case 3:return n?P.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)",{policyDurationValue:a}):P.t("Retain all messages for only {policyDurationValue} days (but keep logs for compliance exports)",{policyDurationValue:a});default:return""}}function G(e){var t=e.policyType,r=e.settingValues,a=e.featureGdprExports;var n=r.retention_type;if(4===n){if("allow_override"===t)return{retention_type:1,is_locked:false};return{retention_type:0,retention_duration:0,is_locked:false}}var i=b()({},r,{is_locked:true});if(!U({policyType:t,retentionType:n,featureGdprExports:a}))return b()({},i,{retention_duration:0});return i}var H=new I["b"]("policy-retention");var W={orgName:l["b"].string.isRequired,requesterName:l["b"].string.isRequired,onConfirm:l["b"].func.isRequired,onCancel:l["b"].func.isRequired,requestedPolicies:l["b"].object,currentPolicies:l["b"].object,requestDate:l["b"].string,cancelRequest:l["b"].bool,featureGdprExports:l["b"].bool.isRequired};var V={cancelRequest:false,requestDate:"",currentPolicies:{},requestedPolicies:{}};var z=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickCloseOrCancelButton=r.onClickCloseOrCancelButton.bind(r);r.onClickSubmitButton=r.onClickSubmitButton.bind(r);return r}k()(t,[{key:"onClickCloseOrCancelButton",value:function e(){this.props.onCancel()}},{key:"onClickSubmitButton",value:function e(){this.props.onConfirm()}},{key:"buildRequestModalContent",value:function e(){var t=this.props,r=t.requesterName,a=t.orgName;return n.a.createElement("div",null,n.a.createElement("div",{className:"p-org_retention_request__modal_sectionp-org_retention_request__modal_section--lead"},n.a.createElement("p",{className:"p-org_retention_request--font_bump"},n.a.createElement("strong",null,r,"\u2019s")," ","requested changes are listed below. Once you\u2019ve clicked"," ",n.a.createElement("strong",null,"Confirm with Customer"),", a Slackbot message will be sent to the Primary Org Owner of ",a," to confirm the change."),n.a.createElement("p",null,n.a.createElement("strong",null,"Your name will be included with this request."))),n.a.createElement("div",null,this.renderRequestedPolicies()))}},{key:"buildCancelModalContent",value:function e(){var t=Object(M["a"])(this.props.requestDate,{omitTime:true,dateFormat:"MMMM Do, YYYY"});return n.a.createElement("div",null,n.a.createElement("h2",{className:"margin_bottom_150"},H.t("Are you sure you\u2019d like to cancel the retention policy update request?")),n.a.createElement("div",{className:"p-org_retention_request--font_bump margin_bottom_300"},"Once you\u2019ve clicked ",n.a.createElement("strong",null,"Confirm Cancellation"),", Slackbot mark the approval request sent to ",this.props.orgName," on",n.a.createElement("strong",null,t)," as expired."))}},{key:"renderRequestedPolicies",value:function e(){var t=this;var r=this.props.featureGdprExports;return j.a.map(this.props.requestedPolicies,function(e,a){var i=e.retention_type,s=e.retention_duration,o=e.is_locked;var l=0!==i&&"allow_override"!==a||o?i:4;var c=j.a.get(t.props.currentPolicies,a);var u=c.retention_type,d=c.retention_duration,p=c.is_locked;var m=0!==u&&"allow_override"!==a||p?u:4;return n.a.createElement("div",{key:a,className:"p-org_retention_request__modal_section"},n.a.createElement("div",{className:"bold margin_bottom_50 p-org_retention_request--font_bump"},F({policyType:a,featureGdprExports:r})),n.a.createElement("div",null,n.a.createElement("div",{className:"bold"}," ","\ud83d\udc49\ud83c\udffe"," ",n.a.createElement("span",{className:"margin_left_50"},H.t("New:")," ",q({policyType:a,retentionType:l,policyDurationValue:s,featureGdprExports:r}))),n.a.createElement("div",null," ","\ud83d\udc74\ud83c\udffb"," ",n.a.createElement("span",{className:"margin_left_50"},H.t("Old:")," ",q({policyType:a,retentionType:m,policyDurationValue:d,featureGdprExports:r})))))})}},{key:"render",value:function e(){var t=this.props.cancelRequest?"":H.t("Ready to confirm with {orgName}?",{orgName:this.props.orgName});var r=this.props.cancelRequest?this.buildCancelModalContent():this.buildRequestModalContent();var a=this.props.cancelRequest?H.t("Confirm Cancellation"):H.t("Confirm with Customer");var i=A()("btn",{btn_danger:this.props.cancelRequest});return n.a.createElement("div",{className:"c-modal c-modal--active"},n.a.createElement("div",{className:"c-modal__background"}),n.a.createElement("div",{className:"c-modal__contents c-modal__contents--active p-org_retention_request__modal"},n.a.createElement(R["a"],{type:"times",onClick:this.onClickCloseOrCancelButton,className:"c-modal__close"}),n.a.createElement("div",{className:"c-modal__header"},n.a.createElement("h2",{className:"margin_bottom_0"},t)),n.a.createElement("div",{className:"c-modal__body p-org_retention_request__modal_content"},r,n.a.createElement("div",{className:"margin_bottom_400"},n.a.createElement("button",{type:"button",className:"btn btn_outline margin_right_75",onClick:this.onClickCloseOrCancelButton},H.t("Cancel")),n.a.createElement("button",{type:"button",className:i,onClick:this.onClickSubmitButton},a)))))}}]);return t}(n.a.PureComponent);z.displayName="PolicyRequestModal";z.defaultProps=V;var Q=Object(T["a"])("feature_gdpr_exports")(z);var K=r(76);var Y=new I["b"]("policy-retention");var J=function e(t){var r=Object(M["a"])(t.requestTimestamp,{omitTime:true,dateFormat:"MMMM Do, YYYY"});var a=Y.t("{requesterName} requested the following policy updates on {displayDate}",{requesterName:t.requesterName,displayDate:r});var i=Y.t("If you need to modify this request, please cancel it and initiate a new one. ");return n.a.createElement("div",{className:"alert alert_info p-org_retention_request--font_bump padding_top_150 padding_bottom_150 margin_bottom_200"},n.a.createElement("ts-icon",{class:"ts_icon_info_circle"}),n.a.createElement("strong",null,a),n.a.createElement("p",{className:"no_margin"},i))};J.displayName="PendingRequestAlert";var Z=Object(K["pure"])(J);var X=new I["b"]("policy-retention");var $={users:l["b"].object.isRequired,onUpdateUserSelection:l["b"].func,currentSelectionValue:l["b"].string,isFormPending:l["b"].bool};var ee={onUpdateUserSelection:j.a.noop,currentSelectionValue:"",isFormPending:false};var te=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onOptionSelection=r.onOptionSelection.bind(r);return r}k()(t,[{key:"onOptionSelection",value:function e(t){var r=t.target[t.target.selectedIndex].getAttribute("data-name");this.props.onUpdateUserSelection({id:t.target.value,name:r})}},{key:"renderOptions",value:function e(){return j.a.map(this.props.users,function(e){return n.a.createElement("option",{value:e.id,key:e.id,"data-name":e.name},e.name)})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_bottom_200"},n.a.createElement("label",{htmlFor:"policy-requester"},X.t("Requester")),n.a.createElement("div",{className:"p-org_retention_request__select_wrapper"},n.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isFormPending,className:"p-org_retention_request__select",id:"policy-requester"},n.a.createElement("option",{value:"",disabled:true},X.t("Choose an Organization Owner")),this.renderOptions())))}}]);return t}(n.a.Component);te.displayName="RequesterSelect";te.defaultProps=ee;var re=te;var ae=new I["b"]("policy-retention");var ne={onUpdateUserInput:l["b"].func,currentUserValue:l["b"].string,placeholder:l["b"].string,isDisabled:l["b"].bool};var ie={onUpdateUserInput:j.a.noop,currentUserValue:"",placeholder:"",isDisabled:false};var se=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onUpdateInput=r.onUpdateInput.bind(r);return r}k()(t,[{key:"onUpdateInput",value:function e(t){this.props.onUpdateUserInput(t.target.value)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_bottom_200"},n.a.createElement("label",{htmlFor:"mc-user"},ae.t("Your Full Name")),n.a.createElement("div",{className:"p-org_retention_request__requester_input",id:"mc-user"},n.a.createElement("input",{type:"text",value:this.props.currentUserValue,placeholder:this.props.placeholder,onChange:this.onUpdateInput,disabled:this.props.isDisabled?"disabled":""})))}}]);return t}(n.a.Component);se.displayName="McUserInput";se.defaultProps=ie;var oe=se;var le=new I["b"]("policy-retention");var ce={options:l["b"].array.isRequired,onUpdatePolicySelection:l["b"].func,currentSelectionValue:l["b"].number,currentDurationValue:l["b"].oneOfType([l["b"].string,l["b"].number]),isDeactivated:l["b"].bool};var ue={onUpdatePolicySelection:j.a.noop,currentSelectionValue:0,currentDurationValue:0,isDeactivated:false};var de=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onTextInput=r.onTextInput.bind(r);r.onOptionSelection=r.onOptionSelection.bind(r);return r}k()(t,[{key:"onOptionSelection",value:function e(t){var r=t.target.value;var a=4!==j.a.parseInt(r);this.props.onUpdatePolicySelection({retention_type:j.a.parseInt(r),is_locked:a})}},{key:"onTextInput",value:function e(t){var r=j.a.parseInt(t.target.value)||"";this.props.onUpdatePolicySelection({retention_duration:r})}},{key:"maybeRenderDuration",value:function e(){var t=this;var r=j.a.find(this.props.options,function(e){return e.value===j.a.parseInt(t.props.currentSelectionValue)}),a=r.showDuration;if(a)return n.a.createElement("div",{className:"p-org_retention_request__duration_group "},n.a.createElement("span",{className:"p-org_retention_request__duration_label"},le.t("Duration")),n.a.createElement("input",{className:"p-org_retention_request__duration_input",type:"text",value:this.props.currentDurationValue,onChange:this.onTextInput,disabled:this.props.isDeactivated}),n.a.createElement("span",{className:"p-org_retention_request__duration_label--secondary margin_left_50"},"days"));return null}},{key:"renderOptions",value:function e(){return j.a.map(this.props.options,function(e){return n.a.createElement("option",{value:e.value,key:e.value},e.label)})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_retention_request__policy_select_group"},n.a.createElement("div",{className:"p-org_retention_request__select_wrapper margin_right_150"},n.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isDeactivated,className:"p-org_retention_request__select margin_right_200"},this.renderOptions())),this.maybeRenderDuration())}}]);return t}(n.a.Component);de.displayName="PolicySelect";de.defaultProps=ue;var pe=de;var me=new I["b"]("policy-retention");var he={displaySettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].oneOfType([l["b"].string,l["b"].number]),retention_type:l["b"].number}).isRequired,policyType:l["b"].oneOf(["channels","private_channels","dms","allow_override","files"]).isRequired,policyLabel:l["b"].string.isRequired,currentSettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].number,retention_type:l["b"].number}),onUpdatePolicy:l["b"].func,pendingSettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].number,retention_type:l["b"].number}),isFormPending:l["b"].bool,featureGdprExports:l["b"].bool.isRequired};var fe={pendingSettings:{},currentSettings:{},onUpdatePolicy:j.a.noop,isFormPending:false};var ve=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onUpdatePolicy=r.onUpdatePolicy.bind(r);return r}k()(t,[{key:"onUpdatePolicy",value:function e(t){this.props.onUpdatePolicy({data:t,policyType:this.props.policyType})}},{key:"maybeRenderCurrentPolicyText",value:function e(){var t=this.props,r=t.featureGdprExports,a=t.policyType;if(!j.a.isEmpty(this.props.pendingSettings)){var i=this.props.currentSettings,s=i.retention_type,o=i.retention_duration,l=i.is_locked;var c=0!==s&&"allow_override"!==this.props.policyType||l?s:4;var u=q({policyType:a,retentionType:c,policyDurationValue:o,featureGdprExports:r});var d=me.t("Current:");return n.a.createElement("p",null,d," ",u)}return null}},{key:"renderPolicyItem",value:function e(){var t=this.props,r=t.isFormPending,a=t.policyType,i=t.featureGdprExports;var s=L({policyType:a,featureGdprExports:i});var o=this.props.displaySettings;!j.a.isEmpty(this.props.pendingSettings)&&r&&(o=this.props.pendingSettings);var l=o,c=l.is_locked,u=l.retention_duration,d=l.retention_type;var p="allow_override"===a&&!c||0===d&&!c&&B(a)?4:d;return n.a.createElement(pe,{id:"policy_select_"+this.props.policyType,options:s,currentSelectionValue:p,currentDurationValue:u,isDeactivated:r,onUpdatePolicySelection:this.onUpdatePolicy})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_retention_request__policy_item margin_bottom_200"},n.a.createElement("label",{htmlFor:"policy_select_"+this.props.policyType,className:"inline_block"},this.props.policyLabel),this.renderPolicyItem(),this.maybeRenderCurrentPolicyText())}}]);return t}(n.a.Component);ve.displayName="PolicyItem";ve.defaultProps=fe;var be=Object(T["a"])("feature_gdpr_exports")(ve);var ge=r(2261);var _e=new I["b"]("policy-retention");var ye={orgId:l["b"].string.isRequired,hasPermission:l["b"].bool.isRequired,orgName:l["b"].string.isRequired,orgOwners:l["b"].object.isRequired,currentSettings:l["b"].object.isRequired,submitRequest:l["b"].func.isRequired,pendingData:l["b"].object,featureGdprExports:l["b"].bool.isRequired};var ke={pendingData:{}};var Oe=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={requestedSettings:{},mcUser:"",requester:{},modalOpen:false,isSubmittable:false};r.onUpdatePolicySelect=r.onUpdatePolicySelect.bind(r);r.onUpdateRequesterSelect=r.onUpdateRequesterSelect.bind(r);r.onMcUserInput=r.onMcUserInput.bind(r);r.onSubmitRequest=r.onSubmitRequest.bind(r);r.onCancelRequest=r.onCancelRequest.bind(r);r.onCloseModal=r.onCloseModal.bind(r);r.onOpenModal=r.onOpenModal.bind(r);return r}k()(t,[{key:"onUpdatePolicySelect",value:function e(t){var r=t.policyType,a=t.data;var n=this.props.featureGdprExports;var i=this.state.requestedSettings;var s=i[r]||{};var o=this.props.currentSettings[r];var l=b()({},o,s,a);var c=void 0;var u=G({policyType:r,settingValues:l,featureGdprExports:n});c=j.a.isEqual(o,u)?j.a.omit(i,r):b()({},this.state.requestedSettings,f()({},r,l));this.setState(function(){return{requestedSettings:c}})}},{key:"onUpdateRequesterSelect",value:function e(t){this.setState(function(){return{requester:t}})}},{key:"onMcUserInput",value:function e(t){this.setState(function(){return{mcUser:t}})}},{key:"onSubmitRequest",value:function e(){var t=this;var r=this.formatSettings();this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("newRequest",r)})}},{key:"onCancelRequest",value:function e(){var t=this;var r={enterprise:this.props.orgId};this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("cancelRequest",r)})}},{key:"onCloseModal",value:function e(){this.setState(function(){return{modalOpen:false}})}},{key:"onOpenModal",value:function e(){this.setState(function(){return{modalOpen:true}})}},{key:"formatSettings",value:function e(){var t=this.props.featureGdprExports;var r=this.state,a=r.requestedSettings,n=r.mcUser,i=r.requester;var s=j.a.reduce(a,function(e,r,a){e[a]=G({policyType:a,settingValues:r,featureGdprExports:t});return e},{});return{mc_user:n,enterprise:this.props.orgId,requester:i.id,requested_settings:JSON.stringify(s)}}},{key:"isFormDataValid",value:function e(){var t=this.props.featureGdprExports;var r=this.state.requestedSettings;return j.a.every(r,function(e,r){var a=e.retention_duration,n=e.retention_type;return!(U({policyType:r,retentionType:n,featureGdprExports:t})&&(0===a||""===a))})}},{key:"isFormSubmittable",value:function e(){var t=this.state,r=t.requestedSettings,a=t.mcUser,n=t.requester;return this.isFormDataValid()&&!j.a.isEmpty(r)&&!j.a.isUndefined(a)&&!j.a.isEmpty(a)&&!j.a.isUndefined(n)&&!j.a.isEmpty(n)}},{key:"maybeRenderPendingAlert",value:function e(t,r,a){if(t)return n.a.createElement(Z,{requestTimestamp:j.a.parseInt(a),requesterName:r});return null}},{key:"maybeRenderModal",value:function e(){if(!this.state.modalOpen)return"";var t=void 0;var r=!j.a.isEmpty(this.props.pendingData);var a=this.props.pendingData,i=a.date_create,s=a.requester;if(r){var o=s.name;t=n.a.createElement(Q,{orgName:this.props.orgName,requestDate:i,requesterName:o,onConfirm:this.onCancelRequest,onCancel:this.onCloseModal,cancelRequest:true})}else{var l=this.state.requester.name;t=n.a.createElement(Q,{orgName:this.props.orgName,currentPolicies:this.props.currentSettings,requestedPolicies:this.state.requestedSettings,requesterName:l,onConfirm:this.onSubmitRequest,onCancel:this.onCloseModal})}return t}},{key:"renderPolicyItem",value:function e(t,r,a){var i=this.props.featureGdprExports;return n.a.createElement(be,{displaySettings:j.a.get(this.state.requestedSettings,t)||j.a.get(this.props.currentSettings,t),currentSettings:a?j.a.get(this.props.currentSettings,t):{},pendingSettings:j.a.get(r,t),onUpdatePolicy:this.onUpdatePolicySelect,policyType:t,policyLabel:F({policyType:t,featureGdprExports:i}),isFormPending:a})}},{key:"renderButtons",value:function e(){var t=!j.a.isEmpty(this.props.pendingData);var r=this.isFormSubmittable();var a=void 0;a=t?n.a.createElement("div",null,n.a.createElement("button",{type:"button",className:"btn btn_outline disabled margin_right_75",disabled:true},_e.t("Request Submitted")),n.a.createElement("button",{className:"btn btn_outline",onClick:this.onOpenModal},_e.t("Cancel"))):r?n.a.createElement("div",null,n.a.createElement("button",{className:"btn",onClick:this.onOpenModal},_e.t("Continue"))):n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn_outline disabled",disabled:true},_e.t("Continue")));return a}},{key:"render",value:function e(){var t=!j.a.isEmpty(this.props.pendingData)||!this.props.hasPermission;var r=this.props.pendingData,a=r.requested_settings,i=r.mc_user,s=r.requester,o=r.date_create;return n.a.createElement("div",{className:"p-org_retention_request"},this.maybeRenderModal(),n.a.createElement("div",null,this.maybeRenderPendingAlert(!j.a.isEmpty(this.props.pendingData),i,o),n.a.createElement("div",{className:"p-org_retention_request__section_header"},_e.t("Message Retention")),n.a.createElement("div",null,this.renderPolicyItem("channels",a,t)),n.a.createElement("div",null,this.renderPolicyItem("private_channels",a,t)),n.a.createElement("div",null,this.renderPolicyItem("dms",a,t)),n.a.createElement("div",null,this.renderPolicyItem("allow_override",a,t)),n.a.createElement("div",{className:"p-org_retention_request__section_header"},_e.t("File Retention")),n.a.createElement("div",null,this.renderPolicyItem("files",a,t)),n.a.createElement("div",{className:"p-org_retention_request__section_header margin_bottom_100"},_e.t("Authorization")),n.a.createElement("p",{className:"margin_bottom_200"},_e.t("Please include information about who is requesting this update, and your name.")),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(re,{users:this.props.orgOwners,currentSelectionValue:j.a.get(this.state.requester,"id")||j.a.get(s,"id"),onUpdateUserSelection:this.onUpdateRequesterSelect,isFormPending:t}))),n.a.createElement(oe,{currentUserValue:this.state.mcUser||i,isDisabled:t,placeholder:_e.t("Please enter your full name"),onUpdateUserInput:this.onMcUserInput}),this.renderButtons()))}}]);return t}(n.a.Component);Oe.displayName="OrgRetentionRequest";Oe.defaultProps=ke;var Ee=Object(T["a"])("feature_gdpr_exports")(Oe);var we=Ee;var Ce=function e(t,r,a,l){if(!t)throw new Error("mountOrgRetentionRequest must be called with a teamId parameter");var c=Object(o["d"])(t);var u=function n(i,s){Object(o["a"])(t,p({type:i,requestData:s})).then(function(){e(t,r,a,l)}).catch(function(e){return Object(m["f"])("Failed to submit retention request:",e)})};Object(o["a"])(t,d(a)).then(function(e){var t=e.id,a=e.has_permission,o=e.all_org_owners,d=e.current_settings,p=e.pending;Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(we,{submitRequest:u,orgId:t,orgName:l,hasPermission:a,orgOwners:o,currentSettings:d,pendingData:p})),r)}).catch(function(e){return Object(m["f"])("Failed to fetch retention settings:",e)})};var Se=Ce;var je=r(51);Object(je["a"])("interop.mountOrgRetentionRequest",Se)},,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var a=function e(){return"sid=zdev-hc-token"};var n=function e(t){var r=a()||"";if(-1!==t.indexOf("sid="))return t;var n=t;var i=n.lastIndexOf("#");-1!==i&&(n=n.substring(0,i));n=-1!==n.indexOf("?")?n+"&"+r:n+"?"+r;return-1!==i?""+n+t.substring(i):n};var i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.articleId,a=t.sectionId,i=t.categoryId,s=t.query,o=t.zdLocale,l=t.hash,c=void 0===l?"":l;var u="https://get.slack.help/hc";o&&(u=u+"/"+o);s?u=u+"/search?utf8=\u2713&commit=Search&query="+s:r?u=u+"/articles/"+r:a?u=u+"/sections/"+a:i&&(u=u+"/categories/"+i);c&&(u=u+"#"+c);return n(u)}},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(3);var d=r.n(u);var p=r(24);var m=r.n(p);var h=r(9);var f=r.n(h);var v=r(5);var b=r.n(v);var g=r(6);var _=r.n(g);var y=r(7);var k=r.n(y);var O=r(8);var E=r.n(O);var w=r(129);var C=r(2086);var S=r(2);var j=r(88);var I=r(20);var T=r(227);var N=r(285);var A=r(608);var R=r(161);var M=r(26);var P=r(1078);var x=r(1079);var D=r(10);var F=r(147);function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(function(r,a){var n=Object(F["k"])(r.email).error_key;if(!n&&("invite"===r.mapping||"create"===r.mapping)){var i=e.some(function(e,t){return t!==a&&e.email===r.email});var s=!i&&t.some(function(e){return e.profile.email===r.email});var o=i||s;n=o?"duped":n}return d()({},r,{email_state:n||"ok"})})}function B(e){return{label:e.profile.real_name+" "+e.name,lfs_id:e.id,id:e.id,member:e,value:e.id}}var U={makeUserLFSItem:B,validateEmails:L};var q=r(18);var G=r(661);var H=r(1165);function W(e){if(e.member)return n.a.createElement(H["a"],{item:e});return e.label}var V=r(1166);function z(e){if(e.member)return n.a.createElement(V["a"],{item:e});return e.label}var Q=r(2102);var K=new D["b"]("imports");var Y={userMapping:w["b"].shape({id:w["b"].oneOfType([w["b"].string,w["b"].number]).isRequired,name:w["b"].string.isRequired,import_email:w["b"].string.isRequired,email:w["b"].string.isRequired,email_state:w["b"].string.isRequired,mapping:w["b"].string.isRequired}).isRequired,allMembers:w["b"].object.isRequired,onUserMappingChange:w["b"].func};var J={onUserMappingChange:S["noop"]};var Z=[{label:K.t("Choose one:"),value:"-",id:"-"},{label:K.t("Create & invite user"),value:"invite",id:"invite"},{label:K.t("Create a disabled user, without inviting them"),value:"create",id:"create"},{label:K.t("Do not create a user, just import messages"),value:"bot",id:"bot"},{label:K.t("Skip user completely, importing no messages"),value:"0",id:"0"}];function X(e){return[].concat(Z,m()(Object.values(e.allMembers).map(B))).map(function(t){return t.value===e.userMapping.mapping?d()({},t,{preselected:true}):t})}function $(e){return-1===["-","invite","create","bot","0"].indexOf(e)}var ee=function(e){E()(t,e);function t(e){b()(this,t);var r=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onEmailChange=r.onEmailChange.bind(r);r.onMappingChange=r.onMappingChange.bind(r);return r}_()(t,[{key:"componentWillReceiveProps",value:function e(t){t.userMapping.mapping!==this.props.userMapping.mapping&&this.lazyFilterSelect&&this.lazyFilterSelect.processItems(X(t))}},{key:"onEmailChange",value:function e(t){this.props.onUserMappingChange(d()({},this.props.userMapping,{email:t}))}},{key:"onMappingChange",value:function e(t){var r=void 0;var a=this.props.allMembers[t];r=a&&a.profile&&a.profile.email?a.profile.email:this.props.userMapping.import_email;this.props.onUserMappingChange(d()({},this.props.userMapping,{mapping:t,email:r}))}},{key:"maybeRenderEmailInput",value:function e(){var t=this;var r=this.props.userMapping,a=r.mapping,i=r.email,s=r.email_state,o=r.import_email,l=r.id;if(i===o&&"ok"===s)return null;if(i===o&&"create"!==a&&"invite"!==a)return null;if($(a))return null;return n.a.createElement("input",{type:"email",name:"email_"+l,defaultValue:i,onChange:function e(r){return t.onEmailChange(r.target.value)},placeholder:Object(F["a"])(),className:"small small_top_margin"})}},{key:"renderErrors",value:function e(){var t=void 0;switch(this.props.userMapping.email_state){case"duped":t=K.t("Another user has this email.");break;case"empty":t=K.t("An email address is required.");break;case"invalid":t=K.t("This address is invalid.");break;case"ok":default:break}var r=["control-group","small_top_margin",{error:!$(this.props.userMapping.mapping)&&"ok"!==this.props.userMapping.email_state}];return n.a.createElement("div",{className:r},t&&n.a.createElement("span",{className:"small_left_margin help-inline"},n.a.createElement(q["a"],{type:"warning",className:"moscow_red"})," ",t),this.maybeRenderEmailInput())}},{key:"renderUserSelect",value:function e(){var t=this;return n.a.createElement(G["a"],{ref:function e(r){t.lazyFilterSelect=r},items:X(this.props),template:W,tokenTemplate:z,onValueChange:function e(r){return t.onMappingChange(r[0].value)},single:true})}},{key:"renderAction",value:function e(){return n.a.createElement("div",{className:"col span_3_of_6"},this.renderUserSelect(),this.renderErrors())}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-service_import_mapping_form--user-mapping-row"},n.a.createElement("div",{className:"col span_3_of_6 break_all"},this.props.userMapping.import_email||K.t("no email")),this.renderAction())}}]);return t}(a["PureComponent"]);ee.displayName="ServiceImportUserMapping";ee.defaultProps=J;var te=ee;var re=new D["b"]("imports");var ae={service:w["b"].string.isRequired,crumb:w["b"].string.isRequired,allMembers:w["b"].object.isRequired,initialUserMappings:w["b"].arrayOf(w["b"].shape({id:w["b"].oneOfType([w["b"].string,w["b"].number]).isRequired,name:w["b"].string.isRequired,import_email:w["b"].string.isRequired,email:w["b"].string.isRequired,email_state:w["b"].string.isRequired,mapping:w["b"].string.isRequired})).isRequired,initialChannelMappings:w["b"].array.isRequired,ignoreApiUsers:w["b"].bool};var ne={ignoreApiUsers:false};var ie=[{label:re.t("Map users when possible, and manually configure the rest"),value:"-"},{label:re.t("Create and invite users"),value:"invite"},{label:re.t("Create deactivated users, without inviting anyone"),value:"create"},{label:re.t("Do not create users, leaving messages as bot messages"),value:"bot"},{label:re.t("Skip users, without importing their messages"),value:"0"}];var se=function(e){E()(t,e);function t(e){b()(this,t);var r=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={batchUserAction:"-",isUserMappingFormExpanded:false,userMappings:e.initialUserMappings,ignoreApiUsers:e.ignoreApiUsers};r.onUserMappingChange=r.onUserMappingChange.bind(r);r.onChange=r.onChange.bind(r);r.renderUserMapping=r.renderUserMapping.bind(r);r.onApplyBatchUserActionToAll=r.onApplyBatchUserActionToAll.bind(r);r.onApplyBatchUserActionToUnmapped=r.onApplyBatchUserActionToUnmapped.bind(r);return r}_()(t,[{key:"onChange",value:function e(t,r){this.setState(function(){return f()({},t,r)})}},{key:"onUserMappingChange",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!r.id)return;var a=this.state.userMappings;var n=Object(S["findIndex"])(a,function(e){return e.id===r.id});if(-1===n)return;var i=[].concat(m()(a.slice(0,n)),[r],m()(a.slice(n+1)));this.setState(function(){return{userMappings:L(i,Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToAll",value:function e(){var t=this;this.setState(function(e){return{userMappings:L(e.userMappings.map(function(r,a){return d()({},r,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[a].mapping:e.batchUserAction,email:r.import_email})}),Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToUnmapped",value:function e(){var t=this;this.setState(function(e){return{userMappings:L(e.userMappings.map(function(r,a){return $(r.mapping)?r:d()({},r,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[a].mapping:e.batchUserAction,email:r.import_email})}),Object.values(t.props.allMembers))}})}},{key:"maybeRenderIgnoreApiUsersInput",value:function e(){var t=this;return"hipchat"!==this.props.service?null:n.a.createElement(R["a"],{enabled:["feature_service_import_lfs"]},n.a.createElement(j["a"],{text:re.t('Also import "api" messages from the HipChat logs'),htmlFor:"service_import_ignore_api_user",type:"inline",cursor:"pointer"},n.a.createElement(T["a"],{id:"service_import_ignore_api_user",name:"service_import_ignore_api_user",value:!this.state.ignoreApiUsers,checked:!this.state.ignoreApiUsers,onChange:function e(){return t.onChange("ignoreApiUsers",!t.state.ignoreApiUsers)}})))}},{key:"renderUserMapping",value:function e(t){return n.a.createElement(te,{key:t,userMapping:this.state.userMappings[t],allMembers:this.props.allMembers,onUserMappingChange:this.onUserMappingChange})}},{key:"renderUserMappingForm",value:function e(){var t=this;var r=this.state.userMappings.map(function(e){return String(e.id)});return n.a.createElement(R["a"],{enabled:["feature_service_import_lfs"]},n.a.createElement("div",null,n.a.createElement("div",{className:"display_flex align_items_center justify_content_between bottom_margin"},n.a.createElement("h4",{className:"medium_bottom_margin col span_3_of_6"},re.t("View Users ({userCount})",{userCount:this.state.userMappings.length})),n.a.createElement(I["d"],{type:"outline",onClick:function e(){return t.onChange("isUserMappingFormExpanded",!t.state.isUserMappingFormExpanded)}},this.state.isUserMappingFormExpanded?re.t("close"):re.t("expand"))),n.a.createElement(P["a"],{isExpanded:this.state.isUserMappingFormExpanded},n.a.createElement("div",{className:"p-service_import_mapping_form--user_mappings"},n.a.createElement(C["a"],null,function(e){var a=e.width,i=e.height;return n.a.createElement(A["b"],{width:a,height:i,keys:r,rowRenderer:t.renderUserMapping})})))))}},{key:"renderUserImportMappingForm",value:function e(){var t=this;var r=this.state.batchUserAction;return n.a.createElement(R["a"],{enabled:["feature_service_import_lfs"]},n.a.createElement("div",null,n.a.createElement("h3",null,re.t("Users")),n.a.createElement("h4",{className:"medium_bottom_margin"},re.t("Batch Actions")),n.a.createElement("div",{className:"p-service_import_mapping_form--batch_actions display_flex justify_content_between"},n.a.createElement("div",{className:"flex_one"},n.a.createElement(N["d"],{id:"batchUserAction",name:"batchUserAction",onChange:function e(r){return t.onChange("batchUserAction",r)},options:ie,value:r,usePlaceholderOption:false})),n.a.createElement("div",{className:"flex_one align_right"},n.a.createElement(I["d"],{type:"outline",className:"right_margin",onClick:this.onApplyBatchUserActionToAll},re.t("Apply to All Users")),n.a.createElement(I["d"],{type:"outline",onClick:this.onApplyBatchUserActionToUnmapped},re.t("Apply to Unmapped Users")))),this.renderUserMappingForm(),this.maybeRenderIgnoreApiUsersInput()))}},{key:"renderFormInputs",value:function e(){var t=JSON.stringify(this.state.userMappings);var r=JSON.stringify(this.props.initialChannelMappings);var a=this.state.userMappings.map(function(e){return n.a.createElement("div",{key:e.id},n.a.createElement("input",{type:"hidden",value:e.mapping,name:"user_"+e.id}),n.a.createElement("input",{type:"hidden",value:e.email,name:"email_"+e.id}))});var i=this.props.initialChannelMappings.map(function(e){return n.a.createElement("input",{key:e.id,type:"hidden",value:e.mapping,name:"channel_"+e.id})});var s="hipchat"!==this.props.service?null:n.a.createElement("input",{type:"hidden",value:this.state.ignoreApiUsers?1:0,name:"ignore_api_user"});return n.a.createElement("div",null,n.a.createElement("input",{type:"hidden",value:this.props.crumb,name:"crumb"}),n.a.createElement("input",{type:"hidden",value:"mapping",name:"step"}),a,i,n.a.createElement("input",{type:"hidden",value:t,name:"user_list"}),n.a.createElement("input",{type:"hidden",value:r,name:"channel_list"}),s)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-service_import_mapping_form large_bottom_margin"},this.renderUserImportMappingForm(),n.a.createElement("form",{method:"post",action:"/services/import/"+this.props.service},this.renderFormInputs(),n.a.createElement(I["d"],{htmlType:"submit",size:"large"},"Save Changes")))}}]);return t}(a["PureComponent"]);se.displayName="ServiceImportMappingForm";se.defaultProps=ne;function oe(e){var t=Object(M["getAllMembers"])(e);return{allMembers:t}}var le=Object(o["connect"])(oe)(se);var ce=le;var ue=function e(t,r,a){if(!t)throw new Error("mountServiceImportMappingForm must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(ce,a)),r)};var de=s.a.unmountComponentAtNode;var pe={mountServiceImportMappingForm:ue,unmountServiceImportMappingForm:de};var me=r(51);Object(me["a"])("interop.mountServiceImportMappingForm",ue);Object(me["a"])("interop.unmountServiceImportMappingForm",de)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(33);var c=r(51);var u=r(5);var d=r.n(u);var p=r(6);var m=r.n(p);var h=r(7);var f=r.n(h);var v=r(8);var b=r.n(v);var g=r(129);var _=r(10);var y=r(2148);var k={title:g["b"].string,subtitle:g["b"].string,description:g["b"].node};var O={title:"",subtitle:"",description:null};var E=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;return n.a.createElement("h1",{className:"padding_bottom_100"},this.props.title)}},{key:"renderSubtitle",value:function e(){if(!this.props.subtitle)return null;return n.a.createElement("h3",{className:"padding_top_150"},this.props.subtitle)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return n.a.createElement("p",{className:"padding_top_50 margin_0 sk_dark_grey"},this.props.description)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-ent_settings_header padding_bottom_150"},this.renderTitle(),this.renderSubtitle(),this.renderDescription())}}]);return t}(a["PureComponent"]);E.displayName="SettingsHeader";E.defaultProps=O;var w=E;var C=r(32);var S=r.n(C);var j=r(3);var I=r.n(j);var T=r(2);var N=r(140);var A=r(77);var R=r(103);var M=r(1174);var P=r(227);var x=r(88);var D=new _["b"]("enterprise_settings");var F={membersShowAll:g["b"].bool,guestsShowAll:g["b"].bool,onSubmit:g["b"].func.isRequired};var L={membersShowAll:true,guestsShowAll:true,onSubmit:T["noop"]};var B=function e(t){var r=t.type,a=t.value,i=t.label,s=t.onChange;return n.a.createElement(x["a"],{id:"tos_accept_all_"+r+"_label",htmlFor:"tos_accept_all_"+r+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement(P["a"],{id:"tos_accept_all_"+r+"_checkbox",checked:a,onChange:s}))};B.displayName="renderCheckbox";var U=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={membersShowAll:r.props.membersShowAll,guestsShowAll:r.props.guestsShowAll};Object(T["bindAll"])(r,["onMembersShowAllChange","onGuestsShowAllChange"]);return r}m()(t,[{key:"onMembersShowAllChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{membersShowAll:r}})}},{key:"onGuestsShowAllChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{guestsShowAll:r}})}},{key:"submit",value:function e(t){var r=this.state,a=r.membersShowAll,n=r.guestsShowAll;var i={membersShowAll:a,guestsShowAll:n};this.props.onSubmit(i,t)}},{key:"renderMembersCheckbox",value:function e(){var t={type:"members",value:this.state.membersShowAll,label:D.t("Require existing Full Members to accept new terms"),onChange:this.onMembersShowAllChange};return B(t)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"guests",value:this.state.guestsShowAll,label:D.t("Require existing Guests to accept new terms"),onChange:this.onGuestsShowAllChange};return B(t)}},{key:"render",value:function e(){var t=D.t("Require existing members to accept the new Terms of Service?");var r=D.t("Future members will be required to accept these new terms, but you can also require existing members to accept them the next time they log in to Slack.");return n.a.createElement("div",{className:"c-ent_custom_tos_accept_all_form"},n.a.createElement("h3",{className:"margin_bottom_100"},t),n.a.createElement("p",{className:"margin_bottom_200"},r),this.renderMembersCheckbox(),this.renderGuestsCheckbox())}}]);return t}(a["PureComponent"]);U.displayName="CustomTOSAcceptForm";U.defaultProps=L;var q=U;var G=r(9);var H=r.n(G);var W=r(15);var V=r.n(W);var z=r(478);var Q=r(18);var K=r(65);var Y=r(338);var J=r(660);var Z=r(190);var X=r(811);var $=r(2150);var ee=new _["b"]("enterprise_settings");var te="members";var re="guests";var ae="text";var ne="url";var ie="all";var se="not_all";var oe="/custom_tos_view";var le=16e3;var ce={membersUrl:g["b"].string,membersText:g["b"].string,membersContentType:g["b"].oneOf([ae,ne]),guestsUrl:g["b"].string,guestsText:g["b"].string,guestsContentType:g["b"].oneOf([ae,ne]),onSubmit:g["b"].func.isRequired};var ue={membersUrl:"",membersText:"",membersContentType:"text",guestsUrl:"",guestsText:"",guestsContentType:"text",onSubmit:T["noop"]};var de=ee.rt('<b>*bold*</b> <i>_italics_</i> ~strike~ <span className="quote">>quote</span> and links are allowed. <a className="underline sk_dark_grey cursor_pointer">Learn more</a>',null,function(e){var t=e.tag,r=e.key,a=e.text;return"a"===t?n.a.createElement("a",{key:r,href:"https://get.slack.help/hc/articles/202288908-Format-your-messages",target:"_blank",rel:"noopener noreferrer"},a):null});var pe=function e(t){var r=t.error,a=t.url,i=t.type,s=t.onChange;var o=ee.t("https://\u2026");return n.a.createElement(Z["a"],{id:"tos_"+i+"_input",name:"tos_"+i+"_input",value:a,onChange:s,errorText:r,errorLevel:"error",placeholder:o})};pe.displayName="renderInput";var me=function e(t){var r=t.error,a=t.text,i=t.type,s=t.onChange;return n.a.createElement(X["a"],{resize:"none",id:"tos_"+i+"_textarea",name:"tos_"+i+"_textarea",value:a,hintText:de,onChange:s,errorText:r,errorLevel:"error"})};me.displayName="renderTextarea";var he=function e(t,r){if(!Object(z["d"])(r)){if(t===te)return ee.t("Please enter Terms of Service for Members.");if(t===re)return ee.rt("Please enter Terms of Service for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(r.length>=le)return ee.t("Please enter a shorter Terms of Service (maximum {count, number} characters).",{count:le});return""};var fe=function e(t,r){if(!Object(z["d"])(r)){if(t===te)return ee.t("Please enter Terms of Service URL for Members.");if(t===re)return ee.rt("Please enter Terms of Service URL for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(!Object(z["b"])(r))return ee.rt("Looks like that isn\u2019t a valid URL. If you prefer to enter your custom terms directly, select <strong>Enter text</strong> instead.");return""};var ve=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={all:r.props.guestsText||r.props.guestsUrl?se:ie,membersUrl:r.props.membersUrl,membersText:r.props.membersText,membersContentType:r.props.membersContentType,membersUrlError:"",membersTextError:"",guestsUrl:r.props.guestsUrl,guestsText:r.props.guestsText,guestsContentType:r.props.guestsContentType,guestsUrlError:"",guestsTextError:""};r.onAllChange=r.onAllChange.bind(r);r.onMembersTextChange=r.onTextChange.bind(r,te);r.onGuestsTextChange=r.onTextChange.bind(r,re);r.onMembersUrlChange=r.onUrlChange.bind(r,te);r.onGuestsUrlChange=r.onUrlChange.bind(r,re);r.onMembersToggle=r.onToggle.bind(r,te);r.onGuestsToggle=r.onToggle.bind(r,re);return r}m()(t,[{key:"onAllChange",value:function e(t){var r=t.target.value;this.setState(function(){return{all:r}})}},{key:"onToggle",value:function e(t){var r=this;var a=t+"ContentType";this.setState(function(){return H()({},a,r.state[a]===ae?ne:ae)})}},{key:"onTextChange",value:function e(t,r){this.setState(function(){var e;return e={},H()(e,t+"Text",r),H()(e,t+"TextError",""),e})}},{key:"onUrlChange",value:function e(t,r){this.setState(function(){var e;return e={},H()(e,t+"Url",r),H()(e,t+"UrlError",""),e})}},{key:"validate",value:function e(t){var r=this.state,a=r.all,n=r.membersUrl,i=r.membersText,s=r.membersContentType,o=r.guestsUrl,l=r.guestsText,c=r.guestsContentType;var u={};s===ae&&(u.membersTextError=he(te,i));s===ne&&(u.membersUrlError=fe(te,n));if(a!==ie){c===ae&&(u.guestsTextError=he(re,l));c===ne&&(u.guestsUrlError=fe(re,o))}this.setState(function(){return u},t)}},{key:"submit",value:function e(t){var r=this.state,a=r.all,n=S()(r,["all"]);var i=I()({all:a===ie},n);this.props.onSubmit(i,t)}},{key:"isValid",value:function e(){var t=this.state,r=t.all,a=t.membersUrl,n=t.membersText,i=t.membersContentType,s=t.membersUrlError,o=t.membersTextError,l=t.guestsUrl,c=t.guestsText,u=t.guestsContentType,d=t.guestsUrlError,p=t.guestsTextError;var m=i===ae&&n&&!o||i===ne&&a&&!s;if(r===ie||!m)return m;var h=u===ae&&c&&!p||u===ne&&l&&!d;return h}},{key:"maybeRenderMembersInput",value:function e(){if(this.state.membersContentType!==ne)return null;var t=this.state,r=t.membersUrl,a=t.membersUrlError;var n={error:a,url:r,type:te,onChange:this.onMembersUrlChange};return pe(n)}},{key:"maybeRenderGuestsInput",value:function e(){if(this.state.all===ie)return null;if(this.state.guestsContentType!==ne)return null;var t=this.state,r=t.guestsUrl,a=t.guestsUrlError;var n={error:a,url:r,type:re,onChange:this.onGuestsUrlChange};return pe(n)}},{key:"maybeRenderMembersTextarea",value:function e(){if(this.state.membersContentType!==ae)return null;var t=this.state,r=t.membersText,a=t.membersTextError;var n={error:a,text:r,type:te,onChange:this.onMembersTextChange};return me(n)}},{key:"maybeRenderGuestsTextarea",value:function e(){if(this.state.all===ie)return null;if(this.state.guestsContentType!==ae)return null;var t=this.state,r=t.guestsText,a=t.guestsTextError;var n={error:a,text:r,type:re,onChange:this.onGuestsTextChange};return me(n)}},{key:"maybeRenderGuestsInputBar",value:function e(){var t=this.state,r=t.all,a=t.guestsUrl,n=t.guestsText,i=t.guestsContentType;if(r===ie)return null;var s=!n&&i===ae||!a&&i===ne;var o={previewIsDisabled:s,contentType:i,content:i===ae?n:a,type:re,onToggle:this.onGuestsToggle};return this.renderInputBar(o)}},{key:"renderMembersInputBar",value:function e(){var t=this.state,r=t.membersUrl,a=t.membersText,n=t.membersContentType;var i=!a&&n===ae||!r&&n===ne;var s={previewIsDisabled:i,contentType:n,content:n===ae?a:r,type:te,onToggle:this.onMembersToggle};return this.renderInputBar(s)}},{key:"renderPreviewButton",value:function e(t){var r=this;var a=t.previewIsDisabled,i=t.contentType,s=t.content,o=t.type;var l=ee.t("Preview");var c=i===ne;var u=c?function(){var e=window.open((Object(T["startsWith"])(s.toLowerCase(),"http")?"":"http://")+s,"_blank");e.opener=null}:function(){return r["tos_preview_"+o].submit()};var d=V()("p-ent_custom_tos_input_form__small_text","p-ent_custom_tos_input_form__small_text--right-divider","padding_right_50",{sk_dark_grey:a});var p=n.a.createElement(K["a"],{disabled:a,onClick:u},n.a.createElement("span",{className:d},l," ",n.a.createElement(Q["a"],{type:"external-link",className:"p-ent_custom_tos_input_form__icon"})));if(c)return p;return n.a.createElement("form",{action:oe,method:"POST",ref:function e(t){r["tos_preview_"+o]=t},target:"_blank"},n.a.createElement("input",{type:"hidden",name:"custom_tos_preview",value:s}),p)}},{key:"renderInputBar",value:function e(t){var r=t.contentType,a=t.onToggle;var i=ee.t("Terms of Service");var s=r===ae?ee.t("Enter URL"):ee.t("Enter text");var o=V()("p-ent_custom_tos_input_form__small_text","padding_left_50");return n.a.createElement("div",{className:"p-ent_custom_tos_input_form__toggle_bar"},n.a.createElement("span",{className:"p-ent_custom_tos_input_form__label c-label__text bold"},i),this.renderPreviewButton(t),n.a.createElement(K["a"],{onClick:a},n.a.createElement("span",{className:o},s)))}},{key:"renderRadio",value:function e(t){var r=this.state.all;var a=t.value,i=t.label;return n.a.createElement("div",{key:"tos_type_"+a},n.a.createElement(x["a"],{id:"tos_type_"+a+"_label",htmlFor:"tos_type_"+a+"_radio",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_input_form__label",text:i},n.a.createElement(Y["a"],{id:"tos_type_"+a+"_radio",value:a,onChange:this.onAllChange,checked:a===r})))}},{key:"renderRadiogroup",value:function e(){var t=[{value:ie,label:ee.t("Use the same Terms of Service as Full Members")},{value:se,label:ee.t("Use a different Terms of Service")}];return n.a.createElement(J["a"],{field:"tos_type"},t.map(this.renderRadio,this))}},{key:"render",value:function e(){var t=ee.t("Set custom Terms of Service that members and guests will have to accept before using Slack. If you already have a URL for your custom Terms of Service, you can enter that instead.");var r=ee.t("Full Members");var a=ee.t("Guests");return n.a.createElement("div",null,n.a.createElement("p",null,t),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},r),this.renderMembersInputBar(),this.maybeRenderMembersTextarea(),this.maybeRenderMembersInput(),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},a),this.renderRadiogroup(),this.maybeRenderGuestsInputBar(),this.maybeRenderGuestsTextarea(),this.maybeRenderGuestsInput())}}]);return t}(a["PureComponent"]);ve.displayName="CustomTOSInputForm";ve.defaultProps=ue;var be=ve;var ge=r(1443);var _e=new _["b"]("enterprise_settings");var ye="text";var ke="url";var Oe={saving:g["b"].bool,customTos:g["b"].bool,membersTos:g["b"].string,membersContentType:g["b"].string,guestsTos:g["b"].string,guestsContentType:g["b"].string,openModal:g["b"].func};var Ee={saving:false,customTos:false,membersTos:"",membersContentType:"text",guestsTos:"",guestsContentType:"text",openModal:T["noop"]};var we=function e(t){var r=t.customTos,a=t.membersTos,n=t.membersContentType,i=t.guestsTos,s=t.guestsContentType;return{all:!i,membersUrl:n===ke?a:"",membersText:n===ye?a:"",membersShowAll:!r,membersContentType:n,guestsUrl:s===ke?i:"",guestsText:s===ye?i:"",guestsShowAll:!r,guestsContentType:s}};var Ce=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state=I()({},we(r.props),{showEnable:false,showEdit:false,isPending:false,isValid:true});Object(T["bindAll"])(r,["onClick","onEnable","onDisable","onEdit","onEnd","onCancelEnable","onConfirmDisable","onConfirmEnable","setFormSettings","onInputFormSubmit","onAcceptFormSubmit"]);return r}m()(t,[{key:"componentDidUpdate",value:function e(t,r){!this.props.saving&&this.state.isPending&&this.onEnd();this.dialog&&r.isPending!==this.state.isPending&&this.dialog.render({goButtonIsPending:this.state.isPending})}},{key:"onClick",value:function e(){var t=this.props.customTos;this.setState(function(){return t?{showEdit:true}:{showEnable:true}})}},{key:"onEnable",value:function e(){this.setState(function(){return{showEnable:true}})}},{key:"onDisable",value:function e(){this.dialog=this.props.openModal({element:this.renderDisable()})}},{key:"onEdit",value:function e(){this.setState(function(){return{showEdit:true}})}},{key:"onEnd",value:function e(){var t=this;this.reset(function(){t.settingsModalRef.setIndex(0);t.dialog&&t.dialog.close()})}},{key:"onCancelEnable",value:function e(){this.setState(function(){return{showEnable:false,showEdit:false}},this.onEnd)}},{key:"onConfirmDisable",value:function e(){this.setIsPending(true);Object(N["b"])(Object(N["a"])().settings.deactivateOrgCustomTOSSettings())}},{key:"onConfirmEnable",value:function e(){this.setIsPending(true);var t=this.state,r=t.all,a=t.membersUrl,n=t.membersText,i=t.membersShowAll,s=t.membersContentType,o=t.guestsUrl,l=t.guestsText,c=t.guestsShowAll,u=t.guestsContentType;var d=s===ye?n:a;var p=this.props.customTos;var m={customTos:p,membersTos:d,membersShowAll:i,membersContentType:s,guestsShowAll:c};if(!r){var h=u===ye?l:o;m.guestsTos=h;m.guestsContentType=u}Object(N["b"])(Object(N["a"])().settings.createOrgCustomTOSSettings(m))}},{key:"onInputFormSubmit",value:function e(){var t=this;this.inputForm.validate(function(){var e=t.inputForm.isValid();t.setIsValid(e);e&&t.inputForm.submit(t.settingsModalRef.goToNextStep.bind(t.settingsModalRef))})}},{key:"onAcceptFormSubmit",value:function e(){this.acceptForm.submit(this.onConfirmEnable)}},{key:"setFormSettings",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T["noop"];this.setState(function(){return t},r)}},{key:"setIsPending",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"setIsValid",value:function e(t){this.setState(function(){return{isValid:t}})}},{key:"reset",value:function e(t){var r=this;this.setState(function(){return I()({},we(r.props),{showEnable:false,showEdit:false,isPending:false,isValid:true})},t)}},{key:"buildEnableSteps",value:function e(){var t=this;var r=this.renderInputForm();var a=this.renderAcceptForm();var n=function e(){return t.props.customTos?_e.t("Edit Custom Terms of Service"):_e.t("Enable Custom Terms of Service")};var i=function e(){return t.props.customTos?_e.t("Update Custom Terms of Service"):_e.t("Enable Custom Terms of Service")};var s=_e.t("Next");var o=_e.t("Cancel");var l=this.state.isPending;return[{children:r,goButtonText:s,cancelText:o,title:n(),withHeader:true,showBackButton:false,showCancelButton:true,buttonAlignment:"right",onGo:this.onInputFormSubmit,onCancel:this.onCancelEnable},{children:a,goButtonText:i(),goButtonIsPending:l,cancelText:o,title:n(),withHeader:true,showBackButton:true,showCancelButton:true,buttonAlignment:"right",onGo:this.onAcceptFormSubmit,onCancel:this.onCancelEnable}]}},{key:"maybeRenderEnable",value:function e(){var t=this;return n.a.createElement(M["a"],{isOpen:this.state.showEnable||this.state.showEdit,onCancel:this.onCancelEnable,showCloseTransition:true,showOpenTransition:true,steps:this.buildEnableSteps(),position:"fixed",ref:function e(r){t.settingsModalRef=r}})}},{key:"renderDisable",value:function e(){var t=_e.t("Disable");var r="danger";var a=_e.t("When Custom Terms of Service are disabled, all members and guests will only be required to accept Slack\u2019s Terms of Service");var i=_e.t("Disable Custom Terms of Service");var s=this.state.isPending;return n.a.createElement(R["a"],{goButtonText:t,goButtonType:r,goButtonIsPending:s,title:i,onGo:this.onConfirmDisable,shouldCloseOnGo:false},n.a.createElement("p",null,a))}},{key:"renderInputForm",value:function e(){var t=this;var r=this.state,a=r.all,i=r.isValid,s=r.isPending,o=r.showEnable,l=r.showEdit,c=S()(r,["all","isValid","isPending","showEnable","showEdit"]);var u=I()({},c,{onSubmit:this.setFormSettings});return n.a.createElement(be,I()({},u,{ref:function e(r){t.inputForm=r}}))}},{key:"renderAcceptForm",value:function e(){var t=this;var r=!this.props.customTos;var a={membersShowAll:r,guestsShowAll:r,onSubmit:this.setFormSettings};return n.a.createElement(q,I()({},a,{ref:function e(r){t.acceptForm=r}}))}},{key:"renderSetting",value:function e(){var t=this.props.customTos;var r={type:"button",enabled:t,onEnable:this.onEnable,onDisable:this.onDisable,onEdit:this.onEdit};var a=_e.t("Custom Terms of Service");var i=t?_e.t("Enabled"):_e.t("Disabled");var s=_e.t("You can require members of your organization to accept custom Terms of Service before they can use Slack.");return n.a.createElement(ge["a"],{label:a,state:i,description:s,onClick:this.onClick,control:r})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-ent_custom_tos_setting"},this.renderSetting(),this.maybeRenderEnable())}}]);return t}(a["PureComponent"]);Ce.displayName="CustomTOSSetting";Ce.defaultProps=Ee;var Se={openModal:A["openModal"]};var je=Object(o["connect"])(null,Se)(Ce);var Ie=je;var Te=r(2152);var Ne=new _["b"]("enterprise_settings");var Ae={loading:g["b"].bool,saving:g["b"].bool,customTos:g["b"].bool,membersTos:g["b"].string,guestsTos:g["b"].string,membersContentType:g["b"].string,guestsContentType:g["b"].string};var Re={loading:true,saving:false,customTos:false,membersTos:"",guestsTos:"",membersContentType:"text",guestsContentType:"text"};var Me=function e(){return n.a.createElement("div",{className:"p-org_wide_settings_pane__loading","data-org-wide-settings-pane-loading":true})};Me.displayName="renderLoadingContainer";var Pe=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"maybeRenderCustomTOS",value:function e(){if(this.props.loading)return null;var t=this.props,r=t.saving,a=t.customTos,i=t.membersTos,s=t.guestsTos,o=t.membersContentType,l=t.guestsContentType;var c={saving:r,customTos:a,membersTos:i,guestsTos:s,membersContentType:o,guestsContentType:l};return n.a.createElement(Ie,c)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_wide_settings_pane"},n.a.createElement(w,{title:Ne.t("Organization Settings")}),Me(),this.maybeRenderCustomTOS())}}]);return t}(a["PureComponent"]);Pe.displayName="OrgWideSettingsPane";Pe.defaultProps=Re;var xe=Pe;var De=Pe;var Fe=De;Object(c["a"])("interop.orgWideSettingsPane",{render:function e(t,r,a){if(!t)throw new Error("orgWideSettingsPane render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Fe,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(5);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var m=r.n(p);var h=r(8);var f=r.n(h);var v=r(129);var b=r(2);var g=r.n(b);var _=r(2086);var y=r(850);var k=r(650);var O=r(69);var E=r(11);var w=r(169);var C=r(10);var S=r(167);var j=r(63);var I=r(742);var T=r(715);var N=r(13);var A=Object(N["c"])("TS.ui.react_keyboard_shortcuts.executeShortcut",function(){return null});var R=Object(N["c"])("TS.client.unread.isEnabled",function(){return null});var M=r(15);var P=r.n(M);var x=r(41);var D=r(18);var F=r(62);var L=r(2224);var B=r(2226);var U={os:v["b"].oneOf(["windows","mac","linux"]),browser:v["b"].string,keyboardLocale:v["b"].string,localeBlackList:v["b"].array,title:v["b"].string,keys:v["b"].array,keysLinux:v["b"].array,keysWin:v["b"].array,hasInfoButton:v["b"].bool,infoButtonMessage:v["b"].string,id:v["b"].string,isSsbOnly:v["b"].bool,browserBlackList:v["b"].array};var q={os:null,browser:null,keyboardLocale:null,localeBlackList:null,title:"Basic",keys:[],keysLinux:null,keysWin:null,hasInfoButton:false,infoButtonMessage:"",id:null,isSsbOnly:false,browserBlackList:[]};var G={"\u2191":"arrow_up_medium","\u2193":"arrow_down_medium","\u2190":"arrow_left_medium","\u2192":"arrow_right_medium"};var H=function(e){f()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getKeys",value:function e(){var t=this.props,r=t.keys,a=t.keysWin,n=t.keysLinux,i=t.os;if(null!=a&&"windows"===i)return a;if(null!=n&&"linux"===i)return n;return r}},{key:"execShortcut",value:function e(t){A(t);Object(F["c"])("clicked_keyboard_shortcut")}},{key:"renderKeyLabel",value:function e(t){var r=this.props.os;var a="windows"===r||"linux"===r;if(G[t])return n.a.createElement(D["a"],{type:G[t]});if(("Cmd"===t||"Control"===t)&&a)return"Ctrl";if("Option"===t&&a)return"Alt";if("CtrlAlternative"===t)return"Ctrl";if("ShiftAlternative"===t)return"Shift";return t}},{key:"renderKeys",value:function e(){var t=this;return this.getKeys().map(function(e){var r=e.split("key_")[1];if(!r)return e;var a=!!G[r];var i=P()({"p-shortcuts_flexpane__arrow_key":a,"c-keyboard_key":true});return n.a.createElement("div",{key:t.props.title+" "+e,className:i},t.renderKeyLabel(r))})}},{key:"renderInfoButton",value:function e(){if(this.props.hasInfoButton)return n.a.createElement(x["d"],{tip:this.props.infoButtonMessage,delay:x["b"]},n.a.createElement(D["a"],{align:"top",className:"p-shortcuts_flexpane__tip",type:"question_circle"}));return null}},{key:"renderTitle",value:function e(){var t=this;if(null==this.props.id)return n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title",key:"title "+this.props.title},this.props.title,this.renderInfoButton()));var r=P()("p-shortcuts_flexpane__shortcut_title","btn_link",this.props.id);return n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},n.a.createElement("button",{type:"button",onClick:function e(){return t.execShortcut(t.props.id)},className:r,key:this.props.title+" shortcut_title"},this.props.title,this.renderInfoButton()))}},{key:"render",value:function e(){var t="ssb"===this.props.browser;if(this.props.isSsbOnly&&!t)return null;var r=null==this.props.browserBlackList?[]:this.props.browserBlackList;var a=Object(b["includes"])(r,this.props.browser)||Object(b["includes"])(r,this.props.os);if(a)return null;var i=null==this.props.localeBlackList?[]:this.props.localeBlackList;var s=Object(b["includes"])(i,this.props.keyboardLocale);if(s)return null;if("open_all_unreads"===this.props.id&&!R())return null;var o=null==this.props.id?"":"p-shortcuts_flexpane__shortcut_hoverable";var l=P()("p-shortcuts_flexpane__shortcut",o);return n.a.createElement("li",{className:l,key:this.props.title+" shortcut"},this.renderTitle(),n.a.createElement("span",{className:"p-shortcuts_flexpane__shortcut_keys",key:this.props.title+" shortcut_keys"},this.renderKeys()))}}]);return t}(n.a.PureComponent);H.displayName="Shortcut";H.defaultProps=q;var W=H;var V=r(2228);var z={os:v["b"].oneOf(["windows","mac","linux"]),browser:v["b"].string,keyboardLocale:v["b"].string,id:v["b"].string,title:v["b"].string,shortcuts:v["b"].arrayOf(v["b"].shape({os:v["b"].oneOf(["windows","mac","linux"]),browser:v["b"].string,title:v["b"].string,keys:v["b"].array,keysLinux:v["b"].array,keysWin:v["b"].array,hasInfoButton:v["b"].bool,infoButtonMessage:v["b"].string,id:v["b"].string,isSsbOnly:v["b"].bool,browserBlackList:v["b"].array,localeBlackList:v["b"].array}))};var Q={os:null,browser:null,keyboardLocale:null,title:null,id:null,shortcuts:[]};var K=function(e){f()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderShortcuts",value:function e(){var t=this;return g.a.map(this.props.shortcuts,function(e){return n.a.createElement(W,{os:t.props.os,browser:t.props.browser,keyboardLocale:t.props.keyboardLocale,localeBlackList:e.localeBlackList,key:e.title+e.keys,title:e.title,isSsbOnly:e.isSsbOnly,keys:e.keys,keysLinux:e.keysLinux,keysWin:e.keysWin,hasInfoButton:e.hasInfoButton,infoButtonMessage:e.infoButtonMessage,id:e.id,browserBlackList:e.browserBlackList})})}},{key:"render",value:function e(){if("all_unreads"===this.props.id&&!R())return null;if("workspaces"===this.props.id&&"ssb"!==this.props.os)return null;return n.a.createElement("div",{className:"p-shortcuts_flexpane__section_container"},n.a.createElement("h3",{className:"p-shortcuts_flexpane__title"},this.props.title),n.a.createElement("ul",{className:"p-shortcuts_flexpane__list"},this.renderShortcuts()))}}]);return t}(n.a.PureComponent);K.displayName="ShortcutsSection";K.defaultProps=Q;var Y=K;var J=r(27);var Z=r(217);var X=new C["b"]("shortcuts_flexpane");function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.featureJumpToUnreadShortcut,a=t.featureA11yCustomStatus,n=t.featureThreadsCopyChange;var i=[{title:X.t("Basics"),id:"basics",shortcuts:[{title:X.t("Quick Switcher"),keys:["key_Cmd","key_K","  or  ","key_T"],hasInfoButton:true,infoButtonMessage:X.t("Jump to another conversation by just typing its name",{fallbackHash:"137fbaf2c3cf03812df6ffc1116ae35390b63057"}),id:"quick_switcher",isSsbOnly:true},{title:X.t("Quick Switcher"),keys:["key_Cmd","key_K"],hasInfoButton:true,infoButtonMessage:X.t("Jump to another conversation by just typing its name",{fallbackHash:"137fbaf2c3cf03812df6ffc1116ae35390b63057"}),id:"quick_switcher",browserBlackList:["ssb"]},{title:X.t("Browse DMs"),keys:["key_Cmd","key_Shift","key_K"],id:"browse_dms"},{title:X.t("Edit last message (in empty text input)"),keys:["key_\u2191"]},{title:X.t("Back in history"),keys:["key_Cmd","key_["],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["de","es","fr","ja"]},{title:X.t("Forward in history"),keys:["key_Cmd","key_]"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["de","es","fr","ja"]},{title:X.t("All Unreads"),keys:["key_Cmd","key_Shift","key_A"],id:"open_all_unreads"},{title:n?X.t("Threads"):X.t("All Threads"),keys:["key_Cmd","key_Shift","key_T"],id:"open_all_threads",isSsbOnly:true},{title:X.t("Search"),keys:["key_Cmd","key_F"],isSsbOnly:true},{title:X.t("Dismiss dialogs"),keys:["key_Esc"]}]},{title:X.t("Navigation"),id:"navigation",shortcuts:[{title:X.t("Move focus to the next element"),keys:["key_Tab"]},{title:X.t("Move focus to the previous element"),keys:["key_Shift","key_Tab"]},{title:X.t("Move focus through messages"),keys:["key_\u2191","  or  ","key_\u2193"]},{title:X.t("Move focus to the next section"),keys:Object(Z["a"])()?["key_F6"]:["key_Cmd","key_F6"]},{title:X.t("Move focus to the previous section"),keys:Object(Z["a"])()?["key_Shift","key_F6"]:["key_Cmd","key_Shift","key_F6"]},{title:X.t('Take action or "click" on selected element'),keys:["key_Enter"]},{title:X.t("Increase text size"),keys:["key_Cmd","key_+"]},{title:X.t("Decrease text size"),keys:["key_Cmd","key_-"]},{title:X.t("Scroll up"),keys:["key_fn","key_\u2191","  or  ","key_Page Up"]},{title:X.t("Scroll down"),keys:["key_fn","key_\u2193","  or  ","key_Page Down"]},{title:X.t("Preferences"),keys:["key_Cmd","key_,"],id:"open_preferences",isSsbOnly:true,browserBlackList:["windows","linux"]},{title:X.t("Open or close right pane"),keys:["key_Cmd","key_"+Object(w["c"])(".",{kb:e})]},{title:X.t("Channel Info"),keys:["key_Cmd","key_Shift","key_I"],isSsbOnly:true},{title:X.t("Activity"),keys:["key_Cmd","key_Shift","key_M"],browserBlackList:["chrome_desktop","chrome_mobile"]},{title:X.t("Directory"),keys:["key_Cmd","key_Shift","key_E"],browserBlackList:["ff"]},{title:X.t("Starred items"),keys:["key_Cmd","key_Shift","key_S"]},{title:X.t("Toggle full screen"),keys:["key_Ctrl","key_Cmd","key_F"],keysWin:["key_Ctrl","key_Shift","key_F"],keysLinux:["key_Ctrl","key_Shift","key_F"]}]},{title:X.t("Messaging"),id:"messaging",shortcuts:[{title:X.t("Select text to beginning of current line"),keys:["key_Shift","key_\u2191"]},{title:X.t("Select text to end of current line"),keys:["key_Shift","key_\u2193"]},{title:X.t("Start a new line"),keys:["key_Shift","key_Enter"]},{title:X.t("React to last message (or message with focus)"),keys:["key_Cmd","key_Shift","key_"+Object(w["c"])("\\",{kb:e})]},{title:X.t("Autocomplete @username"),keys:["key_@"]},{title:X.t("Autocomplete channel"),keys:["key_#"]},{title:X.t("Autocomplete emoji"),keys:["key_:"]}]},{title:X.t("Mark Messages Read and Unread"),shortcuts:[{title:X.t("Mark all messages in current channel as read"),keys:["key_Esc"]},{title:X.t("Mark all messages as read"),keys:["key_Shift","key_Esc"]},{title:X.t("Mark a message as unread"),keys:["key_Alt",X.t("  and click message")]}]},{title:X.t("Channels & Direct Messages"),shortcuts:[{title:X.t("Previous channel or DM"),keys:["key_Option","key_\u2191"]},{title:X.t("Next channel or DM"),keys:["key_Option","key_\u2193"]},{title:X.t("Previous unread channel or DM"),keys:["key_Option","key_Shift","key_\u2191"]},{title:X.t("Next unread channel or DM"),keys:["key_Option","key_Shift","key_\u2193"]}]},{title:X.t("All Unreads"),id:"all_unreads",shortcuts:[{title:X.t("Next channel"),keys:["key_\u2192"]},{title:X.t("Previous channel"),keys:["key_\u2190"]},{title:X.t("Mark channel as read"),keys:["key_R"]}]},{title:X.t("Files and Snippets"),shortcuts:[{title:X.t("Upload a file"),keys:["key_Cmd","key_U"]},{title:X.t("Create a snippet"),keys:["key_Cmd","key_Shift","key_Enter"]}]},{title:X.t("Calls"),shortcuts:[{title:X.t("Toggle mute"),keys:["key_M"]},{title:X.t("Toggle video"),keys:["key_V"]},{title:X.t("Invite list"),keys:["key_+",X.t("  or  "),"key_A"]},{title:X.t("Emoji reactions"),keys:["key_E",X.t("  then 1-9")]}]},{title:X.t("Workspace Switching"),id:"workspaces",shortcuts:[{title:X.t("Next workspace"),keys:["key_Cmd","key_Shift","key_["]},{title:X.t("Previous workspace"),keys:["key_Cmd","key_Shift","key_]"]},{title:X.t("A specific workspace"),keys:["key_Cmd",X.t("  and 1-9")]}]}];var s=i[Object(b["findIndex"])(i,["id","basics"])].shortcuts;var o=i[Object(b["findIndex"])(i,["id","navigation"])].shortcuts;var l=i[Object(b["findIndex"])(i,["id","messaging"])].shortcuts;r&&Object(Z["a"])()&&o.push({title:X.t("Jump to unread messages"),keys:["key_Cmd","key_J"]});l.push({title:X.t("Bold text"),keys:["key_Cmd","key_B"]});l.push({title:X.t("Italic text"),keys:["key_Cmd","key_I"]});l.push({title:X.t("Strikethrough text"),keys:["key_Cmd","key_Shift","key_X"]});l.push({title:X.t("Format text as code"),keys:["key_Cmd","key_Shift","key_C"]});if(!Object(Z["a"])()||Object(J["isSSBAndAtLeastVersion"])("3.0.0")){l.push({title:X.t("Format selection as bullet list"),keys:["key_Cmd","key_Shift","key_8"]});l.push({title:X.t("Format selection as numbered list"),keys:["key_Cmd","key_Shift","key_7"]})}l.push({title:X.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_>"]});a&&s.push({title:X.t("Set a status"),keys:["key_Cmd","key_Shift","key_Y"],id:"set_a_status"});return i}var ee=r(2230);var te={os:v["b"].oneOf(["windows","mac","linux"]),browser:v["b"].string,keyboardLocale:v["b"].string,sections:v["b"].arrayOf(v["b"].shape({os:v["b"].oneOf(["windows","mac","linux"]),browser:v["b"].string,title:v["b"].string,shortcuts:v["b"].arrayOf(v["b"].shape({os:v["b"].oneOf(["windows","mac","linux"]),browser:v["b"].string,title:v["b"].string,keys:v["b"].array,keysLinux:v["b"].array,keysWin:v["b"].array,hasInfoButton:v["b"].bool,infoButtonMessage:v["b"].string,id:v["b"].string,isSsbOnly:v["b"].bool,browserBlackList:v["b"].array}))})).isRequired,isShowing:v["b"].bool,useGlobalNav:v["b"].bool};var re={os:null,browser:null,keyboardLocale:null,isShowing:true,useGlobalNav:false};var ae=new C["b"]("shortcuts_flexpane");var ne=function(e){f()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderSections",value:function e(){var t=this;return g.a.map(this.props.sections,function(e){return n.a.createElement(Y,{os:t.props.os,browser:t.props.browser,keyboardLocale:t.props.keyboardLocale,key:e.id+e.title,title:e.title,id:e.id,shortcuts:e.shortcuts})})}},{key:"renderHeading",value:function e(){if(this.props.useGlobalNav)return null;var t="mac"===this.props.os?ae.t("Cmd"):ae.t("Ctrl");var r=Object(w["c"])("/",{kb:this.props.keyboardLocale});var a=ae.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:t,headerSlashButton:r});return n.a.createElement(T["a"],null,n.a.createElement("span",{id:"shortcuts_tab_aria_label"},ae.t("Keyboard Shortcuts")),n.a.createElement("span",{className:"p-shortcuts_flexpane__sub_heading block"},a))}},{key:"render",value:function e(){var t=this;var r=this.props.isShowing;if(!r)return null;return n.a.createElement("div",{className:"p-shortcuts_flexpane"},this.renderHeading(),n.a.createElement("div",{className:"p-shortcuts_flexpane__section"},n.a.createElement(_["a"],null,function(e){var r=e.width,a=e.height;return n.a.createElement(I["a"],{serializationKey:"keyboard-shortcuts-scrollbar",width:r,height:a,monkey:true},t.renderSections())})))}}]);return t}(n.a.PureComponent);ne.displayName="KeyboardShortcutsList";ne.defaultProps=re;function ie(e,t){var r=Object(y["getKeyboardLocale"])(e);var a=void 0;a=Object(E["isFeatureEnabled"])(e,"feature_remove_flexpane_store")?"shortcuts"===Object(O["getSecondaryView"])(e):Object(j["a"])()||"shortcuts"===Object(k["getFlexpaneState"])(e).flexName;var n=Object(E["isFeatureEnabled"])(e,"feature_jump_to_unread_shortcut");var i=Object(E["isFeatureEnabled"])(e,"feature_custom_status_expiry");var s=Object(E["isFeatureEnabled"])(e,"feature_threads_copy_change");return{sections:t.sections||$(r,{featureJumpToUnreadShortcut:n,featureCustomStatusExpiry:i,featureThreadsCopyChange:s}),isShowing:a,useGlobalNav:Object(S["b"])(e)}}var se=Object(i["connect"])(ie)(ne);var oe=se;var le=function e(t,r,a){if(!t)throw new Error("mountKeyboardShortcuts must be called with a teamId parameter");var l=Object(o["d"])(t);var c=a;Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(oe,c)),r)};var ce=le;var ue=r(51);Object(ue["a"])("interop.mountKeyboardShortcuts",ce)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(33);var c=r(51);var u=r(5);var d=r.n(u);var p=r(6);var m=r.n(p);var h=r(7);var f=r.n(h);var v=r(8);var b=r.n(v);var g=r(129);var _=r(2);var y=r(10);var k=r(140);var O=r(344);var E=r(20);var w=r(41);var C=r(18);var S=r(15);var j=r.n(S);var I={headerAction:g["b"].node};var T={headerAction:null};var N=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_left_75"},this.props.headerAction)}}]);return t}(a["PureComponent"]);N.displayName="OrgDashboardHeaderItem";N.defaultProps=T;var A=N;var R={title:g["b"].node.isRequired,headerActions:g["b"].array,headerClassName:g["b"].string};var M={headerActions:[],headerClassName:""};var P=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var r=Object(_["map"])(t,function(e,t){return n.a.createElement(A,{key:t,headerAction:e})});return r}},{key:"render",value:function e(){var t=this.props.headerClassName;var r=j()("margin_left_75","display_flex","justify_content_between",""+t);return n.a.createElement("div",{className:r},n.a.createElement("h1",null,this.props.title),n.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(a["PureComponent"]);P.displayName="OrgDashboardHeader";P.defaultProps=M;var x=P;var D=x;var F=r(2144);var L=new y["b"]("enterprise_dashboard");var B={pageHeader:g["b"].string};var U={pageHeader:""};var q=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var r=L.t("No apps have been installed on this workspace.");return n.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200 full_height full_width position_relative"},n.a.createElement(D,{title:this.props.pageHeader,headerClassName:"margin_bottom_150"}),n.a.createElement("div",{className:"display_flex flex_direction_column align_items_center position_absolute p-team_apps_empty_content"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r)))}}]);return t}(a["PureComponent"]);q.displayName="TeamAppsEmptyState";q.defaultProps=U;var G=q;var H=r(714);var W=r(159);var V=new y["b"]("enterprise_dashboard");var z={teamApps:g["b"].array,teamId:g["b"].string.isRequired,teamAppsApiCursor:g["b"].string,teamAppsApiTotal:g["b"].number,teamAppsLoading:g["b"].bool,headerItemOnClick:g["b"].func,pageSize:g["b"].number,sortBy:g["b"].string,sortDir:g["b"].string,searchQuery:g["b"].string,rowHeaderItemClassName:g["b"].string,rowClassName:g["b"].string,featureWtaOrgLevelApps:g["b"].bool};var Q={teamApps:[],headerItemOnClick:_["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsLoading:false,rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureWtaOrgLevelApps:false};var K="asc";var Y="desc";var J="caret_down";var Z="caret_up";var X={};X[K]=J;X[Y]=Z;var $=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,i=a.featureWtaOrgLevelApps,s=a.sortBy,o=a.sortDir;r.state={rowListItems:[],sortBy:s,sortDir:o,offset:0,height:null};r.tableViewControllerRef=null;r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.refreshTableHeight=r.refreshTableHeight.bind(r);r.refreshTableHeightPolitely=r.refreshTableHeightPolitely.bind(r);r.appSources={internal:V.t("Internal"),"app directory":V.t("App Directory"),unknown:V.t("Unknown")};r.sourceTooltipStrings={"app directory":V.t("This app has been installed from the Slack App Directory."),internal:V.t("This app was created by someone within your organization."),unknown:V.t("This app was installed from an unknown external source.")};r.rowTemplate={items:[{value:function e(t){var a=t&&t.icons&&t.icons.image_72;return n.a.createElement("button",{className:"p-app_management_table_view_app_name",onClick:function e(){return r.onAppNameClick(t.id)}},a&&n.a.createElement("img",{src:a,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var r=t.installed_by&&t.installed_by.count;return V.t("{installCount, plural, =1 {# member} other {# members}}",{installCount:r})}},{value:function e(t){var r=t.installed_by&&t.installed_by.first_installation&&t.installed_by.first_installation.date;var a=new Date(1e3*r).toLocaleDateString();return""+a}},{value:function e(t){var a=r.sourceTooltipStrings[t.source];var i=r.appSources[t.source]||r.appSources.unknown;return n.a.createElement("div",null,n.a.createElement(w["d"],{tip:a,position:"top"},n.a.createElement("span",null,i)))}}]};r.emptyRowTemplate={items:[{value:function e(t){var r=t.searchQuery;var a=V.rt("No apps were found matching <b>{query}</b>",{query:r});return n.a.createElement("div",{className:"align_center"},a)}}]};r.headerData=[{id:"name",value:V.t("Name"),sortable:true},{id:"installed_by",value:i?V.t("Authorized By"):V.t("Installed By"),sortable:true},{id:"installed_on",value:i?V.t("Authorized On"):V.t("Installed On"),sortable:true},{id:"source",value:V.t("Source"),sortable:true}];return r}m()(t,[{key:"componentWillMount",value:function e(){var t=this.props,r=t.teamApps,a=t.sortBy;var n=this.state.offset;r.length?this.updateRowListItemsData(n):Object(k["b"])(Object(k["a"])().teams.setTeamAppsLoading(true));Object(k["b"])(Object(k["a"])().teams.setTeamAppsSortBy(a))}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function e(t){this.maybeUpdateListRowItems(t);this.maybeUpdateSearchQuery(t);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onRequestNextPage",value:function e(t){var r=this.props,a=r.teamApps,n=r.teamAppsApiTotal;if(n&&a.length>=n)return;var i={offset:t};this.setState(function(){return i},function(){Object(k["b"])(Object(k["a"])().teams.setTeamAppsLoading(true))})}},{key:"onAppNameClick",value:function e(t){return Object(k["b"])(Object(k["a"])().router.navigateTo("/organization/apps/profile/"+t+"/"+this.props.teamId))}},{key:"maybeFetchNextPage",value:function e(t){var r=this.props.teamAppsLoading;r&&!t.teamAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var r=this.props.searchQuery;if(t.searchQuery!==r){Object(k["b"])(Object(k["a"])().teams.setTeamAppsSearchQuery(r));this.resetTeamAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t){var r=this.state.offset;var a=this.props,n=a.searchQuery,i=a.teamApps,s=a.teamAppsLoading;t.teamApps===i&&t.searchQuery===n&&t.teamAppsLoading===s||this.updateRowListItemsData(r)}},{key:"headerItemOnClick",value:function e(t){var r=this;var a=this.state,n=a.sortBy,i=a.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==K?K:Y;Object(k["b"])(Object(k["a"])().teams.setTeamAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===K?Y:K:Y;Object(k["b"])(Object(k["a"])().teams.setTeamAppsSortDir(o));Object(k["b"])(Object(k["a"])().teams.setTeamAppsSortBy(s))}var l={sortBy:s,sortDir:o};this.setState(function(){return l},function(){r.resetTeamAppsState();e&&e(t)})}},{key:"resetTeamAppsState",value:function e(){Object(k["b"])(Object(k["a"])().teams.setTeamAppsApiTotal(null));Object(k["b"])(Object(k["a"])().teams.resetTeamAppsApiCursor());Object(k["b"])(Object(k["a"])().teams.resetTeamApps());Object(k["b"])(Object(k["a"])().teams.setTeamAppsLoading(true))}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var r=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var a=r.getBoundingClientRect();var n=0;var i=t-(a&&a.top);var s=64;var o=Math.max(s,i-n);var l={height:o+"px"};this.setState(l)}},{key:"makeHeader",value:function e(t){var r={id:t.id,value:t.value};if(t.sortable){r.iconType=this.determineSortState(t.id,t);r.onClick=this.headerItemOnClick;t.defaultSortType&&(r.defaultSortType=t.defaultSortType)}return r}},{key:"makeHeaders",value:function e(t){var r=this;var a=[];t.forEach(function(e){a.push(r.makeHeader(e))});return a}},{key:"determineSortState",value:function e(t,r){var a=this.state,n=a.sortBy,i=a.sortDir;var s=r.defaultSortType||K;var o=X[s];if(!n||n!==t)return o;var l=void 0;l=i?i===K?J:Z:X[s];return l}},{key:"resetAPICursorMark",value:function e(){Object(k["b"])(Object(k["a"])().teams.setTeamAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.teamAppsApiCursor,l=n.teamId;var c={limit:i};r&&(c.sort=r);a&&(c.sort_dir=a);null!==s&&void 0!==s&&Object(_["trim"])(s).length&&(c.query=s);o&&(c.cursor=o);c.team=l;Object(k["b"])(Object(k["a"])().teams.getAppsByWorkspace(l,c))}},{key:"updateRowListItemsData",value:function e(t){var r=this;var a=this.props,n=a.teamApps,i=a.teamAppsLoading;var s=[];var o=t||0;var l=0;var c={rowListItems:s};function u(){l+=1;return"row_"+o+"_item"+l}function d(e,t){var r={id:"row_"+o,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var a={value:t.value(e),id:u()};t.className&&(a.className=t.className);r.items.push(a)});o+=1;return r}if(n&&n.length)n.forEach(function(e){s.push(d(e,r.rowTemplate))});else if(!i){var p=this.props.searchQuery;if(null===p||void 0===p||!p.length){this.setState(c);return}var m=[{searchQuery:p}];m.forEach(function(e){s.push(d(e,r.emptyRowTemplate))})}this.setState(c)}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.sortBy,i=r.sortDir,s=r.height,o=r.rowListItems,l=r.offset;var c=this.props,u=c.rowHeaderItemClassName,d=c.rowClassName,p=c.searchQuery,m=c.teamAppsLoading;var h=this.makeHeaders(this.headerData);return n.a.createElement("div",null,n.a.createElement(H["a"],{rows:o,headers:h,rowHeaderItemClassName:u,rowClassName:d,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:a,sortDir:i,searchQuery:p,height:s,isLoading:m,newQuery:!l,ref:function e(r){t.tableViewControllerRef=r}}))}}]);return t}(a["PureComponent"]);$.displayName="TeamAppsList";$.defaultProps=Q;var ee=Object(W["a"])("feature_wta_org_level_apps")($);var te=new y["b"]("enterprise_dashboard");var re={teamId:g["b"].string.isRequired,teamApps:g["b"].array,teamAppsApiCursor:g["b"].string,teamAppsApiTotal:g["b"].number,teamAppsCount:g["b"].number,teamAppsLoading:g["b"].bool,teamAppsSearchQuery:g["b"].string,teamAppsTeamUrl:g["b"].string,teamAppsSortBy:g["b"].string,teamAppsSortDir:g["b"].string};var ae={teamApps:[],teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsCount:0,teamAppsLoading:false,teamAppsSearchQuery:"",teamAppsTeamUrl:null,teamAppsSortBy:null,teamAppsSortDir:null};var ne=333;var ie=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSearchInputChange=Object(_["debounce"])(r.onSearchInputChange,ne,{trailing:true}).bind(r);r.generateTeamsForAppCSV=r.generateTeamsForAppCSV.bind(r);return r}m()(t,[{key:"onSearchInputChange",value:function e(t){t.persist();var r=Object(_["get"])(t,"target.value","");Object(k["b"])(Object(k["a"])().teams.setTeamAppsSearchQuery(r))}},{key:"getTeamAppListProps",value:function e(){return{teamId:this.props.teamId,teamApps:this.props.teamApps,teamAppsApiCursor:this.props.teamAppsApiCursor,teamAppsApiTotal:this.props.teamAppsApiTotal,teamAppsLoading:this.props.teamAppsLoading,searchQuery:this.props.teamAppsSearchQuery,isLoading:this.props.teamAppsLoading}}},{key:"formatHeader",value:function e(){var t=parseInt(this.props.teamAppsCount,10);if(!isNaN(t))return te.t("{count} Apps",{count:this.props.teamAppsCount});return te.t("Apps")}},{key:"generateTeamsForAppCSV",value:function e(){var t={type:"apps",team_id:this.props.teamId};this.props.teamAppsSearchQuery&&(t.query=this.props.teamAppsSearchQuery);if(this.props.teamAppsSortBy){t.sort_prefix=this.props.teamAppsSortBy;this.props.teamAppsSortDir&&(t.sort_dir=this.props.teamAppsSortDir)}Object(k["b"])(Object(k["a"])().apps.generateAppsCSVForSlackbotDM(t))}},{key:"renderManageAppsButton",value:function e(){var t=this.props.teamAppsTeamUrl;var r=t&&t+"apps/manage"||null;var a=te.t("Manage Apps");if(r)return n.a.createElement("a",{href:r,target:"_blank"},n.a.createElement(E["d"],{type:"outline"},a,n.a.createElement(C["a"],{type:"external_link",className:"p-export_csv_button_caret"})));var i=te.t("You must join this workspace to manage its apps.");return n.a.createElement(w["d"],{tip:i,position:"top"},n.a.createElement("div",null,n.a.createElement(E["d"],{type:"outline",disabled:true},a,n.a.createElement(C["a"],{type:"external_link",className:"p-export_csv_button_caret"}))))}},{key:"renderAppFilterInput",value:function e(){var t=te.t("Filter by name...");return n.a.createElement(O["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.teamAppsLoading,onChange:this.onSearchInputChange,value:this.props.teamAppsSearchQuery})}},{key:"render",value:function e(){var t=[this.renderManageAppsButton()];if(0===this.props.teamAppsCount&&this.props.teamAppsApiCursor&&Object(_["isNull"])(this.props.teamAppsSearchQuery)){var r=te.t("Apps");return n.a.createElement(G,{pageHeader:r})}var a=this.getTeamAppListProps();return n.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200"},n.a.createElement(D,{title:this.formatHeader(),headerActions:t,headerClassName:"margin_bottom_150"}),this.renderAppFilterInput(),n.a.createElement("div",{className:"p-app_management_team_apps_list"},n.a.createElement(ee,a)))}}]);return t}(a["PureComponent"]);ie.displayName="TeamApps";ie.defaultProps=ae;var se=ie;var oe=se;Object(c["a"])("interop.teamApps",{render:function e(t,r,a){if(!t)throw new Error("Team Apps render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(oe,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(33);var c=r(51);var u=r(3);var d=r.n(u);var p=r(5);var m=r.n(p);var h=r(6);var f=r.n(h);var v=r(7);var b=r.n(v);var g=r(8);var _=r.n(g);var y=r(129);var k=r(2);var O=r(15);var E=r.n(O);var w=r(140);var C=r(10);var S=r(1174);function j(e){var t=e.workspaceName,r=e.workspaceDomain,a=e.workspaceDesc,n=e.accessSetting;var i={name:t,domain:r};if(a||n)return d()({},i,{description:a,access_setting:n});return i}var I=r(32);var T=r.n(I);var N=r(9);var A=r.n(N);var R=r(88);var M=r(190);var P=r(811);var x=r(266);var D=new C["b"]("enterprise_dashboard");var F=/^[a-z0-9-]+$/i;var L=/[a-z]+/i;var B=/^[a-z0-9]/i;var U=/[a-z0-9]$/i;var q=void 0;function G(){q={empty_domain:D.t("Please fill in a workspace domain."),invalid_domain_characters:D.t("Your domain can only have letters, numbers, and dashes."),domain_no_start_end_dash:D.t("Your domain can\u2019t start or end with a dash."),domain_minimum_one_letter:D.t("Your domain needs at least one letter in it."),maximum_domain_length_reached:Object(x["b"])(ae),empty_name:D.t("Please fill in a name."),maximum_workspace_name_length_reached:Object(x["b"])(ne),empty_description:D.t("Please fill in a workspace description."),maximum_description_length_reached:Object(x["b"])(ie)};return null}function H(e){return U.test(e)}function W(e){return e.length<=ae}function V(e){return e.length<=ne}function z(e){return e.length<=ie}function Q(e){return B.test(e)}function K(e){return e.trim().length>0}function Y(e){if(Object(k["isNull"])(e)||Object(k["isUndefined"])(e))return"";if(!K(e))return q.empty_name;if(!V(e))return q.maximum_workspace_name_length_reached;return""}function J(e){if(Object(k["isNull"])(e)||Object(k["isUndefined"])(e))return"";if(!K(e)||"organization"===e)return q.empty_domain;if(!W(e))return q.maximum_domain_length_reached;if(!F.test(e))return q.invalid_domain_characters;if(!L.test(e))return q.domain_minimum_one_letter;if(!Q(e)||!H(e))return q.domain_no_start_end_dash;return""}function Z(e){if(Object(k["isNull"])(e)||Object(k["isUndefined"])(e))return"";if(!K(e))return q.empty_description;if(!z(e))return q.maximum_description_length_reached;return""}function X(e){G();var t=e.workspaceName,r=e.workspaceDomain,a=e.workspaceDesc;var n=Y(t);var i=J(r);var s=Z(a);if(!n&&!i&&!s)return{};return{workspaceName:n,workspaceDomain:i,workspaceDesc:s}}var $={};Object.defineProperty($,"isValidWorkspaceName",{get:function e(){return Y},set:function e(t){Y=t}});Object.defineProperty($,"isValidWorkspaceDomain",{get:function e(){return J},set:function e(t){J=t}});Object.defineProperty($,"isValidWorkspaceDescription",{get:function e(){return Z},set:function e(t){Z=t}});var ee=new C["b"]("enterprise_dashboard");var te={workspaceName:y["b"].string,workspaceDomain:y["b"].string,workspaceDesc:y["b"].string,errors:y["b"].object,onSubmit:y["b"].func.isRequired};var re={workspaceName:null,workspaceDomain:null,workspaceDesc:null,errors:null,onSubmit:k["noop"]};var ae=21;var ne=255;var ie=255;var se=function e(t){Object(w["b"])(Object(w["a"])().teams.setCreateTeamErrors(t))};var oe=function e(t,r){Object(w["b"])(Object(w["a"])().teams.setCreateTeamError(t,r))};var le=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={values:{workspaceDomain:r.props.workspaceDomain,workspaceName:r.props.workspaceName,workspaceDesc:r.props.workspaceDesc},errors:r.props.errors};return r}f()(t,[{key:"onInputChanged",value:function e(t,r){this.setFormValue(t,r);oe(t,"")}},{key:"setFormValue",value:function e(t,r){this.setState(function(e){return{values:d()({},e.values,A()({},t,r))}})}},{key:"bindArgs",value:function e(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return t.bind.apply(t,[this].concat(a))}},{key:"submit",value:function e(t){var r=X(this.state.values);if(!Object(k["isEmpty"])(r)){se(r);return}this.props.onSubmit(this.state.values,t)}},{key:"renderTextInput",value:function e(t){var r=t.suffix,a=t.name,i=T()(t,["suffix","name"]);return n.a.createElement(M["a"],d()({},i,{name:a,suffix:r,onChange:this.bindArgs(this.onInputChanged,a)}))}},{key:"renderNameInput",value:function e(){var t=this.state.values.workspaceName;var r=Object(k["get"])(this.props.errors,"workspaceName");var a="workspace_input_name";var n={name:"workspaceName",inputLabel:ee.t("Workspace Name"),maxCharacterLimit:ne,value:t,id:a,labelId:a+"_label"};r&&(n=d()({},n,{errorText:r}));return this.renderTextElement(n)}},{key:"renderDomainInput",value:function e(){var t=this.state.values.workspaceDomain;var r=Object(k["get"])(this.props.errors,"workspaceDomain");var a="workspace_input_domain";var n={name:"workspaceDomain",inputLabel:ee.t("Workspace Domain"),hintText:ee.t("Letters, numbers, and hyphens only."),maxCharacterLimit:ae,suffix:ee.t(".slack.com"),placeholder:ee.t("workspace-url"),value:t,id:a,labelId:a+"_label"};r&&(n=d()({},n,{errorText:r}));return this.renderTextElement(n)}},{key:"renderDescriptionInput",value:function e(){var t=this.state.values.workspaceDesc;var r=Object(k["get"])(this.props.errors,"workspaceDesc");var a="workspace_input_description";var n={name:"workspaceDesc",inputLabel:ee.t("Workspace Description"),hintText:ee.t("A detailed description can help members of your organization decide whether they should join this workspace."),maxCharacterLimit:ie,value:t,id:a,labelId:a+"_label"};r&&(n=d()({},n,{errorText:r}));return this.renderTextareaElement(n)}},{key:"renderTextareaElement",value:function e(t){var r=t.labelId,a=t.inputLabel,i=t.sublabelText,s=t.id,o=t.name,l=T()(t,["labelId","inputLabel","sublabelText","id","name"]);return n.a.createElement(R["a"],{id:r,htmlFor:s,className:"p-ent_workspace_create__label",text:a,subtext:i},n.a.createElement(P["a"],d()({},l,{id:s,name:o,onChange:this.bindArgs(this.onInputChanged,o),resize:"none"})))}},{key:"renderTextElement",value:function e(t){var r=t.inputLabel,a=t.labelId,i=t.sublabelText,s=t.id,o=T()(t,["inputLabel","labelId","sublabelText","id"]);return n.a.createElement(R["a"],{id:a,htmlFor:s,className:"p-ent_workspace_create__label",text:r,subtext:i},this.renderTextInput(d()({id:s},o)))}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderNameInput(),this.renderDomainInput(),this.renderDescriptionInput())}}]);return t}(a["Component"]);le.displayName="CreateWorkspaceModalNameForm";le.defaultProps=re;var ce=le;var ue=r(338);var de=r(660);var pe=new C["b"]("enterprise_dashboard");var me={accessSetting:y["b"].string,onSubmit:y["b"].func.isRequired};var he={accessSetting:null,onSubmit:k["noop"]};var fe=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={accessSetting:r.props.accessSetting};Object(k["bindAll"])(r,["renderAccessSettingRadio","handleAccessSettingChange"]);return r}f()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnAccessSettingChange(t)}},{key:"getAccessSetting",value:function e(){return this.state.accessSetting}},{key:"setAccessSetting",value:function e(t){this.setState(function(){return{accessSetting:t}})}},{key:"updateOnAccessSettingChange",value:function e(t){var r=t.accessSetting!==this.props.accessSetting;r&&this.setAccessSetting(t.accessSetting)}},{key:"submit",value:function e(t){var r=this.getAccessSetting();this.props.onSubmit(r,t)}},{key:"handleAccessSettingChange",value:function e(t){t.persist();this.setAccessSetting(t.target.value)}},{key:"renderAccessSettingRadio",value:function e(t){var r=this.state.accessSetting;var a=t.accessType,i=t.accessName,s=t.descriptionText;return n.a.createElement("div",{key:a},n.a.createElement(R["a"],{id:a,htmlFor:"workspace_access_type_"+a,type:"inline",cursor:"pointer",className:"p-ent_workspace_create__label p-ent_workspace_create__label--radio",text:i,subtext:s},n.a.createElement(ue["a"],{id:"workspace_access_type_"+a,value:a,onChange:this.handleAccessSettingChange,checked:a===r})))}},{key:"renderAccessSettingForm",value:function e(){var t=[{accessType:"open",accessName:pe.t("Open"),descriptionText:pe.t("Anyone in your organization will be able to join this workspace.")},{accessType:"closed",accessName:pe.t("By Request"),descriptionText:pe.t("Members can request to join this workspace.")},{accessType:"invite_only",accessName:pe.t("Invite Only"),descriptionText:pe.t("Members must be invited by a Workspace Owner or Admin.")},{accessType:"unlisted",accessName:pe.t("Hidden"),descriptionText:pe.t("This workspace will be hidden from the rest of your organization. Members must be invited by a Workspace Owner or Admin.")}];var r=t.map(this.renderAccessSettingRadio);return n.a.createElement(de["a"],{field:"workspaceAccessSetting",noTouch:true},r)}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderAccessSettingForm())}}]);return t}(a["Component"]);fe.displayName="CreateWorkspaceModalAccessForm";fe.defaultProps=he;var ve=fe;var be=r(2113);var ge=new C["b"]("enterprise_dashboard");var _e={workspaceName:y["b"].string,workspaceDomain:y["b"].string,accessSetting:y["b"].string,workspaceDesc:y["b"].string,apiCallCount:y["b"].number,errors:y["b"].object,ui:y["b"].object,open:y["b"].bool,onSubmit:y["b"].func.isRequired,onCancel:y["b"].func.isRequired};var ye={workspaceName:"",workspaceDomain:"",accessSetting:"closed",workspaceDesc:"",apiCallCount:null,errors:{},ui:{},open:true,onSubmit:k["noop"],onCancel:k["noop"]};var ke=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={workspaceName:r.props.workspaceName,workspaceDomain:r.props.workspaceDomain,workspaceDesc:r.props.workspaceDesc,accessSetting:r.props.accessSetting,isPending:false};Object(k["bindAll"])(r,["renderChooseNamePane","renderAccessSettingPane","setWorkspaceInfo","setAccessSetting","getWorkspaceInfo"]);return r}f()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnApiCountChange(t);this.updateOnModalClose(t)}},{key:"getWorkspaceInfo",value:function e(){return{workspaceName:this.state.workspaceName,workspaceDomain:this.state.workspaceDomain,accessSetting:this.state.accessSetting,workspaceDesc:this.state.workspaceDesc}}},{key:"setWorkspaceInfo",value:function e(t,r){this.setState(function(){return{workspaceName:t.workspaceName,workspaceDomain:t.workspaceDomain,workspaceDesc:t.workspaceDesc}},r)}},{key:"setAccessSetting",value:function e(t,r){this.setState(function(){return{accessSetting:t}},r)}},{key:"setPendingState",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"updateOnApiCountChange",value:function e(t){var r=t.apiCallCount!==this.props.apiCallCount;if(r){var a=t.apiCallCount>0;this.setPendingState(a)}}},{key:"updateOnModalClose",value:function e(t){var r=this.props.open&&!t.open;r&&this.reset()}},{key:"reset",value:function e(){var t=ye.workspaceName,r=ye.workspaceDomain,a=ye.workspaceDesc,n=ye.accessSetting;this.setWorkspaceInfo({workspaceName:t,workspaceDomain:r,workspaceDesc:a},k["noop"]);this.setAccessSetting(n);this.setPendingState(ye.isPending)}},{key:"isPending",value:function e(){return this.state.isPending}},{key:"submit",value:function e(t){this.props.onSubmit(t)}},{key:"buildModalSteps",value:function e(){var t=this;var r=function e(){var r={header:ge.t("Set up your workspace"),subtitle:ge.t("Choose a name and domain for your workspace, and give it a description. You can always change these later."),renderInnerPane:t.renderChooseNamePane};return t.renderModalPane(r)};var a=function e(){var r={header:ge.t("Set access for this workspace"),subtitle:ge.t("Choose how members in your organization can join this workspace."),renderInnerPane:t.renderAccessSettingPane};return t.renderModalPane(r)};var n=function e(){var r=function e(){var r=t.state,a=r.workspaceName,n=r.workspaceDomain;Object(w["b"])(Object(w["a"])().teams.getWorkspaceInfoAvailability({workspaceName:a,workspaceDomain:n}))};t.chooseNameForm.submit(r)};var i=function e(){var r=t.getWorkspaceInfo();t.setPendingState(true);t.submit(j(r));t.createWorkspaceModalRef.goToNextStep()};var s=function e(){t.accessSettingForm.submit(i);t.createWorkspaceModalRef.goToNextStep()};var o=[{children:r,goButtonText:ge.t("Next"),title:ge.t("Choose Name"),withFooter:true,withBreadcrumbHeader:true,showBackButton:false,goButtonIsPending:this.isPending(),showCancelButton:true,onGo:n,onCancel:this.props.onCancel},{children:a,goButtonText:ge.t("Create Workspace"),title:ge.t("Set Access"),withFooter:true,withBreadcrumbHeader:true,showBackButton:true,goButtonIsPending:this.isPending(),showCancelButton:true,onBack:function e(){Object(w["b"])(Object(w["a"])().ui.updateModalStepIndex(0))},onGo:s,cancelText:ge.t("Cancel"),onCancel:this.props.onCancel}];return o}},{key:"renderSubtitle",value:function e(t){if(t)return n.a.createElement("p",{className:"p-ent_workspace_create__subtitle"},t);return null}},{key:"renderChooseNamePane",value:function e(){var t=this;var r=this.state,a=r.workspaceName,i=r.workspaceDomain,s=r.workspaceDesc;var o=this.props.errors;return n.a.createElement(ce,{workspaceName:a,workspaceDomain:i,workspaceDesc:s,errors:o,onSubmit:this.setWorkspaceInfo,ref:function e(r){t.chooseNameForm=r}})}},{key:"renderAccessSettingPane",value:function e(){var t=this;var r=this.state.accessSetting;return n.a.createElement(ve,{accessSetting:r,onSubmit:this.setAccessSetting,ref:function e(r){t.accessSettingForm=r}})}},{key:"renderModalPane",value:function e(t){var r=t.header,a=t.subtitle,i=t.renderInnerPane;var s=E()("p-ent_workspace_create__header",{"p-ent_workspace_create__header--with_subtitle":a});return n.a.createElement("div",{className:"p-ent_workspace_create","data-enterprise-teams-create":true},n.a.createElement("div",{className:"p-ent_workspace_create__pane"},n.a.createElement("div",{className:"p-ent_workspace_create__form"},n.a.createElement("h3",{className:s},r),this.renderSubtitle(a),i())))}},{key:"render",value:function e(){var t=this;var r=ge.t("Set up");var a=ge.t("Set access");var i=[r,a];var s={steps:this.buildModalSteps(),breadcrumbTitles:i,onCancel:this.props.onCancel,stepIndex:this.props.ui.modal_step_index,isOpen:this.props.open,position:"fixed"};return n.a.createElement(S["a"],d()({},s,{ref:function e(r){t.createWorkspaceModalRef=r}}))}}]);return t}(a["Component"]);ke.displayName="CreateWorkspaceModal";ke.defaultProps=ye;var Oe=ke;var Ee=Oe;Object(c["a"])("interop.createWorkspaceModal",{render:function e(t,r,a){if(!t)throw new Error("createWorkspaceModal render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Ee,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(3);var d=r.n(u);var p=r(5);var m=r.n(p);var h=r(6);var f=r.n(h);var v=r(7);var b=r.n(v);var g=r(8);var _=r.n(g);var y=r(129);var k=r(15);var O=r.n(k);var E=r(159);var w=r(18);var C=r(2);var S=r(41);var j=r(10);var I=r(819);var T=r(2084);var N=1e3;var A=new j["b"]("image_viewer");var R={className:y["b"].string,handleZoomIn:y["b"].func,handleZoomOut:y["b"].func,handleReset:y["b"].func,handleZoomToActualPixels:y["b"].func,handleSlider:y["b"].func,handlePan:y["b"].func,level:y["b"].number,displayLevel:y["b"].oneOfType([y["b"].string,y["b"].number]),isVisible:y["b"].bool,featureModernImageViewer:y["b"].bool.isRequired,onMouseEnter:y["b"].func,onMouseLeave:y["b"].func};var M={className:null,handleZoomIn:C["noop"],handleZoomOut:C["noop"],handleReset:C["noop"],handleZoomToActualPixels:C["noop"],handleSlider:C["noop"],handlePan:C["noop"],level:.5,displayLevel:.5,isVisible:true,onMouseEnter:C["noop"],onMouseLeave:C["noop"]};var P="p-zoom__slider";var x=function e(t,r){return n.a.createElement(a["Fragment"],null,n.a.createElement("div",null,t),n.a.createElement("div",{className:"sk_light_gray"},r))};x.displayName="makeTooltipContentWithSubtext";var D=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.inputWidth=0;r.onKeyDown=r.onKeyDown.bind(r);r.onKeyUp=r.onKeyUp.bind(r);r.handleSliderChange=r.handleSliderChange.bind(r);r.handleInactivity=r.handleInactivity.bind(r);r.throttledOnActivity=Object(C["throttle"])(r.onActivity.bind(r),200,{leading:true,trailing:true});r.state={isHoveringTooltip:false,isRecentlyActive:false};return r}f()(t,[{key:"componentDidMount",value:function e(){this.inputWidth=this.tooltip.tooltipContent.getBoundingClientRect().width;this.forceUpdate();document.addEventListener("keydown",this.onKeyDown);document.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillReceiveProps",value:function e(t){t.level!==this.props.level&&this.throttledOnActivity()}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.activityTimeout);this.throttledOnActivity.cancel();document.removeEventListener("keydown",this.onKeyDown);document.removeEventListener("keyup",this.onKeyUp)}},{key:"onKeyDown",value:function e(t){var r=t.shiftKey?300:50;t.ctrlKey&&(this.isCtrlHeld=true);if(Object(I["a"])()&&!t.target.classList.contains(P))return;"+"===t.key||"="===t.key?t.metaKey||this.props.handleZoomIn():"-"===t.key?t.metaKey||this.props.handleZoomOut():" "!==t.key||t.repeat?"0"!==t.key||0===this.props.level||t.repeat?"ArrowDown"===t.key||"Down"===t.key?this.props.handlePan({x:0,y:-r},true):"ArrowUp"===t.key||"Up"===t.key?this.props.handlePan({x:0,y:r},true):"ArrowRight"===t.key||"Right"===t.key?this.props.handlePan({x:-r,y:0},true):"ArrowLeft"!==t.key&&"Left"!==t.key||this.props.handlePan({x:r,y:0},true):t.metaKey||this.props.handleReset():0===this.props.level?this.props.handleZoomToActualPixels():this.props.handleReset()}},{key:"onKeyUp",value:function e(t){t.ctrlKey||(this.isCtrlHeld=false);" "===t.key&&t.preventDefault()}},{key:"onActivity",value:function e(){clearTimeout(this.activityTimeout);this.activityTimeout=setTimeout(this.handleInactivity,N);this.state.isRecentlyActive||this.setState(function(){return{isRecentlyActive:true}})}},{key:"setIsHoveringTooltip",value:function e(t){this.setState(function(){return{isHoveringTooltip:t,isRecentlyActive:false}})}},{key:"handleInactivity",value:function e(){this.setState(function(){return{isRecentlyActive:false}})}},{key:"handleSliderChange",value:function e(t){this.props.handleSlider(Number(t.target.value),this.isCtrlHeld)}},{key:"calcTooltipOffset",value:function e(){var t=12;var r=.5;return(this.props.level-r)*(this.inputWidth-t)}},{key:"_makeSharedTooltipOptions",value:function e(){var t=this;return{zIndex:"above_fs",onMouseEnter:function e(){return t.setIsHoveringTooltip(true)},onMouseLeave:function e(){return t.setIsHoveringTooltip(false)}}}},{key:"renderSlider",value:function e(){var t=this;return n.a.createElement(S["d"],d()({},this._makeSharedTooltipOptions(),{ref:function e(r){t.tooltip=r},offsetX:this.calcTooltipOffset(),tip:this.props.displayLevel,shouldForceVisible:this.state.isRecentlyActive&&!this.state.isHoveringTooltip}),n.a.createElement("input",{className:P,type:"range",min:0,max:1,value:this.props.level,onChange:this.handleSliderChange,step:.01,onKeyDown:function e(t){return t.preventDefault()},onKeyPress:function e(t){return t.preventDefault()}}))}},{key:"render",value:function e(){var t=this;var r=this.props.level>0;if(!this.props.featureModernImageViewer)return null;return n.a.createElement("div",{className:O()("p-zoom",this.props.className,{"p-zoom--hidden":!this.props.isVisible}),onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},n.a.createElement("div",{className:"p-zoom__control_group"},n.a.createElement(S["d"],d()({},this._makeSharedTooltipOptions(),{tip:x(A.t("Zoom out"),A.t("Press -"))}),n.a.createElement(w["b"],{type:"minus",className:"p-zoom__button--zoom_out",onClick:function e(){return t.props.handleZoomOut()}})),this.renderSlider(),n.a.createElement(S["d"],d()({},this._makeSharedTooltipOptions(),{tip:x(A.t("Zoom in"),A.t("Press + or ="))}),n.a.createElement(w["b"],{type:"plus",className:"p-zoom__button--zoom_in",onClick:function e(){return t.props.handleZoomIn()}}))),n.a.createElement(S["d"],d()({},this._makeSharedTooltipOptions(),{tip:x(A.t("Reset"),A.t("Press space"))}),n.a.createElement(w["b"],{type:"collapse-vertical",className:"p-zoom__control_group p-zoom__button--reset",disabled:!r,onClick:this.props.handleReset})))}}]);return t}(a["PureComponent"]);D.displayName="ZoomControl";D.defaultProps=M;var F=Object(E["a"])("feature_modern_image_viewer")(D);var L=r(106);var B=r.n(L);var U=function e(t){var r=t.value,a=t.min,n=t.max;return Math.max(a,Math.min(n,r))};var q=function e(t){var r=t.value,a=t.min,n=t.max;return(r-a)/(n-a)};var G=function e(t){var r=t.value,a=t.min,n=t.max;return r*(n-a)+a};var H=function e(t,r){return{left:Math.min(t.x,r.x),top:Math.min(t.y,r.y),width:Math.abs(t.x-r.x),height:Math.abs(t.y-r.y)}};var W=function e(t){return{x:t.left+t.width/2,y:t.top+t.height/2}};var V=function e(t,r){return d()({},t,{left:t.left-r.left,top:t.top-r.top})};function z(e){if(B.a.mac)return e.metaKey;return e.ctrlKey}var Q=function e(t){var r=t.scale,a=t.translate,n=t.minScale,i=t.size;var s=d()({},a);Math.abs(a.y)>i.height/2*(r-n)&&(s.y=Math.sign(a.y)*(i.height/2)*(r-n));Math.abs(a.x)>i.width/2*(r-n)&&(s.x=Math.sign(a.x)*(i.width/2)*(r-n));return s};var K=function e(t){var r=t.value,a=t.direction,n=t.steps;var i=1===a;var s=i?n:n.slice().reverse();var o=function e(t,r){return(i?t<r:t>r)&&t!==r};return Object(C["find"])(s,function(e){return o(r,e)})};var Y=function e(t){var r=t.point,a=t.containerRect,n=t.targetRect,i=t.prevScale,s=t.newScale,o=t.prevTranslate,l=t.minScale,c=t.maxScale;var u=U({value:s,min:l,max:c});var d=u-i;var p=W(a);var m={x:(r.x-o.x-p.x)/i,y:(r.y-o.y-p.y)/i};var h=Q({scale:u,translate:{x:o.x-m.x*d,y:o.y-m.y*d},minScale:l,size:n});return{scale:u,translate:h}};var J=function e(t){var r=t.rect,a=t.prevScale,n=t.prevTranslate,i=t.minScale,s=t.maxScale,o=t.containerRect,l=t.targetRect;var c=W(o);var u=W(r);var d=Math.min(o.width/r.width,o.height/r.height);var p=U({value:a*d,min:i,max:s});var m=Q({scale:p,translate:{x:n.x*(p/a)-(u.x-c.x)*(p/a),y:n.y*(p/a)-(u.y-c.y)*(p/a)},minScale:i,size:l});return{scale:p,translate:m}};var Z=function e(t){var r=t.delta,a=t.targetRect,n=t.prevScale,i=t.prevTranslate,s=t.minScale;var o=Q({scale:n,translate:{x:i.x+r.x,y:i.y+r.y},minScale:s,size:a});return{translate:o}};var X={children:y["b"].node.isRequired,handleZoomIn:y["b"].func,handleZoomOut:y["b"].func,handlePan:y["b"].func,handleZoomDelta:y["b"].func,handleBoxZoom:y["b"].func,handleReset:y["b"].func,canZoomIn:y["b"].bool,canZoomOut:y["b"].bool,containerRect:y["b"].object};var $={children:null,handleZoomIn:C["noop"],handleZoomOut:C["noop"],handlePan:C["noop"],handleZoomDelta:C["noop"],handleBoxZoom:C["noop"],handleReset:C["noop"],canZoomIn:false,canZoomOut:false,containerRect:null};var ee=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMouseDown=r.onMouseDown.bind(r);r.onMouseUp=r.onMouseUp.bind(r);r.onMouseMove=r.onMouseMove.bind(r);r.onMouseWheel=r.onMouseWheel.bind(r);r.onDocumentCaptureClick=r.onDocumentCaptureClick.bind(r);r.onKeyDown=r.onKeyDown.bind(r);r.onKeyUp=r.onKeyUp.bind(r);r.state={cursor:"default",dragBoxCSSPosition:null};return r}f()(t,[{key:"componentDidMount",value:function e(){this.targetNode.addEventListener("click",function(e){return e.stopPropagation()});this.targetNode.addEventListener("mousedown",this.onMouseDown);document.addEventListener("wheel",this.onMouseWheel);document.addEventListener("mouseup",this.onMouseUp);document.addEventListener("mousemove",this.onMouseMove);document.addEventListener("keydown",this.onKeyDown);document.addEventListener("keyup",this.onKeyUp);document.addEventListener("click",this.onDocumentCaptureClick,true)}},{key:"componentWillReceiveProps",value:function e(t){var r=this.determineCursor(t);this.setCursor(r)}},{key:"componentWillUnmount",value:function e(){this.targetNode.removeEventListener("click",function(e){return e.stopPropagation()});this.targetNode.removeEventListener("mousedown",this.onMouseDown);document.removeEventListener("wheel",this.onMouseWheel);document.removeEventListener("mouseup",this.onMouseUp);document.removeEventListener("mousemove",this.onMouseMove);document.removeEventListener("keydown",this.onKeyDown);document.removeEventListener("keyup",this.onKeyUp);document.removeEventListener("click",this.onDocumentCaptureClick,true)}},{key:"onMouseDown",value:function e(t){t.stopPropagation();this.isMouseDown=0===t.button;this.dragOrigin={x:t.x,y:t.y};this.numMouseMoves=0;this.wasPlatformCtrlDownAtStart=z(t);this.wasAltKeyDownAtStart=t.altKey;this.setCursor()}},{key:"onMouseMove",value:function e(t){this.isAltKeyDown=t.altKey;this.isPlatformCtrlDown=z(t);this.setCursor();if(!this.isMouseDown)return;this.numMouseMoves+=1;if(this.wasPlatformCtrlDownAtStart){var r=H(this.dragOrigin,{x:t.clientX,y:t.clientY});var a=V(r,this.props.containerRect);this.setState(function(){return{dragBoxCSSPosition:a}})}else{if(!this.props.canZoomOut)return;this.props.handlePan({x:t.movementX,y:t.movementY})}t.stopPropagation();t.preventDefault()}},{key:"onMouseUp",value:function e(t){var r=this.isMouseDown;var a=this.wasAltKeyDownAtStart;var n=this.wasPlatformCtrlDownAtStart;var i=this.numMouseMoves>5;var s=!i||a;var o=!a&&i&&n;this.shouldCancelClickEvent=r;this.isMouseDown=false;this.isRightClick=false;if(!r)return;t.stopPropagation();t.preventDefault();if(o){var l=H(this.dragOrigin,{x:t.clientX,y:t.clientY});this.props.handleBoxZoom(l);this.setState(function(){return{dragBoxCSSPosition:null}})}else if(s){var c={x:t.x,y:t.y};a?this.props.handleZoomOut(c):this.props.canZoomIn?this.props.handleZoomIn(c):this.props.handleReset()}this.setCursor()}},{key:"onDocumentCaptureClick",value:function e(t){this.shouldCancelClickEvent&&t.stopPropagation()}},{key:"onMouseWheel",value:function e(t){t.preventDefault();t.stopPropagation();var r={x:t.clientX,y:t.clientY};if(0===t.deltaMode){var a=.01;var n=.6;t.ctrlKey?this.props.handleZoomDelta(r,-t.deltaY*a):this.props.handlePan({x:-t.deltaX*n,y:-t.deltaY*n})}else{var i=.01;this.props.handleZoomDelta(r,-t.deltaY*i)}}},{key:"onKeyDown",value:function e(t){t.altKey&&(this.isAltKeyDown=true);z(t)&&(this.isPlatformCtrlDown=true);this.setCursor()}},{key:"onKeyUp",value:function e(t){t.altKey||(this.isAltKeyDown=false);z(t)||(this.isPlatformCtrlDown=false);this.setCursor()}},{key:"setCursor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.determineCursor();this.setState(function(){return{cursor:t}})}},{key:"determineCursor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(this.isPlatformCtrlDown)return"crosshair";if(t.canZoomOut&&this.isMouseDown&&this.numMouseMoves>5)return B.a.webkit?"-webkit-grabbing":"grabbing";if(t.canZoomOut&&this.isAltKeyDown||!t.canZoomIn)return"zoom-out";if(t.canZoomIn)return"zoom-in";return B.a.webkit?"-webkit-grab":"grab"}},{key:"render",value:function e(){var t=this;var r=n.a.Children.only(this.props.children);var i=n.a.cloneElement(r,{ref:function e(r){t.targetNode=r},style:d()({},r.props.style,{cursor:this.state.cursor})});return n.a.createElement(a["Fragment"],null,i,this.state.dragBoxCSSPosition&&n.a.createElement("div",{className:"p-zoom__box",style:d()({},this.state.dragBoxCSSPosition)}))}}]);return t}(a["PureComponent"]);ee.displayName="ZoomMouseInteraction";var te=ee;ee.defaultProps=$;var re=r(2222);var ae=1800;var ne=new j["b"]("image_viewer");var ie=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.08;if(t<r+a&&t>r-a)return r;return t};var se=function e(t){var r=t.width,a=t.height;return{width:r,height:a}};var oe=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;var n=t.width/t.height;return Math.min(n*(r.height-a),r.width-a)/t.width};var le={image:y["b"].any,onDidZoomLevelChange:y["b"].func,featureModernImageViewer:y["b"].bool.isRequired};var ce={image:null,onDidZoomLevelChange:C["noop"]};var ue=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={scale:0,translate:{x:0,y:0},shouldAnimate:true,isUserRecentlyActive:false};r.scaleSteps=[0,.5,1,1.5,2];r.minScale=r.scaleSteps[0];r.maxScale=r.scaleSteps[r.scaleSteps.length-1];r.throttledOnUserActivity=Object(C["throttle"])(r.onUserActivity.bind(r),200,{leading:true,trailing:true});r.handleSlider=r.handleSlider.bind(r);r.handleZoomIn=r.handleZoomIn.bind(r);r.handleZoomOut=r.handleZoomOut.bind(r);r.handleZoomDelta=r.handleZoomDelta.bind(r);r.handleZoomToActualPixels=r.handleZoomToActualPixels.bind(r);r.handleBoxZoom=r.handleBoxZoom.bind(r);r.handleReset=r.handleReset.bind(r);r.handlePan=r.handlePan.bind(r);r.debouncedViewportResize=Object(C["debounce"])(r.updateViewport.bind(r),200);r.handleUserInactivity=r.handleUserInactivity.bind(r);return r}f()(t,[{key:"componentDidMount",value:function e(){this.updateViewport();window.addEventListener("resize",this.debouncedViewportResize)}},{key:"componentDidUpdate",value:function e(t,r){t.image.url!==this.props.image.url&&this.updateViewport();if(r.scale!==this.state.scale){this.props.onDidZoomLevelChange(this.normalizeScale());this.throttledOnUserActivity()}}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.userActivityTimeout);this.throttledOnUserActivity.cancel();this.debouncedViewportResize.cancel();window.removeEventListener("resize",this.debouncedViewportResize)}},{key:"onUserActivity",value:function e(){clearTimeout(this.userActivityTimeout);this.userActivityTimeout=setTimeout(this.handleUserInactivity,ae);this.state.isUserRecentlyActive||this.setState(function(){return{isUserRecentlyActive:true}})}},{key:"handleUserInactivity",value:function e(){if(this.mouseIsOverControl)return;this.setState(function(){return{isUserRecentlyActive:false}})}},{key:"updateViewport",value:function e(){var t=this;if(!this.containerElement)return;this.setState(function(e){var r=t.minScale;var a=t.containerElement.getBoundingClientRect();t.minScale=Math.min(1,oe(se(t.props.image),a));if(e.scale===r)return{shouldAnimate:0!==r,scale:t.minScale,containerRect:a};return{containerRect:a}})}},{key:"handleZoomIn",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W(this.state.containerRect);this.setState(function(e){if(e.scale===t.maxScale)return e;var a=Y(d()({},t._buildScaleOptions(e),{newScale:K({direction:1,value:e.scale,steps:t.scaleSteps}),point:r}));return d()({},a,{shouldAnimate:true})})}},{key:"handleZoomOut",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W(this.state.containerRect);this.setState(function(e){if(e.scale===t.minScale)return e;var a=Y(d()({},t._buildScaleOptions(e),{newScale:K({direction:-1,value:e.scale,steps:t.scaleSteps}),point:r}));return d()({},a,{shouldAnimate:true})})}},{key:"handleZoomDelta",value:function e(t,r){var a=this;this.setState(function(e){if(e.scale===a.minScale&&r<0||e.scale===a.maxScale&&r>0)return e;var n=Y(d()({},a._buildScaleOptions(e),{newScale:e.scale+r,point:t}));return d()({},n,{shouldAnimate:r>2})})}},{key:"handleReset",value:function e(){var t=this;this.setState(function(){return{shouldAnimate:true,scale:t.minScale,translate:{x:0,y:0}}})}},{key:"handleZoomToActualPixels",value:function e(){this.setState(function(){return{shouldAnimate:true,scale:1}})}},{key:"handlePan",value:function e(t){var r=this;var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState(function(e){return d()({shouldAnimate:a},Z({prevScale:e.scale,prevTranslate:e.translate,delta:t,minScale:r.minScale,targetRect:se(r.props.image)}))})}},{key:"handleBoxZoom",value:function e(t){var r=this;this.setState(function(e){return d()({shouldAnimate:true},J({rect:t,prevScale:e.scale,prevTranslate:e.translate,maxScale:r.maxScale,minScale:r.minScale,targetRect:se(r.props.image),containerRect:e.containerRect}))})}},{key:"handleSlider",value:function e(t,r){var a=this;this.setState(function(e){var n=G({value:t,min:a.minScale,max:a.maxScale});r||(n=ie(n,1,.02));var i=Y(d()({},a._buildScaleOptions(e),{newScale:n}));if(i.scale===e.scale)return{};return d()({},i,{shouldAnimate:true})})}},{key:"normalizeScale",value:function e(){return q({value:this.state.scale,min:this.minScale,max:this.maxScale})}},{key:"_buildScaleOptions",value:function e(t){return{point:W(t.containerRect),prevTranslate:t.translate,prevScale:t.scale,maxScale:this.maxScale,minScale:this.minScale,targetRect:se(this.props.image),containerRect:t.containerRect}}},{key:"render",value:function e(){var t=this;var r=se(this.props.image);if(!this.props.featureModernImageViewer)return null;return n.a.createElement("div",{className:"p-image_viewer",ref:function e(r){t.containerElement=r}},n.a.createElement(te,{handleZoomIn:this.handleZoomIn,handleZoomOut:this.handleZoomOut,handleZoomDelta:this.handleZoomDelta,handlePan:this.handlePan,handleBoxZoom:this.handleBoxZoom,handleReset:this.handleReset,canZoomIn:this.state.scale!==this.maxScale,canZoomOut:this.state.scale!==this.minScale,containerRect:this.state.containerRect},n.a.createElement("img",{className:"p-image_viewer__image",src:this.props.image.url,width:r.width,height:r.height,onMouseMove:this.throttledOnUserActivity,onDragStart:function e(r){(z(r)||t.state.scale!==t.minScale)&&r.preventDefault()},alt:"",style:{transition:this.state.shouldAnimate?"200ms transform ease":"",transform:"translate3d("+this.state.translate.x+"px, "+this.state.translate.y+"px, 0) scale("+this.state.scale+")"}})),n.a.createElement("div",{className:"p-image_viewer__zoom_positioner"},n.a.createElement(F,{className:"p-image_viewer__zoom_control",isVisible:this.state.isUserRecentlyActive,handleZoomIn:this.handleZoomIn,handleZoomOut:this.handleZoomOut,handleSlider:this.handleSlider,handleReset:this.handleReset,handleZoomToActualPixels:this.handleZoomToActualPixels,handlePan:this.handlePan,level:this.normalizeScale(),onMouseEnter:function e(){t.mouseIsOverControl=true},onMouseLeave:function e(){t.mouseIsOverControl=false},displayLevel:ne.t("{imageScale}%",{imageScale:Math.round(100*this.state.scale)})})))}}]);return t}(a["PureComponent"]);ue.displayName="ImageViewerWithZoom";ue.defaultProps=ce;var de=Object(E["a"])("feature_modern_image_viewer")(ue);var pe=de;var me=function e(t,r,a){var i=a.image,s=a.onDidZoomLevelChange;if(!t)throw new Error("mountImageViewer must be called with a teamId parameter");var u=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:u},n.a.createElement(pe,{image:i,onDidZoomLevelChange:s})),r)};var he=function e(t){s.a.unmountComponentAtNode(t)};var fe=r(51);Object(fe["a"])("interop.mountImageViewer",me);Object(fe["a"])("interop.unmountImageViewer",he)},function(e,t,r){"use strict";r.r(t);var a={};r.r(a);r.d(a,"supportsCallWindowStatus",function(){return u});r.d(a,"setCallWindowBusy",function(){return d});r.d(a,"isCallWindowBusy",function(){return p});r.d(a,"setCallWindowToken",function(){return m});r.d(a,"clearCallWindowToken",function(){return h});r.d(a,"getCallWindowToken",function(){return f});r.d(a,"setCallWindowTeamId",function(){return v});r.d(a,"clearCallWindowTeamId",function(){return b});r.d(a,"getCallWindowTeamId",function(){return g});r.d(a,"setCallWindowTeamName",function(){return _});r.d(a,"clearCallWindowTeamName",function(){return y});r.d(a,"getCallWindowTeamName",function(){return k});r.d(a,"setIncomingCallWindowBusy",function(){return O});r.d(a,"isIncomingCallWindowBusy",function(){return E});r.d(a,"setIncomingCallWindowToken",function(){return w});r.d(a,"clearIncomingCallWindowToken",function(){return C});r.d(a,"getIncomingCallWindowToken",function(){return S});r.d(a,"setIncomingCallWindowTeamId",function(){return j});r.d(a,"clearIncomingCallWindowTeamId",function(){return I});r.d(a,"getIncomingCallWindowTeamId",function(){return T});r.d(a,"setIncomingCallWindowTeamName",function(){return N});r.d(a,"clearIncomingCallWindowTeamName",function(){return A});r.d(a,"getIncomingCallWindowTeamName",function(){return R});var n=r(3);var i=r.n(n);var s=r(2);var o=r(51);var l=r(75);var c=r(57);function u(){return Object(l["hasDeviceStorage"])()}function d(e){Object(l["setItem"])("isCallWindowBusy",e)}var p=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(c["resolve"])(Object(l["getItem"])("isCallWindowBusy"));case 3:t=r.sent;return r.abrupt("return","true"===t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return",false);case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function m(e){Object(l["setItem"])("callWindowToken",e)}function h(){Object(l["removeItem"])("callWindowToken")}var f=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(c["resolve"])(Object(l["getItem"])("callWindowToken"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function v(e){Object(l["setItem"])("callWindowTeamId",e)}function b(){Object(l["removeItem"])("callWindowTeamId")}var g=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(c["resolve"])(Object(l["getItem"])("callWindowTeamId"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function _(e){Object(l["setItem"])("callWindowTeamName",e)}function y(){Object(l["removeItem"])("callWindowTeamName")}var k=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(c["resolve"])(Object(l["getItem"])("callWindowTeamName"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function O(e){Object(l["setItem"])("isIncomingCallWindowBusy",e)}var E=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(c["resolve"])(Object(l["getItem"])("isIncomingCallWindowBusy"));case 3:t=r.sent;return r.abrupt("return","true"===t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return",false);case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function w(e){Object(l["setItem"])("incomingCallWindowToken",e)}function C(){Object(l["removeItem"])("incomingCallWindowToken")}var S=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(c["resolve"])(Object(l["getItem"])("incomingCallWindowToken"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function j(e){Object(l["setItem"])("incomingCallWindowTeamId",e)}function I(){Object(l["removeItem"])("incomingCallWindowTeamId")}var T=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(c["resolve"])(Object(l["getItem"])("incomingCallWindowTeamId"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function N(e){Object(l["setItem"])("incomingCallWindowTeamName",e)}function A(){Object(l["removeItem"])("incomingCallWindowTeamName")}var R=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(c["resolve"])(Object(l["getItem"])("incomingCallWindowTeamName"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();var M=r(32);var P=r.n(M);var x=r(1416);var D=r(807);var F=r(17);var L=r(3484);var B=r(651);var U=r(11);var q=r(450);var G=r(44);var H=r(21);var W=r(312);var V=r(69);var z=r(170);var Q=r(225);var K=r(748);var Y=r(55);var J=r(167);var Z=r(67);var X=r.n(Z);var $=r(5);var ee=r.n($);var te=r(6);var re=r.n(te);var ae=r(164);var ne=function(){function e(){ee()(this,e)}re()(e,[{key:"reportLocale",value:function e(){if(!l["isDesktop"])return;var t=Object(l["getLocaleInformation"])();t&&Object(ae["a"])().track("SYSTEM_LOCALE",t)}},{key:"reportCrash",value:function e(){if(!l["isDesktop"])return;var t=Object(l["getCrashInformation"])();t&&Object(ae["a"])().track("DESKTOP_CRASH",t)}},{key:"reportHang",value:function e(){if(!l["isDesktop"])return;var t=Object(l["getHangInformation"])();t&&Object(ae["a"])().track("DESKTOP_HANG",t)}},{key:"reportDisplays",value:function e(){if(!l["isDesktop"])return;var t=Object(l["getDisplayInformation"])();if(!t||!t.displays||!t.windowFrame)return;var r=t.displays,a=t.windowFrame;var n=a.size,i=a.position;var s=X()(n,2),o=s[0],c=s[1];var u=X()(i,2),d=u[0],p=u[1];var m=[o||0,c||0,d||0,p||0];var h=[];r.forEach(function(e){if(e&&e.size&&e.size.width&&e.size.height){h.push(e.size.width);h.push(e.size.height)}h.push(e.scaleFactor||1)});Object(ae["a"])().track("DISPLAY_INFO",{display_resolutions:h,window_frame:m})}}]);return e}();var ie=r(27);var se=function(){function e(){ee()(this,e)}re()(e,[{key:"updateElements",value:function e(t){var r=this;var a=[];Array.isArray(t)&&t.filter(function(e){return e&&e.getBoundingClientRect}).forEach(function(e){return a.push(r.updateElement(e))});return a}},{key:"updateElement",value:function e(t,r){var a=r||t.id||t.type+"."+t.classList.toString().replace(/ /g,".");var n=t.getBoundingClientRect();var i={id:a,width:Math.round(n.width+2),height:Math.round(n.height+2),top:Math.round(n.top),left:Math.round(n.left)};var s=Object(ie["isSSBAndAtLeastVersion"])("3.0.0");if(i.width<2&&i.height<2&&s){var o=Object(l["getNoDragRegions"])();var c=o.filter(function(e){return e.id!==i.id});o.length>c.length&&Object(l["updateNoDragRegion"])(c)}else Object(l["updateNoDragRegion"])(i);return i}}]);return e}();var oe=r(949);var le=r(459);var ce=r(471);var ue=r(858);var de=r(165);var pe=r(2247);var me=r(1100);var he=r(13);var fe=Object(he["c"])("TS.inline_videos.maybeStopInlineVideoPlayback");var ve=r(763);var be=r(697);var ge=r(242);var _e=r(81);var ye={},ke=ye.setFocusedWorkspace,Oe=ye.focusNextWorkspace,Ee=ye.focusPreviousWorkspace;var we=["https://www.dropbox.com/chooser?","https://www.dropbox.com/saver?","https://account.box.com/index.php?","https://account.box.com/webviews/login/box_select?","https://app.box.com/index.php?","https://app.boxcn.net","https://ent.box.com","https://onedrive.live.com",/^https:\/\/[\w.-]+my\.sharepoint\.com\//];var Ce=["files/import/gdrive","files/create/gdrive/auth","files/import/onedrive"];var Se=Object(F["b"])();function je(e){e(Object(B["setScreenReaderEnabled"])(Object(l["isScreenReaderEnabled"])()))}function Ie(e,t){if(!t)return false;if(t.startsWith("chrome://"))return true;if(Object(_e["isGantryUrl"])(t))return true;if(we.some(function(e){return e instanceof RegExp?e.test(t):t.startsWith(e)}))return true;var r=Object(U["getFromBootData"])(e,"team_url");return Ce.some(function(e){return t.startsWith(""+r+e)})}function Te(e,t,r,a){Se.info("DESKTOP","notificationActivated",{channelId:t,messageTs:r,threadTs:a});e(Object(D["a"])({channelId:t,messageTs:r,threadTs:a}))}function Ne(e){var t=Object(V["getPrimaryView"])(e);var r=[];if(t){r=Object(s["take"])(Object(s["values"])(Object(G["getMessagesByChannelId"])(e,t)),50);Object(ie["isMac"])()||Object(ie["isSSBAndAtLeastVersion"])("3.3.0")||(r=r.map(function(e){return e.subtype?e:Object(s["omit"])(e,"subtype")}))}return{user_id:Object(U["getCurrentUserId"])(e),msgs:r}}function Ae(e,t,r){if(!e||!t){Se.warn("sendMsgFromUser failed: Bad arguments",{channelId:e,text:t});return false}if(!Object(de["j"])(e,t,r)){Se.warn("sendMsgFromUser failed: Legacy adapter method failed");return false}return true}function Re(e){return Object(Q["b"])(e).name}function Me(e){try{var t=JSON.parse(Object(H["getUserPref"])(e,"sidebar_theme_custom_values"));return Object(J["b"])(e)?i()({},t,Object(J["a"])(t)):t}catch(e){return K["a"]}}function Pe(){var e=document.activeElement;var t=Object(ge["b"])(e);return Object(ge["e"])(e,t.start,t.length)}function xe(e){return Object(U["isFeatureEnabled"])(e,"feature_winssb_beta_channel")}function De(e){switch(e){case"prefs":Object(ve["d"])();break;case"shortcuts":Object(ve["e"])();break;default:Se.warn("openDialog failed, unrecognized dialog: "+e);break}}function Fe(){Object(oe["a"])({bustCache:true})}function Le(e,t){Object(ve["f"])();Object(de["b"])();fe();e(Object(q["setActiveTeam"])(t))}var Be=i()({analytics:new ne,nodrag:new se},me,{accessibilitySupportChanged:je,canOpenURLInWindow:Ie,closeCall:be["a"],focusNextWorkspace:Oe,focusPreviousWorkspace:Ee,getCurrentUserId:U["getCurrentUserId"],getCurrentUserName:Re,getEnterpriseId:z["getEnterpriseId"],getSelectedInputText:Pe,getThemeValues:Me,getTokenFromBootData:U["getTokenFromBootData"],getUserPref:H["getUserPref"],handleContextMenuCallback:x["b"],handleDeepLinkWithArgs:ce["f"],isOnBetaReleaseChannel:xe,maybeTickleMS:L["a"],notificationActivated:Te,openDialog:De,openFromCmdF:pe["b"],recentMessagesFromCurrentChannel:Ne,reload:le["b"],replyToNotification:Ae,setCurrentMemberPresence:W["setCurrentMemberPresence"],setFocusedWorkspace:ke,ssbChromeClicked:s["noop"],systemTextSettingsChanged:Fe,teamSelectionChanged:Le,track:Y["c"],updateDownloadsView:ue["b"]});var Ue=r(31);var qe=r(33);var Ge=r(217);var He=Object(Ue["b"])("Create the delegate object that the desktop app can access",function(e,t){return We(function(){return e},function(){return t})});He.propTypes=null;function We(e,t,r){if(!Object(Ge["a"])())return;if(!l["isDesktop"]){var a=Object(ae["a"])({state:t()});a.track("DESKTOP_SCRIPTS_MISSING");return}var n=Ve(e,t);Object(s["assign"])(window.desktop,{delegate:n});r&&r(ze(n))}function Ve(e,t){var r=Be.accessibilitySupportChanged,a=Be.canOpenURLInWindow,n=Be.focusNextWorkspace,s=Be.focusPreviousWorkspace,o=Be.getCurrentUserId,l=Be.getCurrentUserName,c=Be.getEnterpriseId,u=Be.getThemeValues,d=Be.getTokenFromBootData,p=Be.getUserPref,m=Be.isOnBetaReleaseChannel,h=Be.maybeTickleMS,f=Be.notificationActivated,v=Be.recentMessagesFromCurrentChannel,b=Be.setCurrentMemberPresence,g=Be.setFocusedWorkspace,_=Be.teamSelectionChanged,y=Be.openFromCmdF,k=P()(Be,["accessibilitySupportChanged","canOpenURLInWindow","focusNextWorkspace","focusPreviousWorkspace","getCurrentUserId","getCurrentUserName","getEnterpriseId","getThemeValues","getTokenFromBootData","getUserPref","isOnBetaReleaseChannel","maybeTickleMS","notificationActivated","recentMessagesFromCurrentChannel","setCurrentMemberPresence","setFocusedWorkspace","teamSelectionChanged","openFromCmdF"]);var O=function t(r){return function(){return e()(r.apply(void 0,arguments))}};var E=function t(r){return function(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return r.apply(void 0,[e()].concat(a))}};var w=function e(t){return function(){return Object(qe["b"])().dispatch(t.apply(void 0,arguments))}};var C=function e(r){return function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];return r.apply(void 0,[t()()].concat(a))}};return i()({accessibilitySupportChanged:E(r),canOpenURLInWindow:C(a),focusNextWorkspace:w(n),focusPreviousWorkspace:w(s),getCurrentUserId:C(o),getCurrentUserName:C(l),getEnterpriseId:C(c),getThemeValues:C(u),getTokenFromBootData:C(d),getUserPref:C(p),isOnBetaReleaseChannel:C(m),maybeTickleMS:O(h),notificationActivated:E(f),openFromCmdF:O(y),recentMessagesFromCurrentChannel:C(v),setCurrentMemberPresence:O(b),teamSelectionChanged:E(_),setFocusedWorkspace:w(g),startSearch:O(y)},k)}function ze(e){var t=e.canOpenURLInWindow,r=e.getCurrentUserId,a=e.getSelectedInputText,n=e.getTokenFromBootData,s=e.notificationActivated,o=e.replyToNotification,l=e.openFromCmdF,c=P()(e,["canOpenURLInWindow","getCurrentUserId","getSelectedInputText","getTokenFromBootData","notificationActivated","replyToNotification","openFromCmdF"]);return i()({canUrlBeOpenedInSSBWindow:t,focusTabAndSwitchToChannel:s,getAPIToken:n,getUserId:r,getSelectedInputTxt:a,searchForTxt:l,sendMsgFromUser:o},c)}var Qe="interop.webapp";We(function(){return TS.redux.dispatch},function(){return TS.redux.getState},function(e){Object(o["a"])(Qe,e);Object(s["assign"])(window.TSSSB,i()({},window.TSSSB,e))});Object(o["a"])("interop.desktop",i()({},l,a))},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(2);var o=r.n(s);var l=r(139);var c=r(33);var u=r(262);var d=r(650);var p=r(69);var m=r(11);var h=r(206);var f=r(896);var v=r(3);var b=r.n(v);var g=r(131);function _(e,t){var r=t||Object(g["i"])(e.id)||{};return b()({},e,{fileName:r.name,imageSource:r.thumb_160||r.thumb_80,fileType:r.filetype,prettyType:r.pretty_type,fileSize:r.size})}var y=r(5);var k=r.n(y);var O=r(7);var E=r.n(O);var w=r(6);var C=r.n(w);var S=r(8);var j=r.n(S);var I=r(129);var T=r(15);var N=r.n(T);var A=r(10);var R=r(75);var M=r(167);var P=r(177);var x=r(18);var D=r(715);var F=r(89);var L=r(1151);var B=r(27);var U=r(420);var q=r(2204);var G=new A["b"]("downloads");var H={id:I["b"].string.isRequired,downloadPath:I["b"].string,downloadState:I["b"].string,startTime:I["b"].number,progress:I["b"].number,isPaused:I["b"].bool,fileName:I["b"].string,imageSource:I["b"].string,fileType:I["b"].string,prettyType:I["b"].string,fileSize:I["b"].number,highlight:I["b"].bool};var W={id:"",downloadPath:"",downloadState:"",startTime:0,progress:0,isPaused:false,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:false};var V=function(e){j()(t,e);C()(t,null,[{key:"getEstimatedTimeRemaining",value:function e(t){var r=t.downloadState,a=t.progress,n=t.startTime;if("progressing"!==r)return"";if(a>=1)return"";if(-1===a)return"";if(!a)return"";var i=Date.now()-n;var s=i*(1/a);var o=s-i;return G.t("{duration} remaining",{duration:F["a"].duration(o,"milliseconds").humanize()})}}]);function t(e){k()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={};r.onRootDivClick=r.onRootDivClick.bind(r);r.onCancel=r.onCancel.bind(r);r.onRetry=r.onRetry.bind(r);r.onRemove=r.onRemove.bind(r);r.onPause=r.onPause.bind(r);r.onResume=r.onResume.bind(r);return r}C()(t,[{key:"onRootDivClick",value:function e(t){var r=this.props,a=r.id,n=r.downloadState;if("completed"===n){t.stopPropagation();t.shiftKey?Object(R["openDownload"])(a):Object(R["showDownload"])(a)}else if("cancelled"===n||"interrupted"===n){t.stopPropagation();Object(R["retryDownload"])(a)}}},{key:"onCancel",value:function e(t){t.stopPropagation();Object(R["cancelDownload"])(this.props.id)}},{key:"onRetry",value:function e(t){t.stopPropagation();Object(R["retryDownload"])(this.props.id)}},{key:"onRemove",value:function e(t){t.stopPropagation();Object(R["removeDownload"])(this.props.id)}},{key:"onPause",value:function e(t){t.stopPropagation();Object(R["pauseDownload"])(this.props.id)}},{key:"onResume",value:function e(t){t.stopPropagation();Object(R["resumeDownload"])(this.props.id)}},{key:"renderDownloadIcon",value:function e(){var t=this.props,r=t.fileType,a=t.imageSource;var i=function e(){return n.a.createElement(x["a"],{className:"filetype_icon "+r+" s48 download_icon download_filetype"})};if(a)return n.a.createElement(L["a"],{src:a,renderPending:i,width:"32",height:"32",className:"download_icon p-download_item__image",alt:"icon"});return i()}},{key:"renderExtraActions",value:function e(){var t=this.props.isPaused?n.a.createElement("a",{className:"p-download_item__link--resume",onClick:this.onResume,role:"button"},G.t("Resume")):n.a.createElement("a",{className:"p-download_item__link--pause",onClick:this.onPause,role:"button"},G.t("Pause"));return n.a.createElement("span",{className:"p-download_item__extra_actions"},t,n.a.createElement("a",{className:"p-download_item__link--cancel",onClick:this.onCancel,role:"button"},G.t("Cancel")))}},{key:"render",value:function e(){var r=this.props,a=r.downloadPath,i=r.downloadState,s=r.progress,o=r.fileName,l=r.imageSource,c=r.fileType,u=r.prettyType,d=r.fileSize,p=r.highlight;var m=o||a.split(/\/|\\/).reverse()[0];var h="completed"===i?100:100*s;var f="progressing"===i&&s?s*d:void 0;var v=void 0;v=f?G.t("{partialSize} of {size} {prettyType}",{partialSize:Object(U["a"])(f,2),size:Object(U["a"])(d),prettyType:u}):Object(U["a"])(d)+" "+u;var b=t.getEstimatedTimeRemaining(this.props);var g=N()("p-download_item","clearfix",i,{highlight:p});var _=N()({"p-download_item__action_icon":true,"p-download_item__action_icon--image":!!l,fileType:c});var y=Object(B["isMac"])()?G.t("Show in Finder"):G.t("Open containing folder");var k={width:h+"%"};return n.a.createElement("div",{className:g,onClick:this.onRootDivClick,role:"presentation"},n.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),n.a.createElement(x["a"],{className:_})),n.a.createElement(x["a"],{type:"times_circle",className:"p-download_item__link--remove",onClick:this.onRemove}),n.a.createElement("div",{className:"p-download_item__container"},n.a.createElement("div",{className:"p-download_item__name_row"},n.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},m),this.renderExtraActions()),n.a.createElement("div",{className:"p-download_item__size_row"},n.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},n.a.createElement("span",{className:"p-download_item__partial_size"},v)),n.a.createElement("span",{className:"p-download_item__actions"},n.a.createElement("a",{className:"p-download_item__link--show"},y),n.a.createElement("a",{className:"p-download_item__link--open"},G.t("Click to open")),n.a.createElement("a",{className:"p-download_item__link--retry",onClick:this.onRetry,role:"button"},G.t("Retry"))),n.a.createElement("span",{className:"p-download_item__time_remaining"},b)),n.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},n.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:k}))))}}]);return t}(n.a.Component);V.displayName="DownloadItem";V.defaultProps=W;var z=V;var Q=r(2206);var K={downloads:I["b"].array.isRequired,fileIdsToFetch:I["b"].array.isRequired,fetchFileInfo:I["b"].func.isRequired,isWindowFocused:I["b"].bool,isShowing:I["b"].bool,useGlobalNav:I["b"].bool};var Y={downloads:[],fileIdsToFetch:[],fetchFileInfo:o.a.noop,isWindowFocused:false,isShowing:true,useGlobalNav:false};var J=new A["b"]("page_client");var Z=function(e){j()(t,e);C()(t,null,[{key:"renderEmptyView",value:function e(){var t=void 0;try{t=n.a.createElement("img",{src:cdn_url+"/0180/img/downloads_empty.png",alt:""})}catch(e){t=null}var r=J.rt("You can download files by clicking the {download_icon} button.",{download_icon:n.a.createElement(x["a"],{type:"cloud_download",className:"p-downloads_list__empty_download_icon"})});return n.a.createElement("div",{className:"p-downloads_list__empty"},t,n.a.createElement("p",{className:"p-downloads_list__empty_hint_text"},r))}},{key:"renderShiftHint",value:function e(){var t=J.rt("Hold {shift_key} to open the file.",{shift_key:n.a.createElement("span",{className:"c-keyboard_key"},"Shift")});return n.a.createElement("div",{className:"p-downloads_list__shift_hint"},t)}},{key:"renderClearAllButton",value:function e(){return n.a.createElement("button",{type:"button",className:"p-downloads_list__clear_all btn_basic",onClick:R["clearDownloads"]},J.t("Clear all"))}}]);function t(e){k()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={};return r}C()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=function e(r,a){r&&r.preventDefault();t.setState(function(){return{isShiftDown:a}})};this.keyCommands=new P["a"];this.keyCommands.bindAll([{keys:"shift",action:"keydown",handler:function e(t){return r(t,true)}},{keys:"shift",action:"keyup",handler:function e(t){return r(t,false)}}]);this.element.focus()}},{key:"componentWillReceiveProps",value:function e(t){var r=t.isWindowFocused;this.props.isWindowFocused!==r&&this.setState(function(){return{isShiftDown:false}})}},{key:"componentWillUpdate",value:function e(t){var r=t.fileIdsToFetch;if(this.props.fileIdsToFetch===r)return;if(0===r.length)return;if(o.a.isEqual(this.props.fileIdsToFetch,r))return;this.props.fetchFileInfo({ids:r})}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"renderDownloadItems",value:function e(){return n.a.createElement("div",{id:"downloads_scroller",className:"flex_content_scroller"},this.props.downloads.map(function(e){return n.a.createElement(z,b()({key:e.id},e))}))}},{key:"renderHeader",value:function e(){if(this.props.useGlobalNav)return null;var r=this.props.downloads.length>=2?t.renderClearAllButton():null;return n.a.createElement(D["a"],null,n.a.createElement("div",{className:"p-downloads_list__header_items"},n.a.createElement("span",null,J.t("Downloads")),r))}},{key:"renderContent",value:function e(){var r=this.props.isShowing;if(!r)return null;var a=this.props.downloads.length>0?this.renderDownloadItems():null;var i=this.props.downloads.length>0?t.renderShiftHint():t.renderEmptyView();return n.a.createElement(n.a.Fragment,null,this.renderHeader(),a,i)}},{key:"render",value:function e(){var t=this;var r=N()({"p-downloads_list":true,"p-downloads_list--shift_down":this.state.isShiftDown});return n.a.createElement("div",{className:r,ref:function e(r){t.element=r},tabIndex:"-1"},this.renderContent())}}]);return t}(n.a.Component);Z.displayName="DownloadsList";Z.defaultProps=Y;var X=function e(t){return{useGlobalNav:Object(M["b"])(t)}};var $=Object(i["connect"])(X)(Z);var ee=function e(t){return t.files};var te=function e(t,r){return r.startTime-t.startTime};var re=Object(u["createSelector"])([f["getDownloads"],ee],function(e,t){return e.map(function(e){return _(e,t[e.id])}).sort(te)});var ae=Object(u["createSelector"])([f["getDownloadIds"],ee],function(e,t){return e.filter(function(e){return!t[e]})});var ne=function e(t){var r=void 0;r=Object(m["isFeatureEnabled"])(t,"feature_remove_flexpane_store")?Object(p["getSecondaryView"])(t):Object(d["getFlexpaneState"])(t).flexName;return{downloads:re(t),fileIdsToFetch:ae(t),isWindowFocused:Object(h["isWindowFocused"])(t),isShowing:"downloads"===r}};var ie={fetchFileInfo:f["fetchFileInfo"]};var se=Object(i["connect"])(ne,ie)($);var oe=se;var le=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a.noop;if(!t)throw new Error("mountDownloadsView must be called with a teamId parameter");var s=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(oe,null)),r,a)};var ce=le;var ue=r(51);Object(ue["a"])("interop.mountDownloadsView",ce)},function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(104);var l=r.n(o);var c=r(14);var u=r(139);var d=r(33);var p=r(3);var m=r.n(p);var h=r(5);var f=r.n(h);var v=r(6);var b=r.n(v);var g=r(7);var _=r.n(g);var y=r(8);var k=r.n(y);var O=r(129);var E=r(74);var w=r(31);var C=r(354);var S=r(356);var j=r(355);var I=r(187);var T=r(15);var N=r.n(T);var A=r(408);var R=r(121);var M=r(344);var P=r(18);var x=r(701);var D={};D.SelectorInfo=O["b"].shape({selector:O["b"].func.isRequired,name:O["b"].string.isRequired,file:O["b"].string.isRequired,usageCount:O["b"].number.isRequired,reducers:O["b"].arrayOf(O["b"].string)});D.ActionOrThunkInfo=O["b"].shape({action:O["b"].func,thunk:O["b"].func,name:O["b"].string.isRequired,description:O["b"].string.isRequired,file:O["b"].string.isRequired,usageCount:O["b"].number.isRequired,sideEffectsCount:O["b"].number,props:O["b"].arrayOf(O["b"].string),reducers:O["b"].arrayOf(O["b"].string),isThunk:O["b"].bool.isRequired,isFetcher:O["b"].bool.isRequired});D.ReducerInfo=O["b"].shape({reducer:O["b"].func.isRequired,name:O["b"].string.isRequired,file:O["b"].string.isRequired,actions:O["b"].arrayOf(O["b"].string).isRequired,selectors:O["b"].arrayOf(O["b"].string).isRequired});D.MiddlewareInfo=O["b"].shape({middleware:O["b"].func.isRequired,name:O["b"].string.isRequired,file:O["b"].string.isRequired,description:O["b"].string.isRequired});var F=D;var L=r(2263);var B=F.ActionOrThunkInfo,U=F.SelectorInfo,q=F.ReducerInfo,G=F.MiddlewareInfo;var H={actions:O["b"].arrayOf(B).isRequired,selectors:O["b"].arrayOf(U).isRequired,reducers:O["b"].arrayOf(q).isRequired,middlewares:O["b"].arrayOf(G).isRequired,onClose:O["b"].func};var W={onClose:n.a.noop};var V={name:"asc",usageCount:"desc",reducers:"asc",actions:"asc",selectors:"asc",file:"asc",isThunk:"desc",isFetcher:"desc",sideEffectsCount:"desc"};var z=function(e){k()(t,e);function t(){f()(this,t);var e=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.a.bindAll(e,["renderReducers","renderSelectors","renderMiddlewares","renderActionsAndThunks","onSearchTermChange","renderSearchInput","filterResults","changeToTabAndUpdateSearch","onTabChange","sortCollection","updateSort","renderColumnHeader"]);e.state={searchTerm:"",defaultTabId:"selectors",sort:{selectors:{direction:"desc",key:"usageCount"},actionsAndThunks:{direction:"desc",key:"usageCount"},reducers:{direction:"asc",key:"name"},middlewares:{direction:"asc",key:"name"}}};return e}b()(t,[{key:"onSearchTermChange",value:function e(t){t.preventDefault();var r=t.target.value;this.setState(function(){return{searchTerm:r}})}},{key:"onTabChange",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"updateSort",value:function e(t,r){this.setState(function(e){var a=m()({},e.sort);if(a[t].key===r)a[t].direction="asc"===a[t].direction?"desc":"asc";else{a[t].key=r;a[t].direction=V[r]||"asc"}return{sort:a}})}},{key:"sortCollection",value:function e(t,r){var a=this.state.sort;var i=n.a.sortBy(t,a[r].key);"desc"===a[r].direction&&i.reverse();return i}},{key:"changeToTabAndUpdateSearch",value:function e(t,r){var a=this;this.setState(function(){return{defaultTabId:null}},function(){a.setState(function(){return{defaultTabId:t}},function(){a.setState(function(){return{searchTerm:r}})})})}},{key:"filterResults",value:function e(t,r,a){if(!t)return r;var i=t.toLowerCase();var s=r.filter(function(e){var t=false;a.forEach(function(r){var a=e&&e[r];n.a.isArray(a)&&(a=a.join(","));a.toLowerCase().indexOf(i)>=0&&(t=true)});return t});return s}},{key:"renderSearchInput",value:function e(){var t=this.state.searchTerm;return s.a.createElement(M["a"],{className:"p-redox__search_input margin_top_150 margin_bottom_150",value:t,onChange:this.onSearchTermChange,placeholder:"search"})}},{key:"renderColumnHeader",value:function e(t,r,a){var n=this;var i=this.state.sort;var o={};var l=void 0;var c=false;if(r&&a){c=true;o.onClick=function(){n.updateSort(r,a)};i[r].key===a&&(l="asc"===i[r].direction?s.a.createElement(P["b"],{className:"nudge_top_2",inline:true,type:"caret-up"}):s.a.createElement(P["b"],{className:"nudge_top_2",inline:true,type:"caret-down"}))}var u=N()("p-redox__table_cell","p-redox__table_column_header","p-redox__table_column_header--"+a,{"p-redox__table_column_header--sortable":c});return s.a.createElement("td",m()({className:u},o),t,l)}},{key:"renderReducers",value:function e(){var t=this;var r=this.props.reducers;var a=this.state.searchTerm;var n=this.filterResults(a,r,["name","file","actions","selectors"]);var i=this.sortCollection(n,"reducers");return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","reducers","name"),this.renderColumnHeader("Actions"),this.renderColumnHeader("Selectors"),this.renderColumnHeader("File","reducers","file")),i.map(function(e,r){return s.a.createElement(Y,{key:""+e.name+r,reducer:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch})}))))}},{key:"renderMiddlewares",value:function e(){var t=this.props.middlewares;var r=this.state.searchTerm;var a=this.filterResults(r,t,["name","description","file"]);var n=this.sortCollection(a,"middlewares");return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","middlewares","name"),this.renderColumnHeader("Description"),this.renderColumnHeader("File","middlewares","file")),n.map(function(e,t){return s.a.createElement(J,{key:""+e.name+t,middleware:e})}))))}},{key:"renderSelectors",value:function e(){var t=this;var r=this.props.selectors;var a=this.state.searchTerm;var n=this.filterResults(a,r,["name","file"]);var i=this.sortCollection(n,"selectors");return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","selectors","name"),this.renderColumnHeader("Usage Count","selectors","usageCount"),this.renderColumnHeader("Reducers"),this.renderColumnHeader("File","selectors","file")),i.map(function(e,r){return s.a.createElement(K,{key:""+e.name+r,selector:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch})}))))}},{key:"renderActionsAndThunks",value:function e(){var t=this;var r=this.props.actions;var a=this.state.searchTerm;var n=this.filterResults(a,r,["name","description","file"]);var i=this.sortCollection(n,"actionsAndThunks");var o=s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","actionsAndThunks","name"),this.renderColumnHeader("Description"),this.renderColumnHeader("Usage Count","actionsAndThunks","usageCount"),this.renderColumnHeader("Thunk?","actionsAndThunks","isThunk"),this.renderColumnHeader("Fetcher?","actionsAndThunks","isFetcher"),this.renderColumnHeader("Props"),this.renderColumnHeader("Reducers"),this.renderColumnHeader("# Side Effects","actionsAndThunks","sideEffectsCount"),this.renderColumnHeader("File","actionsAndThunks","file"));return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,i.map(function(e,r){return s.a.createElement(s.a.Fragment,{key:""+e.name+r},r%30===0?o:null,s.a.createElement(Q,{action:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch}))}))))}},{key:"render",value:function e(){var t=this.state.defaultTabId;var r=[{title:"Selectors",id:"selectors",content:this.renderSelectors()},{title:"Actions and Thunks",id:"actionsAndThunks",content:this.renderActionsAndThunks()},{title:"Reducers",id:"reducers",content:this.renderReducers()},{title:"Middleware",id:"middlewares",content:this.renderMiddlewares()}];return s.a.createElement(A["a"],{modalClasses:"p-redox_modal",title:"Redox",showCancelButton:false,showGoButton:false,onCancel:this.props.onClose},s.a.createElement(x["a"],{defaultTabId:t,tabs:r,onTabChange:this.onTabChange}))}}]);return t}(i["Component"]);z.displayName="Redox";z.defaultProps=W;var Q=function e(t){var r=t.action,a=t.changeToTabAndUpdateSearch;var n=void 0;if(r.isThunk)n=s.a.createElement("td",{className:"p-redox__table_cell"},"n/a");else if(r.reducers&&r.reducers.length){var i=r.reducers;n=s.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e){return s.a.createElement(R["a"],{key:e,className:"p-redox__search_term_link",onClick:function t(){a("reducers",e)}},e)}))}else n=s.a.createElement("td",{className:"p-redox__table_cell"});return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},r.name),s.a.createElement("td",{className:"p-redox__table_cell"},r.description),s.a.createElement("td",{className:"p-redox__table_cell"},r.usageCount),s.a.createElement("td",{className:"p-redox__table_cell"},r.isThunk?"x":""),s.a.createElement("td",{className:"p-redox__table_cell"},r.isFetcher?"x":""),s.a.createElement("td",{className:"p-redox__table_cell"},r.props.map(function(e){return s.a.createElement("div",{key:e},e)})),n,s.a.createElement("td",{className:"p-redox__table_cell"},r.sideEffectsCount),s.a.createElement("td",{className:"p-redox__table_cell"},r.file))};Q.displayName="ActionThunkRow";var K=function e(t){var r=t.selector,a=t.changeToTabAndUpdateSearch;var n=void 0;if(r.reducers&&r.reducers.length){var i=r.reducers;n=s.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e,t){return s.a.createElement(R["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){a("reducers",e)}},e)}))}else n=s.a.createElement("td",{className:"p-redox__table_cell"});return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},r.name),s.a.createElement("td",{className:"p-redox__table_cell"},r.usageCount),n,s.a.createElement("td",{className:"p-redox__table_cell"},r.file))};K.displayName="SelectorRow";var Y=function e(t){var r=t.reducer,a=t.changeToTabAndUpdateSearch;var n=void 0;if(r.actions&&r.actions.length){var i=r.actions;n=s.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e,t){return s.a.createElement(R["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){a("actionsAndThunks",e)}},e)}))}else n=s.a.createElement("td",{className:"p-redox__table_cell"});var o=void 0;if(r.selectors&&r.selectors.length){var l=r.selectors;o=s.a.createElement("td",{className:"p-redox__table_cell"},l.map(function(e,t){return s.a.createElement(R["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){a("selectors",e)}},e)}))}else o=s.a.createElement("td",{className:"p-redox__table_cell"});return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},r.name),n,o,s.a.createElement("td",{className:"p-redox__table_cell"},r.file))};Y.displayName="ReducerRow";var J=function e(t){var r=t.middleware;return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},r.name),s.a.createElement("td",{className:"p-redox__table_cell"},r.description),s.a.createElement("td",{className:"p-redox__table_cell"},r.file))};J.displayName="MiddlewareRow";var Z=z;var X=Object(C["a"])();var $=Object(w["a"])();var ee=Object(S["a"])();var te=Object(j["a"])();var re=Object(I["a"])();var ae={onClose:O["b"].func};var ne={onClose:n.a.noop};var ie=function(e){k()(t,e);function t(){f()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"componentDidMount",value:function e(){var t=this;this.interval=setInterval(function(){t.forceUpdate()},1e3)}},{key:"componentWillUnmount",value:function e(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function e(){var t=de();return s.a.createElement(Z,m()({onClose:this.props.onClose},t))}}]);return t}(i["Component"]);ie.displayName="ConnectedRedox";ie.defaultProps=ne;function se(e){if(!e)return["(no props)"];if(!n.a.isFunction(e)&&n.a.isObject(e))return Object.keys(e);return["(single unnamed payload)"]}function oe(e){var t=[];te.forEach(function(r){r&&r.has&&r.has(e)&&t.push(r&&r.meta&&r.meta.name)});return t}function le(e){var t=n.a.values(X);if(e&&e.has){var r=t.filter(function(t){return e.has(t)});return r.map(function(e){return e.meta.name})}return[]}function ce(e){if(e&&e.meta&&e.meta.file){var t=e.meta.file.replace(/-store.*/,"");var r=ee.filter(function(e){var r=e&&e.meta&&e.meta.file&&e.meta.file.replace(/-store.*/,"");return r&&r===t});return r.map(function(e){return e.meta.name})}return[]}function ue(e){if(!e||!e.meta||!e.meta.file)return"";var t=[];var r=e.meta.file.replace(/-store.*/,"");te.forEach(function(e){if(e&&e.meta&&e.meta.file){var a=e.meta.file.replace(/-store.*/,"");r===a&&t.push(e&&e.meta&&e.meta.name)}});return t}function de(){var e=n.a.map(X,function(e){var t=e.meta,r=t.name,a=t.description,n=t.file,i=t.usageCount;return{action:e,name:r,description:a,file:n,usageCount:i||0,isThunk:false,isFetcher:false,props:se(e.propTypes),reducers:oe(e),sideEffectsCount:E["c"][e]?E["c"][e].length:0}});var t=n.a.map($,function(e){var t=e.meta,r=t.name,a=t.description,n=t.file,i=t.usageCount;return{thunk:e,name:r,description:a,file:n,usageCount:i||0,isThunk:true,isFetcher:!!e.isFetcherCreator,props:se(e.propTypes),sideEffectsCount:0}});var r=n.a.map(ee,function(e){var t=e.meta,r=t.name,a=t.file,n=t.usageCount;return{selector:e,name:r,file:a,reducers:ue(e),usageCount:n||0}});var a=n.a.map(te,function(e){var t=e.meta||{},r=t.name,a=t.file;return{reducer:e,name:r||"",file:a||"",actions:le(e),selectors:ce(e)}});var i=n.a.map(re,function(e){var t=e.meta||{},r=t.name,a=t.file,n=t.description;return{middleware:e,name:r||"",file:a||"",description:n||""}});return{actions:e.concat(t),selectors:r,reducers:a,middlewares:i}}var pe=ie;var me=pe;var he=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.a.noop;if(!t)throw new Error("mountRedox must be called with a teamId parameter");var i=Object(d["d"])(t);Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(me,{onClose:a})),r)};var fe=function e(t){l.a.unmountComponentAtNode(t)};var ve={mountRedox:he,unmountRedox:fe};var be=r(27);var ge=r(17);var _e=r(51);var ye=r(130);var ke="redox-container";var Oe=false;var Ee=Object(ge["b"])();function we(){if(Oe)return;if(!be["isDev"]&&!be["isJsPath"]){Ee.warn("Redox only works in a development environment");return}var e=document.getElementById(ke);if(!e){e=document.createElement("div");e.id=ke;document.body.appendChild(e)}Oe=true;he(TS.boot_data.team_id,e,Ce)}function Ce(){if(!be["isDev"]&&!be["isJsPath"]){Ee.warn("Redox only works in a development environment");return}Oe=false;fe(document.getElementById(ke))}Object(_e["a"])("interop.mountRedox",we);Object(_e["a"])("interop.unmountRedox",Ce);Object(ye["exportToGlobalDebugger"])("redox",we);Object(ye["exportToGlobalDebugger"])("unmountRedox",Ce)},function(e,t,r){"use strict";r.r(t);r.d(t,"addMemberIds",function(){return b});r.d(t,"addNonExactMatchMemberIds",function(){return g});r.d(t,"saveScrollmark",function(){return _});r.d(t,"setMarker",function(){return y});r.d(t,"setSearchQuery",function(){return k});r.d(t,"setFilter",function(){return O});r.d(t,"getFlexpaneMemberIds",function(){return C});r.d(t,"getFlexpaneNonExactMatchMemberIds",function(){return S});r.d(t,"getScrollmark",function(){return j});r.d(t,"getMarker",function(){return I});r.d(t,"getSearchQuery",function(){return T});r.d(t,"getFilter",function(){return N});r.d(t,"listAndUpsertMembers",function(){return P});r.d(t,"fetchMembersPost",function(){return x});r.d(t,"test",function(){return D});var a=r(32);var n=r.n(a);var i=r(9);var s=r.n(i);var o=r(3);var l=r.n(o);var c=r(2);var u=r.n(c);var d=r(129);var p=r(4);var m=r(257);var h=r(39);var f=r(21);var v;var b=Object(p["a"])("Add member IDs to the flexpane");b.propTypes=d["b"].arrayOf(d["b"].string).isRequired;var g=Object(p["a"])("Add non-exact match member IDs to the flexpane");g.propTypes=d["b"].arrayOf(d["b"].string).isRequired;var _=Object(p["a"])("Set the member directory flexpane scroll offset");_.propTypes=d["b"].object;var y=Object(p["a"])("Set the marker");y.propTypes=d["b"].string;var k=Object(p["a"])("Set the search query");k.propTypes=d["b"].string;var O=Object(p["a"])("Set the filter");O.propTypes=d["b"].string;var E={searchQuery:"",scrollmark:null,marker:"",memberIds:[],nonExactMatchMemberIds:[],filter:""};var w=Object(p["c"])((v={},s()(v,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.length)return e;var r=E.nonExactMatchMemberIds;return l()({},e,{memberIds:Object(c["union"])(e.memberIds,t),nonExactMatchMemberIds:r})}),s()(v,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.length)return e;return l()({},e,{nonExactMatchMemberIds:Object(c["union"])(e.memberIds,t)})}),s()(v,_,function(e,t){return l()({},e,{scrollmark:t})}),s()(v,y,function(e,t){return l()({},e,{marker:t})}),s()(v,k,function(e,t){if(t===e.searchQuery)return e;var r=E.memberIds,a=E.nonExactMatchMemberIds,n=E.scrollmark,i=E.marker;return l()({},e,{memberIds:r,nonExactMatchMemberIds:a,scrollmark:n,marker:i,searchQuery:t})}),s()(v,O,function(e,t){if(t===e.filter)return e;var r=E.memberIds,a=E.nonExactMatchMemberIds,n=E.scrollmark,i=E.marker;return l()({},e,{memberIds:r,nonExactMatchMemberIds:a,scrollmark:n,marker:i,filter:t})}),v),E);w.propTypes={searchQuery:d["b"].string,scrollmark:d["b"].object,marker:d["b"].string,memberIds:d["b"].arrayOf(d["b"].string),nonExactMatchMemberIds:d["b"].arrayOf(d["b"].string),filter:d["b"].string};t["default"]=w;var C=Object(p["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.memberIds});var S=Object(p["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.nonExactMatchMemberIds});var j=Object(p["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.scrollmark});var I=Object(p["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.marker});var T=Object(p["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.searchQuery});var N=Object(p["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.filter});var A=10;var R=100;var M=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.searchQuery,a=void 0===r?"":r,n=t.marker,i=void 0===n?"":n,s=t.index,o=void 0===s?"":s,l=t.filter,c=void 0===l?"":l;var u={count:a?R:A,index:o,locale:Object(h["f"])(),filter:c};if(a){u.query=a;u.search_profile_fields=true}else u.marker=i;return u};var P=Object(p["e"])("Fetch and upsert membersIds displayed in member directory flexpane",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.isNonExactMatchMembersSearch,i=void 0!==a&&a,s=n()(r,["isNonExactMatchMembersSearch"]);var o=M(s);return e(Object(m["d"])({query:o})).then(function(t){var r=t.members,a=void 0===r?[]:r,n=t.next_marker;var s=a.map(function(e){return e.id});e(i?g(s):b(s));n&&e(y(n));return{members:a,nextMarker:n}})});P.propTypes={searchQuery:d["b"].string,marker:d["b"].string,index:d["b"].string,filter:d["b"].string,isNonExactMatchMembersSearch:d["b"].bool};var x=Object(p["e"])("Fetch and upsert members",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.isNonExactMatchMembersSearch,n=void 0!==a&&a;var i=t();var s=T(i);var o=I(i);var l=n?"everyone":N(i);var c=Object(f["shouldDisplayRealNames"])(i)?"users_by_realname":"users_by_display_name";return e(P({searchQuery:s,marker:o,index:c,filter:l,isNonExactMatchMembersSearch:n}))});x.propTypes={isNonExactMatchMembersSearch:d["b"].bool};var D={};Object.defineProperty(D,"buildQueryParams",{get:function e(){return M}})},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(3);var d=r.n(u);var p=r(24);var m=r.n(p);var h=r(5);var f=r.n(h);var v=r(6);var b=r.n(v);var g=r(7);var _=r.n(g);var y=r(8);var k=r.n(y);var O=r(129);var E=r(15);var w=r.n(E);var C=r(2);var S=r.n(C);var j=r(21);var I=r(22);var T=r(25);var N=Object(I["a"])("Fetches apps from the `apps.index.list` endpoint",function(e,t,r){return e(Object(T["a"])({method:"apps.index.list",args:r}))});N.propTypes={limit:O["b"].number};var A=Object(I["a"])("Submits a search query and fetches results from `apps.index.search`",function(e,t,r){return e(Object(T["a"])({method:"apps.index.search",args:r}))});A.propTypes={query:O["b"].string};var R=r(164);var M=r(1003);var P=r(421);var x=r(10);var D=r(1006);var F=r(11);var L=r(69);var B=r(20);var U=r(344);var q=r(92);var G=r(151);var H=r(2187);var W=50;var V=new x["b"]("apps_browser");var z={channelId:O["b"].string,featureWtaAddRemoveM11n:O["b"].bool,hasSeenAppSpaceTutorial:O["b"].bool,isInternetExplorer:O["b"].bool,isFirefoxAndWindows:O["b"].bool,isFirefoxAndMac:O["b"].bool,isMacSsbBuild:O["b"].bool,scrollThreshold:O["b"].number,addAppsVariant:O["b"].bool,isUnpaid:O["b"].bool,fetchAppsIndexList:O["b"].func,submitAppsIndexSearch:O["b"].func,clogger:O["b"].object.isRequired};var Q={channelId:void 0,featureWtaAddRemoveM11n:false,hasSeenAppSpaceTutorial:false,isInternetExplorer:false,isFirefoxAndWindows:false,isFirefoxAndMac:false,isMacSsbBuild:false,scrollThreshold:500,addAppsVariant:false,isUnpaid:false,fetchAppsIndexList:S.a.noop,submitAppsIndexSearch:S.a.noop};var K={listEnpoint:"apps.index.list",searchEndpoint:"apps.index.search"};var Y={id:"tutorial_category",name:"",display_name:"",apps:[{name:V.t("What are apps?"),short_description:V.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/436da/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:false}]};var J=function(e){k()(t,e);function t(e){f()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.lastRequestId=0;r.currentDisplayedId=0;r.isMouseMoveEnabled=true;r.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0;r.runningAppIndex=0;r.showLimitMeter=false;r.appsForLimitMeter=null;r.cloggedLimitMeterImpression=false;r.LimitMeterClogId=null;r.appLimitMeterClogPayload={};r.isPaginating=false;r.state={isShowingDefaultAppCategories:true,isSearching:false,searchTerm:"",appCategories:[],selectedAppIndex:null,showLoadingIndicator:false,showPaginationIndicator:false};r.handleKeydown=r.handleKeydown.bind(r);r.handleMouseMove=r.handleMouseMove.bind(r);r.handleAppsListScroll=r.handleAppsListScroll.bind(r);r.handleAppDirectoryButtonClick=r.handleAppDirectoryButtonClick.bind(r);r.handleSearchInputChange=r.handleSearchInputChange.bind(r);r.handleAppClick=r.handleAppClick.bind(r);r.handleAppMouseLeave=r.handleAppMouseLeave.bind(r);r.handleAppLimitMeterClickClog=r.handleAppLimitMeterClickClog.bind(r);r.fillDefaultAppsList=r.fillDefaultAppsList.bind(r);r.searchApps=r.searchApps.bind(r);r.completeRequest=r.completeRequest.bind(r);r.enableMouseMove=r.enableMouseMove.bind(r);r.throttledSearchApps=S.a.throttle(r.searchApps,500,{leading:false});r.debouncedEnableMouseMove=S.a.debounce(r.enableMouseMove,200);return r}b()(t,[{key:"componentDidMount",value:function e(){var t=this;document.body.addEventListener("keydown",this.handleKeydown);document.body.addEventListener("mousemove",this.handleMouseMove);this.loadingTimeout=setTimeout(function(){t.setState(function(){return{showLoadingIndicator:true}})},300);var r=this.props.fetchAppsIndexList({limit:W}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.defaultAppCategories=[Y].concat(m()(e.categories));return{categories:t.defaultAppCategories}});this.completeRequest(r,K.listEnpoint,false,this.fillDefaultAppsList)}},{key:"componentWillReceiveProps",value:function e(t){var r=this;var a=this.getSelectedApp();"tutorial_app"===S.a.get(a,"dataset.app_id")&&!this.props.hasSeenAppSpaceTutorial&&t.hasSeenAppSpaceTutorial&&this.setState(function(){return{selectedAppIndex:null}},function(){r.firstSelectableAppIndex=r.state.isShowingDefaultAppCategories?1:0})}},{key:"componentWillUpdate",value:function e(t,r){this.state.isShowingDefaultAppCategories!==r.isShowingDefaultAppCategories&&(this.firstSelectableAppIndex=r.isShowingDefaultAppCategories&&t.hasSeenAppSpaceTutorial?1:0)}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.handleKeydown);document.body.removeEventListener("mousemove",this.handleMouseMove)}},{key:"getAppsListHeight",value:function e(){return document.querySelector("[data-apps_list]").scrollHeight}},{key:"getAppIcon",value:function e(t){return Object(P["a"])(t,72)}},{key:"getSelectedApp",value:function e(){return document.querySelector("[data-app_index='"+this.state.selectedAppIndex+"']")}},{key:"getTotalAppsCount",value:function e(){var t=0;for(var r=0;r<this.state.appCategories.length;r++)t+=S.a.get(this.state.appCategories[r],"apps",[]).length;return t}},{key:"enableMouseMove",value:function e(){this.isMouseMoveEnabled=true}},{key:"handleKeydown",value:function e(t){var r=this;var a=0;for(var n=0;n<this.state.appCategories.length;n++)a+=this.state.appCategories[n].apps.length;if(0===a)return;var i=void 0;switch(t.which){case 40:case 9:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var t=void 0;t=null===e.selectedAppIndex?r.firstSelectableAppIndex:e.selectedAppIndex===a-1?e.selectedAppIndex:e.selectedAppIndex+1;return{selectedAppIndex:t}},function(){r.scrollSelectedAppIntoView(false);r.debouncedEnableMouseMove()});break;case 38:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var a=void 0;a=null===e.selectedAppIndex?r.firstSelectableAppIndex:e.selectedAppIndex===r.firstSelectableAppIndex?r.firstSelectableAppIndex:t.getModifierState("Shift")?r.firstSelectableAppIndex:e.selectedAppIndex-1;return{selectedAppIndex:a}},function(){r.scrollSelectedAppIntoView(false);r.debouncedEnableMouseMove()});break;case 13:i=this.getSelectedApp();i&&this.selectApp(i.dataset);break;default:break}}},{key:"isElementTextInput",value:function e(t){return"text"===t.type}},{key:"scrollSelectedAppIntoView",value:function e(){var t=this.getSelectedApp();if(!t)return;var r=document.querySelector("[data-apps_list]");var a=document.querySelector("[data-category_header]");var n=a?a.offsetHeight:0;t.offsetTop<r.scrollTop?r.scrollTop=t.offsetTop-n:t.offsetTop+t.offsetHeight>r.scrollTop+r.offsetHeight&&(r.scrollTop=t.offsetTop+t.offsetHeight-r.offsetHeight)}},{key:"handleAppClick",value:function e(t){this.selectApp(t.currentTarget.dataset)}},{key:"handleAppMouseLeave",value:function e(t){this.getSelectedApp()===t.currentTarget&&this.setState(function(){return{selectedAppIndex:null}})}},{key:"selectApp",value:function e(t){var r=this.props.clogger;var a={app_id:t.app_id,bot_id:t.bot_id,is_from_search:this.state.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:t.app_id,bot_id:t.bot_id}}};if("tutorial_app"===t.app_id)Object(M["f"])();else if("app_limit_meter"===t.app_id){var n=parseInt(t.clogParams.split("=")[1],10);if("pricing_link"===t.clogUiElement){window.open(window.location.origin+"/pricing?ui_step=280&ui_element=5'");r.track("GROWTH_PRICING",{num_of_apps:n,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}});r.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:n,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})}else{window.open(window.location.origin+"/apps");r.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:n,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}})}}else if("true"===t.can_app_be_added)Object(M["a"])(t);else if("true"===t.is_installed){Object(M["e"])(t);r.track("APP_INDEX_VIEW_CLICK",a)}else{window.open(window.location.origin+"/apps/"+t.app_id);r.track("APP_INDEX_INSTALL_CLICK",a)}}},{key:"handleMouseMove",value:function e(t){if(!this.isMouseMoveEnabled)return;var r=t.target.closest("[data-app]");r&&this.setState(function(){return{selectedAppIndex:parseInt(r.dataset.app_index,10)}})}},{key:"handleAppsListScroll",value:function e(t){var r=t.currentTarget;var a=r.offsetHeight+r.scrollTop+this.props.scrollThreshold;this.state.isShowingDefaultAppCategories&&a>r.scrollHeight&&this.loadMoreApps(this.state.appCategories[1],K.listEnpoint)}},{key:"handleAppDirectoryButtonClick",value:function e(){var t=this.props.clogger;window.open(window.location.origin+"/apps");t.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK")}},{key:"handleAppLimitMeterClickClog",value:function e(){var t=this.props.clogger;if("GROWTH_PRICING"===this.LimitMeterClogId){this.appLimitMeterClogPayload.contexts.ui_context.action="click";t.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}}},{key:"handleSearchInputChange",value:function e(t){var r=t.target.value;this.setState(function(){return{searchTerm:r}});this.throttledSearchApps(r)}},{key:"fillDefaultAppsList",value:function e(){var t=this.state.appCategories[1];if(t.next_cursor&&window.innerHeight-230>this.getAppsListHeight())this.loadMoreApps(t,K.listEnpoint,this.fillDefaultAppsList);else{this.setState(function(){return{showLoadingIndicator:false}});clearTimeout(this.loadingTimeout)}}},{key:"loadMoreApps",value:function e(t,r,a){var n=this;if(this.isPaginating)return;if(!t.next_cursor)return;var i={category:t.id,cursor:t.next_cursor,limit:W};r===K.searchEndpoint&&(i.query=this.state.searchTerm);var s=setTimeout(function(){n.setState(function(){return{showPaginationIndicator:true}})},300);this.isPaginating=true;this.lastRequestId+=1;var o=this.lastRequestId;var l=r===K.searchEndpoint?this.props.submitAppsIndexSearch:this.props.fetchAppsIndexList;l(i).then(function(e){if(o<n.lastRequestId)return;var i=e.categories[0];if(!i)return;n.setState(function(e){if(o<n.lastRequestId)return{};for(var a=0;a<e.appCategories.length;a++)if(e.appCategories[a].id===t.id){var s=[].concat(m()(e.appCategories[a].apps),m()(i.apps));var l=d()({},e.appCategories[a]);l.apps=s;l.next_cursor=i.next_cursor;var c=[].concat(m()(e.appCategories));c[a]=l;r===K.listEnpoint&&(n.defaultAppCategories=c);return{appCategories:c,showPaginationIndicator:false}}return{}},function(){n.isPaginating=false;clearTimeout(s);a&&"function"===typeof a&&a()})})}},{key:"searchApps",value:function e(t){var r=this;var a=this.props.clogger;if(t){var n=setTimeout(function(){r.setState(function(){return{isSearching:true}})},300);var i=this.props.submitAppsIndexSearch({query:t}).then(function(e){clearTimeout(n);r.setState(function(){return{isShowingDefaultAppCategories:false,isSearching:false}});return e});this.completeRequest(i,K.searchEndpoint,true);a.track("APP_INDEX_SEARCH")}else this.setState(function(){return{showLoadingIndicator:false,appCategories:r.defaultAppCategories,isShowingDefaultAppCategories:true}})}},{key:"completeRequest",value:function e(t,r,a,n){var i=this;this.lastRequestId+=1;var s=this.lastRequestId;t.then(function(e){if(s>i.currentDisplayedId){i.currentDisplayedId=s;var t={appCategories:e.categories,selectedAppIndex:S.a.get(e,"categories[0].apps",[]).length&&r===K.searchEndpoint?0:null};a&&(t.showLoadingIndicator=false);if(i.props.addAppsVariant){var o=S()(e.categories).flatMap("apps").filter("bot_user_id").map("bot_user_id").value();Object(M["d"])(o).then(function(){i.updateAfterRequest(t,n)})}else i.updateAfterRequest(t,n)}}).catch(S.a.noop)}},{key:"updateAfterRequest",value:function e(t,r){this.setState(function(){return t},function(){r&&"function"===typeof r&&r()})}},{key:"createAppCategoryMarkup",value:function e(t,r){var a=this;return t.apps.map(function(e,t){var i=r+t;var s=w()("p-apps_browser__app",{"p-apps_browser__app--selected":i===a.state.selectedAppIndex});var o="app-"+e.app_id+"-"+e.bot_id;var l=a.getAppIcon(e);var c=a.props.addAppsVariant&&e.is_installed&&Object(M["c"])(e.bot_user_id);var u=V.t("Install");"tutorial_app"===e.app_id?u=V.t("Start"):c?u=V.t("Add"):e.is_installed&&(u=V.t("View"));return n.a.createElement("div",{key:o,className:s,onClick:a.handleAppClick,onMouseLeave:a.handleAppMouseLeave,"data-app":true,"data-app_index":i,"data-is_installed":e.is_installed,"data-app_id":e.app_id,"data-bot_id":e.bot_id,"data-bot_user_id":e.bot_user_id,"data-can_app_be_added":c||null,"data-qa":"apps_browser_row",role:"presentation"},n.a.createElement("img",{className:"p-apps_browser__app_icon",src:l,alt:"App icon"}),n.a.createElement("div",{className:"p-apps_browser__app_info"},n.a.createElement("div",{className:"p-apps_browser__app_name"},n.a.createElement("strong",null,e.name)),n.a.createElement("div",{className:"p-apps_browser__app_description"},Object(D["a"])(e.short_description,function(e,t){return n.a.createElement("strong",{key:t},e)}))),n.a.createElement(B["d"],{"data-qa":"apps_browser_row_action",className:"p-apps_browser__app_action",type:"outline"},u))})}},{key:"createAppCategoriesMarkup",value:function e(){var t=this;this.runningAppIndex=0;return this.state.appCategories.map(function(e){if(!S.a.get(e,"apps",[]).length)return null;var r="category-"+e.id;var a=w()("p-apps_browser__category_section",{"p-apps_browser__category_section--tutorial":"tutorial_category"===e.id},{"p-apps_browser__category_section--hidden":"tutorial_category"===e.id&&(t.props.hasSeenAppSpaceTutorial||!t.state.isShowingDefaultAppCategories||t.showLimitMeter)});var i=w()("p-apps_browser__category_header");var s=t.createAppCategoryMarkup(e,t.runningAppIndex);t.runningAppIndex+=e.apps.length;return n.a.createElement("section",{key:r,className:a},n.a.createElement("div",{className:i,"data-category_header":true},e.display_name),s)},this)}},{key:"createColorLimitMeterMarkup",value:function e(){return this.appsForLimitMeter.map(function(e,t){var r="color-meter-"+t;var a=w()({hidden:0===t,first:1===t,meter_first_green:t<4&&"blank_box"!==e.short_description,meter_second_green:4===t&&"blank_box"!==e.short_description,meter_third_green:5===t&&"blank_box"!==e.short_description,meter_fourth_green:6===t&&"blank_box"!==e.short_description,meter_yellow:7===t&&"blank_box"!==e.short_description,meter_orange:8===t&&"blank_box"!==e.short_description,meter_red:9===t&&"blank_box"!==e.short_description,on:"blank_box"!==e.short_description,off:"blank_box"===e.short_description&&1!==t});return n.a.createElement("li",{className:a,key:r})})}},{key:"createAppsForLimitMeterMarkup",value:function e(t){var r=this;if(!S.a.get(t,"apps",[]).length)return null;var a=10;this.appsForLimitMeter=JSON.parse(JSON.stringify(t.apps));var i=a-t.apps.length;while(i>0){var s={app_id:i,name:"Try a new app",short_description:"blank_box"};this.appsForLimitMeter.push(s);i-=1}this.appsForLimitMeter[0].align="ts_tip_left";this.appsForLimitMeter[a-1].align="ts_tip_right";return this.appsForLimitMeter.map(function(e,t){var a="limit-apps-"+t;var i=w()("p-apps_browser__app_limit_meter__apps","inline_block","ts_tip","ts_tip_bottom",{"p-apps_browser__app_limit_meter__blank_app_box":"blank_box"===e.short_description,is_ff_and_win:r.props.isFirefoxAndWindows,is_ff_and_mac:r.props.isFirefoxAndMac,is_ie:r.props.isInternetExplorer,ts_tip_right:"ts_tip_right"===e.align,ts_tip_left:"ts_tip_left"===e.align,no_left_margin:"ts_tip_left"===e.align});var s=w()("ts_tip_tip",{large_top_margin:"blank_box"===e.short_description,medium_top_margin:"blank_box"!==e.short_description});var o="blank_box"===e.short_description?null:r.getAppIcon(e);return n.a.createElement("div",{className:i,key:a},n.a.createElement("img",{className:"align_top",src:o,alt:""}),n.a.createElement("span",{className:s},e.name))})}},{key:"createAppLimitMeterMarkup",value:function e(){var t=this;return this.state.appCategories.map(function(e){var r=10;var a=S.a.get(e,"apps",[]).length;var i=t.props,s=i.isUnpaid,o=i.isFirefoxAndWindows,l=i.isFirefoxAndMac,c=i.clogger;if(!a||a>r||"Ai01"!==e.id||!t.state.isShowingDefaultAppCategories)return null;var u=t.getSelectedApp();var d="num_of_apps="+a;var p=!!a;var m="limit-meter-"+e.id;t.showLimitMeter=p&&s;if(!t.showLimitMeter)return null;t.firstSelectableAppIndex=0;var h=void 0;var f=void 0;var v=void 0;var b=void 0;var g=void 0;var _=w()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:o});var y=w()("p-apps_browser__app_limit_meter",{is_ff_and_mac:l});if(a<6){h=V.t("Add apps to get things done");f=V.t("Schedule meetings, share docs, and more \u2014\xa0straight from Slack. ");v=V.t("See app suggestions");b="/apps";t.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";g="link_app_directory"}else if(a>5){h=V.t("Upgrade for unlimited apps");f=V.t("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. ",{numOfApps:a});v=V.t("Learn more");b="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";g="pricing_link"}t.appLimitMeterClogPayload={num_of_apps:a,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:g}}};if(!t.cloggedLimitMeterImpression){if("GROWTH_PRICING"===t.LimitMeterClogId){c.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);c.track("UPGRDEXP_LIMIT_APPSPACE",t.appLimitMeterClogPayload)}else c.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);t.cloggedLimitMeterImpression=true}var k=w()({hidden:t.props.isMacSsbBuild&&"pricing_link"===g,bold:"app_limit_meter"===S.a.get(u,"dataset.app_id")});var O=t.createAppsForLimitMeterMarkup(e);var E=t.createColorLimitMeterMarkup();return n.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:m},n.a.createElement("div",{className:y},n.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},n.a.createElement("b",null,h)),n.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph"},f,n.a.createElement("a",{className:k,href:b,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":g,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":d,onClick:t.handleAppLimitMeterClickClog},v)),n.a.createElement("div",null,n.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},O),n.a.createElement("ul",{className:_},E))))})}},{key:"render",value:function e(){var t=this.props,r=t.addAppsVariant,a=t.channelId,i=t.featureWtaAddRemoveM11n;var s=void 0;var o=w()("p-apps_browser__apps_list",{"p-apps_browser__apps_list--loading":this.state.showLoadingIndicator,"p-apps_browser__apps_list--paginating":this.state.showPaginationIndicator});var l=void 0;l=r?i&&a?n.a.createElement("h2",null,V.rt("Add apps to {channelName}",{channelName:n.a.createElement(G["a"],{channelId:a,inline:true})})):n.a.createElement("h2",{dangerouslySetInnerHTML:{__html:Object(M["b"])()}}):n.a.createElement("h2",null,V.t("Browse Apps"));s=!this.getTotalAppsCount()&&this.state.searchTerm?n.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results"},V.t("There are no apps matching"),"\xa0",n.a.createElement("strong",null,this.state.searchTerm)):this.createAppCategoriesMarkup();var c=this.createAppLimitMeterMarkup();return n.a.createElement("div",{className:"p-apps_browser"},n.a.createElement("div",{className:"p-apps_browser__filter_container"},n.a.createElement("div",{className:"p-apps_browser__filter_header"},l,n.a.createElement(B["d"],{className:"p-apps_browser__browse_apps",size:"large",type:"outline",onClick:this.handleAppDirectoryButtonClick},V.t("View App Directory"))),n.a.createElement("div",null,n.a.createElement(U["a"],{placeholder:V.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:true,isLoading:this.state.isSearching,onChange:this.handleSearchInputChange,value:this.state.searchTerm}))),n.a.createElement("div",{className:o,onScroll:this.handleAppsListScroll,"data-apps_list":true},c,s,n.a.createElement(q["a"],{className:"p-apps_browser__spinner",size:"jumbo"})))}}]);return t}(a["Component"]);J.displayName="AppsBrowser";J.defaultProps=Q;var Z=function e(t){var r=Object(j["getUserPref"])(t,"seen_app_space_tutorial");var a=Object(L["getPrimaryView"])(t);return{channelId:a,featureWtaAddRemoveM11n:Object(F["isFeatureEnabled"])(t,"feature_wta_add_remove_m11n"),hasSeenAppSpaceTutorial:r,clogger:Object(R["a"])({state:t})}};var X={fetchAppsIndexList:N,submitAppsIndexSearch:A};var $=Object(o["connect"])(Z,X)(J);var ee=$;var te=function e(t,r,a){if(!t)throw new Error("mountAppsBrowser must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(ee,a)),r)};var re=function e(t){s.a.unmountComponentAtNode(t)};var ae={mountAppsBrowser:te};var ne=r(51);Object(ne["a"])("interop.mountAppsBrowser",te);Object(ne["a"])("interop.unmountAppsBrowser",re)},function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(26);var n=r(16);var i=r(12);var s=r(658);var o=r(47);function l(e,t){var r=void 0;if(Object(i["isIm"])(t)){var l=Object(a["getMemberById"])(e,t.user);var c=Object(n["getPrefCompliantMemberName"])(e,l);r="<@"+l.id+"|@"+c+">"}else r=Object(i["isMpim"])(t)?""+Object(s["b"])(e,t):Object(i["isChannel"])(t)||Object(i["isPrivateChannel"])(t)?"#"+t.name:""+t.name;return o["e"].in+":"+r}},,function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(626);function i(){return Object(n["isOnline"])(TS.redux.getState())}function s(){return Object(n["getMaximumSocketWait"])(TS.redux.getState())}Object(a["a"])("interop.connectivity",{isOnline:i,getMaximumSocketWait:s})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(5);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var m=r.n(p);var h=r(8);var f=r.n(h);var v=r(129);var b=r(15);var g=r.n(b);var _=r(20);var y=r(18);var k=r(10);var O=r(2253);var E=new k["b"]("migration_blocker_page");var w={enterpriseName:v["b"].string,sendEmail:v["b"].bool,teamName:v["b"].string,migrationID:v["b"].string,isOrgOwner:v["b"].bool,isWorkspaceOwner:v["b"].bool,isOrgAdmin:v["b"].bool,isWorkspaceAdmin:v["b"].bool,teamURL:v["b"].string};var C={isOrgOwner:false,isWorkspaceOwner:false,isOrgAdmin:false,isWorkspaceAdmin:false,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:false,teamName:null};var S=function(e){f()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderMigrationTitle",value:function e(){var t=this.props,r=t.teamName,a=t.enterpriseName;return n.a.createElement("h3",{className:"p-migration_blocker_page__title"},E.t("The {teamName} workspace is joining {enterpriseName}!",{teamName:r,enterpriseName:a}))}},{key:"renderMigrationMessage",value:function e(){var t=this.props,r=t.enterpriseName,a=t.sendEmail;var i=E.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:r,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return n.a.createElement("div",{className:"p-migration_blocker_page__description"},i,a?E.t(" You\u2019ll receive an email when it\u2019s all done."):"")}},{key:"renderMigrationButton",value:function e(){var t=this.props,r=t.migrationID,a=t.isOrgOwner,i=t.isWorkspaceOwner,s=t.isOrgAdmin,o=t.isWorkspaceAdmin,l=t.teamURL;if(!a&&!i&&!s&&!o)return null;return n.a.createElement(_["c"],{className:"p-migration_blocker_page__button",href:l+"migrations/"+r+"/status"},n.a.createElement("div",{className:"p-migration_blocker_page__button__text"},n.a.createElement("span",{className:"p-migration_blocker_page__button__title"},E.t("View migration status")),n.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},E.t("Migration status is only visible to owners and admins."))),n.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},n.a.createElement(y["b"],{type:"chevron-large-right"})))}},{key:"render",value:function e(){var t=g()("p-migration_blocker_page","p-migration_blocker_page--large");return n.a.createElement("div",{className:t,role:"button",tabIndex:"0"},n.a.createElement("div",{className:"p-migration_blocker_text"},n.a.createElement("div",{className:"p-migration_blocker_icon"}),this.renderMigrationTitle(),this.renderMigrationMessage()),this.renderMigrationButton())}}]);return t}(a["Component"]);S.displayName="MigrationBlockerPage";S.defaultProps=C;var j={};var I=S;var T=I;var N=function e(t,r,a){if(!t)throw new Error("mountMigrationBlocker must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement(T,a)),r)};var A=N;var R=r(51);Object(R["a"])("interop.mountMigrationBlocker",A)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(3);var c=r.n(l);var u=r(5);var d=r.n(u);var p=r(6);var m=r.n(p);var h=r(7);var f=r.n(h);var v=r(8);var b=r.n(v);var g=r(129);var _=r(451);var y=r(18);var k=r(2);var O=r(19);var E=r(26);var w=r(50);var C=r(16);var S=r(1092);var j=r(1093);var I={text:g["b"].string,userId:g["b"].string.isRequired,title:g["b"].string,username:g["b"].string,imageUrl:g["b"].string,imageUrlSmall:g["b"].string,isDeleted:g["b"].bool,isError:g["b"].bool,isRestricted:g["b"].bool.isRequired,isUltraRestricted:g["b"].bool.isRequired,isExternal:g["b"].bool.isRequired,team:g["b"].shape({name:g["b"].string})};var T={text:"default",activeChannel:void 0,statusText:"",statusEmoji:"",title:void 0,username:void 0,isBot:false,botID:void 0,imageUrl:"",imageUrlSmall:"",menuProps:{},hasImHistory:false,isSelf:false,isStranger:false,isDeleted:false,isOwner:false,isError:false,isRestricted:false,isUltraRestricted:false,isExternal:false,team:{},canUserBeRemovedFromActiveChannel:false,startImByMemberId:k["noop"]};var N=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props,r=t.userId,a=t.username,i=t.imageUrl,s=t.imageUrlSmall,o=t.title,l=t.isError,c=t.team;var u=n.a.createElement(j["a"],{isRestricted:this.props.isRestricted,isUltraRestricted:this.props.isUltraRestricted,isExternal:this.props.isExternal,isDeleted:this.props.isDeleted,team:c});var d=n.a.createElement(S["a"],{imageUrl:i,imageUrlSmall:s,userId:r,username:a,title:o,isError:l,restriction:u});var p=this.props.text;return n.a.createElement("div",null,n.a.createElement("h1",null,"Chanan made a new MemberProfilePane component ",n.a.createElement(y["a"],{type:"sparkles"}),"!"),n.a.createElement("div",null,"And it has a text property set to ",p),n.a.createElement("div",null,"And it has user ID: ",this.props.userId),d)}}]);return t}(a["PureComponent"]);N.displayName="MemberProfilePane";N.defaultProps=T;function A(e,t){var r=t.userId;var a=Object(E["getMemberById"])(e,r);return c()({},t,{imageUrl:a.profile.image_512,imageUrlSmall:a.profile.image_48,username:a.profile.real_name||a.profile.display_name||a.name,botId:a.bot_id,hasImHistory:!!Object(O["getImByMemberId"])(e,a.id),isBot:a.is_bot,isExternal:Object(C["isExternal"])(a),isOwner:Object(C["isOwner"])(a),isRestricted:Object(C["isRestricted"])(a),isSelf:Object(C["isSelf"])(a),isStranger:Object(C["isStranger"])(a),isDeleted:Object(C["isDeleted"])(a),isUltraRestricted:Object(C["isUltraRestricted"])(a),prefCompliantMemberName:Object(C["getPrefCompliantMemberNameById"])(e,a.id),team:Object(w["getTeamById"])(e,a.team_id),title:a.profile.title})}var R={updateTyping:_["updateTyping"]};var M=Object(i["connect"])(A,R)(N);var P=M;var x=function e(t,r,a){if(!t)throw new Error("mountProfileFlexpane must be called with a teamId parameter");var l=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(P,a)),r)};var D=x;var F=r(51);Object(F["a"])("interop.mountProfileFlexpane",D)},,function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(2);var s=r(25);var o=r(51);var l=r(869);var c=["activity.mentions","channels.history","channels.insights","channels.listShared","channels.replies","chat.command","conversations.history","enterprise.channels.search","files.info","files.list","groups.history","groups.listShared","groups.replies","highlights.briefing","im.history","im.replies","mpim.history","pins.list","search.files","search.messages","stars.list","subscriptions.thread.getView","subteams.list","subteams.users.list","unread.history"];function u(e){return c.includes(e)}var d=c;var p=["activity.mentions","channels.history","conversations.history","groups.history","im.history","mpim.history","pins.list","unread.history"];function m(e){return p.includes(e)}var h=p;var f=["activity.mentions","conversations.history","conversations.info","unread.history","pins.list"];function v(e){return f.includes(e)}var b=f;var g=0;function _(e){var t=e.data,r=e.method,a=e.args;var i=n()({},t,{args:null});var s=false===r.startsWith("bots.")&&TS.bots.legacyEnsureBotsInDataArePresent(i,r,a&&a.channel);var o=false===r.startsWith("users.")&&false===m(r)&&TS.members.legacyEnsureMembersInDataArePresent(i,r);var l=false===r.startsWith("teams.")&&TS.teams.ensureTeamsInDataArePresent(i,"api/ensureModelForLegacy for method: "+r);var c=false===v(r)&&TS.shared.legacyEnsureModelObsInDataArePresent(i,r);return TS.ensureFullyBooted().then(function(){return c}).then(function(){return Promise.join(s,o,l)}).catch(TS.error)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expedited,r=void 0!==t&&t;return function(e,t,a,i){var o={method:e,args:t,EXPEDITED:r,SET_ACTIVE:!TS.client&&!i};var l=function r(a){return{ok:a.ok,request_id:a.request_id,data:a,method:e,args:t}};var c=TS.redux.dispatch(Object(s["a"])(o)).then(l).tap(u(e)&&_).catch(function(e){e.args=n()({_attempts:e.attempts},e.args);throw e});"function"===typeof a&&(c=c.then(function(e){return a(true,e.data,t)}).catch(function(e){return a(false,e.data,t)}));return g?Promise.delay(g).then(function(){return c}):c}}function k(){return Object(l["c"])(TS.redux.getState())}function O(){return k().isPaused()}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i["noop"];k().awaitEmptyQ().then(e)}function w(e){g=e}var C=y();var S=y({expedited:true});Object(o["a"])("interop.api",{call:C,callExpedited:S,callImmediately:S,getQueue:k,isPaused:O,callFuncWhenApiQisEmpty:E,debugSetResponseDelay:w})},,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(3);var c=r.n(l);var u=r(5);var d=r.n(u);var p=r(6);var m=r.n(p);var h=r(7);var f=r.n(h);var v=r(8);var b=r.n(v);var g=r(129);var _=r(2);var y=r(10);var k=r(20);var O=r(1150);var E=r(88);var w=r(1323);var C=r(1009);var S=r(1149);var j=r(338);var I=r(18);var T=r(65);var N=r(41);var A=r(1172);var R=r(159);var M=r(164);var P=r(325);var x=r(811);var D=r(76);var F={appIcon:g["b"].string.isRequired,appName:g["b"].string.isRequired,teamIcon:g["b"].string.isRequired,teamName:g["b"].string.isRequired};var L={appIcon:void 0,appName:void 0,teamIcon:void 0,teamName:void 0};var B=function e(t){var r=t.appIcon,a=t.appName,i=t.teamIcon,s=t.teamName;return n.a.createElement("div",{className:"p-oauth_flow__logos margin_auto display_flex"},n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:r,alt:a,title:a}),n.a.createElement("span",{className:"p-oauth_flow__arrows flex_one sk_light_grey"},n.a.createElement(I["a"],{type:"arrow-large-left",className:"p-oauth_flow__left_directional_arrow--secondary full_width inline_block position_relative"}),n.a.createElement(I["a"],{type:"arrow-large-right",className:"p-oauth_flow__right_directional_arrow--secondary full_width inline_block position_relative"})),n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:i,alt:a,title:s}))};B.displayName="OAuthPageLogos";B.defaultProps=L;var U=Object(D["pure"])(B);var q=r(2259);var G=new y["b"]("pages_oauth");var H=g["b"].arrayOf(P["a"]);var W={featureOauthReactWta:g["b"].bool.isRequired,appIsReviewed:g["b"].bool,appIsInternalIntegration:g["b"].bool,authRowIdentifier:g["b"].string.isRequired,crumbKey:g["b"].string.isRequired,appIcon:g["b"].string.isRequired,appName:g["b"].string.isRequired,teamIcon:g["b"].string.isRequired,teamName:g["b"].string.isRequired,denyUrl:g["b"].string.isRequired,safeTeamScopeInfo:H,dangerousTeamScopeInfo:H,safeChannelScopeInfo:H,dangerousChannelScopeInfo:H,needSecondStep:g["b"].bool.isRequired,needTeamPicker:g["b"].bool.isRequired,singleChannel:g["b"].bool,channelItems:g["b"].shape({channels:g["b"].object,group_channels:g["b"].object,im_channels:g["b"].object,mpim_channels:g["b"].object}),appId:g["b"].string,appType:g["b"].string,appIsInstalled:g["b"].bool,initialSelectedTeamID:g["b"].string,teamsList:g["b"].arrayOf(g["b"].shape({href:g["b"].string.required,teamId:g["b"].string.required,teamImg:g["b"].string.required,teamName:g["b"].string.required})),signInUrl:g["b"].string,switchTeamUrlPathAndQuery:g["b"].string,onTeamSelected:g["b"].func,orgName:g["b"].string,appDevelopmentTeamName:g["b"].string,featureOauthInternalIntegrationBanner:g["b"].bool,featureWtaAppDetailOauthUpdates:g["b"].bool,featureAppApprovalsScopeAwareness:g["b"].bool,isRequest:g["b"].bool,isRequestNoteRequired:g["b"].bool,teamId:g["b"].string,enterpriseId:g["b"].string,userId:g["b"].string};var V={appIsReviewed:true,appIsInternalIntegration:false,safeTeamScopeInfo:[],dangerousTeamScopeInfo:[],safeChannelScopeInfo:[],dangerousChannelScopeInfo:[],singleChannel:false,appId:void 0,appType:void 0,appIsInstalled:false,initialSelectedTeamID:void 0,teamsList:[],onTeamSelected:_["noop"],signInUrl:void 0,switchTeamUrlPathAndQuery:void 0,channelItems:{},orgName:void 0,appDevelopmentTeamName:void 0,appCreatedOnTeam:false,featureOauthInternalIntegrationBanner:false,featureWtaAppDetailOauthUpdates:false,featureAppApprovalsScopeAwareness:false,isRequest:false,isRequestNoteRequired:false,teamId:void 0,userId:void 0,enterpriseId:void 0};var z=300;var Q=function e(t){return"p-oauth_flow__channel_picker_list_item"+(t.group?"--group-title":"")};var K=function e(t,r,a){return t.map(function(e){var t={id:e.encoded_id,channelType:r};t.label="im"===r?"@"+e.username:"channel"===r||"private"===r?"#"+e.name:e.name;a&&a.find(function(t){return t.id===e.encoded_id})&&(t.preselected=true);return t})};var Y=function e(t,r){var a=[];t.channels&&a.push({id:"channels",label:"Channels",group:true,children:K(Object(_["values"])(t.channels),"channel",r)});t.group_channels&&a.push({id:"group_channels",label:"Private Channels",group:true,children:K(Object(_["values"])(t.group_channels),"private",r)});if(t.im_channels||t.mpim_channels){var n=[];var i=[];t.im_channels&&(n=K(Object(_["values"])(t.im_channels),"im",r));t.mpim_channels&&(i=K(Object(_["values"])(t.mpim_channels),"mpim",r));var s=n.concat(i);a.push({id:"im_mpim_channels",label:"Direct Messages",group:true,children:s})}return a};var J=function e(t,r,a,n){var i=Object(_["compact"])(t.concat(r,a,n));return Object(_["map"])(i,function(e){return e.scopes.join(",")}).join(",")};var Z=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,n=a.appId,i=a.appName,s=a.safeTeamScopeInfo,o=a.dangerousTeamScopeInfo,l=a.safeChannelScopeInfo,c=a.dangerousChannelScopeInfo,u=a.userId,p=a.teamId,m=a.enterpriseId;r.trackingProps={app_scopes:J(s,o,l,c),app_name:i,app_id:n};r.state={step:0,selectedRadioValue:"all-channels",selectedChannelValues:[],lfsInputValue:"",requestNote:""};r.clogger=Object(M["a"])({userId:u,teamId:p,enterpriseId:m,locale:Object(y["p"])()});Object(_["bindAll"])(r,["onRequestNoteChange","onDenyClick","onContinueClick","onBackClick","onInputKeyUp","changeRadioButtonCheck","updateSpecificChannelsValues","setLfsRef"]);return r}m()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.appIsInstalled,a=t.appId,n=t.appType;window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"AppDirectoryApp_OAuthDetails",is_installed:r,app_id:a,app_type:n});this.clogger.track("OAUTH_REVIEWS_SCOPES",this.trackingProps);this.clogger.trackForm("#oauth_authorize_confirm_form","OAUTH_AUTHORIZE_CONFIRM_FORM",this.trackingProps)}},{key:"onDenyClick",value:function e(){this.clogger.track("OAUTH_DENY",this.trackingProps)}},{key:"onContinueClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_NEXT_PAGE",this.trackingProps);this.setState(function(){return{step:1}})}},{key:"onBackClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_PREVIOUS_PAGE",this.trackingProps);this.setState(function(){return{step:0}})}},{key:"onInputKeyUp",value:function e(){var t=Object(_["get"])(this,"lfs.input.value","");this.setState(function(){return{lfsInputValue:t}})}},{key:"onRequestNoteChange",value:function e(t){this.setState(function(){return{requestNote:t}})}},{key:"setLfsRef",value:function e(t){this.lfs=t}},{key:"updateSpecificChannelsValues",value:function e(t){this.setState(function(){return{lfsInputValue:"",selectedChannelValues:t,selectedRadioValue:"specific-channels"}})}},{key:"changeRadioButtonCheck",value:function e(t){var r=t.target.id;this.setState(function(){return{selectedRadioValue:r}})}},{key:"noWorkspaceScopesUsed",value:function e(){var t=this.props,r=t.dangerousTeamScopeInfo,a=t.safeTeamScopeInfo;return Object(_["isEmpty"])(r)&&Object(_["isEmpty"])(a)}},{key:"noChannelScopesUsed",value:function e(){var t=this.props,r=t.dangerousChannelScopeInfo,a=t.safeChannelScopeInfo;return Object(_["isEmpty"])(r)&&Object(_["isEmpty"])(a)}},{key:"isChannelInputRequired",value:function e(){var t=this.state.step;var r=this.props,a=r.appIsInstalled,n=r.isRequest,i=r.singleChannel,s=r.needSecondStep,o=r.channelItems,l=r.featureAppApprovalsScopeAwareness,c=r.featureWtaAppDetailOauthUpdates;if(l&&n)return false;if(Object(_["isEmpty"])(o)||this.noChannelScopesUsed())return false;if(1===t&&c&&!i&&a)return false;if(0===t&&s&&!this.noWorkspaceScopesUsed())return false;return true}},{key:"isRequiredChannelMissing",value:function e(){var t=false;var r=this.state,a=r.selectedChannelValues,n=r.selectedRadioValue,i=r.lfsInputValue;var s=this.props.singleChannel;this.isChannelInputRequired()&&(s?t=0===a.length:"specific-channels"===n&&(t=0===a.length||i.length>0));return t}},{key:"isLastStep",value:function e(){var t=this.state.step;var r=this.props,a=r.needSecondStep,n=r.featureWtaAppDetailOauthUpdates;if(n&&this.noWorkspaceScopesUsed())return true;return!a||1===t}},{key:"shouldRequestNoteBeVisible",value:function e(){var t=this.props,r=t.featureAppApprovalsScopeAwareness,a=t.isRequest;return this.isLastStep()&&r&&a}},{key:"isRequestNoteRequired",value:function e(){var e=this.props.isRequestNoteRequired;return this.shouldRequestNoteBeVisible()&&e}},{key:"isRequiredRequestNoteMissing",value:function e(){var t=this.state.requestNote;return this.isRequestNoteRequired()&&0===t.trim().length}},{key:"maybeRenderBackButton",value:function e(){var t=this.props.needSecondStep;var r=this.state.step;if(t&&1===r)return n.a.createElement(T["a"],{role:"button",className:"p-oauth_flow__nav_anchor margin_left_100 margin_top_25 position_relative",onClick:this.onBackClick},n.a.createElement(I["b"],{type:"arrow-large-left",className:"position_relative p-oauth_flow__nav_back_arrow"}));return false}},{key:"maybeRenderTeamPicker",value:function e(){var t=this.props,r=t.needTeamPicker,a=t.initialSelectedTeamID,i=t.teamsList,s=t.signInUrl,o=t.switchTeamUrlPathAndQuery;var l=this.state.step;if(r&&0===l){var u=i;o&&(u=Object(_["map"])(i,function(e){return c()({},e,{href:window.location.protocol+"//"+window.location.hostname+o+"&switch_to_team="+e.teamId})}));return n.a.createElement("div",{"data-qa":"team_switcher",className:"p-oauth_flow__team_switcher position_relative"},n.a.createElement(A["a"],{initialSelectedTeamID:a,teamsList:u,signInUrl:s}))}return false}},{key:"renderAlert",value:function e(){var t=this.props,r=t.appDevelopmentTeamName,a=t.appIsInternalIntegration,i=t.appIsReviewed,s=t.featureOauthReactWta,o=t.featureOauthInternalIntegrationBanner,l=t.orgName,c=t.teamName;if(i)return null;var u=void 0;o?u=a?r?G.t("This app was created by a member of {teamName}, another workspace in {orgName}.",{orgName:Object(y["n"])(l),teamName:Object(y["n"])(r)}):G.t("This app was created by a member of your workspace, {teamName}.",{teamName:Object(y["n"])(c)}):G.rt("This app hasn\u2019t been reviewed or approved by Slack. <a>Learn More</a>.",null,function(e){var t=e.key,r=e.text;return n.a.createElement("a",{key:t,className:"p-oauth_flow__app_not_reviewed_link",href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team",target:"_blank",rel:"noopener noreferrer"},r)}):s&&(u=G.rt("This app hasn\u2019t been reviewed or approved by Slack. <a>Learn More</a>",null,function(e){var t=e.key,r=e.text;return n.a.createElement("a",{key:t,className:"p-oauth_flow__app_not_reviewed_link",href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team",target:"_blank",rel:"noopener noreferrer"},r)}));return n.a.createElement(O["a"],{type:a?"neutral":"warning",text:u,showCloseButton:false})}},{key:"renderConfirmTitle",value:function e(){var t=this.props,r=t.appIsInstalled,a=t.appName,n=t.featureOauthReactWta,i=t.featureWtaAppDetailOauthUpdates,s=t.needSecondStep,o=t.singleChannel,l=t.teamName;var c=this.state.step;var u=void 0;i?u=1===c?o?G.rt("{appName} would like to do the following in the <strong>selected channel:</strong>",{appName:a}):r?G.rt("{appName} would like to do the following in the <strong>all channels it\u2018s a member of:</strong>",{appName:a}):G.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:a}):r?this.noWorkspaceScopesUsed()?s?o?G.rt("{appName} is already installed on {teamName}, and would now also like to do the following in the <strong>selected channel:</strong>",{appName:a,teamName:l}):G.rt("{appName} is already installed on {teamName}, and would now also like to do the following in <strong>all channels it\u2019s a member of:</strong>",{appName:a,teamName:l}):this.noChannelScopesUsed()?G.t("{appName} is already installed on {teamName}.",{teamName:Object(y["n"])(l),appName:Object(y["n"])(a)}):G.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(y["n"])(l),appName:Object(y["n"])(a)}):G.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(y["n"])(l),appName:Object(y["n"])(a)}):G.t("On {teamName}, {appName} would like to:",{teamName:Object(y["n"])(l),appName:Object(y["n"])(a)}):n&&(u=1===c?G.rt("{app_name} would like to do the following in the <strong>selected channels:</strong>",{app_name:a}):G.t("On {team}, {app_name} would like to:",{team:Object(y["n"])(l),app_name:Object(y["n"])(a)}));return u}},{key:"renderContinueOrInstallButton",value:function e(){var t=this.state.step;var r=this.props,a=r.featureOauthReactWta,i=r.needSecondStep,s=r.appIsInstalled,o=r.appId,l=r.appType,c=r.featureWtaAppDetailOauthUpdates,u=r.singleChannel,d=r.featureAppApprovalsScopeAwareness,p=r.isRequest;var m=this.isRequiredChannelMissing();var h=this.isRequiredRequestNoteMissing();var f=m||h;var v=void 0;var b=void 0;var g=void 0;var _=void 0;var y=void 0;var O=void 0;var E=void 0;if(a){_=G.t("Continue");y=d&&p?G.t("Request"):G.t("Install")}c&&(O=G.t("Allow"));if(0!==t||!i||c&&this.noWorkspaceScopesUsed()){v=c&&s?this.noWorkspaceScopesUsed()&&this.noChannelScopesUsed()?_:O:y;b=function e(){window.dataLayer.push({event:"AppDirectoryApp_Authorize",is_installed:s,app_id:o,app_type:l})};g="submit"}else{v=_;b=this.onContinueClick;g="button"}c&&m?E=u?G.t("Select channel"):G.t("Select channels"):d&&h&&(E=G.t("You need to add a note for your Admins"));return n.a.createElement(k["d"],{"data-qa":"oauth_flow_button_next",className:"p-oauth_flow__button",htmlType:g,onClick:b,disabled:f},v,E&&n.a.createElement(N["d"],{tip:E},n.a.createElement("div",{className:"p-oauth_flow__button_tooltip_target"})))}},{key:"renderChannelSelections",value:function e(){var t=this.state,r=t.selectedChannelValues,a=t.selectedRadioValue;var i=this.props,s=i.channelItems,o=i.featureOauthReactWta,l=i.appName;var c=void 0;var u=void 0;var d=void 0;var p=void 0;var m=void 0;var h=void 0;var f=void 0;if(o){c=G.t("Select channels");u=G.t("All Public Channels");d=G.t("Any channel accessible to full members of your team.");p=G.t("Specific channels");m=G.t("Search for channels");h=G.t("No channels");f=G.t("{app_name} will still be able to access a private conversation with you",{app_name:l})}var v=Y(s,r);var b=r.map(function(e){return'"'+e.id+'"'}).join(",");return n.a.createElement("div",{className:"margin_auto no_right_padding"},n.a.createElement("div",{className:"large_top_margin"},n.a.createElement("p",{className:"p-oauth_flow__para bold"},c),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(E["a"],{text:u,htmlFor:"all-channels",type:"inline",subtext:d,cursor:"pointer"},n.a.createElement(j["a"],{name:"channels",id:"all-channels",value:"['*']",checked:"all-channels"===a,onChange:this.changeRadioButtonCheck}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement("label",{htmlFor:"specific-channels",className:"c-label c-label--inline c-label--pointer margin_bottom_100"},n.a.createElement("div",{className:"c-label__text full_width"},n.a.createElement("span",{className:"bold"},p)),n.a.createElement("input",{id:"specific-channels",className:"c-input_radio",type:"radio",name:"channels",value:"["+b+"]",checked:"specific-channels"===a,onChange:this.changeRadioButtonCheck})),n.a.createElement("div",{className:"margin_left_150 margin_top_50 p-oauth_flow__lazy-filter-select-container"},n.a.createElement(C["a"],{ref:this.setLfsRef,items:v,scrollThreshold:z,placeholderText:m,onKeyUp:this.onInputKeyUp,onValueChange:this.updateSpecificChannelsValues,listItemClass:Q}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(E["a"],{text:h,htmlFor:"no-channels",type:"inline",subtext:f,cursor:"pointer"},n.a.createElement(j["a"],{name:"channels",id:"no-channels",value:"[]",checked:"no-channels"===a,onChange:this.changeRadioButtonCheck})))))}},{key:"renderSingleChannelPicker",value:function e(){var t=this.props,r=t.channelItems,a=t.featureOauthReactWta,i=t.featureWtaAppDetailOauthUpdates,s=t.needSecondStep;var o=this.state.selectedChannelValues;var l=o.map(function(e){return e.id});var c=Y(r,o);var u=void 0;var d=void 0;if(a){u=G.t("Post to");d=G.t("Select Channel")}var p=n.a.createElement(C["a"],{ref:this.setLfsRef,items:c,scrollThreshold:z,placeholderText:d,onValueChange:this.updateSpecificChannelsValues,listItemClass:Q,single:true});return s&&i?n.a.createElement("div",{className:"margin_top_200"},n.a.createElement("p",{className:"p-oauth_flow__para bold"},G.t("Select a channel")),n.a.createElement("div",{className:"p-oauth_flow__lazy-filter-select-container"},p),n.a.createElement("input",{type:"hidden",name:"channel",value:l})):n.a.createElement("div",{className:"p-oauth_flow__single_channel_picker display_flex align_items_center"},n.a.createElement("span",{className:"margin_right_50"},u),n.a.createElement("div",{className:"flex_one p-oauth_flow__lazy-filter-select-container"},p),n.a.createElement("input",{type:"hidden",name:"channel",value:l}))}},{key:"renderSingleChannelOrChannelSelections",value:function e(){var t=this.state.step;var r=this.props,a=r.isRequest,n=r.appIsInstalled,i=r.singleChannel,s=r.needSecondStep,o=r.channelItems,l=r.featureAppApprovalsScopeAwareness,c=r.featureWtaAppDetailOauthUpdates;if(l&&a||Object(_["isEmpty"])(o)||this.noChannelScopesUsed())return null;if(1===t){if(c&&!i&&n)return null}else if(s&&!this.noWorkspaceScopesUsed())return null;return i?this.renderSingleChannelPicker():this.renderChannelSelections()}},{key:"renderRequestNoteSection",value:function e(){var t=this.props,r=t.isRequestNoteRequired,a=t.featureAppApprovalsScopeAwareness;if(!a||!this.shouldRequestNoteBeVisible())return null;var i=this.state.requestNote;return n.a.createElement("div",{className:"large_top_margin"},n.a.createElement(E["a"],{htmlFor:"note",id:"note_label",text:G.t("Add a message for your Admins"),optional:!r},n.a.createElement(x["a"],{id:"note",name:"note",className:"p-oauth_flow__textarea",isRequired:r,labelId:"note_label",value:i,onChange:this.onRequestNoteChange})))}},{key:"render",value:function e(){var t=this.state.step;var r=this.props,a=r.appIcon,i=r.appName,s=r.teamIcon,o=r.teamName,l=r.safeTeamScopeInfo,c=r.dangerousTeamScopeInfo,u=r.safeChannelScopeInfo,d=r.dangerousChannelScopeInfo,p=r.authRowIdentifier,m=r.crumbKey,h=r.denyUrl,f=r.needSecondStep,v=r.featureOauthReactWta,b=r.featureWtaAppDetailOauthUpdates;var g={appIcon:a,appName:i,teamIcon:s,teamName:o};var y=void 0;y=0!==t||b&&this.noWorkspaceScopesUsed()&&f?u.concat(d):Object(_["compact"])(l.concat(c));var O=void 0;v&&(O=G.t("Cancel"));return n.a.createElement("div",null,this.renderAlert(),n.a.createElement("header",{className:"p-oauth_flow__nav"},n.a.createElement("div",{className:"p-oauth_flow__nav_back"},this.maybeRenderBackButton()),n.a.createElement("div",{className:"p-oauth_flow__nav_back clearfix"},this.maybeRenderTeamPicker())),n.a.createElement("section",{className:"p-oauth_flow__header align_center"},n.a.createElement(U,g),n.a.createElement("h3",{className:"p-oauth_flow__title normal","data-qa":"oauth_page_title"},this.renderConfirmTitle())),n.a.createElement("section",{className:"p-oauth_flow__body"},n.a.createElement("form",{id:"oauth_authorize_confirm_form",name:"oauth-confirm",action:"/oauth/"+p,method:"post","accept-encoding":"UTF-8"},n.a.createElement("input",{type:"hidden",name:"create_authorization",value:"1"}),n.a.createElement("input",{type:"hidden",name:"crumb",value:m}),n.a.createElement("div",{className:"p-oauth_flow__scopes_container"},n.a.createElement(S["a"],{scopeInfo:y}),this.renderSingleChannelOrChannelSelections(),this.renderRequestNoteSection(),n.a.createElement("div",{className:"p-oauth_flow__buttons_container"},n.a.createElement(k["d"],{type:"outline",onClick:this.onDenyClick,href:h,className:"p-oauth_flow__button",target:"_self"},O),this.renderContinueOrInstallButton())))))}}]);return t}(a["PureComponent"]);Z.displayName="OAuthConfirm";Z.defaultProps=V;Z.displayName="OAuthConfirm";var X=Z;var $=Object(R["a"])("feature_oauth_react_wta","feature_oauth_internal_integration_banner","feature_wta_app_detail_oauth_updates","feature_app_approvals_scope_awareness")(Z);var ee=function e(t,r,a){if(!t)throw new Error("mountOAuthConfirm must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement($,a)),r)};var te=ee;var re=r(51);Object(re["a"])("interop.mountOAuthConfirm",te)},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(10);var i=new n["b"]("a11y");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.isCurrent,a=e.hasNotifications,n=e.isStarred,s=e.isMuted,o=e.hasDraft,l=e.featureLabelsForCoreObjects;if(!l)return null;var c=function(){if(r&&a&&s&&n&&o)return i.t("current conversation, has notifications, muted, starred, has a draft message");if(!r&&a&&s&&n&&o)return i.t("has notifications, muted, starred, has a draft message");if(r&&!a&&s&&n&&o)return i.t("current conversation, muted, starred, has a draft message");if(!r&&!a&&s&&n&&o)return i.t("muted, starred, has a draft message");if(r&&a&&!s&&n&&o)return i.t("current conversation, has notifications, starred, has a draft message");if(!r&&a&&!s&&n&&o)return i.t("has notifications, starred, has a draft message");if(r&&!a&&!s&&n&&o)return i.t("current conversation, starred, has a draft message");if(!r&&!a&&!s&&n&&o)return i.t("starred, has a draft message");if(r&&a&&s&&!n&&o)return i.t("current conversation, has notifications, muted, has a draft message");if(!r&&a&&s&&!n&&o)return i.t("has notifications, muted, has a draft message");if(r&&!a&&s&&!n&&o)return i.t("current conversation, muted, has a draft message");if(!r&&!a&&s&&!n&&o)return i.t("muted, has a draft message");if(r&&a&&!s&&!n&&o)return i.t("current conversation, has notifications, has a draft message");if(!r&&a&&!s&&!n&&o)return i.t("has notifications, has a draft message");if(r&&!a&&!s&&!n&&o)return i.t("current conversation, has a draft message");if(!r&&!a&&!s&&!n&&o)return i.t("has a draft message");if(r&&a&&s&&n&&!o)return i.t("current conversation, has notifications, muted, starred");if(!r&&a&&s&&n&&!o)return i.t("has notifications, muted, starred");if(r&&!a&&s&&n&&!o)return i.t("current conversation, muted, starred");if(!r&&!a&&s&&n&&!o)return i.t("muted, starred");if(r&&a&&!s&&n&&!o)return i.t("current conversation, has notifications, starred");if(!r&&a&&!s&&n&&!o)return i.t("has notifications, starred");if(r&&!a&&!s&&n&&!o)return i.t("current conversation, starred");if(!r&&!a&&!s&&n&&!o)return i.t("starred");if(r&&a&&s&&!n&&!o)return i.t("current conversation, has notifications, muted");if(!r&&a&&s&&!n&&!o)return i.t("has notifications, muted");if(r&&!a&&s&&!n&&!o)return i.t("current conversation, muted");if(!r&&!a&&s&&!n&&!o)return i.t("muted");if(r&&a&&!s&&!n&&!o)return i.t("current conversation, has notifications");if(!r&&a&&!s&&!n&&!o)return i.t("has notifications");if(r&&!a&&!s&&!n&&!o)return i.t("current conversation");return""}();if(t&&c)return i.t("{name} ({context})",{name:t,context:c});if(t)return t;return""}var o=new n["b"]("a11y");function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelName,r=e.previousChannelName,a=e.workspaceName,n=e.orgName,i=e.isOrgGlobalSharedPublicOrPrivateChannel,s=e.isOrgSharedPublicOrPrivateChannel,l=e.isExternallySharedChannel,c=e.isArchived,u=e.isCurrent,d=e.hasUnreads,p=e.hasNotifications,m=e.isPrivate,h=e.isNotMember,f=e.isMuted,v=e.isStarred,b=e.hasDraft,g=e.featureLabelsForCoreObjects;if(!g)return null;var _=function(){if(l&&a)return o.t("shared with {workspaceName}",{workspaceName:a});if(i&&n)return o.t("shared across all {orgName} workspaces",{orgName:n});if(s)return o.t("shared channel");return""}();var y=function(){if(c)return o.t("archived channel");if(u&&d&&p&&m&&h&&f&&v&&b)return o.t("current channel, has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(!u&&d&&p&&m&&h&&f&&v&&b)return o.t("has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(u&&!d&&p&&m&&h&&f&&v&&b)return o.t("current channel, has notifications, private, not a member, muted, starred, has a draft message");if(!u&&!d&&p&&m&&h&&f&&v&&b)return o.t("has notifications, private, not a member, muted, starred, has a draft message");if(u&&d&&!p&&m&&h&&f&&v&&b)return o.t("current channel, has unread messages, private, not a member, muted, starred, has a draft message");if(!u&&d&&!p&&m&&h&&f&&v&&b)return o.t("has unread messages, private, not a member, muted, starred, has a draft message");if(u&&!d&&!p&&m&&h&&f&&v&&b)return o.t("current channel, private, not a member, muted, starred, has a draft message");if(!u&&!d&&!p&&m&&h&&f&&v&&b)return o.t("private, not a member, muted, starred, has a draft message");if(u&&d&&p&&!m&&h&&f&&v&&b)return o.t("current channel, has unread messages and notifications, not a member, muted, starred, has a draft message");if(!u&&d&&p&&!m&&h&&f&&v&&b)return o.t("has unread messages and notifications, not a member, muted, starred, has a draft message");if(u&&!d&&p&&!m&&h&&f&&v&&b)return o.t("current channel, has notifications, not a member, muted, starred, has a draft message");if(!u&&!d&&p&&!m&&h&&f&&v&&b)return o.t("has notifications, not a member, muted, starred, has a draft message");if(u&&d&&!p&&!m&&h&&f&&v&&b)return o.t("current channel, has unread messages, not a member, muted, starred, has a draft message");if(!u&&d&&!p&&!m&&h&&f&&v&&b)return o.t("has unread messages, not a member, muted, starred, has a draft message");if(u&&!d&&!p&&!m&&h&&f&&v&&b)return o.t("current channel, not a member, muted, starred, has a draft message");if(!u&&!d&&!p&&!m&&h&&f&&v&&b)return o.t("not a member, muted, starred, has a draft message");if(u&&d&&p&&m&&!h&&f&&v&&b)return o.t("current channel, has unread messages and notifications, private, muted, starred, has a draft message");if(!u&&d&&p&&m&&!h&&f&&v&&b)return o.t("has unread messages and notifications, private, muted, starred, has a draft message");if(u&&!d&&p&&m&&!h&&f&&v&&b)return o.t("current channel, has notifications, private, muted, starred, has a draft message");if(!u&&!d&&p&&m&&!h&&f&&v&&b)return o.t("has notifications, private, muted, starred, has a draft message");if(u&&d&&!p&&m&&!h&&f&&v&&b)return o.t("current channel, has unread messages, private, muted, starred, has a draft message");if(!u&&d&&!p&&m&&!h&&f&&v&&b)return o.t("has unread messages, private, muted, starred, has a draft message");if(u&&!d&&!p&&m&&!h&&f&&v&&b)return o.t("current channel, private, muted, starred, has a draft message");if(!u&&!d&&!p&&m&&!h&&f&&v&&b)return o.t("private, muted, starred, has a draft message");if(u&&d&&p&&!m&&!h&&f&&v&&b)return o.t("current channel, has unread messages and notifications, muted, starred, has a draft message");if(!u&&d&&p&&!m&&!h&&f&&v&&b)return o.t("has unread messages and notifications, muted, starred, has a draft message");if(u&&!d&&p&&!m&&!h&&f&&v&&b)return o.t("current channel, has notifications, muted, starred, has a draft message");if(!u&&!d&&p&&!m&&!h&&f&&v&&b)return o.t("has notifications, muted, starred, has a draft message");if(u&&d&&!p&&!m&&!h&&f&&v&&b)return o.t("current channel, has unread messages, muted, starred, has a draft message");if(!u&&d&&!p&&!m&&!h&&f&&v&&b)return o.t("has unread messages, muted, starred, has a draft message");if(u&&!d&&!p&&!m&&!h&&f&&v&&b)return o.t("current channel, muted, starred, has a draft message");if(!u&&!d&&!p&&!m&&!h&&f&&v&&b)return o.t("muted, starred, has a draft message");if(u&&d&&p&&m&&h&&!f&&v&&b)return o.t("current channel, has unread messages and notifications, private, not a member, starred, has a draft message");if(!u&&d&&p&&m&&h&&!f&&v&&b)return o.t("has unread messages and notifications, private, not a member, starred, has a draft message");if(u&&!d&&p&&m&&h&&!f&&v&&b)return o.t("current channel, has notifications, private, not a member, starred, has a draft message");if(!u&&!d&&p&&m&&h&&!f&&v&&b)return o.t("has notifications, private, not a member, starred, has a draft message");if(u&&d&&!p&&m&&h&&!f&&v&&b)return o.t("current channel, has unread messages, private, not a member, starred, has a draft message");if(!u&&d&&!p&&m&&h&&!f&&v&&b)return o.t("has unread messages, private, not a member, starred, has a draft message");if(u&&!d&&!p&&m&&h&&!f&&v&&b)return o.t("current channel, private, not a member, starred, has a draft message");if(!u&&!d&&!p&&m&&h&&!f&&v&&b)return o.t("private, not a member, starred, has a draft message");if(u&&d&&p&&!m&&h&&!f&&v&&b)return o.t("current channel, has unread messages and notifications, not a member, starred, has a draft message");if(!u&&d&&p&&!m&&h&&!f&&v&&b)return o.t("has unread messages and notifications, not a member, starred, has a draft message");if(u&&!d&&p&&!m&&h&&!f&&v&&b)return o.t("current channel, has notifications, not a member, starred, has a draft message");if(!u&&!d&&p&&!m&&h&&!f&&v&&b)return o.t("has notifications, not a member, starred, has a draft message");if(u&&d&&!p&&!m&&h&&!f&&v&&b)return o.t("current channel, has unread messages, not a member, starred, has a draft message");if(!u&&d&&!p&&!m&&h&&!f&&v&&b)return o.t("has unread messages, not a member, starred, has a draft message");if(u&&!d&&!p&&!m&&h&&!f&&v&&b)return o.t("current channel, not a member, starred, has a draft message");if(!u&&!d&&!p&&!m&&h&&!f&&v&&b)return o.t("not a member, starred, has a draft message");if(u&&d&&p&&m&&!h&&!f&&v&&b)return o.t("current channel, has unread messages and notifications, private, starred, has a draft message");if(!u&&d&&p&&m&&!h&&!f&&v&&b)return o.t("has unread messages and notifications, private, starred, has a draft message");if(u&&!d&&p&&m&&!h&&!f&&v&&b)return o.t("current channel, has notifications, private, starred, has a draft message");if(!u&&!d&&p&&m&&!h&&!f&&v&&b)return o.t("has notifications, private, starred, has a draft message");if(u&&d&&!p&&m&&!h&&!f&&v&&b)return o.t("current channel, has unread messages, private, starred, has a draft message");if(!u&&d&&!p&&m&&!h&&!f&&v&&b)return o.t("has unread messages, private, starred, has a draft message");if(u&&!d&&!p&&m&&!h&&!f&&v&&b)return o.t("current channel, private, starred, has a draft message");if(!u&&!d&&!p&&m&&!h&&!f&&v&&b)return o.t("private, starred, has a draft message");if(u&&d&&p&&!m&&!h&&!f&&v&&b)return o.t("current channel, has unread messages and notifications, starred, has a draft message");if(!u&&d&&p&&!m&&!h&&!f&&v&&b)return o.t("has unread messages and notifications, starred, has a draft message");if(u&&!d&&p&&!m&&!h&&!f&&v&&b)return o.t("current channel, has notifications, starred, has a draft message");if(!u&&!d&&p&&!m&&!h&&!f&&v&&b)return o.t("has notifications, starred, has a draft message");if(u&&d&&!p&&!m&&!h&&!f&&v&&b)return o.t("current channel, has unread messages, starred, has a draft message");if(!u&&d&&!p&&!m&&!h&&!f&&v&&b)return o.t("has unread messages, starred, has a draft message");if(u&&!d&&!p&&!m&&!h&&!f&&v&&b)return o.t("current channel, starred, has a draft message");if(!u&&!d&&!p&&!m&&!h&&!f&&v&&b)return o.t("starred, has a draft message");if(u&&d&&p&&m&&h&&f&&!v&&b)return o.t("current channel, has unread messages and notifications, private, not a member, muted, has a draft message");if(!u&&d&&p&&m&&h&&f&&!v&&b)return o.t("has unread messages and notifications, private, not a member, muted, has a draft message");if(u&&!d&&p&&m&&h&&f&&!v&&b)return o.t("current channel, has notifications, private, not a member, muted, has a draft message");if(!u&&!d&&p&&m&&h&&f&&!v&&b)return o.t("has notifications, private, not a member, muted, has a draft message");if(u&&d&&!p&&m&&h&&f&&!v&&b)return o.t("current channel, has unread messages, private, not a member, muted, has a draft message");if(!u&&d&&!p&&m&&h&&f&&!v&&b)return o.t("has unread messages, private, not a member, muted, has a draft message");if(u&&!d&&!p&&m&&h&&f&&!v&&b)return o.t("current channel, private, not a member, muted, has a draft message");if(!u&&!d&&!p&&m&&h&&f&&!v&&b)return o.t("private, not a member, muted, has a draft message");if(u&&d&&p&&!m&&h&&f&&!v&&b)return o.t("current channel, has unread messages and notifications, not a member, muted, has a draft message");if(!u&&d&&p&&!m&&h&&f&&!v&&b)return o.t("has unread messages and notifications, not a member, muted, has a draft message");if(u&&!d&&p&&!m&&h&&f&&!v&&b)return o.t("current channel, has notifications, not a member, muted, has a draft message");if(!u&&!d&&p&&!m&&h&&f&&!v&&b)return o.t("has notifications, not a member, muted, has a draft message");if(u&&d&&!p&&!m&&h&&f&&!v&&b)return o.t("current channel, has unread messages, not a member, muted, has a draft message");if(!u&&d&&!p&&!m&&h&&f&&!v&&b)return o.t("has unread messages, not a member, muted, has a draft message");if(u&&!d&&!p&&!m&&h&&f&&!v&&b)return o.t("current channel, not a member, muted, has a draft message");if(!u&&!d&&!p&&!m&&h&&f&&!v&&b)return o.t("not a member, muted, has a draft message");if(u&&d&&p&&m&&!h&&f&&!v&&b)return o.t("current channel, has unread messages and notifications, private, muted, has a draft message");if(!u&&d&&p&&m&&!h&&f&&!v&&b)return o.t("has unread messages and notifications, private, muted, has a draft message");if(u&&!d&&p&&m&&!h&&f&&!v&&b)return o.t("current channel, has notifications, private, muted, has a draft message");if(!u&&!d&&p&&m&&!h&&f&&!v&&b)return o.t("has notifications, private, muted, has a draft message");if(u&&d&&!p&&m&&!h&&f&&!v&&b)return o.t("current channel, has unread messages, private, muted, has a draft message");if(!u&&d&&!p&&m&&!h&&f&&!v&&b)return o.t("has unread messages, private, muted, has a draft message");if(u&&!d&&!p&&m&&!h&&f&&!v&&b)return o.t("current channel, private, muted, has a draft message");if(!u&&!d&&!p&&m&&!h&&f&&!v&&b)return o.t("private, muted, has a draft message");if(u&&d&&p&&!m&&!h&&f&&!v&&b)return o.t("current channel, has unread messages and notifications, muted, has a draft message");if(!u&&d&&p&&!m&&!h&&f&&!v&&b)return o.t("has unread messages and notifications, muted, has a draft message");if(u&&!d&&p&&!m&&!h&&f&&!v&&b)return o.t("current channel, has notifications, muted, has a draft message");if(!u&&!d&&p&&!m&&!h&&f&&!v&&b)return o.t("has notifications, muted, has a draft message");if(u&&d&&!p&&!m&&!h&&f&&!v&&b)return o.t("current channel, has unread messages, muted, has a draft message");if(!u&&d&&!p&&!m&&!h&&f&&!v&&b)return o.t("has unread messages, muted, has a draft message");if(u&&!d&&!p&&!m&&!h&&f&&!v&&b)return o.t("current channel, muted, has a draft message");if(!u&&!d&&!p&&!m&&!h&&f&&!v&&b)return o.t("muted, has a draft message");if(u&&d&&p&&m&&h&&!f&&!v&&b)return o.t("current channel, has unread messages and notifications, private, not a member, has a draft message");if(!u&&d&&p&&m&&h&&!f&&!v&&b)return o.t("has unread messages and notifications, private, not a member, has a draft message");if(u&&!d&&p&&m&&h&&!f&&!v&&b)return o.t("current channel, has notifications, private, not a member, has a draft message");if(!u&&!d&&p&&m&&h&&!f&&!v&&b)return o.t("has notifications, private, not a member, has a draft message");if(u&&d&&!p&&m&&h&&!f&&!v&&b)return o.t("current channel, has unread messages, private, not a member, has a draft message");if(!u&&d&&!p&&m&&h&&!f&&!v&&b)return o.t("has unread messages, private, not a member, has a draft message");if(u&&!d&&!p&&m&&h&&!f&&!v&&b)return o.t("current channel, private, not a member, has a draft message");if(!u&&!d&&!p&&m&&h&&!f&&!v&&b)return o.t("private, not a member, has a draft message");if(u&&d&&p&&!m&&h&&!f&&!v&&b)return o.t("current channel, has unread messages and notifications, not a member, has a draft message");if(!u&&d&&p&&!m&&h&&!f&&!v&&b)return o.t("has unread messages and notifications, not a member, has a draft message");if(u&&!d&&p&&!m&&h&&!f&&!v&&b)return o.t("current channel, has notifications, not a member, has a draft message");if(!u&&!d&&p&&!m&&h&&!f&&!v&&b)return o.t("has notifications, not a member, has a draft message");if(u&&d&&!p&&!m&&h&&!f&&!v&&b)return o.t("current channel, has unread messages, not a member, has a draft message");if(!u&&d&&!p&&!m&&h&&!f&&!v&&b)return o.t("has unread messages, not a member, has a draft message");if(u&&!d&&!p&&!m&&h&&!f&&!v&&b)return o.t("current channel, not a member, has a draft message");if(!u&&!d&&!p&&!m&&h&&!f&&!v&&b)return o.t("not a member, has a draft message");if(u&&d&&p&&m&&!h&&!f&&!v&&b)return o.t("current channel, has unread messages and notifications, private, has a draft message");if(!u&&d&&p&&m&&!h&&!f&&!v&&b)return o.t("has unread messages and notifications, private, has a draft message");if(u&&!d&&p&&m&&!h&&!f&&!v&&b)return o.t("current channel, has notifications, private, has a draft message");if(!u&&!d&&p&&m&&!h&&!f&&!v&&b)return o.t("has notifications, private, has a draft message");if(u&&d&&!p&&m&&!h&&!f&&!v&&b)return o.t("current channel, has unread messages, private, has a draft message");if(!u&&d&&!p&&m&&!h&&!f&&!v&&b)return o.t("has unread messages, private, has a draft message");if(u&&!d&&!p&&m&&!h&&!f&&!v&&b)return o.t("current channel, private, has a draft message");if(!u&&!d&&!p&&m&&!h&&!f&&!v&&b)return o.t("private, has a draft message");if(u&&d&&p&&!m&&!h&&!f&&!v&&b)return o.t("current channel, has unread messages and notifications, has a draft message");if(!u&&d&&p&&!m&&!h&&!f&&!v&&b)return o.t("has unread messages and notifications, has a draft message");if(u&&!d&&p&&!m&&!h&&!f&&!v&&b)return o.t("current channel, has notifications, has a draft message");if(!u&&!d&&p&&!m&&!h&&!f&&!v&&b)return o.t("has notifications, has a draft message");if(u&&d&&!p&&!m&&!h&&!f&&!v&&b)return o.t("current channel, has unread messages, has a draft message");if(!u&&d&&!p&&!m&&!h&&!f&&!v&&b)return o.t("has unread messages, has a draft message");if(u&&!d&&!p&&!m&&!h&&!f&&!v&&b)return o.t("current channel, has a draft message");if(!u&&!d&&!p&&!m&&!h&&!f&&!v&&b)return o.t("has a draft message");if(u&&d&&p&&m&&h&&f&&v&&!b)return o.t("current channel, has unread messages and notifications, private, not a member, muted, starred");if(!u&&d&&p&&m&&h&&f&&v&&!b)return o.t("has unread messages and notifications, private, not a member, muted, starred");if(u&&!d&&p&&m&&h&&f&&v&&!b)return o.t("current channel, has notifications, private, not a member, muted, starred");if(!u&&!d&&p&&m&&h&&f&&v&&!b)return o.t("has notifications, private, not a member, muted, starred");if(u&&d&&!p&&m&&h&&f&&v&&!b)return o.t("current channel, has unread messages, private, not a member, muted, starred");if(!u&&d&&!p&&m&&h&&f&&v&&!b)return o.t("has unread messages, private, not a member, muted, starred");if(u&&!d&&!p&&m&&h&&f&&v&&!b)return o.t("current channel, private, not a member, muted, starred");if(!u&&!d&&!p&&m&&h&&f&&v&&!b)return o.t("private, not a member, muted, starred");if(u&&d&&p&&!m&&h&&f&&v&&!b)return o.t("current channel, has unread messages and notifications, not a member, muted, starred");if(!u&&d&&p&&!m&&h&&f&&v&&!b)return o.t("has unread messages and notifications, not a member, muted, starred");if(u&&!d&&p&&!m&&h&&f&&v&&!b)return o.t("current channel, has notifications, not a member, muted, starred");if(!u&&!d&&p&&!m&&h&&f&&v&&!b)return o.t("has notifications, not a member, muted, starred");if(u&&d&&!p&&!m&&h&&f&&v&&!b)return o.t("current channel, has unread messages, not a member, muted, starred");if(!u&&d&&!p&&!m&&h&&f&&v&&!b)return o.t("has unread messages, not a member, muted, starred");if(u&&!d&&!p&&!m&&h&&f&&v&&!b)return o.t("current channel, not a member, muted, starred");if(!u&&!d&&!p&&!m&&h&&f&&v&&!b)return o.t("not a member, muted, starred");if(u&&d&&p&&m&&!h&&f&&v&&!b)return o.t("current channel, has unread messages and notifications, private, muted, starred");if(!u&&d&&p&&m&&!h&&f&&v&&!b)return o.t("has unread messages and notifications, private, muted, starred");if(u&&!d&&p&&m&&!h&&f&&v&&!b)return o.t("current channel, has notifications, private, muted, starred");if(!u&&!d&&p&&m&&!h&&f&&v&&!b)return o.t("has notifications, private, muted, starred");if(u&&d&&!p&&m&&!h&&f&&v&&!b)return o.t("current channel, has unread messages, private, muted, starred");if(!u&&d&&!p&&m&&!h&&f&&v&&!b)return o.t("has unread messages, private, muted, starred");if(u&&!d&&!p&&m&&!h&&f&&v&&!b)return o.t("current channel, private, muted, starred");if(!u&&!d&&!p&&m&&!h&&f&&v&&!b)return o.t("private, muted, starred");if(u&&d&&p&&!m&&!h&&f&&v&&!b)return o.t("current channel, has unread messages and notifications, muted, starred");if(!u&&d&&p&&!m&&!h&&f&&v&&!b)return o.t("has unread messages and notifications, muted, starred");if(u&&!d&&p&&!m&&!h&&f&&v&&!b)return o.t("current channel, has notifications, muted, starred");if(!u&&!d&&p&&!m&&!h&&f&&v&&!b)return o.t("has notifications, muted, starred");if(u&&d&&!p&&!m&&!h&&f&&v&&!b)return o.t("current channel, has unread messages, muted, starred");if(!u&&d&&!p&&!m&&!h&&f&&v&&!b)return o.t("has unread messages, muted, starred");if(u&&!d&&!p&&!m&&!h&&f&&v&&!b)return o.t("current channel, muted, starred");if(!u&&!d&&!p&&!m&&!h&&f&&v&&!b)return o.t("muted, starred");if(u&&d&&p&&m&&h&&!f&&v&&!b)return o.t("current channel, has unread messages and notifications, private, not a member, starred");if(!u&&d&&p&&m&&h&&!f&&v&&!b)return o.t("has unread messages and notifications, private, not a member, starred");if(u&&!d&&p&&m&&h&&!f&&v&&!b)return o.t("current channel, has notifications, private, not a member, starred");if(!u&&!d&&p&&m&&h&&!f&&v&&!b)return o.t("has notifications, private, not a member, starred");if(u&&d&&!p&&m&&h&&!f&&v&&!b)return o.t("current channel, has unread messages, private, not a member, starred");if(!u&&d&&!p&&m&&h&&!f&&v&&!b)return o.t("has unread messages, private, not a member, starred");if(u&&!d&&!p&&m&&h&&!f&&v&&!b)return o.t("current channel, private, not a member, starred");if(!u&&!d&&!p&&m&&h&&!f&&v&&!b)return o.t("private, not a member, starred");if(u&&d&&p&&!m&&h&&!f&&v&&!b)return o.t("current channel, has unread messages and notifications, not a member, starred");if(!u&&d&&p&&!m&&h&&!f&&v&&!b)return o.t("has unread messages and notifications, not a member, starred");if(u&&!d&&p&&!m&&h&&!f&&v&&!b)return o.t("current channel, has notifications, not a member, starred");if(!u&&!d&&p&&!m&&h&&!f&&v&&!b)return o.t("has notifications, not a member, starred");if(u&&d&&!p&&!m&&h&&!f&&v&&!b)return o.t("current channel, has unread messages, not a member, starred");if(!u&&d&&!p&&!m&&h&&!f&&v&&!b)return o.t("has unread messages, not a member, starred");if(u&&!d&&!p&&!m&&h&&!f&&v&&!b)return o.t("current channel, not a member, starred");if(!u&&!d&&!p&&!m&&h&&!f&&v&&!b)return o.t("not a member, starred");if(u&&d&&p&&m&&!h&&!f&&v&&!b)return o.t("current channel, has unread messages and notifications, private, starred");if(!u&&d&&p&&m&&!h&&!f&&v&&!b)return o.t("has unread messages and notifications, private, starred");if(u&&!d&&p&&m&&!h&&!f&&v&&!b)return o.t("current channel, has notifications, private, starred");if(!u&&!d&&p&&m&&!h&&!f&&v&&!b)return o.t("has notifications, private, starred");if(u&&d&&!p&&m&&!h&&!f&&v&&!b)return o.t("current channel, has unread messages, private, starred");if(!u&&d&&!p&&m&&!h&&!f&&v&&!b)return o.t("has unread messages, private, starred");if(u&&!d&&!p&&m&&!h&&!f&&v&&!b)return o.t("current channel, private, starred");if(!u&&!d&&!p&&m&&!h&&!f&&v&&!b)return o.t("private, starred");if(u&&d&&p&&!m&&!h&&!f&&v&&!b)return o.t("current channel, has unread messages and notifications, starred");if(!u&&d&&p&&!m&&!h&&!f&&v&&!b)return o.t("has unread messages and notifications, starred");if(u&&!d&&p&&!m&&!h&&!f&&v&&!b)return o.t("current channel, has notifications, starred");if(!u&&!d&&p&&!m&&!h&&!f&&v&&!b)return o.t("has notifications, starred");if(u&&d&&!p&&!m&&!h&&!f&&v&&!b)return o.t("current channel, has unread messages, starred");if(!u&&d&&!p&&!m&&!h&&!f&&v&&!b)return o.t("has unread messages, starred");if(u&&!d&&!p&&!m&&!h&&!f&&v&&!b)return o.t("current channel, starred");if(!u&&!d&&!p&&!m&&!h&&!f&&v&&!b)return o.t("starred");if(u&&d&&p&&m&&h&&f&&!v&&!b)return o.t("current channel, has unread messages and notifications, private, not a member, muted");if(!u&&d&&p&&m&&h&&f&&!v&&!b)return o.t("has unread messages and notifications, private, not a member, muted");if(u&&!d&&p&&m&&h&&f&&!v&&!b)return o.t("current channel, has notifications, private, not a member, muted");if(!u&&!d&&p&&m&&h&&f&&!v&&!b)return o.t("has notifications, private, not a member, muted");if(u&&d&&!p&&m&&h&&f&&!v&&!b)return o.t("current channel, has unread messages, private, not a member, muted");if(!u&&d&&!p&&m&&h&&f&&!v&&!b)return o.t("has unread messages, private, not a member, muted");if(u&&!d&&!p&&m&&h&&f&&!v&&!b)return o.t("current channel, private, not a member, muted");if(!u&&!d&&!p&&m&&h&&f&&!v&&!b)return o.t("private, not a member, muted");if(u&&d&&p&&!m&&h&&f&&!v&&!b)return o.t("current channel, has unread messages and notifications, not a member, muted");if(!u&&d&&p&&!m&&h&&f&&!v&&!b)return o.t("has unread messages and notifications, not a member, muted");if(u&&!d&&p&&!m&&h&&f&&!v&&!b)return o.t("current channel, has notifications, not a member, muted");if(!u&&!d&&p&&!m&&h&&f&&!v&&!b)return o.t("has notifications, not a member, muted");if(u&&d&&!p&&!m&&h&&f&&!v&&!b)return o.t("current channel, has unread messages, not a member, muted");if(!u&&d&&!p&&!m&&h&&f&&!v&&!b)return o.t("has unread messages, not a member, muted");if(u&&!d&&!p&&!m&&h&&f&&!v&&!b)return o.t("current channel, not a member, muted");if(!u&&!d&&!p&&!m&&h&&f&&!v&&!b)return o.t("not a member, muted");if(u&&d&&p&&m&&!h&&f&&!v&&!b)return o.t("current channel, has unread messages and notifications, private, muted");if(!u&&d&&p&&m&&!h&&f&&!v&&!b)return o.t("has unread messages and notifications, private, muted");if(u&&!d&&p&&m&&!h&&f&&!v&&!b)return o.t("current channel, has notifications, private, muted");if(!u&&!d&&p&&m&&!h&&f&&!v&&!b)return o.t("has notifications, private, muted");if(u&&d&&!p&&m&&!h&&f&&!v&&!b)return o.t("current channel, has unread messages, private, muted");if(!u&&d&&!p&&m&&!h&&f&&!v&&!b)return o.t("has unread messages, private, muted");if(u&&!d&&!p&&m&&!h&&f&&!v&&!b)return o.t("current channel, private, muted");if(!u&&!d&&!p&&m&&!h&&f&&!v&&!b)return o.t("private, muted");if(u&&d&&p&&!m&&!h&&f&&!v&&!b)return o.t("current channel, has unread messages and notifications, muted");if(!u&&d&&p&&!m&&!h&&f&&!v&&!b)return o.t("has unread messages and notifications, muted");if(u&&!d&&p&&!m&&!h&&f&&!v&&!b)return o.t("current channel, has notifications, muted");if(!u&&!d&&p&&!m&&!h&&f&&!v&&!b)return o.t("has notifications, muted");if(u&&d&&!p&&!m&&!h&&f&&!v&&!b)return o.t("current channel, has unread messages, muted");if(!u&&d&&!p&&!m&&!h&&f&&!v&&!b)return o.t("has unread messages, muted");if(u&&!d&&!p&&!m&&!h&&f&&!v&&!b)return o.t("current channel, muted");if(!u&&!d&&!p&&!m&&!h&&f&&!v&&!b)return o.t("muted");if(u&&d&&p&&m&&h&&!f&&!v&&!b)return o.t("current channel, has unread messages and notifications, private, not a member");if(!u&&d&&p&&m&&h&&!f&&!v&&!b)return o.t("has unread messages and notifications, private, not a member");if(u&&!d&&p&&m&&h&&!f&&!v&&!b)return o.t("current channel, has notifications, private, not a member");if(!u&&!d&&p&&m&&h&&!f&&!v&&!b)return o.t("has notifications, private, not a member");if(u&&d&&!p&&m&&h&&!f&&!v&&!b)return o.t("current channel, has unread messages, private, not a member");if(!u&&d&&!p&&m&&h&&!f&&!v&&!b)return o.t("has unread messages, private, not a member");if(u&&!d&&!p&&m&&h&&!f&&!v&&!b)return o.t("current channel, private, not a member");if(!u&&!d&&!p&&m&&h&&!f&&!v&&!b)return o.t("private, not a member");if(u&&d&&p&&!m&&h&&!f&&!v&&!b)return o.t("current channel, has unread messages and notifications, not a member");if(!u&&d&&p&&!m&&h&&!f&&!v&&!b)return o.t("has unread messages and notifications, not a member");if(u&&!d&&p&&!m&&h&&!f&&!v&&!b)return o.t("current channel, has notifications, not a member");if(!u&&!d&&p&&!m&&h&&!f&&!v&&!b)return o.t("has notifications, not a member");if(u&&d&&!p&&!m&&h&&!f&&!v&&!b)return o.t("current channel, has unread messages, not a member");if(!u&&d&&!p&&!m&&h&&!f&&!v&&!b)return o.t("has unread messages, not a member");if(u&&!d&&!p&&!m&&h&&!f&&!v&&!b)return o.t("current channel, not a member");if(!u&&!d&&!p&&!m&&h&&!f&&!v&&!b)return o.t("not a member");if(u&&d&&p&&m&&!h&&!f&&!v&&!b)return o.t("current channel, has unread messages and notifications, private");if(!u&&d&&p&&m&&!h&&!f&&!v&&!b)return o.t("has unread messages and notifications, private");if(u&&!d&&p&&m&&!h&&!f&&!v&&!b)return o.t("current channel, has notifications, private");if(!u&&!d&&p&&m&&!h&&!f&&!v&&!b)return o.t("has notifications, private");if(u&&d&&!p&&m&&!h&&!f&&!v&&!b)return o.t("current channel, has unread messages, private");if(!u&&d&&!p&&m&&!h&&!f&&!v&&!b)return o.t("has unread messages, private");if(u&&!d&&!p&&m&&!h&&!f&&!v&&!b)return o.t("current channel, private");if(!u&&!d&&!p&&m&&!h&&!f&&!v&&!b)return o.t("private");if(u&&d&&p&&!m&&!h&&!f&&!v&&!b)return o.t("current channel, has unread messages and notifications");if(!u&&d&&p&&!m&&!h&&!f&&!v&&!b)return o.t("has unread messages and notifications");if(u&&!d&&p&&!m&&!h&&!f&&!v&&!b)return o.t("current channel, has notifications");if(!u&&!d&&p&&!m&&!h&&!f&&!v&&!b)return o.t("has notifications");if(u&&d&&!p&&!m&&!h&&!f&&!v&&!b)return o.t("current channel, has unread messages");if(!u&&d&&!p&&!m&&!h&&!f&&!v&&!b)return o.t("has unread messages");if(u&&!d&&!p&&!m&&!h&&!f&&!v&&!b)return o.t("current channel");return""}();if(r&&!_&&!y)return o.t("{channelName}, previously {previousChannelName}",{channelName:t,previousChannelName:r});if(!r&&!_&&y)return o.t("{channelName} ({context})",{channelName:t,context:y});if(r&&!_&&y)return o.t("{channelName}, previously {previousChannelName} ({context})",{channelName:t,previousChannelName:r,context:y});if(!r&&_&&!y)return o.t("{channelName}, {workspaceDescription}",{channelName:t,workspaceDescription:_});if(r&&_&&!y)return o.t("{channelName}, previously {previousChannelName}, {workspaceDescription}",{channelName:t,workspaceDescription:_,previousChannelName:r});if(!r&&_&&y)return o.t("{channelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:_,context:y});if(r&&_&&y)return o.t("{channelName}, previously {previousChannelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:_,previousChannelName:r,context:y});if(t)return t;return""}var c=r(976);var u=new n["b"]("a11y");function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.isGuest,a=e.isSelf,n=e.isAppOrBot,i=e.isDeleted,s=e.isPrescenceAway,o=e.isPrescenceDND,l=e.statusEmojiCode,d=e.statusText,p=e.isCurrent,m=e.hasNotifications,h=e.isStarred,f=e.isMuted,v=e.hasDraft,b=e.featureLabelsForCoreObjects;if(!b)return null;var g=function(){if(i)return u.t("deactivated");if(n)return u.t("APP");if(r&&!s&&o)return u.t("guest, do not disturb");if(r&&s&&!o)return u.t("guest, away");if(r&&!s&&!o)return u.t("guest");if(a&&!s&&o)return u.t("you, do not disturb");if(a&&!s&&!o)return u.t("you");if(!r&&!s&&o)return u.t("do not disturb");if(!r&&s&&!o)return u.t("away");return""}();var _=l&&Object(c["a"])(l);var y=function(){if(_&&!d)return u.t("{statusEmoji} emoji",{statusEmoji:_});if(_&&d)return u.t("{statusEmoji} emoji {statusText}",{statusEmoji:_,statusText:d});if(!_&&d)return d;return""}();var k=function(){if(p&&m&&f&&h&&v)return u.t("current conversation, has notifications, muted, starred, has a draft message");if(!p&&m&&f&&h&&v)return u.t("has notifications, muted, starred, has a draft message");if(p&&!m&&f&&h&&v)return u.t("current conversation, muted, starred, has a draft message");if(!p&&!m&&f&&h&&v)return u.t("muted, starred, has a draft message");if(p&&m&&!f&&h&&v)return u.t("current conversation, has notifications, starred, has a draft message");if(!p&&m&&!f&&h&&v)return u.t("has notifications, starred, has a draft message");if(p&&!m&&!f&&h&&v)return u.t("current conversation, starred, has a draft message");if(!p&&!m&&!f&&h&&v)return u.t("starred, has a draft message");if(p&&m&&f&&!h&&v)return u.t("current conversation, has notifications, muted, has a draft message");if(!p&&m&&f&&!h&&v)return u.t("has notifications, muted, has a draft message");if(p&&!m&&f&&!h&&v)return u.t("current conversation, muted, has a draft message");if(!p&&!m&&f&&!h&&v)return u.t("muted, has a draft message");if(p&&m&&!f&&!h&&v)return u.t("current conversation, has notifications, has a draft message");if(!p&&m&&!f&&!h&&v)return u.t("has notifications, has a draft message");if(p&&!m&&!f&&!h&&v)return u.t("current conversation, has a draft message");if(!p&&!m&&!f&&!h&&v)return u.t("has a draft message");if(p&&m&&f&&h&&!v)return u.t("current conversation, has notifications, muted, starred");if(!p&&m&&f&&h&&!v)return u.t("has notifications, muted, starred");if(p&&!m&&f&&h&&!v)return u.t("current conversation, muted, starred");if(!p&&!m&&f&&h&&!v)return u.t("muted, starred");if(p&&m&&!f&&h&&!v)return u.t("current conversation, has notifications, starred");if(!p&&m&&!f&&h&&!v)return u.t("has notifications, starred");if(p&&!m&&!f&&h&&!v)return u.t("current conversation, starred");if(!p&&!m&&!f&&h&&!v)return u.t("starred");if(p&&m&&f&&!h&&!v)return u.t("current conversation, has notifications, muted");if(!p&&m&&f&&!h&&!v)return u.t("has notifications, muted");if(p&&!m&&f&&!h&&!v)return u.t("current conversation, muted");if(!p&&!m&&f&&!h&&!v)return u.t("muted");if(p&&m&&!f&&!h&&!v)return u.t("current conversation, has notifications");if(!p&&m&&!f&&!h&&!v)return u.t("has notifications");if(p&&!m&&!f&&!h&&!v)return u.t("current conversation");return""}();if(t&&g&&y&&k)return u.t("{name} ({userInfo}), status: {status} ({context})",{name:t,userInfo:g,status:y,context:k});if(t&&!g&&y&&k)return u.t("{name}, status: {status} ({context})",{name:t,status:y,context:k});if(t&&g&&!y&&k)return u.t("{name} ({userInfo}) ({context})",{name:t,userInfo:g,context:k});if(t&&!g&&!y&&k)return u.t("{name} ({context})",{name:t,context:k});if(t&&g&&y&&!k)return u.t("{name} ({userInfo}), status: {status}",{name:t,userInfo:g,status:y});if(t&&!g&&y&&!k)return u.t("{name}, status: {status}",{name:t,status:y});if(t&&g&&!y&&!k)return u.t("{name} ({userInfo})",{name:t,userInfo:g});if(t)return t;return""}var p=r(75);var m=r(1441);Object(a["a"])("interop.a11y",{makeAriaLabelForMPIM:s,makeAriaLabelForChannel:l,makeAriaLabelForMember:d,isScreenReaderEnabled:p["isScreenReaderEnabled"],focusableSectionManager:m["b"]})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(5);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var m=r.n(p);var h=r(8);var f=r.n(h);var v=r(2);var b=r(129);var g=r(15);var _=r.n(g);var y=r(65);var k=r(41);var O=r(10);var E=r(18);var w=r(39);var C=r(310);var S=r(70);var j=r(626);var I=r(2255);var T=new O["b"]("notification_bar");var N={wasRecentlyOnline:b["b"].bool,typingNames:b["b"].array,snippetCallback:b["b"].func,inputText:b["b"].string};var A={wasRecentlyOnline:false,typingNames:null,snippetCallback:v["noop"],inputText:""};var R=function(e){f()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getTooLongCount",value:function e(){return Math.max(0,this.props.inputText.length-S["MAX_MESSAGE_INPUT_LENGTH"])}},{key:"renderLeft",value:function e(){if(!this.props.wasRecentlyOnline){var t=this.props.inputText?T.t("Slack is trying to connect, so messages can\u2019t be sent yet."):T.t("Slack is trying to connect.");return n.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},t," ",n.a.createElement(E["a"],{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}if(this.props.typingNames&&this.props.typingNames.length>0){var r=T.t("several people are typing");1===this.props.typingNames.length?r=T.rt("<b>{name}</b> is typing",{name:this.props.typingNames[0]}):2===this.props.typingNames.length&&(r=T.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:this.props.typingNames[0],other_name:this.props.typingNames[1]}));return n.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},r)}return null}},{key:"renderRight",value:function e(){var t=this;var r=this.getTooLongCount();if(this.props.wasRecentlyOnline&&r>0){var a=T.t("Your message is {diff_count, plural, =1{# character}other{# characters}} too long.",{diff_count:r});var i=T.t("Make a snippet instead?");var s=T.t("A snippet is a text file that can be much longer than a normal message.");return n.a.createElement("div",null,n.a.createElement("span",null,a," "),n.a.createElement(k["d"],{tip:s},n.a.createElement("span",null,n.a.createElement(y["a"],{tabIndex:"5",onClick:this.props.snippetCallback},i))))}var o=function(){if(!t.props.wasRecentlyOnline)return"";if(w["c"])return T.rt("<b>\uff0abold\uff0a</b> <code>\uff40code\uff40</code> <code>\uff40\uff40\uff40preformatted\uff40\uff40\uff40</code> <span>\uff1equote</span>");return T.rt("<b>*bold*</b> <i>_italics_</i> ~strike~ <code>`code`</code> <code>```preformatted```</code> <span>{quote}quote</span>",{quote:">",fallbackHash:"78fa2eabded9ec376bac82c1ade55d4f646aca2c"})}();return n.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},o)}},{key:"render",value:function e(){var t=this.getTooLongCount();var r=this.props.inputText.length>2;var a=_()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":this.props.wasRecentlyOnline&&(r||t>0)});return n.a.createElement("div",{className:"p-notification_bar"},n.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),n.a.createElement("div",{className:a},this.renderRight()))}}]);return t}(a["PureComponent"]);R.displayName="NotificationBar";R.defaultProps=A;var M=function e(t,r){var a=r.inputText,n=r.wasRecentlyOnline;var i=void 0!==n?n:Object(j["wasRecentlyOnline"])(t);return{wasRecentlyOnline:i,inputText:Object(C["b"])(t,a)}};var P=Object(i["connect"])(M)(R);var x=P;var D=function e(t,r,a){if(!t)throw new Error("mountNotificationBar must be called with a teamId parameter");var l=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(x,a)),r)};var F={mountNotificationBar:D};var L=r(51);Object(L["a"])("interop.mountNotificationBar",D)},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(2);var p=r(1);var m=r.n(p);var h=r(129);var f=r(14);var v=r(15);var b=r.n(v);var g=r(11);var _=r(19);var y=r(50);var k=r(12);var O=r(48);var E=r(10);var w=r(2245);var C=new E["b"]("files");var S=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={spriteLoaded:false};return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=new Image;this.spritePromise=new Promise(function(e){r.onload=function(){e()};r.src=cdn_url+"/be529/img/dragdrop_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.teamName,n=t.channelName,i=t.isImOrMpim,s=t.useNightIllustration;var o=this.state.spriteLoaded;if(!r)return null;var l=false;if(Object(d["isBoolean"])(s))l=s;else{var c=new Date;var u=c.getHours();l=u>=20||u<8}var p=b()("p-message_pane_drag_overlay",{"p-message_pane_drag_overlay--night":!!l});var h="";h=i?C.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately with {userName}',{userName:n}):C.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately to {channelName}',{channelName:n});var f="";o&&(f=m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_03"}),m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_02"}),m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_01"})));return m.a.createElement("div",{className:p},m.a.createElement("div",{className:"p-message_pane_drag_overlay__info"},m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim"},f),m.a.createElement("div",{className:"p-message_pane_drag_overlay__title"},C.rt("Upload to {teamName}",{teamName:a})),m.a.createElement("div",{className:"p-message_pane_drag_overlay__subtitle"},h)))}}]);return t}(p["PureComponent"]);S.displayName="MessagePaneDragOverlay";S.defaultProps={featureFileThreads:true,teamName:"",channelName:"",isImOrMpim:false,useNightIllustration:void 0};function j(e,t){var r=t.channelId;var a=Object(_["getChannelById"])(e,r);var n=Object(y["getCurrentTeam"])(e);return{featureFileThreads:Object(g["isFeatureEnabled"])(e,"feature_file_threads"),channelName:Object(k["getDisplayNameForChannel"])(e,a,{imIncludeAtSign:false}),teamName:Object(O["getTeamDisplayName"])(n),isImOrMpim:Object(k["isIm"])(a)||Object(k["isMpim"])(a)}}var I=Object(f["connect"])(j)(S);var T=t["a"]=I},,,,function(e,t,r){"use strict";r.r(t);var a=r(1176);var n=r(1182);var i=r(1189);var s=r(1190);var o=r(1191);var l=r(1192);var c=r(1193);var u=r(1194);var d=r(1195);var p=r(1196);var m=r(1197);var h=r(1201);var f=r(1202);var v=r(1205);var b=r(1206);var g=r(1207);var _=r(1209);var y=r(1210);var k=r(1211);var O=r(1212);var E=r(1213);var w=r(1214);var C=r(1215);var S=r(1216);var j=r(1218);var I=r(1219);var T=r(1220);var N=r(1221);var A=r(1224);var R=r(1225);var M=r(1226);var P=r(1227);var x=r(1228);var D=r(1229);var F=r(1230);var L=r(1231);var B=r(1232);var U=r(1233);var q=r(1234);var G=r(1235);var H=r(1236);var W=r(1237);var V=r(1238);var z=r(1239);var Q=r(1240);var K=r(1242);var Y=r(1244);var J=r(1245);var Z=r(1246);var X=r(1247);var $=r(1248);var ee=r(1249);var te=r(1250);var re=r(1251);var ae=r(1252);var ne=r(1253);var ie=r(1254);var se=r(1255);var oe=r(1256);var le=r(905);var ce=r(1257);var ue=r(1258);var de=r(1260);var pe=r(1261);var me=r(1262);var he=r(1263);var fe=r(1264);var ve=r(1265);var be=r(1267);var ge=r(1268);var _e=r(1269);var ye=r(1270);var ke=r(1271);var Oe=r(1272);var Ee=r(1273);var we=r(1274);var Ce=r(1275);var Se=r(1276);var je=r(1277);var Ie=r(1278);var Te=r(1279);var Ne=r(1280);var Ae=r(1281);var Re=r(1282);var Me=r(1283);var Pe=r(1284);var xe=r(1286);var De=r(1287);var Fe=r(1288);var Le=r(1290);var Be=r(1291);var Ue=r(1292);var qe=r(1293);var Ge=r(1294);var He=r(1);var We=r.n(He);var Ve=r(104);var ze=r.n(Ve);var Qe=r(691);var Ke=r(5);var Ye=r.n(Ke);var Je=r(6);var Ze=r.n(Je);var Xe=r(7);var $e=r.n(Xe);var et=r(8);var tt=r.n(et);var rt=r(14);var at=r(129);var nt=r(15);var it=r.n(nt);var st=r(10);var ot=r(11);var lt=r(493);var ct=r(69);var ut=r(94);var dt=r(167);var pt=r(54);var mt=r(121);var ht=r(18);var ft=r(41);var vt=r(1410);var bt=r(3);var gt=r.n(bt);var _t=r(2);var yt=r(21);var kt=r(240);var Ot=r(2181);var Et=r(889);var wt=r(151);var Ct=r(12);var St=r(144);var jt=r(89);var It=r(113);var Tt=r(692);var Nt=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.currentTime,n=void 0===a?Object(jt["a"])().unix():a;var i=Object(It["a"])(n);var s=Object(It["a"])(t);var o=Math.ceil(Object(Tt["a"])(s,i));if(o<60){var l=jt["a"].localeData().timeAgo().compact.min45.replace(/%d/,o);return l}if(o>=60&&o%60===0){var c=o/60;var u=jt["a"].localeData().timeAgo().compact.hrs24.replace(/%d/,c);return u}var d=o%60;var p=(o-d)/60;var m=jt["a"].localeData().timeAgo().compact.min45.replace(/%d/,d);var h=jt["a"].localeData().timeAgo().compact.hrs24.replace(/%d/,p);var f=h+" "+m;return f};var At=Nt;var Rt=r(1001);var Mt=r(1011);var Pt=r(1445);var xt=r(760);var Dt=r(1164);var Ft=r(29);var Lt=r(164);var Bt=r(1745);var Ut=new st["b"]("do_not_disturb");var qt={inDndBySnooze:at["b"].bool.isRequired,snoozeNotifications:at["b"].func.isRequired,endDndSnooze:at["b"].func.isRequired,endDndSchedule:at["b"].func.isRequired,snoozeEndTs:at["b"].number,dndEndTs:at["b"].number,do24hrTime:at["b"].bool,currentChannel:at["b"].object,featureSonicDnd:at["b"].bool,featureBetterSnooze:at["b"].bool,useGlobalNav:at["b"].bool,menuProps:at["b"].object,openDndDialog:at["b"].func,showCustomNewBadge:at["b"].bool,setUserPrefByApi:at["b"].func,clogger:at["b"].object};var Gt={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false,currentChannel:{},featureSonicDnd:false,featureBetterSnooze:false,useGlobalNav:false,menuProps:{},openDndDialog:_t["noop"],showCustomNewBadge:true,setUserPrefByApi:_t["noop"],clogger:{track:_t["noop"]}};var Ht=function(e){tt()(t,e);function t(e){Ye()(this,t);var r=$e()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSubmenu=r.renderSubmenu.bind(r);return r}Ze()(t,[{key:"renderDndMenuHeader",value:function e(){var t=this.props,r=t.inDndBySnooze,a=t.snoozeEndTs,n=t.dndEndTs,i=t.do24hrTime,s=t.featureBetterSnooze;var o=Ut.rt("Scheduled until {time}",{time:Object(St["a"])(n,{do24hrTime:i})});var l=Ut.rt("Notifications snoozed for {duration}",{duration:At(a)});var c=r?l:o;var u=r?a:n;var d=Object(Rt["b"])(u,{do24hrTime:i,featureBetterSnooze:s});var p=it()({"p-dnd_menu__snooze_header":r,"p-dnd_menu__schedule_header":!r});return We.a.createElement("div",{className:p},We.a.createElement("div",{className:"p-dnd_menu__header_status"},We.a.createElement("div",null,We.a.createElement("strong",null,Ut.t("Do Not Disturb: ON",{fallbackHash:"e9f808845f44c3345ade56f562f58e9da896e00e"}))),We.a.createElement("div",null,s?d:c)))}},{key:"renderSubmenu",value:function e(t){var r=this;var a=this.props,n=a.featureSonicDnd,i=a.featureBetterSnooze,s=a.showCustomNewBadge,o=a.clogger;if(!n)return null;var l=void 0;var c=void 0;var u=void 0;var d=void 0;var p=void 0;if(i){l=Ut.t("Custom\u2026");c=Ut.rt("Custom\u2026 {new_badge}",{new_badge:We.a.createElement(Et["a"],{className:"p-dnd_menu__new_pill"},Ut.t("NEW"))});u=Ut.t("Until tomorrow");d=Ut.t("Until next week");p=Ut.t("30 minutes")}return We.a.createElement(pt["f"],gt()({},t,{width:i?200:140}),!i&&We.a.createElement(pt["b"],{label:Ut.t("20 minutes"),onSelected:function e(){var t=20;r.props.snoozeNotifications({duration:t});o.track(Ft["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Ft["h"].DURATION_20_MINUTES,dnd_snooze_type:Ft["i"].SNOOZE_ADJUST})}}),i&&We.a.createElement(pt["b"],{label:p,onSelected:function e(){var t=30;r.props.snoozeNotifications({duration:t});o.track(Ft["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Ft["h"].DURATION_30_MINUTES,dnd_snooze_type:Ft["i"].SNOOZE_ADJUST})}}),We.a.createElement(pt["b"],{label:Ut.t("1 hour"),onSelected:function e(){var t=60;r.props.snoozeNotifications({duration:t});o.track(Ft["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Ft["h"].DURATION_1_HOUR,dnd_snooze_type:Ft["i"].SNOOZE_ADJUST})}}),We.a.createElement(pt["b"],{label:Ut.t("2 hours"),onSelected:function e(){var t=120;r.props.snoozeNotifications({duration:t});o.track(Ft["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Ft["h"].DURATION_2_HOURS,dnd_snooze_type:Ft["i"].SNOOZE_ADJUST})}}),We.a.createElement(pt["b"],{label:Ut.t("4 hours"),onSelected:function e(){var t=240;r.props.snoozeNotifications({duration:t});o.track(Ft["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Ft["h"].DURATION_4_HOURS,dnd_snooze_type:Ft["i"].SNOOZE_ADJUST})}}),!i&&We.a.createElement(pt["b"],{label:Ut.t("8 hours"),onSelected:function e(){var t=480;r.props.snoozeNotifications({duration:t});o.track(Ft["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Ft["h"].DURATION_8_HOURS,dnd_snooze_type:Ft["i"].SNOOZE_ADJUST})}}),!i&&We.a.createElement(pt["b"],{label:Ut.t("24 hours"),onSelected:function e(){var t=1440;r.props.snoozeNotifications({duration:t});o.track(Ft["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Ft["h"].DURATION_24_HOURS,dnd_snooze_type:Ft["i"].SNOOZE_ADJUST})}}),i&&We.a.createElement(pt["b"],{label:u,onSelected:function e(){var t=Object(Rt["d"])();r.props.snoozeNotifications({duration:t});o.track(Ft["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Ft["h"].DURATION_TOMORROW,dnd_snooze_type:Ft["i"].SNOOZE_ADJUST})}}),i&&We.a.createElement(pt["b"],{label:d,onSelected:function e(){var t=Object(Rt["c"])();r.props.snoozeNotifications({duration:t});o.track(Ft["j"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Ft["h"].DURATION_NEXT_WEEK,dnd_snooze_type:Ft["i"].SNOOZE_ADJUST})}}),i&&We.a.createElement(pt["b"],{label:s?c:l,onSelected:function e(){r.props.openDndDialog();r.props.setUserPrefByApi({pref:"dnd_custom_new_badge_seen",value:true});o.track(Ft["j"].DND_OPEN_CUSTOM_SNOOZE_DIALOG)}}))}},{key:"renderAdjustMenuItem",value:function e(){var t=this.props,r=t.inDndBySnooze,a=t.featureSonicDnd,n=t.useGlobalNav;if(!a)return null;var i=We.a.createElement(pt["b"],{label:Ut.t("Adjust schedule\u2026",{fallbackHash:"ce0d0efeb198eef758ed1a5393ca0a0f33012be6"}),onSelected:function e(){return Object(xt["a"])("notifications","#prefs_dnd")}});var s=We.a.createElement(Ot["a"],{label:Ut.t("Adjust time"),renderSubmenu:this.renderSubmenu,forceLeft:n});return r?s:i}},{key:"renderSettingsMenuItem",value:function e(){var t=this.props,r=t.currentChannel,a=t.featureSonicDnd;if(!a)return null;if(!r.id||Object(Ct["isIm"])(r))return null;var n=We.a.createElement(wt["a"],{channelId:r.id,iconProps:{inherit:true,align:"baseline"},inline:true});var i=Ut.rt("Settings for {name}\u2026",{name:We.a.createElement("strong",null,n),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return We.a.createElement(pt["b"],{label:i,onSelected:function e(){return Object(Dt["a"])(r.id)}})}},{key:"render",value:function e(){var t=this.props,r=t.inDndBySnooze,a=t.menuProps,n=t.featureSonicDnd,i=t.featureBetterSnooze;if(!n)return null;var s=void 0;i&&(s=Ut.t("Resume notifications now"));return We.a.createElement("div",null,this.renderDndMenuHeader(),We.a.createElement(pt["f"],gt()({},a,{menuClassNames:"p-dnd_menu"}),We.a.createElement(pt["b"],{label:i?s:Ut.t("Turn OFF"),onSelected:r?this.props.endDndSnooze:this.props.endDndSchedule}),this.renderAdjustMenuItem(),We.a.createElement(pt["d"],null),this.renderSettingsMenuItem(),We.a.createElement(pt["b"],{label:Ut.t("Your notification preferences\u2026",{fallbackHash:"4fa8d4f0498a550e3cf075dc9c810f7b6f771e65"}),onSelected:function e(){return Object(xt["a"])("notifications")}})))}}]);return t}(He["PureComponent"]);Ht.displayName="DndEnabledMenu";Ht.defaultProps=Gt;var Wt=function e(t){var r=Object(ot["getCurrentUserId"])(t);var a=Object(lt["getDndScheduleByMemberId"])(t,r),n=a.nextDndEndTs;var i=Object(lt["getSnoozeScheduleForCurrentUser"])(t),s=i.snoozeEnabled,o=i.snoozeEndTs;return{inDndBySnooze:s,snoozeEndTs:o,dndEndTs:n,do24hrTime:Object(yt["getUserPref"])(t,"time24"),featureBetterSnooze:Object(ot["isFeatureEnabled"])(t,"feature_better_snooze"),showCustomNewBadge:!Object(yt["getUserPref"])(t,"dnd_custom_new_badge_seen"),clogger:Object(Lt["a"])({state:t})}};var Vt={snoozeNotifications:Mt["e"],openDndDialog:Pt["a"],endDndSnooze:Mt["b"],endDndSchedule:Mt["a"],setUserPrefByApi:kt["c"]};var zt=Object(rt["connect"])(Wt,Vt)(Ht);var Qt=new st["b"]("do_not_disturb");var Kt={inDnd:at["b"].bool.isRequired,currentChannel:at["b"].object,className:at["b"].string,menuPosition:at["b"].string,menuOffsetX:at["b"].number,menuOffsetY:at["b"].number,tooltipOffsetX:at["b"].number,tooltipOffsetY:at["b"].number,featureSonicDnd:at["b"].bool,useGlobalNav:at["b"].bool};var Yt={currentChannel:{},className:void 0,menuPosition:"bottom-left",menuOffsetX:-4,menuOffsetY:8,tooltipOffsetX:void 0,tooltipOffsetY:void 0,featureSonicDnd:false,useGlobalNav:false};var Jt=function(e){tt()(t,e);function t(e){Ye()(this,t);var r=$e()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}Ze()(t,[{key:"renderMenu",value:function e(t){var r=this.props,a=r.inDnd,n=r.currentChannel,i=r.featureSonicDnd;if(!i)return null;if(a)return We.a.createElement(zt,{featureSonicDnd:i,currentChannel:n,menuProps:t});return We.a.createElement(vt["a"],{featureSonicDnd:i,currentChannel:n,menuProps:t})}},{key:"render",value:function e(){var t=this.props,r=t.inDnd,a=t.className,n=t.menuPosition,i=t.menuOffsetX,s=t.menuOffsetY,o=t.tooltipOffsetX,l=t.tooltipOffsetY,c=t.featureSonicDnd,u=t.useGlobalNav;if(!c)return null;var d=r?"snooze-outline":"bell-o";var p=u?Qt.t("Notification preferences",{fallbackHash:"753a22b2eb617204efee4644795034b8ace1ee14"}):Qt.t("Notifications");return We.a.createElement(pt["e"],{renderMenu:this.renderMenu,position:n,offsetX:i,offsetY:s},We.a.createElement(ft["d"],{tip:p,position:"bottom",offsetX:o,offsetY:l},We.a.createElement(mt["a"],{className:it()("p-dnd_button",a),"data-qa":"do_not_disturb_btn"},We.a.createElement(ht["b"],{type:d}))))}}]);return t}(He["PureComponent"]);Jt.displayName="DndButton";Jt.defaultProps=Yt;var Zt=function e(t){var r=Object(ot["getCurrentUserId"])(t);var a=Object(ct["getPrimaryView"])(t);return{inDnd:!!Object(lt["getDndByMemberId"])(t,r),currentChannel:Object(ut["f"])(t,a)||void 0,featureSonicDnd:Object(ot["isFeatureEnabled"])(t,"feature_sonic_dnd"),useGlobalNav:Object(dt["b"])(t)}};var Xt=Object(rt["connect"])(Zt)(Jt);var $t=r(334);var er=r(1159);Object($t["a"])({ToastContainer:Qe["a"],DndButton:Xt});Object(er["a"])(r(2091));window.React=We.a;window.ReactDOM=ze.a;window.moment=jt["a"]},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(104);var l=r.n(o);var c=r(14);var u=r(2);var d=r.n(u);var p=r(139);var m=r(33);var h=r(5);var f=r.n(h);var v=r(6);var b=r.n(v);var g=r(7);var _=r.n(g);var y=r(8);var k=r.n(y);var O=r(129);var E=r(62);var w=r(164);var C=r(17);var S=r(128);var j=r(679);var I=r(50);var T=r(48);var N=r(10);var A=r(408);var R=r(1392);var M=r(1381);var P=r(1741);var x=r(2185);var D=new N["b"]("admin");var F={onClose:O["b"].func.isRequired,isEnterprise:O["b"].bool.isRequired,fetchNewPage:O["b"].func.isRequired,loadIDPGroups:O["b"].func.isRequired,clogger:O["b"].object.isRequired};var L={onClose:d.a.noop,isEnterprise:false,fetchNewPage:d.a.noop,loadIDPGroups:d.a.noop};var B=function(e){k()(t,e);function t(){f()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.isEnterprise,a=t.clogger;var n="admin_manage_members_modal_load";Object(E["e"])(n+"_mark");var i=[this.props.fetchNewPage()];r&&i.push(this.props.loadIDPGroups());var s=Object(C["b"])();Promise.all(i).then(function(){var e=Object(E["g"])(n,n+"_mark");var t={contexts:{perf:{elapsed_time:e}}};s.warn("\u23f2\ufe0f Admin Manage Member modal load time: "+e+"ms");a.track("ADMIN_MODAL_MANAGE_MEMBERS_TIME_TO_USABLE",t)}).catch(function(e){s.error("Failed to load data for table",e)})}},{key:"render",value:function e(){var t=this.props.onClose;return s.a.createElement(A["a"],{showCancelButton:false,showGoButton:false,onCancel:t,modalBodyClasses:"p-admin_member_modal__body",fullBleedModalBodyContent:true,title:D.t("Manage members")},s.a.createElement(M["a"],null),s.a.createElement(R["a"],null))}}]);return t}(i["Component"]);B.displayName="AdminMemberModal";B.defaultProps=L;var U=function e(t){return{isEnterprise:Object(T["isEnterpriseTeam"])(Object(I["getCurrentTeam"])(t)),clogger:Object(w["a"])({state:t})}};var q=function e(t){return{fetchNewPage:function e(){return t(Object(S["fetchNewPage"])())},loadIDPGroups:function e(){return t(Object(j["loadIDPGroups"])())}}};var G=Object(c["connect"])(U,q)(B);var H=function e(t,r){var a=document.getElementById("admin_member_modal_mount_point");if(!t)throw new Error("mountAdminMemberModal must be called with a teamId parameter");var i=Object(m["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(a)})};Object(p["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(G,n()({},r,{onClose:o}))),a)};var W=function e(t){l.a.unmountComponentAtNode(t)};var V={mountAdminMemberModal:H,unmountAdminMemberModal:W};var z=r(51);Object(z["a"])("interop.mountAdminMemberModal",H);Object(z["a"])("interop.unmountAdminMemberModal",W)},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(5);var d=r.n(u);var p=r(6);var m=r.n(p);var h=r(7);var f=r.n(h);var v=r(8);var b=r.n(v);var g=r(129);var _=r(10);var y=r(20);var k=r(1414);var O=new _["b"]("prefs");var E=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.onClose,i=t.onReset;return n.a.createElement("div",null,n.a.createElement(k["a"],{channelId:r,onClose:a}),n.a.createElement("div",{className:"p-channel_notification_settings_embedded_actions"},n.a.createElement(y["a"],{onClick:i,type:"link"},O.rt("Reset to your default notification settings")),n.a.createElement(y["a"],{onClick:a},O.rt("Done"))))}}]);return t}(a["PureComponent"]);E.displayName="ChannelNotificationSettingsEmbedded";var w=E;function C(e,t,r){if(!e)throw new Error("mountChannelNotificationSettings must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(e)},n.a.createElement(w,r)),t)}function S(e){s.a.unmountComponentAtNode(e)}var j=r(51);Object(j["a"])("interop.mountChannelNotificationSettings",C);Object(j["a"])("interop.unmountChannelNotificationSettings",S)},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(33);var c=r(51);var u=r(5);var d=r.n(u);var p=r(6);var m=r.n(p);var h=r(7);var f=r.n(h);var v=r(8);var b=r.n(v);var g=r(129);var _=r(2);var y=r(159);var k=r(140);var O=r(88);var E=r(811);var w=r(227);var C=r(10);var S=new C["b"]("enterprise_moving_channels");var j=/\r?\n|\r/g;var I={onInputChange:g["b"].func,onCheckboxChange:g["b"].func,customMessageError:g["b"].string,featureDeleteMovedChannels:g["b"].bool.isRequired};var T={onInputChange:_["noop"],onCheckboxChange:_["noop"],customMessageError:null};var N=300;var A=void 0;var R=function e(t){return A[t]};var M=function e(t){t&&t.length>N?Object(k["b"])(Object(k["a"])().channels.setMoveChannelMessageError("message_too_long")):Object(k["b"])(Object(k["a"])().channels.setMoveChannelMessageError())};var P=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={includeCustomMessage:false,customMessage:""};r.onInputChange=r.onInputChange.bind(r);r.onKeyDown=r.onKeyDown.bind(r);r.onCheckboxChange=r.onCheckboxChange.bind(r);r.props.featureDeleteMovedChannels&&(A={message_too_long:S.t("That\u2019s a bit too long. Messages must be fewer than {maxlength} characters.",{maxlength:N}),message_empty:S.t("Please fill in a custom message.")});return r}m()(t,[{key:"onKeyDown",value:function e(t){13===t.keyCode&&t.preventDefault()}},{key:"onInputChange",value:function e(t){var r=t.replace(j," ");this.setCustomMessage(r);this.props.onInputChange(r);M(r)}},{key:"onCheckboxChange",value:function e(t){t.persist();var r=t.target.checked;this.setIncludeCustomMessage(r);this.props.onCheckboxChange(r);r?M(this.state.customMessage):Object(k["b"])(Object(k["a"])().channels.setMoveChannelMessageError())}},{key:"setIncludeCustomMessage",value:function e(t){this.setState(function(){return{includeCustomMessage:t}})}},{key:"setCustomMessage",value:function e(t){this.setState(function(){return{customMessage:t}})}},{key:"renderCheckbox",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.includeCustomMessage;var r=S.t("Add a custom message to channel members");var a=S.t("This message will appear within the Slackbot notification that each member will receive.");return n.a.createElement("div",null,n.a.createElement(O["a"],{htmlFor:"mvch_message_checkbox",className:"p-move_channels_msg__label",cursor:"pointer",text:r,subtext:a,type:"inline"},n.a.createElement(w["a"],{id:"mvch_message_checkbox",checked:t,onChange:this.onCheckboxChange,"data-qa":"mvch_message_checkbox"})))}},{key:"renderCustomMessageTextarea",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.customMessage;var r=this.props.customMessageError;var a=S.rt("<b>*bold*</b> <i>_italics_</i> and links are allowed. Line breaks aren\u2019t supported for this message.");return n.a.createElement("div",{className:"margin_left_150"},n.a.createElement(E["a"],{id:"ent_mvch_custom_message","data-qa":"ent_mvch_custom_message_input",resize:"none",name:"move_channels_custom_message_input",value:t,hintText:a,maxCharacterLimit:N,onChange:this.onInputChange,onKeyDown:this.onKeyDown,errorText:R(r)||r,errorLevel:"warning",isRequired:true}))}},{key:"render",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.includeCustomMessage;return n.a.createElement("div",{"data-qa":"ent_mvch_custom_message"},this.renderCheckbox(),t&&this.renderCustomMessageTextarea())}}]);return t}(a["PureComponent"]);P.displayName="MoveChannelsCustomMessage";P.defaultProps=T;var x=Object(y["a"])("feature_delete_moved_channels")(P);var D=x;Object(c["a"])("interop.moveChannelsCustomMessage",{render:function e(t,r,a){if(!t)throw new Error("moveChannelsCustomMessage render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(D,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";r.r(t);var a={};r.r(a);r.d(a,"hydrateStartData",function(){return j});r.d(a,"getStartData",function(){return N});var n=r(3);var i=r.n(n);var s=r(57);var o=r(2);var l=r.n(o);var c=r(31);var u=r(129);var d=r(12);var p=r(423);var m=r(22);var h=r(25);var f=Object(m["a"])("Fetch legacy start data",function(e){return e(Object(h["b"])({method:"client.boot",args:{flannel_api_ver:4}}))});var v=r(13);var b=Object(v["c"])("TS.ensureFullyBooted",function(){throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")});var g=r(241);var _=r(135);var y=r(257);var k=r(102);var O=r(17);var E=r(26);var w=r(19);var C=r(11);var S=r(890);var j=Object(c["b"])("Hydrate start data by fetching any required objects",function(){var e=Object(s["method"])(function(e,t,r){var a=r.startData;var n=Object(O["a"])({getState:t});var s=t();var o=i()({},a.rtm_start);var c=l.a.get(a,"self",l.a.get(o,"self"));var u=l.a.get(c,"id");var p=o.channels||a.channels;var m=o.channels_latest||a.my_channels;if(p&&m){var h=o.last_read,f=void 0===h?{}:h,v=o.channels_priority,b=void 0===v?{}:v,g=o.is_open,_=void 0===g?[]:g,y=o.starred,j=void 0===y?[]:y;var N=_.reduce(function(e,t){e[t]=true;return e},{});var A=j.reduce(function(e,t){e[t]=true;return e},{});var R=[];var M=[];var P=p.length;for(var x=0;x<P;x++){var D=p[x];var F=D.id;var L=m[F];var B=!!L;var U=f[F];var q=b[F];var G=!!A[F];var H=!!N[F];var W=Object(d["isMpim"])(D)?i()({},D,{is_member:B,latest:L,last_read:U,priority:q,is_starred:G,is_open:H}):i()({},D,{is_member:B,latest:L,last_read:U,priority:q,is_starred:G});(D.is_group?R:M).push(W)}o.groups=R;o.channels=M}delete o.users;delete o.updated_users;delete o.updated_bots;o.bots=[];if(Object(C["isFeatureEnabled"])(s,"feature_legacy_cfm")){o.users=[c];return Promise.resolve(o)}var V=void 0;var z=Object(C["getFromBootData"])(s,"file");if(z){var Q=l.a.map(z.comments||[],"user");V=Q.concat(z.user)}var K=void 0;var Y=void 0;if(!Object(S["a"])()){K=l.a.map(Object(E["getAllMembers"])(s),"id");Y=l.a.map(Object(w["getAllChannels"])(s),"id")}var J=l()([u]).concat(V).concat(K).uniq().compact().value();var Z=l.a.difference(Y,l.a.keys(m));if(!J.length&&!Z.length){Object(k["d"])(123)&&n.info("Got rtm.start data and don't need to fetch anything");o.users=[];return Promise.resolve(o)}Object(k["d"])(123)&&n.info("Got rtm.start data but need to fetch "+J.length+" members and "+Z.length+" channels");if(Object(k["d"])(1989)){n.info(J.join(", "));n.info(Z.join(", "))}I(e,t,J).catch(function(e){n.error("Got error while trying to fetch "+J.length+" members for runaway start data :(",e);n.info("Members we were trying to fetch: "+J.join(", "))});T(e,t,Z).catch(function(e){n.error("Got error while trying to fetch "+Z.length+" channels for runaway start data :(",e);n.info("Channels we were trying to fetch: "+Z.join(", "))});o.users=[c];return Promise.resolve(o)});return function(t,r,a){return e.apply(this,arguments)}}());j.propTypes={startData:u["b"].object.isRequired};function I(e,t,r){return e(Object(p["d"])({ids:r})).catch(function(t){Object(k["a"])("infra/boot/data: Got error from fetchMembersById; falling back to version with API fallback. Error: "+t+". Stack: "+t.stack);var a="infra/boot/data: fetchMembersById failed";return e(Object(y["g"])({ids:r,reason:a})).then(function(e){var t=e.members;return{objects:t}})}).tap(function(){return b()}).tap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.objects;return Object(g["h"])(t)})}function T(e,t,r){return e(Object(p["b"])({ids:r})).catch(function(t){Object(k["a"])("infra/boot/data: Got error from fetchChannelsById; falling back to version with API fallback. Error: "+t+". Stack: "+t.stack);var a="infra/boot/data: fetchChannelsById failed";return e(Object(_["k"])({ids:r,reason:a})).then(function(e){var t=e.channels;return{objects:t}})}).tap(function(){return b()}).tap(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.objects;return e(Object(w["upsertChannels"])({channels:r}))})}var N=Object(c["b"])("Fetch start data",function(){var e=Object(s["method"])(function(e){return e(f()).then(function(t){return e(j({startData:{rtm_start:t}}))})});return function(t){return e.apply(this,arguments)}}());N.propTypes={};var A=r(51);Object(A["a"])("interop.boot",{data:a})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(129);var s=r(77);var o=r(31);var l=r(5);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var m=r.n(p);var h=r(8);var f=r.n(h);var v=r(14);var b=r(2);var g=r(11);var _=r(10);var y=r(760);var k=r(20);var O=r(103);var E=r(151);var w=r(1414);var C=new _["b"]("prefs");var S=function(e){f()(t,e);function t(e){c()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.closeAndOpenPreferences=r.closeAndOpenPreferences.bind(r);return r}d()(t,[{key:"closeAndOpenPreferences",value:function e(){this.props.onClose();Object(y["a"])("notifications")}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.channelId,i=r.onClose,s=r.featureTurnMpdmNotifsOn;if(!s)return null;var o=n.a.createElement(E["a"],{channelId:a,inline:true});var l=n.a.createElement("span",null,C.rt("Notification Preferences: {displayName}",{displayName:o}));var c=n.a.createElement("span",null,C.rt("Set your default notifications settings in your <Button>Account Preferences</Button>",null,function(e){var r=e.text;return n.a.createElement(k["a"],{type:"link",onClick:t.closeAndOpenPreferences},r)}));var u={title:l,contentLabel:C.t("Notification Preferences"),showCancelButton:false,goButtonText:C.t("Done"),onGo:i,onCancel:i,footerText:c};return n.a.createElement(O["a"],u,n.a.createElement(w["a"],{channelId:a,onClose:i}))}}]);return t}(a["PureComponent"]);S.displayName="ChannelNotificationSettingsDialog";S.defaultProps={onClose:b["noop"],featureTurnMpdmNotifsOn:false};function j(e){return{featureTurnMpdmNotifsOn:Object(g["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")}}var I=Object(v["connect"])(j)(S);var T=Object(o["b"])("Open channel notification settings dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=n.a.createElement(I,r);e(Object(s["openModal"])({element:a}))});T.propTypes={channelId:i["b"].string.isRequired};var N=T;var A=r(51);Object(A["a"])("interop.openChannelNotificationSettingsDialog",function(e){return TS.redux.dispatch(N(e))})},function(e,t,r){"use strict";r.r(t);var a=window.navigator&&"function"===typeof window.navigator.sendBeacon;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiUrl,r=e.method,n=e.token,i=e.args,s=void 0===i?{}:i,o=e.versionTs,l=void 0===o?"":o,c=e.versionUid,u=void 0===c?"":c;var d=false;var p=""+t+r+"?_x_id="+u.substring(0,8)+"-"+Date.now()/1e3;var m=new FormData;m.append("token",n);Object.keys(s).forEach(function(e){return m.append(e,s[e])});if(a)d=navigator.sendBeacon(p,m);else{var h=new XMLHttpRequest;h.addEventListener("load",function(){var e=h.readyState,t=h.status,r=h.DONE;e===r&&200===t&&(d=true)});h.open("POST",p,true);h.setRequestHeader("X-Slack-Version-Ts",l);h.send(m)}return d}var i=r(51);Object(i["a"])("interop.beaconApiCall",n)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(901);var d=function e(t,r){if(!t)throw new Error("mountModalContainer must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(u["a"],null)),r)};var p=function e(t){s.a.unmountComponentAtNode(t)};var m={mountModalContainer:d,unmountModalContainer:p};var h=r(51);Object(h["a"])("interop.modalContainer",{mountModalContainer:d,unmountModalContainer:p})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(17);var i=Object(n["b"])();function s(){i.info("Greetings Earth!")}function o(){i.info("\ud83d\udc7d")}Object(a["a"])("interop.greetingsEarth",{greet:s,takeMeToYourLeader:o})},function(e,t,r){"use strict";r.r(t);var a=r(67);var n=r.n(a);var i=r(2);var s=r(26);var o=r(704);var l=r(2802);var c=r(3344);var u=r(619);var d=r(23);var p=r(21);var m=r(11);var h=r(79);var f=r(257);var v=r(16);var b=r(245);var g=r(326);function _(e,t){var r=Object(g["e"])(e);var a=Object(g["e"])(t);return Object(b["a"])(r,a)}var y=r(51);function k(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var r=TS.redux.getState();var a=Object(s["getMemberById"])(r,t);if(!a)return null;if(a.isUnknown)return null;if(a.isNonExistent)return null;return a}function O(e){return Object(i["isString"])(e)?k(e):e}function E(e){return Object(o["b"])(TS.redux.getState(),e)}function w(e){return TS.redux.dispatch(Object(f["a"])(e))}function C(e){return TS.redux.dispatch(Object(f["d"])(e))}function S(e){return TS.redux.dispatch(Object(f["c"])(e))}function j(e){return TS.redux.dispatch(Object(c["a"])(e))}function I(e){return TS.redux.dispatch(Object(l["a"])(e))}function T(e){var t=TS.redux.getState();var r=Object(d["getTeamId"])(t);Object(u["b"])(r,e)}function N(e){var t=TS.redux.getState();var r=Object(d["getTeamId"])(t);return Object(u["a"])(r,e)}function A(){return Object(u["d"])()}function R(e){var t=TS.redux.getState();var r=Object(i["uniq"])(e);var a=Object(i["partition"])(r,function(e){return Object(s["hasMemberWithId"])(t,e)}),o=n()(a,2),l=o[0],c=o[1];var u=l.map(function(e){return Object(s["getMemberById"])(t,e)});var d=Object(m["isLegacyCallsApp"])(t)&&!Object(h["isConnecting"])(t);if(d||!Object(m["useSocket"])(t))return TS.redux.dispatch(Object(f["b"])({ids:c,reason:"ensureMembersArePresent isEarlyCallsBoot"})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resolved;return u.concat(t)});return TS.redux.dispatch(Object(f["a"])({ids:c,reason:"ensureMembersArePresent"})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resolved;return u.concat(t)})}Object(y["a"])("interop.members",{getMemberById:k,shouldDisplayRealNames:function e(){return Object(p["shouldDisplayRealNames"])(TS.redux.getState())},getUserHighlightWords:function e(){return Object(p["getUserHighlightWords"])(TS.redux.getState())},getPrefCompliantMemberName:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["getPrefCompliantMemberName"].apply(void 0,[TS.redux.getState()].concat(r))},getPrefCompliantMemberNameById:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["getPrefCompliantMemberNameById"].apply(void 0,[TS.redux.getState()].concat(r))},getPrefCompliantMemberNameLowerCase:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return v["getPrefCompliantMemberNameLowerCase"].apply(void 0,[TS.redux.getState()].concat(r))},getMemberByName:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["getMemberByName"].apply(void 0,[TS.redux.getState()].concat(r))},memberExistsWithName:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["memberExistsWithName"].apply(void 0,[TS.redux.getState()].concat(r))},getAllMembers:function e(){return Object(s["getAllMembers"])(TS.redux.getState())},isAppmin:function e(){return Object(s["isAppmin"])(TS.redux.getState())},isExternal:v["isExternal"],isExternalById:function e(t){return Object(v["isExternalById"])(TS.redux.getState(),t)},isMember:v["isMember"],isMemberOnTeam:v["isMemberOnTeam"],fetchMemberProfileExtras:function e(t,r){return TS.redux.dispatch(Object(f["e"])({userId:t,keys:r}))},memberSorterByName:_,getMemberCurrentStatus:s["getMemberCustomStatus"],getMemberMentionName:v["getMemberMentionName"],getMemberMentionRegExp:v["getMemberMentionRegExp"],getMemberRealName:function e(t){return Object(v["getMemberRealName"])(O(t))},getMemberRealNameLowerCase:function e(t){return Object(v["getMemberRealNameLowerCase"])(O(t))},getMemberProfileFieldDisplayName:function e(t){return Object(v["getMemberProfileFieldDisplayName"])(O(t))},getMemberProfileFieldDisplayNameLowerCase:function e(t){return Object(v["getMemberProfileFieldDisplayNameLowerCase"])(O(t))},getMemberSecondaryName:function e(t){return Object(v["getMemberSecondaryName"])(TS.redux.getState(),O(t))},ensureMembersArePresent:R,processMemberForUpserting:E,fetchAndUpsertMembersById:w,fetchAndUpsertMembersWithQuery:C,fetchAndUpsertMembersFromFlannel:S,markObjectsAsFresh:T,isObjectFresh:N,pauseRefetch:A,updateCurrentMemberPresence:I,updateCurrentMemberProfile:j})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(62);var d=r(759);var p=function e(t,r,a){if(!t)throw new Error("mountCustomStatusInput must be called with a teamId parameter");var i="react_custom_status_input_render";Object(u["e"])(i+"_mark");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(d["c"],a)),r,function(){return Object(u["g"])(i,i+"_mark")})};var m=s.a.unmountComponentAtNode;var h=r(51);Object(h["a"])("interop.mountCustomStatusInput",p);Object(h["a"])("interop.unmountCustomStatusInput",m)},function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r(164);var i=r(17);var s=r(2781);var o=Object(i["b"])();function l(){return new Promise(function(e){Object(s["a"])("experiments.getByVisitor",{},function(t,r){t&&r.assignments&&h(r.assignments);e(t)})})}function c(e){if(void 0===e){o.warn("fetchLeadAssignments requires a leadId");return Promise.resolve(false)}return new Promise(function(t){Object(s["a"])("experiments.getByLead",{lead_id:e},function(e,r){e&&r.assignments&&h(r.assignments);t(e)})})}function u(e){if(void 0===e){o.warn("fetchUserAssignments requires a token");return Promise.resolve(false)}return new Promise(function(t){Object(s["a"])("experiments.getByUser",{token:e},function(e,r){e&&r.assignments&&h(r.assignments);t(e)})})}var d={};var p={};function m(e){var t=d[e];if(!t)return null;t.log_exposures&&f(e,t);return t.group}function h(e){Object(a["forEach"])(e,function(e,t){Object(a["isEqual"])(p[t],e)||(p[t]=null);d[t]=e})}function f(e,t){if(!Object(a["isEqual"])(p[e],t)){Object(n["a"])().track("EXPERIMENT_EXPOSURE",{experiment_name:e,experiment_type:t.type,experiment_id:t.experiment_id,experiment_group:t.group,experiment_trigger:t.trigger,exposure_id:t.exposure_id});p[e]=t}}var v=r(51);Object(v["a"])("interop.experiments_unauthed",{fetchLeadAssignments:c,fetchVisitorAssignments:l,fetchUserAssignments:u,getGroup:m})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(1419);function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountFileUploadBanner must be called with a teamId parameter");var a=Object(c["d"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(u["a"],r)),t)}function p(e){s.a.unmountComponentAtNode(e)}var m=r(51);Object(m["a"])("interop.mountFileUploadBanner",d);Object(m["a"])("interop.unmountFileUploadBanner",p)},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(104);var o=r.n(s);var l=r(139);var c=r(33);var u=r(1394);var d=function e(t,r,a){if(!t)throw new Error("mountToast must be called with a teamId parameter");var s=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(u["a"],a)),r)};var p=function e(t){o.a.unmountComponentAtNode(t)};var m={mountTermsOfService:d,unmountTermsOfService:p};var h=r(51);Object(h["a"])("interop.mountTermsOfService",d);Object(h["a"])("interop.unmountTermsOfService",p)},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(14);var f=r(2);var v=r.n(f);var b=r(78);var g=r(26);var _=r(150);var y=r(16);var k=r(352);var O=r(72);var E=r(265);var w=r(369);var C=r(1119);var S={file:O["a"].File(["name","permalink"]).isRequired,followup:d["b"].bool,userId:d["b"].string,userName:d["b"].string,previewFile:d["b"].func};var j={followup:false,userId:null,userName:null,previewFile:f["noop"]};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.previewFile=r.previewFile.bind(r);r.onUserClick=r.onUserClick.bind(r);return r}s()(t,[{key:"onUserClick",value:function e(t){if(Object(k["a"])(t))return;t.preventDefault();Object(w["a"])(t,this.props.file.user)}},{key:"previewFile",value:function e(t){if(Object(k["a"])(t))return;t.preventDefault();this.props.previewFile({fileId:this.props.file.id})}},{key:"renderUserLink",value:function e(){var t=this.props,r=t.userId,a=t.userName;return m.a.createElement("a",{className:"c-message__file_meta_user member",href:"/team/"+r,"data-member-id":r,onClick:this.onUserClick},a)}},{key:"renderFileLink",value:function e(){var t=this.props.file;return m.a.createElement("a",{className:"c-message__file_link file_preview_link",href:t.permalink,"data-file-id":t.id,onClick:this.previewFile},m.a.createElement(E["c"],{file:t}))}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.followup,n=t.userId,i=t.userName;var s=Object(C["a"])({plainText:false,isFollowup:a,fileMode:r.mode,fileLink:this.renderFileLink(),userId:n,userName:i,userLink:this.renderUserLink()});return m.a.createElement("span",{className:"c-message__file_meta"},s)}}]);return t}(p["PureComponent"]);I.displayName="FileCommentMeta";I.defaultProps=j;var T=function e(t,r){var a=r.fileId,n=r.comment;if(!a||!n)return{};var i=Object(b["getFileById"])(t,a);if(!i)return{};if(i.user===n.user)return{file:i};var s=i.user;var o=Object(g["getMemberById"])(t,s);return{file:i,userId:s,userName:Object(y["getPrefCompliantMemberName"])(t,o)}};t["a"]=Object(h["connect"])(T,{previewFile:_["c"]})(I)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(1393);function c(e,t,r){if(!e)throw new Error("mountPricingCalculator must be called with a teamId parameter");var a=Object(o["d"])(e);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(l["a"],r)),t)}var u=r(51);Object(u["a"])("interop.mountPricingCalculator",c)},function(e,t,r){"use strict";r.r(t);var a=r(9);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(129);var l=r(2);var c=r(77);var u=r(31);var d=r(29);var p=r(164);var m=r(26);var h=r(16);var f=r(375);var v=r(11);var b=r(1146);var g="APP_CHANNEL_REMOVE_DIALOG";var _=Object(u["b"])("Removes app from channel",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.appUser,i=r.appUserId,o=r.channelId,u=r.onError,_=void 0===u?l["noop"]:u,y=r.onConfirm,k=r.referringEventId,O=r.referringUiContext,E=r.sendEphemeralErrorMessage,w=void 0!==E&&E;var C=k;var S=O;var j=t();var I=Object(v["isFeatureEnabled"])(j,"feature_wta_add_remove_m11n");var T=I?Object(m["getMemberById"])(j,i):a;var N=Object(p["a"])({state:j});var A=function e(t){var r,a;var i=n()({},d["p"].action,t);N.track(g,n()({contexts:(a={},n()(a,d["b"].ui_context,i),n()(a,d["b"].referring_ui_context,S),n()(a,d["b"].core,(r={},n()(r,d["c"].app_id,Object(h["getAppIdFromMember"])(T)),n()(r,d["c"].channel_id,o),r)),a)},d["b"].referring_event_id,C));C=g;S=i};var R={appName:Object(h["getMemberRealName"])(T),channelId:o,onConfirm:function t(){A(d["o"].OK);return I?e(Object(f["h"])({appUserId:i,channelId:o,sendEphemeralErrorMessage:w})).catch(_):y()},onCancel:function e(){A(d["o"].CLOSE)}};var M=s.a.createElement(b["a"],R);e(Object(c["openModal"])({element:M}));A(d["o"].IMPRESSION)});_.propTypes={appUserId:o["b"].string,appUser:o["b"].object,channelId:o["b"].string.isRequired,onConfirm:o["b"].func,onError:o["b"].func,referringEventId:o["b"].string,referringUiContext:o["b"].object,sendEphemeralErrorMessage:o["b"].bool};var y=_;var k=r(51);Object(k["a"])("interop.removeAppFromChannel",function(e){return TS.redux.dispatch(y(e))})},function(e,t,r){"use strict";r.r(t);var a=r(32);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(104);var l=r.n(o);var c=r(14);var u=r(139);var d=r(33);var p=r(742);var m=function e(t,r,a){if(!t)throw new Error("mountScrollbar must be called with a teamId parameter");var i=Object(d["d"])(t);var o=a.safeHtml,l=n()(a,["safeHtml"]);Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(p["b"],l,s.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}))),r)};var h=function e(t){l.a.unmountComponentAtNode(t)};var f={mountScrollbar:m,unmountScrollbar:h};var v=r(51);Object(v["a"])("interop.mountScrollbar",m);Object(v["a"])("interop.unmountScrollbar",h)},function(e,t,r){"use strict";var a=r(129);var n=r(2);var i=r(31);var s=r(813);var o=r(653);var l=r(25);var c=r(22);var u=Object(c["a"])("Fetch a list of Slash Commands",function(e){return e(Object(l["a"])({method:"commands.list",SET_ACTIVE:false})).then(function(e){return e&&{commands:e.commands,cacheTs:e.cache_ts}})});var d=Object(i["b"])("Load local and remote Slash commands into Redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.resetPreviousCommands,i=void 0!==a&&a;e(Object(o["bulkAddLocalCommands"])({commands:Object(s["a"])()}));e(u()).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.commands;if(i){e(Object(o["resetCommands"])());e(Object(o["bulkAddLocalCommands"])({commands:Object(s["a"])()}));e(Object(o["bulkAddServerCommands"])({commands:Object(n["values"])(r)}))}else e(Object(o["bulkAddServerCommands"])({commands:Object(n["values"])(r)}))})});d.propTypes={resetPreviousCommands:a["b"].bool};var p=t["a"]=d},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(129);var s=r(31);var o=r(704);var l=r(225);var c=r(11);var u=r(257);var d=r(107);var p=r(17);var m=r(326);var h=Object(s["b"])("Updates the profile of the currently authenticated user",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.profile;return e(Object(u["j"])({profile:a})).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.profile;if(Object(c["isFeatureEnabled"])(t(),"feature_degraded_send")){var i=Object(l["b"])(t());var s=n()({},i,{profile:a});Object(d["a"])()?e(Object(o["a"])({members:[s]})):Object(m["f"])(s)}}).catch(function(e){var r=Object(p["a"])({getState:t});r.error("Error submitting member profile change: "+e)})});h.propTypes={profile:i["b"].object.isRequired};t["a"]=h},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(661);var c=function e(t,r,a){if(!t)throw new Error("mountLazyFilterSelect must be called with a teamId parameter");var c=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(l["a"],a)),r)};var u=c;var d=r(51);Object(d["a"])("interop.mountLazyFilterSelect",u)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(1436);function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountThreadDragOverlay must be called with a teamId parameter");var a=Object(c["d"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(u["a"],r)),t)}function p(e){s.a.unmountComponentAtNode(e)}var m=r(51);Object(m["a"])("interop.mountThreadDragOverlay",d);Object(m["a"])("interop.unmountThreadDragOverlay",p)},function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r.n(a);function i(e){if(e._last_query!==e.query)return true;if(e._last_include_org!==e.include_org)return true;if(n.a.xor(e._last_org_team_ids,e.org_team_ids).length)return true;return false}var s=r(3491);var o=r(797);var l=r(51);Object(l["a"])("interop.searcher",{isNewMemberSearch:i,emojiSkiplist:s["a"],search:o["a"]})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(104);var l=r.n(o);var c=r(14);var u=r(139);var d=r(33);var p=r(62);var m=r(188);var h=r(54);var f=function e(t,r,a,i){if(!t)throw new Error("mountMenu must be called with a teamId parameter");var o=function e(){return r};var l="react_menu_render";Object(p["e"])(l+"_mark");Object(u["a"])(s.a.createElement(c["Provider"],{store:Object(d["d"])(t)},s.a.createElement(m["a"],n()({},i,{parentSelector:o,shouldFade:false}),s.a.createElement(h["a"],a))),r,function(){return Object(p["g"])(l,l+"_mark")})};var v=l.a.unmountComponentAtNode;var b={mountMenu:f,unmountMenu:v};var g=r(51);Object(g["a"])("interop.mountMenu",f);Object(g["a"])("interop.unmountMenu",v)},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(1);var i=r.n(n);var s=r(14);var o=r(139);var l=r(33);var c=r(427);var u=r(188);function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isOpen:false};if(!e)throw new Error("mountMessageActionsMenu must be called with a teamId parameter");Object(o["a"])(i.a.createElement(s["Provider"],{store:Object(l["d"])(e)},i.a.createElement(u["a"],a,a.isOpen?i.a.createElement(c["a"],r):i.a.createElement("span",null))),t)}var p=d;var m=r(70);Object(a["a"])("interop.mountMessageActionsMenu",p);Object(a["a"])("interop.mountMessageActionsMenu.actionIds",m["SLACK_ACTION_IDS"])},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(817);var d=r(358);var p=function e(t,r,a,i){if(!t)throw new Error("mountTooltipTip must be called with a teamId parameter");var s=Object(c["d"])(t);a?Object(l["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i,n.a.createElement(d["a"],{id:a,size:"small",showAvatar:true,useDarkMode:true,showPresence:true,forcedPrimary:"real_name"}))),r):Object(l["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i)),r)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h={mountTooltipTip:p,unmountTooltipTip:m};var f=r(51);Object(f["a"])("interop.mountTooltipTip",p);Object(f["a"])("interop.unmountTooltipTip",m)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(104);var o=r.n(s);var l=r(139);var c=r(33);var u=r(1396);var d=function e(t,r){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(u["f"],null)),r)};var p=function e(t){o.a.unmountComponentAtNode(t)};var m=r(51);Object(m["a"])("interop.mountUserGroupsFlexpane",d);Object(m["a"])("interop.unmountUserGroupsFlexpane",p)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(104);var o=r.n(s);var l=r(139);var c=r(33);var u=r(3274);var d=function e(t,r,a){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var s=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(u["a"],a)),r)};var p=function e(t){o.a.unmountComponentAtNode(t)};var m=r(51);Object(m["a"])("interop.mountUserGroupsList",d);Object(m["a"])("interop.unmountUserGroupsList",p)},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(707);var i=r(802);var s=r(856);var o=r(857);var l=r(2);var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,r=e.prefix,a=e.suffix;if(!t)return t;var n=t;if(r&&!Object(l["startsWith"])(n,r)){var i=n.search(/\S/);n=i>0?n.slice(0,i)+r+n.slice(i):r+n}if(a&&!Object(l["endsWith"])(n,a)){var s=n.search(/\s+$/);s>0?n=n.slice(0,s)+a+n.slice(s):n+=a}return n};var u=r(937);var d=r(310);Object(a["a"])("interop.format",{formatBroadcastCommand:n["a"],formatChannelName:i["a"],formatTeamName:s["a"],locateHighlightWords:o["a"],surroundTextWith:c,replaceUnicodeDoppelgangers:u["a"],cleanMessageTextWithState:d["b"]})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(1391);var d=function e(t,r){if(!t)throw new Error("mountBannerContainer must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(u["a"],null)),r)};var p=function e(t){s.a.unmountComponentAtNode(t)};var m=r(51);Object(m["a"])("interop.mountMessagePaneBanner",d);Object(m["a"])("interop.unmountMessagePaneBanner",p)},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(21);var i=r(461);var s=r(2);var o=r(937);var l=/[,\uff0c\u3001]/;function c(e){if(!Object(s["isString"])(e))return"";return Object(o["a"])(e).split(l).map(s["trim"]).filter(s["identity"]).join(",")}var u=r(240);Object(a["a"])("interop.prefs",{getHighlightWords:function e(){var t=TS.redux.getState();return Object(n["getUserHighlightWords"])(t)},getUserGroupHighlightById:i["d"],cleanHighlightWords:c,setUserPrefByApi:u["c"],getUserPref:n["getUserPref"]})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return o});r.d(t,"b",function(){return l});r.d(t,"c",function(){return c});var a=r(206);var n=r(69);var i=r(77);var s=r(37);var o={MESSAGE_PANE:"message_pane",WINDOW_NOT_FOCUSED:"window_not_focused",WORKSPACE_NOT_FOCUSED:"workspace_not_focused",MODAL:"fs_modal_is_showing",SEARCH:"universal_search_is_showing"};function l(e){if(!Object(n["isWorkspaceFocused"])(e))return o.WORKSPACE_NOT_FOCUSED;if(!Object(a["isWindowFocused"])(e))return o.WINDOW_NOT_FOCUSED;if(Object(i["isModalOpen"])(e))return o.MODAL;if(Object(s["getVisible"])(e))return o.SEARCH;return o.MESSAGE_PANE}function c(e){return l(e)===o.MESSAGE_PANE}},function(e,t,r){"use strict";var a=r(129);var n=r(2);var i=r.n(n);var s=r(31);var o=r(375);var l=r(1128);var c=r(72);var u="APP_CHANNEL_ADD_DIALOG";var d=Object(s["b"])("Adds app to channel",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.appUserId,i=r.channelId,s=r.inviteMessageTs,c=r.onError,d=void 0===c?n["noop"]:c,p=r.referringEventId,m=r.referringUiContext,h=r.scopeInfo,f=r.sendEphemeralErrorMessage,v=void 0!==f&&f;var b=h?Promise.resolve(h):e(Object(o["a"])({appUserId:a,channelId:i,didConfirm:false,sendEphemeralErrorMessage:v}));b.then(function(t){e(Object(l["a"])({appUserId:a,channelId:i,eventId:u,onAuthorize:function t(){return e(Object(o["a"])({appUserId:a,channelId:i,didConfirm:true,inviteMessageTs:s,sendEphemeralErrorMessage:v})).catch(d)},onDismiss:function t(){return e(Object(o["b"])({appUserId:a,channelId:i,inviteMessageTs:s}))},referringEventId:p,referringUiContext:m,scopeInfo:t}))})});d.propTypes={appUserId:a["b"].string.isRequired,channelId:a["b"].string.isRequired,inviteMessageTs:a["b"].string,onError:a["b"].func,referringEventId:a["b"].string,referringUiContext:a["b"].object,scopeInfo:a["b"].arrayOf(c["a"].ScopeInfo),sendEphemeralErrorMessage:a["b"].bool};t["a"]=d},function(e,t,r){"use strict";r.r(t);var a=r(3407);var n=r(51);Object(n["a"])("interop.addAppToChannel",function(e){return TS.redux.dispatch(Object(a["a"])(e))})},,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(5);var d=r.n(u);var p=r(6);var m=r.n(p);var h=r(7);var f=r.n(h);var v=r(8);var b=r.n(v);var g=r(129);var _=r(2);var y=r(11);var k=r(10);var O=r(167);var E=r(3303);var w=r(715);var C=r(18);var S=r(344);var j=r(54);var I=r(20);var T=r(2086);var N=r(673);var A=r(884);var R=r(358);var M=r(2232);var P=new k["b"]("member_directory");var x={memberIds:g["b"].arrayOf(g["b"].string),scrollmark:g["b"].shape({key:g["b"].string,offset:g["b"].number}),searchQuery:g["b"].string,filter:g["b"].string,fetchMembersPost:g["b"].func,saveScrollmark:g["b"].func,nonExactMatchMemberIds:g["b"].arrayOf(g["b"].string),isEnterprise:g["b"].bool,featureSonicMemberDirectory:g["b"].bool};var D={memberIds:[],scrollmark:void 0,searchQuery:void 0,filter:"everyone",fetchMembersPost:_["noop"],saveScrollmark:_["noop"],onMemberClick:_["noop"],nonExactMatchMemberIds:[],isEnterprise:false,featureSonicMemberDirectory:false};var F=100;var L=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(r,["onMemberClick","onScroll","setListRef","fetchPost","fetchAround","fetchMembers","fetchNonExactMatchMembers","renderRow","getListKeys"]);r.requestPost=null;r.requestNonExactMatchMembers=null;r.keys=null;r.list=null;r.layout=new A["a"];r.state={reachedEnd:false};r.debouncedFetchPost=Object(_["debounce"])(r.fetchPost,F);return r}m()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,r=t.key,a=t.offset;this.layout.setAnchor(r,a);this.props.saveScrollmark(null)}},{key:"componentDidUpdate",value:function e(t){var r=this.props,a=r.searchQuery,n=r.filter;if(t.searchQuery===a&&t.filter===n)return;this.requestPost&&this.requestPost.cancel();this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel();this.requestPost=null;this.requestNonExactMatchMembers=null;this.state.reachedEnd&&this.setReachedEnd(false);this.layout&&this.layout.setAnchor(false)}},{key:"onMemberClick",value:function e(t,r){if(!this.list)return;if(!r)return;this.props.saveScrollmark({key:r,offset:this.layout.getOffsetForKey(r)-this.list.getScrollTop()})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setReachedEnd",value:function e(t){this.setState(function(){return{reachedEnd:t}})}},{key:"setListRef",value:function e(t){this.list=t}},{key:"getListKeys",value:function e(){return this.props.memberIds.filter(function(e){return"L"!==e[0]})}},{key:"getFilterLabel",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;var t=this.props,r=t.filter,a=t.isEnterprise;switch(r){case"everyone":return P.t("members");case"admins":return a?P.t("workspace admins"):P.t("admins");case"bots":return P.t("bots");case"org_members":return P.t("members");case"org_admins":return P.t("org admins");case"guests":return P.t("guests");case"deactivated":return P.t("deactivated members");default:return P.t("members")}}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.fetchMembers();return this.requestPost.finally(function(){t.requestPost=null})}},{key:"fetchMembers",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.fetchMembersPost({isNonExactMatchMembersSearch:r}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.nextMarker,a=e.members;!t.props.searchQuery&&r||t.setReachedEnd(true);0===a.length&&"everyone"!==t.props.filter&&t.fetchNonExactMatchMembers()})}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.debouncedFetchPost()}},{key:"fetchNonExactMatchMembers",value:function e(){var t=this;if(this.requestNonExactMatchMembers)return false;var r=true;this.requestNonExactMatchMembers=this.fetchMembers(r);return this.requestNonExactMatchMembers.finally(function(){t.requestNonExactMatchMembers=null})}},{key:"renderRow",value:function e(t){if(!this.props.featureSonicMemberDirectory)return null;var r=this.keys[t];if(!r)return null;switch(r[0]){case"L":return n.a.createElement("div",{className:"p-member-directory__loading"},P.t("Loading\u2026"));default:return this.renderMember(r)}}},{key:"renderMember",value:function e(t){return n.a.createElement("span",{className:"p-member_directory__member_row"},n.a.createElement(R["a"],{id:t,size:"medium"}))}},{key:"renderEmptyListView",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;var t=this.props,r=t.searchQuery,a=t.nonExactMatchMemberIds;var i=this.getFilterLabel();var s=void 0;if(a.length){s=P.rt("No {filterLabel} matching <strong>{searchQuery}</strong> but there are other members who do",{searchQuery:r,filterLabel:i});return n.a.createElement("div",{className:"p-member-directory__empty_list"},n.a.createElement("span",null,s))}s=P.rt("No {filterLabel} matching <strong>{searchQuery}</strong>",{searchQuery:r,filterLabel:i});return n.a.createElement("div",{className:"p-member-directory__empty_list"},n.a.createElement("span",null,s))}},{key:"render",value:function e(){var t=this;this.keys=this.getListKeys();if(!this.keys.length&&this.state.reachedEnd)return this.renderEmptyListView();this.state.reachedEnd||this.keys.push("Loading"+this.keys.length);return n.a.createElement("div",{className:"p-member_directory__member_list"},n.a.createElement(T["a"],null,function(e){var r=e.width,a=e.height;return n.a.createElement(N["a"],{width:r,height:a,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.setListRef,loadAround:t.fetchAround,loadPost:t.debouncedFetchPost})}))}}]);return t}(a["PureComponent"]);L.displayName="SearchableMemberList";L.defaultProps=D;var B=Object(o["connect"])(function(e){return{scrollmark:Object(E["getScrollmark"])(e),searchQuery:Object(E["getSearchQuery"])(e),filter:Object(E["getFilter"])(e),memberIds:Object(E["getFlexpaneMemberIds"])(e),nonExactMatchMemberIds:Object(E["getFlexpaneNonExactMatchMemberIds"])(e),isEnterprise:Object(y["pageNeedsEnterprise"])(e),featureSonicMemberDirectory:Object(y["isFeatureEnabled"])(e,"feature_sonic_member_directory")}},{fetchMembersPost:E["fetchMembersPost"],saveScrollmark:E["saveScrollmark"],setSearchQuery:E["setSearchQuery"],setFilter:E["setFilter"]})(L);var U=r(24);var q=r.n(U);var G=r(50);var H=r(170);var W=r(48);var V=r(2234);var z=new k["b"]("member_directory");var Q={featureSonicMemberDirectory:g["b"].bool,isEnterprise:g["b"].bool,selectedFilter:g["b"].string,onMenuItemSelected:g["b"].func,workspaceName:g["b"].string,enterpriseOrgName:g["b"].string,externalWorkspaces:g["b"].array};var K={featureSonicMemberDirectory:false,isEnterprise:false,selectedFilter:void 0,onMenuItemSelected:_["noop"],workspaceName:void 0,enterpriseOrgName:void 0,externalWorkspaces:[]};var Y={everyone:"everyone",orgMembers:"org_members",orgAdmins:"org_admins",workspaceMembers:"members",workspaceAdmins:"admins",bots:"bots",guests:"guests",deactivatedMembers:"deactivated"};var J=function(e){b()(t,e);m()(t,null,[{key:"menuSeparator",value:function e(){return{type:"separator"}}}]);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.memberDirectoryStrings=r.props.featureSonicMemberDirectory?{everyone:z.t("Everyone"),org_members:z.t("All Members"),org_admins:z.t("Org Admins"),members:z.t("All Members"),admins:r.props.isEnterprise?z.t("Workspace Admins"):z.t("Admins"),bots:z.t("Bots"),guests:z.t("Guests"),deactivated:z.t("Deactivated accounts")}:null;return r}m()(t,[{key:"getLabel",value:function e(t){return this.memberDirectoryStrings[t]}},{key:"getWorkspaceSectionLabel",value:function e(){var t=this.props,r=t.isEnterprise,a=t.externalWorkspaces,n=t.workspaceName,i=t.featureSonicMemberDirectory;if(!i)return null;var s=a.length>0;if(r)return z.t("{workspaceName} (current workspace)",{workspaceName:n});return s?n:""}},{key:"buildMenuItemTemplate",value:function e(t){var r=this.props,a=r.selectedFilter,i=r.onMenuItemSelected;var s=n.a.createElement(C["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var o="p-member_directory_menu--selected-item";return{label:this.getLabel(t),click:function e(){return i(t)},icon:a===t?s:null,className:a===t?o:""}}},{key:"maybeBuildOrgFilterSection",value:function e(){var r=this.props,a=r.isEnterprise,n=r.enterpriseOrgName;if(!a)return[];var i={type:"header",label:n};return[t.menuSeparator(),i,this.buildMenuItemTemplate(Y.orgMembers),this.buildMenuItemTemplate(Y.orgAdmins)]}},{key:"buildWorkspaceFilterSection",value:function e(){var r=this.getWorkspaceSectionLabel();var a={type:"header",label:r};return[t.menuSeparator(),a,this.buildMenuItemTemplate(Y.workspaceMembers),this.buildMenuItemTemplate(Y.workspaceAdmins),this.buildMenuItemTemplate(Y.guests),this.buildMenuItemTemplate(Y.bots)]}},{key:"maybeBuildExternalWorkspaceSection",value:function e(){var r=this.props,a=r.workspaceName,i=r.externalWorkspaces,s=r.selectedFilter,o=r.onMenuItemSelected,l=r.featureSonicMemberDirectory;if(!l)return null;var c=i.length>0;var u=n.a.createElement(C["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var d="p-member_directory_menu--selected-item";if(!c)return[];var p=z.t("Outside {workspaceName}",{workspaceName:a});var m={type:"header",label:p};var h=i.map(function(e){var t=Object(W["getTeamId"])(e);return{label:Object(W["getTeamDisplayName"])(e),click:function e(){return o(t)},icon:s===t?u:null,className:s===t?d:""}});return[t.menuSeparator(),m].concat(q()(h))}},{key:"render",value:function e(){var r=this.props.featureSonicMemberDirectory;if(!r)return null;var a=[this.buildMenuItemTemplate(Y.everyone)].concat(q()(this.maybeBuildOrgFilterSection()),q()(this.buildWorkspaceFilterSection()),q()(this.maybeBuildExternalWorkspaceSection()),[t.menuSeparator(),this.buildMenuItemTemplate(Y.deactivatedMembers)]);return n.a.createElement(j["a"],{template:a})}}]);return t}(a["PureComponent"]);J.displayName="MemberDirectoryMenu";var Z=function e(t){var r=Object(G["getCurrentTeam"])(t);var a=Object(y["pageNeedsEnterprise"])(t);var n={featureSonicMemberDirectory:Object(y["isFeatureEnabled"])(t,"feature_sonic_member_directory"),workspaceName:Object(W["getTeamDisplayName"])(r),isEnterprise:a,externalWorkspaces:Object(G["getAllExternalTeams"])(t)};a&&(n.enterpriseOrgName=Object(H["getEnterpriseOrgName"])(t));return n};J.defaultProps=K;var X=Object(o["connect"])(Z)(J);var $=r(2236);var ee=new k["b"]("member_directory");var te={useGlobalNav:g["b"].bool,isEnterprise:g["b"].bool,setSearchQuery:g["b"].func,searchQuery:g["b"].string,setFilter:g["b"].func,filter:g["b"].string,featureSonicMemberDirectory:g["b"].bool};var re={useGlobalNav:false,isEnterprise:false,setSearchQuery:_["noop"],setFilter:_["noop"],searchQuery:"",filter:"everyone",featureSonicMemberDirectory:false};var ae=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(r,["onSearchInputChange","onMenuItemSelected","renderMenu"]);return r}m()(t,[{key:"onSearchInputChange",value:function e(t){var r=t.target.value||"";this.props.setSearchQuery(r)}},{key:"onMenuItemSelected",value:function e(t){this.props.setFilter(t)}},{key:"getHeaderLabel",value:function e(){var t=this.props,r=t.featureSonicMemberDirectory,a=t.isEnterprise;if(!r)return null;return a?ee.t("Organization Directory"):ee.t("Workspace Directory")}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;return n.a.createElement("div",{className:"p-member_directory__search"},n.a.createElement(S["a"],{value:this.props.searchQuery,onChange:this.onSearchInputChange,placeholder:ee.t("Search by name or title"),icon:"search"}))}},{key:"renderHeader",value:function e(){if(this.props.useGlobalNav)return null;return n.a.createElement(w["a"],null,n.a.createElement("span",{className:"p-member_directory__header"},this.getHeaderLabel()))}},{key:"renderMenu",value:function e(){return n.a.createElement(X,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter})}},{key:"renderFilterIconButton",value:function e(){return n.a.createElement(j["e"],{renderMenu:this.renderMenu,position:"bottom-left"},n.a.createElement(I["c"],{"data-qa":"p-member_directory_menu_trigger"},n.a.createElement(C["b"],{type:"filters"})))}},{key:"render",value:function e(){return n.a.createElement(n.a.Fragment,null,this.renderHeader(),n.a.createElement("div",{className:"p-member_directory__search_filter_container"},this.renderSearch(),this.renderFilterIconButton()),n.a.createElement(B,null))}}]);return t}(a["PureComponent"]);ae.displayName="MemberDirectoryFlexpane";ae.defaultProps=re;var ne=function e(t){return{featureSonicMemberDirectory:Object(y["isFeatureEnabled"])(t,"feature_sonic_member_directory"),useGlobalNav:Object(O["b"])(t),isEnterprise:Object(y["pageNeedsEnterprise"])(t),searchQuery:Object(E["getSearchQuery"])(t),filter:Object(E["getFilter"])(t)}};var ie={setSearchQuery:E["setSearchQuery"],setFilter:E["setFilter"]};var se=Object(o["connect"])(ne,ie)(ae);var oe=se;var le=function e(t,r){if(!t)throw new Error("mountMemberDirectoryFlexpane must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(oe,null)),r)};var ce=function e(t){s.a.unmountComponentAtNode(t)};var ue=r(51);Object(ue["a"])("interop.mountMemberDirectoryFlexpane",le);Object(ue["a"])("interop.unmountMemberDirectoryFlexpane",ce)},,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(1);var n=r.n(a);var i=r(14);var s=r(44);var o=function e(t,r){var a=r.ts,n=r.channelId;return{msg:Object(s["getMessageByTimestamp"])(t,n,a)}};function l(e){return Object(i["connect"])(o)(function(t){if(!t.msg)return null;return n.a.createElement(e,t)})}},,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(104);var o=r.n(s);var l=r(139);var c=r(33);var u=r(5);var d=r.n(u);var p=r(6);var m=r.n(p);var h=r(7);var f=r.n(h);var v=r(8);var b=r.n(v);var g=r(129);var _=r(2);var y=r(11);var k=r(715);var O=r(10);var E=new O["b"]("starred_items");var w={featureModernStarredItems:g["b"].bool.isRequired};var C={featureModernStarredItems:false};var S=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){if(!this.props.featureModernStarredItems)return null;return n.a.createElement(k["a"],null,E.t("Starred Items"))}}]);return t}(a["PureComponent"]);S.displayName="StarredItemsFlexpaneHeader";S.defaultProps=C;var j=function e(t){var r=Object(y["isFeatureEnabled"])(t,"feature_modern_starred_items");return{featureModernStarredItems:r}};var I=Object(i["connect"])(j)(S);var T=r(3);var N=r.n(T);var A=r(2086);var R=r(611);var M=r(673);var P=r(92);var x=r(3417);var D=r(15);var F=r.n(D);var L=r(860);var B=r(861);var U=r(862);var q=r(863);var G=r(36);var H=r(87);var W=r(3339);var V=r(2266);var z={msg:g["b"].object.isRequired};function Q(e){var t=e.msg;var r=t.file,a=t.files,i=t.comment,s=t.user;var o=r||a&&a[0];if(!Object(G["isFileComment"])(t))return null;if(!o||!i)return null;return n.a.createElement("span",{className:"c-message_kit__comment"},n.a.createElement(W["a"],{fileId:o,comment:i}),n.a.createElement("br",null),n.a.createElement(H["a"],{text:i.comment,memberId:s}))}Q.displayName="MessageFileComment";var K=r(1107);var Y=r(145);var J=r(322);var Z=r(323);var X=r(776);var $=r(2269);var ee={msg:g["b"].object.isRequired,reactions:g["b"].arrayOf(g["b"].shape(X["b"])),className:g["b"].string};var te={className:null,reactions:null};var re=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"getReactions",value:function e(){var t=this.props,r=t.msg,a=t.reactions;if(!a)return r.reactions;return a}},{key:"render",value:function e(){var t=this.getReactions();if(!t||0===t.length)return null;var r=Object(_["chain"])(t).sortBy("count").take(2).value();var a=Object(_["sumBy"])(t,"count");var i=null;a>0&&(i=n.a.createElement("span",{className:"c-message_kit__reaction_condensed__reactions_count"},1===a?a+" reaction":a+" reactions"));var s=F()(this.props.className,"c-message_kit__reaction_condensed c-message_kit__reaction_condensed--reactions");return n.a.createElement("div",{className:s},Object(_["map"])(r,function(e){return n.a.createElement(Y["b"],{text:":"+e.name+":",key:e.name,emojiSize:Y["a"].SMALL})}),i)}}]);return t}(n.a.PureComponent);re.displayName="CondensedReactionBar";re.defaultProps=te;var ae=function e(t,r){var a=r.msg;if(!a)return null;var n=Object(Z["b"])(a);return{reactions:Object(J["getReactionsForKey"])(t,n)}};var ne=Object(i["connect"])(ae)(re);var ie=r(18);var se=r(121);var oe=r(150);var le=r(2271);var ce={className:g["b"].string,msg:g["b"].shape({reply_count:g["b"].number,replies:g["b"].array}),showThread:g["b"].func.isRequired};var ue={className:"",msg:{replies:[],reply_count:0}};var de=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}m()(t,[{key:"onClick",value:function e(){var t=this.props.msg;var r=t.channel,a=t.ts;this.props.showThread({channelId:r,threadTs:a,origin:"starred_items"})}},{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.className;var i=F()(a,"c-message_kit__replies_count");if(Object(G["getReplyCount"])(r))return n.a.createElement(se["a"],{className:i,onClick:this.onClick},n.a.createElement(ie["b"],{type:"comment-alt"}),1===r.reply_count?r.reply_count+" reply":r.reply_count+" replies");return null}}]);return t}(a["PureComponent"]);de.displayName="CondensedReplyCount";de.defaultProps=ue;var pe={showThread:oe["g"]};var me=Object(i["connect"])(null,pe)(de);var he=r(864);var fe=r(977);var ve=r(865);var be=r(12);var ge=r(94);var _e=r(2273);var ye={msg:g["b"].object.isRequired,className:g["b"].string,channelName:g["b"].string.isRequired,featureModernStarredItemsFlexpane:g["b"].bool.isRequired,showThread:g["b"].func.isRequired};var ke={className:null};var Oe=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}m()(t,[{key:"onClick",value:function e(){var t=this.props.msg;var r=t.channel,a=t.ts,n=t.thread_ts;this.props.showThread({channelId:r,threadTs:n,highlightTs:a,origin:"starred_items"})}},{key:"render",value:function e(){if(!this.props.featureModernStarredItemsFlexpane)return null;var t=this.props,r=t.msg,a=t.className,i=t.channelName;var s=F()("c-message_kit__inline_channel_context","bold",a);if(Object(G["isReply"])(r))return n.a.createElement(se["a"],{className:s,onClick:this.onClick},"Thread in "+i);return n.a.createElement("div",{className:s},i)}}]);return t}(n.a.PureComponent);Oe.displayName="InlineChannelContext";Oe.defaultProps=ke;var Ee=function e(t,r){var a=Object(y["isFeatureEnabled"])(t,"feature_modern_starred_items");var n=Object(ge["f"])(t,r.msg.channel,true);var i=Object(be["getDisplayNameForChannel"])(t,n);return{channelName:i,featureModernStarredItemsFlexpane:a}};var we={showThread:oe["g"]};var Ce=Object(i["connect"])(Ee,we)(Oe);var Se=r(1170);var je=r(1748);var Ie={msg:g["b"].object.isRequired,className:g["b"].string};var Te={className:void 0};var Ne=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props.msg;var r=F()("p-starred_item__message",this.props.className);return n.a.createElement(ve["a"],{className:r},n.a.createElement(fe["a"],{msg:t},n.a.createElement(Se["a"],{msg:t,position:"inside",className:"p-starred_item__message_actions",showComment:false,showShare:false,showReact:false,showJump:true,jumpOrigin:"starred_items"},n.a.createElement(he["a"],{light:n.a.createElement(L["a"],{msg:t,size:36})},n.a.createElement(B["a"],{msg:t}),"\xa0\xa0",n.a.createElement(U["a"],{msg:t,full:true}),n.a.createElement("br",null),n.a.createElement(q["a"],{msg:t,className:"c-message_kit__contextual_message"}),n.a.createElement(Q,{msg:t}),n.a.createElement(K["a"],{msg:t}),n.a.createElement(Ce,{msg:t}),n.a.createElement("div",{className:"p-starred_item_message__reactions_and_replies"},n.a.createElement(ne,{msg:t}),n.a.createElement(me,{msg:t}))))))}}]);return t}(a["PureComponent"]);Ne.displayName="StarredItemMessage";Ne.defaultProps=Te;var Ae=Ne;var Re=r(78);var Me=r(1422);var Pe={file:g["b"].object.isRequired,id:g["b"].string.isRequired,className:g["b"].string,useRowAction:g["b"].bool,previewFile:g["b"].func};var xe={className:void 0,useRowAction:true,previewFile:_["noop"]};var De=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onFileClick=r.onFileClick.bind(r);return r}m()(t,[{key:"onFileClick",value:function e(t,r){if(!r)return;var a="starred_items";this.props.previewFile({fileId:r.id,flexOrigin:a})}},{key:"render",value:function e(){var t=F()("p-starred_item__message",this.props.className);if(!this.props.file)return null;return n.a.createElement(Me["a"],{file:this.props.file,className:t,key:this.props.id,useRowAction:this.props.useRowAction,fullWidth:true,onClick:this.onFileClick})}}]);return t}(a["PureComponent"]);De.displayName="StarredItemFile";De.defaultProps=xe;var Fe=function e(t,r){var a=r.id;return{file:Object(Re["getFileById"])(t,a)}};var Le=Object(i["connect"])(Fe,{previewFile:oe["c"]})(De);var Be={comment:g["b"].object,fileId:g["b"].string,className:g["b"].string};var Ue={comment:void 0,fileId:void 0,className:void 0};var qe=function(e){b()(t,e);function t(){d()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props,r=t.comment,a=t.fileId,i=t.className;if(!r)return null;var s={user:r.user,ts:r.timestamp.toString(),subtype:"file_comment",comment:r,files:[a]};return n.a.createElement(Ae,{msg:s,className:i})}}]);return t}(a["PureComponent"]);qe.displayName="StarredItemFileComment";qe.defaultProps=Ue;var Ge=function e(t,r){var a=r.fileId,n=r.commentId;return{comment:Object(Re["getFileCommentById"])(t,a,n)}};var He=Object(i["connect"])(Ge)(qe);var We=Object(x["a"])(Ae);var Ve={featureModernStarredItemsFlexpane:g["b"].bool.isRequired,featureGlobalNav:g["b"].bool.isRequired,starredItems:g["b"].array.isRequired,currentPage:g["b"].number.isRequired,totalPages:g["b"].number.isRequired,isLoading:g["b"].bool.isRequired,onLoad:g["b"].func.isRequired,fetchNextPage:g["b"].func.isRequired};var ze={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};var Qe=new O["b"]("starred_items");var Ke=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(r,["renderItem","renderMsg","renderFile","renderFileComment","renderLoadingState","fetchNextPage"]);r.state={reachedEnd:false,isInitialLoad:true,itemsAdded:false,scrollToTop:false};r.listRef=n.a.createRef();return r}m()(t,[{key:"componentDidMount",value:function e(){this.props.onLoad()}},{key:"componentDidUpdate",value:function e(t){!this.props.isLoading&&this.state.isInitialLoad&&this.updateInitialLoadingState(false);if(this.props.starredItems.length){var r=this.props.starredItems.length>t.starredItems.length;this.updateItemsAddedState(r)}}},{key:"getStarredItemId",value:function e(t){switch(t.type){case ze.MESSAGE:return t.channel+t.ts;case ze.FILE:return t.id;case ze.FILE_COMMENT:return t.id;default:return null}}},{key:"updateInitialLoadingState",value:function e(t){this.setState(function(){return{isInitialLoad:t}})}},{key:"updateItemsAddedState",value:function e(t){var r=this.listRef.current&&this.listRef.current.getVisibleRange().start;var a=t&&1===r;this.setState(function(){return{scrollToTop:a}})}},{key:"fetchNextPage",value:function e(){var t=this.props.currentPage+1;t<=this.props.totalPages&&!this.props.isLoading&&this.props.fetchNextPage(t)}},{key:"renderMsg",value:function e(t){if(!t)return null;return n.a.createElement(We,{channelId:t.channel,ts:t.ts,key:t.channel+t.ts,className:"p-starred_item"})}},{key:"renderFile",value:function e(t){if(!t)return null;return n.a.createElement(Le,{id:t.id,key:t.id,className:"p-starred_item"})}},{key:"renderFileComment",value:function e(t){return n.a.createElement(He,{fileId:t.fileId,commentId:t.id,key:t.id,className:"p-starred_item"})}},{key:"renderItem",value:function e(t){var r=this.props.starredItems[t];switch(r.type){case ze.MESSAGE:return this.renderMsg(r);case ze.FILE:return this.renderFile(r);case ze.FILE_COMMENT:return this.renderFileComment(r);default:return null}}},{key:"renderEmptyList",value:function e(){if(!this.props.featureModernStarredItemsFlexpane)return null;return n.a.createElement("div",{className:"p-starred_items__empty_list"},n.a.createElement("div",{className:"p-starred_items__empty_list_header"},Qe.t("No starred items")),n.a.createElement("div",{className:"p-starred_items__empty_list_subtext"},Qe.t("Star a message or file to save it here. Mark you to-dos, or save something for later \u2014 only you can see your starred items, so use them however you like!")))}},{key:"renderLoadingState",value:function e(){if(!this.props.featureModernStarredItemsFlexpane)return null;return n.a.createElement("div",{className:"p-starred_items__empty_list"},n.a.createElement(P["a"],null))}},{key:"render",value:function e(){var t=this;if(!this.props.featureModernStarredItemsFlexpane)return null;var r=this.props.starredItems;var a=this.props.featureGlobalNav?0:59;this.keys=r.map(function(e){return t.getStarredItemId(e)});if(this.state.isInitialLoad)return this.renderLoadingState();if(!r.length)return this.renderEmptyList();var i=this.state.scrollToTop?this.keys[0]:void 0;return n.a.createElement(A["a"],null,function(e){var r=e.width,s=e.height;return n.a.createElement(M["a"],{width:r,height:s-a,keys:t.keys,rowRenderer:t.renderItem,itemToScroll:i,loadPre:_["noop"],loadPost:t.fetchNextPage,loadAround:t.fetchNextPage,ref:t.listRef,animateOnScroll:false})})}}]);return t}(a["PureComponent"]);Ke.displayName="StarredItemsList";var Ye=function e(t){var r=Object(y["isFeatureEnabled"])(t,"feature_modern_starred_items");var a=Object(R["getAllStarredItems"])(t)||[];var n=Object(R["getCurrentPageNumber"])(t);var i=Object(R["getTotalPages"])(t);var s=Object(R["getLoadingState"])(t);var o=Object(y["isFeatureEnabled"])(t,"feature_global_nav");return{featureModernStarredItemsFlexpane:r,starredItems:a,currentPage:n,totalPages:i,isLoading:s,featureGlobalNav:o}};var Je=function e(t){var r={exclude:"Ch,Gh,Dh",count:20};return{onLoad:function e(){return t(Object(R["fetchStarsList"])(r))},fetchNextPage:function e(a){return t(Object(R["fetchStarsList"])(N()({page:a},r)))}}};var Ze=Object(i["connect"])(Ye,Je)(Ke);var Xe={featureModernStarredItemsFlexpane:g["b"].bool.isRequired,featureGlobalNav:g["b"].bool.isRequired};var $e={};var et=function(e){b()(t,e);function t(e){d()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(r,["maybeRenderStarredItemsList"]);return r}m()(t,[{key:"maybeRenderStarredItemsList",value:function e(){return n.a.createElement(Ze,null)}},{key:"maybeRenderStarredItemsHeader",value:function e(){if(this.props.featureGlobalNav)return null;return n.a.createElement(I,null)}},{key:"render",value:function e(){if(!this.props.featureModernStarredItemsFlexpane)return null;return n.a.createElement("div",{className:"full_height"},this.maybeRenderStarredItemsHeader(),this.maybeRenderStarredItemsList())}}]);return t}(a["PureComponent"]);et.displayName="StarredItemsFlexpane";et.defaultProps=$e;var tt=function e(t){var r=Object(y["isFeatureEnabled"])(t,"feature_modern_starred_items");var a=Object(y["isFeatureEnabled"])(t,"feature_global_nav");return{featureModernStarredItemsFlexpane:r,featureGlobalNav:a}};var rt=Object(i["connect"])(tt)(et);var at=rt;var nt=function e(t,r){if(!t)throw new Error("mountStarredItemsFlexpane must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(at,null)),r)};var it=function e(t){o.a.unmountComponentAtNode(t)};var st=r(51);Object(st["a"])("interop.mountStarredItemsFlexpane",nt);Object(st["a"])("interop.unmountStarredItemsFlexpane",it)},,,function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(430);var i=r(124);var s=r(365);var o=r(1094);var l=r(780);var c=r(16);function u(e){if(!e)return"";return"<@"+e.id+"|@"+Object(c["getMemberMentionName"])(e)+">"}var d=r(731);var p=r(1098);var m=r(868);var h=r(2964);var f=r(1095);var v=r(505);var b=r(621);var g=r(804);var _=r(1096);var y=r(3314);var k=r(3482);Object(a["a"])("interop.texty",{Delta:n["a"],PlainClipboardModule:n["b"],Quill:n["c"],SlackKeyboardModule:n["d"],TabCompleteModule:n["e"],TextyClass:n["f"],isRangeInCode:i["i"],convertContentsStringToContents:s["b"],convertContentsToString:o["a"],convertContentsToStringForDisplay:l["a"],getMemberAsContentsString:u,shouldHighlightMention:d["a"],convertContentsStringForSlashCommands:p["a"],convertContentsStringForEncodedMembers:m["a"],CONTENTS_STRING_MENTION_REGEX:s["a"],convertContentsStringToDisplayString:h["a"],TRAILING_PUNCTUATION_CHARACTERS:i["b"],getBroadcastMatch:v["a"],getDisplayTextForSearchResult:b["a"],trimAllowedMatchPrefix:g["a"],getContentsFromClipboard:f["a"],detachInvalidMentionsFromContents:_["a"],replacePotentialMentionsSynchronously:y["a"],shouldInsertNewline:k["a"]})},,function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(483);var i=r(981);var s=r(653);var o=r(999);var l=r(3343);var c=r(70);var u=c["SLASH_COMMAND_ERRORS"].UNKNOWN_COMMAND;Object(a["a"])("interop.slashCommand",{UNKNOWN_COMMAND:u,looksLikeSlashCommand:i["a"],parseEditLastMessageCommand:n["d"],parseArgs:n["c"],loadSlashCommands:l["a"],executeCommand:s["executeCommand"],sonicCommand:o["a"]})},function(e,t,r){"use strict";r.r(t);r.d(t,"setUnsentInvites",function(){return c});r.d(t,"getUnsentInvites",function(){return p});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=Object(l["a"])("Add unsent invites to the store, overwriting anything previously stored");c.propTypes={unsentInvites:o["b"].array};var u={unsentInvites:[]};var d=Object(l["c"])(n()({},c,function(e,t){if(!t)return e;return s()({},e,{unsentInvites:t})}),u);d.propTypes={unsentInvites:o["b"].array};t["default"]=d;var p=Object(l["d"])(function(e){if(e&&e.invites&&e.invites.unsentInvites)return e.invites.unsentInvites;return[]})},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(3318);function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountMessagePaneDragOverlay must be called with a teamId parameter");var a=Object(c["d"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(u["a"],r)),t)}function p(e){s.a.unmountComponentAtNode(e)}var m=r(51);Object(m["a"])("interop.mountMessagePaneDragOverlay",d);Object(m["a"])("interop.unmountMessagePaneDragOverlay",p)},,,,function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(37);var i=r(180);var s=r(3306);var o=r(455);var l=r(2247);var c=r(1);var u=r.n(c);var d=r(104);var p=r.n(d);var m=r(14);var h=r(2);var f=r(139);var v=r(33);var b=r(3481);var g=function e(){return document.getElementById("search_popover_container")};var _=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g();if(!t)throw new Error("mountSearch must be called with a teamId parameter");Object(f["a"])(u.a.createElement(m["Provider"],{store:Object(v["d"])(t)},u.a.createElement(b["a"],{onClickRefreshSearch:h["noop"]})),r)};var y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();p.a.unmountComponentAtNode(t)};var k={mountPrimarySearch:_};var O=r(3267);var E=r(3475);var w=function e(t){return function(){return TS.redux.dispatch(t.apply(void 0,arguments))}};Object(a["a"])("interop.searchUi",{getVisible:function e(){return Object(n["getVisible"])(TS.redux.getState())}});Object(a["a"])("interop.searchInputBox",{getSearchInputBoxDisplayQuery:function e(){return Object(i["getSearchInputBoxDisplayQuery"])(TS.redux.getState())},getInFilterTextyString:function e(t){return Object(s["a"])(TS.redux.getState(),t)}});Object(a["a"])("interop.searchActions",{close:w(o["a"]),setFocusedViaTabKey:w(n["setFocusedViaTabKey"]),openFromCmdF:w(l["b"]),openFromCmdG:w(l["c"]),openFromQuickSwitcherCmd:w(l["f"]),openFromClick:w(l["a"]),openFromSlashCommand:w(l["g"]),openFromKeyDown:w(l["e"]),openFromFilesMenu:w(l["d"])});Object(a["a"])("interop.mountPrimarySearch",_);Object(a["a"])("interop.unmountPrimarySearch",y);Object(a["a"])("interop.usePrimarySearch",function(){return Object(O["a"])(TS.redux.getState())});Object(a["a"])("interop.isExperimentAnyOmniSwitcher",function(){return Object(E["a"])(TS.redux.getState())});Object(a["a"])("interop.isExperimentOmniSwitcher",function(){return Object(E["b"])(TS.redux.getState())});Object(a["a"])("interop.isExperimentSearchSwitcher",function(){return Object(E["c"])(TS.redux.getState())})},,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(2);var u=r(368);var d=r(33);var p=r(499);var m=r(1);var h=r.n(m);var f=r(31);var v=r(77);var b=r(129);var g=r(14);var _=r(10);var y=r(11);var k=r(103);var O=new _["b"]("file-upload");var E={onGo:b["b"].func,onCancel:b["b"].func,featureModernFileUpload:b["b"].bool};var w={onGo:c["noop"],onCancel:c["noop"],featureModernFileUpload:false};var C=function e(t){var r=t.onGo,a=t.onCancel,n=t.featureModernFileUpload;if(!n)return null;return h.a.createElement(k["a"],{className:"p-file_upload_error_dialog",title:O.t("Upload failed"),goButtonText:O.t("Yes, try again"),cancelText:O.t("No, cancel"),onGo:r,onCancel:a},O.t("Hmm, it looks like your file failed to upload. Want to try again?"))};C.displayName="FileUploadErrorDialog";C.defaultProps=w;function S(e){return{featureModernFileUpload:Object(y["isFeatureEnabled"])(e,"feature_modern_file_upload")}}var j=Object(g["connect"])(S)(C);var I=Object(f["b"])("Opens the File Upload Error Dialog",function(e,t,r){e(Object(v["openModal"])({element:h.a.createElement(j,r)}))});I.propTypes=null;var T=I;var N=r(311);var A=r(17);var R=r(310);var M=r(3055);r.d(t,"a",function(){return G});var P={};var x=M["a"].TIMEOUT,D=M["a"].ABORTED,F=M["a"].UNKNOWN;var L="UPLOAD-QUEUE";var B="File upload failed!";var U=function(){function e(t){s()(this,e);if(!t)throw new Error("UploadQueue requires a teamId");this._teamId=t;this._store=Object(d["d"])(t);this._queue=[];this._activeJob=null;this._logger=Object(A["a"])({teamId:t});this._log=this._log.bind(this);this._throttledLog=Object(c["throttle"])(this._log,5e3,{leading:false});Object(u["a"])(this)}l()(e,[{key:"uploadFile",value:function e(t){var r=t.file,a=t.shareData;var n={file:r,shareData:a,cancelable:true};this._queue.push(n);this._go()}},{key:"uploadExternal",value:function e(t){var r=t.file,a=t.shareData;var n={file:r,shareData:a,cancelable:false};this._queue.push(n);throw new Error("not implemented")}},{key:"cancelCurrentUpload",value:function e(){if(this._activeJob&&this._activeJob.xhr){this._activeJob.xhr.abort();this._log("Upload was cancelled by the user");this._store.dispatch(Object(p["uploadCanceled"])());this._activeJob=null;this._go()}}},{key:"_setupJob",value:function e(){this._activeJob.numRetries=this._activeJob.numRetries||0;this._activeJob.fileId=void 0;this._activeJob.promise=void 0;this._activeJob.xhr=new XMLHttpRequest;this._activeJob.xhr.addEventListener("timeout",this._onTimeout.bind(this));this._activeJob.xhr.addEventListener("abort",this._onAbort.bind(this));this._activeJob.xhr.addEventListener("error",this._onError.bind(this));this._activeJob.xhr.addEventListener("load",this._onLoad.bind(this));this._activeJob.xhr.upload&&this._activeJob.xhr.upload.addEventListener("progress",this._onUploadProgress.bind(this))}},{key:"_go",value:function e(){if(this._activeJob){this._log("Job in progress, queuing");return}if(!this._queue.length){this._log("Upload queue empty");this._store.dispatch(Object(p["uploadQueueEmptied"])());return}this._log("Starting an upload");this._activeJob=this._queue.shift();this._actuallyUpload(this._activeJob)}},{key:"_actuallyUpload",value:function e(t){var r=this;var a=t.file,n=t.shareData;this._setupJob();this._store.dispatch(Object(p["uploadStarting"])({fileName:n.title||a.name,isRetry:!!n.num_retry,cancelable:this._activeJob.cancelable}));this._store.dispatch(Object(N["f"])({fileName:a.name,fileSize:a.size})).then(function(e){var t=e.file,n=e.upload_url;r._log("Got upload URL and ID "+t);r._activeJob.fileId=t;r._activeJob.xhr.promise=new Promise(function(){var e=new FormData;e.append("file",a);r._activeJob.xhr.open("POST",n);r._activeJob.xhr.send(e)});return r._promise}).catch(function(e){r._onError("Error during upload: "+e);r._uploadOver()})}},{key:"_onUploadProgress",value:function e(t){var r="";if(t.lengthComputable){var a=Math.floor(100*t.loaded/t.total,10);this._store.dispatch(Object(p["progressUpdate"])({percentComplete:a}));r="Uploading "+this._activeJob.fileId+" - "+a+"% complete"}else r="Uploading "+this._activeJob.fileId+" - Upload percentage not computable";this._throttledLog(r)}},{key:"_log",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.level,n=void 0===a?"info":a;this._logger[n](L,t)}},{key:"_uploadOver",value:function e(){this._activeJob=null;this._go()}},{key:"_onLoad",value:function e(){var t=this;var r=this._activeJob.shareData;this._log(this._activeJob.fileId+" Finished POST-ing data");this._store.dispatch(Object(p["progressUpdate"])({percentComplete:100}));this._store.dispatch(Object(N["a"])(n()({fileId:this._activeJob.fileId},r,{introMessage:Object(R["b"])(this._store.getState(),r.introMessage)}))).then(function(){t._store.dispatch(Object(p["uploadComplete"])());t._uploadOver()}).catch(this._onError)}},{key:"_onTimeout",value:function e(){this._onError("File upload timed out!",{status:x})}},{key:"_onAbort",value:function e(){this._onError("File upload aborted!",{status:D})}},{key:"_onError",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._activeJob.xhr,n=a.status,i=void 0===n?F:n,s=a.response,o=void 0===s?null:s;var l=new Error(r);l.status=i;l.response=o;this._log(r,{level:i===D?"warn":"error"});if(0===this._activeJob.numRetries){this._activeJob.numRetries+=1;this._actuallyUpload(this._activeJob)}else this._store.dispatch(T({onGo:function e(){t._activeJob.numRetries+=1;t._actuallyUpload(t._activeJob)},onCancel:function e(){t._uploadOver()}}))}}]);return e}();var q=U;function G(e){if(P[e])return P[e];P[e]=new U(e);return P[e]}},,,function(e,t,r){"use strict";r.d(t,"c",function(){return a});r.d(t,"b",function(){return n});r.d(t,"d",function(){return i});r.d(t,"e",function(){return s});r.d(t,"a",function(){return o});var a=3;var n={profile:vvv_abs_url+"/img/tractor/steps/step_01",workspace:vvv_abs_url+"/img/tractor/steps/step_02",invites:vvv_abs_url+"/img/tractor/steps/step_03",completion:vvv_abs_url+"/img/tractor/steps/step_04"};var i={profile:0,workspace:1,invites:2,completion:3};var s={0:"TRACTOR_DIALOG_PROFILE_STEP",1:"TRACTOR_DIALOG_WORKSPACE_STEP",2:"TRACTOR_DIALOG_INVITE_STEP",3:"TRACTOR_DIALOG_COMPLETED_STEP"};var o={start_team_creator_account_setup:"BANNER_TRACTOR_WELCOME",complete_team_creator_account_setup:"BANNER_TRACTOR_REMINDER",invite_team_creator_account_setup:"BANNER_TRACTOR_INVITES"}},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(14);var l=r(139);var c=r(33);var u=r(62);var d=r(188);var p=r(3542);var m=function e(t,r,a,i){if(!t)throw new Error("mountEmojiPicker must be called with a teamId parameter");var m="react_emoji_menu_render";Object(u["e"])(m+"_mark");Object(l["a"])(s.a.createElement(o["Provider"],{store:Object(c["d"])(t)},s.a.createElement(d["a"],n()({shouldFade:false},i),s.a.createElement(p["a"],a))),r,function(){return Object(u["g"])(m,m+"_mark")})};var h=m;var f=r(51);Object(f["a"])("interop.mountEmojiPicker",h)},,,function(e,t,r){"use strict";var a=r(2);var n=r.n(a);var i=r(26);var s=r(19);var o=r(123);var l=r(21);var c=r(681);var u=r(11);var d=r(850);var p=r(108);var m=r(16);var h=r(12);var f=r(321);var v=r(365);var b=r(474);var g=r(985);var _=r(707);var y=r(943);var k=r(802);var O=r(107);var E=r(117);var w=function e(t,r){if(!r)return"";switch(r.type){case"command":var n=r.data;if(!n)return"";var l=n.type;if("subteam"===l){var c=Object(o["getUserGroupById"])(t,n.id);var u=Object(y["a"])({userGroupHandle:c&&c.handle,fallbackHandle:n.label,isUnknown:Object(p["d"])(c),isNonExistent:Object(p["c"])(c)});return"<@"+n.id+"|"+u+">"}if(Object(a["includes"])(["here","channel","everyone","group"],l))return Object(_["a"])({type:l,tsfMode:"EDIT"});return"";case"member":var d=r.id;if(!d)return"";var f=Object(i["getMemberById"])(t,d);var v="<@"+d+"|@"+d+">";if(Object(p["e"])(f))return v;var b=Object(m["getMemberMentionName"])(f);if(!b)return v;return"<@"+d+"|@"+b+">";case"channel":var g=r.id;if(!g)return"";var O=Object(s["getChannelById"])(t,g);var E=Object(h["getDisplayName"])(O);var w=(r.text||"").replace(/^#/,"");var C=Object(h["isPrivateChannel"])(O);var S=Object(p["d"])(O);var j=Object(p["c"])(O);return Object(k["a"])({channelName:E,fallbackName:w,isPrivate:C,isUnknown:S,isNonExistent:j});default:if(r.text)return Object(a["unescape"])(r.text);if(r.content)return r.content;if(r.token)return r.token;if(r.name)return r.name;if(r.id)return r.id;return""}};var C=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.text,i=r.tsfMode,s=void 0===i?"EDIT":i;var o=Object(b["b"])(n,s);var p=Object(g["a"])(o);var m=p.map(function(e){return w(t,e)});var h=m.join("");return Object(v["b"])(h,{highlightWords:Object(l["getUserHighlightWords"])(t),shouldRenderEmojiAsText:Object(f["k"])(t),emojiNames:Object(u["isFeatureEnabled"])(t,"feature_sonic_emoji")?Object(c["getAllEmojiNames"])(t):Object(a["map"])(Object(E["a"])(),"name"),useSonicEmoji:Object(u["isFeatureEnabled"])(t,"feature_sonic_emoji")||Object(O["a"])(),locale:Object(d["getLocale"])(t)})};t["a"]=C},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(10);var p=r(129);var m=r(1);var h=r.n(m);var f=r(430);var v=r(14);var b=r(2);var g=r(18);var _=r(20);var y=r(180);var k=r(170);var O=r(50);var E=r(48);var w=r(268);var C=r(978);var S=r(63);var j=r(3475);function I(e){var t=new RegExp("<@([A-Z0-9a-z]+)\\|([^>]+)>","g");return e.replace(t,function(e,t,r){var a=Object(b["unescape"])(r);return"<@"+t+"|"+a+">"})}var T=r(3267);var N=r(1939);var A=r(1444);var R=new d["b"]("search");var M=new d["b"]("quick_switcher");var P={usePrimarySearch:p["b"].bool.isRequired,isSearchAutocompleteOpen:p["b"].bool.isRequired,autoFocus:p["b"].bool,isSonic:p["b"].bool.isRequired,displayQuery:p["b"].string.isRequired,onBlur:p["b"].func,onEnter:p["b"].func,onEscape:p["b"].func,onFocus:p["b"].func,searchInputChanged:p["b"].func.isRequired,clearSearchInput:p["b"].func.isRequired,orgName:p["b"].string.isRequired,teamName:p["b"].string.isRequired,autocompleteSelectedIndex:p["b"].number,searchAutocompleteMode:p["b"].string,isExperimentAnyOmniSwitcher:p["b"].bool};var x={autoFocus:false,onBlur:b["noop"],onEnter:b["noop"],onEscape:b["noop"],onFocus:b["noop"],autocompleteSelectedIndex:void 0,searchAutocompleteMode:void 0,isExperimentAnyOmniSwitcher:false};var D=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.texty=null;Object(b["bindAll"])(r,["onClickClear","getTextyString","onEnter","onUserQueryChange","setTextyRef","updateDisplayQuery"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.autoFocus,a=t.usePrimarySearch,n=t.isSearchAutocompleteOpen;(r||a&&n)&&this.texty.setCursorAtEnd()}},{key:"shouldComponentUpdate",value:function e(t){var r=this.props.usePrimarySearch&&t.isSearchAutocompleteOpen!==this.props.isSearchAutocompleteOpen;return r||this.props.displayQuery!==t.displayQuery||this.props.autocompleteSelectedIndex!==t.autocompleteSelectedIndex}},{key:"componentDidUpdate",value:function e(t){this.texty&&this.props.usePrimarySearch&&!t.isSearchAutocompleteOpen&&this.props.isSearchAutocompleteOpen&&this.texty.focus();t.displayQuery!==this.props.displayQuery&&this.updateDisplayQuery()}},{key:"onUserQueryChange",value:function e(){this.props.searchInputChanged({textyString:this.getTextyString()})}},{key:"onEnter",value:function e(){this.props.onEnter()}},{key:"onClickClear",value:function e(){this.props.clearSearchInput();this.texty&&this.texty.focus()}},{key:"setTextyRef",value:function e(t){var r=!!(t&&t.getWrappedInstance);this.texty=r?t.getWrappedInstance():t}},{key:"getTextyString",value:function e(){if(!this.texty)return this.props.displayQuery;return I(this.texty.value())}},{key:"updateDisplayQuery",value:function e(){this.texty&&this.props.displayQuery!==this.getTextyString()&&this.texty.value(this.props.displayQuery)}},{key:"render",value:function e(){var t=this.props,r=t.orgName,a=t.teamName;var n=R.t("Search");var i={tabcomplete:{completers:[]},keyboard:{useFormattingCommands:false}};var s=this.props.displayQuery?"c-search__input_box__clear":"c-search__input_box__clear c-search__input_box__clear__hidden";var o="number"===typeof this.props.autocompleteSelectedIndex?Object(A["b"])(this.props.autocompleteSelectedIndex):void 0;var l={autocomplete:"list",owns:"c-search_autocomplete__suggestion_list",expanded:true,activedescendant:o};var c=R.t("Search {teamName}",{teamName:r||a||""});this.props.isExperimentAnyOmniSwitcher&&this.props.searchAutocompleteMode===w["searchAutocompleteModes"].NAVIGATION&&(c=M.t("Jump to..."));return h.a.createElement("div",{className:"c-search__input_box","data-qa":"search_input_box"},h.a.createElement(g["b"],{type:"search-medium",className:"c-search__input_box__icon"}),h.a.createElement(f["g"],{className:"c-search__input_box__input",modules:i,ref:this.setTextyRef,ariaLabel:n,unsafeAriaProps:l,initialText:this.props.displayQuery,placeholder:c,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onEnter:this.onEnter,onTextChange:this.onUserQueryChange,onEscape:this.props.onEscape,isSingleLine:true,focusOnMount:false,useLegacyCreate:!this.props.isSonic,isJumbomojiEnabled:false,showMentionTooltips:false,enableBroadcastKeywords:false}),h.a.createElement(_["c"],{className:s,onClick:this.onClickClear,label:R.t("Clear"),"data-qa":"search_input_clear"},R.t("Clear")))}}]);return t}(m["Component"]);D.displayName="SearchInputBox";D.defaultProps=x;var F=function e(t){return{usePrimarySearch:Object(T["a"])(t),isSearchAutocompleteOpen:Object(w["isSearchAutocompleteOpen"])(t),displayQuery:Object(y["getSearchInputBoxDisplayQuery"])(t),orgName:Object(k["getEnterpriseOrgName"])(t)||"",teamName:Object(E["getTeamDisplayName"])(Object(O["getCurrentTeam"])(t)),autocompleteSelectedIndex:Object(w["getSearchAutocompleteSelectedIndex"])(t),isSonic:Object(S["a"])(t),searchAutocompleteMode:Object(w["getSearchAutocompleteMode"])(t),isExperimentAnyOmniSwitcher:Object(j["a"])(t)}};var L={searchInputChanged:y["searchInputChanged"],clearSearchInput:C["a"]};var B=t["a"]=Object(v["connect"])(F,L)(D)},function(e,t,r){"use strict";var a=r(4);var n=r(268);var i=r(117);var s=r(129);var o=r(2);var l=r(164);var c=r(699);var u=r(180);var d=r(37);var p=r(670);var m=r(3475);var h=Object(a["e"])("Clog clicks on a message or file using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.suggestion;var i=t();var s=e(Object(c["getSearchSessionId"])());var h=e(Object(c["getQuerySessionId"])());var f=Object(n["getSearchAutocompleteSuggestions"])(i);var v=Object(n["getSearchAutocompleteSelectedIndex"])(i)-1;var b=Object(o["tail"])(f).map(function(e){return e.featureVector});if(Object(m["a"])(i)){v+=1;b=f.map(function(e){return e.featureVector})}var g=Object(l["a"])({state:i});var _=Object(u["getSearchInputBoxUserQuery"])(i);var y=_?_.length:0;var k=Object(d["getLastOpenMethod"])(i);-1===v?g.track("SEARCH_AUTOCOMPLETE_REJECT",{feature_vector_list:b,request_id:Object(p["a"])(i),search_session_id:s,client_request_id:h,query_length:y,open_method:k}):g.track("SEARCH_AUTOCOMPLETE_ACCEPT",{accept_module_name:"results_unified",accept_module_length:f.length,accept_item_offset:v,feature_vector_list:b,suggestion_type:a.type,is_navigational:a.is_type_navigational,navigation_model_id:a.id,request_id:Object(p["a"])(i),search_session_id:s,client_request_id:h,query_length:y,open_method:k})});h.propTypes={suggestion:s["b"].object.isRequired};var f=h;var v=r(90);var b=r(150);var g=r(278);var _=r(455);var y=r(17);var k=r(609);var O=r(174);var E=r(3267);var w=r(165);var C=r(31);var S=r(473);var j=r(75);var I=r(50);var T=r(27);var N=r(147);var A=r(84);var R=r(326);var M=Object(C["b"])("Opens app profile card",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.teamId;var i=t();if(Object(T["isSSBAndAtLeastVersion"])("2.6")){var s=Object(o["includes"])(Object(j["getSignedInTeamIds"])(i),n);var l=s?Promise.resolve():Object(R["g"])(n);var c=function e(){return new Promise(function(e){return window.requestAnimationFrame(e)})};return l.then(c).then(function(){var e=document.createElement("iframe");var t=Object(A["b"])({team:n,id:a});e.src="slack://channel"+t;document.body.appendChild(e);setTimeout(function(){return e.remove()},1e3)})}var u=Object(I["getTeamById"])(i,n);var d=Object(o["get"])(u,"domain");var p=Object(S["b"])(i,d)+"/messages/"+a;Object(N["g"])(p,n);return Promise.resolve()});M.propTypes={channelId:s["b"].string.isRequired,teamId:s["b"].string.isRequired};var P=M;var x=r(12);var D=r(498);r.d(t,"a",function(){return L});var F="IMPROVED_SEARCH";var L=Object(a["e"])("Accept the selected (or 0th) search autocomplete suggestion",function(e,t){Object(y["a"])({getState:t}).info(F,"Accepted search query");var r=t();var a=Object(n["getSearchAutocompleteSelectedIndex"])(r);if(void 0===a||null===a)return;var s=Object(n["getSearchAutocompleteSuggestions"])(r)[a||0];if(!s)return;e(f({suggestion:s}));if(s.is_type_query_completion){var o=Object(i["g"])(s.suggestion_replacement);var l=Object(i["g"])(s.suggestion_replacement_for_request);Object(y["a"])({getState:t}).info(F,"Accepting query suggestion");e(Object(v["setEditableRequestQueryThenRequest"])({query:l}));e(Object(u["setSearchInputBoxDisplayQuery"])({displayQuery:o}));if(Object(E["a"])(r)){e(Object(n["closeSearchAutocomplete"])());Object(w["n"])("Vsearch")}else e(Object(d["setInterfaceMode"])({interfaceMode:d["interfaceModes"].SEARCH_RESULTS}))}else if(s.is_type_navigational){if(s.is_type_file){Object(y["a"])({getState:t}).info(F,"Navigating to file. file: "+s.file.id);e(Object(b["c"])({fileId:s.file.id}))}else{Object(y["a"])({getState:t}).info(F,"Navigating to model: id: "+s.id);if(Object(k["a"])(s.id))Object(O["o"])(s.id);else if(s.channel&&Object(x["isFromAnotherTeam"])(s.channel)){var c=Object(x["teamIdForChannelFromAnotherTeam"])(r,s.channel);e(P({teamId:c,channelId:s.channel.id}))}else s.channel&&Object(x["legacyIsFromAnotherTeam"])(r,s.channel)?e(P({teamId:s.channel.team_id,channelId:s.channel.id})):e(Object(g["a"])({id:s.id}));var p=s.channel||s.member||{id:s.id};var m=Object(u["getSearchInputBoxUserQuery"])(r);Object(D["c"])(p,m)}e(Object(u["setSearchInputBoxUserQuery"])({textyString:""}));e(Object(_["a"])());e(Object(n["closeSearchAutocomplete"])())}});L.propTypes={}},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(2);var f=r(14);var v=r(484);var b=r(10);var g=r(180);var _=r(268);var y=r(280);var k=r(106);var O=r.n(k);var E=r(27);var w=r(446);var C=r(47);var S=r(1114);var j=r(23);var I=r(3475);var T=r(1444);var N=new b["b"]("search");var A=function e(){return m.a.createElement("footer",null,m.a.createElement("span",{className:"c-search_autocomplete__footer_navigation_help"},m.a.createElement("strong",null,"\u2191")," ",m.a.createElement("strong",null,"\u2193"),"\xa0",N.t("to navigate"),m.a.createElement("strong",{className:"margin_left_100","aria-label":N.t("Return")},"\u21b5"),"\xa0",N.t("to select"),m.a.createElement("strong",{className:"margin_left_100","aria-label":N.t("Escape Character")},m.a.createElement("kbd",null,"esc")),"\xa0",N.t("to dismiss")))};A.displayName="Footer";var R=A;var M=r(1937);var P=new b["b"]("search");var x=new b["b"]("view");var D={displayQuery:d["b"].string,userQuery:d["b"].string,suggestions:d["b"].array.isRequired,selectedIndex:d["b"].number,onAccept:d["b"].func,onSelectedIndexChange:d["b"].func,fetchSearchAutocompleteSuggestions:d["b"].func.isRequired,setSearchAutocompleteSelection:d["b"].func.isRequired,setSearchAutocompleteSuggestions:d["b"].func.isRequired,isExperimentAnyOmniSwitcher:d["b"].bool,teamId:d["b"].string.isRequired};var F={selectedIndex:null,onAccept:h["noop"],onSelectedIndexChange:h["noop"],displayQuery:null,userQuery:null,isExperimentAnyOmniSwitcher:false};var L=function e(t,r){return(t%r+r)%r};var B=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(h["bindAll"])(r,["onKeydown","onUserQueryChange","onSuggestionAccept","onSuggestionDelete","onSuggestionSelected"]);r.searchAutocompleteSuggestionsPromise=void 0;r.markAutocompleteRenderStart=Object(h["throttle"])(w["b"],2e3,{leading:true});r.populateChannelNameCounts();return r}s()(t,[{key:"componentDidMount",value:function e(){document.body.addEventListener("keydown",this.onKeydown);this.onUserQueryChange();Object(S["d"])(this.props.teamId)}},{key:"shouldComponentUpdate",value:function e(t){return t.selectedIndex!==this.props.selectedIndex||t.suggestions!==this.props.suggestions}},{key:"componentDidUpdate",value:function e(t){t.userQuery!==this.props.userQuery&&this.onUserQueryChange();this.populateChannelNameCounts()}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.onKeydown)}},{key:"onKeydown",value:function e(t){var r=function e(){t.preventDefault();t.stopPropagation();return false};var a=t.shiftKey;var n=t.which;var i=v["codes"].up,s=v["codes"].tab,o=v["codes"].down;if(!a&&n===i||a&&n===s){this.decrementSelectedIndex();return r()}if(!a&&n===o||n===s){this.incrementSelectedIndex();return r()}return true}},{key:"onUserQueryChange",value:function e(){Object(w["a"])();this.searchAutocompleteSuggestionsPromise&&this.searchAutocompleteSuggestionsPromise.cancel();this.searchAutocompleteSuggestionsPromise=this.props.fetchSearchAutocompleteSuggestions({query:this.props.userQuery})}},{key:"onSuggestionDelete",value:function e(t){this.props.setSearchAutocompleteSuggestions({suggestions:Object(h["filter"])(this.props.suggestions,function(e){return t.key!==e.key})})}},{key:"onSuggestionSelected",value:function e(t,r){this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:!r})}},{key:"onSuggestionAccept",value:function e(){this.props.onAccept()}},{key:"populateChannelNameCounts",value:function e(){var t=this;this.channelNameCounts={};this.props.suggestions.forEach(function(e){e.is_type_channel&&(t.channelNameCounts[e.channel.name]=(t.channelNameCounts[e.channel.name]||0)+1)})}},{key:"incrementSelectedIndex",value:function e(){if(this.props.isExperimentAnyOmniSwitcher){var t=this.props.suggestions&&this.props.suggestions[this.props.selectedIndex||0];if(t&&t.type===C["b"].QUERY&&t.suggestion_replacement!==this.props.displayQuery){this.props.setSearchAutocompleteSelection({selectedIndex:this.props.selectedIndex,setText:true});return}}this.props.setSearchAutocompleteSelection({selectedIndex:L((null===this.props.selectedIndex?-1:this.props.selectedIndex)+1,this.props.suggestions.length),setText:true})}},{key:"decrementSelectedIndex",value:function e(){this.props.setSearchAutocompleteSelection({selectedIndex:L(this.props.selectedIndex-1,this.props.suggestions.length),setText:true})}},{key:"propsForSuggestion",value:function e(t,r){var a=r.is_type_channel&&this.channelNameCounts[r.channel.name]>1;return{index:t,suggestion:r,key:r.key,isSelected:t===this.props.selectedIndex,onSelected:this.onSuggestionSelected,onAccept:this.onSuggestionAccept,onDelete:this.onSuggestionDelete,showUnreadCount:this.props.isExperimentAnyOmniSwitcher,hasChannelNameCollision:a}}},{key:"renderScreenReaderWorkaround",value:function e(){var t=this;if(!(O.a.chrome&&O.a.version<67)||!Object(E["isSSB"])())return null;var r=this.props.selectedIndex;var a=Object(h["last"])(this.props.suggestions.map(function(e,a){return e.is_type_navigational&&a===r?m.a.createElement(T["a"],t.propsForSuggestion(a,e)):null}).filter(function(e){return e}));return m.a.createElement("div",{"aria-live":"polite",className:"offscreen"},a)}},{key:"renderBlankSlate",value:function e(){var t=this;var r=Object(h["some"])(this.props.suggestions,function(e){return e.is_type_query_history});var a=m.a.createElement("header",null,m.a.createElement("span",{className:"c-search_autocomplete__header_label"},m.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},P.t("Recent searches"))));var n=Object(h["some"])(this.props.suggestions,function(e){return e.is_type_navigational});var i=m.a.createElement("header",null,m.a.createElement("span",{className:"c-search_autocomplete__header_label"},m.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},x.t("Unread",{fallbackHash:"95ed8c1c63175388741df85c038e3dc99d8ac375"}))));var s=this.renderScreenReaderWorkaround();return m.a.createElement("div",{className:"c-search_autocomplete"},s,m.a.createElement("ol",{className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list"},n&&m.a.createElement("li",{role:"presentation"},i),this.props.suggestions.map(function(e,r){return e.is_type_navigational&&m.a.createElement(T["a"],t.propsForSuggestion(r,e))}),r&&m.a.createElement("li",{role:"presentation"},a),this.props.suggestions.map(function(e,r){return e.is_type_query_history&&m.a.createElement(T["a"],t.propsForSuggestion(r,e))})),m.a.createElement(R,null))}},{key:"render",value:function e(){var t=this;var r=!this.props.userQuery;if(r)return this.renderBlankSlate();this.markAutocompleteRenderStart();var a=this.renderScreenReaderWorkaround();return m.a.createElement("div",{className:"c-search_autocomplete"},a,m.a.createElement("ol",{className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list"},this.props.suggestions.map(function(e,r){return m.a.createElement(T["a"],t.propsForSuggestion(r,e))})),m.a.createElement(R,null))}}]);return t}(p["Component"]);B.displayName="SearchAutocomplete";B.defaultProps=F;var U=function e(t){return{suggestions:Object(_["getSearchAutocompleteSuggestions"])(t),selectedIndex:Object(_["getSearchAutocompleteSelectedIndex"])(t),userQuery:Object(g["getSearchInputBoxUserQuery"])(t),displayQuery:Object(g["getSearchInputBoxDisplayQuery"])(t),isExperimentAnyOmniSwitcher:Object(I["a"])(t),teamId:Object(j["getTeamId"])(t)}};var q={setSearchAutocompleteSelection:_["setSearchAutocompleteSelection"],setSearchAutocompleteSuggestions:_["setSearchAutocompleteSuggestions"],fetchSearchAutocompleteSuggestions:y["b"]};var G=t["a"]=Object(f["connect"])(U,q)(B)},function(e,t,r){"use strict";var a={calculator:"calculator",form:"form",review:"review",success:"success"};t["a"]=a},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r(129);var m=r(17);var h={store:p["b"].shape({getState:p["b"].func.isRequired,subscribeImmediate:p["b"].func,subscribe:p["b"].func.isRequired}).isRequired,render:p["b"].func.isRequired};var f=function(e){u()(t,e);l()(t,null,[{key:"getDerivedStateFromProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.store;return r.getState()}}]);function t(e){n()(this,t);var r=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.store;r.state=a.getState();r.logger=Object(m["a"])({getState:a.getState,label:"CONNECT-IMMEDIATE"});r.unsubscribe=null;r.update=r.update.bind(r);return r}l()(t,[{key:"componentDidMount",value:function e(){this.subscribeToStore()}},{key:"componentDidUpdate",value:function e(t){if(this.props.store!==t.store){this.unsubscribeFromStore();this.subscribeToStore()}}},{key:"componentWillUnmount",value:function e(){this.unsubscribeFromStore()}},{key:"subscribeToStore",value:function e(){var t=this.props.store;var r=t.subscribeImmediate;if(!r){this.logger.warn("subscribeImmediate not found on store");r=t.subscribe}this.unsubscribe=r(this.update)}},{key:"unsubscribeFromStore",value:function e(){this.unsubscribe&&this.unsubscribe()}},{key:"update",value:function e(){var t=this;this.setState(function(){return t.props.store.getState()})}},{key:"render",value:function e(){return this.props.render(this.state)}}]);return t}(d["PureComponent"]);f.displayName="ConnectImmediate";var v=f;var b=t["a"]=v},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(129);var s=r(14);var o=r(15);var l=r.n(o);var c=r(18);var u=r(20);var d=r(11);var p=r(1417);var m=r(10);var h=new m["b"]("global_nav");var f={featureGlobalNav:i["b"].bool,featureGlobalNavLayout:i["b"].bool};var v={featureGlobalNav:false,featureGlobalNavLayout:false};var b=function e(t){var r=t.featureGlobalNav,a=t.featureGlobalNavLayout;if(!r)return null;var i=n.a.createElement(u["c"],{className:"p-global_nav__sidebar_jumper",onClick:p["b"]},n.a.createElement(c["b"],{type:"filter",className:"p-global_nav__sidebar_jumper_icon"}),h.t("Go to\u2026",{note:"Used to open the quickswitcher. This label should as short as possible."}));var s=l()("p-global_nav__sidebar",{"p-global_nav__sidebar--relayout":a});return n.a.createElement("div",{className:s},i)};b.displayName="SidebarHeader";b.defaultProps=v;var g=function e(t){return{featureGlobalNav:Object(d["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(d["isFeatureEnabled"])(t,"feature_global_nav_layout")}};t["a"]=Object(s["connect"])(g)(b)},,,,function(e,t,r){"use strict";r.r(t);var a=r(2781);var n=r(51);Object(n["a"])("interop.api_unauthed",{callSlackApiUnauthed:a["a"]})},,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(5);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var m=r.n(p);var h=r(8);var f=r.n(h);var v=r(129);var b=r(3465);var g=r(2);var _=r(17);var y=r(269);var k={href:v["b"].string.isRequired,sizes:v["b"].string,type:v["b"].string,logger:v["b"].object.isRequired};var O={sizes:"16x16 32x32 48x48",type:"image/png"};var E=0;var w=function(e){f()(t,e);function t(e){c()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.originalFavicon=r.findFavicon();return r}d()(t,[{key:"componentDidMount",value:function e(){E&&this.props.logger.error("Multiple Favicons mounted");E+=1;this.updateFavicon()}},{key:"componentDidUpdate",value:function e(t){Object(y["a"])(this.getFaviconProps(t),this.getFaviconProps(this.props))||this.updateFavicon()}},{key:"componentWillUnmount",value:function e(){E-=1;this.setOrRemoveFavicon(this.originalFavicon)}},{key:"getFaviconProps",value:function e(t){return{rel:"shortcut icon",href:t.href,sizes:t.sizes,type:t.type}}},{key:"setOrRemoveFavicon",value:function e(t){var r=document.querySelector("head");if(!r){this.logger.error("<head> not found");return}var a=this.findFavicon();a?t?r.replaceChild(t,a):a.remove():t&&r.appendChild(t)}},{key:"findFavicon",value:function e(){var t=document.querySelectorAll("head > link");return Object(g["find"])(t,function(e){var t=e.getAttribute("rel");if(t&&t.split(" ").includes("icon"))return true;return false})}},{key:"updateFavicon",value:function e(){var t=document.createElement("link");Object(g["forEach"])(this.getFaviconProps(this.props),function(e,r){t.setAttribute(r,e)});this.setOrRemoveFavicon(t)}},{key:"render",value:function e(){return null}}]);return t}(a["PureComponent"]);w.displayName="Favicon";w.defaultProps=O;var C=function e(t){return{logger:Object(_["a"])({state:t})}};var S=Object(i["connect"])(C)(w);var j=S;var I=r(626);var T=r(79);var N=r(3437);var A={online:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lJREFUeNqMVk1vGkEMndmu4MLmkOWQoCqkh0APqAdUVNpKiXLux/+tFKlSDlEitcm15RI4BBBiucCFjdDUs571eL1L1EEC450d28/P9ujvH7+qbBljFFtaa9SgAN9ij9Xnb/LNdBrKIUn0rNKGKi1vvkpPQqi0syYiIBvlN7lt2kM7C6ErE2gr6BfcpCXO4mg4AURlCg6ZHCIrGuk1Kckp/q20P13u1NknW4E7VMkAreE8ONTLEA0Lpep0jDvgSReZIGRQbkSNuBnT0+ggOowP0X3uB0cC1qvu6453Te8lT3/Qv7i8SLfpbDrDN4efh4MPg91ut1gsMBprqYSEY1EledA1fNo+bcN3kiS0HzVgz7pMwGrJhRBs5glS+EuVQbkDZKIoAmHyOEEP2m/s6WmaJsnKRZ5XoijJkIrAWtKG8sP5dNw6ds46Puhmswni+HFsmclKnZe9M0BmiXD4uFavdbod3ERC713PRZDhA2GhJlkmmBuOj0vkt+EXbhl5BnY6bzvDT0P1f+v25nb0Z8SZ6rikMwO51gcGf8G7xkEDNtRqtfPLc1Be/7zebreYkv77PghXP65g5ypZWT3RP3ufjIWeOb6A7LPNZrNerymfIE/GE4wSKgAZNX2aenIrhwF5jzZCOpg3Ly4jf1bIlozsWF+zpxmxQ+liN81UWBaBMrIjOhpoZwkpBGl0hW0U1vNmvXGFooycHMbHFJY7OO4jwqAB6BOkieMYM9GrW818Oge4CuzUDCIqcW4GDsU00iKm0jrrnqFw/+t+uVxyHhZA9jRlZuAvOg5wgyXI8N3NHb55cnoCxgCxh98P6A1gBR/uIkc7LGQ4xx0WFA4lAEAAwuA76Ph85jR82ogJmje7whD37RBfOGodYYaJ4GgSMKFZW25BHiiVzwMaOx47KLF6DfPpupAxkFioO99Eiye6GhYRFEZYcdi2Wi0sMYCYJwYCek6fOdC+GRt5zQmlC8wSdGNgiG3RxlX46O8ITfojlBHDkuLwzU7cscr1LLqhd5y3hfK8Iogq7lLZ8jZK9zU+9co3KK4P+LnCca9nG8T9RedLXBL8tUUMIGwvojXtc99dthiqLnoWViADNHvvAGL2uROVFtcykZjwhZdFcAJc6TjbwTEM3QAq3lP40VSThRxU3U0rgf0nwADpJQebhAz3/AAAAABJRU5ErkJggg==",onlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4JJREFUeNqMVj1MFEEUntlsx1FzQgmXnI13JGA0XIWJmvgTEzAxBhXbw0Rjg4VWamFLIjWGUkwgFoIFNkAhJN5VHGEpMVBz1OPbfW/evJldyc1d9t7Nzrzf7/3o+9fvqmwZY5RYWmvcQQKewZl0396Uh5kb0jFT/K5QhsotJ75on4lYaZIWWMAy8jelbD7DJz3TlYl0SugL1OQV8JLeIAJIZTyFjHVRSppQa95kpeRTacc9PKmzT7YiYqpCA1PB1jjcD000wpQi7mh3JIMeRII9k8eYp4oyUg/pCVix5zJdAFAg+kp98x/f1Mbr3bPu45uPkN3aznd4tndb716+ZT+z7nw3QhTltaMLGa+JGw3gjuzw/JWxGp7s6y+lKiM7Gwp2XWoByLQBUvjLmcEXRqojyK4FArIzvNPea1G8tZZ3WemYzUklaWejxFNtrE7sMgvg05hskMjfLSVSXaY9CQhcJiMGXAYGB4AoD5VxZ2KygRYPWwtGqpVKtQI735ZXgiyhQN67dkdKplAbNf3k4dPmM9XbSjrJ6+evJFIJSzrLA7trI5N5CXXvcW1vbiltPSrSIs0VsCBwnKEkpUjMzb+49eA2EIufPq+v/oBjUzPTaNyXxSXwDOqbL7pUTW0KK1m8JM3uTg4SxG5tnDB6+veUqoBWQT5hqOAZKRNWRFIkMxlSjBGZ7B8i2J3IziGKDDsHwT79G+crOPG9XIG/jnsnwVwr9Zfgi5vloUvwPeokkOEeOrVIWOhoaIvMZ+D1fuFDjxHm+uFSSjg5MlzDtSvUAO3eIXRyfBIEkksnJZos8Sh8ZfkrhBSI2eYsehwAc3RwBMTUzBT6CvDT3mvDmfOzrqxCxu+Asd/EDQOitftHxnNjdb3bPYdLzfk5wv6vrWQ/8Qq1bNS2vsZeERWRAHq4OsxOAEdjhMuDZQuqpKCRcA5bvMZeC/ObbX181CuZWtevjrqq52tNrHMZF8ms81ouVIuhAcYoZjjXD6jbdIUbgHEhlO06LmxhqALwPTleAv9AqcFXP9c20Hs7m9uyqJFOHGqR2Ronu8KZR3g21bZwCAumIzEREPqjoDbJHHH7/3EjR5hfSYy4RPPGN+VyJGh+8qScnaQRqB/PWPA3Cg00xTOAlOFxVDoYyyRS0yBfcDkwzjk3531vBDZezYjxV1nMkY2y//DMI2NQNJsWOvafAAMAxE3MJSrFyPAAAAAASUVORK5CYII=",onlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABExJREFUeNqkVktsG0UYnpl9OF6/4JDYaWirNrFIgTbvNEilByS4FHogQeJQoCcOidQjiF6LBGcEnIs4cABBKZeUQw+IQkUicFDVJo0TJ0gtSW2paWLHr90d/t2ZnZ11TBubie3Mzu7+3//9b3z2xdeQuyilKLhMy6yb8KmVq+VLPT0j0RhqfakgF2MMO/YrlnfOYa098PsFQJjLamBA3SVQdyyrPQCCHdWbMJCx4PtPrdYmA64+osgjIJA4MMKEkFy10iYDLgv5QoWtYA+i4Qc+i+Xy/wJgPBo9QZ0PcWHyprVU3m3LyZJXGQ0B46huExAfiUSmzk2VCg/R3VzrDHCTDGBsYKMQomAyOjH63InnN48e3ia4nSjypLJ48fHYLeDR198XiUY6nk5cteotA/iJxv48T7gWc6yvEGVodCgWi8UT8av37y+36AlVeJgpDtEqwvTUy6e6urtM0zx45NDWw61EIv7C8MB3j7YvVMwwwi07WbiXZcTU22++M/0uXAFAtVI1IkY8kXjjrcnNjc3fF7On/7qD6b4BuPpSPgNG8kCSPQEm0jTNMAxAqtfr8M2nj96s1k4urZJ9FCj8+sQZBiAsQxHnz4w2/f7MK2dfrdVqn3/y2eyPs6ZVP/nSxND4sLq6NvLHrfiTbEXEA9Rb2NszQn3H0uBqILGeW9cUVVXUkfGRzmQnerbv43plfmf7SSZyFRYkRBF1vI0wRCfEKJwAxtrdHPyqSD0+fBxMpev631vbF/P5gXD4vVR3Omw8LorkngPSHbnH0nAJ0tlJdjE7MDYIJx1GONWdKpV29ZD+zKGDncmulbX1mdzqoGGMRaKnE08ldT3gA+hoTFk5n0HWpU8/aqza7rJtm8VVpVIpl3aLpVLhQeHihQ/h3LJNeKBH06KKciQUUjGGa5XLxTzT2GW6P90kHljxUBSnymKiqqquaaFwR2Gz0KGHbGpblgYK5Kn9wLRzZpnFixpoyJ4zvv3qm+xSFjbnp8/3ulb68ovLK0srsJk8N3lidABr+MrX3y/ML0DfLj7a0VTNIUdseMB2Mwl7MtVAlrm2YpeZuT9BASYd1rUrs8ViCV6a/mCGUbn582/Lt5eZQhBaTEvgwaIGds4tTIOZLHkC9r39vWy/cW+juFOETTQWTR1IcbffyTIkpylRN/wwJRD3DIBwk6h+FdozXgyODbHNwnyGnQ+OeydzGT/tRfOgvPo6ogi/RURoikcFiWQPrxYQo8xjon5k5jKiqPDXpXxiZvZ94LewIBuQu3HvMtjnxvVf2K2ffrjGrPfr9RtckNxCvNEBS/UDs8lOToK9eIiPYLTpfNYwi3gFjY8pBAXflPu+f/4fZhSjgrjV0A0DHU0gixdkiXIUyPpSRGUSckfhg08jQdp8BpAxAhIRlj0n93Ze7B7zcgM537h7rO8mqTxp+jZU2X/kxZxcsQPAXq/2WneAVmDUDBr2XwEGADZFpKJDFtSPAAAAAElFTkSuQmCC",trouble:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA6VJREFUeNp8Vr1PVEEQn3m+Ais+TOQ4TCCeARMxRyESC6EwkUIDpf530kqnJVZqZayMFBI5wpGAYMEdDZzR3Dqzszs7b+9gL7k3b97sfP5mdnH9yUvwyzkHZiGicISg/0yG+XGnFVZtQpdK6behNmBgJfPD+EqUgMFaFoHaGNxpbauMSlZCB1cgE3iNm7oyXTYbgSASXMUhF1PEpMu9VqY6Zf8Bk/ZcEv3PryIohTxANhyDE34eojOhDNMucRe26FklNDNCj4/CdC3pnxjD+mRw3/phM0HrxvydueQaXgmetVX3eqPf60GrLRtxY63/4pn7+w8Oj1CiYUsDmQgoGgoecU2+Lswz/+gEVN5zcL/tXdbEYo6FkmzGAoE8tTO0dpSZ8TEmdnaDgwvz/HrZg6NT3ib67F51ukiNJr9YCV+usO7OsHTrAAMeEKdrrHfnB2uCak9k+SjVrAJO7N0cgaVmwPXjZqjP02XnI+5LxibGiMM5o9S12i7rkliDgdkgSh/eh+erfUi5w8asa8yC0ML3HH59t42ttnE0ZpuI0uAXbXl/HsCbLepzDuXVOou/fV9cXPKueo1AxbY3tyjD8Os3Xlya5mKkpimZIsDUQPytew6drov1xE6XKyw+3hpn/vEJ7h3ITielCc0EaVzQW6mKhxaKaI8f59ESwD51m01STsIkT3Mg6vEsaYtCuzzlR3CFYf89zjtSGQO0XOjns25sFHD5yRFgH1OUTXCRW1kmMU50w2N0YhQJQiJWr3EE9RqujPAm6u3jU9M9Jt2cIm1xa6YxQxBysSK8lhbB5NZzmoIx2P5YUHzqfna6lGn2IqiZ/UPc3GL21CRPoU6XgSguPphzS4sM/A+fCu8NnJ1DVkjbz2WlwjHvtChwHwqDYq/NgJE9j5reg8ixp012gsqnonqIm1ntaSnA8Yk0ecien3pOz1oFSLDHuEpIKSqdbCpBNLVYnQGDFIG4RPi5yYXloa2TMY0A6eEsgsGjVZ3yAKUCQOc88L37VADs/al4nVS7VG3Ba5m7YEpE05gQ8n03jnGAr99YA5lMZQSXHZZqLA277I6lNqiMYRjET+T45y8QnDNDLUQfzw/b2eXgzUejSSAZuK/ZsTh4g7L8wurNBlHiG4Hs/hLPJMwuCenaUmnxeOBko+kq98Nlq4oOPVGEU+QBuivvANnZFzQCZtcywMpMKa/ZnAWXJTd33EjYHJbyhOo9xarWu2WlBsPupkMT+1+AAQCmPwV2bobFnwAAAABJRU5ErkJggg==",troubleUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1hJREFUeNqMVr1PFUEQn9lcIc+ORylHB9gBNpLY+dEISKWhNHYWdhb+FRaa+CeYWJnYKVoJdAiVQMc7Oh90go1vnX2zOzs7dxj2JXfz9mbne36zuLa8AuPlvQe1EJF3mKCn4Qn76aRmFmlMV0LJt04d0FpZfde+EBVg1GY8EB3tk1q38Ahn4Tp4h4HA/5gpy8jS0YgEkeALg3wKUSC9tVo2xSj9BMzSLSeOf+PlolCwDgbFyTnety565UqXdPbb6aSbTEhk2jVWmAJe26EjQasqQoYdBUrExDX/7Kmfnx2dX8DLV47FvX39l54HR/jmHUqcxXY5G6uos3jYNPq6tEjSA8/BITL/3Gzk7PUCH4g3aGuhohMpQcBv6QzJ3fR0FHd4FHnqaZ92MOYbUZ8Vo11uNP6lTIwjFhebLx7QztJiVPnzIJtv+oNXZUKmM3ZrwU9Ohs2pfuReXGDOUX0jSqlrmKmDNV++2i5JOWgVBoflwT14tDIyuVlf9QCFgetjnsEJkoJsaIo2EU7Vb9TMldDvdyDHZWv3B3Do2Expi9Arq7cfarwELgpV+xtP/J3lQLz/4L5vh2P373p27uMnMhzZ3jboxipKLQydiSJaCqY5ifg1l3J+dparw/QTFyc9XXZHyp8NGbtMLSb5PB5E/BKVx01UaSdHLPvwt2ojeJRbh78ia9AgN9f1nu9NRGOpuqb6vmmQOlwHWRwKGaWJxr7o+iVZL56PrphhwQ+pIh1k5wXDMQP1TH31CoLhEE0iBTpzHwjEs/LPmxQT0g3razEHVDDNSThAJcSNTfVDSEc8FxcZVPQEtY2m4XAMk+GYZHhrG8//BJzbeJxqfx8HA3HaFqjgqys6WWWC6Dph3PA0BJpOU3qnUgOSdCNRAL/woBhh5bCdn4PkTdy/OV+CqAZOhodWxznddcXIhWxs08QOZ+wLIHqYZ0YeZJinZpGD9ghjEwYN/Bri6Sns7kUM396hkI6I3tsvQC3aJKlWkaraNx8J6NaOS+5Hnt/nfvObM1OvfYPS+85gk+6RvH9JGKXe5ZOuETvRRLMcMMNPc+q7k0ZGPVF4x1kH/aV3ADP7ZHiYa1meNiYH7cPGORNca7ji0DGs+A3lPaWYP3Ln0Tnoupt2BvafAAMA603M1k3efM4AAAAASUVORK5CYII=",troubleMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABBhJREFUeNqkVk1vG0UYfudj/bExbWo3kJLaKRWO3aaooIoKOMCBDwlBI06F/oEeQOIHcIU7N34CEieQekMIkBDtBaEgDk1aRIgdRGiSpqSpN1nvzPDOzuzurO2SxozX69lZz/vM836ThRffhngopSA/IhH1I7zCYD/4eGbmQuUxOPzgKJcQgjNzT0eybmHFEPyjAgCxsgYYqHikqPeFGA+AEn30EQxcLPz+FYZjMrDHBwUJgRTJAgOhlK7s743JwMqCTGiqK5yjaLzhtRQE/wvA8Bi0hNIXjWE2IrEc9MYHsFaN1ZTC6KPjl1K/RBbepJv1u2MBkBERYNjghFHKCD13lj59mv4xtf0PhON4USLV+EuGZ14hh0ad+WVWrNAvg/VDA2SBZj6JJTRMrH1G2ZkWmZjglQq/dmfn9iEtwVon54adx0wuPAfzZ+WpWTh/DqRUeG3dVUti5yI95hF6aIBMdHx74zW4clm256DVNHrT+ntyWvnV/hrsNnePZbo90Ivs8RMMs7NWs4QoBY+TcolVfH7kiDc5Wdid3vt2alXAI2UncumFtwxAqhllOVhrv/eueumi7Efy8y/ghxtRJPrPzIft5r7/d/GVtVNHqXewm7rZTSMlc0Noto4kCOd0fZ16jHPG59terVoIZ8JPdn/76f7OQdk0PnBKIk2iqHNcLpdU46TGYpSs/YlOhRt4q6n6EXge6T4QH213zpfLV6dPNMv+QwAcx09PreU29GOjblZgtUNacwhPSyU1VeO9PVLw6InHRXWS3V7vf7Dy+7O+//xE5eWjk08UCjkbYEUzh3XjuTUHH74vB7N2/F5IJSIVhnI/FMGe7AXR9rb49DN0YilkhEJmPK/C2FPFIicEn7mVS2ykmcfZxih/0ElF64pwncEZJx6XxQK9d0+VCjpOhPCUkhtK3onkShQYf+G5gpwY4+tvoNPFIId3FrQN8M1X10h3TfvD668qjAw0+3ffw81lJoR80FOIhLsk1aRlnDRJIpO7Cc7oyjwu3dIHMNJx/HidoN5x05XLlsrir3R1Fd1B64AzaU6JPIzX4EwLJIrnlOBYAuf1up1vbkEvZuyX4XjNmr3TsZGvi5KK3Y8oin5vAKhVCU+z0HB70W5Bwsaun2lbyOVb2T+z4qFs9tWiqH1FU9dM/5qSOJ5ki27XRni1alduLidbkhrlxpNRc2aDrITl2XS6sLFJtrbg50Wbw6/fwNwlcb74SyLILSFJ6+DmQWI6OzcIhvHAtmBqZH82kOSThGbbFAr5nW5hyNYfosa0VUhfDVTDXEVLkdMNrkTXC9zzKlAuCZvNwGl8Bgmq0T2Ai5GTCMS1nFvbbbL7j80D5DLlDmk/DlK308x0yM0vJD7nZuwcMKicDfK0cq1mXrH/CjAAfjaCPa5V5tYAAAAASUVORK5CYII=",offline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2pJREFUeNp8Vr13EzEMly5uQl+nlKnpRrtRNsp7DO1Ilz5W/gZW/iG6MrLCyMhIN9JsKVvDlH7dRdiWLcu6K27fxaeTrY/fT7Lx/dtziIOIQA1EZAlP/NPoBHleqZVlN547mcm3QRvQG8X8kFwmDjBZMxGIjf5KbVt0RLMKHajBMMH/uCnD7KWzkSZ+ClQ5RDlFYUrWaxGKU/oJWHa3mhj/4mjSpmADDIZzcCy3IZIKZWh3jrvRoBskJDM8nzawPyr7745w1iT3tR86E3401XZAg+Txr2fP4NMOHbmy8t2EPu7Aybj4J1mWHPiRWDRIHnaNv/LWyw2IPksWm6AHkli0XHA+Xxkg4F+pDMFu38E0hnr5mDw42grPW4JlF5bxfnqtOO2kCIIlJMFH8+lFzPVVK3zACAYFewFV1NVa/GMDJYNUIbaNcDxOlt6Mk7bPOGtyfnYbOJkE7WXnzZOpklzJvd7AaXm1FWDUXw9c+AdVSlESXr/e4VUEVZiatDAayFLU8P5u6fM6ZMOH8mE7qH+5xXV0ajbCs2j7Yh3w+7PB9UYVV2BqYWOJAEsBhW9/CVatnxLjudrAZcsJx+cR8OsO5i1DRQxNKiYVo39zsrFuXno+jQgHgub+tRcNeMyFHYB1N42iACf4QiPbERMNMK0/jNW7bHNhU6rnm00uFCB7ciTa5xSZDs56p5MUx4EQJnNpFg3MHJ5yKB36dFXsRJUidoGtiRm/qaHQ8dh28uOtpPDtHpctifvmdHGl9yKImUWHF+sg3hvR2SQg7InIfrx05I154n+/T3y7iRQyXUiy7SqEc9798IHHUAIp5h3Ocx29jqEsskTaWGmU9Qno6kOchBC84GAUntctpQLzJhnzjuSs7begkiigpqpkhQSXGOM575JLnj/bmDgqnbG0ACLL19BN9RFWH7aHMT8egFWmMrcKD8Bd7AZV4+QCI3vNcdYFZcl3Y8+QX4+pnfvHz4egsiKVE31GCU2wxsDcscSGh3HeVn3wDvHHAx+uoJtaCiKfH7qyXf/mI9EUOvfua7ot9m9QWt7ofU0jKnKlYO4vmIe5JJRrizmAuL2Y1vSU++mypTqjPlFY0tgA6ck7gDn70o6A5loGul9rDPqLTXAmudZxpaFz6PgX6nuK3lpqssJg6G46mNh/AgwA1LYLPz5hMyUAAAAASUVORK5CYII=",offlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAzFJREFUeNqMVr1zUzEMlxyHtincsdDOyUo6Aytz6Qoz3HVk5y/gr6ATQ2dgBWZYKWvDDAsDaZvmJUZ+smVZ77UXp5e4sqyPn76MR08OoV0hBFALEZnCG/o2PJGeb2pmkcZ7Lzs569UBnVXU99Fl4wGTNuOB6Oje1LqFRzgr1yE4jBu8xUxZRpZGI21oC6EyKGSI4jZYq4UoRulvwCLdcmL7aZdLQsE6GBVn55huXQzKlT7p7LfTQTeREGS6OVaZAkHboZGg5SvIsCdBaTOC8PoeTH2YBzj+mwx/fz8enS3h7RwEZ7Fd7qYs6k0eNo1OH90h6cDimH86TJy7LvKBeIM2FzzpzAEC/pXKkNiNs59nTeIZDxSF442o74rRrhQaf3IkWsTSmoqC1gOikE+KUtWEwcMbyHTEHg/hgYvEvZQKQHLZY/FgPMDJIHr18SqYKskx6CQGw3K0jc93bGxe7ABAqCnx39mKFChDM9q0cSp/k2bOBLZ9w/XtOkHHZkpZxEou5pcCimcnl/DuIjK+GsHTrUg/ucDPi2jjsy1g504vo+FsrzRdVD62dYC2l5lGNvZpTzhwsj/MVv1ZR2mqL5R64lDRtyvuSPpzXrUuj1Q8z5sUIMna81WqLzs5UtrHf323g7Pcia+yhczn4trF+Mdr3+G+oyOc6+pRcEfEaKKxLzp/Sdabu5tGWPqHZJEG2QXp4Vga9WSAm6fQ7zWYQErrLHUgLZ6Vf7gK5DhppsRnlChhfq3ihcPtwIVN+fOziTzzdWkqeoLaQtPtkNaPpo1nBurLAubtpZejnPtLmDWCe9WCClCQ54GMnZKggBJhAoGAptsUXmkbswaMRGn4lQfVCKuH7cEwFU1qmYgHQzCUaoKGquL4yOlpXo1c6haDUBmr+gc1UZkZZZBhmZpVDLojjE0guaeriA+1Gj76ep1K9/sSdFNLNkmoFVK++/IRQElcdj/x/FuHTws0U6/7gtJ0p+WaRlToN8Ao+S5HOkfsRBPNcsEMP82p3066M+qJwhRnHQw3vgHM7JPhYZ5lgNVM8rdcNs4ZcK3hikNj6PkX6neKFl3ePDoGfW/TXmD/CzAAcryyBfjeu1oAAAAASUVORK5CYII=",offlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+pJREFUeNqkVktvHEUQ7q7unp19xAkHJ6BFAhshgeI8pAgpuSAO3OLkCJw5cOEXwBX4F/yAiBMCxA1yyQWUG4kEIsoGoyiWDYg4jsc7091F9XRPT8/YkeNlPLvunUd99X1V1VX8+pV1Vh+IyLqHNrrSdJbFvPhsOr00OcGOf0iyyzmnlf+OR3M9wJoD8M8LwHiw1WOA9RFRnxizGABw5/ohDFIs+jwqywUZBPcZsoZARArAjAPAbL6/IINgi7VGo1a0JtP0ReevRfG/ADyPfiTQnVDDbGvzW7G3OECIai1ThHGu0wdgzPl7Y3i8+89CAPyQCvBsaCEABIeLA/FGJh7uPd6pykWyqLHq86XF87eIw0oGIyEHnH+9vXlsgLbQ/F8TCQdTqy9AnM/ERIolJb/9d+f3Y0YCYoR9CFK5Liu2PsCrOZ9KGAt5Qqo3c/HVo43iOEUne9LHUF/P+ftDx0IjKw1JJJakvDZWW/Py1ubs3elrrbZHMgjuN/Xs31yGQEWQFwBDQSrJk0q9oFSh57c2N55zd+LXLl/1ALGAkQXfvFwfjtg7GVbWfrmLPxSVNtUlVq6xciAHV868siTV0Wma7m4OqVl7QqvS1RqReIighJRCns+z5UFmTPnFg3u3n+wcFYPa4UgibqIUCbo8Yrgi3COE8YdllFSSybNDXmmmOGzMq0//3LgwHH704kuvD0fPDHLMnOg12V2VDoOs+wqZGbaWETzkyE4rXnCeAbyci2Wp71XVx7P7F0ejt8aTt0+eOpNlnRhQR/POpgm6ptgnk0N2bTotokYsjd23hvJ1z5i/KvP5jrHWGkt3cKrURIiVwUByykCUwS4PleZ/roqmrFNffFLVyeDKD7gCyEH8zU2eWYvWGIVot9FuaTvThfdJdhpyE4xv9nFmnEQfDJlX6UbBHhgHsZ7jWemS+fsC71ag0ewaUJKIoQXLaoq1JMGm7FRZrZX/+Yt2BbfSCPXjnD2tHaGs9U/c1vy+pnSQ9JwU1ntJPHzW0MoZ5Nit5CQStH5VhPWWZU/dEsecnYYm7Dq0PNeUsE4/jkB57wEgSCLj7n9wvDinQiTu6EDxnGK9K23ugXPYL5wpCLcgpmZ8NJJYbhjMdMiiuH/cqZpXmh6V1pMXsY1B28K6bMjuDeP0+akMt26WjhPZ+bliwVDaQprRId0HZTqtpDDeXJNd4Zldi9/NOzNHHEb6c1tzHVK7vamivf4MGeOoEG/1umGno0Xk+EJqMc2C1F9kmI45aUcJg0+fIB4+A6QYHYuMp5FLe3s/Bgdf7pHridt3vDNpthpK/581EUt37A4ww04MurQ6o2ZX2P8EGAAu1YEi4TmT9gAAAABJRU5ErkJggg=="};var R={store:v["b"].shape({getState:v["b"].func.isRequired,subscribeImmediate:v["b"].func,subscribe:v["b"].func.isRequired}).isRequired};var M=function(e){f()(t,e);function t(e){c()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderWithState=r.renderWithState.bind(r);return r}d()(t,[{key:"renderWithState",value:function e(t){var r=Object(T["isHavingTroubleReconnecting"])(t);var a=Object(I["isOnline"])(t);var i=!!Object(N["getTotalUnreadHighlights"])(t);var s=Object(N["hasUnreads"])(t);var o=void 0;if(r)o=i?A.troubleMentions:s?A.troubleUnreads:A.trouble;else if(a)o=i?A.onlineMentions:s?A.onlineUnreads:A.online;else{o=A.offline;o=i?A.offlineMentions:s?A.offlineUnreads:A.offline}return n.a.createElement(j,{href:o})}},{key:"render",value:function e(){return n.a.createElement(b["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(a["Component"]);M.displayName="WorkspaceFavicon";var P=M;var x=P;var D=function e(t,r){if(!t)throw new Error("mountFavicon must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(x,{store:a})),r)};var F=D;var L=r(51);Object(L["a"])("interop.mountFavicon",F)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(5);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var m=r.n(p);var h=r(8);var f=r.n(h);var v=r(129);var b=r(3465);var g=r(17);var _=r(10);var y=new _["b"]("view");var k={title:v["b"].string.isRequired,logger:v["b"].object.isRequired};var O={};var E=0;var w=function(e){f()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){E&&this.props.logger.error("Multiple DocumentTitles mounted");E+=1;this.originalTitle=document.title;this.updateTitle()}},{key:"componentDidUpdate",value:function e(t){t.title!==this.props.title&&this.updateTitle()}},{key:"componentWillUnmount",value:function e(){E-=1;document.title=this.originalTitle}},{key:"updateTitle",value:function e(){document.title=this.props.title||y.t("Slack",{fallbackHash:"430b38bf6daa7f9164b164b2ffd540b5a3afe2fd",fallbackHashNs:"migration_status_page"})}},{key:"render",value:function e(){return null}}]);return t}(a["PureComponent"]);w.displayName="DocumentTitle";w.defaultProps=O;var C=function e(t){return{logger:Object(g["a"])({state:t})}};var S=Object(i["connect"])(C)(w);var j=S;var I=r(19);var T=r(50);var N=r(3437);var A=r(69);var R=r(12);var M=r(3454);var P=new _["b"]("view");var x={store:v["b"].shape({getState:v["b"].func.isRequired,subscribeImmediate:v["b"].func,subscribe:v["b"].func.isRequired}).isRequired};var D=function(e){f()(t,e);function t(e){c()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderWithState=r.renderWithState.bind(r);return r}d()(t,[{key:"renderWithState",value:function e(t){var r=Object(A["getPrimaryView"])(t);var a=Object(I["getChannelById"])(t,r);var i=Object(T["getCurrentTeam"])(t);var s=!!Object(N["getTotalUnreadHighlights"])(t);var o=Object(N["hasUnreads"])(t);var l="";if(i&&i.name){var c="";r===M["a"].allUnreads?c=P.t("Unread Messages"):r===M["a"].allThreads?c=P.t("Threads"):a&&(c=Object(R["getDisplayName"])(a));l=c?c+" | "+i.name:i.name}s?l="! "+l:o&&(l="* "+l);return n.a.createElement(j,{title:l})}},{key:"render",value:function e(){return n.a.createElement(b["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(a["Component"]);D.displayName="WorkspaceDocumentTitle";var F=D;var L=F;var B=function e(t,r){if(!t)throw new Error("mountDocumentTitle must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(L,{store:a})),r)};var U=B;var q=r(51);Object(q["a"])("interop.mountDocumentTitle",U)},function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"c",function(){return i});r.d(t,"b",function(){return s});var a=r(351);function n(e){return i(e)||s(e)}function i(e){return"search_switcher"===Object(a["getGroupForUser"])(e,"sli_omni_switcher")||"search_switcher"===Object(a["getGroupForUser"])(e,"sli_omni_switcher_2")||"search_switcher"===Object(a["getGroupForUser"])(e,"sli_search_switcher")}function s(e){return"omni_switcher"===Object(a["getGroupForUser"])(e,"sli_omni_switcher")||"omni_switcher"===Object(a["getGroupForUser"])(e,"sli_omni_switcher_2")}},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(14);var f=r(2);var v=r(90);var b=r(17);var g=r(15);var _=r.n(g);var y=r(37);var k=r(180);var O=r(188);var E=r(455);var w=r(18);var C=r(121);var S=r(75);var j=r(10);var I=r(280);var T=r(217);var N=r(13);var A=Object(N["c"])("TS.client.channel_header.calculateNoDragRegions");var R=r(3462);var M=r(54);var P=r(446);var x=Object(N["c"])("TS.view.resize_sig.add",f["noop"],true);var D=Object(N["c"])("TS.view.resize_sig.remove",f["noop"],true);var F=r(268);var L=r(3463);var B=r(3461);var U=r(3481);var q=new j["b"]("search");var G=new j["b"]("jumper");var H={close:m["b"].func.isRequired,interfaceMode:m["b"].string.isRequired,displayQuery:m["b"].string,searchAutocompleteSuggestionAccept:m["b"].func.isRequired,searchPrecache:m["b"].func.isRequired,setRequestFromEditableRequest:m["b"].func.isRequired,setSearchInputBoxUserQuery:m["b"].func.isRequired,userQuery:m["b"].string.isRequired,visible:m["b"].bool.isRequired,searchAutocompleteMode:m["b"].oneOf(Object(f["values"])(F["searchAutocompleteModes"])).isRequired};var W={displayQuery:""};var V=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["bindAll"])(r,["onSearchClose","onSearchAutocompleteSuggestionAccept","onSearchInputBoxEscape","onClickRefreshSearch"]);r.state={appBannerHeightPx:r.getBannerHeight()};r.onSearchInputBoxFocus=Object(f["throttle"])(function(){return r.props.searchPrecache()},6e4);r.onResize=Object(f["throttle"])(r.onResize.bind(r),50);x(r.onResize);return r}s()(t,[{key:"componentDidMount",value:function e(){Object(T["a"])()&&Object(S["areDragRegionsRequired"])()&&Object(f["get"])(window,"desktop.app.updateDragRegion")&&window.desktop.app.updateDragRegion([])}},{key:"componentWillUnmount",value:function e(){Object(T["a"])()&&Object(S["areDragRegionsRequired"])()&&A();D(this.onResize)}},{key:"onResize",value:function e(){var t=this;this.setState(function(){return{appBannerHeightPx:t.getBannerHeight()}})}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(P["e"])();this.props.searchAutocompleteSuggestionAccept()}},{key:"onSearchInputBoxEscape",value:function e(){this.onSearchClose();return true}},{key:"onSearchClose",value:function e(){Object(M["g"])()||this.props.close()}},{key:"onClickRefreshSearch",value:function e(){this.props.setRequestFromEditableRequest({fetchSuggestions:true})}},{key:"getBannerHeight",value:function e(){var t=window.$&&window.$("#banner");return t&&t.height()||0}},{key:"clear",value:function e(){this.props.setSearchInputBoxUserQuery({textyString:""})}},{key:"renderMode",value:function e(){switch(this.props.interfaceMode){case y["interfaceModes"].SEARCH_RESULTS:return this.renderSearchResults();case y["interfaceModes"].EDIT:default:return this.renderQueryEdit()}}},{key:"renderSearchResults",value:function e(){return p.a.createElement(U["a"],{onClickRefreshSearch:this.onClickRefreshSearch})}},{key:"renderQueryEdit",value:function e(){return p.a.createElement("div",{className:"c-search-autocomplete","data-qa":"search_autocomplete"},p.a.createElement(L["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))}},{key:"render",value:function e(){var t={top:0,left:0,bottom:0,right:0};var r=_()("c-popover","c-search_modal",{"c-search_modal--autocomplete":this.props.interfaceMode===y["interfaceModes"].EDIT});var a=q.t("Search");this.props.searchAutocompleteMode===F["searchAutocompleteModes"].NAVIGATION&&(a=G.t("Jump to a conversation. Up arrow and down arrow navigates results, return selects, escape closes."));return p.a.createElement(O["a"],{ariaRole:"dialog",ariaLabel:a,isOpen:this.props.visible,position:"top-left",targetBounds:t,onClose:this.onSearchClose,shouldFade:false,overlayClassName:r,allowanceX:0,allowanceY:0,shouldFocusAfterRender:true,shouldReturnFocusAfterClose:false,contentStyle:{marginTop:this.state.appBannerHeightPx}},p.a.createElement("div",{className:"c-search__input_and_close"},p.a.createElement(B["a"],{autoFocus:true,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus}),p.a.createElement(C["a"],{className:"c-search__input_and_close__close",onClick:this.props.close,ariaLabel:q.t("Cancel"),"data-qa":"search_input_close"},p.a.createElement(w["b"],{type:"times"}))),this.renderMode())}}]);return t}(d["PureComponent"]);V.displayName="Search";V.defaultProps=W;var z=function e(t){return{interfaceMode:Object(y["getInterfaceMode"])(t),displayQuery:Object(k["getSearchInputBoxDisplayQuery"])(t),userQuery:Object(k["getSearchInputBoxUserQuery"])(t),visible:Object(y["getVisible"])(t),searchAutocompleteMode:Object(F["getSearchAutocompleteMode"])(t)}};var Q={searchAutocompleteSuggestionAccept:R["a"],searchPrecache:I["h"],setRequestFromEditableRequest:v["setRequestFromEditableRequest"],setSearchInputBoxUserQuery:k["setSearchInputBoxUserQuery"],close:function e(){return E["a"].apply(void 0,arguments)}};var K=Object(h["connect"])(z,Q)(V);var Y="IMPROVED_SEARCH";var J={logger:m["b"].object.isRequired,resetSearchAfterUnknownUIError:m["b"].func.isRequired};var Z=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={hasError:false};r.retryRender=Object(f["throttle"])(r.retryRender.bind(r),100,{leading:false});return r}s()(t,[{key:"componentDidUpdate",value:function e(){this.state.hasError&&this.retryRender()}},{key:"componentDidCatch",value:function e(t,r){this.props.logger.error(Y,"Error caught by ProtectedSearch "+r.componentStack);this.setState(function(){return{hasError:true}});this.props.resetSearchAfterUnknownUIError()}},{key:"retryRender",value:function e(){this.setState(function(){return{hasError:false}})}},{key:"render",value:function e(){if(this.state.hasError)return null;return p.a.createElement(K,null)}}]);return t}(d["PureComponent"]);Z.displayName="ProtectedSearch";var X=function e(t){return{logger:Object(b["a"])({state:t})}};var $={resetSearchAfterUnknownUIError:v["resetSearchAfterUnknownUIError"]};var ee=Object(h["connect"])(X,$)(Z);var te=t["a"]=ee},,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(129);var p=r(1);var m=r.n(p);var h=r(14);var f=r(15);var v=r.n(f);var b=r(3267);var g=r(37);var _=r(1135);var y=r(11);var k=r(63);var O=r(10);var E=r(1744);var w=r.n(E);var C=new O["b"]("search");var S={tab:d["b"].string.isRequired,setTab:d["b"].func.isRequired,usePrimarySearch:d["b"].bool,featureSliChannelSearch:d["b"].bool,featureSliUserSearch:d["b"].bool};var j={usePrimarySearch:false,featureSliChannelSearch:false,featureSliUserSearch:false};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSwitchItem=r.renderSwitchItem.bind(r);return r}s()(t,[{key:"renderSwitchItem",value:function e(t){var r=this;var a=t.name,n=t.id;return m.a.createElement("button",{key:n,className:v()("c-search__tab c-tabs__tab",{"c-tabs__tab--active":this.props.tab===n}),onClick:function e(){return r.props.setTab({tab:n})},"aria-selected":this.props.tab===n,role:"tab","data-qa":"search_tab"},a)}},{key:"render",value:function e(){var t=this;var r=[{id:"messages",name:C.t("Messages")},{id:"files",name:C.t("Files")}];this.props.featureSliChannelSearch&&r.push({id:"channels",name:"Channels"});this.props.featureSliUserSearch&&r.push({id:"users",name:"People"});return m.a.createElement("div",{role:"tablist",className:v()("c-search__tabs","c-tabs__tab_menu",{"c-search__tabs--primary_search_legacy":this.props.usePrimarySearch&&!Object(k["a"])(),"c-search__tabs--primary_search_sonic":this.props.usePrimarySearch&&Object(k["a"])()})},r.map(function(e){return t.renderSwitchItem(e)}))}}]);return t}(p["PureComponent"]);I.displayName="SearchTypeSwitch";I.defaultProps=j;var T=function e(t){return{tab:Object(g["getTab"])(t),featureSliChannelSearch:Object(y["isFeatureEnabled"])(t,"feature_sli_channel_search"),featureSliUserSearch:Object(y["isFeatureEnabled"])(t,"feature_sli_user_search"),usePrimarySearch:Object(b["a"])(t)}};var N={setTab:_["a"]};t["a"]=Object(h["connect"])(T,N)(I)},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(15);var f=r.n(h);var v=r(14);var b=r(37);var g=r(3267);var _=r(63);var y=r(3);var k=r.n(y);var O=r(2);var E=r.n(O);var w=r(17);var C=r(186);var S=r(50);var j=r(90);var I=r(280);var T=r(278);var N=r(455);var A=r(150);var R=r(4);var M=r(164);var P=r(699);var x=r(795);var D=r(670);var F=Object(R["e"])("Clog clicks on a message or file using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.iid,n=r.type,i=r.ts,s=r.channelId,o=r.userId,l=r.botId,c=r.extraArguments,u=void 0===c?{}:c;var d=t();var p=e(Object(P["getSearchSessionId"])());var m=e(Object(P["getQuerySessionId"])());var h=Object(S["getCurrentTeam"])(d).id;var f=Object(M["a"])({state:d});f.track("SEARCH_CLICK",k()({click_iid:a,click_target_type:n,click_user_id:o,click_bot_id:l,click_channel_id:s,click_team_id:h,click_timestamp:i},Object(x["a"])(d),{request_id:Object(D["a"])(d),search_session_id:p,client_request_id:m},u))});F.propTypes={type:m["b"].string.isRequired,ts:m["b"].string,channelId:m["b"].string,userId:m["b"].string,botId:m["b"].string};var L=F;var B=r(10);var U=r(92);var q=r(54);var G=r(20);var H=r(18);var W=r(444);var V=r(138);var z=r(361);var Q=r(446);var K=r(1118);var Y=r(171);function J(e,t){var r=e[0]&&e[0].ts;if(!r)return"";var a=Object(Y["j"])(r,{returnMoment:true});return Object(Y["g"])(a,{shortenMonth:t,excludeYear:Object(Y["f"])(r)})}var Z=r(605);var X=r(873);var $=r(21);var ee=r(144);var te=r(48);var re=r(609);var ae=r(12);var ne=r(19);function ie(e,t){if("string"===typeof t)return Object(ne["getChannelById"])(e,t,true);if(Object(ae["isMpim"])(t))return Object(ne["getChannelById"])(e,t.id,true);t&&t.id&&Object(ne["getChannelById"])(e,t.id,true);return t}var se=new B["b"]("search");var oe=/[\ue000\ue001]/g;function le(e,t){if(!t)return null;var r=t.team;var a=ie(e,t.channel);var n=t.messages||[];var i=Object(S["getCurrentTeam"])(e);var s=null;if(r&&Object(re["a"])(r)&&i.id!==r){var o=Object(S["getTeamById"])(e,r||i.id);s=Object(te["getTeamDisplayName"])(o)}var l=void 0;var c=Object(ae["getDisplayNameForChannel"])(e,a,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var u=J(n);var d=n.length;var p=a&&a.is_im;var m=a&&a.is_mpim;var h=a.is_ext_shared;var f=i&&i.id!==r&&Object(re["a"])(r);var v=a&&a.is_shared;l=p?se.t("{count, plural, =1 {Direct} other {# messages from a direct}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):m?se.t("{count, plural, =1 {Group} other {# messages from group}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):h?se.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):f?se.t("{count, plural, =1 {From} other {# messages in}} {conversationName} in {workspaceName} on {date}:",{conversationName:c,date:u,count:d,workspaceName:s}):v?se.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):se.t("{count, plural, =1 {From} other {# messages in}} {conversationName} on {date}:",{conversationName:c,date:u,count:d});l=Object(O["unescape"])(l);var b=n.map(function(t){return Object(K["a"])({day:{ts:t.ts,isFirstDay:false,isLastDay:false},name:Object(Z["a"])(e,{userId:t.user}),time:Object(ee["a"])(t.ts,{do24hrTime:Object($["getUserPref"])(e,"time24"),includeSeconds:false}),text:Object(X["c"])(e,t.text.replace(oe,"")),reactionCount:t.reactions&&t.reactions.length||0,replyCount:t.reply_count||0,isStarred:t.is_starred,isPinned:false,isFirstMsgForDay:false,isLastMsgForDay:false,isFirstUnreadMsg:false})});var g=b.join(". ");return l+" "+g+"."}var ce=r(651);var ue=r(286);var de=r(31);var pe=r(23);var me=r(11);var he=r(675);var fe=r(33);var ve=r(147);var be=Object(de["b"])("Jump to message by permalink either in this or another workspace",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.permalink;var n=Object(pe["getTeamId"])(t());var i=Object(S["getTeamById"])(t(),n);var s=i&&i.domain;var o=Object(me["pageNeedsEnterprise"])(t());var l=Object(ue["e"])(a);var c=l.team;var u=c;if(n&&Object(ue["d"])(n,a))return Promise.resolve();if(o&&s&&u!==s){var d=Object(ue["c"])(a);if(!n)return Promise.reject();var p=Object(fe["c"])(n);var m=Object(ue["b"])(p,d);if(!m||Object(ae["isNonExistent"])(m)||Object(ae["isFromAnotherTeam"])(m)){var h=Object(S["getTeamByDomain"])(p,u);if(!h||!h.discoverable)return e(Object(S["ensureEnterpriseTeamIsKnown"])({additionalOptions:{domain:u}})).then(function(e){if(!e){if(Object(ue["d"])(n,a))return Promise.resolve();Object(ve["g"])(a,"blank");return Promise.resolve()}Object(he["b"])(c,a);return Promise.resolve()});Object(he["b"])(h,a);return Promise.resolve()}if(Object(ue["d"])(n,a))return Promise.resolve();return Promise.reject()}return Promise.reject()});be.propTypes={permalink:m["b"].string.isRequired};var ge=be;var _e=r(69);var ye=r(32);var ke=r.n(ye);var Oe=r(173);var Ee=r(665);var we=r(1742);var Ce=new B["b"]("search");var Se={featureTinyspeck:m["b"].bool,theme:m["b"].string};var je={featureTinyspeck:false,theme:"light"};function Ie(e){var t=e.theme,r=e.featureTinyspeck;if(r)return p.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},p.a.createElement("strong",null,"Message Group failed to render. "),"Please go to #triage-search and"," ",p.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return p.a.createElement("div",{className:"c-message_group"},p.a.createElement("div",{className:"c-search_message c-search_message--"+t},p.a.createElement("div",{className:"c-search_message__gutter"},p.a.createElement(Oe["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),p.a.createElement("div",{className:"c-search_message__content"},p.a.createElement("div",{className:"c-search_message__content_header"},p.a.createElement(Ee["a"],{userId:"",isInteractive:true})),p.a.createElement("div",{className:"c-search_message__body sk_dark_gray"},Ce.t("There was an error displaying this message.")))))}Ie.displayName="ErrorSearchMessage";Ie.defaultProps=je;var Te=function e(t){var r="";var a=false;try{r=Object($["getUserMessagesTheme"])(t);a=Object(me["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:r,featureTinyspeck:a}};var Ne=Object(v["connect"])(Te)(Ie);var Ae=r(65);var Re=r(151);var Me=new B["b"]("search");var Pe={featureTinyspeck:m["b"].bool,ts:m["b"].string,channel:m["b"].object,user:m["b"].string,theme:m["b"].string};var xe={featureTinyspeck:false,user:"",ts:"[Message timestamp (ts) missing]",channel:{},theme:"light"};function De(e){var t=e.user,r=e.theme,a=e.ts,n=e.channel,i=e.featureTinyspeck;if(i)return p.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},p.a.createElement("strong",null,"Message ",a," in ",n.id||"[Channel id missing]"," failed to render."," "),"Please go to #triage-search and"," ",p.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return p.a.createElement("div",{className:"c-search_message c-search_message--"+r},p.a.createElement("div",{className:"c-search_message__gutter"},p.a.createElement(Oe["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),p.a.createElement("div",{className:"c-search_message__content"},p.a.createElement("div",{className:"c-search_message__content_header"},p.a.createElement(Ee["a"],{userId:t||"",isInteractive:true})),p.a.createElement("div",{className:"c-search_message__body sk_dark_gray"},Me.t("There was an error displaying this message."))))}De.displayName="ErrorSearchMessage";De.defaultProps=xe;var Fe=function e(t){var r="";var a=false;try{r=Object($["getUserMessagesTheme"])(t);a=Object(me["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:r,featureTinyspeck:a}};var Le=Object(v["connect"])(Fe)(De);var Be=r(791);var Ue=r(81);var qe=r(1123);var Ge=function e(t,r){var a=r.bot_id,n=r.bot_profile,i=r.thread_ts,s=r.teamId,o=r.ts,l=r.channel,c=r.replies,u=r.permalink;var d=Object($["getUserMessagesTheme"])(t);var p=Object(S["getCurrentTeam"])(t);var m=void 0;p&&(m=p.domain);var h=E.a.some(r.extracts,function(e){return e.truncated_head||e.truncated_tail});var f=r.text.length>200;var v=!!(r.attachments&&r.attachments.length);var b=!!r.text;var g=h&&f||v&&b;var _=Object(S["getCurrentTeam"])(t).id!==s;var y="";if(c&&c.length){var k=c[0].ts;var O=Object(Ue["parseUrl"])(u),C=O.hostname;y="https://"+C+Object(ue["a"])({channelId:l.id,ts:k,threadTs:o})}return{logger:Object(w["a"])({state:t}),hasText:b,isCrossWorkspace:_,botId:a,botProfile:n,threadTs:i,theme:d,permalinkToMessageThread:y,hasAdHocSender:Object(Be["a"])(r),featureTinyspeck:Object(me["isFeatureEnabled"])(t,"feature_tinyspeck"),canBeTruncated:g,teamDomain:m,channelName:Object(ae["getDisplayNameForChannel"])(t,l)}};var He=null;var We=Object(v["connect"])(Ge,He)(qe["a"]);var Ve="IMPROVED_SEARCH";var ze={logger:m["b"].object.isRequired};var Qe=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={hasError:false};return e}s()(t,[{key:"componentDidCatch",value:function e(t,r){this.props.logger.error(Ve,"Error caught by ProtectedSearchMessage "+r.componentStack);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){if(this.state.hasError)return p.a.createElement(Le,this.props);return p.a.createElement(We,this.props)}}]);return t}(d["PureComponent"]);Qe.displayName="ProtectedSearchMessage";var Ke=function e(t){return{logger:Object(w["a"])({state:t})}};var Ye=Object(v["connect"])(Ke)(Qe);var Je=Ye;var Ze=r(1945);var Xe=new B["b"]("search");var $e={close:m["b"].func.isRequired,messages:m["b"].arrayOf(m["b"].shape({iid:m["b"].string.isRequired,user:m["b"].string.isRequired,ts:m["b"].string.isRequired,extracts:m["b"].array})).isRequired,channel:m["b"].shape({id:m["b"].string.isRequired,name:m["b"].string.isRequired}).isRequired,team:m["b"].string.isRequired,workspaceName:m["b"].string,currentTeam:m["b"].object.isRequired,isEnterpriseOrg:m["b"].bool.isRequired,onMessageJump:m["b"].func.isRequired,onFileJump:m["b"].func.isRequired,onRepliesClick:m["b"].func.isRequired,clogSearchClick:m["b"].func};var et={workspaceName:"",clogSearchClick:E.a.noop};var tt=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isExpanded:false,isHoveringOnExpandLinks:false};Object(O["bindAll"])(r,["expand","onChannelClick","onMessageJump","onFileJump","onExpandHoverStart","onExpandHoverEnd","onLinkClick","onRepliesClick"]);return r}s()(t,[{key:"onChannelClick",value:function e(){var t=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();t[0]&&this.onMessageJump({iid:t[0].iid,permalink:t[0].permalink,ts:t[0].ts,channelId:this.props.channel.id,userId:t[0].user,botId:t[0].botId})}},{key:"onLinkClick",value:function e(t){this.props.clogSearchClick(k()({},t));"channel"===t.type&&this.props.close()}},{key:"onMessageJump",value:function e(t){var r=t.iid,a=t.permalink,n=t.ts,i=t.channelId,s=t.userId,o=t.botId;this.props.onMessageJump({teamId:this.props.currentTeam.id,permalink:a});this.props.clogSearchClick({type:"message_jump",iid:r,ts:n,channelId:i,userId:s,botId:o})}},{key:"onFileJump",value:function e(t,r){var a=r.file,n=r.iid,i=r.ts,s=r.channelId,o=r.userId,l=r.botId;this.props.onFileJump(t,{file:a,iid:n,ts:i,channelId:s,userId:o,botId:l})}},{key:"onRepliesClick",value:function e(t){this.props.onRepliesClick(t);this.props.clogSearchClick(t)}},{key:"onExpandHoverStart",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:true}})}},{key:"onExpandHoverEnd",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:false}})}},{key:"getCondensedMessageArray",value:function e(){var t=this.props.messages;return E.a.reduce(t,function(e,t){var r=e.length&&e[e.length-1].collapsedStub;t.stub&&(!t.text||t.text.length>200||r)?r?e[e.length-1].count+=1:e.push({collapsedStub:true,count:1}):e.push(t);return e},[])}},{key:"expand",value:function e(t){var r=t.iid,a=t.ts,n=t.channelId,i=t.userId,s=t.botId;this.setState(function(){return{isExpanded:true}});this.props.clogSearchClick({type:"expand",iid:r,ts:a,channelId:n,userId:i,botId:s})}},{key:"formatHeaderDate",value:function e(){return J(this.props.messages,true)}},{key:"renderHeader",value:function e(){var t=this.props.channel;if(!t)return null;var r=this.formatHeaderDate();return p.a.createElement(Ae["a"],{className:"c-message_group__header",onClick:this.onChannelClick,"data-qa":"search_message_group_header"},p.a.createElement(Re["a"],{channel:t,teamIconSize:"14",showPresence:true,inline:true,showTeamIconForXwsChannels:true}),p.a.createElement("span",null,"\u2013"),p.a.createElement("span",{className:"c-message_group__header_date"},r),p.a.createElement("span",{className:"c-message_group__header_view_label"},Xe.t("View in channel")))}},{key:"renderMessages",value:function e(){var t=this;var r=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();return E.a.map(r,function(e,r){if(e.collapsedStub&&!t.state.isExpanded)return p.a.createElement("button",{key:r,className:"c-message_group__divider",onClick:t.expand},p.a.createElement("hr",{className:"c-message_group__divider_rule"}),p.a.createElement("div",{className:"c-message_group__divider_text"},Xe.t("+{count, plural, =1 {# message} other {# messages}}",{count:e.count})));return p.a.createElement(Je,k()({key:e.ts},e,{teamId:t.props.team,channel:t.props.channel,expanded:t.state.isExpanded,onExpand:t.expand,onClick:t.onMessageJump,onLinkClick:t.onLinkClick,onFileClick:t.onFileJump,onRepliesClick:t.onRepliesClick,onExpandHoverStart:t.onExpandHoverStart,onExpandHoverEnd:t.onExpandHoverEnd}))})}},{key:"render",value:function e(){var t=f()("c-message_group",{"c-message_group--hover-expand":this.state.isHoveringOnExpandLinks});return p.a.createElement("div",{className:t,"data-qa":"search_message_group"},this.renderHeader(),this.renderMessages())}}]);return t}(d["PureComponent"]);tt.displayName="SearchMessageGroup";tt.defaultProps=et;var rt=function e(t,r){var a=r.channel,n=r.team;var i=Object(S["getCurrentTeam"])(t);var s=Object(S["getTeamById"])(t,n||i.id);var o=Object(te["getTeamDisplayName"])(s);var l=ie(t,a);return{channel:k()({},l,{team_id:n}),isEnterpriseOrg:!!(i&&i.enterprise_id),workspaceName:o,currentTeam:i}};var at={clogSearchClick:L,close:function e(){return N["a"].apply(void 0,arguments)}};var nt=Object(v["connect"])(rt,at)(tt);var it="IMPROVED_SEARCH";var st={logger:m["b"].object.isRequired};var ot=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={hasError:false};return e}s()(t,[{key:"componentDidCatch",value:function e(t,r){this.props.logger.error(it,"Error caught by ProtectedMessageGroup "+r.componentStack);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){var t=this.props,r=t.logger,a=ke()(t,["logger"]);if(this.state.hasError)return p.a.createElement(Ne,a);return p.a.createElement(nt,a)}}]);return t}(d["PureComponent"]);ot.displayName="ProtectedMessageGroup";var lt=function e(t){return{logger:Object(w["a"])({state:t})}};var ct=Object(v["connect"])(lt)(ot);var ut={visible:m["b"].bool,currentPageOffset:m["b"].number.isRequired,totalPageCount:m["b"].number.isRequired,itemType:m["b"].oneOf(["message","file"]).isRequired,onBack:m["b"].func.isRequired,onForward:m["b"].func.isRequired};var dt={visible:true};var pt=new B["b"]("search");function mt(e){var t=e.visible,r=e.currentPageOffset,a=e.totalPageCount,n=e.itemType,i=e.onBack,s=e.onForward;if(!t)return null;var o=1===r;var l=r===a;var c="";var u={currentPageOffset:Object(V["a"])(r),totalPageCount:Object(V["a"])(a)};"message"===n?c=pt.t("Page {currentPageOffset} of {totalPageCount}",u,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"}):"file"===n&&(c=pt.t("Page {currentPageOffset} of {totalPageCount}",u,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"}));var d=p.a.createElement(Ae["a"],{className:"c-search__pager__button_forward",onClick:s,disabled:l},o&&pt.t("See more")||pt.t("Next"),p.a.createElement(H["b"],{type:"chevron-medium-right",size:"inherit"}));var m=p.a.createElement(Ae["a"],{className:"c-search__pager__button__back",onClick:i,disabled:o},p.a.createElement(H["b"],{type:"chevron-medium-left",size:"inherit"}),pt.t("Previous"));return p.a.createElement("div",{className:"c-search__pager"},o||m,p.a.createElement("span",{className:"c-search__pager__details"},c),l||d)}mt.displayName="Pager";mt.defaultProps=dt;var ht=mt;var ft=r(9);var vt=r.n(ft);var bt=r(26);var gt=r(170);var _t=r(240);var yt=r(351);var kt=r(201);var Ot=r(160);var Et=r(885);var wt=r(263);var Ct=r(797);function St(e){if(!e||Object(O["isEmpty"])(e))return true;if(e.in&&e.in.length)return false;if(e.from&&e.from.length)return false;if(e.to&&e.to.length)return false;if(e.before||e.after)return false;if(e.has_star||e.has_pin||e.has_link||e.has_rxn)return false;return true}var jt=r(16);var It=r(347);var Tt=r(1115);var Nt=r(121);var At=r(372);var Rt=r(35);var Mt=r.n(Rt);var Pt=r(624);var xt=r(472);var Dt={onDateChange:m["b"].func.isRequired,isDateDisabled:m["b"].func.isRequired,date:m["b"].string,disableDatesAfter:m["b"].string,disableDatesBefore:m["b"].string,dateLabel:m["b"].string.isRequired,dateAriaLabel:m["b"].string.isRequired,removeAriaLabel:m["b"].string.isRequired,qaLabel:m["b"].string};var Ft={date:null,disableDatesBefore:null,disableDatesAfter:null,qaLabel:""};var Lt=-364;var Bt=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["onClearDateChange"]);return r}s()(t,[{key:"onClearDateChange",value:function e(){this.props.onDateChange(null)}},{key:"render",value:function e(){var t=this.props,r=t.onDateChange,a=t.date,n=t.isDateDisabled,i=t.disableDatesBefore,s=t.disableDatesAfter,o=t.dateLabel,l=t.dateAriaLabel,c=t.removeAriaLabel,u=t.qaLabel;var d="";d="es"===Mt.a.locale()?a?Mt()(a,"YYYY-MM-DD").format("DD/MM/YYYY"):"":a?Object(Y["g"])(Mt()(a,"YYYY-MM-DD")):"";var m=f()("p-search_filter__datepicker_trigger",{"p-search_filter__datepicker_trigger--empty":!a});return p.a.createElement("div",{className:"p-search_filter__date","data-qa":u},p.a.createElement(xt["d"],{position:"bottom",offsetY:Lt,selectedDate:a,dateFormat:"YYYY-MM-DD",onDateChange:r,isDateDisabled:n,disableDatesBefore:i,disableDatesAfter:s},p.a.createElement(Nt["a"],{className:m,ariaLabel:a?void 0:l,"data-qa":u+"_button"},p.a.createElement("div",{className:"p-search_filter__date_label"},o),p.a.createElement("div",{className:"p-search_filter__date_readout"},d),a?null:p.a.createElement(H["b"],{type:"calendar",className:"p-search_filter__calendar_icon"}))),a?p.a.createElement(Nt["a"],{ariaLabel:c,className:"p-search_filter__date_close",onClick:this.onClearDateChange,"data-qa":u+"_close"},p.a.createElement(H["b"],{type:" c-icon--times-small"})):null)}}]);return t}(d["PureComponent"]);Bt.displayName="DateSelector";Bt.defaultProps=Ft;var Ut=Bt;var qt=new B["b"]("search");var Gt={onStartDateChange:m["b"].func.isRequired,onEndDateChange:m["b"].func.isRequired,startDate:m["b"].string,endDate:m["b"].string};var Ht={startDate:null,endDate:null};var Wt=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["isDateDisabledStart","isDateDisabledEnd"]);return r}s()(t,[{key:"isDateDisabledStart",value:function e(t){var r=this.props.endDate;if(r)return t.isAfter(r)||t.isAfter(Mt()());return t.isAfter(Mt()())}},{key:"isDateDisabledEnd",value:function e(t){var r=this.props.startDate;if(r)return t.isBefore(r)||t.isAfter(Mt()());return t.isAfter(Mt()())}},{key:"render",value:function e(){var t=this.props,r=t.onStartDateChange,a=t.onEndDateChange,n=t.endDate,i=t.startDate;return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},qt.t("Date"))),p.a.createElement("div",{className:"p-search_filter__dates"},p.a.createElement(Ut,{date:i,onDateChange:function e(t){r(t?Mt()(t):null)},isDateDisabled:this.isDateDisabledStart,disableDatesAfter:n||Mt()().format("YYYY-MM-DD"),dateLabel:qt.t("Starting"),dateAriaLabel:qt.t("Starting date"),removeAriaLabel:qt.t("Remove starting date"),qaLabel:"search_starting_date"}),p.a.createElement(Ut,{date:n,onDateChange:function e(t){a(t?Mt()(t):null)},isDateDisabled:this.isDateDisabledEnd,disableDatesBefore:i,disableDatesAfter:Mt()().format("YYYY-MM-DD"),dateLabel:qt.t("Ending"),dateAriaLabel:qt.t("Ending date"),removeAriaLabel:qt.t("Remove ending date"),qaLabel:"search_ending_date"})))}}]);return t}(d["PureComponent"]);Wt.displayName="DateRangeFilter";Wt.defaultProps=Ht;var Vt=Wt;var zt={variation:m["b"].number.isRequired,includeAvatar:m["b"].bool};var Qt={includeAvatar:false};function Kt(e){var t=e.variation,r=e.includeAvatar;return p.a.createElement("div",{className:"p-search_filter__placeholder_suggestion"},r?p.a.createElement("div",{className:"p-search_filter__placeholder_avatar"}):null,p.a.createElement("div",{className:"p-search_filter__placeholder_name p-search_filter__placeholder_name--"+t}))}Kt.displayName="PlaceholderSuggestion";Kt.defaultProps=Qt;var Yt=Kt;var Jt=r(1947);var Zt=new B["b"]("search");var Xt="IMPROVED_SEARCH";var $t={showOnlyActiveFilters:m["b"].bool,showFileFilters:m["b"].bool,filters:m["b"].object.isRequired,suggestions:m["b"].object.isRequired,toggleEditableRequestQueryFilterFromItem:m["b"].func.isRequired,toggleEditableRequestQueryFilterInItem:m["b"].func.isRequired,isEnterpriseOrg:m["b"].bool.isRequired,orgName:m["b"].string,setEditableRequestQueryFilterAfter:m["b"].func.isRequired,setEditableRequestQueryFilterBefore:m["b"].func.isRequired,setEditableRequestQueryFilterFileType:m["b"].func.isRequired,searchPrefs:m["b"].shape({searchOnlyCurrentTeam:m["b"].bool.isRequired,searchExcludeBots:m["b"].bool.isRequired,searchOnlyMyChannels:m["b"].bool.isRequired}).isRequired,setUserPrefByApi:m["b"].func.isRequired,setEditableRequestChannelObjects:m["b"].func.isRequired,channelObjects:m["b"].object.isRequired,imToUserMap:m["b"].object.isRequired,loading:m["b"].bool.isRequired,logInfo:m["b"].func,teamId:m["b"].string.isRequired,useModernSearcher:m["b"].bool.isRequired,modernSearch:m["b"].func.isRequired,showDebugOption:m["b"].bool.isRequired,isDebugInfoVisible:m["b"].bool.isRequired,toggleDebugInfoVisible:m["b"].func.isRequired};var er={showOnlyActiveFilters:false,showFileFilters:false,orgName:"",logInfo:O["noop"]};var tr=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={channelSelectIsVisible:false,memberSelectIsVisible:false};Object(O["bindAll"])(r,["onChannelSelect","onChannelQuery","onMemberQuery","onMemberSelect","showChannelSelect","hideChannelSelect","showMemberSelect","hideMemberSelect","onEndDateSelect","onStartDateSelect","onFileTypeChange"]);r.itemsFromChannelSearch={};r.onStartDateSelect=r.onStartDateSelect.bind(r);r.onEndDateSelect=r.onEndDateSelect.bind(r);return r}s()(t,[{key:"onChannelQuery",value:function e(t){var r=this;if(!t)return Promise.resolve({options:[]});var a=this.props.useModernSearcher;var n=void 0;n=a?this.props.modernSearch({query:t,options:{limit:150,entities:{channels:{includeArchived:true,onlyIfMember:this.props.searchPrefs.searchOnlyMyChannels,includeFromAnotherTeam:true,includeMpims:true},members:{includeSelf:true,includeSlackbot:!this.props.searchPrefs.searchExcludeBots,includeTeambot:!this.props.searchPrefs.searchExcludeBots,includeBots:!this.props.searchPrefs.searchExcludeBots,includeDeleted:true}}}}).then(function(e){return e.map(function(e){return{model_ob:e}})}):Object(wt["a"])(t,{limit:150,channels:{include_archived:true,only_if_member:this.props.searchPrefs.searchOnlyMyChannels},members:{include_self:true,include_org:true,include_slackbot:!this.props.searchPrefs.searchExcludeBots,include_bots:!this.props.searchPrefs.searchExcludeBots,include_deleted:true},mpims:true,groups:true,enterprise_channels:!this.props.searchPrefs.searchOnlyCurrentTeam});return n.then(function(e){var t=e.map(function(e){var t=e.model_ob;if(!Object(jt["isMember"])(t))return r._buildChannelObjectWithTeamIdIfMissing(t);return t});r.props.searchPrefs.searchOnlyMyChannels&&(t=Object(O["filter"])(t,function(e){if(Object(ae["isPublicChannel"])(e))return Object(ae["isMemberOfChannel"])(e);return true}));t=t.filter(function(e){var t=Object(O["findIndex"])(r.props.suggestions.in,function(t){return t.id===e.id});return-1===t});r.itemsFromChannelSearch=Object(O["keyBy"])(t,"id");var a={};r.props.suggestions.in.forEach(function(e){a[e.name]=(a[e.name]||0)+1});t.forEach(function(e){a[e.name]=(a[e.name]||0)+1});return{options:t.map(function(e){return{label:Object(jt["isMember"])(e)?p.a.createElement(At["a"],{id:e.id}):p.a.createElement(Re["a"],{channel:e,showTeamIconForLocalChannels:a[e.name]>1,showTeamIconForXwsChannels:true}),value:e.id}})}})}},{key:"onMemberQuery",value:function e(t){var r=this;if(!t)return Promise.resolve({options:[]});var a=this.props.useModernSearcher;var n=void 0;n=a?this.props.modernSearch({query:t,options:{entities:{members:{includeSelf:true,includeSlackbot:true,includeTeambot:true,includeBots:true,includeDeleted:true}}}}).then(function(e){return e.map(function(e){return{model_ob:e}})}):Object(wt["a"])(t,{members:{include_self:true,include_slackbot:!this.props.searchPrefs.searchExcludeBots,include_bots:!this.props.searchPrefs.searchExcludeBots,include_deleted:true}});return n.then(function(e){return{options:e.filter(function(e){return-1===r.props.suggestions.from.indexOf(e.model_ob.id)}).map(function(e){return{label:p.a.createElement("span",{className:"p-search_filter__option p-search_filter__option--suggestion"},p.a.createElement(Oe["b"],{userId:e.model_ob.id,size:18,ariaHidden:"true",tabIndex:"-1"}),p.a.createElement(At["a"],{id:e.model_ob.id})),value:e.model_ob.id}})}})}},{key:"onChannelSelect",value:function e(t,r){if(!t)return;this.itemsFromChannelSearch[t]&&this.props.setEditableRequestChannelObjects({channels:k()({},this.props.channelObjects,vt()({},t,this.itemsFromChannelSearch[t]))});var a=t;this.props.imToUserMap[t]&&(a=this.props.imToUserMap[t]);this.props.toggleEditableRequestQueryFilterInItem({channelId:a});this.itemsFromChannelSearch={};true!==r&&this.hideChannelSelect()}},{key:"onMemberSelect",value:function e(t,r){if(!t)return;this.props.toggleEditableRequestQueryFilterFromItem({memberId:t});true!==r&&this.hideMemberSelect()}},{key:"onEndDateSelect",value:function e(t){var r=t&&t.add(1,"days").format(Pt["a"]);this.props.setEditableRequestQueryFilterBefore({dateString:r})}},{key:"onStartDateSelect",value:function e(t){var r=t&&t.subtract(1,"days").format(Pt["a"]);this.props.setEditableRequestQueryFilterAfter({dateString:r})}},{key:"onSearchPrefChange",value:function e(t){var r=this.props.searchPrefs,a=r.searchOnlyCurrentTeam,n=r.searchExcludeBots,i=r.searchOnlyMyChannels;this.props.logInfo(Xt,"Changing search pref. pref: "+t);switch(t){case"search_only_current_team":this.props.setUserPrefByApi({pref:"search_only_current_team",value:!a});break;case"search_exclude_bots":this.props.setUserPrefByApi({pref:"search_exclude_bots",value:!n});break;case"search_only_my_channels":this.props.setUserPrefByApi({pref:"search_only_my_channels",value:!i});break;default:break}}},{key:"onFileTypeChange",value:function e(t){this.props.setEditableRequestQueryFilterFileType({fileType:t})}},{key:"_buildChannelObjectWithTeamIdIfMissing",value:function e(t){if(!t.team_id){if(t.teams&&1===t.teams.length)return k()({},t,{team_id:t.teams[0]});return k()({},t,{team_id:this.props.teamId})}return t}},{key:"showChannelSelect",value:function e(){this.setState(function(){return{channelSelectIsVisible:true}})}},{key:"hideChannelSelect",value:function e(){this.setState(function(){return{channelSelectIsVisible:false}})}},{key:"showMemberSelect",value:function e(){this.setState(function(){return{memberSelectIsVisible:true}})}},{key:"hideMemberSelect",value:function e(){this.setState(function(){return{memberSelectIsVisible:false}})}},{key:"shouldRenderDateFilter",value:function e(){var t=this.props,r=t.filters,a=t.showOnlyActiveFilters;if(St(r)&&a)return false;return!a||r.before&&r.after}},{key:"renderInFilter",value:function e(){var t=this;var r=this.props,a=r.filters,n=r.suggestions,i=r.loading;var s=this.state.channelSelectIsVisible;if(i)return this.renderInPlaceholder();var o=n.in.map(function(e){if(!Object(jt["isMember"])(e))return t._buildChannelObjectWithTeamIdIfMissing(e);return e});var l={};o.forEach(function(e){l[e.name]=(l[e.name]||0)+1});Object.keys(this.itemsFromChannelSearch).forEach(function(e){var r=t.itemsFromChannelSearch[e];l[r.name]=(l[r.name]||0)+1});return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},Zt.t("Channels & direct messages"))),p.a.createElement("div",{className:"p-search_filter__controls"},o.map(function(e){return p.a.createElement("label",{key:e.id,htmlFor:"universal-search-channel-filter-"+e.id,className:"p-search_filter__option "+(-1===a.in.indexOf(e.id)?"p-search_filter__option--suggestion":""),"data-qa":"search_filter_in_suggestion"},p.a.createElement(Re["a"],{channel:e,showTeamIconForLocalChannels:l[e.name]>1,showTeamIconForXwsChannels:true}),p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",tabIndex:"0",id:"universal-search-channel-filter-"+e.id,checked:a.in.indexOf(e.id)>-1,onChange:function r(){return t.onChannelSelect(e.id)},"data-qa":"in-filter-checkbox"}))}),!s&&p.a.createElement(Nt["a"],{className:"p-search_filter__more_link",onClick:this.showChannelSelect,ariaLabel:Zt.t("More channels or direct messages to filter by")},Zt.t("More\u2026")),s&&p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(It["a"],{id:"channel-select",name:"channel-select",optionsFetcher:this.onChannelQuery,onChange:this.onChannelSelect,minQueryLength:2,value:null,useFullWidthOptions:true,placeholder:Zt.t("e.g. #general"),selectPlaceholder:Zt.t("Enter a channel or direct message",{fallbackHash:"f95c98e247b782d3e4650fac888dac7c9ca383a9"}),usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true}),p.a.createElement(Nt["a"],{ariaLabel:Zt.t("Hide channel filter selector"),className:"p-search_filter__close",onClick:this.hideChannelSelect},p.a.createElement(H["b"],{type:"times-small"})))))}},{key:"renderInPlaceholder",value:function e(){return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},Zt.t("Channels & direct messages"))),p.a.createElement("div",{className:"p-search_filter__controls"},p.a.createElement(Yt,{variation:0}),p.a.createElement(Yt,{variation:1}),p.a.createElement(Nt["a"],{className:"p-search_filter__more_link",disabled:true,ariaLabel:Zt.t("More channels or direct messages to filter by")},Zt.t("More\u2026"))))}},{key:"renderFromFilter",value:function e(){var t=this;var r=this.props,a=r.filters,n=r.suggestions,i=r.loading;var s=this.state.memberSelectIsVisible;if(i)return this.renderFromPlaceholder();return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},Zt.t("People"))),p.a.createElement("div",{className:"p-search_filter__controls"},n.from.map(function(e){return p.a.createElement("label",{key:e,htmlFor:"universal-search-member-filter-"+e,className:"p-search_filter__option "+(-1===a.from.indexOf(e)?"p-search_filter__option--suggestion":""),"data-qa":"search_filter_from_suggestion"},p.a.createElement(Oe["b"],{userId:e,size:18,ariaHidden:"true",tabIndex:"-1"}),p.a.createElement(At["a"],{id:e}),p.a.createElement("input",{id:"universal-search-member-filter-"+e,className:"flex_shrink_none",tabIndex:"0",type:"checkbox",checked:a.from.indexOf(e)>-1,onChange:function r(){return t.onMemberSelect(e,true)},"data-qa":"from-filter-checkbox"}))}),!s&&p.a.createElement(Nt["a"],{className:"p-search_filter__more_link",onClick:this.showMemberSelect,ariaLabel:Zt.t("More people to filter by")},Zt.t("More\u2026")),s&&p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(It["a"],{id:"member-select",name:"member-select",optionsFetcher:this.onMemberQuery,onChange:this.onMemberSelect,minQueryLength:2,value:null,useFullWidthOptions:true,placeholder:Zt.t("e.g. Shannon"),selectPlaceholder:Zt.t("Enter a teammate\u2019s name",{fallbackHash:"670ca2ba897531a14d0d51f4b85583c58e9b03dc"}),usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true}),p.a.createElement(Nt["a"],{ariaLabel:Zt.t("Hide member filter selector"),className:"p-search_filter__close",onClick:this.hideMemberSelect},p.a.createElement(H["b"],{type:"times-small"})))))}},{key:"renderFromPlaceholder",value:function e(){return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},Zt.t("People"))),p.a.createElement("div",{className:"p-search_filter__controls"},p.a.createElement(Yt,{includeAvatar:true,variation:0}),p.a.createElement(Yt,{includeAvatar:true,variation:1}),p.a.createElement(Nt["a"],{className:"p-search_filter__more_link",disabled:true,ariaLabel:Zt.t("More people to filter by")},Zt.t("More\u2026"))))}},{key:"renderFileTypeFilter",value:function e(){var t=this.props,r=t.filters,a=t.showOnlyActiveFilters,n=t.showFileFilters;if(!n||a&&!r.fileType)return null;return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},Zt.t("File type"))),p.a.createElement(Tt["a"],{filetype:r.fileType,onChange:this.onFileTypeChange}))}},{key:"renderPrefs",value:function e(){var t=this;var r=this.props,a=r.showOnlyActiveFilters,n=r.isEnterpriseOrg,i=r.orgName,s=r.showDebugOption,o=r.isDebugInfoVisible;var l=this.props.searchPrefs,c=l.searchOnlyCurrentTeam,u=l.searchExcludeBots,d=l.searchOnlyMyChannels;if(a)return null;return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},Zt.t("Include results from\u2026"))),p.a.createElement("div",{className:"p-search_filter__controls"},n&&p.a.createElement("label",{className:f()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":!c}),htmlFor:"search_only_current_team"},Zt.t("Other {orgName} workspaces",{orgName:i})," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_current_team",checked:!c,onChange:function e(){return t.onSearchPrefChange("search_only_current_team")}})),p.a.createElement("label",{className:f()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":!u}),htmlFor:"search_exclude_bots"},Zt.t("Apps and bots")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_exclude_bots",checked:!u,onChange:function e(){return t.onSearchPrefChange("search_exclude_bots")}})),p.a.createElement("label",{className:f()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":!d}),htmlFor:"search_only_my_channels"},Zt.t("Channels I\u2019m not a member of")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_my_channels",checked:!d,onChange:function e(){return t.onSearchPrefChange("search_only_my_channels")}})),s&&p.a.createElement("label",{className:f()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":o}),htmlFor:"search_show_debug_info"},"[DEBUG] Show solr debug info"," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_show_debug_info",checked:o,onChange:function e(){return t.props.toggleDebugInfoVisible()}}))))}},{key:"render",value:function e(){var t=this.props.filters.after&&Mt()(this.props.filters.after,Pt["a"]).add(1,"days").format(Pt["a"]);var r=this.props.filters.before&&Mt()(this.props.filters.before,Pt["a"]).subtract(1,"days").format(Pt["a"]);return p.a.createElement("div",{className:"p-search_filters"},this.renderFromFilter(),this.renderInFilter(),this.renderFileTypeFilter(),p.a.createElement(Vt,{onStartDateChange:this.onStartDateSelect,onEndDateChange:this.onEndDateSelect,startDate:t,endDate:r}),this.renderPrefs())}}]);return t}(d["PureComponent"]);tr.displayName="MessagesFilterUI";tr.defaultProps=er;var rr=function e(t){var r=Object(j["getEditableRequestQueryFilter"])(t)||{};var a=Object(j["getEditableRequestChannelObjects"])(t)||{};var n=Object(j["getFilterSuggestions"])(t)||{};var i=Object(me["getCurrentUserId"])(t);var s=Object(S["getCurrentTeam"])(t);var o=!!s.enterprise_id;var l=o?Object(gt["getEnterpriseOrgName"])(t):"";var c=nr(t,r.in);var u=Object(b["getModuleState"])(t,"suggestions")||{};var d=u.loading;var p=Object(_["a"])()||"modern_searcher"===Object(yt["getGroupForUser"])(t,"sli_search_modern_searcher");var m="solr_rank_debug"===Object(yt["getGroupForUser"])(t,"solr_rank_debug");return{suggestions:{in:(n.in||[]).map(function(e){return a[e]||ar(t,e)}).filter(function(e){return!!e}),from:n.from||[]},isEnterpriseOrg:o,orgName:l,myUserId:i,filters:{in:r.in||[],from:r.from||[],before:r.before,after:r.after,fileType:r.fileType},channelObjects:a,imToUserMap:c,searchPrefs:{searchOnlyCurrentTeam:Object($["getUserPref"])(t,"search_only_current_team"),searchExcludeBots:Object($["getUserPref"])(t,"search_exclude_bots"),searchOnlyMyChannels:Object($["getUserPref"])(t,"search_only_my_channels")},loading:d,logInfo:Object(w["a"])({state:t}).info,teamId:Object(pe["getTeamId"])(t),useModernSearcher:p,isDebugInfoVisible:Object(b["getIsDebugInfoVisible"])(t),showDebugOption:m}};function ar(e,t){if(Object(Ot["a"])(t)){var r=Object(Et["a"])(e,t)||Object(ne["getChannelById"])(e,t);if(r.isUnknown||r.isNonExistent)return null;return r}if(Object(kt["a"])(t))return Object(bt["getMemberById"])(e,t);return null}function nr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce(function(t,r){if(Object(kt["a"])(r)){var a=Object(ne["getImIdByMemberId"])(e,r);a&&(t[a]=r)}return t},{})}var ir={setEditableRequestQueryFilterAfter:j["setEditableRequestQueryFilterAfter"],setEditableRequestQueryFilterBefore:j["setEditableRequestQueryFilterBefore"],setEditableRequestChannelObjects:j["setEditableRequestChannelObjects"],setEditableRequestQueryFilterFileType:j["setEditableRequestQueryFilterFileType"],setUserPrefByApi:_t["c"],toggleEditableRequestQueryFilterFromItem:j["toggleEditableRequestQueryFilterFromItem"],toggleEditableRequestQueryFilterInItem:j["toggleEditableRequestQueryFilterInItem"],modernSearch:Ct["a"],toggleDebugInfoVisible:b["toggleDebugInfoVisible"]};var sr=Object(v["connect"])(rr,ir)(tr);var or=r(1135);var lr=Object(R["e"])("Clog clicks on the message/storage limit banner that appears in search for free teams",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.uiElement,n=r.uiAction;var i=Object(M["a"])({state:t()});i.track("GROWTH_PRICING",{contexts:{ui_context:{step:"search_pane",action:n,ui_element:a}}})});lr.propTypes={uiElement:m["b"].string.isRequired};var cr=lr;var ur=r(1949);var dr=new B["b"]("search");var pr={type:m["b"].oneOf(["messages","files"]).isRequired,reason:m["b"].oneOf(["messages","storage"]).isRequired,teamPlan:m["b"].string.isRequired,teamMessagesCount:m["b"].number.isRequired,clogLimitBannerInteraction:m["b"].func.isRequired};var mr={};var hr=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.clogLinkClick=r.clogLinkClick.bind(r);return r}s()(t,[{key:"componentDidMount",value:function e(){if(this.isVisible())switch(this.props.reason){case"messages":this.props.clogLimitBannerInteraction({uiAction:"impression",uiElement:"message_search_link_top"});break;case"storage":this.props.clogLimitBannerInteraction({uiAction:"impression",uiElement:"file_search_pricing_link"});break;default:break}}},{key:"isVisible",value:function e(){return!this.props.teamPlan&&this.props.teamMessagesCount>=10100}},{key:"clogLinkClick",value:function e(){this.props.clogLimitBannerInteraction({uiAction:"click",uiElement:"messages"===this.props.reason?"message_search_link_top":"file_search_pricing_link"})}},{key:"render",value:function e(){var t=this.props,r=t.type,a=t.reason;if(this.isVisible()){var n=void 0;n="messages"===r&&"messages"===a?dr.t("Some older messages may not be shown because your workspace has over 10,000 messages."):"files"===r&&"messages"===a?dr.t("Some older files may not be shown because your workspace has over 10,000 messages."):dr.t("Your workspace is over its storage limit.");return p.a.createElement("div",{className:"p-message_limit_banner"},p.a.createElement("div",{className:"p-message_limit_banner__graphic"},p.a.createElement(H["b"],{type:"eye-closed"})),p.a.createElement("div",{className:"p-message_limit_banner__content"},n,p.a.createElement("br",null),p.a.createElement(Ae["a"],{href:"/pricing?ui_step=43&ui_element="+("messages"===a?2:3),onClick:this.clogLinkClick,target:"new"},"messages"===a?dr.t("Learn more"):dr.t("Please upgrade to a paid plan"))))}return null}}]);return t}(d["PureComponent"]);hr.displayName="MessageLimitBanner";hr.defaultProps=mr;var fr=function e(t){var r=Object(S["getCurrentTeam"])(t);var a=Object(te["isOverStorageLimit"])(r);return{teamPlan:r.plan,teamMessagesCount:r.messages_count,reason:a?"storage":"messages"}};var vr={clogLimitBannerInteraction:cr};var br=Object(v["connect"])(fr,vr)(hr);var gr=r(1951);var _r=new B["b"]("search");var yr={type:m["b"].oneOf(["messages","files"]).isRequired,numOfFileResults:m["b"].number,numOfMessageResults:m["b"].number,setTab:m["b"].func.isRequired};var kr={numOfFileResults:void 0,numOfMessageResults:void 0};var Or=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["setTab"]);return r}s()(t,[{key:"setTab",value:function e(){this.props.setTab({tab:"messages"===this.props.type?"files":"messages"})}},{key:"renderMessage",value:function e(){var t=this.props,r=t.numOfFileResults,a=t.numOfMessageResults;if("messages"===this.props.type&&Object(O["isNumber"])(r)&&r>0)return p.a.createElement("p",null,_r.t("However, there {numOfFileResults, plural, =1 {is one file} other {are several files}} related to your search.",{numOfFileResults:r}),"\xa0",p.a.createElement(Ae["a"],{className:"c-search_no_results__tab_link",onClick:this.setTab},_r.t("See files")));if("files"===this.props.type&&Object(O["isNumber"])(a)&&a>0)return p.a.createElement("p",null,_r.t("However, there {numOfMessageResults, plural, =1 {is one message} other {are several messages}} related to your search.",{numOfMessageResults:a}),"\xa0",p.a.createElement(Ae["a"],{className:"c-search_no_results__tab_link",onClick:this.setTab},_r.t("See messages")));return p.a.createElement("p",null,_r.t("Slack couldn\u2019t find any results related to your search."))}},{key:"render",value:function e(){return p.a.createElement("div",{className:"c-search_no_results"},p.a.createElement("h2",{className:"c-search__section_header"},"messages"===this.props.type?_r.t("No message results"):_r.t("No file results")),p.a.createElement(br,{type:this.props.type}),this.renderMessage())}}]);return t}(d["PureComponent"]);Or.displayName="NoResults";Or.defaultProps=kr;var Er={setTab:or["a"]};var wr=Object(v["connect"])(null,Er)(Or);var Cr={errorType:m["b"].string.isRequired,onClickRefreshSearch:m["b"].func.isRequired};var Sr={};var jr=new B["b"]("search");function Ir(e){var t=e.errorType,r=e.onClickRefreshSearch;if(t===b["MODULE_ERROR_STATE"].None)return null;var a=void 0;var n=void 0;var i=void 0;switch(t){case b["MODULE_ERROR_STATE"].NoQuery:a=jr.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"});n=jr.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"});i=false;break;default:a=jr.t("Something went wrong");n=jr.t("For some reason, Slack wasn\u2019t able to complete your search.");i=true}return p.a.createElement("div",{className:"c-search_no_results"},p.a.createElement("h2",{className:"c-search__section_header"},a),p.a.createElement("p",null,n,"\xa0",i&&p.a.createElement(Ae["a"],{onClick:r},jr.t("Try again"))))}Ir.displayName="Error";Ir.defaultProps=Sr;var Tr=Ir;var Nr=new B["b"]("search");var Ar={onClick:m["b"].func.isRequired};function Rr(e){return p.a.createElement("div",{className:"c-search__back_to_filters"},p.a.createElement(G["d"],{type:"outline",size:"small",className:"padding_left_50",onClick:e.onClick},p.a.createElement(H["b"],{type:"arrow-up-medium"}),"\xa0",Nr.t("Back to Filters",{fallbackHash:"2e2575b332e9f936eb1d97f0ef2c04e7ec73cefe"})))}Rr.displayName="BackToFiltersButton";var Mr=Rr;var Pr=r(255);var xr=r(177);var Dr=r(484);var Fr={id:m["b"].any.isRequired,focused:m["b"].bool.isRequired,onFocusEnter:m["b"].func.isRequired,onFocusLeave:m["b"].func.isRequired,onSelect:m["b"].func.isRequired,ariaLabel:m["b"].string.isRequired,children:m["b"].any.isRequired};var Lr=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Object(O["bindAll"])(e,["setContainerRef","onFocusEnter","onKeyDown","onFocusLeave"]);e.focusedAfterUpdate=false;return e}s()(t,[{key:"componentDidUpdate",value:function e(t){if(!t.focused&&this.props.focused&&this.container){this.focusedAfterUpdate=true;this.container.focus()}}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;if(r&&"mousedown"===r.type)return;this.props.onFocusEnter({id:this.props.id,isLifeCycleUpdate:this.focusedAfterUpdate});this.focusedAfterUpdate&&(this.focusedAfterUpdate=false)}},{key:"onFocusLeave",value:function e(){this.props.onFocusLeave({id:this.props.id})}},{key:"onKeyDown",value:function e(t){t.keyCode===Dr["codes"].enter&&t.target===this.container&&this.props.onSelect(t,this.props.id)}},{key:"setContainerRef",value:function e(t){this.container=t}},{key:"render",value:function e(){var t=this.props,r=t.ariaLabel,a=t.focused,n=t.children;return p.a.createElement(Pr["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onFocusWithin:this.onFocusLeave},p.a.createElement("div",{tabIndex:"-1",className:f()("c-focus_manage_list__item",{"c-focus_manage_list__item--focus":a}),ref:this.setContainerRef,role:"listitem","aria-label":r,onKeyDown:this.onKeyDown},n))}}]);return t}(d["PureComponent"]);Lr.displayName="FocusManagedListItem";var Br=Lr;function Ur(e,t,r,a){if(0===e.length)return null;if(null===t&&null!==r)return r;var n=e.indexOf(t);var i=n+a;i>=e.length?i=e.length-1:-1===n&&a<0?i=e.length-1:i<0&&(i=0);return e[i]}var qr=r(1953);var Gr={ids:m["b"].array.isRequired,renderItem:m["b"].func.isRequired,itemAriaLabel:m["b"].func.isRequired,onSelectItem:m["b"].func};var Hr={onSelectItem:O["noop"]};var Wr=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["onFocusLeave","onItemFocusEnter","onItemFocusLeave","onArrowKeyDown","setContainerRef"]);r.state={activeItem:null};r.inferredActiveItem=null;r.containerRef=null;r.keyCommands=null;return r}s()(t,[{key:"onArrowKeyDown",value:function e(t){var r=this;t.preventDefault();var a=0;t.keyCode===Dr["codes"].up&&(a=-1);t.keyCode===Dr["codes"].down&&(a=1);0!==a&&this.setState(function(){return{activeItem:Ur(r.props.ids,r.state.activeItem,r.inferredActiveItem,a)}})}},{key:"onItemFocusEnter",value:function e(t){var r=t.id,a=t.isLifeCycleUpdate;if(a)return;this.inferredActiveItem=r;this.setState(function(){return{activeItem:null}})}},{key:"onItemFocusLeave",value:function e(t){var r=t.id;this.setState(function(e){var t=e.activeItem;return{activeItem:t===r?null:t}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{activeItem:null}});this.inferredActiveItem=null}},{key:"setContainerRef",value:function e(t){this.containerRef=t;if(this.keyCommands){this.keyCommands.reset();this.keyCommands=null}if(this.containerRef){var r=[{keys:["up","down"],handler:this.onArrowKeyDown,ignoreInputs:true}];this.keyCommands=new xr["a"](this.containerRef);this.keyCommands.bindAll(r)}}},{key:"focus",value:function e(){this.containerRef&&this.containerRef.focus()}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.ids,n=r.itemAriaLabel,i=r.renderItem,s=r.onSelectItem;return p.a.createElement(Pr["a"],{onFocusLeave:this.onFocusLeave},p.a.createElement("div",{role:"list",ref:this.setContainerRef,className:"c-search_focus_managed_list",tabIndex:"-1"},a.map(function(e){return p.a.createElement(Br,{key:e,id:e,ariaLabel:n(e),focused:t.state.activeItem===e,onFocusEnter:t.onItemFocusEnter,onFocusLeave:t.onItemFocusLeave,onSelect:s},i(e))})))}}]);return t}(d["PureComponent"]);Wr.displayName="FocusManagedList";Wr.defaultProps=Hr;var Vr=Wr;var zr=Vr;var Qr=new B["b"]("search");var Kr="IMPROVED_SEARCH";var Yr={close:m["b"].func.isRequired,clogSearchClick:m["b"].func.isRequired,getMessageResultSummary:m["b"].func.isRequired,previewFile:m["b"].func.isRequired,currentTeam:m["b"].object.isRequired,isScrolledTop:m["b"].bool.isRequired,requestQuery:m["b"].string.isRequired,relevantResults:m["b"].object,recentResults:m["b"].object,relevantState:m["b"].object,recentState:m["b"].object,setPageForModule:m["b"].func.isRequired,fetchSearchResultsByModule:m["b"].func.isRequired,displayModelOrViewById:m["b"].func.isRequired,messageSort:m["b"].string.isRequired,setMessageSort:m["b"].func.isRequired,setScrollPosition:m["b"].func.isRequired,showThread:m["b"].func.isRequired,startWithScrollPosition:m["b"].number.isRequired,onClickRefreshSearch:m["b"].func.isRequired,numOfFileResults:m["b"].number,logInfo:m["b"].func,jumpToPermalink:m["b"].func.isRequired,isDebugInfoVisible:m["b"].bool.isRequired,usePrimarySearch:m["b"].bool.isRequired,secondaryView:m["b"].string.isRequired};var Jr={relevantResults:{},recentResults:{},relevantState:{},recentState:{},numOfFileResults:void 0,logInfo:O["noop"]};var Zr=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["setCurrentFilter","pageForward","pageBack","jumpToMessage","jumpToFile","onSelectItem","onRepliesClick","setWrapperRef","setListRef","reportScrollPosition","renderSortToggleMenu","handleTopScrollElementRef","scrollTop"]);r.markSearchModuleRenderStart=Object(O["throttle"])(function(){var e=r.getVisibleResults();Object(Q["f"])("messages",r.props.messageSort,e&&e.pagination&&e.pagination.page||1)},2e3,{leading:true});return r}s()(t,[{key:"componentDidMount",value:function e(){this.props.startWithScrollPosition&&(this.wrapperEl.scrollTop=this.props.startWithScrollPosition)}},{key:"onRepliesClick",value:function e(t){var r=t.channelId,a=t.ts;this.props.logInfo(Kr,"Jumping to message replies. channel: "+r+" ts: "+a);this.props.showThread({channelId:r,threadTs:a});this.props.close()}},{key:"onSelectItem",value:function e(t,r){var a=this.getVisibleMessages()[r];if(a&&a.messages&&a.messages.length){var n=a.messages[0];this.jumpToMessage({permalink:n.permalink,teamId:this.props.currentTeam.id})}}},{key:"getVisibleResults",value:function e(){return this.props.messageSort===C["a"].recentMessages?this.props.recentResults:this.props.relevantResults}},{key:"getVisibleMessages",value:function e(){return this.getVisibleResults().items[this.getVisibleUIState().page]}},{key:"getVisibleUIState",value:function e(){return this.props.messageSort===C["a"].recentMessages?this.props.recentState:this.props.relevantState}},{key:"setWrapperRef",value:function e(t){this.wrapperEl=t}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setCurrentFilter",value:function e(t){this.props.setMessageSort({messageSort:t})}},{key:"reportScrollPosition",value:function e(){this.props.setScrollPosition(this.wrapperEl.scrollTop)}},{key:"handleTopScrollElementRef",value:function e(t){this.topScrollElementRef=t}},{key:"scrollTop",value:function e(){this.props.logInfo(Kr,"Scrolling to top of results page");if(this.topScrollElementRef){this.props.setScrollPosition(0);this.topScrollElementRef.scrollIntoView()}}},{key:"jumpToMessage",value:function e(t){var r=this;var a=t.teamId,n=t.permalink;this.props.logInfo(Kr,"Jumping to message. team: "+a+" permalink: "+n);this.props.jumpToPermalink({permalink:n}).then(function(){return r.props.close()}).catch(function(){return r.props.logInfo(Kr,"FAILED:(")})}},{key:"jumpToFile",value:function e(t,r){var a=r.file,n=r.iid,i=r.ts,s=r.channelId,o=r.userId,l=r.botId;this.props.logInfo(Kr,"Jumping to file. file: "+a.id);this.props.clogSearchClick({type:"file",iid:n,ts:i,channelId:s,userId:o,botId:l,extraArguments:{click_file_id:a.id}});this.props.previewFile({fileId:a.id});this.props.close()}},{key:"pageForward",value:function e(){this.listEl&&this.listEl.focus();this.scrollTop();this.props.logInfo(Kr,"Page forwards in search results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.listEl&&this.listEl.focus();this.scrollTop();this.props.logInfo(Kr,"Page backwards in search results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var r=this.getVisibleResults();var a=this.getVisibleUIState();var n=Math.max(a.page+t,1);if(r.items[n])this.props.setPageForModule({moduleType:this.props.messageSort,page:n});else{this.props.logInfo(Kr,"Fetching more results to display on next page");this.props.fetchSearchResultsByModule({module:this.props.messageSort,apiModule:"messages",sort:this.props.messageSort===C["a"].recentMessages?"timestamp":"score",query:this.props.requestQuery,page:n})}}},{key:"renderLoading",value:function e(){var t=this.getVisibleUIState();if(t.loading)return p.a.createElement(U["a"],{size:"large"});return null}},{key:"renderError",value:function e(){var t=this.getVisibleUIState();if(t.error===b["MODULE_ERROR_STATE"].None)return null;return p.a.createElement(Tr,{errorType:t.error,onClickRefreshSearch:this.props.onClickRefreshSearch})}},{key:"renderResults",value:function e(){var t=this;var r=this.getVisibleUIState();var a=[];var n=[];if(!r.loading){a=this.getVisibleMessages();n=Object(O["map"])(a,function(e,t){return t})||[]}return p.a.createElement(zr,{ref:this.setListRef,ids:n,onSelectItem:this.onSelectItem,itemAriaLabel:function e(r){return t.props.getMessageResultSummary(a[r])},renderItem:function e(r){return p.a.createElement(ct,k()({key:a[r].iid},a[r],{onMessageJump:t.jumpToMessage,onFileJump:t.jumpToFile,onRepliesClick:t.onRepliesClick}))}})}},{key:"renderSortToggleMenu",value:function e(t){var r=this;return p.a.createElement(q["f"],t,p.a.createElement(q["b"],{key:"recent",label:Qr.t("Most recent"),onSelected:function e(){return r.props.setMessageSort({messageSort:C["a"].recentMessages})}}),p.a.createElement(q["b"],{key:"relevant",label:Qr.t("Most relevant"),onSelected:function e(){return r.props.setMessageSort({messageSort:C["a"].relevantMessages})}}))}},{key:"renderSortToggle",value:function e(){var t=this.props.messageSort;var r=t===C["a"].recentMessages?Qr.t("Most recent"):Qr.t("Most relevant");return p.a.createElement("div",{className:"c-search__section_more_link","data-qa":"search_sort_toggle"},p.a.createElement(q["e"],{renderMenu:this.renderSortToggleMenu,position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement(G["c"],null,r," ",p.a.createElement(H["b"],{type:"chevron-down",inline:true}))))}},{key:"renderMessageLimitBanner",value:function e(){var t=this.getVisibleUIState();if(t.loading)return null;return p.a.createElement(br,{type:"messages"})}},{key:"renderDebug",value:function e(){var t=this.props.isDebugInfoVisible;var r=this.getVisibleResults();var a=t&&r.debug;var n=a&&JSON.stringify(r.debug,null,2);return a&&p.a.createElement("div",{className:"c-search__debug"},p.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),p.a.createElement("pre",{className:"c-search__debug_json"},n),p.a.createElement(G["d"],{className:"c-search__debug_copy",size:"small",type:"outline",onClick:function e(){return Object(z["writeText"])(n)}},"Copy to clipboard"))}},{key:"renderSearchResults",value:function e(){var t=this.props.messageSort===C["a"].recentMessages?this.props.recentState:this.props.relevantState;var r=this.getVisibleResults();var a=r&&r.pagination&&r.pagination.total_count||0;var n=this.getVisibleUIState();var i=r&&r.pagination&&r.pagination.page_count||0;var s=i>1&&!n.loading;var o=t.page||1;var l=r&&r.pagination&&r.pagination.per_page||0;var c=r&&r.items&&r.pagination&&r.pagination.page&&r.items[r.pagination.page]&&r.items[r.pagination.page].length||0;var u="message";var d=a?Qr.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:a,totalItemCountStr:a>=1e4?Object(W["a"])(a,{decimal_places:0,lowercase:true}):Object(V["a"])(a)}):null;return p.a.createElement("div",{className:"c-search__section c-search__main"},p.a.createElement("h4",{className:"c-search__section_header"},d,this.renderSortToggle()),this.renderDebug(),this.renderMessageLimitBanner(),this.renderResults(),this.renderLoading(),p.a.createElement(ht,{visible:s,currentPageOffset:o,totalPageCount:i,maxPerPageItemCount:l,pageItemCount:c,totalItemCount:a,itemType:u,onForward:this.pageForward,onBack:this.pageBack}))}},{key:"renderNoResults",value:function e(){return p.a.createElement("div",{className:"c-search__section c-search__main"},this.renderDebug(),p.a.createElement(wr,{query:this.props.requestQuery,type:"messages",numOfFileResults:this.props.numOfFileResults}))}},{key:"renderState",value:function e(){var t=this.getVisibleUIState();if(t.error!==b["MODULE_ERROR_STATE"].None)return this.renderError();var r=this.getVisibleResults();var a=r&&r.pagination&&r.pagination.total_count||0;if(0===a&&!t.loading)return this.renderNoResults();return this.renderSearchResults()}},{key:"render",value:function e(){var t=this.getVisibleUIState();t.loading||this.markSearchModuleRenderStart();var r=this.props.isScrolledTop;var a=!this.props.usePrimarySearch||!this.props.secondaryView;return p.a.createElement("div",{className:f()("c-search__view",{"c-search__view--hide_filters":!a}),id:"c-search__tab__messages",onScroll:this.reportScrollPosition,ref:this.setWrapperRef,role:"tabpanel"},this.renderState(),a&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"c-search__extras",ref:this.handleTopScrollElementRef},p.a.createElement("div",{className:"c-search__section"},p.a.createElement("h4",{className:"c-search__section_header"},Qr.t("Filter by")),p.a.createElement(sr,null))),!r&&p.a.createElement(Mr,{onClick:this.scrollTop})))}}]);return t}(d["PureComponent"]);Zr.displayName="MessageView";Zr.defaultProps=Jr;var Xr=function e(t){var r=Object(S["getCurrentTeam"])(t);var a=Object(j["getRequestQuery"])(t);var n=Object(j["getResponseModule"])(t,{module:C["a"].relevantMessages})||{items:{}};var i=Object(j["getResponseModule"])(t,{module:C["a"].recentMessages})||{items:{}};var s=Object(b["getModuleState"])(t,C["a"].relevantMessages);var o=Object(b["getModuleState"])(t,C["a"].recentMessages);var l=Object(C["b"])(t);var c=Object(j["getResponseModule"])(t,{module:"files"})||{items:{}};var u=c.pagination&&c.pagination.total_count;var d=Object(ce["isScreenReaderEnabled"])(t);var p=function e(r){if(!d)return null;return le(t,r)};return{requestQuery:a,relevantResults:n,recentResults:i,relevantState:s,recentState:o,messageSort:l,currentTeam:r,numOfFileResults:u,getMessageResultSummary:p,logInfo:Object(w["a"])({state:t}).info,isDebugInfoVisible:Object(b["getIsDebugInfoVisible"])(t),usePrimarySearch:Object(g["a"])(t),secondaryView:Object(_e["getSecondaryView"])(t)}};var $r={clogSearchClick:L,jumpToPermalink:ge,previewFile:A["c"],displayModelOrViewById:T["a"],fetchSearchResultsByModule:I["c"],setMessageSort:C["c"],setPageForModule:b["setPageForModule"],showThread:A["g"],close:function e(){return N["a"].apply(void 0,arguments)}};var ea=Object(v["connect"])(Xr,$r)(Zr);var ta=r(980);var ra=new B["b"]("search");var aa=/[\ue000\ue001]/g;function na(e,t){if(!t)return null;var r=t.pretty_type,a=t.name,n=t.timestamp,i=t.user;var s=Object(Y["g"])(Object(Y["j"])(n,{returnMoment:true}),{shortenMonth:false,excludeYear:Object(Y["f"])(n)});return Object(O["unescape"])(ra.t("{type} file \u201c{fileName}\u201d shared by {user} on {date}",{type:r,fileName:a.replace(aa,""),user:Object(Z["a"])(e,{userId:i}),date:s}))}var ia=new B["b"]("search");var sa="IMPROVED_SEARCH";var oa={close:m["b"].func.isRequired,isScrolledTop:m["b"].bool.isRequired,previewFile:m["b"].func.isRequired,getFileResultSummary:m["b"].func.isRequired,loading:m["b"].bool,error:m["b"].string.isRequired,fileResults:m["b"].object,fileState:m["b"].object,fetchSearchResultsByModule:m["b"].func.isRequired,setPageForModule:m["b"].func.isRequired,requestQuery:m["b"].string,setScrollPosition:m["b"].func.isRequired,startWithScrollPosition:m["b"].number.isRequired,clogSearchClick:m["b"].func,onClickRefreshSearch:m["b"].func.isRequired,numOfMessageResults:m["b"].number,logInfo:m["b"].func,usePrimarySearch:m["b"].bool.isRequired,secondaryView:m["b"].string.isRequired};var la={loading:false,fileResults:{},fileState:{},requestQuery:"",clogSearchClick:O["noop"],numOfMessageResults:void 0,logInfo:O["noop"]};var ca=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["pageForward","pageBack","pageSearchResults","setWrapperRef","setListRef","reportScrollPosition","onFileClick","onSelectItem","handleTopScrollElementRef","scrollTop"]);r.markSearchModuleRenderStart=Object(O["throttle"])(function(){var e=r.props.fileResults;Object(Q["f"])("files","score",e&&e.pagination&&e.pagination.page||1)},2e3,{leading:true});return r}s()(t,[{key:"componentDidMount",value:function e(){this.props.startWithScrollPosition&&(this.wrapperEl.scrollTop=this.props.startWithScrollPosition)}},{key:"onFileClick",value:function e(t,r){var a=r.file,n=r.index;this.props.logInfo(sa,"Jumping to file. file: "+a.id);this.props.clogSearchClick({type:"file",iid:a.iid,userId:a.user,extraArguments:{click_file_id:a.id,click_position:n}});this.props.previewFile({fileId:a.id});this.props.close()}},{key:"onSelectItem",value:function e(t,r){var a=this.getVisibleFiles()[r];this.onFileClick(t,{file:a,index:r})}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setWrapperRef",value:function e(t){this.wrapperEl=t}},{key:"getVisibleFiles",value:function e(){return this.props.fileResults.items[this.props.fileState.page]||[]}},{key:"pageForward",value:function e(){this.listEl&&this.listEl.focus();this.scrollTop();this.props.logInfo(sa,"Page forwards in search results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.listEl&&this.listEl.focus();this.scrollTop();this.props.logInfo(sa,"Page backwards in search results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var r=this.props,a=r.fileState,n=r.fileResults;var i=Math.max(a.page+t,1);n.items[i]?this.props.setPageForModule({moduleType:"files",page:i}):this.props.fetchSearchResultsByModule({module:"files",sort:"score",query:this.props.requestQuery,page:i})}},{key:"reportScrollPosition",value:function e(){this.props.setScrollPosition(this.wrapperEl.scrollTop)}},{key:"handleTopScrollElementRef",value:function e(t){this.topScrollElementRef=t}},{key:"scrollTop",value:function e(){this.props.logInfo(sa,"Scrolling to top of results page");if(this.topScrollElementRef){this.props.setScrollPosition(0);this.topScrollElementRef.scrollIntoView()}}},{key:"renderLoading",value:function e(){if(this.props.loading)return p.a.createElement(U["a"],{size:"large"});return null}},{key:"renderMessageLimitBanner",value:function e(){if(this.props.loading)return null;return p.a.createElement(br,{type:"files"})}},{key:"renderFiles",value:function e(){var t=this;var r=this.props,a=r.fileState,n=r.fileResults;var i=[];var s=[];if(n.items[a.page||1]){this.markSearchModuleRenderStart();i=this.getVisibleFiles();s=i.map(function(e,t){return t})}return p.a.createElement(zr,{ref:this.setListRef,ids:s,onSelectItem:this.onSelectItem,renderItem:function e(r){return p.a.createElement(ta["a"],{key:i[r].id,index:r,file:i[r],onClick:t.onFileClick})},itemAriaLabel:function e(r){return t.props.getFileResultSummary(i[r])}})}},{key:"renderSearchResults",value:function e(){var t=this.props,r=t.fileState,a=t.fileResults;var n=a&&a.pagination&&a.pagination.total_count||0;var i=a&&a.pagination&&a.pagination.page_count||0;var s=i>1&&!this.props.loading;var o=r.page||1;var l=a&&a.pagination&&a.pagination.per_page||0;var c=a&&a.items&&a.pagination&&a.pagination.page&&a.items[a.pagination.page]&&a.items[a.pagination.page].length||0;var u="file";var d=n?ia.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:n,totalItemCountStr:n>=1e4?Object(W["a"])(n,{decimal_places:0,lowercase:true}):Object(V["a"])(n)}):null;return p.a.createElement("div",{className:"c-search__section c-search__main"},p.a.createElement("h4",{className:"c-search__section_header"},d),this.renderMessageLimitBanner(),this.renderFiles(),this.renderLoading(),p.a.createElement(ht,{visible:s,currentPageOffset:o,totalPageCount:i,maxPerPageItemCount:l,pageItemCount:c,totalItemCount:n,itemType:u,onForward:this.pageForward,onBack:this.pageBack}))}},{key:"renderNoResults",value:function e(){return p.a.createElement("div",{className:"c-search__section c-search__main"},p.a.createElement(wr,{query:this.props.requestQuery,type:"files",numOfMessageResults:this.props.numOfMessageResults}))}},{key:"renderError",value:function e(){if(this.props.error===b["MODULE_ERROR_STATE"].None)return null;return p.a.createElement(Tr,{errorType:this.props.error,onClickRefreshSearch:this.props.onClickRefreshSearch})}},{key:"renderState",value:function e(){var t=this.props.fileResults;if(this.props.error!==b["MODULE_ERROR_STATE"].None)return this.renderError();var r=t&&t.pagination&&t.pagination.total_count||0;if(0===r&&!this.props.loading)return this.renderNoResults();return this.renderSearchResults()}},{key:"render",value:function e(){this.props.loading||this.markSearchModuleRenderStart();var t=this.props.isScrolledTop;var r=!this.props.usePrimarySearch||!this.props.secondaryView;return p.a.createElement("div",{className:f()("c-search__view",{"c-search__view--hide_filters":!r}),id:"c-search__tab_file",onScroll:this.reportScrollPosition,ref:this.setWrapperRef,role:"tabpanel"},this.renderState(),r&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"c-search__extras",ref:this.handleTopScrollElementRef},p.a.createElement("div",{className:"c-search__section"},p.a.createElement("h4",{className:"c-search__section_header"},ia.t("Filter by")),p.a.createElement(sr,{showFileFilters:true}))),!t&&p.a.createElement(Mr,{onClick:this.scrollTop})))}}]);return t}(d["PureComponent"]);ca.displayName="FileView";ca.defaultProps=la;var ua=function e(t){var r=Object(j["getRequestQuery"])(t);var a=Object(j["getResponseModule"])(t,{module:"files"})||{items:[]};var n=Object(b["getModuleState"])(t,"files");var i=Object(j["getResponseModule"])(t,{module:"relevantMessages"})||{items:{}};var s=i.pagination&&i.pagination.total_count;var o=Object(ce["isScreenReaderEnabled"])(t);var l=function e(r){if(!o)return null;return na(t,r)};return{requestQuery:r,fileResults:a,fileState:n,numOfMessageResults:s,getFileResultSummary:l,loading:n&&n.loading,error:n&&n.error,logInfo:Object(w["a"])({state:t}).info,usePrimarySearch:Object(g["a"])(t),secondaryView:Object(_e["getSecondaryView"])(t)}};var da={setPageForModule:b["setPageForModule"],fetchSearchResultsByModule:I["c"],clogSearchClick:L,previewFile:A["c"],close:function e(){return N["a"].apply(void 0,arguments)}};var pa=Object(v["connect"])(ua,da)(ca);var ma=r(3480);var ha=r(751);var fa=r(22);var va=r(25);var ba=Object(fa["a"])("A search endpoint for the Channel Discovery SLI prototype",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.query,n=void 0===a?"":a;e(Object(va["a"])({method:"search.modules",args:{module:"channels",query:n}})).then(function(t){e(Object(ha["setChannels"])({channels:t.items}))})});ba.propTypes={query:m["b"].string};var ga=r(1957);var _a={channels:m["b"].arrayOf(m["b"].object),requestQuery:m["b"].string,searchChannels:m["b"].func.isRequired};var ya={channels:[],requestQuery:""};var ka=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.props.searchChannels({query:this.props.requestQuery})}},{key:"renderResults",value:function e(){var t=this.props.channels;if(!t)return null;return p.a.createElement("div",{className:"p-channel_search__channels"},E.a.map(t,this.renderChannel))}},{key:"renderChannel",value:function e(t){var r=t.name,a=t.id;return p.a.createElement("div",{key:a,className:"p-channel_search__channel"},r)}},{key:"render",value:function e(){return p.a.createElement("div",{className:"p-channel_search"},this.renderResults())}}]);return t}(d["PureComponent"]);ka.displayName="ChannelViewPrototype";ka.defaultProps=ya;var Oa=function e(t){return{requestQuery:Object(j["getRequestQuery"])(t),featureSliChannelSearch:Object(me["isFeatureEnabled"])(t,"feature_sli_channel_search"),channels:Object(ha["getChannels"])(t)}};var Ea={searchChannels:ba};var wa=Object(v["connect"])(Oa,Ea)(ka);var Ca=r(1959);var Sa={};var ja={};var Ia=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){return p.a.createElement("div",{className:"p-user_search"},"This is the user search result page.")}}]);return t}(d["PureComponent"]);Ia.displayName="UserViewPrototype";Ia.defaultProps=ja;var Ta=function e(t){return{featureSliUserSearch:Object(me["isFeatureEnabled"])(t,"feature_sli_user_search")}};var Na=Object(v["connect"])(Ta)(Ia);var Aa=r(1744);var Ra={tab:m["b"].string.isRequired,scrollPosition:m["b"].object.isRequired,setScrollPosition:m["b"].func.isRequired,onClickRefreshSearch:m["b"].func.isRequired,featureSliChannelSearch:m["b"].bool,featureSliUserSearch:m["b"].bool,usePrimarySearch:m["b"].bool};var Ma={featureSliChannelSearch:false,featureSliUserSearch:false,usePrimarySearch:false};var Pa=300;var xa=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={messagesScrolledTop:e.scrollPosition.messages<Pa,filesScrolledTop:e.scrollPosition.files<Pa};r.setMessageScrollPosition=r.setScrollPosition.bind(r,"messages");r.setFileScrollPosition=r.setScrollPosition.bind(r,"files");r.scrollPosition=e.scrollPosition;return r}s()(t,[{key:"componentWillUnmount",value:function e(){this.props.setScrollPosition({scrollPosition:this.scrollPosition})}},{key:"setScrollPosition",value:function e(t,r){this.scrollPosition[t]=r;var a="messages"===t&&(r<Pa||true===this.state.messagesScrolledTop);a&&this.setState(function(){return{messagesScrolledTop:r<Pa}});var n="files"===t&&(r<Pa||true===this.state.filesScrolledTop);n&&this.setState(function(){return{filesScrolledTop:r<Pa}})}},{key:"renderCurrentView",value:function e(){if(this.props.featureSliChannelSearch&&"channels"===this.props.tab)return p.a.createElement(wa,null);if(this.props.featureSliUserSearch&&"users"===this.props.tab)return p.a.createElement(Na,null);switch(this.props.tab){case"messages":return p.a.createElement(ea,{isScrolledTop:this.state.messagesScrolledTop,setScrollPosition:this.setMessageScrollPosition,startWithScrollPosition:this.scrollPosition.messages,onClickRefreshSearch:this.props.onClickRefreshSearch});case"files":return p.a.createElement(pa,{isScrolledTop:this.state.filesScrolledTop,setScrollPosition:this.setFileScrollPosition,startWithScrollPosition:this.scrollPosition.files,onClickRefreshSearch:this.props.onClickRefreshSearch});default:return null}}},{key:"render",value:function e(){var t=f()("c-search__container",{"c-search__container--primary_search_sonic":this.props.usePrimarySearch&&Object(_["a"])(),"c-search__container--primary_search_legacy":this.props.usePrimarySearch&&!Object(_["a"])()});return p.a.createElement("div",{className:t},p.a.createElement("div",{className:"c-search","data-qa":"search_view"},!this.props.usePrimarySearch&&p.a.createElement(ma["a"],null),this.renderCurrentView()))}}]);return t}(d["PureComponent"]);xa.displayName="SearchView";xa.defaultProps=Ma;var Da=function e(t){return{tab:Object(b["getTab"])(t),visible:Object(b["getVisible"])(t),scrollPosition:Object(b["getScrollPosition"])(t),usePrimarySearch:Object(g["a"])(t)}};var Fa={setScrollPosition:b["setScrollPosition"]};var La=t["a"]=Object(v["connect"])(Da,Fa)(xa)},,,function(e,t,r){"use strict";var a=r(626);var n=r(312);var i=r(79);var s=r(31);var o=r(336);var l=r(26);var c=r(16);var u=r(17);var d=r(935);var p=2e4;var m="TICKLE-MS";var h=Object(s["b"])("Ping the message server if necessary",function(e,t){var r=t();var s=Object(l["getCurrentMember"])(r);var h=Object(u["a"])({state:r});if(!s){h.error(m,"Skipping tickle because no user exists");return}if(!Object(i["isConnected"])(r))return;if(Object(c["getMemberManualPresence"])(s)===n["PRESENCE_AWAY"])return;var f=Date.now()-Object(a["timeOfLastSocketActivity"])(r);if(f<p)return;e(Object(o["send"])({type:"tickle"})).catch(function(r){var a=r&&r.message===d["c"];if(!a){h.error(m,"Send tickle event failed with error = "+r);return}h.warn(m,"Sending tickle event failed; will try again the next time we get reconnected");Object(i["promiseToHaveOpenWebSocket"])(t()).then(function(){h.info(m,"Retrying tickle event that failed earlier");e(Object(o["send"])({type:"tickle"})).then(function(){h.info(m,"Tickle sent successfully after retry")}).catch(function(e){h.error(m,"Tickle retry failed with error: "+e)})})})});t["a"]=h},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(1438);var i=r(2963);Object(a["a"])("interop.calls",{startOrJoinCall:n["b"],handleCallInvite:i["b"]})},,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(5);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var m=r.n(p);var h=r(8);var f=r.n(h);var v=r(2);var b=r(10);var g=r(26);var _=r(50);var y=r(11);var k=r(16);var O=r(48);var E=r(703);var w=r(337);var C=r(20);var S=r(18);var j=r(3479);var I=r(2963);var T=r(271);var N=r(2189);var A=new b["b"]("incoming_call_window");var R=function(e){f()(t,e);function t(){c()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getSrcSetAttribute",value:function e(t){if(!t)return"";return t+" 2x"}},{key:"maybeRenderGuestBadge",value:function e(){if(this.props.isUltraRestricted)return n.a.createElement(S["b"],{type:"single-channel-guest",inline:true});if(this.props.isRestricted)return n.a.createElement(S["b"],{type:"restricted-user",inline:true});return null}},{key:"renderUserImage",value:function e(){var t=this.props.avatarUrls,r=t.imageUrl,a=t.imageUrl2x;if(r||a)return n.a.createElement("img",{className:"p-incoming_call__member_image",src:r||a,srcSet:this.getSrcSetAttribute(a),alt:""});return null}},{key:"renderExternalTeamLabel",value:function e(){return n.a.createElement("div",{className:"p-incoming_call__external_team_banner"},n.a.createElement("span",{className:"p-incoming_call__external_team_name"},this.props.externalTeamName),n.a.createElement(w["b"],{className:"p-incoming_call__external_team_icon",id:this.props.memberTeamId,size:18}))}},{key:"renderUserName",value:function e(){return n.a.createElement("div",{className:"p-incoming_call__member_name_wrapper"},n.a.createElement("span",{className:"p-incoming_call__member_name"},this.props.prefCompliantMemberName),this.maybeRenderGuestBadge())}},{key:"renderCaptionText",value:function e(){var t=this.props.featureSpockCalls?A.t("is calling you"):"";return n.a.createElement("div",{className:"p-incoming_call__user_caption"},t)}},{key:"renderCallButtons",value:function e(){var t=this;return n.a.createElement("div",{className:"p-incoming_call__button_container"},n.a.createElement(C["d"],{type:"danger",size:"medium",onClick:function e(){return t.props.onDeclineCall()},className:"p-incoming_call__button"},n.a.createElement(S["b"],{type:"times"})),n.a.createElement(C["d"],{type:"primary",size:"medium",onClick:function e(){return t.props.onAcceptCall()},className:"p-incoming_call__button"},n.a.createElement(S["b"],{type:"phone"})))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-incoming_call"},this.props.isExternal&&this.renderExternalTeamLabel(),this.renderUserImage(),n.a.createElement("div",{className:"p-incoming_call__info"},this.renderUserName(),this.renderCaptionText(),this.renderCallButtons()))}}]);return t}(a["PureComponent"]);R.displayName="IncomingCall";var M=function e(t,r){var a=Object(T["d"])(t,r.callId);var n=a.inviterUserId;Object(j["a"])(!!n);var i=Object(g["getMemberById"])(t,n);var s=Object(k["getMemberTeamId"])(i);var o=Object(_["getTeamById"])(t,s);var l=Object(k["isExternal"])(i);var c=Object(k["getPrefCompliantMemberName"])(t,i);var u=Object(O["getTeamDisplayName"])(o);var d=Object(v["get"])(i,"profile.avatar_hash");var p=Object(E["a"])({size:200,teamId:s,memberId:n,avatarHash:d});return{avatarUrls:p,prefCompliantMemberName:c,memberTeamId:s,externalTeamName:u,isRestricted:Object(k["isRestricted"])(i),isUltraRestricted:Object(k["isUltraRestricted"])(i),isExternal:l,featureSpockCalls:Object(y["isFeatureEnabled"])(t,"feature_spock_calls")}};var P={mapStateToProps:M};Object.defineProperty(P,"mapStateToProps",{get:function e(){return M},set:function e(t){M=t}});var x={onAcceptCall:I["a"],onDeclineCall:I["c"]};var D=Object(i["connect"])(M,x)(R);var F=r(866);var L=r(17);var B=r(1134);var U=r(2191);var q=function e(t){var r=t.invitingCall;Object(F["a"])()&&Object(L["b"])().error("BrowserIncomingCall should only be instantiated in a browser.");if(!r)return null;return n.a.createElement("div",{className:"p-browser_incoming_call--shroud"},n.a.createElement("div",{className:"p-browser_incoming_call"},n.a.createElement(D,{callId:r})))};var G=function e(t){var r=Object(T["c"])(t);var a=r&&r.invitationStatus===B["a"].pending?r.id:void 0;return{invitingCall:a}};var H=Object(i["connect"])(G)(q);var W=function e(t,r){if(!t)throw new Error("mountIncomingCall must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(H,null)),r)};var V=W;var z=r(51);Object(z["a"])("interop.mountBrowserIncomingCall",V)},,,function(e,t,r){"use strict";var a=r(129);var n=r(14);var i=r(626);var s={children:a["b"].node,isOnline:a["b"].bool};var o={children:null,isOnline:null};var l=function e(t){var r=t.isOnline,a=t.children;return r?a:null};l.propTypes=s;l.defaultProps=o;var c=function e(t){return{isOnline:Object(i["isClientOnline"])(t)}};var u=Object(n["connect"])(c)(l);var d={children:a["b"].node,isOnline:a["b"].bool};var p={children:null,isOnline:null};var m=function e(t){var r=t.isOnline,a=t.children;return r?null:a};m.propTypes=d;m.defaultProps=p;var h=function e(t){return{isOnline:Object(i["isClientOnline"])(t)}};var f=Object(n["connect"])(h)(m);var v=r(79);var b={children:a["b"].node,isDegradedMode:a["b"].bool};var g={children:null,isDegradedMode:null};var _=function e(t){var r=t.isDegradedMode,a=t.children;return r?a:null};_.propTypes=b;_.defaultProps=g;var y=function e(t){return{isDegradedMode:Object(v["isHavingTroubleReconnecting"])(t)}};var k=Object(n["connect"])(y)(_);r.d(t,"b",function(){return u});r.d(t,"a",function(){return f});r.d(t,false,function(){return})},function(e,t,r){},function(e,t,r){"use strict";var a=r(1383);var n=r.n(a);var i=r(238);var s=r(903);var o=r(2);var l=r.n(o);var c=r(187);var u=r(74);var d=Object(c["b"])("Handle side effects",function(e,t,r){var a=u["c"][r.type];a&&Promise.resolve().then(function(){a.forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.sideEffect,n=void 0===a?l.a.noop:a,i=t.reasons,s=void 0===i?[]:i;if(s.length){var o=r&&r.payload&&r.payload.reason;if(!l.a.includes(s,o))return}n(r,e.dispatch,e.getState)})});return t(r)});var p=d;var m=r(17);var h=r(27);var f=r(130);var v=[];var b=Object(m["b"])();var g=Object(c["b"])("Allows devs to get console logging or trigger breakpoints when state they care about changes",function(e,t,r){var a=[];var n=e.getState();v.forEach(function(e){a.push(e(n))});var i=t(r);var s=e.getState();v.forEach(function(e,t){var n=e(s);if(a[t]!==n){b.info("redux watcher","watcher value has changed! \nAction: ",r,"\nBefore: ",a[t],"\nAfter:  ",n);h["isDev"]||h["isJsPath"]}});return i});var _=g;function y(e){if(!l.a.isFunction(e)){b.error("watcherFn passed in to addWatcher must be a function");return}v.push(e)}function k(){v=[]}Object(f["exportToGlobalDebugger"])("reduxWatcher",{addWatcher:y,clearAllWatchers:k});var O=r(1140);var E=["memberCounts","slashCommand","channelHistory","docs","teamCreation"];var w=[];var C=Object(c["b"])("In dev, warns when store state is unserializable",function(e,t,r){var a=h["isDev"]||h["isJsPath"];if(!a)return t(r);var n=e.getState();var i=t(r);var s=e.getState();s&&Object.keys(s).forEach(function(e){if(s[e]===n[e])return;if(!Object(O["a"])(s[e])){if(E.includes(e))return;if(w.includes(e))return;Object(m["b"])().error("Redux store "+e+" has unserializable state!\nFix this by ensuring that the store contains no functions or promises.\nAre you not working on the "+e+" store? Were you just minding your own business when this error popped up out of nowhere?\nPlease DM @drew this error message and he'll look into it.");w.push(e)}});return i});var S=C;var j={knownOffenders:E,resetLoggedOffenders:function e(){w=[]}};var I=r(336);var T=r(869);var N=[i["b"],n.a,p,I["default"],_,S,T["a"]];"undefined"!==typeof window.__karma__&&N.unshift(s["b"]);var A=t["a"]=N},,function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(2);var i=r.n(n);var s=r(11);var o=r(1965);var l=r(164);var c=r(3496);var u=0;var d=6e4;var p=["focus","focusin","touchstart","mousedown","mouseup","wheel","keydown","keyup","beforeinput","input","scroll","compositionstart","compositionupdate","compositionend"];function m(e){if(!Object(s["isFeatureEnabled"])(e(),"feature_track_time_spent"))return i.a.noop;var t={capture:true,passive:true};var r=function t(){return f(e)};var a=setInterval(r,d);var n=i.a.throttle(function(){document.hasFocus&&document.hasFocus()&&Object(c["e"])(Object(c["c"])(e()))},5e3,{leading:true,trailing:true});p.forEach(function(e){window.addEventListener(e,n,t)});var o=function e(){p.forEach(function(e){window.removeEventListener(e,n,t)});clearInterval(a)};return o}function h(e){return{uid:e.id,timestamp_start:Object(o["a"])(e.startTime),timestamp_refresh:Object(o["a"])(e.lastActivity),version:u}}function f(e){var t=e();var r=Object(c["a"])(Object(c["c"])(t));var a=Object(l["a"])({state:t});i.a.each(r,function(e){null===e.lastLogged?a.track("SESSION_START",{client_session:h(e)}):e.isActive&&e.needsRefresh&&a.track("SESSION_REFRESH",{client_session:h(e)});e.isActive||a.track("SESSION_END",{client_session:h(e)})})}Object(a["a"])("interop.activity_session",{listenForUserEvents:function e(){return m(TS.redux.getState)},recordUserActivity:c["e"]})},,function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(278);var i=r(743);var s=r(3418);var o=r(2);var l=r(31);var c=r(11);var u=r(23);var d=r(33);var p=r(19);var m=r(122);var h=r(69);var f=r(2092);var v=r(1962);var b=r(63);var g=r(17);var _=6e4;var y=function e(t){var r=Object(d["c"])(t);if(Object(b["a"])()&&!Object(h["isWorkspaceFocused"])(r))return Promise.resolve();return Object(d["a"])(t,Object(f["a"])({reason:"requestOfflineCounts"})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d["a"])(t,Object(m["resetReachedEnd"])());Object(d["a"])(t,Object(v["a"])(e));var r=Object(o["compact"])(Object(o["concat"])(e.channels,e.groups));Object(d["a"])(t,Object(p["reconcileChannelAccess"])({channels:r}))}).catch(function(e){Object(g["a"])({state:r}).error("Failed to fetch offline users counts for "+t+": "+e)})};var k=Object(o["throttle"])(y,_,{trailing:false});var O=Object(l["b"])("Request offline users counts",function(e,t){return Object(c["isFeatureEnabled"])(t(),"feature_degraded_send")&&k(Object(u["getTeamId"])(t()))});O.propTypes={};var E=O;var w={fetchOfflineUsersCounts:y};Object(a["a"])("interop.actions",{displayModelOrViewById:n["a"],setLastRead:i["c"],markLastRead:i["b"],markDelayedWithAPI:i["a"],requestOfflineHistory:s["a"],requestOfflineCounts:E})},,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(129);var c=r(11);var u=r(1418);var d=r(15);var p=r.n(d);var m=r(21);var h=r(10);var f=r(27);var v=r(63);var b=r(3);var g=r.n(b);var _=r(5);var y=r.n(_);var k=r(6);var O=r.n(k);var E=r(7);var w=r.n(E);var C=r(8);var S=r.n(C);var j=r(2);var I=r(18);var T=r(54);var N=r(366);var A=r(717);var R=r(509);var M=r(23);var P=r(17);var x=r(164);var D=r(177);var F=r(75);var L=r(819);var B=r(897);var U=r(20);var q=r(41);var G=300;var H={children:l["b"].node,className:l["b"].string,disabled:l["b"].bool,tooltip:l["b"].oneOfType([l["b"].string,l["b"].func]),"aria-label":l["b"].string.isRequired,onClick:l["b"].func.isRequired,onTrigger:l["b"].func};var W={children:null,className:void 0,disabled:false,tooltip:void 0,onTrigger:j["noop"]};var V=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMouseDown=r.onMouseDown.bind(r);r.onMouseUp=r.onMouseUp.bind(r);r.pressTimer=void 0;return r}O()(t,[{key:"componentWillUnmount",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"onMouseDown",value:function e(t){var r=this;if(this.props.disabled)return;if(0!==t.button)return;t.persist();this.pressTimer=setTimeout(function(){return r.props.onTrigger(t)},G);window.addEventListener("mouseup",this.onMouseUp)}},{key:"onMouseUp",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function e(){var t=this.props,r=t.disabled,a=t.tooltip,i=t["aria-label"];var s=p()("p-global_nav__top_button",this.props.className,{"p-global_nav__top_button--disabled":r});var o=function e(t){var a=t.tip,i=t.children;if(r||!a)return i;return n.a.createElement(q["d"],{tip:a,delay:800,position:"bottom",offsetY:sn,tipClassName:"p-global_nav__top_history_tip"},i)};return n.a.createElement(o,{tip:a},n.a.createElement(U["c"],{className:s,disabled:r,onClick:this.props.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,"aria-label":i},this.props.children))}}]);return t}(a["PureComponent"]);V.displayName="HistoryButton";V.defaultProps=W;var z=V;var Q=r(151);var K=new h["b"]("global_nav");var Y={viewId:l["b"].string,viewName:l["b"].string,teamId:l["b"].string,teamName:l["b"].string,teamIcon:l["b"].string,currentTeamId:l["b"].string,featureGlobalNav:l["b"].bool,featureThreadsCopyChange:l["b"].bool};var J={viewId:void 0,viewName:void 0,teamId:void 0,teamName:void 0,teamIcon:void 0,currentTeamId:void 0,featureGlobalNav:false,featureThreadsCopyChange:false};var Z=function(e){S()(t,e);function t(){y()(this,t);return w()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}O()(t,[{key:"renderTeamIcon",value:function e(){var t=this.props,r=t.teamIcon,a=t.teamName;return n.a.createElement(q["d"],{tip:a,position:"bottom",zIndex:"above_fs"},n.a.createElement("div",{className:"p-global_nav__top_history_item_team_icon",style:{backgroundImage:"url("+r+")"}}))}},{key:"renderThreads",value:function e(){var t=this.props,r=t.teamId,i=t.currentTeamId,s=t.featureGlobalNav,o=t.featureThreadsCopyChange;if(!s)return null;var l=r===i?n.a.createElement(I["b"],{type:"small-reply",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var c=o?K.t("Threads"):K.t("All Threads");return n.a.createElement(a["Fragment"],null,l,c)}},{key:"renderUnreads",value:function e(){var t=this.props,r=t.teamId,i=t.currentTeamId,s=t.featureGlobalNav;if(!s)return null;var o=r===i?n.a.createElement(I["b"],{type:"list",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var l=K.t("All Unreads");return n.a.createElement(a["Fragment"],null,o,l)}},{key:"render",value:function e(){var t=this.props,r=t.viewId,i=t.viewName,s=t.teamId,o=t.currentTeamId;if("Vall_threads"===r)return this.renderThreads();if("Vall_unreads"===r)return this.renderUnreads();if(s===o)return n.a.createElement(Q["a"],{channelId:r,className:"p-global_nav__top_history_item_channel_name"});return n.a.createElement(a["Fragment"],null,this.renderTeamIcon(),i)}}]);return t}(a["Component"]);Z.displayName="HistoryItem";Z.defaultProps=J;var X=function e(t){return{currentTeamId:Object(M["getTeamId"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureThreadsCopyChange:Object(c["isFeatureEnabled"])(t,"feature_threads_copy_change")}};var $=Object(i["connect"])(X)(Z);var ee=new h["b"]("global_nav");var te={history:l["b"].object.isRequired,currentTeamId:l["b"].string,back:l["b"].func,forward:l["b"].func,index:l["b"].func,sync:l["b"].func,action:l["b"].func,featureGlobalNav:l["b"].bool,featureThreadsCopyChange:l["b"].bool,clogger:l["b"].object.isRequired};var re={currentTeamId:void 0,back:j["noop"],forward:j["noop"],index:j["noop"],sync:j["noop"],action:l["b"].func,featureGlobalNav:false,featureThreadsCopyChange:false};var ae=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onBackClick=r.onBackClick.bind(r);r.onForwardClick=r.onForwardClick.bind(r);r.renderBackMenu=r.renderBackMenu.bind(r);r.renderForwardMenu=r.renderForwardMenu.bind(r);r.renderBackTooltip=r.renderBackTooltip.bind(r);r.renderForwardTooltip=r.renderForwardTooltip.bind(r);return r}O()(t,[{key:"componentDidMount",value:function e(){var t=this;window.requestIdleCallback&&window.requestIdleCallback(function(){return t.props.sync()});var r=Object(f["isWindows"])();var a=[{keys:r?"alt+left":["command+[","command+left"],handler:function e(r){if(t.shouldPreventShortcut(r))return;r.preventDefault();t.props.action("GLOBAL-NAV","Navigating back in history with key command");t.props.back();t.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_BACK"}}})}},{keys:r?"alt+right":["command+]","command+right"],handler:function e(r){if(t.shouldPreventShortcut(r))return;r.preventDefault();t.props.action("GLOBAL-NAV","Navigating forward in history with key command");t.props.forward();t.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_FORWARD"}}})}}];if(F["isDesktop"]){this.keyCommands||(this.keyCommands=new D["a"]);this.keyCommands.bindAll(a)}}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onBackClick",value:function e(){this.props.back();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK"}}})}},{key:"onForwardClick",value:function e(){this.props.forward();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD"}}})}},{key:"shouldPreventShortcut",value:function e(t){if(t.metaKey&&("ArrowRight"===t.key||"ArrowLeft"===t.key)){var r=Object(L["a"])()&&Object(B["b"])(document.activeElement)||document.activeElement===document.body;if(!r)return true}return false}},{key:"renderStackMenu",value:function e(t,r){var a=this;var i=function e(t){return t.viewId+":"+t.teamId};var s=Object(j["uniqBy"])(t,i);var o=s.map(function(e){return{label:n.a.createElement($,e),key:i(e),click:function t(){a.props.index({target:e.index});a.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_STACK_ITEM"}}})},className:"p-global_nav__top_history_item"}});return n.a.createElement(T["a"],g()({},r,{template:o}))}},{key:"renderBackMenu",value:function e(t){var r=Object(R["a"])(this.props.history);if(!r)return null;this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK_STACK"}}});return this.renderStackMenu(r.reverse(),t)}},{key:"renderForwardMenu",value:function e(t){var r=Object(R["b"])(this.props.history);if(!r)return null;this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD_STACK"}}});return this.renderStackMenu(r,t)}},{key:"renderBackTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(f["isMac"])()?"\u2318[":ee.t("Alt+Left Arrow");return n.a.createElement(a["Fragment"],null,ee.t("Go back"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},t))}},{key:"renderForwardTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(f["isMac"])()?"\u2318]":"Alt+Right Arrow";return n.a.createElement(a["Fragment"],null,ee.t("Go forward"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},t))}},{key:"render",value:function e(){var t=this.props,r=t.history,i=t.featureGlobalNav;if(!i)return null;if(!F["isDesktop"])return null;var s=!Object(R["a"])(r)||!Object(R["a"])(r).length;var o=!Object(R["b"])(r)||!Object(R["b"])(r).length;var l={position:"bottom-left",offsetX:-12,offsetY:on,customTrigger:true};return n.a.createElement(a["Fragment"],null,n.a.createElement(T["e"],g()({renderMenu:this.renderBackMenu},l),n.a.createElement(z,{className:"p-global_nav__top_history p-global_nav__top_history--back",onClick:this.onBackClick,disabled:s,tooltip:this.renderBackTooltip,"aria-label":ee.t("Go back")},n.a.createElement(I["b"],{type:"chevron-large-left",className:"p-global_nav__top_button_icon"}))),n.a.createElement(T["e"],g()({renderMenu:this.renderForwardMenu},l),n.a.createElement(z,{className:"p-global_nav__top_history",onClick:this.onForwardClick,disabled:o,tooltip:this.renderForwardTooltip,"aria-label":ee.t("Go forward")},n.a.createElement(I["b"],{type:"chevron-large-right",className:"p-global_nav__top_button_icon"}))))}}]);return t}(a["Component"]);ae.displayName="History";ae.defaultProps=re;var ne=function e(t){return{history:Object(N["getNavigationHistory"])(t),currentTeamId:Object(M["getTeamId"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureThreadsCopyChange:Object(c["isFeatureEnabled"])(t,"feature_threads_copy_change"),action:Object(P["a"])({state:t}).action,clogger:Object(x["a"])({state:t})}};var ie={back:A["a"],forward:A["b"],index:A["c"],sync:A["f"]};var se=Object(i["connect"])(ne,ie)(ae);var oe=r(50);var le=r(48);var ce=r(3493);var ue=r(32);var de=r.n(ue);var pe=r(22);var me=r(25);var he={},fe=he.refetchAuth;var ve=Object(pe["a"])("Sign out of the current session",function(e,t){return e(Object(me["a"])({method:"auth.signout",args:{}})).then(function(){if(Object(v["a"])()){fe();return}window.location.reload()}).catch(function(e){Object(P["a"])({getState:t}).error("got error when trying to sign out: "+e);throw e})});var be=r(821);var ge=r(13);var _e=Object(ge["c"])("TS.ui.enterprise_shared_channels_invites.start");var ye=r(1097);var ke=Object(ge["c"])("TS.ui.prefs_dialog.start",function(){return null});var Oe={start:ke};var Ee=Object(ge["c"])("TS.ui.workspaces.start");var we=Object(ge["c"])("TS.help_modal.start");var Ce=r(763);var Se=Object(ge["c"])("TS.magic_login.execute");var je={name:l["b"].string.isRequired,org:l["b"].string,icon:l["b"].string,url:l["b"].string};var Ie={org:void 0,icon:void 0,url:void 0};var Te=function e(t){var r=t.name,a=t.icon,i=t.org,s=t.url;return n.a.createElement("div",{className:"p-global_nav__top_menu_header"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:a&&"url("+a+")"}}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},r),n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},i||s)))};Te.displayName="TeamHeader";Te.defaultProps=Ie;var Ne=function e(t){var r=Object(oe["getCurrentTeam"])(t);return{name:Object(le["getTeamDisplayName"])(r),org:r.enterprise_name,icon:r.icon&&r.icon.image_88||void 0,url:r.domain+".slack.com"}};var Ae=Object(i["connect"])(Ne)(Te);var Re=r(26);var Me=r(1398);var Pe=new h["b"]("global_nav");var xe={menuProps:l["b"].object,teamId:l["b"].string.isRequired,isEnterprise:l["b"].bool,enterpriseURL:l["b"].string,isAppmin:l["b"].bool,featureGlobalNav:l["b"].bool};var De={menuProps:void 0,isEnterprise:false,enterpriseURL:void 0,isAppmin:false,featureGlobalNav:false};var Fe=function e(t){var r=t.featureGlobalNav,a=t.teamId,i=t.isEnterprise,s=t.enterpriseURL,o=t.isAppmin,l=t.menuProps;if(!r)return null;var c=[{label:Pe.t("Manage members"),href:"/admin"},{label:Pe.t("Workspace settings"),href:"/admin/settings"},{label:Pe.t("Organization settings"),href:"https://"+s+"/manage",hide:!i},{label:Pe.t("Manage apps"),href:"/apps/manage",hide:i||!o},{label:Pe.t("Manage shared channels"),click:function e(){return Object(Me["a"])(a)},hide:i}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},l,{template:c}))};Fe.displayName="TeamAdminSubmenu";Fe.defaultProps=De;var Le=function e(t){var r=Object(oe["getCurrentTeam"])(t);return{teamId:r.id,isEnterprise:Object(le["isEnterpriseTeam"])(r),enterpriseURL:Object(c["getFromBootData"])(t,"enterprise_url"),isAppmin:Object(Re["isAppmin"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Be=Object(i["connect"])(Le)(Fe);var Ue=r(24);var qe=r.n(Ue);var Ge=r(473);var He=r(719);var We=Object(ge["c"])("TS.ui.enterprise_teams_dialog.show");var Ve=function e(){return We(TS.model.user)};var ze=new h["b"]("global_nav");var Qe=3;var Ke={menuProps:l["b"].object,enterprises:l["b"].arrayOf(l["b"].shape({id:l["b"].string,name:l["b"].string,teams:l["b"].arrayOf(l["b"].object)})),others:l["b"].arrayOf(l["b"].shape({id:l["b"].string,name:l["b"].string,url:l["b"].string})),currentEnterpriseId:l["b"].string,signinURL:l["b"].string,logoutURL:l["b"].string,featureGlobalNav:l["b"].bool};var Ye={menuProps:void 0,enterprises:[],others:[],currentEnterpriseId:void 0,signinURL:void 0,logoutURL:void 0,featureGlobalNav:false};var Je=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.getTeamItem=r.getTeamItem.bind(r);r.getLogoutItem=r.getLogoutItem.bind(r);r.getEnterpriseItems=r.getEnterpriseItems.bind(r);r.getOtherItems=r.getOtherItems.bind(r);return r}O()(t,[{key:"getTeamItem",value:function e(t){var r=this.props.featureGlobalNav;if(!r)return null;if(!t.url)return null;var i=t.url+("/"===t.url.substr(-1)?"messages":"/messages");return{label:n.a.createElement(a["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__top_switch_workspaces_icon",style:{backgroundImage:"url("+Object(j["get"])(t,"icons.image_44")+")"}}),n.a.createElement("strong",null,t.name)),href:i,target:"_self"}}},{key:"getLogoutItem",value:function e(t){var r=this.props,a=r.logoutURL,n=r.featureGlobalNav;if(!n)return null;return{label:ze.rt("Sign out of <strong>{enterpriseName}</strong>",{enterpriseName:t.name}),href:Object(He["a"])(t.id,a),target:"_self"}}},{key:"getEnterpriseItems",value:function e(){var t=this;var r=this.props,a=r.enterprises,n=r.currentEnterpriseId,i=r.featureGlobalNav;if(!i)return[];return Object(j["flatten"])(a.map(function(e){var r=e.teams.map(t.getTeamItem);var a=e.id===n&&e.overLimit?{label:ze.rt("See all <strong>{enterpriseName}</strong> workspaces",{enterpriseName:e.name}),click:function e(){return Ve()}}:null;return[{type:"header",label:e.name}].concat(qe()(r),[a,{type:"separator"}])}))}},{key:"getOtherItems",value:function e(){var t=this;var r=this.props,a=r.others,n=r.featureGlobalNav;if(!n)return[];var i=a.map(function(e){return t.getTeamItem(e)});return[{type:"header",label:ze.t("Your other workspaces")}].concat(qe()(i))}},{key:"render",value:function e(){var t=this.props,r=t.signinURL,a=t.featureGlobalNav,i=t.menuProps;if(!a)return null;var s=r&&[{type:"separator"},{label:ze.t("Sign in to another workspace"),href:r}];var o=[].concat(qe()(this.getEnterpriseItems()),qe()(this.getOtherItems()),qe()(s||[]));return n.a.createElement(T["a"],g()({},i,{template:o}))}}]);return t}(a["Component"]);Je.displayName="SwitchWorkspacesSubmenu";Je.defaultProps=Ye;var Ze=function e(t){var r=[];Object.values(Object(c["getFromBootData"])(t,"other_accounts")||{}).forEach(function(e){r.push({id:e.team_id,enterpriseId:e.enterprise_id,url:e.team_url,name:e.team_name,enterpriseName:e.enterprise_name,icons:e.team_icon})});var a=Object(Re["getCurrentMember"])(t);(Object(j["get"])(a,"enterprise_user.teams")||[]).map(function(e){return Object(oe["getTeamById"])(t,e)}).forEach(function(e){r.push({id:e.id,enterpriseId:Object(j["get"])(a,"enterprise_user.enterprise_id")||e.enterprise_id,url:Object(Ge["b"])(t,e.domain),name:Object(le["getTeamDisplayName"])(e),enterpriseName:Object(j["get"])(a,"enterprise_user.enterprise_name")||e.enterprise_name,icons:e.icon,isUnknown:Object(le["isUnknown"])(e)})});var n=Object(oe["getCurrentTeam"])(t);var i=n.enterprise_id;r=r.sort(function(e,t){if(i){if(e.enterpriseId===i&&t.enterpriseId!==i)return-1;if(t.enterpriseId===i&&e.enterpriseId!==i)return 1}if(!e.isUnknown&&t.isUnknown)return-1;if(!t.isUnknown&&e.isUnknown)return 1;return Object(h["o"])(e.name,t.name)});var s=n.id;r=r.filter(function(e){return e.id!==s});return Object(j["uniqBy"])(r,"id")};var Xe=function e(t){var r={};t.filter(function(e){return e.enterpriseId}).forEach(function(e){var t=e.enterpriseId;r[t]?r[t].teams.length<Qe?r[t].teams.push(e):r[t].overLimit=true:r[t]={id:t,name:e.enterpriseName,teams:[e]}});return Object.values(r)};var $e=function e(t){var r=Ze(t);var a=Xe(r);var n=r.filter(function(e){return!e.enterpriseId});var i=Object(oe["getCurrentTeam"])(t).enterprise_id;var s=Object(c["getFromBootData"])(t,"signin_url");var o=Object(c["getFromBootData"])(t,"logout_url");return{enterprises:a,others:n,currentEnterpriseId:i,signinURL:s,logoutURL:o,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var et=Object(i["connect"])($e)(Je);var tt=r(247);var rt=r(16);var at=r(618);function nt(e){var t=Object(Re["getCurrentMember"])(e);var r=Object(oe["getCurrentTeam"])(e);var a=Object(rt["isAdmin"])(t);var n=Object(rt["isOwner"])(t);var i=Object(rt["isRestricted"])(t);var s=Object(c["pageNeedsEnterprise"])(e);var o=Object(le["isPaidTeam"])(r);var l=a;var u=Object(at["i"])();var d=a||!i&&(!Object(m["getTeamPref"])(e,"emoji_only_admins")||!Object(m["getTeamPref"])(e,"slackbot_responses_only_admins")||!Object(m["getTeamPref"])(e,"loading_only_admins"));var p=s&&Object(tt["isAppSpaceEnabled"])(e)&&Object(Re["isAppmin"])(e);var h=a||!Object(m["getTeamPref"])(e,"stats_only_admins")&&!i;var v=n||Object(m["getUserPref"])(e,"purchaser")||Object(m["getTeamPref"])(e,"all_users_can_purchase");var b=v&&o;var g=!o&&!Object(F["isAppStoreBuild"])();var _=s&&!Object(rt["isRestricted"])(t);var y=Object(at["f"])();var k=Object(c["getFromBootData"])(e,"help_url");var O=Object(c["isFeatureEnabled"])(e,"feature_tinyspeck")||f["isDev"];var E=s&&!i;var w=Object(j["size"])(Object(c["getFromBootData"])(e,"other_accounts"))+(Object(j["get"])(t,"enterprise_user.teams.length",1)-1);var C=w>=1&&!F["isDesktop"];var S=!C&&!!Object(c["getFromBootData"])(e,"signin_url");return{administration:l,invite:u,customize:d,manageApps:p,analytics:h,billing:b,plans:g,orgShared:_,externalShared:y,help:k,version:O,findWorkspaces:E,switchWorkspaces:C,signin:S}}var it=new h["b"]("global_nav");var st={actions:l["b"].object,teamId:l["b"].string.isRequired,signOut:l["b"].func,signoutName:l["b"].string.isRequired,signoutURL:l["b"].string,signinURL:l["b"].string,renderSonicMenu:l["b"].func,featureGlobalNav:l["b"].bool};var ot={actions:{},signOut:j["noop"],signoutURL:void 0,signinURL:void 0,renderSonicMenu:void 0,featureGlobalNav:false};var lt=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSigninClick=r.onSigninClick.bind(r);r.onOpenAppClick=r.onOpenAppClick.bind(r);r.renderAdminSubmenu=r.renderAdminSubmenu.bind(r);r.renderWorkspacesSubmenu=r.renderWorkspacesSubmenu.bind(r);return r}O()(t,[{key:"onSigninClick",value:function e(t){if(F["isDesktop"]){t.preventDefault();Object(F["signInTeam"])()}}},{key:"onOpenAppClick",value:function e(t){t.preventDefault();Se({fallback_to_browser:true,browser_uri:"/downloads",app_uri:"/ssb/open"})}},{key:"renderAdminSubmenu",value:function e(t){return n.a.createElement(Be,{menuProps:t})}},{key:"renderWorkspacesSubmenu",value:function e(t){return n.a.createElement(et,{menuProps:t})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.actions,i=r.renderSonicMenu,s=r.featureGlobalNav,o=r.signoutName,l=r.signoutURL,c=r.signinURL,u=de()(r,["actions","renderSonicMenu","featureGlobalNav","signoutName","signoutURL","signinURL"]);if(!s)return null;var d=[{type:"submenu",label:"Sonic",renderSubmenu:i,hide:!i},{type:"separator"},{type:"custom",children:n.a.createElement(Ae,{key:"team-header"})},{type:"separator"},{label:it.t("Preferences"),shortcut:Object(f["isMac"])()&&F["isDesktop"]&&"\u2318,",click:function e(){return ke()}},{type:"separator"},{type:"submenu",label:it.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!a.administration},{label:it.t("Analytics"),hide:!a.analytics,href:"/stats"},{label:it.t("Billing"),hide:!a.billing,href:"/admin/billing"},{label:it.t("See paid plans"),hide:!a.plans,href:"/pricing"},{label:it.t("Customize Slack"),hide:!a.customize,href:"/customize",target:"_blank"},{type:"separator"},{label:it.t("Invite people"),hide:!a.invite,click:function e(){return Object(be["a"])()}},{label:it.t("Manage apps"),hide:!a.manageApps,href:"/apps/manage"},{label:it.t("Shared channels"),hide:!a.orgShared,click:function e(){return _e()}},{label:it.t("Shared channels (beta)"),hide:!a.externalShared,click:function e(){return Object(ye["a"])()}},{type:"separator"},{label:it.t("Help & feedback"),hide:!a.help,click:we},{label:"Version info (TS only)",hide:!a.version,click:Ce["c"]},{type:"separator"},{label:it.t("Find more workspaces"),hide:!a.findWorkspaces,click:function e(){return Ee()}},{type:"submenu",label:it.t("Switch workspaces"),hide:Object(v["a"])()||!a.switchWorkspaces,renderSubmenu:this.renderWorkspacesSubmenu},{label:it.t("Sign in to another workspace"),hide:!a.signin,href:c,click:this.onSigninClick},{label:it.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:!Object(v["a"])(),click:function e(){return t.props.signOut()},dataQa:"logout"},{label:it.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:Object(v["a"])(),href:l,target:"_self",dataQa:"logout"},{type:"separator"},{label:it.rt("Open the Slack App"),hide:F["isDesktop"],href:"/ssb/open",click:this.onOpenAppClick}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},u,{template:d,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:true}))}}]);return t}(a["Component"]);lt.displayName="TeamMenu";lt.defaultProps=ot;var ct=function e(t){return{signOut:function e(){return t(ve.apply(void 0,arguments))}}};var ut=function e(t){var r=Object(oe["getCurrentTeam"])(t);return{actions:nt(t),teamId:r.id,signoutName:r.enterprise_name||Object(le["getTeamDisplayName"])(r),signoutURL:Object(le["isEnterpriseTeam"])(r)?Object(c["getFromBootData"])(t,"enterprise_logout_url"):Object(c["getFromBootData"])(t,"logout_url"),signinURL:Object(c["getFromBootData"])(t,"signin_url"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var dt=Object(i["connect"])(ut,ct)(lt);var pt=dt;var mt=new h["b"]("global_nav");var ht={name:l["b"].string,featureGlobalNav:l["b"].bool,featureOfflineMode:l["b"].bool,clogger:l["b"].object.isRequired,renderSonicMenu:l["b"].func};var ft={name:void 0,featureGlobalNav:false,featureOfflineMode:false,renderSonicMenu:void 0};var vt=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.renderMenu=r.renderMenu.bind(r);r.renderIcon=r.renderIcon.bind(r);return r}O()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_TEAM_MENU"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(pt,g()({},t,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"renderIcon",value:function e(){if(this.props.featureOfflineMode)return n.a.createElement(a["Fragment"],null,n.a.createElement(ce["b"],null,n.a.createElement(I["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})),n.a.createElement(ce["a"],null,n.a.createElement(q["d"],{tip:mt.t("No network connection"),position:"bottom"},n.a.createElement(I["b"],{type:"cloud-offline-small",className:"p-global_nav__top_name_icon margin_left_25"}))));return n.a.createElement(I["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})}},{key:"render",value:function e(){var t=this.props,r=t.name,a=t.featureGlobalNav;if(!r||!a)return null;return n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12,onClick:this.onClick},n.a.createElement(U["c"],{className:"p-global_nav__top_name","data-qa":"team_menu","aria-label":mt.t("Team menu")},n.a.createElement("div",{className:"overflow_ellipsis"},r),this.renderIcon()))}}]);return t}(a["Component"]);vt.displayName="Name";vt.defaultProps=ft;var bt=function e(t){var r=Object(oe["getCurrentTeam"])(t);return{name:r?Object(le["getTeamDisplayName"])(r):void 0,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureOfflineMode:Object(c["isFeatureEnabled"])(t,"feature_offline_mode"),clogger:Object(x["a"])({state:t})}};var gt=Object(i["connect"])(bt)(vt);var _t=r(1167);var yt=r(173);var kt=r(482);var Ot=r(416);var Et=r(1011);var wt=r(760);var Ct=r(3344);var St=r(312);var jt=r(69);var It=r(19);var Tt=r(493);var Nt=r(165);var At=r(1410);var Rt={name:l["b"].string,secondary:l["b"].string,userId:l["b"].string,inDnd:l["b"].bool,inDndBySnooze:l["b"].bool};var Mt={name:void 0,secondary:void 0,userId:void 0,inDnd:false,inDndBySnooze:false};var Pt=function e(t){var r=t.name,a=t.secondary,i=t.userId,s=t.inDnd,o=t.inDndBySnooze;var l=a?n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},a):null;var c=p()("p-global_nav__top_menu_header","p-global_nav__top_menu_header--full","p-global_nav__top_menu_header--user",{"p-global_nav__top_menu_snooze_background":s&&o,"p-global_nav__top_menu_schedule_background":s&&!o});return n.a.createElement("div",{className:c},n.a.createElement(yt["b"],{userId:i,size:36,isInteractive:false,className:"p-global_nav__top_menu_header_icon",tabIndex:"-1"}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},r),l))};Pt.displayName="UserHeader";Pt.defaultProps=Mt;var xt=function e(t){var r=Object(Re["getCurrentMember"])(t);var a=Object(Tt["getSnoozeScheduleForCurrentUser"])(t),n=a.snoozeEnabled;return{name:Object(rt["getPrefCompliantMemberName"])(t,r),secondary:Object(rt["getMemberSecondaryName"])(t,r),userId:r.id,inDnd:!!Object(Tt["getDndByMemberId"])(t,r.id),inDndBySnooze:n}};var Dt=Object(i["connect"])(xt)(Pt);var Ft=r(1001);var Lt=r(1745);var Bt=new h["b"]("do_not_disturb");var Ut={inDndBySnooze:l["b"].bool.isRequired,snoozeEndTs:l["b"].number,dndEndTs:l["b"].number,do24hrTime:l["b"].bool,featureBetterSnooze:l["b"].bool};var qt={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false,featureBetterSnooze:false};var Gt=function(e){S()(t,e);function t(){y()(this,t);return w()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}O()(t,[{key:"render",value:function e(){var t=this.props,r=t.inDndBySnooze,a=t.snoozeEndTs,i=t.dndEndTs,s=t.do24hrTime,o=t.featureBetterSnooze;if(!o)return null;var l=p()("p-dnd_header",{"p-dnd_header__snooze_background":r,"p-dnd_header__schedule_background":!r});var c=r?a:i;var u=Object(Ft["b"])(c,{do24hrTime:s,featureBetterSnooze:o});return n.a.createElement("div",{className:l},n.a.createElement("div",{className:"p-dnd_header__status"},n.a.createElement("div",null,n.a.createElement("strong",null,Bt.t("Do Not Disturb: ON",{fallbackHash:"e9f808845f44c3345ade56f562f58e9da896e00e"}))),n.a.createElement("div",{className:"p-dnd_header__sub_text"},u)))}}]);return t}(a["PureComponent"]);Gt.displayName="DndHeader";Gt.defaultProps=qt;var Ht=function e(t){var r=Object(c["getCurrentUserId"])(t);var a=Object(Tt["getDndScheduleByMemberId"])(t,r),n=a.nextDndEndTs;var i=Object(Tt["getSnoozeScheduleForCurrentUser"])(t),s=i.snoozeEnabled,o=i.snoozeEndTs;return{inDndBySnooze:s,snoozeEndTs:o,dndEndTs:n,do24hrTime:Object(m["getUserPref"])(t,"time24"),featureBetterSnooze:Object(c["isFeatureEnabled"])(t,"feature_better_snooze")}};var Wt=Object(i["connect"])(Ht)(Gt);function Vt(e){var t=Object(c["isFeatureEnabled"])(e,"feature_tinyspeck");return{help:Object(c["getFromBootData"])(e,"help_url"),version:t||f["isDev"]}}var zt=new h["b"]("global_nav");var Qt={actions:l["b"].object,currentMember:l["b"].object,currentPresence:l["b"].string,onTriggerClose:l["b"].func,openCustomStatusDialog:l["b"].func,currentChannel:l["b"].object,inDnd:l["b"].bool,inDndBySnooze:l["b"].bool,endDndSnooze:l["b"].func,endDndSchedule:l["b"].func,featureGlobalNav:l["b"].bool,toggleUserPresence:l["b"].func,updateCurrentMemberProfile:l["b"].func};var Kt={actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:j["noop"],openCustomStatusDialog:j["noop"],currentChannel:void 0,inDnd:false,inDndBySnooze:false,endDndSnooze:j["noop"],endDndSchedule:j["noop"],featureGlobalNav:false,toggleUserPresence:j["noop"],updateCurrentMemberProfile:j["noop"]};var Yt=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderDndMenu=r.renderDndMenu.bind(r);r.renderPresenceLabel=r.renderPresenceLabel.bind(r);return r}O()(t,[{key:"renderDndMenu",value:function e(t){var r=this.props.currentChannel;return n.a.createElement(At["a"],{currentChannel:r,menuProps:t,featureSonicDnd:true,useGlobalNav:true})}},{key:"renderPresenceLabel",value:function e(){var t=this.props,r=t.currentPresence,a=t.featureGlobalNav;if(!a)return null;switch(r){case"active":return zt.rt("Set yourself to <strong>away</strong>",null,function(e){var t=e.text,r=e.key;return n.a.createElement("strong",{key:r},t)});case"away":return zt.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,function(e){var t=e.tag,r=e.text,a=e.key;switch(t){case"status":return n.a.createElement("strong",{className:"half_opacity",key:a},r);case"strong":return n.a.createElement("strong",{key:a},r);default:return null}});default:return null}}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.actions,i=r.currentMember,s=r.inDnd,o=r.inDndBySnooze,l=r.featureGlobalNav,c=de()(r,["actions","currentMember","inDnd","inDndBySnooze","featureGlobalNav"]);if(!l)return null;var u=[{type:"custom",children:n.a.createElement(Dt,{key:"user-header"})},{type:"custom",children:n.a.createElement(Wt,{key:"dnd-header"}),hide:!s},{type:"submenu",label:zt.rt("Turn on <strong>Do Not Disturb</strong>"),renderSubmenu:this.renderDndMenu,hide:s},{label:zt.t("Resume notifications now"),key:"turn-off-dnd",hide:!s,click:o?this.props.endDndSnooze:this.props.endDndSchedule},{type:"submenu",label:zt.t("Adjust time"),renderSubmenu:this.renderDndMenu,hide:!s||s&&!o},{label:zt.t("Adjust schedule\u2026",{fallbackHash:"ce0d0efeb198eef758ed1a5393ca0a0f33012be6"}),key:"adjust-dnd-schedule",hide:!s||s&&o,click:function e(){return Object(wt["a"])("notifications","#prefs_dnd")}},{type:"separator",key:"dnd-separator",hide:!s},{label:zt.t("Clear status"),hide:!Object(rt["hasCustomStatusSet"])(i),click:function e(){t.props.updateCurrentMemberProfile({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})}},{label:Object(rt["hasCustomStatusSet"])(i)?zt.t("Edit status"):zt.t("Set a status"),shortcut:Object(f["isMac"])()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:this.props.openCustomStatusDialog},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{type:"separator",key:"header-separator"},{label:zt.t("Profile & account"),click:function e(){return Object(Nt["h"])(i.id)}},{label:zt.rt("Notification preferences"),key:"notification-preferences",click:function e(){return Object(wt["a"])("notifications")}},{type:"custom",children:n.a.createElement("div",{className:"p-global_nav__top_menu_cap",key:"user-menu-bottom-cap"})}].filter(function(e){return!e.hide});var d=p()({"p-global_nav__top_user_menu":true,"p-global_nav__top_user_menu--dnd":s});return n.a.createElement(T["a"],g()({},c,{template:u,menuClassNames:d,noMargin:true}))}}]);return t}(a["Component"]);Yt.displayName="UserMenu";Yt.defaultProps=Kt;var Jt=function e(t){var r=Object(Re["getCurrentMember"])(t);var a=Object(jt["getPrimaryView"])(t);var n=Object(Tt["getSnoozeScheduleForCurrentUser"])(t),i=n.snoozeEnabled;return{actions:Vt(t),currentMember:r,currentPresence:Object(St["getCurrentMemberPresence"])(t),currentChannel:Object(It["getChannelById"])(t,a,false)||void 0,inDnd:!!Object(Tt["getDndByMemberId"])(t,r.id),inDndBySnooze:i,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Zt={openCustomStatusDialog:_t["a"],toggleUserPresence:St["toggleUserPresence"],updateCurrentMemberProfile:Ct["a"],endDndSnooze:Et["b"],endDndSchedule:Et["a"]};var Xt=Object(i["connect"])(Jt,Zt)(Yt);var $t=Xt;var er=new h["b"]("global_nav");var tr={userId:l["b"].string,hasCustomStatus:l["b"].bool,openCustomStatusDialog:l["b"].func,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var rr={userId:void 0,hasCustomStatus:false,openCustomStatusDialog:j["noop"],featureGlobalNav:false};var ar=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onUserClick=r.onUserClick.bind(r);r.onStatusClick=r.onStatusClick.bind(r);r.renderMenu=r.renderMenu.bind(r);return r}O()(t,[{key:"onUserClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_USER_MENU"}}})}},{key:"onStatusClick",value:function e(){this.props.openCustomStatusDialog();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CUSTOM_STATUS"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement($t,t)}},{key:"render",value:function e(){var t=this.props,r=t.userId,a=t.hasCustomStatus,i=t.featureGlobalNav;if(!r||!i)return null;var s=a&&n.a.createElement(U["c"],{onClick:this.onStatusClick,className:"p-global_nav__top_user_status_button","aria-label":er.t("Edit status")},n.a.createElement(kt["a"],{memberId:r,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),n.a.createElement(I["b"],{type:"pencil",className:"p-global_nav__top_user_status_edit"}));return n.a.createElement("div",{className:"p-global_nav__top_user"},s,n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12,onClick:this.onUserClick},n.a.createElement(U["c"],{"aria-label":er.t("User menu")},n.a.createElement(yt["b"],{userId:r,size:32,showBadge:false,isInteractive:false,className:p()({"p-global_nav__top_user_avatar":true,"p-global_nav__top_user_avatar--beside-status":a}),tabIndex:"-1"}),n.a.createElement(Ot["a"],{memberId:r,className:"p-global_nav__top_user_presence",inline:false}))))}}]);return t}(a["Component"]);ar.displayName="User";ar.defaultProps=rr;var nr=function e(t){return{userId:Object(c["getCurrentUserId"])(t),hasCustomStatus:Object(rt["hasCustomStatusSet"])(Object(Re["getCurrentMember"])(t)),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(x["a"])({state:t})}};var ir={openCustomStatusDialog:_t["a"]};var sr=Object(i["connect"])(nr,ir)(ar);var or=r(106);var lr=r.n(or);var cr=r(815);var ur=r(3458);var dr=r(145);var pr=r(150);var mr=r(348);var hr={icon:l["b"].string.isRequired,pane:l["b"].string.isRequired,tooltip:l["b"].node.isRequired,"aria-label":l["b"].string.isRequired,active:l["b"].bool,children:l["b"].node,className:l["b"].string,showStarredItemsList:l["b"].func.isRequired,closeFlexpane:l["b"].func.isRequired,clogger:l["b"].object.isRequired};var fr={active:false,children:void 0,className:void 0};var vr=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}O()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.pane,a=t.active,n=t.clogger;"team"===r?Object(Nt["m"])():"starred_items"===r&&Object(v["a"])()?a?this.props.closeFlexpane():this.props.showStarredItemsList():Object(mr["d"])(r);"mentions"===r?n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_ACTIVITY"}}}):"stars"===r&&n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_STARS"}}})}},{key:"render",value:function e(){var t=this.props,r=t.icon,a=t.tooltip,i=t.pane,s=t.active,o=t.children,l=t["aria-label"];var c=p()("p-global_nav__top_button","p-global_nav__top_flex","p-global_nav__top_flex--"+i,s&&"p-global_nav__top_flex--active",this.props.className);return n.a.createElement(q["d"],{tip:a,delay:q["a"],position:"bottom",offsetY:sn},n.a.createElement(U["c"],{className:c,onClick:this.onClick,"aria-label":l},n.a.createElement(I["b"],{type:r,className:"p-global_nav__top_button_icon"}),o))}}]);return t}(a["PureComponent"]);vr.displayName="FlexButton";vr.defaultProps=fr;var br=function e(t,r){var a=r.pane;return{active:Object(jt["getSecondaryView"])(t)===a,clogger:Object(x["a"])({state:t})}};var gr=function e(t){return{showStarredItemsList:function e(){return t(Object(pr["f"])())},closeFlexpane:function e(){return t(Object(pr["a"])())}}};var _r=Object(i["connect"])(br,gr)(vr);var yr=new h["b"]("global_nav");var kr={reactionToast:l["b"].shape({emoji:l["b"].string,memberName:l["b"].string,channelName:l["b"].string}),noAnimation:l["b"].bool,featureGlobalNav:l["b"].bool};var Or={reactionToast:void 0,noAnimation:false,featureGlobalNav:false};var Er=function e(t){var r=t.reactionToast,i=t.noAnimation,s=t.featureGlobalNav;if(!s)return null;var o=r&&n.a.createElement(dr["b"],{text:":"+r.emoji+":",emojiSize:dr["a"].LARGE,className:"p-global_nav__top_activity_toast"});var l=lr.a.chrome&&!F["isDesktop"];var c=!l&&n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(f["isMac"])()?"\u2318\u21e7M":"Ctrl+Shift+M");var u=r?n.a.createElement(a["Fragment"],null,Object(ur["a"])(r.memberName),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_light_gray"},Object(ur["a"])(r.channelName))):n.a.createElement(a["Fragment"],null,yr.t("Activity"),c);var d=p()({"p-global_nav__top_activity":true,"p-global_nav__top_activity--no-animation":i,"p-global_nav__top_activity--toasting":r});return n.a.createElement("div",{className:d},n.a.createElement(_r,{icon:"mentions",pane:"mentions",tooltip:u,"aria-label":yr.t("Activity")}),o)};Er.displayName="ActivityButton";Er.defaultProps=Or;var wr=function e(t){return{reactionToast:Object(cr["getReactionToast"])(t),noAnimation:!Object(m["getUserPref"])(t,"a11y_animations"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Cr=Object(i["connect"])(wr)(Er);var Sr=r(31);var jr=r(77);var Ir=Object(pe["a"])("Fetch help issues",function(e,t,r){return e(Object(me["a"])({method:"help.issues.list",args:r})).catch(function(e){Object(P["a"])("Failed to get list of issues for a user");throw e})});var Tr=Object(pe["a"])("Fetch help articles",function(e,t,r){return e(Object(me["a"])({method:"helpdesk.get",args:r})).catch(function(e){Object(P["a"])("Failed to get list of articles for a user");throw e})});Ir.propTypes={};Tr.propTypes={locale:l["b"].string};var Nr=function e(t,r){var a=Math.min(r||5e5,5e5);if(t.length>a)return Object(j["escapeRegExp"])(t.slice(0,a));return Object(j["escapeRegExp"])(t)};var Ar=r(3289);var Rr=r(39);var Mr=r(2086);var Pr=r(408);var xr=r(344);var Dr=new h["b"]("help");var Fr={tickets:l["b"].shape({open:l["b"].number,closed:l["b"].number,unread:l["b"].number}),clogger:l["b"].object.isRequired};var Lr={tickets:{open:0,closed:0,unread:0}};var Br="HELP_MODAL_ACTION";var Ur="/help";var qr=function e(t){var r={action:"view_request_history",trigger:"click_view_request_history"};t.track(Br,r);window.open(Object(Ar["a"])(Ur))};var Gr=function e(t){var r={action:"view_new_replies",trigger:"click_view_new_replies"};t.track(Br,r);window.open(Object(Ar["a"])(Ur))};var Hr=function e(t){var r={action:"view_open_requests",trigger:"click_view_open_requests"};t.track(Br,r);window.open(Object(Ar["a"])(Ur))};var Wr=function e(t,r){if(t>0)return n.a.createElement("div",null,n.a.createElement("span",null,Dr.t("No pending requests.")),n.a.createElement("span",{role:"link",tabIndex:0,className:"p-help_modal__requests",onClick:function e(){return qr(r)},"data-qa":"help_modal_requests_closed"},n.a.createElement("span",{className:"p-help_modal__requests__message bold"},Dr.t("View your help request history"),".")));return null};var Vr=function e(t,r){if(t>0){var a=t>1?Dr.t("You have new replies to your help requests."):Dr.t("You have a new reply to your help request.");return n.a.createElement("div",{role:"link",tabIndex:0,className:"p-help_modal__requests",onClick:function e(){return Gr(r)},"data-qa":"help_modal_requests_unread"},n.a.createElement("span",{className:"p-help_modal__requests_badge unread"},t),n.a.createElement("span",{className:"p-help_modal__requests__message bold"},a))}return null};var zr=function e(t,r){if(t>0){var a=t>1?Dr.t("You have open help requests."):Dr.t("You have an open help request.");return n.a.createElement("div",{role:"link",tabIndex:0,className:"p-help_modal__requests",onClick:function e(){return Hr(r)},"data-qa":"help_modal_requests_read"},n.a.createElement("span",{className:"p-help_modal__requests_badge read"},t),n.a.createElement("span",{className:"p-help_modal__requests__message read bold"},a))}return null};var Qr=function e(t){return n.a.createElement("div",{className:"display_flex flex_direction_column"},Wr(t.tickets.closed,t.clogger),n.a.createElement("div",{className:t.tickets.unread>0?"padding_top_50":""},Vr(t.tickets.unread,t.clogger)),n.a.createElement("div",{className:t.tickets.closed>0||t.tickets.unread>0?"padding_top_50":""},zr(t.tickets.open,t.clogger)))};Qr.displayName="TicketsStatus";Qr.defaultProps=Lr;var Kr=Qr;var Yr=r(744);var Jr=r(820);var Zr=r(92);var Xr=function e(t){return n.a.createElement("div",{className:"padding_right_75"},n.a.createElement("div",{role:"link",tabIndex:"0","data-qa":"article-"+t.article.id,className:"p-help_modal__list__item display_flex align_items_center justify_content_between "+(t.isFocus?"p-help_modal__list__item__focus":""),key:t.article.id+"-list-item",onClick:function e(){t.onClickArticle(t.article.url)},onKeyDown:function e(r){13===r.keyCode&&t.onClickArticle(t.article.url)}},n.a.createElement("div",{className:"p-help_modal__list__item__title"},t.article.title),n.a.createElement(I["b"],{type:"enter",className:"p-help_modal__list__icon"})))};Xr.displayName="Article";Xr.defaultProps={article:{},isFocus:false,onClickArticle:j["noop"]};var $r=Xr;var ea=r(2218);var ta=new h["b"]("help");var ra={query:l["b"].string,articles:l["b"].arrayOf(l["b"].shape({id:l["b"].number,images:l["b"].array,label_names:l["b"].array,title:l["b"].string,url:l["b"].string})),tickets:l["b"].shape({open:l["b"].number,closed:l["b"].number,unread:l["b"].number}),onQueryChange:l["b"].func,showKeyboardShortcuts:l["b"].func,isLoading:l["b"].bool,trigger:l["b"].string.isRequired,clogger:l["b"].object.isRequired};var aa={query:"",articles:[],tickets:{closed:0,read:0,unread:0},onQueryChange:j["noop"],showKeyboardShortcuts:j["noop"],isLoading:false};var na=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={query:r.props.query,articles:r.props.articles,isModalOpen:true,focusFirstResult:true,isLoading:r.props.isLoading};r.zdLocale=Object(Rr["a"])();Object(j["bindAll"])(r,["onSearchInputChange","onSearchInputSubmit","onSearchInputBlur","onListMouseEnter","onClickArticle","onClickBrowseLink","onClickContactUsButton","onClickShortcutsButton","renderArticles"]);return r}O()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.trigger,a=t.clogger;a.track("HELP_MODAL_ACTION",{action:"open_modal",trigger:r})}},{key:"componentWillReceiveProps",value:function e(t){t.articles!==this.state.articles&&this.setState(function(){return{articles:t.articles,isLoading:t.isLoading}})}},{key:"onListMouseEnter",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"onSearchInputChange",value:function e(t){var r=t.target.value;this.setState(function(){return{query:r,focusFirstResult:true}});this.props.onQueryChange(r)}},{key:"onSearchInputSubmit",value:function e(){this.state.articles.length&&this.openLinkInNewWindow(Object(Ar["a"])(this.state.articles[0].url))}},{key:"onClickArticle",value:function e(t){this.openLinkInNewWindow(Object(Ar["a"])(t))}},{key:"onClickBrowseLink",value:function e(){var t=this.state.query;var r=this.props.clogger;var a=Object(Ar["b"])({zdLocale:this.zdLocale,query:t});t&&r.track("HELP_MODAL_SEARCH",{search_terms:t});r.track("HELP_MODAL_ACTION",{action:"browse_all",trigger:"click_browse_all"});window.open(a)}},{key:"onClickContactUsButton",value:function e(){var t="/help/requests/new";var r=this.props.clogger;var a="HELP_MODAL_ACTION";var n={action:"submit_new_request",trigger:"click_submit_new_request"};r.track(a,n);window.open(Object(Ar["a"])(t))}},{key:"onClickShortcutsButton",value:function e(){var t=this.props.clogger;var r="HELP_MODAL_ACTION";var a={action:"keyboard_shorcuts",trigger:"click_keyboard_shorcuts"};this.setState(function(){return{isModalOpen:false}});t.track(r,a);this.props.showKeyboardShortcuts()}},{key:"onSearchInputBlur",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"openLinkInNewWindow",value:function e(t){var r=this.props.clogger;this.state.query&&r.track("HELP_MODAL_SEARCH",{search_terms:this.state.query,locale:this.zdLocale});r.track("HELP_MODAL_ZD_HIT",{zd_article_url:t});window.open(Object(Ar["a"])(t))}},{key:"renderArticles",value:function e(t){var r=this.state.articles;var a=r[t];return n.a.createElement($r,{article:a,isFocus:this.state.focusFirstResult&&0===t,onClickArticle:this.onClickArticle})}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.query,i=r.articles,s=r.isModalOpen;var o=this.props,l=o.tickets,c=o.clogger;this.keys=Object(j["map"])(i,"id").map(function(e){return e.toString()});return n.a.createElement(Pr["a"],{isOpen:s,showCancelButton:false,showGoButton:false,modalClasses:"p-help_modal",contentLabel:"help-modal","data-qa":"help_modal"},n.a.createElement("div",{"data-qa":"help_modal_contents"},n.a.createElement(Jr["b"],{className:"p-help_modal__shortcuts__button c-button--outline",type:"outline",onClick:this.onClickShortcutsButton,"data-qa":"help_modal_shortcuts_button"},n.a.createElement(I["b"],{type:"keyboard",className:"small_right_margin"}),n.a.createElement("strong",null,ta.t("Keyboard shortcuts"))),n.a.createElement("div",{className:"display_flex align_items_baseline justify_content_between padding_top_200"},n.a.createElement("h1",{className:"p-help_modal_title"},ta.t("How can we help?")),n.a.createElement("div",{tabIndex:0,role:"link",className:"p-help_modal__browse display_flex align_items_end",onClick:this.onClickBrowseLink,"data-qa":"help_modal_browse"},n.a.createElement("span",{className:"p-help_modal__browse__text"},ta.t("Browse all answers")),n.a.createElement(I["b"],{type:"arrow-large-right",className:"padding_left_100 p-help_modal__browse__icon"}))),n.a.createElement(xr["a"],{placeholder:ta.t("Search the Help Center"),value:a,icon:"search",autoFocus:true,hasResetButton:true,onChange:this.onSearchInputChange,onSubmit:this.onSearchInputSubmit,blurOnSubmit:true,className:"margin_top_200 margin_bottom_100",size:"large",onBlur:this.onSearchInputBlur}),a?null:n.a.createElement("div",{className:"p-help_modal__popular_topics padding_bottom_100 bold"},ta.t("Popular help topics")),n.a.createElement("div",{role:"list",className:"p-help_modal__list display_flex flex_direction_column justify_content_between",onMouseEnter:this.onListMouseEnter},this.state.isLoading?n.a.createElement(Zr["a"],{size:"large",color:"blue",noMargin:true}):n.a.createElement("div",{className:"full_height"},n.a.createElement(Mr["a"],null,function(e){var r=e.width,a=e.height;return n.a.createElement(Yr["a"],{width:r,height:a,keys:t.keys,rowRenderer:t.renderArticles})}))),n.a.createElement("div",{className:"p-help_modal__footer display_flex align_items_center justify_content_between"},n.a.createElement("div",{className:"p-help_modal__footer_tickets display_flex flex_direction_column"},n.a.createElement(Kr,{tickets:l,clogger:c})),n.a.createElement("div",{className:"p-help_modal__footer_contact"},n.a.createElement("div",null,n.a.createElement("span",{className:"p-help_modal__contact_us__message"},ta.t("Can\u2019t find what you need, or have some feedback?")),n.a.createElement(Jr["b"],{type:"primary",size:"medium",className:"margin_left_100 p-help_modal__contact_us__button",onClick:this.onClickContactUsButton,"data-qa":"help_modal_contact_button"},ta.t("Contact Us")))))))}}]);return t}(a["Component"]);na.displayName="HelpModal";na.defaultProps=aa;var ia=na;var sa=new h["b"]("help");var oa={query:l["b"].string,fetchHelpIssues:l["b"].func,fetchHelpArticles:l["b"].func,showKeyboardShortcuts:l["b"].func,trigger:l["b"].string.isRequired,clogger:l["b"].object.isRequired};var la={query:"",fetchHelpIssues:j["noop"],fetchHelpArticles:j["noop"],showKeyboardShortcuts:j["noop"]};var ca=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={query:r.props.query,articles:[],tickets:{open:0,closed:0,unread:0},isLoading:true};r.allArticles=[];r.onQueryChange=r.onQueryChange.bind(r);r.zdLocale=Object(Rr["a"])();return r}O()(t,[{key:"componentDidMount",value:function e(){this.fetchHelpIssues();this.fetchHelpArticles()}},{key:"onQueryChange",value:function e(t){var r=t?this.filterArticlesByQuery(t):this.popularArticles;if(t&&r.length<7){var a=Object(Ar["b"])({query:t,zdLocale:this.zdLocale});r.push({id:-99999,images:[],label_names:[],title:sa.t('Search for "{query}" on the Help Center',{query:t}),url:a})}this.setState(function(){return{query:t,articles:r}})}},{key:"filterPopularArticles",value:function e(t){var r=[];t.forEach(function(e){e.popular&&r.push(e)});r.sort(function(e,t){if(void 0===e.order)return 1;if(void 0===t.order)return-1;return e.order-t.order});return r}},{key:"filterArticlesByQuery",value:function e(t){var r=Nr(t);var a=new RegExp(r,"i");var n=-1;var i=this.allArticles.filter(function(e,t){if(e.title.toLowerCase()===r.toLowerCase()){n=t;return false}return e.title.match(a)});-1!==n&&i.unshift(this.allArticles[n]);return i}},{key:"fetchHelpIssues",value:function e(){var t=this;this.props.fetchHelpIssues().then(function(e){var r=e.ok,a=e.issues;if(r&&a){var n={open:0,closed:0,unread:0};a.forEach(function(e){"unread"===e.state?n.unread+=1:"open"===e.state?n.open+=1:(e.is_resolved||e.is_closed)&&(n.closed+=1)});t.setState(function(){return{tickets:n}})}})}},{key:"processArticles",value:function e(t){var r=this;this.allArticles=JSON.parse(t.articles).articles;this.popularArticles=this.filterPopularArticles(this.allArticles);this.state.query?this.setState(function(){return{articles:r.filterArticlesByQuery(r.props.query),isLoading:false}}):this.setState(function(){return{articles:r.popularArticles,isLoading:false}})}},{key:"fetchHelpArticles",value:function e(){var t=this;this.props.fetchHelpArticles({locale:this.zdLocale}).then(function(e){t.processArticles(e)})}},{key:"render",value:function e(){var t=this.state,r=t.articles,a=t.query,i=t.tickets,s=t.isLoading;var o=this.props,l=o.trigger,c=o.clogger;return n.a.createElement(ia,{articles:r,query:a,tickets:i,onQueryChange:this.onQueryChange,showKeyboardShortcuts:this.props.showKeyboardShortcuts,isLoading:s,trigger:l,clogger:c})}}]);return t}(a["Component"]);ca.displayName="HelpModalContainer";ca.defaultProps=la;var ua=function e(t){return{clogger:Object(x["a"])({state:t})}};var da={fetchHelpIssues:Ir,fetchHelpArticles:Tr,showKeyboardShortcuts:pr["e"]};var pa=Object(i["connect"])(ua,da)(ca);var ma=pa;var ha=Object(Sr["b"])("Opens the help modal",function(e,t,r){e(Object(jr["openModal"])({element:n.a.createElement(ma,r)}))});ha.propTypes={trigger:l["b"].string.isRequired};var fa=new h["b"]("global_nav");var va={isUserRestricted:l["b"].bool,isPaid:l["b"].bool,isEnterprise:l["b"].bool,userId:l["b"].string,showFileList:l["b"].func,showKeyboardShortcuts:l["b"].func,showWhatsNew:l["b"].func,showUserGroupList:l["b"].func,featureGlobalNav:l["b"].bool,featureSonicUserGroups:l["b"].bool,featureModernizeHelpModal:l["b"].bool,openHelpModal:l["b"].func,clogger:l["b"].object.isRequired};var ba={isUserRestricted:false,isPaid:false,isEnterprise:false,userId:void 0,showFileList:j["noop"],showKeyboardShortcuts:j["noop"],showWhatsNew:j["noop"],showUserGroupList:j["noop"],featureGlobalNav:false,featureSonicUserGroups:false,featureModernizeHelpModal:false,openHelpModal:j["noop"]};var ga=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onTriggerClick=r.onTriggerClick.bind(r);r.clogItem=r.clogItem.bind(r);r.renderMenu=r.renderMenu.bind(r);return r}O()(t,[{key:"onTriggerClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU"}}})}},{key:"clogItem",value:function e(t){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU_ITEM"}},flex_name:t})}},{key:"renderMenu",value:function e(t){var r=this;var a=this.props,i=a.featureGlobalNav,s=a.featureSonicUserGroups,o=a.isUserRestricted,l=a.isPaid,c=a.isEnterprise,u=a.userId;if(!i)return null;var d=[{label:fa.t("Files"),icon:n.a.createElement(I["b"],{type:"all-files-alt"}),click:function e(){r.props.showFileList({user:u});r.clogItem("files_user")}},{label:fa.t("Downloads"),icon:n.a.createElement(I["b"],{type:"cloud-download"}),click:function e(){Object(mr["c"])("downloads");r.clogItem("downloads")},hide:!(window.desktop&&window.desktop.downloads)},{type:"separator"},{label:c?fa.t("Organization Directory"):fa.t("Workspace Directory"),icon:n.a.createElement(I["b"],{type:"team-directory"}),shortcut:!lr.a.firefox&&(Object(f["isMac"])()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:function e(){Object(Nt["m"])();r.clogItem("team")}},{label:fa.t("User Groups"),icon:n.a.createElement(I["b"],{type:"user-groups"}),click:function e(){s?r.props.showUserGroupList():Object(Nt["l"])();r.clogItem("groups")},hide:o||!l},{type:"separator"},{label:fa.t("What\u2019s New"),icon:n.a.createElement(I["b"],{type:"emoji-celebration"}),click:function e(){r.props.showWhatsNew();r.clogItem("whats_new")}},{label:fa.t("Keyboard Shortcuts"),icon:n.a.createElement(I["b"],{type:"keyboard"}),shortcut:Object(f["isMac"])()?"\u2318/":"Ctrl+/",click:function e(){r.props.showKeyboardShortcuts();r.clogItem("shortcuts")}},{label:fa.t("Help"),icon:n.a.createElement(I["b"],{type:"question-circle"}),click:function e(){r.props.featureModernizeHelpModal?r.props.openHelpModal({trigger:"flex_menu"}):we();r.clogItem("help")}}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},t,{menuClassNames:"p-global_nav__top_flexpanes_menu",template:d,stripTerminalSeparators:true,width:Object(f["isMac"])()?void 0:360}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return n.a.createElement(T["e"],{position:"bottom-right",renderMenu:this.renderMenu,offsetY:on,onClick:this.onTriggerClick},n.a.createElement(q["d"],{tip:fa.t("More options"),position:"bottom",delay:q["a"],offsetY:sn},n.a.createElement(U["c"],{className:"p-global_nav__top_button p-global_nav__top_button--flexpanes","aria-label":fa.t("More options")},n.a.createElement(I["b"],{type:"vertical-ellipsis",className:"p-global_nav__top_button_icon"}))))}}]);return t}(a["PureComponent"]);ga.displayName="FlexpanesMenu";ga.defaultProps=ba;var _a=function e(t){return{isUserRestricted:Object(rt["isRestricted"])(Object(Re["getCurrentMember"])(t)),isPaid:Object(le["isPaidTeam"])(Object(oe["getCurrentTeam"])(t)),isEnterprise:Object(c["pageNeedsEnterprise"])(t),userId:Object(c["getCurrentUserId"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureSonicUserGroups:Object(c["isFeatureEnabled"])(t,"feature_sonic_user_groups"),featureModernizeHelpModal:Object(c["isFeatureEnabled"])(t,"feature_modern_help_modal"),clogger:Object(x["a"])({state:t})}};var ya={showFileList:pr["d"],showKeyboardShortcuts:pr["e"],showWhatsNew:pr["j"],showUserGroupList:pr["i"],openHelpModal:ha};var ka=Object(i["connect"])(_a,ya)(ga);var Oa=r(180);var Ea=r(978);var wa=r(170);var Ca=r(3476);var Sa=r(104);var ja=r(188);var Ia=r(268);var Ta=r(161);var Na=r(446);var Aa=r(3462);var Ra=r(3463);var Ma=r(280);var Pa=r(3461);var xa={autocompleteIsOpen:l["b"].bool.isRequired,openSearchAutocomplete:l["b"].func.isRequired,closeSearchAutocomplete:l["b"].func.isRequired,searchAutocompleteSuggestionAccept:l["b"].func.isRequired,searchPrecache:l["b"].func.isRequired,displayQuery:l["b"].string};var Da={displayQuery:""};var Fa=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["onClick","onSearchInputBoxFocus","onSearchInputBoxEscape","onSearchAutocompleteSuggestionAccept"]);r.precacheSearch=Object(j["throttle"])(r.precacheSearch.bind(r),6e4);return r}O()(t,[{key:"onClick",value:function e(){this.props.autocompleteIsOpen||this.props.openSearchAutocomplete()}},{key:"onSearchInputBoxFocus",value:function e(){this.props.openSearchAutocomplete();this.precacheSearch()}},{key:"onSearchInputBoxEscape",value:function e(){this.props.closeSearchAutocomplete()}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(Na["e"])();this.props.searchAutocompleteSuggestionAccept()}},{key:"precacheSearch",value:function e(){this.props.searchPrecache()}},{key:"render",value:function e(){var t=p()({"p-global_nav__top_search":true,"p-global_nav__top_search--browser":!F["isDesktop"],"p-global_nav__top_search--primarysearch":true,"p-global_nav__top_search--primarysearch_open":this.props.autocompleteIsOpen});return n.a.createElement(Ta["a"],{enabled:["feature_primary_search"]},n.a.createElement(U["c"],{className:t,onClick:this.onClick},n.a.createElement(Pa["a"],{autoFocus:false,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus})))}}]);return t}(a["PureComponent"]);Fa.displayName="AutocompleteInputInPrimarySearch";Fa.defaultProps=Da;var La=function e(t){return{autocompleteIsOpen:Object(Ia["isSearchAutocompleteOpen"])(t),displayQuery:Object(Oa["getSearchInputBoxDisplayQuery"])(t)}};var Ba={searchPrecache:Ma["h"],openSearchAutocomplete:Ia["openSearchAutocomplete"],closeSearchAutocomplete:Ia["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:Aa["a"]};var Ua=Object(i["connect"])(La,Ba)(Fa);var qa={isOpen:l["b"].bool.isRequired,userQuery:l["b"].string.isRequired,closeAutocomplete:l["b"].func.isRequired,searchAutocompleteSuggestionAccept:l["b"].func.isRequired};var Ga=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(r,["handleClick","onSearchAutocompleteSuggestionAccept","handleAutocompleteRef"]);r.calculatePopoverConstraints=Object(j["throttle"])(r.calculatePopoverConstraints.bind(r),1e3);r.searchHeaderBackdrop=Object(a["createRef"])();r.state={hasCalculatedConstraints:false,overlayStyle:{marginTop:0},contentStyle:{top:0,left:0,width:200}};r.autocompleteInputRef=null;return r}O()(t,[{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(Na["e"])();this.props.searchAutocompleteSuggestionAccept()}},{key:"calculatePopoverConstraints",value:function e(){if(!this.autocompleteInputRef)return;var t=Object(Sa["findDOMNode"])(this.autocompleteInputRef);var r=t.getBoundingClientRect();var a=t.parentElement.getBoundingClientRect();var n=10;this.setState(function(){return{hasCalculatedConstraints:true,overlayStyle:{marginTop:a.bottom},contentStyle:{top:0,left:r.left-n,width:r.width+2*n}}})}},{key:"handleAutocompleteRef",value:function e(t){this.autocompleteInputRef=t;t&&this.calculatePopoverConstraints()}},{key:"handleClick",value:function e(t){this.searchHeaderBackdrop&&this.searchHeaderBackdrop.current===t.target&&this.props.closeAutocomplete()}},{key:"render",value:function e(){var t=this.props,r=t.isOpen,a=t.closeAutocomplete;var i="c-popover c-search_modal c-search_modal--autocomplete c-search_modal--primarysearch";var s=r&&this.state.hasCalculatedConstraints;return n.a.createElement(Ta["a"],{enabled:["feature_primary_search"]},s&&n.a.createElement("div",{className:"c-search_autocomplete__header_backdrop",ref:this.searchHeaderBackdrop,onClick:this.handleClick}),n.a.createElement(Ua,{ref:this.handleAutocompleteRef}),n.a.createElement(ja["a"],{ariaRole:"dialog",ariaLabel:"Search",isOpen:s,position:"bottom-right",onClose:a,shouldFade:false,overlayClassName:i,allowanceX:20,allowanceY:0,shouldFocusAfterRender:false,shouldReturnFocusAfterClose:false,onResize:this.calculatePopoverConstraints,shouldObserveResize:true,contentStyle:this.state.contentStyle,overlayStyle:this.state.overlayStyle},r&&n.a.createElement("div",{className:"c-search-autocomplete"},n.a.createElement(Ra["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))))}}]);return t}(a["PureComponent"]);Ga.displayName="AutocompleteInPrimarySearch";var Ha=function e(t){return{userQuery:Object(Oa["getSearchInputBoxUserQuery"])(t),isOpen:Object(Ia["isSearchAutocompleteOpen"])(t)}};var Wa={closeAutocomplete:Ia["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:Aa["a"]};var Va=Object(i["connect"])(Ha,Wa)(Ga);var za=r(87);var Qa=r(2247);var Ka=r(3267);function Ya(e){return"Vsearch"===Object(jt["getPrimaryView"])(e)}var Ja=new h["b"]("search");var Za={displayQuery:l["b"].string,clearSearchInputField:l["b"].func,orgName:l["b"].string,teamName:l["b"].string,clogger:l["b"].object.isRequired,openFromClick:l["b"].func,openSearchAutocomplete:l["b"].func.isRequired,isPrimarySearchFeatureEnabled:l["b"].bool.isRequired,showSearchAsActive:l["b"].bool.isRequired};var Xa={displayQuery:void 0,orgName:void 0,teamName:void 0,openFromClick:j["noop"],clearSearchInputField:j["noop"]};var $a=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.onClearClick=r.onClearClick.bind(r);return r}O()(t,[{key:"onClick",value:function e(){this.props.isPrimarySearchFeatureEnabled?this.props.openSearchAutocomplete():this.props.openFromClick();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_SEARCH"}}})}},{key:"onClearClick",value:function e(t){t.stopPropagation();this.props.clearSearchInputField()}},{key:"render",value:function e(){var t=this.props,r=t.displayQuery,i=t.orgName,s=t.teamName,o=t.isPrimarySearchFeatureEnabled,l=t.showSearchAsActive;var c=r?n.a.createElement(a["Fragment"],null,n.a.createElement(za["a"],{text:r,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:false,noLinking:true,noSpecials:true,noHighlights:true}),n.a.createElement(U["c"],{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:Ja.t("Clear")},n.a.createElement(I["b"],{type:"times-small"}))):n.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},Ja.rt("Search {teamName}",{teamName:i||s||""}));var u=p()({"p-global_nav__top_search":true,"p-global_nav__top_search--browser":!F["isDesktop"]});var d=!o||!l;return n.a.createElement(a["Fragment"],null,d&&n.a.createElement(U["c"],{className:u,onClick:this.onClick},n.a.createElement(I["b"],{type:"search-medium",className:"p-global_nav__top_search_icon"}),c),!o&&n.a.createElement(Ca["a"],null),!d&&n.a.createElement(Va,null))}}]);return t}(a["Component"]);$a.displayName="SearchPlaceholderInput";$a.defaultProps=Xa;var en=function e(t){return{displayQuery:Object(Oa["getSearchInputBoxDisplayQuery"])(t),orgName:Object(wa["getEnterpriseOrgName"])(t)||"",teamName:Object(le["getTeamDisplayName"])(Object(oe["getCurrentTeam"])(t)),clogger:Object(x["a"])({state:t}),isPrimarySearchFeatureEnabled:Object(Ka["a"])(t),showSearchAsActive:Ya(t)||Object(Ia["isSearchAutocompleteOpen"])(t)}};var tn={openSearchAutocomplete:Ia["openSearchAutocomplete"],openFromClick:Qa["a"],clearSearchInputField:Ea["a"]};var rn=Object(i["connect"])(en,tn)($a);var an=r(2083);var nn=new h["b"]("global_nav");var sn=-12;var on=-4;var ln={theme:l["b"].string,renderSonicMenu:l["b"].func,featureGlobalNav:l["b"].bool};var cn={theme:void 0,renderSonicMenu:void 0,featureGlobalNav:false};var un=function e(t){var r=t.theme,i=t.renderSonicMenu,s=t.featureGlobalNav;if(!s)return null;var o=p()("p-global_nav__top",r&&"p-global_nav__top--theme-"+r);return n.a.createElement("div",{className:o},n.a.createElement(gt,{renderSonicMenu:i}),n.a.createElement(se,null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(rn,null),n.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),n.a.createElement(Cr,null),n.a.createElement(_r,{icon:"star-o",pane:Object(v["a"])()?"starred_items":"stars",tooltip:n.a.createElement(a["Fragment"],null,nn.t("Starred items"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(f["isMac"])()?"\u2318\u21e7S":"Ctrl+Shift+S")),"aria-label":nn.t("Starred items")}),n.a.createElement(ka,null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(sr,null))};un.displayName="TopNav";un.defaultProps=cn;var dn=function e(t){return{theme:Object(m["getUserPref"])(t,"sidebar_theme"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var pn=Object(i["connect"])(dn)(un);var mn=r(3480);var hn=r(12);var fn=r(372);var vn=r(992);var bn=r(374);var gn=r(1438);var _n=r(1423);var yn=Object(ge["c"])("TS.ui.edit_member_profile.start");var kn=r(902);var On=Object(ge["c"])("TS.ui.channel_prefs_dialog.start");var En=r(1086);var wn=Object(ge["c"])("TS.ui.mpim_conversion_modal.startMpimConversionModal");var Cn=Object(ge["c"])("TS.ui.im_browser.startWithMpim");var Sn=Object(ge["c"])("TS.ui.apps_browser.startAddApps");var jn=r(708);var In=r(214);var Tn=r(35);var Nn=r.n(Tn);var An=r(472);var Rn=new h["b"]("global_nav");var Mn={channelId:l["b"].string.isRequired,channel:l["b"].object,close:l["b"].func,back:l["b"].func,featureGlobalNav:l["b"].bool};var Pn={channel:void 0,close:j["noop"],back:j["noop"],featureGlobalNav:false};var xn=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onDateChange=r.onDateChange.bind(r);return r}O()(t,[{key:"onDateChange",value:function e(t){var r=this.props,a=r.channelId,n=r.close;var i=Nn()(t,"YYYY-MM-DD").format("X");Object(Nt["p"])(a,i);n()}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.back,i=t.featureGlobalNav;if(!i)return null;var s=r.created?Nn()(r.created,"X").format("YYYY-MM-DD"):void 0;return n.a.createElement(T["f"],g()({},this.props,{width:325}),n.a.createElement(An["a"],{key:"date-picker",className:"p-global_nav__channel_date_picker",disableDatesBefore:s,disableDatesAfter:Nn()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),n.a.createElement(U["c"],{key:"date-picker-back",className:"p-global_nav__channel_date_picker_back","data-qa":"date_picker_back",onClick:a},Rn.t("Back to menu")))}}]);return t}(a["Component"]);xn.displayName="JumpToDate";xn.defaultProps=Pn;var Dn=function e(t,r){var a=r.channelId;return{channel:Object(It["getChannelById"])(t,a),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Fn=Object(i["connect"])(Dn)(xn);var Ln=r(697);function Bn(e,t){var r=Object(It["isChannelExistent"])(e,t)&&Object(It["getChannelById"])(e,t);var a=Object(Re["getMemberById"])(e,Object(hn["getMemberIdFromIm"])(r));if(!r)return false;if(Object(c["pageNeedsEnterprise"])(e)&&(Object(hn["isExternallySharedChannel"])(r)||Object(hn["isOrgDefaultChannel"])(r)))return false;if(!Object(hn["isIm"])(r)&&!Un(e))return qn(e);if(a&&Object(rt["isBotUser"])(a))return false;if(a&&Object(rt["isSelf"])(a))return false;return true}function Un(e){var t=Object(oe["getCurrentTeam"])(e);return Object(Ln["b"])()&&Object(le["isPaidTeam"])(t)}function qn(e){var t=Object(m["getTeamPref"])(e,"calling_app_name");return!!(t&&"Slack"!==t)}var Gn=r(1091);var Hn=r(677);function Wn(e,t){var r=Object(It["getChannelById"])(e,t);if(!e||!r)return null;var a=Object(Re["getMemberById"])(e,Object(hn["getMemberIdFromIm"])(r));var n=Object(Re["getCurrentMember"])(e);var i=Object(hn["getChannelType"])(r);var s="im"===i;var o="mpim"===i;var l="channel"===i;var u="private"===i;var d=l||u;var p=Object(hn["isYou"])(n.id,r);var h=Bn(e,t);var f=true;var v=!s&&!Object(rt["isUltraRestricted"])(n);var b=p;var g=s&&!p;var _=s&&!p&&!Object(hn["isSlackbotOrTeambot"])(r,true)&&!Object(rt["isUltraRestricted"])(n)&&!Object(rt["isUltraRestricted"])(a)&&!Object(rt["isDeleted"])(a)&&!Object(rt["isExternal"])(a);var y=true;var k=d&&!Object(rt["isUltraRestricted"])(n)&&!Object(rt["isRestricted"])(n)&&Object(hn["isMemberOfChannel"])(r)&&(!Object(hn["isRequired"])(r)||Object(at["g"])(r))&&(!Object(c["pageNeedsEnterprise"])(e)||!(Object(hn["isOrgShared"])(r)&&!Object(at["c"])()));var O=Object(Gn["b"])(r);var E=o&&Object(at["d"])()&&!Object(hn["isExternallySharedChannel"])(r);var w=!s&&(o||Object(hn["isMemberOfChannel"])(r)&&!Object(hn["isArchived"])(r));var C=w;var S=Object(Hn["a"])()||d&&!(Object(c["pageNeedsEnterprise"])(e)&&Object(hn["isOrgShared"])(r));var j=Object(m["getTeamPref"])(e,"allow_email_ingestion");var I=d&&Object(hn["isMemberOfChannel"])(r)&&!Object(hn["isArchived"])(r)&&!Object(hn["isRequired"])(r)&&!Object(rt["isUltraRestricted"])(n)&&!Object(rt["isRestricted"])(n);var T=d&&!Object(hn["isMemberOfChannel"])(r)&&!Object(hn["isArchived"])(r)&&!Object(rt["isUltraRestricted"])(n)&&!Object(rt["isRestricted"])(n);var N=!l&&Object(at["e"])(r);var A=Object(hn["isArchived"])(r)&&!Object(hn["getIsChannelMoved"])(r);var R=Object(hn["isArchived"])(r)&&Object(rt["isAdmin"])(n)&&l&&!Object(hn["isRequired"])(r);return{call:h,jump:f,invite:v,editProfile:b,viewProfile:g,addMember:_,details:y,options:k,retention:O,convertToPrivate:E,notifications:w,mute:C,apps:S,email:j,leave:I,join:T,exportHistory:N,unarchive:A,delete:R}}var Vn=r(135);var zn=r(761);var Qn=new h["b"]("global_nav");var Kn=Object(Sr["b"])("Un-archive a channel",function(e,t,r){var a=r.channelId;if(!Object(c["isFeatureEnabled"])(t(),"feature_global_nav"))return;e(Object(Vn["J"])({channelId:a})).catch(function(r){Object(P["a"])({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",r);var a=Object(j["get"])(r,"data.error");var i="restricted_action"===a?Qn.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):Qn.t("Sorry, something went wrong. Try again in a moment.");e(Object(jr["openModal"])({element:n.a.createElement(zn["a"],{title:Qn.t("Un-archive failed")},i)}))})});Kn.propTypes={channelId:l["b"].string.isRequired};var Yn=Kn;var Jn=new h["b"]("global_nav");var Zn={channelId:l["b"].string.isRequired,channel:l["b"].object.isRequired,onMenuItemSelected:l["b"].func,actions:l["b"].object,displayName:l["b"].string,isMuted:l["b"].bool,joinChannel:l["b"].func,unarchiveChannel:l["b"].func,gantryStartCall:l["b"].func,featureGlobalNav:l["b"].bool};var Xn={onMenuItemSelected:j["noop"],actions:void 0,displayName:void 0,isMuted:false,joinChannel:j["noop"],unarchiveChannel:j["noop"],gantryStartCall:j["noop"],featureGlobalNav:false};var $n=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMenuItemSelected=r.onMenuItemSelected.bind(r);r.getMuteLabel=r.getMuteLabel.bind(r);r.getItems=r.getItems.bind(r);r.preventClose=false;r.state={mode:"menu"};return r}O()(t,[{key:"onMenuItemSelected",value:function e(t,r){if(this.preventClose){this.preventClose=false;return}this.props.onMenuItemSelected(t,r)}},{key:"getMuteLabel",value:function e(){var t=this.props,r=t.isMuted,a=t.channel,n=t.displayName,i=t.featureGlobalNav;var s="mpim"===Object(hn["getChannelType"])(a);if(!i)return null;if(r&&s)return Jn.t("Unmute this conversation");if(r&&!s)return Jn.t("Unmute {channelName}",{channelName:n});if(!r&&s)return Jn.t("Mute this conversation");if(!r&&!s)return Jn.t("Mute {channelName}",{channelName:n});return null}},{key:"getItems",value:function e(){var t=this;var r=this.props,a=r.channelId,n=r.channel,i=r.actions,s=r.displayName,o=r.joinChannel,l=r.featureGlobalNav;var c=Object(hn["getChannelType"])(n);var u=Object(hn["getMemberIdFromIm"])(n);if(!i||!c||!l)return[];var d="mpim"===c;var p="channel"===c;var m="private"===c;var f=p||m;var v=[{label:Jn.t("Jump to date\u2026"),show:i.jump,key:"jump",click:function e(){t.preventClose=true;t.setState(function(){return{mode:"jump-to-date"}})}},{label:d?Jn.t("Invite another member\u2026"):Jn.t("Invite new members to join\u2026"),show:i.invite,key:"invite",click:function e(){return d?Cn(n):Object(_n["a"])(a)}},{label:Jn.t("Edit your profile"),show:i.editProfile,key:"editProfile",click:function e(){return yn()}},{label:Jn.t("View {userPossesive} profile",{userPossesive:Object(h["c"])(s)}),show:i.viewProfile,key:"viewProfile",click:function e(){return Object(Nt["h"])(u)}},{label:Jn.t("Add {userName} to a channel\u2026",{userName:s}),show:i.addMember,key:"addMember",click:function e(){return Object(En["a"])(u)}},{label:f?Jn.t("View channel details"):Jn.t("View conversation details"),show:i.details,key:"details",click:function e(){return Object(mr["c"])("details")}},{label:Jn.t("Additional options\u2026"),show:i.options,key:"options",click:function e(){return Object(kn["a"])(a)}},{label:Jn.t("Convert to a private channel\u2026"),show:i.convertToPrivate,key:"convertToPrivate",click:function e(){return wn(n)}},{label:Jn.t("Edit message retention\u2026"),show:i.retention,key:"retention",click:function e(){return Object(kn["a"])(a,"retention")}},{type:"separator",key:"separator-1"},{label:Jn.t("Notification preferences\u2026"),show:i.notifications,key:"notifications",click:function e(){return On(a)}},{label:this.getMuteLabel(),show:i.mute,key:"mute",click:function e(){return Object(jn["c"])(a)}},{type:"separator",key:"separator-2"},{label:Jn.t("Add an app"),show:i.apps,key:"apps",click:function e(){return Sn()}},{label:d?Jn.t("Send email to this conversation\u2026"):Jn.t("Send email to {channelName}\u2026",{channelName:s}),show:i.email,key:"email",href:"/services/new/email",target:"_blank"},{type:"separator",key:"separator-3"},{label:Jn.t("Leave {channelName}",{channelName:s}),show:i.leave,key:"leave",click:function e(){return Object(In["o"])(a)}},{label:Jn.t("Join {channelName}",{channelName:s}),show:i.join,key:"join",click:function e(){return o({channelId:a})}},{type:"separator",key:"separator-4"},{label:Jn.t("Export message history\u2026"),show:i.exportHistory,key:"exportHistory",click:function e(){return Object(kn["a"])(a,"export")}},{type:"separator",key:"separator-5"},{label:Jn.t("Un-archive {channelName}",{channelName:s}),show:i.unarchive,key:"unarchive",click:function e(){return t.props.unarchiveChannel({channelId:a})}},{label:Jn.t("Delete {channelName}",{channelName:s}),show:i.delete,key:"unarchive",click:function e(){return Object(kn["a"])(a,"delete")}}];return v.filter(function(e){return e&&(e.show||"separator"===e.type)})}},{key:"render",value:function e(){var t=this;switch(this.state.mode){case"menu":return n.a.createElement(T["a"],g()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:true}));case"jump-to-date":return n.a.createElement(Fn,g()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:function e(){t.preventClose=true;t.setState(function(){return{mode:"menu"}})}}));default:return null}}}]);return t}(a["Component"]);$n.displayName="Menu";$n.defaultProps=Xn;var ei=function e(t,r){var a=r.channelId;var n=Object(It["getChannelById"])(t,a);return{channel:n,actions:Wn(t,a),displayName:Object(hn["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),isMuted:Object(bn["isChannelMutedById"])(t,a),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var ti={joinChannel:It["joinConversationApi"],unarchiveChannel:Yn,gantryStartCall:gn["b"]};var ri=Object(i["connect"])(ei,ti)($n);var ai=new h["b"]("channel_header");var ni={channelId:l["b"].string,name:l["b"].string,type:l["b"].string.isRequired,userId:l["b"].string,members:l["b"].oneOfType([l["b"].array,l["b"].bool]),presences:l["b"].oneOfType([l["b"].object,l["b"].bool]),currentUser:l["b"].string.isRequired,isMuted:l["b"].bool,isOrgShared:l["b"].bool.isRequired,isExternallyShared:l["b"].bool.isRequired,isPendingExternallyShared:l["b"].bool.isRequired,sharedTeamIds:l["b"].arrayOf(l["b"].string),className:l["b"].string,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var ii={channelId:void 0,name:void 0,userId:void 0,members:void 0,presences:void 0,sharedTeamIds:void 0,className:void 0,isMuted:false,featureGlobalNav:false};var si=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderChannel=r.renderChannel.bind(r);r.renderPrivate=r.renderPrivate.bind(r);r.renderIM=r.renderIM.bind(r);r.renderMPIM=r.renderMPIM.bind(r);r.renderMenu=r.renderMenu.bind(r);r.onClick=r.onClick.bind(r);return r}O()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_NAME"}}})}},{key:"renderChannel",value:function e(t){var r="#"+this.props.name;return n.a.createElement(t,null,r)}},{key:"renderPrivate",value:function e(t){return n.a.createElement(a["Fragment"],null,n.a.createElement(I["b"],{type:"lock",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--private"}),n.a.createElement(t,null,this.props.name))}},{key:"renderIM",value:function e(t){var r=this.props.userId;return n.a.createElement(a["Fragment"],null,n.a.createElement(t,null,n.a.createElement(fn["a"],{id:r,key:"name"})),n.a.createElement(Ot["a"],{memberId:r,className:"p-global_nav__channel_name_presence",key:"presence"}),n.a.createElement(kt["a"],{memberId:r,tooltip:false,key:"custom-status"}))}},{key:"renderMPIM",value:function e(t){var r=this;var i=this.props,s=i.members,o=i.presences;var l=Object(j["flatMap"])(Object(j["filter"])(s,function(e){return e!==r.props.currentUser}),function(e,t){var r=o[e]===St["PRESENCE_AWAY"]?"p-global_nav__channel_name_member--away":void 0;return n.a.createElement(a["Fragment"],{key:e},t>0?", ":null,n.a.createElement(fn["a"],{id:e,className:r}),n.a.createElement(kt["a"],{memberId:e,tooltip:false,noText:true}))});return n.a.createElement(t,null,l)}},{key:"renderShared",value:function e(){var t=this.props,r=t.isOrgShared,a=t.isExternallyShared,i=t.isPendingExternallyShared,s=t.sharedTeamIds;if(r)return n.a.createElement(q["d"],{tip:ai.t("Shared channel"),position:"bottom"},n.a.createElement(I["b"],{type:"shared-channel",inline:true,className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"}));if(a)return n.a.createElement(vn["a"],{sharedTeamIds:s,pending:i,inline:true,tooltip:true,tooltipPosition:"bottom",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"});return null}},{key:"renderMenu",value:function e(t){return n.a.createElement(ri,g()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.type,i=r.className,s=r.isMuted,o=r.featureGlobalNav;if(!o)return null;var l=function e(r){var a=r.children;return n.a.createElement(T["e"],{renderMenu:t.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4,onClick:t.onClick},n.a.createElement(U["c"],{className:"p-global_nav__channel_name_name"},a))};var c=void 0;switch(a){case"channel":c=this.renderChannel(l);break;case"private":c=this.renderPrivate(l);break;case"im":c=this.renderIM(l);break;case"mpim":c=this.renderMPIM(l);break;default:break}var u=p()("p-global_nav__channel_name","p-global_nav__channel_name--model","p-global_nav__channel_name--"+a,s&&"p-global_nav__channel_name--muted",i);return n.a.createElement("div",{className:u,"data-qa":"channel_name"},c,this.renderShared())}}]);return t}(a["Component"]);si.displayName="Name";si.defaultProps=ii;var oi=function e(t,r){var a=r.channelId;var n=Object(It["getChannelById"])(t,a);var i=Object(hn["getMemberIdsFromMpim"])(n);var s=i&&Object(j["mapValues"])(Object(j["keyBy"])(i),function(e){return Object(St["getPresenceByMemberId"])(t,e)});return{channelId:a,name:Object(hn["getDisplayName"])(n),type:Object(hn["getChannelType"])(n),userId:Object(hn["getMemberIdFromIm"])(n)||n.user_id,currentUser:Object(c["getCurrentUserId"])(t),isMuted:Object(bn["isChannelMutedById"])(t,a),members:i,presences:s,isOrgShared:Object(hn["isOrgSharedPublicOrPrivateChannel"])(n),isExternallyShared:Object(hn["isExternallySharedChannel"])(n),isPendingExternallyShared:Object(hn["isPendingExternallySharedChannel"])(n),sharedTeamIds:Object(hn["getMaybePendingSharedTeamIds"])(n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(x["a"])({state:t})}};var li=Object(i["connect"])(oi)(si);var ci=r(258);var ui=Object(ge["c"])("TS.ui.channel_topic_dialog.start");var di={start:ui};var pi=new h["b"]("global_nav");var mi={topic:l["b"].string,isChannel:l["b"].bool.isRequired,canEdit:l["b"].bool,featureGlobalNav:l["b"].bool.isRequired};var hi={topic:void 0,canEdit:true};var fi=function e(t){if(t.target&&"A"===t.target.tagName)return;ui()};var vi=function e(t){var r=t.topic,i=t.isChannel,s=t.canEdit,o=t.featureGlobalNav;if(!o||!i)return null;var l=void 0;if(r){var c=n.a.createElement("div",{className:"p-global_nav__channel_topic_edit"},pi.t("edit"));l=n.a.createElement(a["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__channel_topic_text"},n.a.createElement(za["a"],{text:r,className:"p-global_nav__channel_topic_content",noJumbomoji:true,noHighlights:true})),s&&c)}else l=s?n.a.createElement("div",{className:"p-global_nav__channel_topic_placeholder"},pi.t("Add a topic\u2026")):null;var u=p()("p-global_nav__channel_topic",{"p-global_nav__channel_topic--empty":!r});return n.a.createElement(U["c"],{className:u,onClick:fi},l)};vi.displayName="Topic";vi.defaultProps=hi;var bi=function e(t,r){var a=r.channelId;var n=Object(It["getChannelById"])(t,a);return{topic:n&&n.topic&&n.topic.value,isChannel:!!(Object(hn["isPublicChannel"])(n)||Object(hn["isPrivateChannel"])(n)),canEdit:Object(ci["m"])(t,a).ok,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var gi=Object(i["connect"])(bi)(vi);var _i=r(787);var yi=new h["b"]("global_nav");var ki={channelId:l["b"].string.isRequired,type:l["b"].oneOf(["channel","private","im","mpim"]),starred:l["b"].bool.isRequired,show:l["b"].bool.isRequired,updateStar:l["b"].func.isRequired,featureGlobalNav:l["b"].bool.isRequired,clogger:l["b"].object.isRequired};var Oi={type:"channel",starred:false};var Ei=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}O()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.channelId,a=t.starred,n=t.clogger;this.props.updateStar(!a,{channel:r});n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_STAR"}}})}},{key:"getTip",value:function e(){var t=this.props,r=t.type,a=t.starred,n=t.featureGlobalNav;if(!n)return null;if("im"===r||"mpim"===r)return a?yi.t("Unstar this conversation"):yi.t("Star this conversation");return a?yi.t("Unstar this channel"):yi.t("Star this channel")}},{key:"render",value:function e(){var t=this.props,r=t.starred,a=t.show;if(!a)return null;return n.a.createElement(q["d"],{position:"bottom",tip:this.getTip()},n.a.createElement(U["c"],{className:p()("p-global_nav__channel_star",r&&"p-global_nav__channel_star--starred"),onClick:this.onClick,"aria-label":this.getTip()},n.a.createElement(I["b"],{type:r?"star":"star-o",size:"inherit"})))}}]);return t}(a["Component"]);Ei.displayName="Star";Ei.defaultProps=Oi;var wi=function e(t,r){var a=r.channelId;var n=Object(It["getChannelById"])(t,a);return{type:Object(hn["getChannelType"])(n),show:Object(hn["canStarOrUnstarChannel"])(n),starred:Object(hn["isStarred"])(n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(x["a"])({state:t})}};var Ci={updateStar:_i["a"]};var Si=Object(i["connect"])(wi,Ci)(Ei);var ji=new h["b"]("global_nav");var Ii={count:l["b"].number,isChannel:l["b"].bool,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var Ti={count:void 0,isChannel:true,featureGlobalNav:false};var Ni=function e(t){var r=t.count,i=t.isChannel,s=t.clogger,o=t.featureGlobalNav;if(!o)return null;if(!r&&!i)return null;var l=function e(t){var r=t.key,i=t.text;return n.a.createElement(a["Fragment"],{key:r},n.a.createElement("span",{className:"bold"},i),"\xa0")};var c=Object(j["isNumber"])(r)?ji.rt("{count, plural, =1 {<span>#</span>Pin} other {<span>#</span>Pins}}",{count:r},l):ji.rt("<span>\u2013</span>Pins",{count:r},l);var u=Object(j["isNumber"])(r)?ji.t("{count, plural, =1 {# pins} other {# pins}}. View pinned items",{count:r},l):ji.t("View pinned items");var d=function e(){Object(mr["f"])();s.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_PINS"}}})};return n.a.createElement(q["d"],{position:"bottom",tip:ji.t("View pinned items"),offsetY:-4,delay:q["a"]},n.a.createElement(U["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_info_pins",onClick:d,"aria-label":u},c))};Ni.displayName="Pins";Ni.defaultProps=Ti;var Ai=function e(t,r){var a=r.channelId;var n=Object(It["getChannelById"])(t,a);return{count:n&&n.pinned_items_count,isChannel:Object(hn["isPublicChannel"])(n)||Object(hn["isPrivateChannel"])(n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(x["a"])({state:t})}};var Ri=Object(i["connect"])(Ai)(Ni);var Mi=r(203);var Pi=new h["b"]("global_nav");var xi={count:l["b"].number,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var Di={count:void 0,featureGlobalNav:false};var Fi=function e(t){var r=t.count,i=t.clogger,s=t.featureGlobalNav;if(!s)return null;var o=function e(t){var r=t.key,i=t.text;return n.a.createElement(a["Fragment"],{key:r},n.a.createElement("span",{className:"bold"},i),"\xa0")};var l=Object(j["isNumber"])(r)?Pi.rt("{count, plural, =1 {<span>#</span>Member} other {<span>#</span>Members}}",{count:r},o):Pi.rt("<span>\u2013</span>Members",{count:r},o);var c=Object(j["isNumber"])(r)?Pi.t("{count, plural, =1 {# member} other {# members}}. View member list",{count:r},o):Pi.t("View member list");var u=function e(){Object(mr["e"])();i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_MEMBERS"}}})};return n.a.createElement(q["d"],{position:"bottom",tip:Pi.t("View member list"),offsetY:-4,delay:q["a"]},n.a.createElement(U["c"],{className:"p-global_nav__channel_info_item",onClick:u,"aria-label":c},l))};Fi.displayName="Members";Fi.defaultProps=Di;var Li=function e(t,r){var a=r.channelId;var n=Object(Mi["getMemberCounts"])(t,a);return{count:n&&n.counts&&n.counts.member_count,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(x["a"])({state:t})}};var Bi=Object(i["connect"])(Li)(Fi);var Ui=new h["b"]("channel_header");var qi={channelId:l["b"].string.isRequired,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var Gi={featureGlobalNav:false};var Hi=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.renderMenu=r.renderMenu.bind(r);return r}O()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_ACTIONS"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(ri,g()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetY:-4,onClick:this.onClick},n.a.createElement(q["d"],{position:"bottom-right",tip:Ui.t("Channel settings"),offsetY:-4},n.a.createElement(U["c"],{className:"p-global_nav__channel_info_item","aria-label":Ui.t("Channel settings")},n.a.createElement(I["b"],{type:"cog-o"}))))}}]);return t}(a["Component"]);Hi.displayName="Actions";Hi.defaultProps=Gi;var Wi=function e(t){return{featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(x["a"])({state:t})}};var Vi=Object(i["connect"])(Wi)(Hi);var zi=r(754);var Qi=new h["b"]("global_nav");var Ki={isBot:l["b"].bool,activeTab:l["b"].oneOf(["messages","about"]),featureGlobalNav:l["b"].bool};var Yi={isBot:false,activeTab:"messages",featureGlobalNav:false};var Ji=function e(t){var r=t.isBot,i=t.activeTab,s=t.featureGlobalNav;if(!s||!r)return null;return n.a.createElement(a["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__channel_bot_tabs"},n.a.createElement(U["c"],{className:p()("p-global_nav__channel_bot_tab","messages"===i&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(zi["a"])("messages")},"data-qa":"global_nav_channel_bot_tabs_messages"},Qi.t("Messages")),n.a.createElement(U["c"],{className:p()("p-global_nav__channel_bot_tab","about"===i&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(zi["a"])("about")},"data-qa":"global_nav_channel_bot_tabs_about"},Qi.t("About"))),n.a.createElement("div",{className:"p-global_nav__channel_divider"}))};Ji.displayName="BotTabs";Ji.defaultProps=Yi;var Zi=function e(t,r){var a=r.channelId;var n=Object(It["getChannelById"])(t,a);var i=Object(hn["getMemberIdFromIm"])(n);if(!i)return{};var s=Object(Re["getMemberById"])(t,i);return{isBot:Object(rt["isAppOrBot"])(s),activeTab:Object(cr["getActiveAppTab"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Xi=Object(i["connect"])(Zi)(Ji);var $i=new h["b"]("global_nav");var es={show:l["b"].bool,channel:l["b"].object,featureGlobalNav:l["b"].bool,createOrJoinGantryCall:l["b"].func};var ts={show:false,channel:void 0,featureGlobalNav:false,createOrJoinGantryCall:j["noop"]};var rs=function e(t){var r=t.show,a=t.channel,i=t.featureGlobalNav,s=t.createOrJoinGantryCall;if(!r||!a||!i)return null;return n.a.createElement(q["d"],{position:"bottom",tip:$i.t("Start a call"),offsetY:-4},n.a.createElement(U["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_call_button",onClick:function e(){return Object(v["a"])()?s():Object(Ln["d"])(a)},"aria-label":$i.t("Start a call")},n.a.createElement(I["b"],{className:"p-global_nav__channel_call_button_icon",type:"phone"})))};rs.displayName="CallButton";rs.defaultProps=ts;var as=function e(t,r){var a=r.channelId;var n=Object(It["getChannelById"])(t,a);if(!n)return null;return{show:Bn(t,a),channel:n,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var ns={createOrJoinGantryCall:gn["b"]};var is=Object(i["connect"])(as,ns)(rs);var ss=new h["b"]("channel_header");var os={isChannel:l["b"].bool,active:l["b"].bool,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var ls={isChannel:true,active:false,featureGlobalNav:false};var cs=function e(t){var r=t.isChannel,a=t.active,i=t.clogger,s=t.featureGlobalNav;if(!s)return null;var o=void 0;r&&a&&(o=ss.t("Hide channel details"));r&&!a&&(o=ss.t("View channel details"));!r&&a&&(o=ss.t("Hide conversation details"));r||a||(o=ss.t("View conversation details"));var l=p()("p-global_nav__channel_info_item",{"p-global_nav__channel_details_button--active":a});var c=function e(){Object(mr["d"])("details");i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_DETAILS"}}})};return n.a.createElement(q["d"],{position:"bottom-right",tip:o,offsetY:-4,delay:q["a"]},n.a.createElement(U["c"],{className:l,onClick:c},ss.t("Details")))};cs.displayName="Details";cs.defaultProps=ls;var us=function e(t,r){var a=r.channelId;var n=Object(It["getChannelById"])(t,a);if(!n)return null;return{isChannel:Object(hn["isPublicChannel"])(n)||Object(hn["isPrivateChannel"])(n),active:"details"===Object(jt["getSecondaryView"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(x["a"])({state:t})}};var ds=Object(i["connect"])(us)(cs);var ps={channelId:l["b"].string.isRequired,channelType:l["b"].oneOf(["channel","private","mpim","im"]),featureGlobalNavLayout:l["b"].bool};var ms={channelType:void 0,featureGlobalNavLayout:false};var hs=function e(t){var r=t.channelId,a=t.channelType,i=t.featureGlobalNavLayout;if(!r||!a)return null;var s=p()("p-global_nav__channel",{"p-global_nav__channel--relayout":i});return n.a.createElement("div",{className:s},n.a.createElement(Si,{channelId:r}),n.a.createElement(li,{channelId:r}),n.a.createElement(gi,{channelId:r}),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),n.a.createElement(Xi,{channelId:r}),"im"!==a&&n.a.createElement(Bi,{channelId:r}),n.a.createElement(Ri,{channelId:r}),n.a.createElement(ds,{channelId:r}),n.a.createElement("div",{className:"p-global_nav__channel_divider"}),n.a.createElement(is,{channelId:r}),n.a.createElement(Vi,{channelId:r}))};hs.displayName="ModelHeader";hs.defaultProps=ms;var fs=function e(t,r){var a=r.channelId;var n=Object(It["getChannelById"])(t,a);if(!n)return{};return{channelType:Object(hn["getChannelType"])(n),featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var vs=Object(i["connect"])(fs)(hs);var bs=r(159);var gs=new h["b"]("global_nav");var _s={featureGlobalNav:l["b"].bool,featureGlobalNavLayout:l["b"].bool,featureThreadsCopyChange:l["b"].bool};var ys={featureGlobalNav:false,featureGlobalNavLayout:false,featureThreadsCopyChange:false};var ks=function e(t){var r=t.featureGlobalNav,a=t.featureGlobalNavLayout,i=t.featureThreadsCopyChange;if(!r)return null;var s=i?gs.t("Threads"):gs.t("All Threads");var o="p-global_nav__channel_name p-global_nav__channel_name--synthetic";var l=p()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true,"p-global_nav__channel--relayout":a});return n.a.createElement("div",{className:l,"data-qa":"channel_name"},n.a.createElement("div",{className:o},s))};ks.displayName="AllThreadsHeader";ks.defaultProps=ys;var Os=Object(bs["a"])("feature_global_nav","feature_global_nav_layout","feature_threads_copy_change")(ks);var Es=r(240);function ws(e){var t=Object(m["getUserPref"])(e,"all_unreads_sort_order");if(t)return t;return Object(le["isPaidTeam"])(Object(oe["getCurrentTeam"])(e))?"priority":"alphabetical"}var Cs=r(480);var Ss=r(1007);var js=new h["b"]("global_nav");var Is={hasUnreads:l["b"].bool,sortOrder:l["b"].string,newUnreads:l["b"].number,setUserPrefByApi:l["b"].func,featureGlobalNav:l["b"].bool,featureGlobalNavLayout:l["b"].bool};var Ts={hasUnreads:true,sortOrder:"alphabetical",newUnreads:0,setUserPrefByApi:j["noop"],featureGlobalNav:false,featureGlobalNavLayout:false};var Ns=function(e){S()(t,e);function t(e){y()(this,t);var r=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSortButton=r.renderSortButton.bind(r);r.renderSortMenu=r.renderSortMenu.bind(r);return r}O()(t,[{key:"changeSort",value:function e(t){if(t===this.props.sortOrder)return;this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t});Object(Ss["b"])()}},{key:"renderSortMenu",value:function e(t){var r=this;if(!this.props.featureGlobalNav)return null;var a=[{label:js.t("Alphabetically"),click:function e(){return r.changeSort("alphabetical")}},{label:js.t("Scientifically"),click:function e(){return r.changeSort("priority")}},{label:js.t("Newest channel"),click:function e(){return r.changeSort("newest")}},{label:js.t("Oldest channel"),click:function e(){return r.changeSort("oldest")}}];return n.a.createElement(T["a"],g()({},t,{template:a}))}},{key:"renderSortButton",value:function e(){var t=this.props,r=t.hasUnreads,a=t.sortOrder,i=t.featureGlobalNav;if(!i)return null;if(!r)return null;var s={alphabetical:js.rt("<strong>Sort:</strong> Alphabetically"),priority:js.rt("<strong>Sort:</strong> Scientifically"),oldest:js.rt("<strong>Sort:</strong> Oldest channel"),newest:js.rt("<strong>Sort:</strong> Newest channel")};var o=s[a];return n.a.createElement(T["e"],{renderMenu:this.renderSortMenu,position:"bottom-right",offsetY:4},n.a.createElement(U["c"],{className:"p-global_nav__unread_sort"},o,n.a.createElement(I["b"],{type:"chevron-down",inline:true})))}},{key:"renderRefreshButton",value:function e(){var t=this.props,r=t.newUnreads,a=t.featureGlobalNav;if(!a||!r)return null;var i=js.t("{newUnreadsCount, plural, =1 {# new message} other {# new messages}}",{newUnreadsCount:r});return n.a.createElement(U["d"],{type:"outline",size:"small",className:"p-global_nav__unread_refresh",onClick:Ss["c"]},n.a.createElement(I["b"],{type:"sync",className:"p-global_nav__unread_refresh_icon",size:"inherit"}),i)}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;var t=p()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true,"p-global_nav__channel--relayout":this.props.featureGlobalNavLayout});return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-global_nav__channel_name p-global_nav__channel_name--synthetic","data-qa":"channel_name"},js.t("All Unreads")),this.renderRefreshButton(),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),this.renderSortButton())}}]);return t}(a["Component"]);Ns.displayName="AllUnreadsHeader";Ns.defaultProps=Ts;var As=function e(t){return{hasUnreads:Object(Cs["hasUnreads"])(t),sortOrder:ws(t),newUnreads:Object(cr["getNewUnreads"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var Rs={setUserPrefByApi:Es["c"]};var Ms=Object(i["connect"])(As,Rs)(Ns);var Ps={id:l["b"].string};var xs={id:void 0};var Ds=function e(t){var r=t.id;if(!r)return null;if("Vall_threads"===r)return n.a.createElement(Os,null);if("Vall_unreads"===r)return n.a.createElement(Ms,null);if("Vsearch"===r)return n.a.createElement(mn["a"],null);return n.a.createElement(vs,{channelId:r})};Ds.displayName="ChannelHeader";Ds.defaultProps=xs;var Fs=function e(t){return{id:Object(jt["getPrimaryView"])(t)}};var Ls=Object(i["connect"])(Fs)(Ds);var Bs=r(3466);var Us=r(9);var qs=r.n(Us);var Gs={closeFlexpane:l["b"].func};var Hs={closeFlexpane:j["noop"]};var Ws=function e(t){return n.a.createElement(U["c"],{className:"p-global_nav__flex_btn",onClick:t.closeFlexpane},n.a.createElement(I["b"],{type:"times"}))};Ws.displayName="FlexClose";Ws.defaultProps=Hs;var Vs=Object(i["connect"])(null,{closeFlexpane:pr["a"]})(Ws);var zs=r(1424);var Qs=r(65);var Ks=r(207);var Ys=r(36);var Js=new h["b"]("global_nav");var Zs=function e(t){var r=t.channelId,a=t.threadTs,i=t.name,s=t.isChannel,o=t.featureGlobalNav;if(!o)return null;var l=Object(Ys["constructMsgPermalink"])(r,a);var c=void 0;if(i){var u=n.a.createElement(Qs["a"],{href:l,className:"p-global_nav__flex_thread_permalink"},i);c=s?Js.rt("Thread in {channelName}",{channelName:u}):Js.rt("Thread with {displayName}",{displayName:u})}else c=Js.t("Thread");return n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},c)};Zs.displayName="ThreadHeader";Zs.defaultProps={channelId:void 0,threadTs:void 0,name:void 0,isChannel:true,featureGlobalNav:false};var Xs=function e(t){var r=Object(jt["getFlexParams"])(t)[0];var a=Object(Ks["decodeThreadKey"])(r),n=a.channelId,i=a.threadTs;var s=Object(It["getChannelById"])(t,n);if(!s)return null;return{channelId:n,threadTs:i,name:Object(hn["getDisplayNameForChannel"])(t,s),isChannel:Object(hn["isPublicChannel"])(s)||Object(hn["isPrivateChannel"])(s),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var $s=Object(i["connect"])(Xs)(Zs);var eo=new h["b"]("global_nav");var to=function e(t){var r=t.name,a=t.isChannel,i=t.featureGlobalNav;if(!i)return null;return a&&r?n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},eo.t("About {channelName}",{channelName:r})):n.a.createElement("h2",{className:"p-global_nav__flex_title"},eo.t("About this conversation"))};to.defaultProps={name:void 0,isChannel:true,featureGlobalNav:false};var ro=function e(t){var r=Object(jt["getPrimaryView"])(t);var a=Object(It["getChannelById"])(t,r);if(!a)return null;return{name:Object(hn["getDisplayNameForChannel"])(t,a),isChannel:Object(hn["isPrivateChannel"])(a)||Object(hn["isPublicChannel"])(a),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var ao=Object(i["connect"])(ro)(to);var no=new h["b"]("global_nav");var io={isAdminUser:l["b"].bool,isEnterprise:l["b"].bool,isDetailPane:l["b"].bool,featureGlobalNav:l["b"].bool};var so={isAdminUser:false,isEnterprise:false,isDetailPane:false,featureGlobalNav:false};var oo=function e(t){var r=t.isAdminUser,i=t.isEnterprise,s=t.isDetailPane,o=t.featureGlobalNav;if(!o)return null;var l=i?no.t("Organization Directory"):no.t("Workspace Directory");var c=r&&!s&&n.a.createElement(a["Fragment"],null,n.a.createElement(q["d"],{tip:no.t("Manage members"),position:"bottom-right"},n.a.createElement(U["c"],{href:"/admin",className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},n.a.createElement(I["b"],{type:"cog-o"}))),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(a["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},l),c)};oo.displayName="DirectoryHeader";oo.defaultProps=so;var lo=function e(t){return{isAdminUser:Object(rt["isAdmin"])(Object(Re["getCurrentMember"])(t)),isEnterprise:Object(le["isEnterpriseTeam"])(Object(oe["getCurrentTeam"])(t)),isDetailPane:!Object(j["isEmpty"])(Object(jt["getFlexParams"])(t)),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var co=Object(i["connect"])(lo)(oo);var uo=r(896);var po=new h["b"]("global_nav");var mo={numDownloads:l["b"].number,featureGlobalNav:l["b"].bool};var ho={numDownloads:0,featureGlobalNav:false};var fo=function e(t){var r=t.numDownloads,i=t.featureGlobalNav;if(!i)return null;var s=r>1&&n.a.createElement(a["Fragment"],null,n.a.createElement(U["c"],{onClick:F["clearDownloads"],className:"p-global_nav__flex_btn"},po.t("Clear all")),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(a["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},po.t("Downloads")),s)};fo.displayName="DownloadsHeader";fo.defaultProps=ho;var vo=function e(t){return{numDownloads:(Object(uo["getDownloads"])(t)||[]).length,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var bo=Object(i["connect"])(vo)(fo);var go=new h["b"]("global_nav");var _o={flexName:l["b"].string,featureGlobalNav:l["b"].bool,featureGlobalNavLayout:l["b"].bool,flexOrigin:l["b"].string};var yo={flexName:void 0,featureGlobalNav:void 0,featureGlobalNavLayout:void 0,flexOrigin:void 0};var ko=function(e){S()(t,e);function t(){y()(this,t);return w()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}O()(t,[{key:"renderTitle",value:function e(){var t=this.props,r=t.flexName,a=t.featureGlobalNav,i=t.flexOrigin;if(!a)return null;var s="p-global_nav__flex_title";switch(r){case"convo":case"thread":return n.a.createElement($s,null);case"files":if("starred_items"===i)return n.a.createElement("h2",{className:s},go.t("Starred Items"));return n.a.createElement("h2",{className:s},go.t("Files"));case"stars":case"starred_items":return n.a.createElement("h2",{className:s},go.t("Starred Items"));case"mentions":return n.a.createElement("h2",{className:s},go.t("Activity"));case"team":return n.a.createElement(co,null);case"whats_new":return n.a.createElement("h2",{className:s},go.t("What\u2019s New"));case"groups":case"user_groups":return n.a.createElement("h2",{className:s},go.t("User Groups"));case"shortcuts":return n.a.createElement("h2",{className:s},go.t("Keyboard Shortcuts"));case"downloads":return n.a.createElement(bo,null);case"details":return n.a.createElement(ao,null);case"apps":return n.a.createElement("h2",{className:s},go.t("About this app"));default:return n.a.createElement("h2",{className:s},"Unimplemented: ",r)}}},{key:"render",value:function e(){var t=this.props,r=t.flexName,a=t.featureGlobalNavLayout;if(!r)return null;var i=p()(qs()({"p-global_nav__flex":true,"p-global_nav__flex--sonic":Object(v["a"])(),"p-global_nav__flex--legacy":!Object(v["a"])(),"p-global_nav__flex--relayout":a},"p-global_nav__flex--"+r,true));return n.a.createElement("div",{className:i},n.a.createElement(zs["a"],null),this.renderTitle(),n.a.createElement(Vs,null))}}]);return t}(a["Component"]);ko.displayName="FlexHeader";ko.defaultProps=yo;var Oo=function e(t){return{flexName:Object(jt["getSecondaryView"])(t),flexOrigin:Object(jt["getFlexOrigin"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var Eo=Object(i["connect"])(Oo)(ko);var wo=function e(t){var r=t.featureGlobalNavLayout;return r?n.a.createElement(a["Fragment"],null,n.a.createElement(u["a"],null),n.a.createElement("div",{className:"p-global_nav p-global_nav--top_only"},n.a.createElement(pn,null))):n.a.createElement(a["Fragment"],null,n.a.createElement(u["a"],null),n.a.createElement("div",{className:"p-global_nav"},n.a.createElement(pn,null),n.a.createElement("div",{className:"p-global_nav__bottom"},n.a.createElement(Bs["a"],null),n.a.createElement(Ls,null),n.a.createElement(Eo,null))))};wo.defaultProps={featureGlobalNavLayout:false};var Co=function e(t){return{featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var So=Object(i["connect"])(Co)(wo);var jo=function e(t,r){if(!t)throw new Error("mountGlobalNav must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(So,null)),r)};var Io=function e(t,r){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(Ls,null)),r)};var To=function e(t,r){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(Eo,null)),r)};var No=r(51);Object(No["a"])("interop.globalNav",{mountGlobalNav:jo,mountGlobalNavChannel:Io,mountGlobalNavFlex:To})},,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(681);Object(a["a"])("interop.emoji",{isValidEmojiText:function e(t){return Object(n["isValidEmojiText"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},isEmojiNameSkinToneModifiable:function e(t){return Object(n["isEmojiNameSkinToneModifiable"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},getCanonicalEmojiName:function e(t){return Object(n["getCanonicalEmojiName"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},getEmojiUrl:function e(t){var r=t.text,a=t.emojiSize,i=t.emojiMode;return Object(n["getEmojiUrl"])(TS.redux.getState(),{teamId:TS.model.team.id,text:r,emojiMode:i,emojiSize:a})},test:n["test"]})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(145);Object(a["a"])("interop.emojiComponent",{EmojiSizes:n["a"],mapStateToProps:function e(t){return Object(n["c"])(TS.redux.getState(),t)}})},,function(e,t,r){},,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(3547);var n=r(51);Object(n["a"])("interop.mountTeamCreatorOnboardingDialog",a["a"]);Object(n["a"])("interop.unmountTeamCreatorOnboardingDialog",a["b"])},,,,function(e,t,r){"use strict";var a={};r.r(a);r.d(a,"accessibility",function(){return _d["default"]});r.d(a,"allThreads",function(){return yd["default"]});r.d(a,"allUnreads",function(){return vl["default"]});r.d(a,"bootData",function(){return ce["default"]});r.d(a,"channelSidebar",function(){return Oe["default"]});r.d(a,"channelSidebarFolders",function(){return kd["default"]});r.d(a,"checkoutFlow",function(){return Od["default"]});r.d(a,"connectivity",function(){return Ze["default"]});r.d(a,"customEmoji",function(){return Ed["default"]});r.d(a,"deletedMessages",function(){return wd["default"]});r.d(a,"desktop",function(){return gr["default"]});r.d(a,"dnd",function(){return $t["default"]});r.d(a,"downloads",function(){return Cd["default"]});r.d(a,"drafts",function(){return Sd["default"]});r.d(a,"ephemeralMessages",function(){return jd["default"]});r.d(a,"expandables",function(){return or["default"]});r.d(a,"experiments",function(){return Id["default"]});r.d(a,"fileRefresh",function(){return ur["default"]});r.d(a,"filesFlexpane",function(){return Td["default"]});r.d(a,"fileUpload",function(){return Nd["default"]});r.d(a,"flexpane",function(){return Ad["default"]});r.d(a,"globalNav",function(){return Rd["default"]});r.d(a,"i18n",function(){return Md["default"]});r.d(a,"imports",function(){return Pd["default"]});r.d(a,"incrementalBoot",function(){return Pe["default"]});r.d(a,"inlineFilePreviews",function(){return xd["default"]});r.d(a,"invites",function(){return Dd["default"]});r.d(a,"memberDirectoryFlexpane",function(){return Fd["default"]});r.d(a,"messageEdit",function(){return ga["default"]});r.d(a,"messagePane",function(){return ue["default"]});r.d(a,"messagePaneBanner",function(){return Ld["default"]});r.d(a,"modal",function(){return it["default"]});r.d(a,"navigationHistory",function(){return La["default"]});r.d(a,"noop",function(){return Bd["default"]});r.d(a,"pendingOpenChannel",function(){return Ud["default"]});r.d(a,"prefs",function(){return Ee["default"]});r.d(a,"presence",function(){return uc["default"]});r.d(a,"pricingPlans",function(){return qd["default"]});r.d(a,"searchAutocomplete",function(){return Gd["default"]});r.d(a,"searchChannelsUsers",function(){return Hd["default"]});r.d(a,"searchInputBox",function(){return Wd["default"]});r.d(a,"searchResults",function(){return eu["default"]});r.d(a,"searchSession",function(){return nu["default"]});r.d(a,"searchUi",function(){return tu["default"]});r.d(a,"slashCommand",function(){return io["default"]});r.d(a,"socket",function(){return ae["default"]});r.d(a,"stars",function(){return Ec["default"]});r.d(a,"teamCreation",function(){return Vd["default"]});r.d(a,"threadsFlexpane",function(){return zd["default"]});r.d(a,"threadSub",function(){return fl["default"]});r.d(a,"toast",function(){return nt["default"]});r.d(a,"typing",function(){return Ho["default"]});r.d(a,"uiSerialization",function(){return H["default"]});r.d(a,"unfurls",function(){return Qd["default"]});r.d(a,"unreadCounts",function(){return xe["default"]});r.d(a,"userGroupsFlexpane",function(){return Kd["default"]});r.d(a,"usersCounts",function(){return Yd["default"]});r.d(a,"workspace",function(){return de["default"]});r.d(a,"adminMembers",function(){return Jd["default"]});r.d(a,"appActions",function(){return dn["default"]});r.d(a,"appPermissions",function(){return as["default"]});r.d(a,"appProfiles",function(){return fs["default"]});r.d(a,"apps",function(){return Tn["default"]});r.d(a,"blocks",function(){return Zd["default"]});r.d(a,"bots",function(){return ws["default"]});r.d(a,"calls",function(){return sn["b"]});r.d(a,"canvases",function(){return Ts["default"]});r.d(a,"channelHistory",function(){return Ae["default"]});r.d(a,"channels",function(){return re["default"]});r.d(a,"channelsMeta",function(){return np});r.d(a,"currentMemberUserGroupRegexp",function(){return Wc["default"]});r.d(a,"customizeEmoji",function(){return ip["default"]});r.d(a,"developerActions",function(){return sp["default"]});r.d(a,"emoji",function(){return ho["default"]});r.d(a,"enterprise",function(){return op["default"]});r.d(a,"environment",function(){return lp["default"]});r.d(a,"files",function(){return dr["default"]});r.d(a,"idpGroups",function(){return cp["default"]});r.d(a,"lastNetworkSend",function(){return up["default"]});r.d(a,"memberCounts",function(){return Kr["default"]});r.d(a,"members",function(){return pe["default"]});r.d(a,"membership",function(){return na["default"]});r.d(a,"messages",function(){return Me["default"]});r.d(a,"messagesMeta",function(){return iu["default"]});r.d(a,"notifications",function(){return dp["default"]});r.d(a,"reactions",function(){return vc["default"]});r.d(a,"teamId",function(){return Q["default"]});r.d(a,"teams",function(){return Ba["default"]});r.d(a,"userGroups",function(){return Hc["default"]});r.d(a,"userGroupMembership",function(){return Vc["default"]});r.d(a,"window",function(){return Re["default"]});var n=r(3);var i=r.n(n);var s=r(2);var o=r.n(s);var l=r(324);var c="persist:";var u="persist/FLUSH";var d="persist/REHYDRATE";var p="persist/PAUSE";var m="persist/PERSIST";var h="persist/PURGE";var f="persist/REGISTER";var v=-1;var b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function _(e,t,r,a){var n=a.debug;var i=g({},r);e&&"object"===("undefined"===typeof e?"undefined":b(e))&&Object.keys(e).forEach(function(a){if("_persist"===a)return;if(t[a]!==r[a]){false;return}i[a]=e[a]});false;return i}function y(e){var t=e.blacklist||null;var r=e.whitelist||null;var a=e.transforms||[];var n=e.synchronousWrites||false;var i=e.throttle||0;var s=""+(void 0!==e.keyPrefix?e.keyPrefix:c)+e.key;var o=e.storage;var l=false===e.serialize?function(e){return e}:k;var u={};var d={};var p=[];var m=null;var h=null;var f=function e(t){Object.keys(t).forEach(function(e){if(!g(e))return;if(u[e]===t[e])return;if(-1!==p.indexOf(e))return;p.push(e)});Object.keys(u).forEach(function(e){void 0===t[e]&&p.push(e)});u=t;n?v(n):null===m&&(m=setInterval(v,i))};function v(e){if(0===p.length){m&&clearInterval(m);m=null;return}var t=p.shift();var r=a.reduce(function(e,r){return r.in(e,t,u)},u[t]);if(void 0!==r)try{d[t]=l(r)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete d[t];0===p.length&&b();e&&v(e)}function b(){Object.keys(d).forEach(function(e){void 0===u[e]&&delete d[e]});h=o.setItem(s,l(d)).catch(_)}function g(e){if(r&&-1===r.indexOf(e)&&"_persist"!==e)return false;if(t&&-1!==t.indexOf(e))return false;return true}function _(e){e&&false}var y=function e(){while(0!==p.length)v(n);return h||Promise.resolve()};return{update:f,flush:y}}function k(e){return JSON.stringify(e)}function O(e){var t=e.transforms||[];var r=""+(void 0!==e.keyPrefix?e.keyPrefix:c)+e.key;var a=e.storage;var n=e.debug;var i=false===e.serialize?function(e){return e}:E;return a.getItem(r).then(function(e){if(!e)return;try{var r={};var a=i(e);Object.keys(a).forEach(function(e){r[e]=t.reduceRight(function(t,r){return r.out(t,e,a)},i(a[e]))});return r}catch(e){false;throw e}})}function E(e){return JSON.parse(e)}function w(e){var t=e.storage;var r=""+(void 0!==e.keyPrefix?e.keyPrefix:c)+e.key;return t.removeItem(r,C)}function C(e){e&&false}var S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function j(e,t){var r={};for(var a in e){if(t.indexOf(a)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,a))continue;r[a]=e[a]}return r}var I=5e3;function T(e,t){false;var r=void 0!==e.version?e.version:v;var a=e.debug||false;var n=void 0===e.stateReconciler?_:e.stateReconciler;var i=e.getStoredState||O;var s=void 0!==e.timeout?e.timeout:I;var o=null;var l=false;var c=true;var f=function e(t){t._persist.rehydrated&&o&&!c&&o.update(t);return t};return function(a,v){var b=a||{},g=b._persist,_=j(b,["_persist"]);var k=_;if(v.type===m){var O=false;var E=function t(r,a){false;if(!O){v.rehydrate(e.key,r,a);O=true}};s&&setTimeout(function(){!O&&E(void 0,new Error('redux-persist: persist timed out for persist key "'+e.key+'"'))},s);c=false;o||(o=y(e));if(g)return a;if("function"!==typeof v.rehydrate||"function"!==typeof v.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");v.register(e.key);i(e).then(function(t){var a=e.migrate||function(e,t){return Promise.resolve(e)};a(t,r).then(function(e){E(e)},function(e){false;E(void 0,e)})},function(e){E(void 0,e)});return S({},t(k,v),{_persist:{version:r,rehydrated:false}})}if(v.type===h){l=true;v.result(w(e));return S({},t(k,v),{_persist:g})}if(v.type===u){v.result(o&&o.flush());return S({},t(k,v),{_persist:g})}if(v.type===p)c=true;else if(v.type===d){if(l)return S({},k,{_persist:S({},g,{rehydrated:true})});if(v.key===e.key){var C=t(k,v);var I=v.payload;var T=false!==n&&void 0!==I?n(I,a,C,e):C;var N=S({},T,{_persist:S({},g,{rehydrated:true})});return f(N)}}if(!g)return t(a,v);var A=t(k,v);if(A===k)return a;A._persist=g;return f(A)}}var N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function R(e,t,r,a){var n=a.debug;var i=A({},r);e&&"object"===("undefined"===typeof e?"undefined":N(e))&&Object.keys(e).forEach(function(a){if("_persist"===a)return;if(t[a]!==r[a]){false;return}if(M(r[a])){i[a]=A({},i[a],e[a]);return}i[a]=e[a]});false;return i}function M(e){return null!==e&&!Array.isArray(e)&&"object"===("undefined"===typeof e?"undefined":N(e))}function P(e,t){e.stateReconciler=void 0===e.stateReconciler?R:e.stateReconciler;return T(e,Object(l["combineReducers"])(t))}var x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function D(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var F={registry:[],bootstrapped:false};var L=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;var r=arguments[1];switch(r.type){case f:return x({},t,{registry:[].concat(D(t.registry),[r.key])});case d:var a=t.registry.indexOf(r.key);var n=[].concat(D(t.registry));n.splice(a,1);return x({},t,{registry:n,bootstrapped:0===n.length});default:return t}};function B(e,t,r){var a,n;false;var i=r||false;var s=Object(l["createStore"])(L,F,t?t.enhancer:void 0);var o=function e(t){s.dispatch({type:f,key:t})};var c=function t(r,a,n){var o={type:d,payload:a,err:n,key:r};e.dispatch(o);s.dispatch(o);if(i&&v.getState().bootstrapped){i();i=false}};var v=x({},s,{purge:function t(){var r=[];e.dispatch({type:h,result:function e(t){r.push(t)}});return Promise.all(r)},flush:function t(){var r=[];e.dispatch({type:u,result:function e(t){r.push(t)}});return Promise.all(r)},pause:function t(){e.dispatch({type:p})},persist:function t(){e.dispatch({type:m,register:o,rehydrate:c})}});v.persist();return v}function U(e,t){var r=t||{},a=r.debug;return function(t,r){if(!t){false;return Promise.resolve(void 0)}var a=t._persist&&void 0!==t._persist.version?t._persist.version:v;if(a===r){false;return Promise.resolve(t)}if(a>r){false;return Promise.resolve(t)}var n=Object.keys(e).map(function(e){return parseInt(e)}).filter(function(e){return r>=e&&e>a}).sort(function(e,t){return e-t});false;try{var i=n.reduce(function(t,r){false;return e[r](t)},t);return Promise.resolve(i)}catch(e){return Promise.reject(e)}}}function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.whitelist||null;var n=r.blacklist||null;function i(e){if(a&&-1===a.indexOf(e))return true;if(n&&-1!==n.indexOf(e))return true;return false}return{in:function t(r,a,n){return!i(a)&&e?e(r,a,n):r},out:function e(r,a,n){return!i(a)&&t?t(r,a,n):r}}}var G=r(3528);var H=r(818);var W=r(3436);var V=r(130);var z=r(17);var Q=r(23);var K=r(33);var Y=r(63);var J=r(218);var Z=r(62);var X=r(24);var $=r.n(X);var ee=r(1113);var te=r(107);var re=r(19);var ae=r(79);var ne=function e(t){switch(t.type){case re["addOrReplaceChannels"].getType():return i()({},t,{payload:"Channel bulk add payload is too big to output to redux devtools"});case ae["socketMessageReceived"].getType():return i()({},t,{payload:"View raw WebSocket frames for details, but this was a "+(t.payload.subtype?[t.payload.type,t.payload.subtype].join("."):t.payload.type)+" message"});default:return t}};var ie=Object(te["a"])()?void 0:function(){return{apologies:"Serializing our large state kept crashing redux devtools. I hope to bring it back someday, but for now you can see the state by using `TS.redux.getState()` in the console"}};var se={autoPause:true,actionSanitizer:ne,stateSanitizer:ie,maxAge:1e3,features:{pause:true}};var oe=se;function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamId,r=e.customEnhancers,a=e.middlewares;var n=void 0;var o=window.TS&&Object(s["get"])(window,"TS.boot_data.feature_redux_dev_tools",false);if(o)n=l["compose"].apply(void 0,[l["applyMiddleware"].apply(void 0,$()(a))].concat($()(r),[ee["a"].instrument()]));else{var c=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(i()({},oe,{name:"Slack-"+t})):l["compose"];n=c.apply(void 0,[l["applyMiddleware"].apply(void 0,$()(a))].concat($()(r)))}return n}var ce=r(11);var ue=r(116);var de=r(69);var pe=r(26);var me=r(12);var he=r(675);var fe=r(74);function ve(e,t){if(!Object(me["isIm"])(e))return false;var r=Object(pe["getMemberById"])(t(),Object(me["getMemberIdFromIm"])(e));return r&&r.deleted}function be(e){return Object(me["isPublicChannel"])(e)&&!Object(me["isMemberOfChannel"])(e)}function ge(e,t){Object(he["c"])();(be(e)||Object(me["isArchived"])(e)||ve(e,t))&&Object(he["a"])(e)}function _e(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=Object(de["getPrimaryView"])(a);var i=Object(re["getChannelById"])(a,n);if(!i)return;ge(i,r)}function ye(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=Object(de["getPrimaryView"])(a);var i=false;var s=e&&e.payload&&e.payload.channels;if(!s||!s.length)return;s.forEach(function(e){e&&e.id===n&&(i=true)});if(!i)return;var o=Object(re["getChannelById"])(a,n);if(!o)return;ge(o,r)}function ke(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=e.payload;var i=Object(de["getPrimaryView"])(a);var s=Object(re["getChannelById"])(a,i);var o=Object(me["getMemberIdFromIm"])(s);if(!s||!Object(me["isIm"])(s)||!o)return;o===n.id&&ge(s,r)}Object(fe["b"])({actions:[ue["setActiveChannel"]],sideEffect:_e});Object(fe["b"])({actions:[pe["addMember"]],sideEffect:ke});Object(fe["b"])({actions:[re["addOrReplaceChannels"]],sideEffect:ye,reasons:[re["CHANNEL_ACTION_REASONS"].ADD_CHANNEL,re["CHANNEL_ACTION_REASONS"].ARCHIVE_CHANNEL,re["CHANNEL_ACTION_REASONS"].UNARCHIVE_CHANNEL,re["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL,re["CHANNEL_ACTION_REASONS"].UPSERT_CHANNEL,re["CHANNEL_ACTION_REASONS"].BULK_ADD_CHANNELS,re["CHANNEL_ACTION_REASONS"].BULK_UPDATE_CHANNELS]});var Oe=r(729);var Ee=r(21);var we=r(240);var Ce=r(772);var Se=r(167);var je=r(102);var Ie=10;var Te=5;function Ne(e,t,r){var a=r();if(Object(Ee["getUserPref"])(a,"show_sidebar_quickswitcher_button"))return;if(Object(Ee["getUserPref"])(a,"k_key_omnibox_auto_hide_count")===Te)return;if(void 0===Object(Ee["getUserPref"])(a,"k_key_omnibox_auto_hide_count"))return;if(Object(Se["b"])(a))return;if(Object(Ce["b"])())return;if(Object(re["getCountOfOpenChannels"])(a)>=Ie){Object(je["a"])({show_sidebar_quickswitcher_button:JSON.stringify(Object(Ee["getUserPref"])(a,"show_sidebar_quickswitcher_button")),k_key_omnibox_auto_hide_count:JSON.stringify(Object(Ee["getUserPref"])(a,"k_key_omnibox_auto_hide_count")),count_of_open_channels:Object(re["getCountOfOpenChannels"])(a)},"show_sidebar_quickswitcher_button automatically set to true","show_sidebar_quickswitcher_button_true");t(Object(we["c"])({pref:"show_sidebar_quickswitcher_button",value:true}));t(Object(Oe["setJumperCoachmarkState"])("SHOW_BUTTON"))}}Object(fe["b"])({actions:[re["addOrReplaceChannels"]],sideEffect:Ne,reasons:[re["CHANNEL_ACTION_REASONS"].ADD_CHANNEL,re["CHANNEL_ACTION_REASONS"].UPSERT_CHANNEL]});var Ae=r(122);var Re=r(206);var Me=r(44);var Pe=r(752);var xe=r(3437);var De=r(3406);var Fe=r(70);var Le=r(160);var Be=r(471);var Ue=r(165);function qe(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var n=r();if(!Object(Pe["isFullyBooted"])(n)){Je({getState:r},"Not marking "+e+" because not fully booted");return}var i=Object(de["getPrimaryView"])(n);if(i!==e){Object(je["d"])(2005)&&Je({getState:r},"Not marking because "+e+" is not active");return}if(Object(ue["didUserSetUnreadPoint"])(n)){Je({getState:r},"Not marking "+e+" because unread point was set manually");return}if(Object(Be["b"])()){Je({getState:r},"Not marking "+e+" because active channel is hidden");return}if(Object(Y["a"])()){if(!Object(De["c"])(n)){Je({getState:r},"Not marking "+e+" because attention not on chat ("+Object(De["b"])(n)+")");a||t(Object(ue["setGhostLastRead"])(null));return}}else if(!Object(Ue["f"])()){Je({getState:r},"Not marking "+e+" because attention not on chat ("+Object(Ue["c"])()+")");a||t(Object(ue["setGhostLastRead"])(null));return}var s=Object(re["getChannelById"])(n,e);var o=Object(Ae["getTimestampsByChannelId"])(n,e),l=o.timestamps;var c=Object(me["getLatestTs"])(s,l);var u=Object(me["isRead"])(s);if(Object(me["getLastReadTs"])(s)>=c&&u){Je({getState:r},"Not marking "+e+" because last_read >= latest && channel is read");return}var d=Ge(n);var p=Object(ue["isUnreadLineVisible"])(n);var m=Object(me["getLastReadTs"])(s)>=c;var h=Object(Me["getMessageByTimestamp"])(n,e,c);var f=Object(ce["getCurrentUserId"])(n);var v=h&&h.user===f;if(d||p||m||u&&v){Je({getState:r},d?"Marking "+e+" because mark_msgs_read_immediately pref":p?"Marking "+e+" because unread line is visible":m?"Marking "+e+" because last_read >= latest":"Marking "+e+" because channel is read and last message is from self");t(Object(re["markMostRecentMsgRead"])({channelId:e,saveGhost:a&&!u,reason:Fe["MARKED_REASONS"].VIEWED}))}else if(!d){Je({getState:r},"Not marking "+e+", clearing ghost last_read");t(Object(ue["setGhostLastRead"])(null))}}function Ge(e){return Object(Ee["getUserPref"])(e,"mark_msgs_read_immediately")&&!Object(Ee["getUserPref"])(e,"start_scroll_at_oldest")}var He=o.a.debounce(function(e,t,r){var a=r();var n=Object(re["getChannelById"])(a,e);if(Ge(a)||!Object(me["isRead"])(n)){Je({getState:r},"Checking unreads after debounced channel change to "+e);qe(e,t,r)}},500);function We(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=e.payload.channelId;if(!n)return;He(n,t,r)}function Ve(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=Object(de["getPrimaryView"])(a);if(!Object(Le["a"])(n))return;var i=Object(Re["isWindowFocused"])(a);var s=!Object(Y["a"])()||Object(de["isWorkspaceFocused"])(a);i&&s&&requestAnimationFrame(function(){Je({getState:r},"Checking unreads after window became focused");qe(n,t,r)})}function ze(e,t,r){var a=r();var n=Object(de["getPrimaryView"])(a);if(!Object(Le["a"])(n))return;Object(de["isWorkspaceFocused"])(a)&&requestAnimationFrame(function(){Je({getState:r},"Checking unreads after workspace became focused");qe(n,t,r)});t(Object(xe["activeWorkspaceChanged"])())}var Qe=o.a.debounce(function(e,t,r){var a=Object(ue["isUnreadLineVisible"])(r());if(a){Je({getState:r},"Checking unreads after unread line became visible");qe(e,t,r)}},350);function Ke(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=Object(de["getPrimaryView"])(a);if(!Object(Le["a"])(n))return;if(Ge(a))return;Qe(n,t,r)}function Ye(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=Object(de["getPrimaryView"])(a);if(!Object(Le["a"])(n))return;o.a.defer(function(){Je({getState:r},"Checking unreads after fully booted");qe(n,t,r)})}Object(fe["b"])({actions:[ue["setActiveChannel"]],sideEffect:We});Object(fe["b"])({actions:[Re["updateFocus"],Re["setWindow"]],sideEffect:Ve});Object(fe["b"])({actions:[de["setRecentlyFocusedWorkspaces"]],sideEffect:ze});Object(fe["b"])({actions:[ue["setUnreadLineVisibility"]],sideEffect:Ke});Object(fe["b"])({actions:[Pe["setFullyBooted"]],sideEffect:Ye});function Je(e,t){Object(z["a"])(e).info("CHECK-UNREADS",t)}var Ze=r(626);var Xe=r(612);var $e=r(1084);function et(e,t,r){var a=r();if(!Object(ce["isFeatureEnabled"])(a,"feature_degraded_send"))return;if(Object(Ze["isOnline"])(a)){Object($e["c"])();Object(Be["d"])()}else if(Object(Xe["b"])())if(Object(Ze["isClientOnline"])(a)){if(!Object(Ze["isServiceOnline"])(a)){Object($e["b"])();Object(Be["c"])({reason:{SERVICE_DOWN:true}})}}else{Object($e["b"])();Object(Be["c"])({reason:{API_ERROR:true}})}else{Object($e["b"])();Object(Be["c"])({reason:{OFFLINE:true}})}}Object(fe["b"])({actions:[Ze["setServiceOnline"],Ze["setClientOnline"]],sideEffect:et});var tt=r(1);var rt=r.n(tt);var at=r(4);var nt=r(212);var it=r(77);var st=r(106);var ot=r.n(st);var lt=r(27);var ct=r(81);function ut(e){if(Object(ct["urlQueryStringParse"])(window.location).deprecation_is_deprecated_ssb)return true;var t=e();if(!Object(lt["isSSB"])())return false;if(Object(ce["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation")&&!Object(lt["isSSBAndAtLeastVersion"])("3.0.0"))return true;return false}function dt(e){if(Object(ct["urlQueryStringParse"])(window.location).deprecation_is_deprecated_browser)return true;var t=e();if(Object(lt["isSSB"])())return false;if(Object(ce["isFeatureEnabled"])(t,"feature_deprecate_q1_2019_dark")){if(ot.a.chrome&&ot.a.version<66)return true;if(ot.a.firefox&&ot.a.version<52)return true;if(ot.a.safari&&ot.a.version<10.1)return true;if(ot.a.msedge&&ot.a.version<16.16299)return true;if(ot.a.msie)return true}return false}function pt(){if(window.process&&window.process.mas)return"macappstore://itunes.apple.com/app/slack/id803453959";if(window.process&&window.process.windowsStore)return"ms-windows-store://pdp/?ProductId=9wzdncrdk3wp";var e=false;var t="";if(Object(lt["isMac"])())e="osx";else if(Object(lt["isWindows"])()){e="windows";t=Object(lt["isWin64"])()?"windows_64":"windows"}else Object(lt["isLinux"])()&&(e=false);if(!e)return"https://slack.com/downloads";var r="https://slack.com/downloads/instructions/"+e;r=Object(ct["setUrlQueryStringValue"])(r,"os",e);t&&(r=Object(ct["setUrlQueryStringValue"])(r,"build_architecture",t));return r}var mt=r(171);var ht=r(5);var ft=r.n(ht);var vt=r(6);var bt=r.n(vt);var gt=r(7);var _t=r.n(gt);var yt=r(8);var kt=r.n(yt);var Ot=r(129);var Et=r(14);var wt=r(10);var Ct=r(283);var St=r(65);var jt=new wt["b"]("deprecation");var It={featureSsbQ218Deprecation:Ot["b"].bool,onCloseComplete:Ot["b"].func};var Tt={featureSsbQ218Deprecation:false,onCloseComplete:s["noop"]};var Nt=function(e){kt()(t,e);function t(e){ft()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onLinkClick=r.onLinkClick.bind(r);r.ref=rt.a.createRef();return r}bt()(t,[{key:"onLinkClick",value:function e(){Object(Z["c"])("deprecation_toast_click_ssb");this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){if(!this.props.featureSsbQ218Deprecation)return null;return rt.a.createElement(Ct["b"],{shouldAutoFade:false,ref:this.ref,onCloseComplete:this.props.onCloseComplete},rt.a.createElement("div",null,rt.a.createElement("strong",null,jt.t("This is an out-of-date version of Slack.",{fallbackHash:"50ebb2ef5c811360b7496e2bec13c28583af12e8"})),rt.a.createElement("br",null),rt.a.createElement(St["a"],{href:pt(),onClick:this.onLinkClick},jt.t("Update now"))))}}]);return t}(tt["Component"]);Nt.displayName="SSBDeprecationToast";Nt.defaultProps=Tt;var At=function e(t){return{featureSsbQ218Deprecation:Object(ce["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation")}};var Rt=Object(Et["connect"])(At)(Nt);var Mt=r(103);var Pt=new wt["b"]("deprecation");var xt={featureSsbQ218DeprecationModal:Ot["b"].bool};var Dt={featureSsbQ218DeprecationModal:false,featureSsbQ218DeprecationBlock:false};var Ft=function(e){kt()(t,e);function t(){ft()(this,t);return _t()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}bt()(t,[{key:"onGo",value:function e(){Object(Z["c"])("deprecation_modal_click_ssb");window.open(pt())}},{key:"render",value:function e(){if(!this.props.featureSsbQ218DeprecationModal)return null;return rt.a.createElement(Mt["a"],{title:Pt.t("This is an out-of-date version of Slack"),cancelText:Pt.t("Skip for Now"),goButtonText:Pt.t("Update the App"),onGo:this.onGo},rt.a.createElement("div",null,rt.a.createElement("p",null,Pt.t("We\u2019ve released a new version of Slack with an assortment of bug fixes and an all-around smoother experience.")),rt.a.createElement("p",null,Pt.rt("To continue using Slack, please update your version of the app immediately. Feel free to <a>contact us</a> if you have any questions.",{fallbackHash:"c9631f01ab6b932241f68aa1de3b1f179c33aceb"},function(e){var t=e.text;return rt.a.createElement(St["a"],{href:"https://my.slack.com/help/requests/new"},t)}))))}}]);return t}(tt["Component"]);Ft.displayName="SSBDeprecationModal";Ft.defaultProps=Dt;var Lt=function e(t){return{featureSsbQ218DeprecationModal:Object(ce["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation_modal")}};var Bt=Object(Et["connect"])(Lt)(Ft);var Ut=604800;var qt=86400;function Gt(e){if(Object(ct["urlQueryStringParse"])(window.location).deprecation_show_ssb_toast)return true;if(!ut(e))return false;var t=e();if(Object(ce["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation_modal"))return false;var r=Object(mt["c"])();var a=Object(Ee["getUserPref"])(t,"deprecation_toast_last_seen");if(r-a<Ut)return false;if(Object(mt["j"])(r).getHours()<12)return false;return true}function Ht(e){if(Object(ct["urlQueryStringParse"])(window.location).deprecation_show_ssb_modal)return true;if(!ut(e))return false;var t=e();if(!Object(ce["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation_modal"))return false;var r=Object(mt["c"])();var a=Object(Ee["getUserPref"])(t,"deprecation_modal_last_seen");if(r-a<qt)return false;if(Object(mt["j"])(r).getHours()<12)return false;return true}function Wt(e){if(Object(ct["urlQueryStringParse"])(window.location).deprecation_show_browser_toast)return true;if(!dt(e))return false;var t=e();if(!Object(ce["isFeatureEnabled"])(t,"feature_deprecate_q1_2019_dark"))return false;var r=Object(mt["c"])();var a=Object(Ee["getUserPref"])(t,"deprecation_toast_last_seen");if(r-a<Ut)return false;if(Object(mt["j"])(r).getHours()<12)return false;return true}function Vt(e,t){if(Ht(t)){e(Object(we["c"])({pref:"deprecation_modal_last_seen",value:Object(mt["c"])()}));e(Object(it["openModal"])({element:rt.a.createElement(Bt,null)}));Object(Z["c"])("deprecation_modal_ssb");return true}return false}function zt(e,t){if(Gt(t)){e(Object(we["c"])({pref:"deprecation_toast_last_seen",value:Object(mt["c"])()}));e(Object(nt["enqueueToast"])({element:rt.a.createElement(Rt,null)}));Object(Z["c"])("deprecation_toast_ssb");return true}if(Wt(t)){Object(Z["c"])("deprecation_toast_browser_dark");return true}return false}var Qt=Object(at["e"])("shows a deprecation warning if and when appropriate",function(e,t){if(Vt(e,t))return true;if(zt(e,t))return true;return false});function Kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=a();if(t)return;if(!Object(ae["isFirstConnection"])(n))return;if(!Object(Re["isWindowFocused"])(n))return;r(Qt())}function Yt(e,t,r){var a=r();if(!Object(Re["isWindowFocused"])(a))return;if(!Object(ae["wasPreviouslyConnected"])(a))return;t(Qt())}Object(fe["b"])({actions:[ae["connected"]],sideEffect:Kt});Object(fe["b"])({actions:[Re["updateFocus"]],sideEffect:Yt});var Jt=r(53);function Zt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];Object(Jt["g"])(t,r,a)}function Xt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];Object(Jt["f"])(t,r,a)}Object(fe["a"])([{actions:[ae["socketErrorMessageReceived"]],sideEffect:Zt},{actions:[ae["socketMessageReceived"]],sideEffect:Xt}]);var $t=r(493);var er=r(429);var tr="DND";var rr=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload;var a=arguments[1];var n=arguments[2];var i=n();if(!Object(ce["isFeatureEnabled"])(i,"feature_sonic_dnd_manager"))return;if(r)return;var o=Object(s["keys"])(Object($t["getAllDndSchedules"])(i));if(Object(s["isEmpty"])(o))return;Object(z["a"])({getState:n}).info(tr,"Flushing and fetching fresh DND times for the following members after connecting to the websocket: "+o);a(Object($t["removeDndSchedule"])({memberIds:o}));a(Object(er["c"])())};Object(fe["b"])({actions:[ae["connected"]],sideEffect:rr});var ar=r(827);function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];Object(ar["c"])(a,t)}function ir(e,t,r){Object(ar["d"])(r)}function sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];Object(ar["e"])(a,t)}Object(fe["a"])([{actions:[ae["connected"]],sideEffect:nr},{actions:[ae["disconnected"]],sideEffect:ir},{actions:[ae["socketMessageReceived"]],sideEffect:sr}]);var or=r(202);var lr=r(628);function cr(e,t,r){var a=r();Object(lr["e"])(Object(or["getExpandables"])(a))}Object(fe["b"])({actions:[or["setExpanded"],or["bulkSetExpanded"]],sideEffect:cr});var ur=r(260);var dr=r(78);var pr=r(958);function mr(e,t,r){var a=r();var n=e.payload.id;var i=Object(ur["getFileRefreshState"])(a,n);if(i!==ur["STATE"].REFRESHING)return;var s=Object(ur["getFileRefreshTimeout"])(a,n);s&&clearTimeout(s);var o=setTimeout(function(){return t(Object(ur["refreshReset"])({fileId:n,timeout:o}))},pr["a"]);t(Object(ur["refreshDone"])({fileId:n}))}Object(fe["b"])({actions:[dr["addFile"]],sideEffect:mr});var hr=r(131);function fr(e,t,r){var a=r();e.forEach(function(e){var t=Object(dr["getFileById"])(a,e);Object(hr["c"])(t)})}function vr(e,t,r){var a=e.payload;if(!a)return;fr([a.id],t,r)}function br(e,t,r){var a=e.payload;if(!a)return;fr(a.map(function(e){return e.id}),t,r)}Object(fe["b"])({actions:[dr["addFile"]],sideEffect:vr});Object(fe["b"])({actions:[dr["bulkAddFiles"]],sideEffect:br});var gr=r(450);var _r=r(1106);var yr=r(75);function kr(e,t,r){var a=r();if(!Object(Se["b"])(a))return;if(!Object(s["get"])(window,"desktop.app.updateDragRegion"))return;var n=Object(Q["getTeamId"])(a);var i=e.payload;if(n!==i)return;Object(z["a"])({getState:r}).info("GLOBAL-NAV","Resetting SSB drag region");window.desktop.app.updateDragRegion([])}function Or(e,t,r){var a="isTitleBarForcedByUser";if(!Object(yr["hasPreference"])(a))return;var n=r();if(!Object(Se["b"])(n)){if(Object(ce["isFeatureEnabled"])(n,"feature_global_nav_rollback")){if(false===Object(yr["getPreference"])(a))return;Object(yr["setPreference"])({name:a,value:false});Object(z["a"])({getState:r}).info("GLOBAL-NAV","Resetting Desktop Nav SSB frame changes")}return}if(true===Object(yr["getPreference"])(a))return;Object(yr["setPreference"])({name:a,value:true});Object(z["a"])({getState:r}).info("GLOBAL-NAV","Enabling desktop UI frame changes for next boot")}function Er(e,t,r){var a=r();var n=Object(z["a"])({getState:r});if(!Object(Se["b"])(a))return false;if(!Object(Pe["isFullyBooted"])(a))return false;var i=Object(Ee["getUserPref"])(a,"sidebar_theme");if("custom_theme"===i)return false;var s=null;try{s=JSON.parse(Object(Ee["getUserPref"])(a,"sidebar_theme_custom_values"))}catch(e){return false}var o=Object(_r["b"])(i,null,{useGlobalNav:true});if(!s.column_bg||!o.column_bg)return false;if(s.column_bg.toUpperCase()!==o.column_bg.toUpperCase()){n.info("GLOBAL-NAV","Sidebar theme values don't match expected values; fixing the pref");t(Object(we["c"])({pref:"sidebar_theme_custom_values",value:JSON.stringify(o)}));return true}return false}Object(fe["b"])({actions:[gr["setActiveTeam"]],sideEffect:kr});Object(fe["b"])({actions:[Pe["setFullyBooted"]],sideEffect:Or});Object(fe["b"])({actions:[Pe["setFullyBooted"]],sideEffect:Er});var wr=r(214);function Cr(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;var r=Object(re["getChannelById"])(a,t);Object(wr["a"])(r)})}function Sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=a();var i=Object(re["getChannelById"])(n,t.id);Object(wr["f"])(i)}function jr(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(me["isPrivateChannel"])(e))Object(wr["g"])(i()({},e,{is_member:false}));else{var t=Object(re["getChannelById"])(a,e.id);Object(wr["g"])(t)}})}function Ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=t.ids;if(!r||!r.length)return;r.forEach(function(e){Object(wr["e"])(e)})}function Tr(e){var t=e&&e.payload&&e.payload.channels;if(!t||!t.length)return;t.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(wr["k"])(e)})}function Nr(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(re["getChannelById"])(a,e.id);Object(wr["j"])(t,e.purpose.creator,e.purpose.value)})}function Ar(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(re["getChannelById"])(a,e.id);Object(wr["l"])(t,e.topic.userId,e.topic.value)})}function Rr(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(re["getChannelById"])(a,e.id);Object(wr["m"])(t)})}Object(fe["a"])([{actions:[re["addOrReplaceChannels"]],sideEffect:Cr,reasons:[re["CHANNEL_ACTION_REASONS"].ARCHIVE_CHANNEL]},{actions:[re["joinChannel"]],sideEffect:Sr},{actions:[re["addOrReplaceChannels"]],sideEffect:jr,reasons:[re["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]},{actions:[re["removeChannels"]],sideEffect:Ir},{actions:[re["addOrReplaceChannels"]],sideEffect:Tr,reasons:[re["CHANNEL_ACTION_REASONS"].RENAME_CHANNEL]},{actions:[re["addOrReplaceChannels"]],sideEffect:Nr,reasons:[re["CHANNEL_ACTION_REASONS"].SET_PURPOSE]},{actions:[re["addOrReplaceChannels"]],sideEffect:Ar,reasons:[re["CHANNEL_ACTION_REASONS"].SET_TOPIC]},{actions:[re["addOrReplaceChannels"]],sideEffect:Rr,reasons:[re["CHANNEL_ACTION_REASONS"].UNARCHIVE_CHANNEL]}]);var Mr=r(13);var Pr=Object(Mr["c"])("TS.redux.socket.connectedSig.dispatch");var xr=Object(Mr["c"])("TS.redux.socket.disconnectedSig.dispatch");var Dr=Object(Mr["c"])("TS.redux.socket.provisionallyConnectedSig.dispatch");var Fr=Object(Mr["c"])("TS.redux.socket.socketErrorMessageReceivedSig.dispatch");var Lr=Object(Mr["c"])("TS.redux.socket.socketMessageReceivedSig.dispatch");var Br=Object(Mr["c"])("TS.redux.socket.troubleConnectingSig.dispatch");var Ur=Object(Mr["c"])("TS.redux.socket.waitingForRateLimitSig.dispatch");function qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Pr(t)}function Gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Dr(t)}function Hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Fr(t)}function Wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Lr(t)}function Vr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Ur(t)}function zr(){xr.apply(void 0,arguments)}function Qr(){Br.apply(void 0,arguments)}Object(fe["a"])([{actions:[ae["connected"]],sideEffect:qr},{actions:[ae["disconnected"]],sideEffect:zr},{actions:[ae["provisionallyConnected"]],sideEffect:Gr},{actions:[ae["socketErrorMessageReceived"]],sideEffect:Hr},{actions:[ae["socketMessageReceived"]],sideEffect:Wr},{actions:[ae["troubleConnecting"]],sideEffect:Qr},{actions:[ae["waitingForRateLimit"]],sideEffect:Vr}]);var Kr=r(203);var Yr=Object(Mr["c"])("TS.membership.membership_counts_need_refetch_sig.dispatch");var Jr=r(16);function Zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(!t.prevChannelId||t.channelId===t.prevChannelId)return;var n=a();var i=false;var s=Object(re["getChannelById"])(n,t.prevChannelId,i);!Object(me["isMemberOfChannel"])(s)&&Object(me["isPublicChannel"])(s)&&r(Object(Kr["clearMemberCounts"])(t.prevChannelId))}function Xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(t)return;var n=a();var s=Object(de["getPrimaryView"])(n);var o=Object(Kr["getCachedMemberCounts"])(n,s);r(Object(Kr["clearAllMemberCounts"])());s&&o&&r(Object(Kr["addOrReplaceMemberCounts"])({channelId:s,countInfo:i()({},o,{should_refetch:true})}));Yr()}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=a();r(Object(Kr["updateAndInvalidateMemberCounts"])({channelId:t.id,memberCountDelta:1,restrictedMemberCountDelta:Object(Jr["isRestricted"])(Object(pe["getCurrentMember"])(n))?1:0,appCountDelta:0}))}function ea(e,t){var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(Kr["clearMemberCounts"])(e.id))})}Object(fe["a"])([{actions:[ue["setActiveChannel"]],sideEffect:Zr},{actions:[ae["connected"]],sideEffect:Xr},{actions:[re["joinChannel"]],sideEffect:$r},{actions:[re["addOrReplaceChannels"]],sideEffect:ea,reasons:[re["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]}]);function ta(e,t,r){var a=r();var n=void 0;if(e.type===re["addOrReplaceChannels"].getType()){n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return}else e.type===re["joinChannel"].getType()&&(n=[e&&e.payload]);n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object(me["isExternallySharedChannel"])(e)||Object(Jr["isAdmin"])(Object(pe["getCurrentMember"])(a)))return;var r=Object(me["getSharedTeamIds"])(e).reduce(function(e,t){return e.concat(o.a.filter(Object(pe["getAllMembers"])(a),{team_id:t}))},[]);r.length&&t(Object(pe["bulkRemoveMembers"])(r))})}Object(fe["a"])([{actions:[re["joinChannel"]],sideEffect:ta},{actions:[re["addOrReplaceChannels"]],sideEffect:ta,reasons:[re["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]}]);var ra=r(9);var aa=r.n(ra);var na=r(264);function ia(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(!t.prevChannelId||t.channelId===t.prevChannelId)return;var n=a();var i=false;var s=Object(re["getChannelById"])(n,t.prevChannelId,i);!Object(me["isMemberOfChannel"])(s)&&Object(me["isPublicChannel"])(s)&&r(Object(na["clearChannelMembershipInfo"])(t.prevChannelId))}function sa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];t||r(Object(na["clearAllMembershipInfo"])())}function oa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];r(Object(na["clearChannelMembershipInfo"])(t.id));var n=Object(ce["isFeatureEnabled"])(a(),"feature_dont_set_channel_membership_twice");n||r(Object(na["setChannelMembershipInfoForUsers"])({channelId:t.id,membershipInfo:aa()({},Object(ce["getCurrentUserId"])(a()),true)}))}function la(e,t){var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(na["clearChannelMembershipInfo"])(e.id))})}Object(fe["a"])([{actions:[ue["setActiveChannel"]],sideEffect:ia},{actions:[ae["connected"]],sideEffect:sa},{actions:[re["joinChannel"]],sideEffect:oa},{actions:[re["addOrReplaceChannels"]],sideEffect:la,reasons:[re["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]}]);var ca=r(353);var ua=r(135);var da=r(207);var pa=r(883);function ma(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=a();if(!Object(ce["useReactMessages"])(n))return;if(t)return;if(Object(Y["a"])()&&false===navigator.onLine)return;r(Object(Ae["resetReachedEnd"])())}function ha(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=e.payload,i=n.channelId,s=n.append;var o=Object(de["getPrimaryView"])(a);var l=Object(ce["isFeatureEnabled"])(a,"feature_react_threads")&&Object(da["getCurrentThreadKey"])(a);if(!s)return;i!==o&&i!==l&&t(Object(Ae["truncateChannelHistory"])({channelId:i}))}function fa(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=e.payload.prevChannelId;if(!n)return;var i=Object(de["getPrimaryView"])(a);if(i===n)return;var s=Object(re["getChannelById"])(a,n);if(!s)return;var o=Object(re["getChannelById"])(a,i);if(o&&Object(me["isPublicChannel"])(o)&&!Object(me["isMemberOfChannel"])(o)){var l=[i];t(Object(ua["e"])({ids:l})).then(function(){return Object(pa["b"])()})}else if(o&&Object(me["isPublicChannel"])(o)&&!Object(me["isMemberOfChannel"])(o)){var c="message-history/onChannelChange";t(Object(ua["h"])({channelId:i,noMembers:true,reason:c})).then(function(e){if(!e||!e.channel)return;t(Object(ca["G"])({channel:e.channel}));Object(pa["b"])()})}Object(me["isArchived"])(s)||Object(me["isPublicChannel"])(s)&&!Object(me["isMemberOfChannel"])(s)?t(Object(Ae["removeAllTimestamps"])({channelId:n})):t(Object(Ae["truncateChannelHistory"])({channelId:n}))}function va(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(e){if(!e)return;t(Object(Ae["removeAllTimestamps"])({channelId:e.id,includeThreads:Object(ce["isFeatureEnabled"])(a,"feature_react_threads")}))})}function ba(e,t,r){var a=void 0;e.type===re["removeChannels"].getType()?a=e&&e.payload&&e.payload.ids:e.type===ca["o"].getType()&&(a=[e&&e.payload&&e.payload.id]);if(!a||!a.length)return;var n=r();if(!Object(ce["useReactMessages"])(n))return;a.forEach(function(e){if(!e)return;t(Object(Ae["removeAllTimestamps"])({channelId:e,includeThreads:Object(ce["isFeatureEnabled"])(n,"feature_react_threads")}));t(Object(Me["removeAllMessages"])({channelId:e}))})}Object(fe["b"])({actions:[Ae["addTimestamps"]],sideEffect:ha});Object(fe["b"])({actions:[ue["setActiveChannel"]],sideEffect:fa});Object(fe["b"])({actions:[re["addOrReplaceChannels"]],sideEffect:va,reasons:[re["CHANNEL_ACTION_REASONS"].ARCHIVE_CHANNEL,re["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]});Object(fe["b"])({actions:[re["removeChannels"],ca["o"]],sideEffect:ba});Object(fe["b"])({actions:[ae["connected"]],sideEffect:ma});var ga=r(346);var _a=r(755);function ya(){Object(_a["a"])()}Object(fe["b"])({actions:[ga["stopEditingMessage"]],sideEffect:ya});var ka=r(336);var Oa=r(659);var Ea=r(31);var wa=r(25);var Ca=r(22);var Sa=Object(Ca["a"])("Check to see whether we need to reload",function(e,t,r){var a=t();if(lt["isJsPath"])return Promise.resolve(new Error("Cannot check whether to reload when using js_path"));var n=Object(ce["getFromBootData"])(a,"version_ts");var i=r.reason||"unknown";return e(Object(wa["a"])({method:"rtm.shouldReload",args:{version_ts:n,reason:i}}))});Sa.propTypes={reason:Ot["b"].string};var ja=r(459);var Ia=void 0;function Ta(){"undefined"===typeof Ia&&(Ia=Object(J["a"])(100));return Ia}var Na={};var Aa={};var Ra=false;var Ma=27e5;var Pa=2e4;var xa="MIN-VERSION";var Da=Object(Ea["b"])("Calls rtm.shouldReload and possibly reloads",function(e,t){if(Ra)return;var r=t();var a=Object(Q["getTeamId"])(r);Aa[a]=Date.now();Object(z["a"])({getState:t}).info(xa,"checking to see if we should reload");Ta()&&Object(Z["c"])("mvp_m_check");e(Sa({reason:"polling"})).then(function(e){if(!e||!e.should_reload){Object(z["a"])({getState:t}).info(xa,"no need to reload");return}if(Ra)return;Ra=true;if(!document.hasFocus()){Ta()&&Object(Z["c"])("mvp_m_shouldreload_immediate");var r="rtm.shouldReload told us to reload, and the window is not currently focused";Object(z["a"])({getState:t}).info(xa,r);Object(ja["b"])({reason:r});return}Ta()&&Object(Z["c"])("mvp_m_shouldreload_will_defer");Object(z["a"])({getState:t}).info(xa,"rtm.shouldReload told us to reload; will reload next time the window loses focus");var a=false;var n=void 0;var i=false;window.addEventListener("blur",function(){if(a)return;n&&clearTimeout(n);n=setTimeout(function(){if(document.hasFocus())return;a=true;Ta()&&Object(Z["c"])("mvp_m_shouldreload_did_defer");var e="rtm.shouldReload told us to reload earlier, and the window lost focus";Object(z["a"])({getState:t}).info(xa,e);Object(ja["b"])({reason:e})},Pa)},i)}).catch(function(){Object(z["a"])({getState:t}).warn(xa,"rtm.shouldReload check failed; ignoring since we will try again later")})});function Fa(e,t,r){var a=r();var n=Object(Q["getTeamId"])(a);if(!Na[n]){var i=Object(Oa["a"])(Ma,.8,1.2);Na[n]=setInterval(function(){t(Da())},i);Object(V["exportToTeamDebugger"])(n,"minVersionPoll",{checkNow:function e(){return t(Da())},getLastPollTime:function e(){return Aa[n]},getShouldReloadOnBlur:function e(){return Ra},timer:Na[n]})}}Object(fe["b"])({actions:[ka["start"]],sideEffect:Fa});var La=r(366);var Ba=r(50);var Ua=r(717);var qa=r(48);function Ga(e,t,r){var a=r();if(!Object(Se["b"])(a))return;var n=e.payload&&e.payload.history;if(!n)return;window.desktop&&window.desktop.deviceStorage&&window.desktop.deviceStorage.setItem("navigation-history",JSON.stringify(n))}function Ha(e,t,r){var a=r();if(!Object(Se["b"])(a))return;if(!Object(te["a"])()&&e.type===de["setRecentlyFocusedWorkspaces"].getType())return;var n=Object(de["getPrimaryView"])(a);var i=Object(Ba["getCurrentTeam"])(a);var o=e.type===de["setRecentlyFocusedWorkspaces"].getType()?i.id===e.payload[0]:i.id===e.payload;Object(z["a"])({getState:r}).info("WORKSPACE-FOCUS","workspace focus state changed to "+o);if(!i||!o){t(Object(La["setLoaded"])(false));return}t(Object(Ua["f"])()).then(function(){t(Object(Ua["e"])({viewId:n,viewName:Object(me["getDisplayName"])(Object(re["getChannelById"])(a,n)),teamId:i.id,teamName:Object(qa["getTeamDisplayName"])(i),teamIcon:Object(s["get"])(i,"icon.image_44")}))})}Object(fe["b"])({actions:[La["updateNavigationHistory"]],sideEffect:Ga});Object(fe["b"])({actions:[gr["setActiveTeam"]],sideEffect:Ha});Object(fe["b"])({actions:[de["setRecentlyFocusedWorkspaces"]],sideEffect:Ha});var Wa=r(464);var Va=r(159);var za=new wt["b"]("offline_mode");function Qa(e){var t=e.clientLastOnline,r=e.channelHasHistory,a=e.onCloseComplete,n=e.featureOfflineMode;if(!n)return null;var i=r?za.rt("Last updated {clientLastOnline}.",{clientLastOnline:Object(wt["n"])(Object(Wa["a"])(t))}):za.rt("Go online to get the latest messages.");return rt.a.createElement(Ct["b"],{ariaAssertive:true,position:"top-right",toastClasses:"c-toast--inverted",icon:"cloud-offline-small",onCloseComplete:a},rt.a.createElement("span",null,rt.a.createElement("strong",null,za.rt("No connection."))," ",i))}Qa.displayName="OfflineChannelToast";var Ka=Object(Va["a"])("feature_offline_mode")(Qa);var Ya=Object(at["e"])("shows a toast indicating when the client was last connected",function(e,t,r){var a=r.channelId;var n=t();var i=Object(Ze["timeOfLastClientConnection"])(n)/1e3;var s=Object(Ae["channelHasAnyHistory"])(n,a);var o=rt.a.createElement(Ka,{clientLastOnline:i,channelHasHistory:s});e(Object(nt["enqueueToast"])({element:o}))});Ya.propTypes={channelId:Ot["b"].string.isRequired};var Ja=Ka;function Za(e,t,r){var a=r();if(!Object(ce["isFeatureEnabled"])(a,"feature_offline_mode"))return;if(!Object(Y["a"])())return;if(Object(Ze["isClientOnline"])(a))return;var n=Object(de["getPrimaryView"])(a);if(!Object(Le["a"])(n))return;t(Ya({channelId:n}))}Object(fe["b"])({actions:[ue["setActiveChannel"]],sideEffect:Za});var Xa=r(933);var $a=r(3507);var en=r(716);var tn="PRESENCE-MANAGER";var rn=function e(t,r,a){if(!Object(te["a"])()&&!Object(ce["isFeatureEnabled"])(a(),"feature_sonic_presence_manager"))return;var n=Object(Q["getTeamId"])(a());var i=Object(en["b"])(n);if(!i||Object(s["isEmpty"])(i))return;Object(z["a"])({getState:a}).debug(tn,"Sending the presence subscription after establishing a websocket connection");r(Object(en["d"])())};Object(fe["b"])({actions:[ae["connected"]],sideEffect:rn});var an=r(313);function nn(){Object(an["f"])()}Object(fe["b"])({actions:[ae["unexpectedSocketClosure"]],sideEffect:nn});var sn=r(271);var on=r(94);var ln=r(2963);var cn=r(2180);function un(e,t){t(Object(sn["h"])(Object(sn["a"])(e.room)))}Object(Jt["b"])("sh_room_join",un);Object(Jt["b"])("sh_room_leave",un);Object(Jt["b"])("sh_room_update",un);Object(Jt["b"])("screenhero_invite",function(e,t,r){if(!Object(te["a"])())return;var a=r();var n=Object(on["f"])(a,e.channel);if(Object(cn["a"])(a,n))return;t(Object(ln["b"])(e))});var dn=r(315);function pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.is_uninstall,r=e.app_id;var a=arguments[1];var n=arguments[2];if(!r)return;Object(ce["isFeatureEnabled"])(n(),"feature_app_actions_fe_refactor")?a(t?Object(dn["removeActionsForAppIds"])([r]):Object(dn["markAsStale"])([r])):a(t&&r?Object(dn["uninstallAppActions"])([r]):Object(dn["deprecatedMarkAsStale"])())}Object(Jt["b"])("app_actions_updated",pn);var mn=r(29);var hn=r(663);var fn=r(177);var vn=r(888);var bn=r(226);var gn=function e(){ft()(this,e);var t={};t.promise=new Promise(function(e,r){t.resolve=e;t.reject=r});return t};var _n=gn;var yn=r(615);var kn={invalidSubmission:"invalid_submission"};var On=Object(Ca["a"])("fetch a dialog that has been pushed by an app",function(e,t,r){var a=e(Object(wa["a"])({method:"dialog.get",args:{dialog_id:r}})).then(function(e){var t=e.dialog,r=void 0===t?{}:t;return Object(bn["b"])(r)});return Sn(a)});On.propTypes=Ot["b"].string;var En=Object(Ca["a"])("submit and app generated dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.dialogId,n=r.submission;var i={dialog_id:a,submission:JSON.stringify(n)};var s=e(Object(wa["a"])({method:"dialog.submit",args:i})).catch(function(e){var t=e.data||{};var r=new Error(e.message);r.data={error:t.error,dialogErrors:t.dialog_errors};throw r});return Sn(s)});En.propTypes={dialogId:Ot["b"].string,submission:Ot["b"].object};var wn=Object(Ca["a"])("notify an app that the dialog it generated has been canceled",function(e,t,r){return e(Object(wa["a"])({method:"dialog.notifyCancel",args:{dialog_id:r}}))});wn.propTypes=Ot["b"].string;var Cn=Object(Ca["a"])("fetch select options from a third party app based on a search query",function(e,t,r){var a=r.dialogId,n=r.inputName,i=r.value;return e(Object(wa["a"])({method:"dialog.selectSuggestion",args:Object(yn["a"])({dialogId:a,name:n,value:i})})).then(function(e){var t=e.option_groups,r=e.options;if(t)return{optionGroups:t};if(r)return{options:r};return{options:[]}})});Cn.propTypes={dialogId:Ot["b"].string.isRequired,inputName:Ot["b"].string.isRequired,value:Ot["b"].string.isRequired};function Sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;var r=new _n;e.then(r.resolve,r.reject);setTimeout(function(){if(e.isPending()){e.cancel();var a=new Error("Maximum timeout ("+t+"ms) exceeded.");r.reject(a)}},t);return r.promise}var jn=r(108);var In=r(877);var Tn=r(247);var Nn=r(164);var An=r(421);function Rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.reduce(function(e,t){return i()({},e,aa()({},t.name,t.error))},{})}var Mn={formatErrors:Rn};var Pn=r(15);var xn=r.n(Pn);var Dn=r(104);var Fn=r(92);var Ln=r(76);var Bn=r(118);var Un={align:Ot["b"].oneOf(Object(s["values"])(Bn["a"])),message:Ot["b"].node.isRequired,type:Ot["b"].oneOf(Object(s["values"])(Bn["c"]))};var qn={align:Bn["a"].left,type:Bn["c"].boxed};function Gn(e){var t=e.align,r=e.message,a=e.type;return rt.a.createElement(Bn["d"],{type:a,align:t,level:Bn["b"].error},r)}Gn.displayName="AppDialogError";Gn.defaultProps=qn;var Hn=Object(Ln["pure"])(Gn);var Wn=r(88);var Vn=r(785);function zn(e,t){return e+"_"+t.name}function Qn(e,t,r){return e+"_"+t.name+"_"+r}function Kn(e,t,r){return zn(e,t)+"_"+r.value}var Yn={dialogId:Ot["b"].string.isRequired,error:Ot["b"].string,input:Ot["b"].object.isRequired,isSubmitting:Ot["b"].bool,onBlur:Ot["b"].func.isRequired,onChange:Ot["b"].func.isRequired,onFocus:Ot["b"].func.isRequired,fetchSelectSuggestionDialog:Ot["b"].func.isRequired,value:Ot["b"].string,featureBotsNotMembers:Ot["b"].bool};var Jn={error:null,isSubmitting:false,value:"",featureBotsNotMembers:false};var Zn=function(e){kt()(t,e);function t(e){ft()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.optionsFetcher=r.optionsFetcher.bind(r);return r}bt()(t,[{key:"getLabelId",value:function e(){var t=this.props,r=t.dialogId,a=t.input;return Qn(r,a,"label")}},{key:"optionsFetcher",value:function e(t){var r=this.props,a=r.dialogId,n=r.input;return this.props.fetchSelectSuggestionDialog({dialogId:a,inputName:n.name,value:t})}},{key:"renderSelect",value:function e(){var t=this.props,r=t.dialogId,a=t.error,n=t.featureBotsNotMembers,i=t.input,s=t.isSubmitting,o=t.onBlur,l=t.onChange,c=t.onFocus,u=t.value;var d=zn(r,i);var p=this.getLabelId();var m={id:d,isSubmitting:s,labelId:p,onBlur:o,onChange:l,onFocus:c,value:u,dialogId:r,dataSource:i.data_source,includeApps:!n,minQueryLength:i.min_query_length,optionsFetcher:this.optionsFetcher,options:i.options,optionGroups:i.option_groups,isDisabled:i.is_disabled,isRequired:i.is_required,hintText:i.hint,errorText:a,name:i.name,placeholder:i.placeholder,ref:this.setRef,selectedOptions:i.selected_options};return rt.a.createElement(Vn["a"],m)}},{key:"render",value:function e(){var t=this.props,r=t.dialogId,a=t.input,n=t.isSubmitting;var i=zn(r,a);var s=this.getLabelId();var o=xn()({"c-label--disabled":a.disabled||n});return rt.a.createElement(Wn["a"],{className:o,htmlFor:i,id:s,key:a.name,text:a.label,optional:!!a.optional},this.renderSelect())}}]);return t}(rt.a.Component);Zn.displayName="AppDialogInputSelect";var Xn=function e(t){return{featureBotsNotMembers:Object(ce["isFeatureEnabled"])(t,"feature_bots_not_members")}};var $n={fetchSelectSuggestionDialog:Cn};Zn.defaultProps=Jn;var ei=Object(Et["connect"])(Xn,$n,null,{withRef:true})(Zn);var ti=r(190);var ri={error:Ot["b"].string,dialogId:Ot["b"].string.isRequired,input:Ot["b"].object.isRequired,isSubmitting:Ot["b"].bool,onBlur:Ot["b"].func.isRequired,onChange:Ot["b"].func.isRequired,onFocus:Ot["b"].func.isRequired,value:Ot["b"].string};var ai={error:null,isSubmitting:false,value:""};var ni=function(e){kt()(t,e);function t(){ft()(this,t);return _t()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}bt()(t,[{key:"render",value:function e(){var t=this.props,r=t.error,a=t.dialogId,n=t.input,i=t.isSubmitting,s=t.onBlur,o=t.onChange,l=t.onFocus,c=t.value;var u=zn(a,n);var d=Qn(a,n,"label");var p=xn()({"c-label--disabled":n.disabled||i});return rt.a.createElement(Wn["a"],{className:p,htmlFor:u,id:d,key:n.name,text:n.label,optional:!!n.optional},rt.a.createElement(ti["a"],{autoComplete:"off",labelId:d,isDisabled:n.disabled||i,errorText:r,hintText:n.hint,id:u,isRequired:!n.optional,name:n.name,onBlur:s,onChange:o,onFocus:l,placeholder:n.placeholder,type:"text",value:c}))}}]);return t}(rt.a.Component);ni.displayName="AppDialogInputText";var ii=ni;ni.defaultProps=ai;var si=r(811);var oi={dialogId:Ot["b"].string.isRequired,error:Ot["b"].string,input:Ot["b"].object.isRequired,isSubmitting:Ot["b"].bool,onBlur:Ot["b"].func.isRequired,onChange:Ot["b"].func.isRequired,onFocus:Ot["b"].func.isRequired,value:Ot["b"].string};var li={error:null,isSubmitting:false,value:""};function ci(e){var t=e.dialogId,r=e.error,a=e.input,n=e.isSubmitting,i=e.onBlur,s=e.onChange,o=e.onFocus,l=e.value;var c=zn(t,a);var u=Qn(t,a,"label");var d=xn()({"c-label--disabled":a.disabled||n});return rt.a.createElement(Wn["a"],{className:d,htmlFor:c,key:a.name,id:u,text:a.label,optional:!!a.optional},rt.a.createElement(si["a"],{autoComplete:"off",labelId:u,isDisabled:a.disabled||n,errorText:r,hintText:a.hint,id:c,isRequired:!a.optional,name:a.name,maxCharacterLimit:a.max_length,onBlur:i,onChange:s,onFocus:o,placeholder:a.placeholder,value:l}))}ci.displayName="AppDialogInputTextarea";ci.defaultProps=li;var ui={select:"select",text:"text",textarea:"textarea"};var di={error:Ot["b"].string,dialogId:Ot["b"].string.isRequired,input:Ot["b"].object.isRequired,isSubmitting:Ot["b"].bool,onBlur:Ot["b"].func.isRequired,onChange:Ot["b"].func.isRequired,onFocus:Ot["b"].func.isRequired,value:Ot["b"].string};var pi={error:null,isSubmitting:false,value:""};var mi=function(e){kt()(t,e);function t(){ft()(this,t);return _t()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}bt()(t,[{key:"render",value:function e(){var t=this.props,r=t.error,a=t.dialogId,n=t.input,i=t.isSubmitting,s=t.onBlur,o=t.onChange,l=t.onFocus,c=t.value;var u={error:r,dialogId:a,input:n,isSubmitting:i,onBlur:s,onChange:o,onFocus:l,value:c};switch(n.type){case ui.select:return rt.a.createElement(ei,u);case ui.text:return rt.a.createElement(ii,u);case ui.textarea:return rt.a.createElement(ci,u);default:return}}}]);return t}(rt.a.Component);mi.displayName="AppDialogInput";var hi=mi;mi.defaultProps=pi;var fi;var vi=new wt["b"]("app_dialog");var bi=(fi={},aa()(fi,ui.text,150),aa()(fi,ui.textarea,3e3),fi);var gi={maxLength:"maxLength",minLength:"minLength",required:"required"};function _i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case gi.maxLength:return vi.t("You can't enter more than {maxLength, plural, =1 {# character} other {# characters}}.",t);case gi.minLength:return vi.t("You must enter at least {minLength, plural, =1 {# character} other {# characters}}.",t);case gi.required:return vi.t("This field is required.");default:break}return null}function yi(e){var t=e.elements,r=e.lastActiveElementName,a=e.touchedElements,n=e.values;return t.reduce(function(e,t){var o=n[t.name];var l=r===t.name;var c=!t.optional&&!o&&!l;var u=Object(s["includes"])([ui.text,ui.textarea],t.type);var d=Math.max(t.min_length,0);var p=Object(s["isNumber"])(d)&&Object(s["get"])(o,"length",0)<d;var m=!o&&l;var h=!o&&t.optional;var f=u&&p&&!m&&!h;var v=Math.min(t.max_length,bi[t.type]);var b=v&&Object(s["get"])(o,"length")>v;var g=u&&b;if(!a[t.name])return e;if(c)return i()({},e,aa()({},t.name,_i(gi.required)));if(f)return i()({},e,aa()({},t.name,_i(gi.minLength,{minLength:d})));if(g)return i()({},e,aa()({},t.name,_i(gi.maxLength,{maxLength:v})));return e},{})}var ki={validate:yi};var Oi=r(2065);var Ei=new wt["b"]("app_dialog");var wi={id:Ot["b"].string.isRequired,elements:Ot["b"].array,isLoading:Ot["b"].bool,isSubmitting:Ot["b"].bool,loadingFailed:Ot["b"].bool,serverErrors:Ot["b"].object,submittingFailed:Ot["b"].bool,onLoadRetried:Ot["b"].func.isRequired,onSubmit:Ot["b"].func.isRequired,onSubmitRetried:Ot["b"].func.isRequired};var Ci={elements:[],serverErrors:{},isLoading:false,isSubmitting:false,loadingFailed:false,submittingFailed:false};var Si=300;var ji=3;var Ii=function(e){kt()(t,e);function t(e){ft()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={errors:{},lastActiveElementName:null,touchedElements:{},values:{}};Object(s["bindAll"])(r,["onInputBlurred","onInputChanged","onInputFocused","setFirstElementRef","submit","updateErrors"]);r.updateErrors=Object(s["debounce"])(r.updateErrors,Si);return r}bt()(t,[{key:"componentWillReceiveProps",value:function e(t){var r=!t.isLoading&&this.props.isLoading;if(r){var a=t.elements.reduce(function(e,t){return i()({},e,aa()({},t.name,t.value))},{});this.setState(function(){return{values:Object(s["omitBy"])(a,s["isUndefined"])}})}}},{key:"componentDidUpdate",value:function e(t){var r=!this.props.isLoading&&t.isLoading;var a=!this.props.isSubmitting&&t.isSubmitting;if(this.firstElement&&(r||a)){var n=Object(Dn["findDOMNode"])(this.firstElement);n&&n.focus()}}},{key:"onInputBlurred",value:function e(){this.setState(function(){return{lastActiveElementName:null}})}},{key:"onInputFocused",value:function e(){var t=this;this.setState(function(e){return{errors:yi({elements:t.props.elements,lastActiveElementName:e.lastActiveElementName,touchedElements:e.touchedElements,values:e.values})}})}},{key:"onInputChanged",value:function e(t,r){var a=this;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.setTouched,o=void 0===s||s;this.setState(function(e){var n=t;var s=i()({},e.touchedElements,aa()({},t,o));var l=i()({},e.values,aa()({},t,r));var c=yi({elements:a.props.elements,lastActiveElementName:n,touchedElements:s,values:l});var u={lastActiveElementName:n,touchedElements:s,values:l};return c[t]?u:i()({},u,{errors:c})});this.updateErrors()}},{key:"getElementError",value:function e(t){var r=!this.state.touchedElements[t]&&this.props.serverErrors[t];return r||this.state.errors[t]||null}},{key:"getGeneralError",value:function e(t){return Ei.rt("We had some trouble connecting. <a>Try again?</a>",null,function(e){var r=e.text;return rt.a.createElement("button",{className:"c-deprecated_button--link",onClick:t},r)})}},{key:"getShouldShowSpeedBump",value:function e(t){var r=this.state,a=r.touchedElements,n=r.values;if("go"!==t)return Object(s["some"])(this.props.elements,function(e){var t=e.name,r=e.type;if(!a[t])return false;var i=n[t];if(r===ui.text||r===ui.textarea)return Object(s["get"])(i,"length",0)>=ji;return!!i});return false}},{key:"setFirstElementRef",value:function e(t){this.firstElement=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"bindArgs",value:function e(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return t.bind.apply(t,[this].concat(a))}},{key:"updateErrors",value:function e(){var t=this;this.setState(function(e){return{errors:yi({elements:t.props.elements,lastActiveElementName:e.lastActiveElementName,touchedElements:e.touchedElements,values:e.values})}})}},{key:"maybeRenderGeneralError",value:function e(){if(this.props.submittingFailed)return rt.a.createElement(Hn,{message:this.getGeneralError(this.props.onSubmitRetried)});return null}},{key:"submit",value:function e(){var t=this;var r=null;var a=this.props.elements.reduce(function(e,t){return i()({},e,aa()({},t.name,true))},{});var n=yi({elements:this.props.elements,lastActiveElementName:r,touchedElements:a,values:this.state.values});this.setState(function(){return{errors:n,lastActiveElementName:r,touchedElements:a}});if(!Object(s["isEmpty"])(n)){var o=new Error("Validation failed.");return Promise.reject(o)}return this.props.onSubmit(this.props.id,this.state.values).finally(function(){return t.setState(function(){return{touchedElements:{}}})})}},{key:"renderDialogElements",value:function e(){var t=this;return rt.a.createElement("form",{onSubmit:function e(t){t.preventDefault()}},this.props.elements.map(function(e,r){return rt.a.createElement(hi,{error:t.getElementError(e.name),dialogId:t.props.id,input:e,isSubmitting:t.props.isSubmitting,key:e.name,onBlur:t.onInputBlurred,onChange:t.bindArgs(t.onInputChanged,e.name),onFocus:t.onInputFocused,ref:0===r?t.setFirstElementRef:null,value:t.state.values[e.name]})}))}},{key:"render",value:function e(){var t=this.props,r=t.isLoading,a=t.isSubmitting,n=t.loadingFailed,i=t.onLoadRetried;var s=xn()("p-app_dialog_elements",{"p-app_dialog_elements--empty":r||n},{"p-app_dialog_elements--submitting":a});var o=void 0;o=r?rt.a.createElement(Fn["a"],{size:"jumbo"}):n?rt.a.createElement(Hn,{message:this.getGeneralError(i),align:"center"}):this.renderDialogElements();return rt.a.createElement("div",{className:s},this.maybeRenderGeneralError(),o)}}]);return t}(tt["Component"]);Ii.displayName="BaseAppDialogElements";Ii.defaultProps=Ci;var Ti=Object(hn["a"])(Ii);var Ni=Ti;var Ai={fetcher:Ot["b"].func.isRequired,id:Ot["b"].string.isRequired,onFetchRejected:Ot["b"].func,onFetchResolved:Ot["b"].func,onSubmitRetried:Ot["b"].func,submitter:Ot["b"].func.isRequired};var Ri={onFetchRejected:s["noop"],onFetchResolved:s["noop"],onSubmitRetried:s["noop"]};var Mi=function(e){kt()(t,e);function t(e){ft()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={errors:{},isLoading:true};Object(s["bindAll"])(r,["onFetchRejected","onFetchResolved","onSubmit","onSubmitRejected","onSubmitResolved","retryLoad","setDialogElementsRef"]);return r}bt()(t,[{key:"componentDidMount",value:function e(){this.state.isLoading&&this.load()}},{key:"onFetchRejected",value:function e(){this.setState(function(){return{isLoading:false,loadingFailed:true}},this.props.onFetchRejected)}},{key:"onFetchResolved",value:function e(t){var r=this;this.setState(function(){return{elements:t.elements,isLoading:false,loadingFailed:false}},function(){r.props.onFetchResolved(t)})}},{key:"onSubmitRejected",value:function e(t){var r=t.data||{};var a={isSubmitting:false};r.error===kn.invalidSubmission?a.errors=Rn(r.dialogErrors):a.submittingFailed=true;this.setState(function(){return a});throw t}},{key:"onSubmitResolved",value:function e(){this.setState(function(){return{errors:{},isSubmitting:false,submittingFailed:false}})}},{key:"onSubmit",value:function e(t,r){this.setState(function(){return{isSubmitting:true}});return this.props.submitter({dialogId:t,submission:r}).then(this.onSubmitResolved).catch(this.onSubmitRejected)}},{key:"getShouldShowSpeedBump",value:function e(t){return"go"!==t&&(!!this.dialogElements&&this.dialogElements.getShouldShowSpeedBump())}},{key:"setDialogElementsRef",value:function e(t){this.dialogElements=t;this.dialogElements&&this.dialogElements.getWrappedInstance&&(this.dialogElements=this.dialogElements.getWrappedInstance())}},{key:"load",value:function e(){this.props.fetcher(this.props.id).then(this.onFetchResolved).catch(this.onFetchRejected)}},{key:"retryLoad",value:function e(){this.setState(function(){return{isLoading:true}},this.load)}},{key:"submit",value:function e(){return this.dialogElements.submit()}},{key:"render",value:function e(){return rt.a.createElement(Ni,{id:this.props.id,serializationKey:"app-dialog-elements",elements:this.state.elements,serverErrors:this.state.errors,isLoading:this.state.isLoading,isSubmitting:this.state.isSubmitting,loadingFailed:this.state.loadingFailed,onLoadRetried:this.retryLoad,onSubmitRetried:this.props.onSubmitRetried,onSubmit:this.onSubmit,ref:this.setDialogElementsRef,submittingFailed:this.state.submittingFailed})}}]);return t}(tt["Component"]);Mi.displayName="AppDialogElementsContainer";var Pi=function e(t,r){var a=r.fetcher,n=r.submitter;return{fetcher:a||function(e){return t(On(e))},submitter:n||function(e){return t(En(e))}}};Mi.defaultProps=Ri;var xi=Object(hn["a"])(Mi);var Di=Object(Et["connect"])(null,Pi,null,{withRef:true})(xi);var Fi=Di;var Li=r(2067);var Bi=new wt["b"]("app_dialog");var Ui={appId:Ot["b"].string.isRequired,app:Ot["b"].object,featureAppDialogsNotifyOnCancel:Ot["b"].bool,fetcher:Ot["b"].func,id:Ot["b"].string.isRequired,notifyCancel:Ot["b"].func.isRequired,onClose:Ot["b"].func,submitLabel:Ot["b"].string,submitter:Ot["b"].func,title:Ot["b"].string.isRequired,clogger:Ot["b"].object.isRequired};var qi={app:{isNonExistent:true},featureAppDialogsNotifyOnCancel:false,fetcher:null,onClose:s["noop"],submitLabel:Bi.t("Submit"),submitter:null};var Gi=function(e){kt()(t,e);function t(e){ft()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={goButtonIsDisabled:true,goButtonIsPending:false,shouldNotifyOnCancel:false};Object(s["bindAll"])(r,["getShouldShowSpeedBump","onFetchResolved","onSubmitRejected","onSubmitResolved","onClose","onGo","onKeyPressedCmdEnter","renderTitle","setElementsContainerRef"]);return r}bt()(t,[{key:"componentDidMount",value:function e(){this.track("opened");this.keyCommands=new fn["a"];this.keyCommands.bindAll([{keys:["command+enter"],handler:this.onKeyPressedCmdEnter}])}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset()}},{key:"onFetchResolved",value:function e(t){var r=t.notifyOnCancel;this.setState(function(){return{goButtonIsDisabled:false,shouldNotifyOnCancel:r}})}},{key:"onSubmitRejected",value:function e(){this.setState(function(){return{goButtonIsPending:false}})}},{key:"onSubmitResolved",value:function e(){this.setState(function(){return{goButtonIsPending:false}},this.props.onClose)}},{key:"onClose",value:function e(){var t=this.props,e=t.onClose,r=t.id,a=t.featureAppDialogsNotifyOnCancel,n=t.notifyCancel;var i=this.state.shouldNotifyOnCancel;i&&a&&n(r);this.track("cancelled");Object(s["defer"])(e)}},{key:"onKeyPressedCmdEnter",value:function e(){this.onGo()}},{key:"onGo",value:function e(){this.setState(function(){return{goButtonIsPending:true}});this.elementsContainer.submit().then(this.onSubmitResolved).catch(this.onSubmitRejected)}},{key:"getShouldShowSpeedBump",value:function e(t){return"go"!==t&&(!!this.elementsContainer&&this.elementsContainer.getShouldShowSpeedBump())}},{key:"setElementsContainerRef",value:function e(t){this.elementsContainer=t&&t.getWrappedInstance();this.elementsContainer&&this.elementsContainer.getWrappedInstance&&(this.elementsContainer=this.elementsContainer.getWrappedInstance())}},{key:"track",value:function e(t){var r=this.props,a=r.appId,n=r.id,i=r.clogger;i.track("APP_DIALOG_"+t.toUpperCase(),{app_id:a,dialog_id:n,contexts:{core:{app_id:a}}})}},{key:"renderTitle",value:function e(){var t=this.props.app;var r=Object(An["a"])(t,72);var a=Bi.t("Header Icon");return rt.a.createElement("div",{className:"p-app_dialog__title"},rt.a.createElement("img",{alt:a,className:"p-app_dialog__title_icon",src:r}),rt.a.createElement("div",{className:"p-app_dialog__title_text"},this.props.title))}},{key:"render",value:function e(){var t=this.props,r=t.appId,a=t.app;var n="/apps/"+r;var i=void 0;i=Object(jn["b"])(a)?a.name:Object(jn["d"])(a)?rt.a.createElement(vn["a"],{type:"unknown"}):rt.a.createElement(vn["a"],{type:"non-existent"});var s=Bi.rt("Learn more about {appName}",{appName:i});var o=this.props,l=o.fetcher,c=o.id,u=o.submitLabel,d=o.submitter,p=o.title;var m=this.state,h=m.goButtonIsDisabled,f=m.goButtonIsPending;return rt.a.createElement(Mt["a"],{contentLabel:p,className:"p-app_dialog",footerIcon:"question-circle",footerLink:n,footerText:s,getShouldShowSpeedBump:this.getShouldShowSpeedBump,goButtonIsDisabled:f||h,goButtonIsPending:f,goButtonText:u,goOnEnterPressed:false,onClose:this.onClose,onGo:this.onGo,shouldCloseOnGo:false,title:this.renderTitle()},rt.a.createElement(Fi,{fetcher:l,id:c,serializationKey:"app-dialog-elements-container-"+c,onFetchResolved:this.onFetchResolved,onSubmitRetried:this.onGo,ref:this.setElementsContainerRef,submitter:d}))}}]);return t}(tt["Component"]);Gi.displayName="AppDialog";Gi.defaultProps=qi;var Hi=function e(t,r){if(Object(ce["isFeatureEnabled"])(t,"feature_apps_store_m11n"))return Object(Tn["getAppById"])(t,r);return Object(In["a"])(r)};var Wi=function e(t,r){var a=r.appId;return{app:Hi(t,a),featureAppDialogsNotifyOnCancel:Object(ce["isFeatureEnabled"])(t,"feature_app_dialogs_notify_on_cancel"),clogger:Object(Nn["a"])({state:t})}};var Vi={notifyCancel:wn};var zi=Gi;var Qi=Object(hn["a"])(Gi);var Ki=Object(Et["connect"])(Wi,Vi)(Qi);var Yi=Ki;var Ji=Object(Ea["b"])("Opens app dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=rt.a.createElement(Yi,i()({},r,{serializationKey:"app-dialog",onClose:function t(){return e(Object(it["closeModal"])())}}));e(Object(it["openModal"])({element:a}))});Ji.propTypes={appId:Ot["b"].string.isRequired,id:Ot["b"].string.isRequired,submitLabel:Ot["b"].string,title:Ot["b"].string.isRequired};var Zi=Ji;var Xi=r(419);var $i=function e(t,r){var a=t.app_id,n=t.client_token,i=t.dialog_id,s=t.dialog_submit_label,o=t.dialog_title,l=t.timeout_range;if(!Xi["a"].check(n))return;var c=Xi["a"].getTimeDelta(n),u=c.delta,d=c.nowTs,p=c.tokenTs;Object(Nn["a"])().track(mn["j"].APP_DIALOG_OPEN_ATTEMPTED,{app_id:a,dialog_id:i,dialog_client_token_ts:p,dialog_ms_event_received_ts:d});if(u>=l)return;r(Zi({appId:a,id:i,submitLabel:s,title:o}))};Object(Jt["b"])("dialog_opened",$i);var es=r(677);var ts=Object(Mr["c"])("TS.client.channel_page.handleAppChannelMembershipChange");var rs=Object(Mr["c"])("TS.client.channel_page.handleAppWildcardChange");var as=r(243);var ns=r(872);var is=r(3407);var ss="app_wildcard_added";var os="app_wildcard_removed";var ls="app_permission_request";var cs="app_permission_user_request";var us="app_conversation_invite_request";var ds="channel";function ps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,r=e.type;var a=arguments[1];var n=arguments[2];var o=n();var l=r===ss;var c=Object(de["getPrimaryView"])(o);var u=Object(Le["a"])(c)&&c;var d=Object(re["isChannelExistent"])(o,u)&&Object(re["getChannelById"])(o,u);var p=Object(s["cloneDeep"])(Object(Kr["getCachedMemberCounts"])(o,u));var m=Object(na["getChannelMembershipInfoForUser"])(o,u,t);var h=Object(me["isPublicChannel"])(d)&&m.isKnown&&l!==m.isMember;a(Object(na["clearAllMembershipInfoForUser"])(t));a(Object(Kr["clearAllMemberCounts"])());if(h&&p&&p.counts){var f=Object(s["get"])(p,"counts.app_count",0);var v=f+(l?1:-1);p.counts.app_count=v;a(Object(Kr["addOrReplaceMemberCounts"])({channelId:u,countInfo:i()({},p,{should_refetch:true})}))}Yr();a(Object(as["maybeUpdateAppPermissionsAfterWildcardChange"])({appUserId:t,wildcardEnabled:l}));Object(ce["isFeatureEnabled"])(o,"feature_wta_add_remove_m11n")?rs(l):Object(es["c"])(l)}function ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,r=e.client_token,a=e.request_approval,n=e.scope_info,i=e.scope_type,s=e.timeout_range,o=e.trigger_id,l=e.type;var c=arguments[1];var u=arguments[2];var d=u();if(!(Object(ce["isFeatureEnabled"])(d,"feature_remote_files_api")&&"web-link-shared"===r)){if(!Xi["a"].check(r))return;var p=Xi["a"].getTimeDelta(r),m=p.delta;if(m>=s)return}var h={appUserId:t,hasChannelScopes:i===ds,isUserRequest:l===cs,requestApproval:a,scopeInfo:n,scopeType:i,triggerId:o};var f=rt.a.createElement(ns["a"],h);c(Object(it["openModal"])({element:f}))}function hs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,r=e.channel_id,a=e.client_token,n=e.invite_message_ts,i=e.scope_info,s=e.timeout_range;var o=arguments[1];var l=arguments[2];if(!Object(ce["isFeatureEnabled"])(l(),"feature_wta_add_remove_m11n"))return;if(!Xi["a"].check(a))return;var c=Xi["a"].getTimeDelta(a),u=c.delta;if(u>=s)return;o(Object(is["a"])({appUserId:t,channelId:r,inviteMessageTs:n,referringEventId:"MSG_LINK_CLICKED",scopeInfo:i}))}Object(Jt["b"])(ss,ps);Object(Jt["b"])(os,ps);Object(Jt["b"])(ls,ms);Object(Jt["b"])(cs,ms);Object(Jt["b"])(us,hs);var fs=r(426);function vs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app;var r=arguments[1];var a=arguments[2];if(!Object(ce["isFeatureEnabled"])(a(),"feature_apps_store_m11n"))return;t&&r(Object(Tn["bulkUpsertAppsAndMarkAsFresh"])([t]))}function bs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_id;var r=arguments[1];var a=arguments[2];gs(t,r,a);_s(t,r)}function gs(e,t,r){if(!Object(ce["isFeatureEnabled"])(r(),"feature_apps_store_m11n"))return;e&&t(Object(Tn["bulkRmApps"])([e]))}function _s(e,t){t(Object(fs["markAppProfilesForAppAsStale"])(e))}Object(Jt["b"])("apps_installed",vs);Object(Jt["b"])("apps_changed",vs);Object(Jt["b"])("apps_uninstalled",bs);var ys=Object(Ca["a"])("Runs a benchmark on a RTM event",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.method,n=r.identifier,i=r.loadtest,o=r.args;return e(Object(wa["a"])({method:"api.benchmark",args:{m:a,id:n,lt:i,a:o}})).catch(s["noop"])});ys.propTypes={method:Ot["b"].string,identifier:Ot["b"].string,loadtest:Ot["b"].any,args:Ot["b"].any};function ks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var r=e.m,a=e.pct,n=e.lt,i=e.a,s=e.id;Math.floor(100*Math.random())<a&&t(ys({method:r,loadtest:n,args:i,id:s}))}Object(Jt["b"])("benchmark",ks);var Os=Object(Mr["c"])("TS.bots.ensureBotsArePresent");var Es=Object(Mr["c"])("TS.bots.legacyBatchUpsertAndSignal");var ws=r(162);function Cs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bot;var r=arguments[1];var a=arguments[2];Ss(t,r,a);js(t,r)}function Ss(e,t,r){Object(ce["useReactMessages"])(r())?t(Object(ws["upsertBot"])(e)):Es([e])}function js(e,t){t(Object(fs["markAppProfileAsStale"])(e.id))}Object(Jt["b"])("bot_added",Ss);Object(Jt["b"])("bot_changed",Cs);var Is=r(1960);var Ts=r(625);var Ns=r(887);var As=r(940);var Rs=r(991);var Ms={canvasId:Ot["b"].string.isRequired};var Ps=function e(t){var r=t.canvasId;return rt.a.createElement(Mt["a"],{showCancelButton:false,showGoButton:false},rt.a.createElement(As["a"],{canvasId:r,render:function e(t){var r=t.canvas,a=t.onAction;return rt.a.createElement(Rs["a"],{blocks:r.blocks,onAction:a})}}))};Ps.displayName="AppViewsModal";var xs=Ps;var Ds=Object(Ea["b"])("Open a canvas in a modal",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.canvasId;return e(Object(Ns["a"])(a)).then(function(t){e(Object(Ts["updateCanvas"])(t));var r=rt.a.createElement(Ps,{canvasId:a});e(Object(it["openModal"])({element:r}))})});Ds.propTypes={canvasId:Ot["b"].string.isRequired};function Fs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas_id;var r=arguments[1];var a=arguments[2];var n=a();if(!Object(ce["isFeatureEnabled"])(n,"feature_canvases"))return;r(Ds({canvasId:t}))}function Ls(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas_id;var r=arguments[1];var a=arguments[2];var n=a();if(!Object(ce["isFeatureEnabled"])(n,"feature_canvases"))return;r(Object(Ts["getCanvasContent"])({canvasId:t}))}Object(Jt["b"])("canvas_mounted",Fs);Object(Jt["b"])("canvas_changed",Ls);var Bs=r(57);var Us=r(743);var qs=r(278);var Gs=r(445);var Hs=r(326);var Ws="CHANNEL-STATUS";function Vs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.is_moved;var a=arguments[1];var n=arguments[2];var i=n();var s=Object(re["isChannelExistent"])(i,t)&&Object(re["getChannelById"])(i,t);if(!s){Object(z["a"])({getState:n}).warn("Received archive event for an unknown channel: "+t);return}if(Object(me["isArchived"])(s))return;Object(z["a"])({getState:n}).info(Ws,"Archived channel "+t);var o=void 0;if(Object(me["isPublicChannel"])(s)){var l=Object(pe["getCurrentMember"])(i);o=!Object(Jr["isRestricted"])(l)&&Object(me["isMemberOfChannel"])(s)}else Object(me["isPrivateChannel"])(s)&&(o=!!Object(me["isOpen"])(s));a(Object(re["archiveChannel"])({id:t,isMoved:!!r,wasArchivedThisSession:o}))}function zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];if(Object(me["isIm"])(t)){r(Object(re["upsertChannel"])({channel:t}));Object(Hs["d"])();r(Object(re["updateOneKeyForChannel"])({id:t.id,opened_this_session:true}));return}if(Object(Jr["isRestricted"])(Object(pe["getCurrentMember"])(a())))return;Object(z["a"])({getState:a}).info(Ws,"Created channel "+t.id);var n=r(Object(re["upsertChannel"])({channel:t}));Object(wr["d"])(n)}var Qs=function(){var e=Object(Bs["method"])(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.user;var a=arguments[1];a(Object(re["setConversationOpen"])({channel:t,user:r}))});return function t(r,a){return e.apply(this,arguments)}}();function Ks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.converted_to;var a=arguments[1];var n=arguments[2];var i=n();var s=Object(re["isChannelExistent"])(i,t)&&Object(re["getChannelById"])(i,t);if(!s){Object(z["a"])({getState:n}).error("Unknown channel "+t);return}a(Object(re["updateOneKeyForChannel"])({id:t,is_open:false}));var o=void 0;if(r){a(Object(re["updateOneKeyForChannel"])({id:t,latest:null}));o=r}if(t===Object(de["getPrimaryView"])(n())){var l=Object(ce["isClientApp"])(n());if(Object(te["a"])()||l&&o){o=o||Object(ue["getPrevChannelIdWithFallback"])(n());a(Object(qs["a"])({id:o}))}else l&&Object(Be["a"])()}Object(me["isIm"])(s)&&Object(Gs["a"])(Object(re["getChannelById"])(n(),t))}function Ys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];var n=a();var i=Object(re["isChannelExistent"])(n,t)&&Object(re["getChannelById"])(n,t);if(!i){Object(z["a"])({getState:a}).warn("Received deleted event for an unknown channel: "+t);return}Object(z["a"])({getState:a}).info(Ws,"Deleted channel "+t);r(Object(re["removeChannels"])({ids:[t]}))}function Js(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];Object(z["a"])({getState:a}).info(Ws,"You joined channel "+t.id);if((Object(me["isMpim"])(t)||Object(me["isPrivateChannel"])(t))&&!Object(me["isExternallySharedChannel"])(t)){var n=a();var s=Object(re["isChannelExistent"])(n,t.id)&&Object(re["getChannelById"])(n,t.id);s&&Object(z["a"])({getState:a}).warn("Received join event for an mpim or group we already know about ("+t.id+"); ignoring it.")}var o=i()({},t,{is_member:true});var l=r(Object(re["upsertChannel"])({channel:o}));r(Object(re["joinChannel"])(l))}function Zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];Object(z["a"])({getState:a}).info(Ws,"You left channel "+t);var n=a();var i=Object(re["isChannelExistent"])(n,t)&&Object(re["getChannelById"])(n,t);if(!i){Object(wr["n"])(t)||Object(z["a"])({getState:a}).warn("Received left event for a channel we don't know about ("+t+"); ignoring it.");return}r(Object(re["leaveChannel"])(i));Object(me["isPrivateChannel"])(i)&&r(Object(re["removeChannels"])({ids:[i.id]}))}function Xs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];var n=a();var i=Object(re["isChannelExistent"])(n,t.id)&&Object(re["getChannelById"])(n,t.id);if(!i){Object(z["a"])({getState:a}).warn("Received rename event for an unknown channel: "+t.id);return}Object(z["a"])({getState:a}).info(Ws,"Renamed channel "+t.id);r(Object(re["renameChannel"])({id:t.id,name:t.name,name_normalized:t.name_normalized,_name_lc:t.name.toLowerCase()}))}function $s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.user,a=e.ts,n=e.purpose;var i=arguments[1];var s=arguments[2];var o=s();var l=Object(re["isChannelExistent"])(o,t)&&Object(re["getChannelById"])(o,t);if(!l){Object(z["a"])({getState:s}).warn("Received channel purpose change event for an unknown channel: "+t);return}Object(z["a"])({getState:s}).info(Ws,r+" changed purpose for channel "+t);var c={creator:r,last_set:a,value:n};i(Object(re["setChannelPurpose"])({id:t,purpose:c}))}function eo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.is_moved;var a=arguments[1];var n=arguments[2];var i=n();var s=Object(re["isChannelExistent"])(i,t)&&Object(re["getChannelById"])(i,t);if(!s){Object(z["a"])({getState:n}).warn("Received unarchive event for an unknown channel: "+t);return}if(!Object(me["isArchived"])(s))return;Object(z["a"])({getState:n}).info(Ws,"Unarchived channel "+t);Object(me["isPublicChannel"])(s)&&s.was_archived_this_session&&a(Object(re["joinConversationApi"])({channelId:t,inBackground:true}));a(Object(re["unarchiveChannel"])({id:t,isMoved:!!r}))}function to(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.user,a=e.ts,n=e.topic;var i=arguments[1];var s=arguments[2];var o=s();var l=Object(re["isChannelExistent"])(o,t)&&Object(re["getChannelById"])(o,t);if(!l){Object(z["a"])({getState:s}).warn("Received topic change event for an unknown channel: "+t);return}Object(z["a"])({getState:s}).info(Ws,r+" changed topic for "+t);var c={creator:r,last_set:a,value:n};i(Object(re["setChannelTopic"])({id:t,topic:c}))}function ro(e,t,r){var a=e.channel,n=e.ts,i=e.type;var s=r();var o=Object(re["isChannelExistent"])(s,a)&&Object(re["getChannelById"])(s,a);if("group_marked"===i&&Object(me["isMpim"])(o))return;if(!o){Object(z["a"])({getState:r}).error("The channel model object was not found for the channel id ("+a+") we received in the "+i+" event");return}t(Object(Us["c"])({id:a,ts:n}))}function ao(e,t,r){if(!Object(ce["isFeatureEnabled"])(r(),"feature_channel_converted_to_shared_rtm_handler"))return;var a=e&&e.channel&&e.channel.id;if(!a){Object(z["a"])({getState:r}).warn("RTM channel_converted_to_shared: message missing channel ID.");return}var n=r();var i=Object(re["isChannelExistent"])(n,a)&&Object(re["getChannelById"])(r(),a);if(!i){Object(z["a"])({getState:r}).warn("Received channel_converted_to_shared for an unknown channel: "+a);return}if(!Object(me["isOrgShared"])(e.channel)&&!Object(me["isOrgGlobalSharedPublicOrPrivateChannel"])(e.channel)){Object(z["a"])({getState:r}).warn("Ignoring channel_converted_to_shared for a non-org-shared, non-global-shared channel: "+a);return}Object(z["a"])({getState:r}).info(Ws,"Received channel_converted_to_shared for "+a);t(Object(re["convertToShared"])({channel:e.channel}))}function no(e,t,r){if(!Object(ce["isFeatureEnabled"])(r(),"feature_history_changed_modern_rtm_handlers"))return;var a=e&&e.type;var n=e&&e.channel;if(!n){Object(z["a"])({getState:r}).warn("Received "+a+" without a 'channel' id.");return}var i=r();var s=Object(re["isChannelExistent"])(i,n)&&Object(re["getChannelById"])(i,n);if(!s){Object(z["a"])({getState:r}).warn("Received "+a+" for an unknown channel: "+n);return}t(Object(Ae["removeAllTimestamps"])({channelId:n,includeThreads:Object(ce["isFeatureEnabled"])(i,"feature_react_threads")}))}Object(Jt["b"])("channel_archive",Vs);Object(Jt["b"])("channel_created",zs);Object(Jt["b"])("channel_deleted",Ys);Object(Jt["b"])("channel_joined",Js);Object(Jt["b"])("channel_left",Zs);Object(Jt["b"])("channel_rename",Xs);Object(Jt["b"])("channel_unarchive",eo);Object(Jt["b"])("group_archive",Vs);Object(Jt["b"])("group_deleted",Ys);Object(Jt["b"])("group_joined",Js);Object(Jt["b"])("group_left",Zs);Object(Jt["b"])("group_rename",Xs);Object(Jt["b"])("group_unarchive",eo);Object(Jt["b"])("mpim_joined",Js);Object(Jt["b"])("mpim_open",Qs);Object(Jt["b"])("im_created",zs);Object(Jt["b"])("im_open",Qs);Object(Jt["b"])("mpim_close",Ks);Object(Jt["b"])("im_close",Ks);Object(Jt["b"])("channel_marked",ro);Object(Jt["b"])("group_marked",ro);Object(Jt["b"])("mpim_marked",ro);Object(Jt["b"])("im_marked",ro);Object(Jt["b"])("channel_converted_to_shared",ao);Object(Jt["b"])("channel_history_changed",no);Object(Jt["b"])("im_history_changed",no);Object(Jt["b"])("mpim_history_changed",no);Object(Jt["b"])("group_history_changed",no);var io=r(653);var so=r(3343);var oo=void 0;function lo(e){oo||(oo=Object(s["throttle"])(function(){return e(Object(so["a"])({resetPreviousCommands:true}))},1e3,{leading:false,trailing:true}));return oo}function co(e,t,r){var a=Object(ce["isFeatureEnabled"])(r(),"feature_commands_changed_rtm_handler");if(!a)return;var n=e.commands_removed,i=e.commands_updated;if(n||i){Object(s["forEach"])(n,function(e){return t(Object(io["removeCommand"])({commandName:e.name}))});t(Object(io["bulkAddServerCommands"])({commands:i}))}else lo(t)()}Object(Jt["b"])("commands_changed",co);var uo="DND";function po(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dnd_status,r=e.type,a=e.user;var n=arguments[1];var i=arguments[2];var s=i();if(!Object(ce["isFeatureEnabled"])(s,"feature_sonic_dnd_rtm")&&!Object(te["a"])())return;if(!Object($t["getDndScheduleByMemberId"])(s,a))return;Object(z["a"])({getState:i}).info(uo,"Received a "+r+" event for the current member ("+a+") with updated DND times");var o=t.next_dnd_start_ts,l=t.next_dnd_end_ts,c=t.snooze_enabled,u=t.snooze_endtime;n(Object(er["d"])({nextDndStartTs:o,nextDndEndTs:l,snoozeEnabled:c,snoozeEndTs:u}));n(Object(er["a"])({fetchDndTimes:false}))}function mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dnd_status,r=e.type,a=e.user;var n=arguments[1];var i=arguments[2];var s=i();if(!Object(ce["isFeatureEnabled"])(s,"feature_sonic_dnd_rtm")&&!Object(te["a"])())return;if(a===Object(ce["getCurrentUserId"])(s))return;if(!Object($t["getDndScheduleByMemberId"])(s,a))return;Object(z["a"])({getState:i}).info(uo,"Received a "+r+" event for the following member with updated DND times: "+a);var o=t.next_dnd_start_ts,l=t.next_dnd_end_ts;n(Object($t["updateDndSchedule"])({memberId:a,nextDndStartTs:o,nextDndEndTs:l}));n(Object(er["a"])({fetchDndTimes:false}))}Object(Jt["b"])("dnd_updated",po);Object(Jt["b"])("dnd_updated_user",mo);var ho=r(681);var fo=r(799);var vo=function e(t,r,a){if(!t)return;var n=a();var i=Object(ce["isFeatureEnabled"])(n,"feature_sonic_emoji");if(!i)return;var s=t.name,o=t.names,l=t.subtype,c=t.value,u=t.old_name,d=t.new_name,p=t.event_ts;var m=Object(Q["getTeamId"])(n);var h=Object(z["a"])({teamId:m});if(!p){h.warn("RTM","emoji_changed: missing event_ts");return}if("add"===l){if(s&&c){var f=Object(fo["i"])(aa()({},s,c)),v=f.emojis,b=f.aliases;r(Object(ho["bulkAddCustomEmoji"])({teamId:m,cacheTs:p,emojis:v,aliases:b}))}else h.warn("RTM",'emoji_changed: "add" subtype missing "name" or "value"');return}if("remove"===l){Array.isArray(o)?r(Object(ho["bulkRemoveCustomEmoji"])({teamId:m,cacheTs:p,names:o})):h.warn("RTM",'emoji_changed: "remove" subtype missing "names"');return}if("rename"===l){u&&d?r(Object(ho["renameCustomEmoji"])({teamId:m,cacheTs:p,prevName:u,nextName:d})):h.warn("RTM",'emoji_changed: "rename" subtype missing "old_name" or "new_name"');return}h.warn("RTM","emoji_changed: unknown or missing subtype")};Object(Jt["b"])("emoji_changed",vo);var bo={handleEmojiChanged:vo};var go=r(719);function _o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;Object(go["e"])(t);Object(go["f"])(t)}Object(Jt["b"])("enterprise_rename",_o);var yo=Object(Mr["c"])("TS.maybeShowRateLimitedDialog");var ko={},Oo=ko.refetchAuth;function Eo(e,t,r){var a=r();var n=Object(Ba["getCurrentTeam"])(a);Object(z["a"])({getState:r}).warn("You have been removed from the "+Object(qa["getTeamDisplayName"])(n)+" workspace.");Object(Be["g"])(n.id)}function wo(e,t,r){if(Object(lt["isElectronAndAtLeastVersion"])("3.0.0")&&Object(Re["isWindowUnloading"])(r()))return;Object(yr["invalidateAuth"])();if(Object(te["a"])()){Object(z["a"])({getState:r}).info("Re-fetching auth due to invalid_auth error");Oo()}else Object(ja["b"])({reason:"Reloading due to error "+e})}function Co(){Object(ja["b"])({noCache:true,reason:"Reloading because Flannel told us to"})}function So(e){if(Object(te["a"])()){Object(ja["a"])();return}var t=true;Object(lr["d"])(t);Object(ja["b"])({reason:"Flushing storage and reloading due to '"+e+"' error"})}function jo(){yo()}Object(Jt["a"])("user_removed_from_team",Eo);Object(Jt["a"])("account_inactive",wo);Object(Jt["a"])("team_disabled",wo);Object(Jt["a"])("invalid_auth",wo);Object(Jt["a"])("force_reload",Co);Object(Jt["a"])("clear_cache",So);Object(Jt["a"])("org_login_required",So);Object(Jt["a"])("team_added_to_org",So);Object(Jt["a"])("ratelimited",jo);var Io=r(730);function To(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file_id;var r=arguments[1];var a=arguments[2];if(!t)return;var n=a();if(!Object(dr["hasFileWithId"])(n,t))return;var i=Object(Q["getTeamId"])(n);if(!Object(dr["isObjectFresh"])(i,t))return;var s=Object(dr["getFileById"])(n,t);Object(Io["o"])(i,[t]);Object(hr["c"])(s)}function No(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file_id,r=e.file_ids;var a=r||[t];a.forEach(function(e){return Object(hr["r"])(e)})}function Ao(e,t,r){var a=Object(ce["isFeatureEnabled"])(r(),"feature_file_comment_deleted_rtm_handler");if(!a)return;var n=e.file_id,i=e.comment;null!==Object(Io["i"])(r(),n,i)&&t(Object(Io["p"])({fileId:n,commentId:i}))}Object(Jt["b"])("file_public",To);Object(Jt["b"])("file_private",To);Object(Jt["b"])("file_change",To);Object(Jt["b"])("file_shared",To);Object(Jt["b"])("file_unshared",To);Object(Jt["b"])("file_deleted",No);Object(Jt["b"])("file_comment_deleted",Ao);var Ro=r(821);function Mo(e,t,r){if(!Object(Y["a"])()&&"client"!==Object(ce["getFromBootData"])(r(),"app"))return;Object(Ro["b"])()}Object(Jt["b"])("shared_invite_code_created",Mo);Object(Jt["b"])("shared_invite_code_disabled",Mo);var Po=r(1963);var xo=Object(Mr["c"])("TS.lessons.channel_created_sig.dispatch");var Do=Object(Mr["c"])("TS.lessons.file_uploaded_sig.dispatch");var Fo=Object(Mr["c"])("TS.lessons.lesson_assigned_sig.dispatch");var Lo=Object(Mr["c"])("TS.lessons.message_sent_sig.dispatch");function Bo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=t.user_lessons;Fo(r)}function Uo(e,t,r){var a=e.user_event;switch(e.user_event){case"channel_created":xo(e);break;case"message_sent":Lo(e);break;case"file_share":Do(e);break;default:Object(z["a"])({getState:r}).info("Received lesson_user_action event with an user_event value of '"+a+"'; ignoring it")}}Object(Jt["b"])("lesson_assigned",Bo);Object(Jt["b"])("lesson_user_action",Uo);var qo=r(704);var Go=r(806);var Ho=r(451);var Wo=Object(Mr["c"])("TS.groups.member_left_sig.dispatch");var Vo=Object(Mr["c"])("TS.groups.member_joined_sig.dispatch");var zo=o.a.memoize(function(e){var t=1;var r=Object(ce["isFeatureEnabled"])(Object(K["c"])(e),"feature_member_events")&&Object(J["a"])(t);return{count:r?function(){return Object(Z["c"])("member_event_received")}:o.a.noop}});function Qo(e,t,r){var a=e.channel_type,n=e.user,i=e.channel,s=e.inviter;var o=r();var l=Object(pe["isMemberExistent"])(o,n)&&Object(pe["getMemberById"])(o,n);var c=Object(re["isChannelExistent"])(o,i)&&Object(re["getChannelById"])(o,i);var u=Object(pe["getCurrentMember"])(o);var d=true;var p=Object(z["a"])({state:o});zo(Object(Q["getTeamId"])(o)).count();var m=t(Object(na["setChannelMembershipInfoForUsers"])({channelId:i,membershipInfo:aa()({},n,d)}));if(m){t(Object(Kr["updateAndInvalidateMemberCounts"])({channelId:i}));t(Object(as["maybeUpdateAppPermissionsAfterChannelAdd"])({appUserId:n,channelId:i}));(Object(ce["isFeatureEnabled"])(o,"feature_bots_not_members")?Object(Jr["isAppOrBot"])(l):Object(Jr["isAppUser"])(l))&&(Object(ce["isFeatureEnabled"])(o,"feature_wta_add_remove_m11n")?ts(c):Object(es["b"])(c,d))}if(c&&!Object(me["isIm"])(c)&&!Object(me["isMpim"])(c)){if(!Object(me["isMemberOfChannel"])(c)){p.info(n+" joined channel "+i+" but we are not a member; ignoring");return}p.info(n+" joined channel "+i);s&&n===u.id&&t(Object(Go["addInviter"])({channelId:i,inviter:s}));if(m){if("C"===a){Object(wr["h"])(c,n);Object(Jr["isAdmin"])(u)||Object(Jr["isExternal"])(l)&&Object(Jr["isStranger"])(l)&&t(Object(pe["removeMember"])(l))}if("G"===a){l&&Object(Hs["d"])();Vo(c,n)}}}}function Ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel_type,r=e.user,a=e.channel;var n=arguments[1];var i=arguments[2];var s=i();var o=Object(pe["isMemberExistent"])(s,r)&&Object(pe["getMemberById"])(s,r);var l=Object(re["isChannelExistent"])(s,a)&&Object(re["getChannelById"])(s,a);var c=false;var u=Object(z["a"])({state:s});zo(Object(Q["getTeamId"])(s)).count();var d=n(Object(na["setChannelMembershipInfoForUsers"])({channelId:a,membershipInfo:aa()({},r,c)}));if(d){n(Object(Kr["updateAndInvalidateMemberCounts"])({channelId:a}));n(Object(as["maybeUpdateAppPermissionsAfterChannelRemove"])({appUserId:r,channelId:a}));(Object(ce["isFeatureEnabled"])(s,"feature_bots_not_members")?Object(Jr["isAppOrBot"])(o):Object(Jr["isAppUser"])(o))&&(Object(ce["isFeatureEnabled"])(s,"feature_wta_add_remove_m11n")?ts(l):Object(es["b"])(l,c))}if(l&&!Object(me["isIm"])(l)&&!Object(me["isMpim"])(l)){if(!Object(me["isMemberOfChannel"])(l)){u.info(r+" left channel "+a+" but we are not a member; ignoring");return}u.info(r+" left channel "+a);if(d){if("C"===t){Object(wr["i"])(l,r);Object(Jr["isAdmin"])(Object(pe["getCurrentMember"])(s))||Object(Jr["isExternal"])(o)&&!Object(Jr["isStranger"])(o)&&n(Object(pe["removeMember"])(o))}if("G"===t){o&&Object(Hs["d"])();Wo(l,r)}}}}function Yo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user;var r=arguments[1];var a=arguments[2];var n=a();zo(Object(Q["getTeamId"])(n)).count();if(!t)return;var i=Object(pe["isMemberExistent"])(n,t.id)&&Object(pe["getMemberById"])(n,t.id);if(!i)return;if(!Object(ce["isFeatureEnabled"])(n,"feature_degraded_send")&&i.id===Object(ce["getCurrentUserId"])(n)&&t.profile&&!t.profile.email&&!Object(Ee["getTeamPref"])(n,"display_email_addresses")){var s=i.profile&&i.profile.email;if(s){Object(z["a"])({state:n}).info("user_change: email hidden via team pref. appending email from model for local user, so it is not lost in upsert.");t.profile.email=s}}Object(te["a"])()?r(Object(qo["a"])({members:[t]})):Object(Hs["f"])(t)}function Jo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,r=e.channel;var a=arguments[1];var n=arguments[2];var i=n();var s=Object(pe["isMemberExistent"])(i,t)&&Object(pe["getMemberById"])(i,t);zo(Object(Q["getTeamId"])(i)).count();if(!s){Object(z["a"])({state:i}).info("user_typing event from user ("+t+") not in model; ignoring");return}var o=Object(re["isChannelExistent"])(i,r)&&Object(re["getChannelById"])(i,r);if(!o){Object(z["a"])({state:i}).error("user_typing event for channel ("+r+") not in model; ignoring");return}a(Object(Ho["memberStartedTyping"])({channelId:r,memberId:t}))}Object(Jt["b"])("member_joined_channel",Qo);Object(Jt["b"])("member_left_channel",Ko);Object(Jt["b"])("user_change",Yo);Object(Jt["b"])("user_typing",Jo);var Zo={getMemberEventReceivedRecorder:zo};var Xo=r(683);var $o=r(36);var el=r(962);var tl=r(963);var rl=r(189);var al=r(662);var nl=r(3524);function il(e,t){var r=t.channel,a=t.timestamp,n=t.description;var i={channel:r,msg_ts:a,desc:n};Object.keys(i).forEach(function(t){sl(e).recordMetric(t,i[t])})}function sl(e){return Object(nl["b"])("notifs",function(t){var r=lt["isDev"]?"/beacon/notifs":"https://slack.com/beacon/notifs";t.setUser(Object(ce["getCurrentUserId"])(e)).setTeam(Object(Q["getTeamId"])(e)).setVersionTs(Object(ce["getFromBootData"])(e,"version_ts")).setEndpointUrl(r)})}var ol=r(350);var ll=r(153);var cl=r(807);var ul=new Set;function dl(e,t,r){var a=r();if(!Object(ce["isClientApp"])(a))return;var n=Object(on["w"])(a,e.channel)&&Object(on["f"])(a,e.channel);var i=ml(e);var s=void 0;s="desktop_notification"===e.type?Object(ol["j"])(a,e):Object(me["isIm"])(n)?Object(ol["k"])(a,e,n):Object(ol["i"])(a,e,n);s===ll["a"].NONE&&ul.has(i)&&(s=ll["a"].ALREADY_SHOWN);if(Object(Y["a"])()&&s===ll["a"].PERMISSION_DENIED)Object(cl["b"])(t,function(a){a&&dl(e,t,r)});else if(s!==ll["a"].NONE){var o=Object(ll["b"])(s,n&&n.id,e.ts);if(o){Object(z["a"])({getState:r}).warn("Notification ("+e.type+") suppressed because:\n"+o);il(a,{channel:n.id,timestamp:e.ts||e.msg,description:o})}}else{t(Object(cl["c"])({message:e,modelObject:n,options:"desktop_notification"===e.type?{skip_formatting:true,launch_uri:e.launchUri,image_uri:e.imageUri,avatar_image:e.avatarImage}:{}}));ul.add(i);il(a,{channel:n.id,timestamp:e.ts||e.msg,description:"Notification shown"})}}function pl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.timestamp;var a=arguments[1];var n=arguments[2];var s=n();var o=Object(Me["getMessageByTimestamp"])(s,t,r);if(!o)return;if(o._ignore_dnd)return;a(Object(Me["addMessages"])([i()({},o,{_ignore_dnd:true})]));var l=Object(Me["getMessageByTimestamp"])(n(),t,r);dl(l,a,n)}function ml(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.msg,a=e.ts;return t&&(a||r)?t+":"+(a||r):Date.now().toString()}Object(Jt["b"])("desktop_notification",dl);Object(Jt["b"])("dnd_override",pl);var hl=r(422);var fl=r(428);var vl=r(480);var bl="RTM-THREADS";var gl=function e(t,r,a){var n=a();var i=t.channel,s=t.message;var l=Object(re["isChannelExistent"])(n,i)&&Object(re["getChannelById"])(n,i);var c=Object(Me["getMessageByTimestamp"])(n,i,s.ts);var u=void 0;s&&s.latest_reply?u=s.latest_reply:s&&s.replies&&s.replies.length&&(u=o.a.maxBy(s.replies,"ts").ts);if(c&&c.reply_count){var d=void 0;c&&c.latest_reply?d=c.latest_reply:c&&c.replies&&c.replies.length&&(d=o.a.maxBy(c.replies,"ts").ts);if(u<d){Object(z["a"])({getState:a}).info(bl,"Not processing an older message_replied event, "+u+" < "+d+", in "+i);return}}Object(rl["h"])(t);var p=r(Object(hl["a"])({imsgs:[s],channelId:i}));r(Object(Me["addMessages"])(p));Object(rl["j"])(l,s,true,false)};function _l(e,t,r){var a=e.subscription||{},n=a.channel,i=a.thread_ts,s=a.last_read;if(!n||!i)return;Object(z["a"])({getState:r}).info(bl,"thread_subscribed "+n+" "+i);t(Object(fl["upsertSubscriptionAndMarkAsFresh"])({channelId:n,ts:i,subscribed:true,lastRead:s}))}function yl(e,t,r){var a=e.subscription||{},n=a.channel,i=a.thread_ts,s=a.last_read;if(!n||!i)return;Object(z["a"])({getState:r}).info(bl,"thread_unsubscribed "+n+" "+i);t(Object(fl["upsertSubscriptionAndMarkAsFresh"])({channelId:n,ts:i,subscribed:false,lastRead:s}))}function kl(e,t){var r=e.subscription||{},a=r.channel,n=r.thread_ts,i=r.last_read;if(!a||!n)return;t(Object(fl["setSubscription"])({channelId:a,ts:n,lastRead:i}))}function Ol(e,t,r){var a=Object(ce["isFeatureEnabled"])(r(),"feature_react_threads");if(!a)return;var n=e.has_unreads,i=e.timestamp,s=e.mention_count,l=e.mention_count_by_channel;Object(z["a"])({getState:r}).info(bl,"update_thread_state has_unreads:"+n+" mention_count:"+s+" ts:"+i);t(Object(vl["updateUnreadThreads"])({hasUnreads:n,mentionCountByChannel:o.a.isArray(l)?{}:l}))}Object(Jt["b"])("thread_subscribed",_l);Object(Jt["b"])("thread_unsubscribed",yl);Object(Jt["b"])("thread_marked",kl);Object(Jt["b"])("update_thread_state",Ol);function El(e,t,r){if(!e)return;switch(e.subtype){case"message_changed":Cl(e,t,r);return;case"message_deleted":Sl(e,t,r);return;case"message_replied":gl(e,t,r);return;case"channel_history_changed":case"group_history_changed":case"im_history_changed":case"mpim_history_changed":return;case"channel_purpose":case"group_purpose":$s(e,t,r);break;case"channel_topic":case"group_topic":to(e,t,r);break;default:break}wl(e,t,r);dl(e,t,r);jl(e,t,r)}function wl(e,t,r){if(!Object(Y["a"])())return;if(!e||!e.channel)return;var a=t(Object(el["a"])(e));Object(Xo["c"])(r,t,a,e)}function Cl(e,t,r){var a=r();var n=Object(z["a"])({state:a});var i=e.message,s=e.channel,o=e._from_evt_log;var l=Object(on["w"])(a,s)&&Object(on["f"])(a,s);if(!i){n.error("no message?");return}if(!i.ts){n.error("no message ts?");return}if(!l&&!Object(ce["isFeatureEnabled"])(r(),"feature_message_blocks")){n.error("unknown msg.channel:"+s);return}Object(rl["h"])(e);t(Object(tl["a"])({message:i,channelId:s,fromEventLog:o}))}function Sl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleted_ts,r=e.channel,a=e._from_evt_log;var n=arguments[1];n(Object(Me["setMessageDeleted"])({deleted_ts:t,channel:r,_from_evt_log:a}))}function jl(e,t,r){var a=r();var n=Object(ce["getCurrentUserId"])(a);if(!Object(ce["isFeatureEnabled"])(a,"feature_ally_sounds"))return;if(!Object(Re["isWindowFocused"])(a))return;if(!Object(yr["isScreenReaderEnabled"])())return;if(Object($o["isFromCurrentUser"])(e,n))return;if(Object($o["isReply"])(e))return;if(!Object($o["isFromChannel"])(e,Object(de["getPrimaryView"])(a)))return;var i=Object($o["containsMention"])(e,n,Object(Ee["getUserHighlightWords"])(a),Object(Q["getTeamId"])(a));Object(al["b"])(i)}Object(Jt["b"])("message",El);var Il=r(764);Object(Jt["b"])("slackbot_continue",Il["c"]);Object(Jt["b"])("slackbot_response_sent",Il["d"]);Object(Jt["b"])("slackbot_skip_or_stop",Il["e"]);var Tl=r(1964);function Nl(e,t,r){var a=t.pinned_to,n=void 0===a?[]:a;var s=[].concat($()(n));var o=s.indexOf(r);e?-1===o&&s.push(r):-1!==o&&s.splice(o,1);return i()({},t,{pinned_to:s})}var Al=Nl;var Rl=Object(at["e"])("Upserts a message after a change in pinned status and returns the new message event",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.item,n=r.pinned,s=r.channelId,o=r.pinnedInfo;var l=a.message;var c=Al(n,l,s);var u=Object($o["extendMessageWithPinnedInfo"])(c,o);e(Object(el["a"])(i()({},u,{channel:s})));return i()({},a,{message:c})});Rl.propTypes={channelId:Ot["b"].string.isRequired,item:Ot["b"].object.isRequired,pinned:Ot["b"].bool.isRequired,pinnedInfo:Ot["b"].object};var Ml=Rl;var Pl=r(373);var xl=r(61);var Dl=Object(at["e"])("Upserts a file after a change in the pinned status and returns the new message event",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.item,n=r.pinned,s=r.channelId,o=r.pinnedInfo;var l=a.file;var c=Object(xl["extendFileWithPinnedInfo"])(l,s,o);var u=Al(n,c,s);e(Object(Pl["a"])({files:[u]}));return i()({},a,{file:u})});Dl.propTypes={channelId:Ot["b"].string.isRequired,item:Ot["b"].object.isRequired,pinned:Ot["b"].bool.isRequired,pinnedInfo:Ot["b"].object};var Fl=Dl;var Ll=r(986);var Bl=Object(at["e"])("Upserts a file after a change in a file comment pinned status and returns the new message event",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.item,n=r.pinned,o=r.channelId;var l=a.file,c=a.comment;var u=Object(s["findIndex"])(l.comments,function(e){return e.id===c.id});var d=i()({},l);var p=void 0;if(u>-1){var m=Al(n,l.comments[u],o);p=i()({},m);d.comments[u]=i()({},m)}else{p=c;d=Object(Ll["a"])(c,l)}e(Object(Pl["a"])({files:[d]}));return i()({},a,{comment:p})});Bl.propTypes={channelId:Ot["b"].string.isRequired,item:Ot["b"].object.isRequired,pinned:Ot["b"].bool.isRequired};var Ul=Bl;var ql=r(610);var Gl=r(272);var Hl={message:"message",file_comment:"file_comment",file:"file"};var Wl=Hl;var Vl=function e(t,r){var a=r.type;if(a!==t.type)return false;switch(a){case Wl.message:return t.message.ts===r.message.ts;case Wl.file:return t.file.id===r.file.id;case Wl.file_comment:return t.comment.id===r.comment.id;default:return false}};var zl=function e(t,r){var a=function e(t){return Vl(t,r)};return Object(s["findIndex"])(t,a)};var Ql=function e(t,r){var a=function e(t){return Vl(t,r)};return Object(s["reject"])(t,a)};var Kl=Vl;var Yl=Object(at["e"])("Update the pinned_items field for a channel",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.pinned,n=r.item,s=r.channelId,o=r.count;var l=Object(z["a"])({getState:t,label:"UPDATE_CHANNEL_PINNED_ITEMS"});var c=false;var u=Object(on["f"])(t(),s,c);if(!u){l.warn("Channel matching "+s+" not found.");return}var d=i()({},u,{pinned_items:u.pinned_items||[],pinned_items_count:u.pinned_items_count||0});if(!Object(Gl["b"])(d)){e(Object(ql["updatePinCount"])({channelId:s,count:o}));return}if(a){var p=zl(d.pinned_items,n);if(-1===p){d.pinned_items=[n].concat($()(d.pinned_items));Object(Gl["i"])(d,o);e(Object(ca["b"])({channel:d}));Object(Gl["d"])(d,n,a)}}else{d.pinned_items=Ql(d.pinned_items,n);Object(Gl["i"])(d,o);e(Object(ca["b"])({channel:d}));Object(Gl["d"])(d,n,a)}});Yl.propTypes={channelId:Ot["b"].string.isRequired,item:Ot["b"].object.isRequired,pinned:Ot["b"].bool.isRequired,count:Ot["b"].number.isRequired};var Jl=Yl;var Zl=Object(at["e"])("Updates local state when pin status on a channel has changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.pinned,n=r.item,i=r.channelId,s=r.pinCount,o=r.pinnedInfo;var l={};if(a&&o){l.pinnedBy=o.pinned_by;l.pinnedTs=o.pinned_ts}var c=n.type;var u=void 0;switch(c){case Wl.message:u=e(Ml({pinned:a,item:n,channelId:i,pinnedInfo:l}));break;case Wl.file_comment:u=e(Ul({pinned:a,item:n,channelId:i}));break;case Wl.file:u=e(Fl({pinned:a,item:n,channelId:i,pinnedInfo:l}));break;default:}e(Jl({pinned:a,item:u,channelId:i,count:s}))});Zl.propTypes={pinned:Ot["b"].bool.isRequired,item:Ot["b"].object.isRequired,channelId:Ot["b"].string.isRequired,maybeCount:Ot["b"].number,pinnedInfo:Ot["b"].object};var Xl=Zl;var $l=Xl;function ec(e,t,r){if(!Object(ce["isFeatureEnabled"])(r(),"feature_modern_rtm_pins"))return;var a=Object(z["a"])({getState:r,label:"PIN_ADDED_RTM"});if(!e||!e.channel_id){a.warn("RTM event missing, or missing channel_id.");return}var n=false;var i=r();var s=e.channel_id;var o=Object(re["getChannelById"])(i,s,n);if(!o){a.warn("Channel matching "+s+" not found.");return}var l=e.item,c=e.pin_count,u=e.pinned_info;var d=true;t($l({pinned:d,item:l,channelId:e.channel_id,pinCount:c,pinnedInfo:u}))}function tc(e,t,r){if(!Object(ce["isFeatureEnabled"])(r(),"feature_modern_rtm_pins"))return;var a=Object(z["a"])({getState:r,label:"PIN_REMOVED_RTM"});if(!e||!e.channel_id){a.warn("RTM event missing, or missing channel_id.");return}var n=false;var i=r();var s=e.channel_id;var o=Object(re["getChannelById"])(i,s,n);if(!o){a.warn("Channel matching "+s+" not found.");return}var l=e.item,c=e.pin_count,u=e.pinned_info;var d=false;t($l({pinned:d,item:l,channelId:e.channel_id,pinCount:c,pinnedInfo:u}))}Object(Jt["b"])("pin_added",ec);Object(Jt["b"])("pin_removed",tc);var rc=r(805);var ac=new Set(["sidebar_theme_custom_values","muted_channels","emoji_use","graphic_emoticons","emoji_mode","preferred_skin_tone"]);var nc=new Set(["who_can_post_general"]);var ic=new Set(["search_only_my_channels","search_only_current_team","search_exclude_bots"]);function sc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.value;var a=arguments[1];var n=arguments[2];var i=n();if(ic.has(t)){a(Object(Ee["setSearchPref"])({pref:t,value:r}));return}if(!Object(ce["isFeatureEnabled"])(i,"feature_prefs_modernization"))return;if("arrow_history"===t&&(Object(Y["a"])()||Object(ce["isFeatureEnabled"])(i,"feature_sonic_inputs")))return;if(ac.has(t))Object(rc["b"])({name:t,value:r});else{a(Object(Ee["setUserPref"])({pref:t,value:r}));Object(rc["d"])({name:t,value:r})}}function oc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.value;var a=arguments[1];var n=arguments[2];var i=n();if(!Object(ce["isFeatureEnabled"])(i,"feature_team_prefs_modernization"))return;if(nc.has(t))Object(rc["c"])({name:t,value:r});else{a(Object(Ee["setTeamPref"])({pref:t,value:r}));Object(rc["e"])({name:t,value:r})}}Object(Jt["b"])("pref_change",sc);Object(Jt["b"])("team_pref_change",oc);var lc={PREFS_WITH_LEGACY_LOGIC:ac,TEAM_PREFS_WITH_LEGACY_LOGIC:nc,UNIVERSAL_SEARCH_PREFS:ic,onPrefChangedEvent:sc,onTeamPrefChangedEvent:oc};var cc=r(257);var uc=r(312);var dc=r(2802);var pc="PRESENCE";function mc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence,r=e.type;var a=arguments[1];var n=arguments[2];if("away"!==t&&"active"!==t){Object(z["a"])({getState:n}).error(pc,"An unknown presence was received in the '"+r+"' event: '"+t+"'");return}a(Object(dc["a"])({presence:t}))}function hc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence,r=e.type,a=e.users;var n=arguments[1];var o=arguments[2];var l=o();var c=Object(z["a"])({getState:o});if("away"!==t&&"active"!==t){c.error(pc,"An unknown presence was received in the '"+r+"' event: '"+t+"'");return}if(Object(s["isEmpty"])(a)){c.error(pc,"The '"+r+"' event did not contain an array of users to update the presence for");return}var u=a.filter(function(e){return Object(pe["isMemberExistent"])(l,e)&&Object(uc["getPresenceByMemberId"])(l,e)!==t}).map(function(e){return i()({},Object(pe["getRawMemberById"])(l,e),{presence:t})});if(Object(s["isEmpty"])(u))return;Object(cc["i"])(n,u);u.forEach(function(e){Object(Hs["a"])(e)})}Object(Jt["b"])("manual_presence_change",mc);Object(Jt["b"])("presence_change",hc);var fc=r(674);var vc=r(322);var bc=r(323);function gc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.ts,a=e.file,n=e.comment;switch(t){case"message":return!!r;case"file":return"string"===typeof a;case"file_comment":return"string"===typeof a&&!!n;default:return false}}function _c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.type,a=t.ts,n=t.channel,i=t.file,s=t.comment;switch(r){case"message":return Object(Me["getMessageByTimestamp"])(e,n,a)||Object(rl["d"])(a,n)||void 0;case"file":return Object(dr["getFileById"])(e,i)||void 0;case"file_comment":return Object(dr["getFileCommentById"])(e,i,s)||void 0;default:return}}function yc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,r=e.reaction,a=e.user,n=e.url,i=e._from_evt_log,o=e.event_ts;var l=arguments[1];var c=arguments[2];if(!Object(s["isObject"])(t)){Object(z["a"])({getState:c}).error("reaction_added has no item");return}if(!gc(t))return;var u=_c(c(),t);if(!u)return;var d=t.channel,p=t.type,m=t.ts,h=t.file,f=t.comment;var v=m||f||h;var b=Object(bc["d"])(p,v,d);var g=Object(ce["getCurrentUserId"])(c());var _=l(Object(vc["addReaction"])({key:b,name:r,userId:a,url:n}));if(g!==a&&g===u.user){var y=true;var k=!i&&"message"===p;Object(fc["a"])({adding:y,name:r,key:b,userId:a,eventTs:o,shouldAlert:k,channelId:d,url:n})}if(_){var O=i||a!==Object(ce["getCurrentUserId"])(c());Object(fc["b"])({key:b,name:r,userId:a,type:p,shouldThrottle:O})}}function kc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,r=e.reaction,a=e.user,n=e.url,i=e._from_evt_log,o=e.event_ts;var l=arguments[1];var c=arguments[2];if(!Object(s["isObject"])(t)){Object(z["a"])({getState:c}).error("reaction_removed has no item");return}if(!gc(t))return;var u=_c(c(),t);if(!u)return;var d=t.channel,p=t.type,m=t.ts,h=t.file,f=t.comment;var v=m||f||h;var b=Object(bc["d"])(p,v,d);var g=Object(ce["getCurrentUserId"])(c());var _=l(Object(vc["removeReaction"])({key:b,name:r,userId:a,url:n}));if(g!==a&&g===u.user){var y=false;var k=!i&&"message"===p;Object(fc["a"])({adding:y,name:r,key:b,userId:a,eventTs:o,shouldAlert:k,channelId:d,url:n})}if(_){var O=i||a!==g;Object(fc["b"])({key:b,name:r,userId:a,type:p,shouldThrottle:O})}}Object(Jt["b"])("reaction_added",yc);Object(Jt["b"])("reaction_removed",kc);var Oc=r(1966);var Ec=r(611);var wc="RTM-STARS";var Cc={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};var Sc=function e(t,r,a){if(!Object(ce["isFeatureEnabled"])(a(),"feature_modern_starred_items"))return;if(!t)return;if(!t.item){Object(z["a"])({getState:a}).info(wc,'imsg type "'+t.type+'" has no item');return}r(Object(Ec["addStarredItem"])(t.item));if(t.item.type===Cc.MESSAGE){var n=r(Object(hl["a"])({imsgs:[t.item.message],channelId:t.item.channel}));r(Object(Me["addMessages"])(n))}else t.item.type===Cc.FILE&&r(Object(Pl["a"])({files:[t.item.file]}));Object(z["a"])({getState:a}).info(wc,"star_added")};var jc=function e(t,r,a){if(!Object(ce["isFeatureEnabled"])(a(),"feature_modern_starred_items"))return;if(!t&&!t.item){Object(z["a"])({getState:a}).info(wc,t.type+" has no item");return}r(Object(Ec["removeStarredItem"])(t.item));Object(z["a"])({getState:a}).info(wc,"star_removed")};Object(Jt["b"])("star_added",Sc);Object(Jt["b"])("star_removed",jc);var Ic=r(601);var Tc=r(668);var Nc=r(72);function Ac(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.existingFields,r=void 0===t?[]:t,a=e.fields,n=void 0===a?[]:a;var i=Object(s["keyBy"])(r,"id");return Object(s["filter"])(n,function(e){return e.possible_values&&void 0!==i[e.id]&&"options_list"===i[e.id].type&&Object(s["some"])(i[e.id].possible_values,function(t){return-1===e.possible_values.indexOf(t)})})}var Rc=Object(Ea["b"])("Update profile fields in a team and its members if necessary",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.teamId,n=r.fields,i=void 0===n?[]:n;var s=t();var o=a||Object(Q["getTeamId"])(s);var l=false;var c=Object(Ba["getTeamById"])(s,o,l);if(c&&c.profile&&c.profile.fields){e(Object(Ba["updateTeamProfileFields"])({teamId:o,fields:i}));var u=Ac({existingFields:c.profile.fields,fields:i});u.length>0&&e(Object(Tc["d"])({fields:u}))}});Rc.propTypes=Ot["b"].shape({teamId:Ot["b"].number,fields:Ot["b"].arrayOf(Nc["a"].TeamProfileField).isRequired});var Mc=Rc;var Pc=Object(Ea["b"])("delete profile fields from a team and its members",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.teamId,n=r.fieldsToDelete,i=void 0===n?[]:n;var s=t();var o=a||Object(Q["getTeamId"])(s);e(Object(Ba["deleteTeamProfileFields"])({teamId:o,fieldsToDelete:i}));e(Object(Tc["e"])({fieldsToDelete:i}))});Pc.propTypes=Ot["b"].shape({teamId:Ot["b"].number,fieldsToDelete:Ot["b"].arrayOf(Ot["b"].string).isRequired});var xc=Pc;function Dc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.team_id;var r=arguments[1];var a=arguments[2];Object(z["a"])({getState:a}).info("User was added to team "+t);Object(Hs["g"])(t)}function Fc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.team_id;var r=arguments[1];var a=arguments[2];Object(z["a"])({getState:a}).info("User was removed from team "+t);Object(Hs["h"])(t)}function Lc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.source_team,r=e.name;var a=arguments[1];var n=arguments[2];var i=n();if(!Object(ce["isFeatureEnabled"])(i,"feature_team_rename_m11n"))return;a(Object(Ba["renameTeam"])({teamId:t,name:r}));Object(yr["teamNameChanged"])(r)}function Bc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.source_team,r=e.icon;var a=arguments[1];var n=arguments[2];var i=n();if(!Object(ce["isFeatureEnabled"])(i,"feature_team_icon_m11n"))return;a(Object(Ba["updateTeamIcon"])({teamId:t,icon:r}))}function Uc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var r=arguments[1];var a=arguments[2];var n=a();if(!Object(ce["isFeatureEnabled"])(n,"feature_team_profile_rtm_handlers"))return;r(Mc({fields:t.fields}));Object(Ic["b"])()}function qc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var r=arguments[1];var a=arguments[2];var n=a();if(!Object(ce["isFeatureEnabled"])(n,"feature_team_profile_rtm_handlers"))return;r(Object(Ba["reorderTeamProfileFields"])({fields:t.fields}));Object(Ic["b"])()}function Gc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var r=arguments[1];var a=arguments[2];var n=a();if(!Object(ce["isFeatureEnabled"])(n,"feature_team_profile_rtm_handlers"))return;var i=t.fields;r(xc({fieldsToDelete:i}));Object(Ic["b"])()}Object(Jt["b"])("user_added_to_team",Dc);Object(Jt["b"])("user_removed_from_team",Fc);Object(Jt["b"])("team_plan_change",Ic["d"]);Object(Jt["b"])("team_rename",Lc);Object(Jt["b"])("team_icon_change",Bc);Object(Jt["b"])("team_profile_reorder",qc);Object(Jt["b"])("team_profile_change",Uc);Object(Jt["b"])("team_profile_delete",Gc);var Hc=r(123);var Wc=r(259);var Vc=r(417);var zc=r(762);function Qc(e,t,r){var a=r();if(!Object(ce["isFeatureEnabled"])(a,"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam||!e.subteam.id){Object(z["a"])({getState:r}).warn("subteam_updated: No message event provided, or no subteam provided in the message event.");return}var n=e.subteam;var i=e.subteam.id;var s=Object(Hc["isUserGroupExistent"])(a,i)&&Object(Hc["getUserGroupById"])(a,i);if(!s){Object(z["a"])({getState:r}).warn("subteam_updated: User group "+i+" not in model.");return}var o=Kc({knownUserGroup:s,newUserGroup:n});t(Object(Hc["upsertUserGroups"])({userGroups:[o]}));Object(ce["isFeatureEnabled"])(r(),"feature_sonic_user_groups")||Object(zc["b"])(i)}function Kc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.knownUserGroup,r=e.newUserGroup;if(t)return i()({},r,{users:t.users||[]});return r}function Yc(e,t,r){if(!Object(ce["isFeatureEnabled"])(r(),"feature_modern_user_groups_rtm"))return;if(Object(ce["isFeatureEnabled"])(r(),"feature_lazy_user_groups")&&Object(ce["isFeatureEnabled"])(r(),"feature_sonic_user_groups"))return;if(!e||!e.subteam_id){Object(z["a"])({getState:r}).warn("subteam_members_changed: No message event provided, or no subteam_id provided in the message event.");return}var a=e.subteam_id;var n=Object(Hc["isUserGroupExistent"])(r(),a)&&Object(Hc["getUserGroupById"])(r(),a);if(!n){Object(z["a"])({getState:r}).warn("subteam_members_changed: Received event for an unknown user group: "+a);return}var i=n.users,o=void 0===i?[]:i;var l=e.added_users,c=void 0===l?[]:l,u=e.removed_users,d=void 0===u?[]:u;var p=o;c.length&&(p=Object(s["union"])(p,c));d.length&&(p=Object(s["difference"])(p,d));t(Object(Hc["bulkAddMembersToGroup"])({groupId:n.id,users:p}));if(!Object(ce["isFeatureEnabled"])(r(),"feature_lazy_user_groups")){var m=Object(ce["getCurrentUserId"])(r());var h=!!Object(Wc["getCurrentMemberUserGroupRegExps"])(r())[a];h&&!Object(s["includes"])(p,m)?t(Object(Wc["removeCurrentMemberUserGroupRegexp"])(a)):!h&&Object(s["includes"])(p,m)&&t(Object(Wc["addCurrentMemberUserGroupRegexp"])(n))}}function Jc(e,t,r){if(!Object(ce["isFeatureEnabled"])(r(),"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam){Object(z["a"])({getState:r}).warn("subteam_created: No message event provided, or no subteam provided in the message event.");return}t(Object(Hc["upsertUserGroups"])({userGroups:[e.subteam]}));Object(ce["isFeatureEnabled"])(r(),"feature_sonic_user_groups")||Object(zc["b"])(e.subteam.id)}function Zc(e,t,r){if(!Object(ce["isFeatureEnabled"])(r(),"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam||!e.subteam.id){Object(z["a"])({getState:r}).warn("subteam_deleted: No message event provided, or no subteam provided in the message event.");return}var a=e.subteam.id;t(Object(Hc["removeGroup"])(a));Object(ce["isFeatureEnabled"])(r(),"feature_sonic_user_groups")||Object(zc["b"])(a)}function Xc(e,t,r){if(!Object(ce["isFeatureEnabled"])(r(),"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam_id){Object(z["a"])({getState:r}).warn("subteam_self_added: No message event provided, or no subteam id provided in the message event.");return}var a=Object(ce["getCurrentUserId"])(r());var n=Object(Hc["getUserGroupById"])(r(),e.subteam_id);var i={groupId:e.subteam_id,memberId:a};t(Object(Hc["addMemberToGroup"])(i));Object(ce["isFeatureEnabled"])(r(),"feature_lazy_user_groups")?t(Object(Vc["upsertUserGroupMembership"])({groupId:e.subteam_id,isMember:true})):t(Object(Wc["addCurrentMemberUserGroupRegexp"])(n))}function $c(e,t,r){if(!Object(ce["isFeatureEnabled"])(r(),"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam_id){Object(z["a"])({getState:r}).warn("subteam_self_removed: No message event provided, or no subteam id provided in the message event.");return}var a=Object(ce["getCurrentUserId"])(r());if(!a)return;var n={groupId:e.subteam_id,memberId:a};t(Object(Hc["removeMemberFromGroup"])(n));Object(ce["isFeatureEnabled"])(r(),"feature_lazy_user_groups")?t(Object(Vc["upsertUserGroupMembership"])({groupId:e.subteam_id,isMember:false})):t(Object(Wc["removeCurrentMemberUserGroupRegexp"])(e.subteam_id))}Object(Jt["b"])("subteam_updated",Qc);Object(Jt["b"])("subteam_members_changed",Yc);Object(Jt["b"])("subteam_created",Jc);Object(Jt["b"])("subteam_deleted",Zc);Object(Jt["b"])("subteam_self_added",Xc);Object(Jt["b"])("subteam_self_removed",$c);var eu=r(90);var tu=r(37);var ru=r(280);var au=r(455);var nu=r(699);Object(fe["b"])({actions:[Ee["setSearchPref"]],sideEffect:function e(t,r,a){var n=a();if(!Object(tu["getVisible"])(n))return;var i=Object(eu["getRequest"])(n),s=i.query;r(Object(eu["clearResponse"])());r(Object(ru["a"])({query:s,fetchSuggestions:true}));s&&r(Object(ru["i"])({query:s}))}});Object(fe["b"])({actions:[Ee["setSearchPref"]],sideEffect:function e(t,r){r(Object(eu["setRequestFromEditableRequest"])({fetchSuggestions:true}));r(Object(nu["startQuerySession"])())}});Object(fe["b"])({actions:[ue["setActiveChannel"],qs["a"]],sideEffect:function e(t,r,a){var n=a();Object(tu["getVisible"])(n)&&r(Object(au["a"])())}});var iu=r(279);var su=r(793);var ou=Object(Mr["c"])("TS.highlights_briefing.handleFeedback",function(){return false});function lu(e,t){ou(e.payload);t(Object(su["b"])(e.payload))}function cu(e,t,r){if(!e.payload.prevChannelId||e.payload.channelId===e.payload.prevChannelId)return;var a=r();if(!Object(ce["useReactMessages"])(a))return;var n=false;var i=Object(re["getChannelById"])(a,e.payload.prevChannelId,n);if(!i||!i.last_read)return;var s=Object(iu["getHighlightedTimestampsPriorToTimestamp"])(a,{channelId:e.payload.prevChannelId,beforeTs:i.last_read});if(!s.length)return;var l=o.a.reduce(s,function(e,t){e[t]={sliHighlight:{isHighlight:false}};return e},{});t(Object(iu["setHighlightsForMessages"])(aa()({},e.payload.prevChannelId,l)))}Object(fe["b"])({actions:[iu["setFeedbackForHighlight"]],sideEffect:lu});Object(fe["b"])({actions:[ue["setActiveChannel"]],sideEffect:cu});var uu=10;var du=9e5;var pu=void 0;var mu={};var hu={};var fu={};function vu(){void 0===pu&&(pu=Object(J["a"])(uu));return pu}var bu="asleep";var gu="connecting";var _u="connected";var yu="wait_connectivity";var ku="wait_rate_limit";function Ou(e){if(Object(ae["isAsleep"])(e))return bu;if(Object(ae["isConnecting"])(e))return gu;if(Object(ae["isConnected"])(e))return _u;if(Object(ae["isWaitingForConnectivity"])(e))return yu;if(Object(ae["isWaitingForRateLimit"])(e))return ku;return"disconnected"}function Eu(e,t,r){if(!vu())return;var a=r();var n=Object(Q["getTeamId"])(a);var i=Ou(a);if(hu[n]!==i){hu[n]=i;mu[n]=mu[n]||[];mu[n].push({status:i,ts:window.performance.now()})}}function wu(e,t,r){if(!vu())return;var a=r();var n=Object(Q["getTeamId"])(a);if(fu[n])return;fu[n]=performance.now();var i=Object(Oa["a"])(du,.8,1.2);setInterval(function(){if(!mu[n])return;var e={};mu[n].forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.status,a=t.ts;var i=arguments[1];var s=mu[n][i+1];var o=s?s.ts:performance.now();var l=o-a;e[r]=e[r]||0;e[r]+=l});Object.keys(e).forEach(function(t){var r=e[t];Object(Z["c"])("ws_tis_"+t,r)});var t=performance.now()-fu[n];var r=e[bu]||0;Object(Z["c"])("ws_tis_duration",t);Object(Z["c"])("ws_tis_duration_awake",t-r);fu[n]=performance.now();mu[n]=[{status:hu[n],ts:window.performance.now()}]},i)}Object(fe["a"])([{actions:[ae["stateChanged"]],sideEffect:Eu},{actions:[ka["start"]],sideEffect:wu}]);function Cu(e,t){if(!Object(Y["a"])())return;t(Object(ka["finalizeProvisionalConnection"])())}Object(fe["b"])({actions:[ae["provisionallyConnected"]],sideEffect:Cu});var Su=r(150);var ju=function e(t,r,a){var n=a();var i=Object(z["a"])({state:n,label:"THREADS"});if(!Object(ce["isFeatureEnabled"])(n,"feature_react_threads"))return;var o=Object(de["getSecondaryView"])(n);if("thread"!==o&&"convo"!==o)return;var l=Object(de["getFlexParams"])(n)[0];var c=Object(da["decodeThreadKey"])(l),u=c.channelId,d=c.threadTs;var p=t.type===re["addOrReplaceChannels"].getType()&&Object(s["some"])(t.payload.channels,function(e){return e.id===u&&Object(me["isPrivateChannel"])(e)});var m=t.type===Ae["removeTimestamp"].getType()&&t.payload.channelId===u&&t.payload.timestamp===d;switch(true){case p:i.action("Closing flexpane: user left private channel");break;case m:i.action("Closing flexpane: last message in thread deleted");break;default:break}(p||m)&&r(Object(Su["a"])())};Object(fe["b"])({actions:[re["addOrReplaceChannels"]],sideEffect:ju,reasons:[re["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]});Object(fe["b"])({actions:[Ae["removeTimestamp"]],sideEffect:ju});var Iu={};function Tu(e,t,r){var a=r();var n=Object(Q["getTeamId"])(a);if(Iu[n])return;Iu[n]=setInterval(function(){t(Object(Ho["checkTypingMap"])())},1e3)}function Nu(e,t,r){var a=r();var n=Object(Q["getTeamId"])(a);if(!Iu[n])return;clearInterval(Iu[n]);delete Iu[n]}Object(fe["b"])({actions:[Ho["updateTyping"]],sideEffect:Tu});Object(fe["b"])({actions:[Ho["clearTypingCleanupInterval"]],sideEffect:Nu});var Au=r(706);var Ru=r(1962);var Mu=r(368);var Pu="POLLING";var xu=1e3;var Du=function(){function e(){ft()(this,e);this._pollTimers={};this._jobs={};this._ticks={};Object(Mu["a"])(this)}bt()(e,[{key:"poll",value:function e(t,r,a){var n=this._tick(t)+a;var i={interval:a,callback:r,cancelled:false};this._addJob(t,n,i);this._startPoll(t);return{cancel:function e(){i.cancelled=true}}}},{key:"_tick",value:function e(t,r){this._ticks[t]||(this._ticks[t]=0);r&&(this._ticks[t]+=1);return this._ticks[t]}},{key:"_addJob",value:function e(t,r,a){this._jobs[t]||(this._jobs[t]={});this._jobs[t][r]||(this._jobs[t][r]=[]);this._jobs[t][r].push(a)}},{key:"_startPoll",value:function e(t){var r=this;if(this._pollTimers[t])return;this._pollTimers[t]=setInterval(function(){var e=Object(K["c"])(t);if(!Object(Ze["isServiceOnline"])(e))return;var a=true;var n=r._tick(t,a);var i=r._jobs[t][n];if(!i)return;Object(z["a"])({teamId:t}).debug(Pu,"Executing up to "+i.length+" scheduled jobs");i.forEach(function(e){if(e.cancelled)return;Promise.resolve(e.callback()).then(function(a){var n=a&&a>0?a:e.interval;var i=r._tick(t)+n;r._addJob(t,i,e);r._startPoll(t)})});delete r._jobs[t][n];if(!Object.keys(r._jobs[t]).length){clearInterval(r._pollTimers[t]);delete r._pollTimers[t]}},xu)}}]);return e}();var Fu=Object(s["memoize"])(function(){return new Du});function Lu(e,t,r){if(!e)throw new Error("PollingManager must be passed a `teamId`");if(!(t instanceof Function))throw new Error("PollingManager must be passed a `callback` function");if(!r||r<=0)throw new Error("PollingManager must be passed an `interval` greater than 0");return Fu().poll(e,t,r)}var Bu={};Object.defineProperty(Bu,"getPollingManager",{get:function e(){return Fu}});Object.defineProperty(Bu,"resetPollingManager",{get:function e(){return function(){return Fu.cache.set(void 0,new Du)}}});var Uu={};var qu=function e(){var t=Date.now();var r=t;var a=0;return function(){var e=Date.now();var n=e-t;var i=e-r;a+=1;r=e;Object(Z["h"])("poll_client_unreads_since_start",n,{in_seconds:true});Object(Z["h"])("poll_client_unreads_since_most_recent",i,{in_seconds:true});Object(Z["c"])("poll_client_unreads_interval_"+a)}};var Gu=function e(){var t=[60,600,3600];var r=0;return function(){var e=t[r];r<t.length-1&&(r+=1);return e}};function Hu(e){Uu[e]&&Uu[e].cancel();var t=Gu();var r=qu();Uu[e]=Lu(e,function(){r();return Object(Oa["a"])(t(),-.2,.2)},Object(Oa["a"])(t(),-.2,.2))}var Wu=Object(Ea["b"])("Poll client unreads API",function(e,t){return Object(ce["isFeatureEnabled"])(t(),"feature_degraded_sidebar")&&Hu(Object(Q["getTeamId"])(t()))});Wu.propTypes=null;var Vu={clientUnreadsPollByTeam:Uu,makeIntervalFactory:Gu,makeMetricsFactory:qu};var zu=Wu;var Qu=r(2092);var Ku=r(503);var Yu="UNREAD-COUNTS";var Ju={};function Zu(e){Ju[e]||Xu(e);return Ju[e]}function Xu(e){Ju[e]={}}var $u={};function ed(e){$u[e]||($u[e]={});return $u[e]}function td(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"unread-counts/fetchHistoryForCounting";var i=r();var s=Object(Q["getTeamId"])(i);var l=Zu(s);var c=Object(z["a"])({state:i});if(l[e.id]){c.warn("Ignoring new unread counting history request for "+e.id);return}var u=ed(s);var d=u[e.id];if(d){if(!a||!o.a.isNumber(d)){c.info(Yu,"Dropping unread history request for "+e.id+" since there is already one pending");return}c.info(Yu,"Cancelling timer and making history request for "+e.id+" now");clearTimeout(u[e.id])}var p=a?0:o.a.random(2500,1e4);c.info(Yu,"Fetching history for unread counting: "+e.id+", waiting "+p+" ms");u[e.id]=setTimeout(function(){var r=!a&&t(Object(Ru["b"])({channelId:e.id}));if(r){delete u[e.id];return}c.info("HISTORY-FETCH","Fetching history for unread counting: "+e.id);u[e.id]=t(Object(Ku["b"])({channelId:e.id,type:Object(me["getChannelType"])(e),oldest:null,latest:null,reason:n})).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.msgs,n=r.hasMore,i=r.pinCount,s=r.deleted;l[e.id]=true;var c=o.a.map(a,"ts");t(Object(Au["a"])({msgs:a,channelId:e.id,latest:o.a.max(c),oldest:o.a.min(c),hasMore:{hasMoreStart:n,hasMoreEnd:false},forceUnreadCount:true,deleted:s}));o.a.isNumber(i)&&t(Object(ql["updatePinCount"])({channelId:e.id,count:i}))}).finally(function(){delete u[e.id]})},p)}var rd={};function ad(e){rd[e]||(rd[e]={});return rd[e]}function nd(e,t,r){var a=e.id;var n=Object(z["a"])({getState:r});var i=ad(Object(Q["getTeamId"])(r()));if(i[a]){n.info(Yu,"Ignoring redundant initial count sync request for "+e.id);return}i[a]=true;var s=o.a.random(2500,1e4);n.info(Yu,"Syncing initial counts for "+e.id+" in "+s+" ms");setTimeout(function(){t(Object(ua["g"])({channelId:a})).then(function(r){var n=r.has_unreads?1:0;var i=o.a.isNumber(r.mention_count)?r.mention_count:0;var s=Object(me["isIm"])(e)||Object(me["isMpim"])(e)?i:n;t(Object(xe["setInitialUnreadCountsForChannel"])({id:a,unreadCnt:s,unreadHighlightCnt:i}))}).finally(function(){delete i[a]})},s)}function id(e,t,r){var a=r();if(Object(Y["a"])()||!Object(ce["isFeatureEnabled"])(a,"feature_degraded_send")||!Object(ce["useReactMessages"])(a)||!Object(ce["isClientApp"])(a))return;sd(e,t,r)}function sd(e,t,r){var a=r();if(!Object(ce["useReactMessages"])(a)||!Object(ce["isClientApp"])(a))return;var n=Object(ae["wasLastConnectFast"])(a);if(n)return;var i=Object(Q["getTeamId"])(r());Xu(i);if((Object(Y["a"])()||Object(ce["isFeatureEnabled"])(a,"feature_degraded_send"))&&Object(ae["isFirstConnection"])(a)){t(zu());return}t(Object(xe["setInitialUnreadCounts"])({}));t(Object(Qu["a"])()).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(Ru["a"])(e));if(Object(ce["isFeatureEnabled"])(a,"feature_degraded_send")){var r=o.a.compact(o.a.concat(e.channels,e.groups));t(Object(re["reconcileChannelAccess"])({channels:r}))}}).finally(function(){return t(zu())})}function od(e,t,r){var a=r();var n=Object(z["a"])({state:a});if(!Object(ce["useReactMessages"])(a))return;var i=e.payload,s=i.channelId,l=i.timestamps,c=i.forceUnreadCount,u=i.append,d=i.fromEvtLog;if(o.a.isEmpty(l))return;if(d)return;var p=false;var m=Object(re["getChannelById"])(a,s,p);if(!m)return;var h=Object(me["getLastReadTs"])(m);var f=Object(me["isRead"])(m);var v=o.a.some(l,function(e){return e>=h});if(!v&&!c)return;var b=s===Object(de["getPrimaryView"])(a);b&&n.info(Yu,"Counting unreads in "+s+" because ("+l.length+") timestamps added");var g=t(Object(Ru["b"])({channelId:s}));if(!g){var _=false;var y="unread-counts/onAddTimestamps";ld(r,m,l)&&td(m,t,r,_,y)}if(l&&l.length>1&&f){var k=Object(re["getChannelById"])(r(),s);Object(me["isUnread"])(k)&&Object(je["a"])({id:s,initial:Object(xe["getInitialUnreadCountsByChannelId"])(r(),s)},"unexpected_unread_after_loading_history",null,true)}if(Object(ce["isFeatureEnabled"])(a,"feature_degraded_send")){var O=e.payload,E=O.hasMore,w=O.oldest;var C=o.a.get(E,"hasMoreEnd",!w||E);if(l&&v&&!C){var S=false;b&&n.info(Yu,"Checking unreads in "+s+" after a new message");qe(s,t,r,S)}}else if(l&&1===l.length&&l[0]>h){var j=!u;b&&n.info(Yu,"Checking unreads in "+s+" after a new message");qe(s,t,r,j)}}function ld(e,t,r){if(Object(me["isIm"])(t)||Object(me["isMpim"])(t))return true;var a=e();var n=o.a.map(r||[],function(e){return Object(Me["getMessageByTimestamp"])(a,t.id,e)});return o.a.some(n,function(e){if(!e)return false;var t=Object(rl["f"])(e);return t.non_channel_mentions})}function cd(e,t,r){var a=r();var n=Object(z["a"])({state:a});if(!Object(ce["useReactMessages"])(a))return;var i=e.payload,s=i.channelId,o=i.timestamp,l=i.forceUnreadCount,c=i.fromEvtLog;if(c)return;if(!o)return;var u=false;var d=Object(re["getChannelById"])(a,s,u);if(!d)return;var p=Object(me["getLastReadTs"])(d);if(o<p&&!l)return;n.info(Yu,"Counting unreads in "+s+" because message removed");var m=t(Object(Ru["b"])({channelId:s}));m||ud({dispatch:t,getState:r,channel:d,timestamp:o})&&nd(d,t,r)}function ud(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getState,r=e.channel,a=e.timestamp;var n=Object(Ae["getTimestampsByChannelId"])(t(),r.id,null),i=n.timestamps,s=n.start;var o=Object(me["getLatestTs"])(r,i);var l=s||o+1e-6;return a<l}function dd(e,t,r){if(!e.payload.last_read)return;var a=r();var n=Object(z["a"])({state:a});if(!Object(ce["useReactMessages"])(a))return;var i=e.payload.id;var s=false;var o=Object(re["getChannelById"])(a,i,s);if(!o)return;if(Object(me["isFromAnotherTeam"])(o))return;n.info(Yu,"Counting unreads in "+i+" because last_read changed to "+e.payload.last_read);var l=t(Object(Ru["b"])({channelId:i}));if(!l){var c=true;var u="unread-counts/onLastReadUpdated";td(o,t,r,c,u)}}function pd(e,t,r){var a=r();var n=Object(z["a"])({state:a});if(!Object(ce["useReactMessages"])(a))return;var i=e.payload,s=i.id,o=i.unreadCnt,l=i.unreadHighlightCnt;var c=false;var u=Object(re["getChannelById"])(a,s,c);if(!u)return;n.info(Yu,"Counting unreads in "+s+" because initial counts updated to {"+o+", "+l+"}");t(Object(Ru["b"])({channelId:s}))}Object(fe["b"])({actions:[ka["start"]],sideEffect:id});Object(fe["b"])({actions:[ae["connected"]],sideEffect:sd});Object(fe["b"])({actions:[Ae["addTimestamps"]],sideEffect:od});Object(fe["b"])({actions:[Ae["removeTimestamp"]],sideEffect:cd});Object(fe["b"])({actions:[re["lastReadUpdated"]],sideEffect:dd});Object(fe["b"])({actions:[xe["setInitialUnreadCountsForChannel"]],sideEffect:pd});var md={shouldFetchHistoryAfterTimestampsAdded:ld,shouldFetchHistoryAfterTimestampRemoved:ud,syncInitialCounts:nd};var hd="USER_GROUP_MEMBERSHIP";var fd=Object(Ca["a"])("Fetch user groups by id",function(e,t){return e(Object(wa["a"])({method:"subteams.membership"})).then(function(e){return e.subteams}).catch(function(e){if(e.data&&"user_is_restricted"===e.data.error){Object(z["a"])({getState:t}).warn(hd,"subteams.membership failed with user_is_restricted: Guests are not allowed to have user groups");return[]}Object(z["a"])({getState:t}).error(hd,"failed to fetch user group membership");throw e})});fd.propTypes=null;function vd(e,t,r){var a=r();var n=Object(z["a"])({state:a});if(!Object(ce["isFeatureEnabled"])(a,"feature_lazy_user_groups")||!Object(ce["isClientApp"])(a))return Promise.resolve();var i=Object(ae["wasLastConnectFast"])(a);if(i)return Promise.resolve();if(!Object(Y["a"])())return Promise.resolve();if(Object(ae["isFirstConnection"])(a))return Promise.resolve();t(Object(Vc["clearAllUserGroupMembership"])());return t(fd()).then(function(e){if(!e)return;t(Object(Vc["bulkAddUserGroupMembership"])({userGroups:e,isMember:true}));n.info(hd,"Completed subteams.membership processing")})}Object(fe["b"])({actions:[ae["connected"]],sideEffect:vd});var bd={updateUserGroups:vd};function gd(e,t,r){Object(z["a"])({getState:r}).info("WINDOW-UNLOADING","workspace handling window unloading event")}Object(fe["b"])({actions:[Re["setUnloading"]],sideEffect:gd});var _d=r(651);var yd=r(3543);var kd=r(685);var Od=r(219);var Ed=r(894);var wd=r(750);var Cd=r(896);var Sd=r(3419);var jd=r(507);var Id=r(351);var Td=r(627);var Nd=r(499);var Ad=r(650);var Rd=r(815);var Md=r(850);var Pd=r(166);var xd=r(235);var Dd=r(3444);var Fd=r(3303);var Ld=r(711);var Bd=r(1163);var Ud=r(680);var qd=r(142);var Gd=r(268);var Hd=r(751);var Wd=r(180);var Vd=r(682);var zd=r(712);var Qd=r(3522);var Kd=r(616);var Yd=r(508);var Jd=r(128);var Zd=r(814);var Xd=r(1130);var $d=r(374);var ep=r(1131);var tp=r(741);var rp=r(602);var ap=Object(G["a"])({channelNamesToIds:Xd["default"],inviters:Go["default"],mutedChannels:$d["default"],needsApiMarking:ep["default"],needsCreatedMessage:tp["default"],prqMetrics:rp["default"]});var np=ap;var ip=r(432);var sp=r(502);var op=r(170);var lp=r(816);var cp=r(679);var up=r(893);var dp=r(895);var pp=r(3495);var mp=r(1132);var hp=r(354);var fp=r(356);var vp=r(355);var bp=r(187);r.d(t,"a",function(){return Cp});var gp={},_p=gp.PERSIST_WRITE_FREQUENCY,yp=gp.PERSIST_METRICS_LABEL,kp=gp.persistLogPrefix;var Op={},Ep=Op.getPersistConfigForTeam;var wp=Object(J["a"])(100);function Cp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamId,r=e.reducers,n=void 0===r?a:r,o=e.middlewares,c=void 0===o?pp["a"]:o,u=e.customEnhancers,d=void 0===u?mp["a"]:u,p=e.initialState,m=void 0===p?{}:p;if(!t)throw new Error("configureStore must be called with a teamId parameter");var h=le({teamId:t,customEnhancers:d,middlewares:c});var f=void 0!==Ep;var v=Object(G["a"])(n);var b=void 0;var g=void 0;if(f&&Object(Y["a"])()){var _=Ep(t);v=T(_,v);b=y(_);g=y(i()({},_,{synchronousWrites:true}))}var k=Object(l["createStore"])(v,m,h);if(f&&Object(Y["a"])()){var O=function e(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(z["a"])({teamId:t}).info(kp,"Persisting state to storage");wp&&Object(Z["e"])(yp+"_persistence_write_mark");var a=void 0;r?g.update(k.getState()):b.update(k.getState());if(wp){a=Object(Z["g"])(yp,yp+"_persistence_write_mark");Object(z["a"])({teamId:t}).info(kp,"Persisted state"+(a?": "+a.toFixed(1)+"ms":""))}};k.subscribe(Object(s["throttle"])(O,_p));window.addEventListener("beforeunload",function(){k.dispatch(Object(H["clearSerializedData"])());Object(W["c"])();Object(z["a"])({teamId:t}).info(kp,"Persisting state to storage because the window is about to unload");var e=true;O(e)})}k._initStore=function e(){k.dispatch(Object(Q["setTeamId"])(t))};k._initStore();Object(K["e"])(t,k);Object(V["exportToTeamDebugger"])(t,"redux",k);return k}var Sp=void 0;Object(V["exportToGlobalDebuggerWithGetter"])("redux",function(){if(Sp)return Sp;var e=function e(t,r){var a=t.replace("@slack/redux/","").replace(/\.js$/,"").replace(/-middleware$/,"").replace(/\//,"_");return Object(s["camelCase"])(a+"_"+r)};var t=function t(r){var a={};Object.values(r).forEach(function(t){t.meta&&(a[e(t.meta.file,t.meta.name)]=t)});return a};var r=function e(t){var r={};Object.values(t).forEach(function(e){r[e.meta.name]=e});return r};Sp={actions:t(Object(hp["a"])()),middlewares:r(Object(bp["a"])()),reducers:t(Object(vp["a"])()),selectors:t(Object(fp["a"])()),thunks:t(Object(Ea["a"])())};return Sp})},function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(682);Object(a["a"])("interop.onboarding",{fetchTeamCreationWorkflow:function e(){return TS.redux.dispatch(Object(n["fetchTeamCreationWorkflow"])())},showSecondAccountSetupBanner:function e(){return TS.redux.dispatch(Object(n["showSecondAccountSetupBanner"])())}})},,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(97);var u=r.n(c);var d=r(8);var p=r.n(d);var m=r(3);var h=r.n(m);var f=r(1);var v=r.n(f);var b=r(129);var g=r(2);var _=r.n(g);var y=r(673);var k=r(783);function O(e){var t={};for(var r=0;r<e.length;r++)t[e[r].key]={index:e[r].index,next:_.a.get(e[r+1],"key")};return t}var E=h()({},y["a"].propTypes,{stickyItems:b["b"].arrayOf(b["b"].shape({key:b["b"].string,index:b["b"].number})),stickyOffsetTop:b["b"].number,stickyZIndex:b["b"].number});var w=h()({},y["a"].defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null});var C=function(e){p()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.stickyItems=O(e.stickyItems);return r}s()(t,[{key:"componentWillReceiveProps",value:function e(r){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,r);this.stickyItems=O(r.stickyItems)}},{key:"renderItem",value:function e(r,a){if(!(r in this.stickyItems))return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItem",this).call(this,r,a);var n=0===a?-100:this.getTop(r);var i=this.layout.getHeight(r);var s=this.layout.getHeightValidity(r);var o=this.getContentHeight();var l=this.stickyItems[r].next;var c=l?this.getTop(l):o;var d=Math.max(0,o-c);var p=this.props.getAriaLabelForRow;var m=p&&p(a);return v.a.createElement("div",{key:""+r+n+d,className:"c-virtual_list__sticky_container",role:"presentation",style:{top:n,bottom:d}},v.a.createElement(k["a"],{id:r,height:i,validity:s,className:"c-virtual_list__item--sticky",style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},onHeightChange:this.setHeight,ariaLabel:m},this.props.rowRenderer(a)))}},{key:"renderItems",value:function e(){var r=u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var a=this.state.start;var n=_.a.sortedIndexBy(this.props.stickyItems,{index:a},function(e){return e.index})-1;var i=this.props.stickyItems[n];i&&r.unshift(this.renderItem(i.key,i.index));return r}}]);return t}(y["a"]);t["a"]=C;C.propTypes=E;C.defaultProps=w},function(e,t,r){"use strict";var a=r(24);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(5);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(7);var p=r.n(d);var m=r(97);var h=r.n(m);var f=r(8);var v=r.n(f);var b=r(1);var g=r.n(b);var _=r(10);var y=r(3539);var k=r(2248);var O=r.n(k);var E=new _["b"]("messages");var w=20;var C=function(e){v()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.pendingUpdate=null;r.recomputeOffsets(e);r.overscan=Math.max(200,e.height/2);return r}u()(t,[{key:"componentDidUpdate",value:function e(){var r;for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];(r=h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this)).call.apply(r,[this].concat(n));0===this.props.keys.length&&this.loadMore();this.layout.setBottomMargin(this.getLoadingOffsetBottom());this.pendingUpdate=false}},{key:"getOffset",value:function e(){var t=this.getLoadingOffsetTop();return this.startTop-t}},{key:"getLoadingOffsetTop",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedStart&&0===this.state.start)return 0;if(this.layout.getTotalHeight()<=this.props.height)return 0;if(0!==this.state.start)return 96;return 56}},{key:"getLoadingOffsetBottom",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedEnd&&this.state.end===this.props.keys.length)return 0;return 96}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;return h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)+this.getOffset()}},{key:"getContentHeight",value:function e(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}},{key:"getTop",value:function e(t){return this.layout.getTop(t)-this.getOffset()}},{key:"getBottom",value:function e(t){return this.layout.getBottom(t)-this.getOffset()}},{key:"setScrollTop",value:function e(r){var a=r<this.getOffset();var n=r+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(a&&0!==this.state.start||n&&this.state.end!==this.props.keys.length){this.scrollTop=r;this.relayout();return}h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,r-this.getOffset())}},{key:"scrollToOffset",value:function e(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.animate,i=a.absolute;if(!this.node)return;if(this.pendingUpdate)return;var s=i?r:r-this.getOffset();!i&&s>0&&s<this.getLoadingOffsetTop()&&(s=0);var o=this.bracketScrollTop(s);if(!i&&o!==s){this.setScrollTop(r);return}if(n){this.scrollAnimation=this.node.scrollWithAnimation(o);return}h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,o)}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,t))}},{key:"resetRendered",value:function e(){this.overscan=this.props.height/2}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getScrollTop();var i=this.layout.getTotalHeight();var s=0===t&&n<1;var o=r===a.keys.length&&n+a.height>i-1;var l=!a.keys.length||i<=a.height||s;var c=!a.keys.length||i<=a.height||o;if(l&&c)return a.loadAround();if(l)return a.loadPre();if(c)return a.loadPost();return false}},{key:"relayout",value:function e(){var t=this;this.setState(function(e,r){if(r.isLoading)return null;var a=e.start,n=e.end;var i=t.startKey;var o=t.endKey;t.recomputeOffsets(r,a,n);var l=t.node?t.node.scrollTop():0;var c=t.getScrollTop();var u=l-1<=0||c-1<=t.getOffset();var d=l+1>=t.getContentHeight()-r.height||c+1>=t.endBottom-r.height;var p={start:a,end:n};if(t.startKey!==i||t.endKey!==o||u&&0!==a||d&&n!==r.keys.length){e.scrolling&&(t.overscan=8e3);p=t.computeBounds(r,c);var m=p,h=m.start,f=m.end;t.recomputeOffsets(r,h,f);u=c-1<=t.getOffset();d=c+r.height+1>=t.endBottom+t.getLoadingOffsetBottom()}(u&&0===p.start||d&&p.end===r.keys.length||t.layout.getTotalHeight()<r.height&&0===p.start)&&t.loadMore(a,n,r);var v=t.layout.getTops();if(p.start===a&&p.end===n&&v===e.tops)return null;t.scrollAnimation&&t.scrollAnimation.cancel();t.pendingUpdate=true;t.scrollTop=c;return s()({},p,{tops:v})})}},{key:"recomputeOffsets",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.start;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.end;var n=this.layout.getTotalHeight()<=t.height;this.startKey=t.keys[r];this.endKey=t.keys[a-1];this.startTop=n?0:this.layout.getTop(this.startKey)||0;this.endBottom=this.layout.getBottom(this.endKey)||0}},{key:"computeBounds",value:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments[1];var n=a-this.overscan;var i=a+r.height+this.overscan;var s=h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBounds",this).call(this,n,i);return this.snapBounds(r,s)}},{key:"snapBounds",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var r=arguments[1];var a=r.start,n=r.end;return{start:a<w?0:a,end:t.keys.length-n<w?t.keys.length:n}}},{key:"renderLoading",value:function e(t){var r=t?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15};var a=t?"degradedLoadingTop":"degradedLoadingBottom";return g.a.createElement("div",{key:a,className:"p-degraded_list__loading",style:r},E.rt("Loading history..."))}},{key:"renderItems",value:function e(){var r=h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var a=this.props.keys.length>1&&(!this.props.reachedStart||this.state.start>0);var i=this.props.keys.length>1&&(!this.props.reachedEnd||this.state.end<this.props.keys.length);return[a&&this.renderLoading(true)].concat(n()(r),[i&&this.renderLoading(false)])}}]);return t}(y["a"]);t["a"]=C},function(e,t,r){"use strict";r.d(t,"a",function(){return a});function a(){var e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return true;if(e.indexOf("force_infinite_list=1")>0)return false;var t=window.navigator.userAgent;if(-1!==t.indexOf("Firefox"))return true;if(-1!==t.indexOf("Windows"))return true;if(-1!==t.indexOf("Linux"))return true;return false}},,function(e,t,r){"use strict";r.r(t);r.d(t,"setThreads",function(){return b});r.d(t,"getThreads",function(){return _});r.d(t,"refreshThreads",function(){return y});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(129);var u=r(4);var d=r(870);var p=r(422);var m=r(706);var h=r(36);var f=r(207);var v=r(17);var b=Object(u["a"])("Set the thread root keys");b.propTypes=c["b"].arrayOf(c["b"].string).isRequired;var g=Object(u["c"])(n()({},b,function(e,t){if(e.threads===t)return e;return s()({},e,{threads:t})}),{threads:[]});g.propTypes={threads:c["b"].arrayOf(c["b"].string)};var _=Object(u["d"])(function(e){return e&&e.allThreads&&e.allThreads.threads});var y=Object(u["e"])("Call subscriptions.thread.getView and merge in results",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.currentTs,n=r.limit;return e(Object(d["b"])({currentTs:a,limit:n})).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.threads;var n=Object(v["a"])({getState:t,label:"ALL-THREADS-STORE"});var i=[];a.forEach(function(t){if(!t.root_msg){n.error("subscriptions.thread.getView: missing root_msg");return}if(!t.root_msg.thread_ts){n.error("subscriptions.thread.getView: root_msg has no thread_ts");return}if(!t.root_msg.channel){n.error("subscriptions.thread.getView: no channel ID on root message");return}if(!t.root_msg.subscribed){n.error("subscriptions.thread.getView: not subscribed to "+t.root_msg.channel+"-"+t.root_msg.ts);return}var r=t.unread_replies||[];var a=t.latest_replies||[];var s=t.root_msg;var l=Object(f["getThreadKey"])(s.channel,s.ts);var c=r.concat(a);if(c.length){var u=Object(o["uniqBy"])(c,"ts");if(u.length!==c.length){n.error("subscriptions.thread.getView: duplicate replies to "+t.root_msg.channel+"-"+t.root_msg.ts);c=u}c=Object(o["sortBy"])(c,"ts")}var d=e(Object(p["a"])({imsgs:[s],channelId:s.channel}));var v=e(Object(p["a"])({imsgs:c,channelId:s.channel}));var b=Object(h["getReplyCount"])(s)>c.length;if(b){e(Object(m["a"])({msgs:d,channelId:l,oldest:s.ts,hasMore:{hasMoreStart:false,hasMoreEnd:true}}));e(Object(m["a"])({msgs:v,channelId:l,latest:Object(o["last"])(c).ts,oldest:Object(o["first"])(c).ts,hasMore:{hasMoreStart:true,hasMoreEnd:false}}))}else e(Object(m["a"])({msgs:d.concat(v),channelId:l,latest:Object(o["last"])(c).ts,hasMore:{hasMoreStart:false,hasMoreEnd:false}}));i.push(s)});var s=Object(o["map"])(i,function(e){return Object(f["getThreadKey"])(e.channel,e.ts)});e(b(s))})});y.propTypes={currentTs:c["b"].number,limit:c["b"].number};t["default"]=g},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(67);var c=r.n(l);var u=r(3);var d=r.n(u);var p=r(5);var m=r.n(p);var h=r(7);var f=r.n(h);var v=r(6);var b=r.n(v);var g=r(8);var _=r.n(g);var y=r(129);var k=r(2086);var O=r(2);var E=r(206);var w=r(122);var C=r(78);var S=r(44);var j=r(11);var I=r(650);var T=r(69);var N=r(712);var A=r(428);var R=r(480);var M=r(165);var P=r(3406);var x=r(207);var D=r(63);var F=r(167);var L=r(10);var B=r(17);var U=r(70);var q=r(102);var G=r(884);var H=250;var W={oldest:y["b"].string,latest:y["b"].string,timestamps:y["b"].arrayOf(y["b"].string).isRequired,listRenderer:y["b"].func.isRequired,startTs:y["b"].string,highlightKey:y["b"].string,requestHistory:y["b"].func,reachedStart:y["b"].bool,reachedEnd:y["b"].bool,layout:y["b"].object};var V={oldest:void 0,latest:void 0,startTs:void 0,highlightKey:void 0,requestHistory:O["noop"],reachedStart:true,reachedEnd:true,layout:void 0};var z=function(e){_()(t,e);function t(e){m()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onScroll=r.onScroll.bind(r);r.setListRef=r.setListRef.bind(r);r.loadAround=r.loadAround.bind(r);r.loadPre=r.loadPre.bind(r);r.loadPost=r.loadPost.bind(r);r.list=null;r.layout=e.layout||new G["a"];r.layout.setAnchor(e.startTs||false);r.layout.setStickToBottom(e.reachedEnd);r.state={isLoading:false};return r}b()(t,[{key:"componentWillReceiveProps",value:function e(t){if(!this.list)throw new Error("MessageList needs a ref to List");(t.startTs!==this.props.startTs||t.highlightKey&&t.highlightKey!==this.props.highlightKey)&&(t.timestamps===this.props.timestamps?this.list.scrollToKey(t.startTs,{lazy:true}):this.layout.setAnchor(t.startTs));this.layout.setStickToBottom(t.reachedEnd)}},{key:"componentDidUpdate",value:function e(t){!t.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(false)}},{key:"onScroll",value:function e(){this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"loadAround",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.oldest,n=r.latest,i=r.reachedStart,s=r.reachedEnd,o=r.timestamps,l=r.startTs;if(s)return this.loadPre();if(i)return this.loadPost();var c=n||Object(O["first"])(o)||l;var u=a||Object(O["last"])(o)||l;var d=this.props.requestHistory({latest:c,oldest:u});if(d){d.finally(function(){return Promise.delay(H)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"around"}})}return d}},{key:"loadPre",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.oldest,n=r.reachedStart,i=r.timestamps,s=r.startTs;if(n)return false;var o=a||Object(O["first"])(i)||s;var l=this.props.requestHistory({latest:o});if(l){l.finally(function(){return Promise.delay(H)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"loadPost",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.latest,n=r.reachedEnd,i=r.timestamps,s=r.startTs;if(n)return false;this.isLoading=true;var o=a||Object(O["last"])(i)||s;var l=this.props.requestHistory({oldest:o});if(l){l.finally(function(){return Promise.delay(H)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"render",value:function e(){var t=this.props,r=t.reachedStart,a=t.reachedEnd,n=t.timestamps;return this.props.listRenderer({reachedStart:r,reachedEnd:a,keys:n,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}]);return t}(a["PureComponent"]);z.displayName="MessageList";var Q=z;z.defaultProps=V;var K=r(3540);var Y=r(673);var J=r(3541);var Z=r(666);var X=r(1074);var $=r(24);var ee=r.n($);var te=r(15);var re=r.n(te);var ae=r(21);var ne=r(346);var ie=r(1439);var se=r(258);var oe=r(3318);var le=r(1436);var ce=r(2282);var ue={MESSAGE_PANE:"message_pane",THREAD:"thread"};var de={location:y["b"].oneOf(Object(O["values"])(ue)).isRequired,children:y["b"].node,channelId:y["b"].string.isRequired,threadTs:y["b"].string,className:y["b"].string,disableFileUploadsPref:y["b"].string,userCanPostInChannel:y["b"].bool,isEditing:y["b"].bool,openFileUploadDialog:y["b"].func};var pe={children:void 0,threadTs:void 0,className:void 0,disableFileUploadsPref:void 0,userCanPostInChannel:true,isEditing:false,openFileUploadDialog:O["noop"]};var me=function(e){_()(t,e);function t(e){m()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={dragging:false};r.activeElements=new Set;r.containerRef=n.a.createRef();r.onDrop=r.onDrop.bind(r);return r}b()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.containerRef.current;r.addEventListener("dragenter",function(e){if(t.shouldPreventDrag(e))return;e.preventDefault();t.activeElements.add(e.target);1===t.activeElements.size&&t.setState(function(e){return d()({},e,{dragging:true})})});r.addEventListener("dragleave",function(e){e.preventDefault();t.activeElements.delete(e.target);0===t.activeElements.size&&t.setState(function(e){return d()({},e,{dragging:false})})});r.addEventListener("dragover",function(e){if(t.shouldPreventDrag(e))return;e.preventDefault()});r.addEventListener("dragend",function(){t.setState(function(e){return d()({},e,{dragging:false})});t.activeElements.clear()});r.addEventListener("drop",this.onDrop)}},{key:"onDrop",value:function e(t){var r=this.props,a=r.channelId,n=r.threadTs;t.preventDefault();this.setState(function(e){return d()({},e,{dragging:false})});this.activeElements.clear();var i=t.dataTransfer.files;this.props.openFileUploadDialog({files:[].concat(ee()(i)),threadTs:n,initialChannelId:a})}},{key:"shouldPreventDrag",value:function e(t){var r=this.props,a=r.disableFileUploadsPref,n=r.userCanPostInChannel,i=r.isEditing;var s=Object(O["get"])(t,"dataTransfer.types");if(!Object(O["includes"])(s.map(function(e){return e.toLowerCase()}),"files"))return true;if("disable_all"===a)return true;if(!n)return true;if(i)return true;return false}},{key:"maybeRenderOverlay",value:function e(){if(!this.state.dragging)return null;var t=this.props.channelId;switch(this.props.location){case ue.MESSAGE_PANE:return n.a.createElement(oe["a"],{channelId:t});case ue.THREAD:return n.a.createElement(le["a"],null);default:return null}}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.className;return n.a.createElement("div",{className:re()("p-file_drag_drop__container",a),ref:this.containerRef},r,this.maybeRenderOverlay())}}]);return t}(a["Component"]);me.displayName="FileDragDrop";me.defaultProps=pe;var he=function e(t,r){var a=r.channelId,n=r.viewContext;return{disableFileUploadsPref:Object(ae["getTeamPref"])(t,"disable_file_uploads"),userCanPostInChannel:Object(se["k"])(t,a),isEditing:!!Object(ne["getEditingTimestamps"])(t,{channelId:a,viewContext:n}).length}};var fe=function e(t){return{openFileUploadDialog:function e(){return t(ie["a"].apply(void 0,arguments))}}};var ve=Object(Z["b"])(Object(i["connect"])(he,fe)(me));var be=r(1441);var ge=r(860);var _e=r(861);var ye=r(862);var ke=r(863);var Oe=r(345);var Ee=r(370);var we=r(613);var Ce=r(786);var Se=r(1428);var je=r(3527);var Ie=20;var Te={msg:y["b"].object.isRequired,className:y["b"].string,attachments:y["b"].arrayOf(y["b"].object),viewContext:y["b"].string};var Ne={className:void 0,attachments:[],viewContext:void 0};var Ae=function(e){_()(t,e);function t(){m()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"renderAttachmentsOverLimitMaybe",value:function e(t){if(!t.length)return null;var r=this.props.viewContext;var a={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(Oe["a"])("attachmentsOverLimit",this.props.msg.ts,{limit:Ie,viewContext:r})};return n.a.createElement("div",null,n.a.createElement(we["a"],a,t),n.a.createElement(Ce["a"],d()({},a,{render:function e(r,a){return n.a.createElement(Se["a"],{isExpanded:r.isExpanded,onClick:a,attachmentsOverLimitCount:t.length})}})))}},{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.attachments;if(!r||!a||!a.length)return null;var i=Object(O["map"])(a,function(e,t){var a=e.id||t+1;return n.a.createElement(je["a"],{msg:r,attachment:e,key:a})});var s=i.splice(Ie);var o=re()("c-message_kit__attachment",this.props.className);return n.a.createElement("div",{className:o},i,this.renderAttachmentsOverLimitMaybe(s))}}]);return t}(a["PureComponent"]);Ae.displayName="MessageKitAttachments";Ae.defaultProps=Ne;var Re=function e(t,r){return{attachments:Object(Ee["c"])(t,r.msg)}};var Me=Object(Z["b"])(Object(i["connect"])(Re)(Ae));var Pe=r(1107);var xe=r(975);var De=r(792);var Fe=r(865);var Le=r(1170);var Be=r(19);var Ue=r(279);var qe=r(23);var Ge=r(50);var He=r(116);var We=r(36);var Ve=r(12);var ze=r(48);var Qe=r(1395);var Ke=r(1426);var Ye=r(1433);var Je=r(18);var Ze=r(65);var Xe=r(926);var $e=r(1434);var et=r(348);var tt=r(2284);var rt={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled",broadcast:"jump"};var at={msg:y["b"].object.isRequired,className:y["b"].string,children:y["b"].node,showPinned:y["b"].bool,showStarred:y["b"].bool,showBroadcast:y["b"].bool,theme:y["b"].oneOf(["light","dense"]),sliHighlight:y["b"].object,currentUserId:y["b"].string,primaryView:y["b"].string,teamDisplayName:y["b"].string,isSelfIm:y["b"].bool,isSlackbotIm:y["b"].bool,featureTeambot:y["b"].bool,dispatch:y["b"].func,setBackground:y["b"].func};var nt={className:void 0,children:void 0,showPinned:true,showStarred:true,showBroadcast:false,theme:"light",sliHighlight:void 0,currentUserId:void 0,primaryView:void 0,teamDisplayName:void 0,isSelfIm:false,isSlackbotIm:false,featureTeambot:false,dispatch:O["noop"],setBackground:O["noop"]};var it=function(e){_()(t,e);function t(e){m()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onBroadcastClick=r.onBroadcastClick.bind(r);r.renderHighlight=r.renderHighlight.bind(r);r.renderStarButton=r.renderStarButton.bind(r);r.renderBroadcast=r.renderBroadcast.bind(r);r.labelText=null;r.primaryLabelType=null;return r}b()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"onStarClick",value:function e(){Object(et["c"])("stars")}},{key:"onBroadcastClick",value:function e(t){var r=this.props,a=r.dispatch,n=r.msg,i=r.primaryView;t.preventDefault();if(i===n.channel){a(Object(He["jumpToTimestamp"])({ts:n.ts,highlight:true}));return}a(Object(T["setPrimaryView"])({id:n.channel,startTs:n.ts}))}},{key:"setBackground",value:function e(){var e=this.props.setBackground;e({labels:this.labelText&&this.primaryLabelType})}},{key:"getLabelTypes",value:function e(){var t=this.props,r=t.msg,a=t.sliHighlight,n=t.showPinned,i=t.showStarred,s=t.showBroadcast;var o=Object(We["getMessagePinnedInfo"])(r);return Object(Qe["a"])({isPinned:n&&!!o,isEphemeral:Object(We["isEphemeral"])(r),isStarred:i&&Object(We["isStarred"])(r),isBroadcast:s&&Object(We["isThreadBroadcast"])(r),subtype:r.subtype,sliHighlight:!!a})}},{key:"renderPinnedBy",value:function e(t){return n.a.createElement(Xe["a"],{className:"c-message_kit__labels__link",id:t})}},{key:"renderStarButton",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.text;if(!r)return null;return n.a.createElement(Ze["a"],{onClick:this.onStarClick,className:"c-message_kit__labels__link"},r)}},{key:"renderBroadcast",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.text;if(!r)return null;return n.a.createElement(Ze["a"],{onClick:this.onBroadcastClick,className:"c-message_kit__labels__link"},r)}},{key:"renderLabelText",value:function e(t){var r=this.props,a=r.msg,i=r.currentUserId,s=r.isSelfIm,o=r.isSlackbotIm,l=r.teamDisplayName,c=r.featureTeambot;var u=Object(We["getMessagePinnedInfo"])(a);var p=u&&u.pinnedBy;var m=Object(Ye["a"])(d()({},t,{isSelfIm:s,isSlackbotIm:o,currentUserId:i,pinnedBy:p,teamDisplayName:l,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton,renderHighlight:this.renderHighlight,renderBroadcast:this.renderBroadcast,featureMessageLabelsCopy:true,featureTeambot:c}));if(!m)return null;return n.a.createElement("span",{className:"c-message_kit__labels__text"},m)}},{key:"renderLabelIcon",value:function e(t){var r=rt[t];if(!r)return null;return n.a.createElement("div",{className:"c-message_kit__labels__icon"},n.a.createElement(Je["b"],{type:r,size:"inherit"}))}},{key:"renderHighlight",value:function e(){var t=this.props,r=t.msg,a=t.sliHighlight;var i=r.channel,s=r.ts;if(!Object(Ue["shouldShowHighlightsLabel"])(a))return null;return n.a.createElement($e["a"],{sliHighlight:a,channelId:i,ts:s})}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.theme;var i=this.getLabelTypes();var s=Object(Ke["a"])(i);var o=this.renderLabelIcon(s);var l=this.renderLabelText(i);this.labelText=l;this.primaryLabelType=s;if(!l)return r;var c=re()(this.props.className,"c-message_kit__labels","c-message_kit__labels--"+s,"c-message_kit__labels--"+a);return n.a.createElement("div",{className:c},n.a.createElement("div",{className:"c-message_kit__labels__label"},o,l),r)}}]);return t}(a["PureComponent"]);it.displayName="MessageLabels";it.defaultProps=nt;var st=function e(t,r){var a=r.msg;if(!a)return null;var n=a.channel,i=a.ts;var s=Object(j["getCurrentUserId"])(t);var o=Object(Be["getChannelById"])(t,n);var l=Object(T["getPrimaryView"])(t);var c=Object(Ue["getMessageMetaData"])(t,{channelId:n,ts:i}),u=c.sliHighlight;var d=Object(Ve["isSlackbot"])(o);var p=Object(Ve["isYou"])(s,o);var m=Object(j["isFeatureEnabled"])(t,"feature_teambot_active");var h=Object(We["getSourceTeamId"])(a)||Object(qe["getTeamId"])(t);var f=Object(ze["getTeamDisplayName"])(Object(Ge["getTeamById"])(t,h));return{theme:Object(ae["getUserMessagesTheme"])(t),currentUserId:s,primaryView:l,sliHighlight:u,isSlackbotIm:d,isSelfIm:p,teamDisplayName:f,featureTeambot:m}};var ot=Object(De["b"])(Object(i["connect"])(st)(it));var lt=r(864);var ct=r(977);var ut=r(1432);var dt=r(2287);var pt={msg:y["b"].object.isRequired,className:y["b"].string,children:y["b"].node,isEditing:y["b"].bool,setBackground:y["b"].func};var mt={className:void 0,replyBar:void 0,children:void 0,isEditing:false,setBackground:O["noop"]};var ht=function(e){_()(t,e);function t(){m()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"setBackground",value:function e(){var t=this.props,r=t.isEditing,e=t.setBackground;e({editing:r})}},{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.isEditing,i=t.children;if(!a)return i;var s=r.channel,o=r.ts;var l=re()(this.props.className,"c-message_kit__edit");return n.a.createElement("div",{className:l},n.a.createElement(ut["a"],{channelId:s,ts:o}))}}]);return t}(a["PureComponent"]);ht.displayName="MessageEdit";ht.defaultProps=mt;var ft=function e(t,r){var a=r.msg,n=r.viewContext;var i=a.channel,s=a.ts;var o=Object(ne["getMessageEditData"])(t,{channelId:i,ts:s,viewContext:n}),l=o.isEditing;return{isEditing:l}};var vt=Object(De["b"])(Object(Z["b"])(Object(i["connect"])(ft)(ht)));var bt=r(2289);var gt={children:y["b"].node,className:y["b"].string,theme:y["b"].oneOf(["light","dense"])};var _t={className:void 0,children:void 0,theme:"light"};var yt=function(e){_()(t,e);function t(){m()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"render",value:function e(){var t=this.props,r=t.children,a=t.theme;if("light"===a)return r;var i=re()("c-message_kit__indent",this.props.className);return n.a.createElement("div",{className:i},r)}}]);return t}(a["Component"]);yt.displayName="MessageIndent";yt.defaultProps=_t;var kt=Object(i["connect"])(function(e){return{theme:Object(ae["getUserMessagesTheme"])(e)}})(yt);var Ot=r(1321);var Et=r(2104);var wt=new L["b"]("message_kit");var Ct={msg:y["b"].object.isRequired,className:y["b"].string,highlight:y["b"].bool,clearHighlight:y["b"].func,focused:y["b"].bool,renderActionsOffscreen:y["b"].bool};var St={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false};var jt=function(e){_()(t,e);function t(){m()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen;var l=re()("c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);return n.a.createElement(De["a"],{msg:r,className:l,highlight:a,clearHighlight:i},n.a.createElement(Fe["a"],{hovered:s},n.a.createElement(Le["a"],{msg:r,showComment:false,showShare:false,showJump:true,messageContainerType:U["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,position:"inside",renderOffscreen:o},n.a.createElement(ct["a"],{msg:r},n.a.createElement(ot,{msg:r},n.a.createElement(lt["a"],{light:n.a.createElement(ge["a"],{msg:r})},n.a.createElement(vt,{msg:r},n.a.createElement(_e["a"],{msg:r}),"\xa0\xa0",n.a.createElement(ye["a"],{msg:r,full:true,clickable:true},wt.t("Open in channel")),n.a.createElement("br",null),n.a.createElement(kt,null,n.a.createElement(ke["a"],{msg:r}),n.a.createElement(Pe["a"],{msg:r}),n.a.createElement(Me,{msg:r}),n.a.createElement(xe["a"],{msg:r})))))))))}}]);return t}(a["PureComponent"]);jt.displayName="ThreadRootMessage";var It=jt;jt.defaultProps=St;var Tt=r(1425);var Nt=r(371);var At=r(713);var Rt=r(2292);var Mt=new L["b"]("message");var Pt={msg:y["b"].object.isRequired,className:y["b"].string,children:y["b"].node,dispatch:y["b"].func};var xt={className:void 0,children:void 0,dispatch:O["noop"]};var Dt=function(e){_()(t,e);function t(e){m()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.resend=r.resend.bind(r);r.cancel=r.cancel.bind(r);return r}b()(t,[{key:"resend",value:function e(){var t=this.props,r=t.msg,a=t.dispatch;var n=r.ts,i=r.channel;a(Object(Tt["a"])(i,n))}},{key:"cancel",value:function e(){var t=this.props,r=t.msg,a=t.dispatch;var n=r.ts,i=r.channel;a(Object(Nt["a"])({channelId:i,ts:n}))}},{key:"renderFooter",value:function e(){var t=this.props.msg,r=t.showResend,a=t.showCancel;if(!r&&!a)return null;var i=r&&n.a.createElement(At["a"],{className:"c-message_kit__resend__resend",onClick:this.resend},Mt.t("Try again"));var s=a&&n.a.createElement(At["a"],{className:"c-message_kit__resend__cancel",onClick:this.cancel},Mt.t("Cancel"));var o=i&&s&&n.a.createElement("span",{className:"c-message_kit__resend__separator"},"\xa0|\xa0");return n.a.createElement("div",{className:"c-message_kit__resend__footer"},n.a.createElement("div",{className:"c-message_kit__resend__footer__border"}),n.a.createElement("div",null,Mt.t("Slack couldn\u2019t send this message"),"\u2002",i,o,s))}},{key:"render",value:function e(){var t=this.props.msg,r=t.showResend,a=t.showCancel;var i=Object(We["isUnprocessedMsg"])(this.props.msg);if(!r&&!a&&!i)return this.props.children;var s=re()("c-message_kit__resend",this.props.className,{"c-message_kit__resend--with_buttons":r||a,"c-message_kit__resend--unprocessed":i});return n.a.createElement("div",{className:s},this.props.children,this.renderFooter())}}]);return t}(a["PureComponent"]);Dt.displayName="MessageResend";Dt.defaultProps=xt;var Ft=Object(i["connect"])()(Dt);var Lt={msg:y["b"].object.isRequired,className:y["b"].string,highlight:y["b"].bool,clearHighlight:y["b"].func,focused:y["b"].bool,renderActionsOffscreen:y["b"].bool};var Bt={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false};var Ut=function(e){_()(t,e);function t(){m()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen;var l=re()("c-message_kit__message","c-message_kit__thread_message",this.props.className);return n.a.createElement(De["a"],{msg:r,className:l,highlight:a,clearHighlight:i},n.a.createElement(Fe["a"],{hovered:s},n.a.createElement(Le["a"],{msg:r,showComment:false,showShare:false,messageContainerType:U["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,renderOffscreen:o},n.a.createElement(ot,{msg:r,showBroadcast:true},n.a.createElement(lt["a"],{light:n.a.createElement(ge["a"],{msg:r})},n.a.createElement(vt,{msg:r},n.a.createElement(_e["a"],{msg:r}),"\xa0\xa0",n.a.createElement(ye["a"],{msg:r,relative:true}),n.a.createElement("br",null),n.a.createElement(kt,null,n.a.createElement(Ft,{msg:r},n.a.createElement(ke["a"],{msg:r}),n.a.createElement(Pe["a"],{msg:r}),n.a.createElement(Me,{msg:r})),n.a.createElement(xe["a"],{msg:r}))))))))}}]);return t}(a["PureComponent"]);Ut.displayName="ThreadReplyMessage";var qt=Ut;Ut.defaultProps=Bt;var Gt=r(3417);var Ht=r(1421);var Wt=r(1173);var Vt=r(159);var zt=r(2294);var Qt=new L["b"]("flexpane");var Kt={featureReactThreads:y["b"].bool};var Yt={featureReactThreads:false};function Jt(e){var t=e.featureReactThreads;if(!t)return null;var r=cdn_url+"/9c217/img/loading_hash_animation_@2x.gif";var a=cdn_url+"/9c217/img/loading_hash_animation.gif";var i=Qt.t("loading\u2026");var s=a+" 1x, "+r+" 2x";return n.a.createElement("div",{className:"p-flexpane_loading","data-qa":"flexpane_loading"},n.a.createElement("img",{className:"p-flexpane_loading__spinner",src:r,alt:i,srcSet:s}),n.a.createElement("br",null),i)}Jt.displayName="FlexpaneLoading";Jt.defaultProps=Yt;var Zt=Object(Vt["a"])("feature_react_threads")(Jt);var Xt=r(151);var $t=r(1424);var er=r(715);var tr=r(41);var rr=r(2301);var ar=new L["b"]("threads");var nr={channelId:y["b"].string,threadTs:y["b"].string,isMpim:y["b"].bool,numMpimMembers:y["b"].number,mpimName:y["b"].string};var ir={channelId:void 0,threadTs:void 0,isMpim:false,numMpimMembers:0,mpimName:void 0};function sr(e){var t=e.channelId,r=e.threadTs,a=e.isMpim,i=e.numMpimMembers,s=e.mpimName;var o=void 0;o=a?n.a.createElement("div",{className:"p-threads_flexpane__header_channel_name"},n.a.createElement(tr["d"],{tip:s},n.a.createElement("span",null,ar.t("Direct message with {count} others",{count:i})))):n.a.createElement(Xt["a"],{channelId:t,className:"p-threads_flexpane__header_channel_name",inline:true,iconProps:{inherit:true}});return n.a.createElement(er["a"],{className:"p-threads_flexpane__header"},n.a.createElement($t["a"],{size:"medium",className:"p-threads_flexpane__header_back"}),n.a.createElement("div",null,ar.t("Thread"),t&&r&&n.a.createElement(Ze["a"],{className:"p-threads_flexpane__header_permalink",href:Object(We["constructMsgPermalink"])(t,r)},o)))}sr.displayName="Header";sr.defaultProps=ir;function or(e,t){var r=t.channelId;var a=Object(Be["getChannelById"])(e,r);var n={};if(a&&"mpim"===Object(Ve["getChannelType"])(a)){n.isMpim=true;var i=Object(Ve["getMemberIdsFromMpim"])(a)||[];n.numMpimMembers=i.length-1;n.mpimName=Object(Ve["getDisplayNameForChannel"])(e,a)}return n}var lr=Object(i["connect"])(or)(sr);var cr=r(213);var ur=r(20);var dr=r(179);var pr=r.n(dr);var mr=r(3419);var hr=r(683);var fr=r(4);var vr=Object(fr["e"])("Start editing the last message in a given channel",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs,i=r.viewContext;var s=t();var o=Object(ne["getLastEditableMessageInChannel"])(s,{channelId:a,threadTs:n});if(!o)return false;e(Object(ne["maybeStartEditingMessage"])({channelId:a,ts:o.ts,viewContext:i,scroll:true}));return true});vr.propTypes={channelId:y["b"].string.isRequired,threadTs:y["b"].string,viewContext:y["b"].string};var br=vr;var gr=r(227);var _r=r(88);var yr=r(626);var kr=r(212);var Or=r(321);var Er=r(430);var wr=r(1004);var Cr=r(1094);var Sr=r(657);var jr=r(283);var Ir=r(164);var Tr=r(2332);var Nr=new L["b"]("offline_mode");var Ar=function e(t){if(!t)return"";var r=document.createElement("span");r.innerHTML=t;return r.textContent.trim()};var Rr={channelId:y["b"].string,legacyChannel:y["b"].object,threadTs:y["b"].string,placeholder:y["b"].string,sendMessage:y["b"].func,className:y["b"].string,enableEmojiButton:y["b"].bool,enableMentionButton:y["b"].bool,enableBroadcastKeywords:y["b"].bool,enableJumbomoji:y["b"].bool,forwardedRef:y["b"].object.isRequired,useSendButton:y["b"].bool,isDisabled:y["b"].bool,maxLines:y["b"].number,useLegacyCreate:y["b"].bool,focusOnMount:y["b"].bool,draft:y["b"].arrayOf(y["b"].object),draftDelay:y["b"].number,range:y["b"].object,setChannelDraft:y["b"].func,clearChannelDraft:y["b"].func,setChannelCursor:y["b"].func,clearChannelCursor:y["b"].func,editLastMessage:y["b"].func,debug:y["b"].func.isRequired,featureOfflineMode:y["b"].bool,wasRecentlyOnline:y["b"].bool,enqueueToast:y["b"].func,clogger:y["b"].object.isRequired,onTextChange:y["b"].func,onFocus:y["b"].func,onBlur:y["b"].func};var Mr={channelId:void 0,legacyChannel:void 0,threadTs:void 0,placeholder:void 0,sendMessage:function e(){return Promise.resolve()},className:void 0,enableEmojiButton:false,enableMentionButton:false,enableBroadcastKeywords:true,enableJumbomoji:false,useSendButton:false,isDisabled:false,maxLines:void 0,useLegacyCreate:false,focusOnMount:false,draft:void 0,draftDelay:1e3,range:void 0,setChannelDraft:O["noop"],clearChannelDraft:O["noop"],setChannelCursor:O["noop"],clearChannelCursor:O["noop"],editLastMessage:O["noop"],featureOfflineMode:false,wasRecentlyOnline:false,onTextChange:O["noop"],onFocus:O["noop"],onBlur:O["noop"],onSend:O["noop"],enqueueToast:O["noop"]};var Pr=function(e){_()(t,e);function t(){m()(this,t);var e=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onEnter=e.onEnter.bind(e);e.onUpArrow=e.onUpArrow.bind(e);e.onLeftWhenEmpty=e.onLeftWhenEmpty.bind(e);e.onTextChange=e.onTextChange.bind(e);e.renderInput=e.renderInput.bind(e);e.onPlusMenuOpen=e.onPlusMenuOpen.bind(e);e.onPlusMenuClose=e.onPlusMenuClose.bind(e);e.state={isPlusMenuOpen:false,forcePlusMenuOpen:false};return e}b()(t,[{key:"componentDidMount",value:function e(){this.handlePropChanges();this.maybeFocusInput()}},{key:"componentDidUpdate",value:function e(t){this.handlePropChanges(t);this.maybeFocusInput(t)}},{key:"onEnter",value:function e(){var t=this.props,r=t.sendMessage,a=t.useLegacyCreate,i=t.featureOfflineMode,s=t.wasRecentlyOnline;a||this.updateDraftThrottled.cancel();if(i&&!s){this.props.enqueueToast({element:n.a.createElement(jr["b"],{ariaAssertive:true,position:"top-right",toastClasses:"c-toast--inverted",icon:"cloud-offline-small"},n.a.createElement("span",null,n.a.createElement("strong",null,Nr.rt("No connection."))," ",Nr.rt("You\u2019ll be able to send messages as soon as you\u2019re back online.")))});return false}var o=this.getInputRef();o&&!o.isEmpty({doIgnoreWhitespace:true})&&r();return false}},{key:"onUpArrow",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t)return;var r=this.getInputRef();if(!r)return;if(!r.isEmpty())return;this.props.editLastMessage()}},{key:"onLeftWhenEmpty",value:function e(){this.setState(function(){return{isPlusMenuOpen:true,forcePlusMenuOpen:true}})}},{key:"onTextChange",value:function e(){var t=this.props,e=t.onTextChange,r=t.useLegacyCreate;var a=this.getInputRef();r||this.updateOrClearDraft({inputRef:a});e(a.value())}},{key:"onPlusMenuOpen",value:function e(){this.setState(function(){return{isPlusMenuOpen:true}});var t=this.props.clogger;var r={contexts:{growth:{action:"click",trigger:"plus_menu_button"}}};t.track("PFP_ACTION",r)}},{key:"onPlusMenuClose",value:function e(){this.setState(function(){return{isPlusMenuOpen:false,forcePlusMenuOpen:false}})}},{key:"getInputRef",value:function e(){var t=this.props.forwardedRef;return t.current.getWrappedInstance?t.current.getWrappedInstance():t.current}},{key:"handlePropChanges",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.props,a=r.channelId,n=r.threadTs,i=r.draft,s=r.draftDelay,o=r.debug,l=r.useLegacyCreate;if(l)return;t.draftDelay!==s&&(this.updateDraftThrottled=Object(O["debounce"])(this.updateDraft,s));if(!n&&t.channelId!==a){this.updateDraftThrottled.flush();var c=this.getInputRef();if(t.channelId){var u=c.getSelection();if(u)if(c.getLength()){o("DRAFT","Updating cursor position for "+t.channelId);this.props.setChannelCursor({channelId:t.channelId,range:u})}else{o("DRAFT","Clearing cursor position for "+t.channelId);this.props.clearChannelCursor({channelId:t.channelId})}}c.clearHistory();if(a)if(i){o("DRAFT","Restoring draft to "+a);c.value(Object(Cr["a"])({contents:i}))}else{o("DRAFT","No draft, clearing input for "+a);c.clear()}}}},{key:"maybeFocusInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.props,a=r.channelId,n=r.threadTs,i=r.focusOnMount,s=r.range;if(!i)return;var o=this.getInputRef();var l=i!==t.focusOnMount||a&&!n&&t.channelId!==a||n&&t.threadTs!==n;l&&(s?o.setCursor(s.index,s.length):o.setCursorAtEnd())}},{key:"updateOrClearDraft",value:function e(t){var r=t.inputRef;var a=this.props,n=a.channelId,i=a.threadTs,s=a.debug;if(!n||!r||i)return;var o=r.getContents();if(r.getLength()&&Object(O["trim"])(Object(Cr["a"])(o)).length){var l=new pr.a(o.contents);s("DRAFT","Updating draft in "+n);this.updateDraftThrottled({channelId:n,delta:l})}else{s("DRAFT","Clearing draft for "+n);this.updateDraftThrottled({channelId:n})}}},{key:"updateDraft",value:function e(t){var r=t.channelId,a=t.delta;a?this.props.setChannelDraft({channelId:r,delta:a}):this.props.clearChannelDraft({channelId:r})}},{key:"renderInput",value:function e(t){var r=t.modules,a=t.isOpen,i=t.legacyTextyClassName;var s=this.props,o=s.placeholder,l=s.channelId,c=s.enableEmojiButton,u=s.enableMentionButton,d=s.enableBroadcastKeywords,p=s.useLegacyCreate,m=s.onFocus,h=s.onBlur,f=s.forwardedRef,v=s.enableJumbomoji,b=s.isDisabled,g=s.maxLines;var _=Ar(o);return n.a.createElement(Er["g"],{legacyTextyClassName:i,channelId:l,className:"p-message_input_field",ariaLabel:_,placeholder:o,onEnter:this.onEnter,onUpArrow:this.onUpArrow,onLeftWhenEmpty:this.onLeftWhenEmpty,"data-qa":"message_input",ref:f,useLegacyCreate:p,maxLines:g,modules:r,isAutocompleteOpen:a,isDisabled:b,enableEmojiButton:c,enableMentionButton:u,enableBroadcastKeywords:d,enableJumbomoji:v,onTextChange:this.onTextChange,onFocus:m,onBlur:h})}},{key:"renderLegacyAutocomplete",value:function e(){var t=this.props,r=t.legacyChannel,a=t.threadTs,n=t.forwardedRef;var i={tabcomplete:{searchOptions:{model_ob:r,in_thread:!!a},positionMenu:function e(t){var r=n.current.getWrappedInstance?n.current.getWrappedInstance():n.current;t.style.width=r.container.offsetWidth+"px";Object(Sr["a"])(t,r.container)}}};return this.renderInput({modules:i,legacyTextyClassName:"c-texty_input"})}},{key:"renderModernAutocomplete",value:function e(){return n.a.createElement(wr["a"],{completeOnMembers:true,completeOnChannels:true,completeOnCommands:true,completeOnEmoji:true,channelId:this.props.channelId,threadTs:this.props.threadTs,renderInput:this.renderInput,shouldCompleteOnTab:!this.props.useSendButton})}},{key:"render",value:function e(){var t=this.props,r=t.className,a=t.useLegacyCreate,i=t.channelId,s=t.threadTs;var o=re()(r,"p-message_input");return n.a.createElement("div",{className:o},a?this.renderLegacyAutocomplete():this.renderModernAutocomplete(),n.a.createElement(Ta,{channelId:i,threadTs:s,isOpen:this.state.isPlusMenuOpen,forceOpen:this.state.forcePlusMenuOpen,onPlusMenuOpen:this.onPlusMenuOpen,onPlusMenuClose:this.onPlusMenuClose}))}}]);return t}(a["Component"]);Pr.displayName="MessageInput";Pr.defaultProps=Mr;function xr(e,t){var r=t.channelId;return{legacyChannel:Object(D["a"])()?null:Object(Be["getChannelById"])(e,r),enableJumbomoji:!Object(Or["k"])(e)&&Object(ae["getUserPref"])(e,"jumbomoji")&&"dense"!==Object(ae["getUserPref"])(e,"theme"),draft:Object(mr["getChannelDraft"])(e,{channelId:r}),range:Object(mr["getChannelCursor"])(e,{channelId:r}),debug:Object(B["a"])({state:e}).debug,featureOfflineMode:Object(j["isFeatureEnabled"])(e,"feature_offline_mode"),wasRecentlyOnline:Object(yr["wasRecentlyOnline"])(e),clogger:Object(Ir["a"])({state:e})}}var Dr={setChannelDraft:mr["setChannelDraft"],clearChannelDraft:mr["clearChannelDraft"],setChannelCursor:mr["setChannelCursor"],clearChannelCursor:mr["clearChannelCursor"],enqueueToast:kr["enqueueToast"]};var Fr=Object(i["connect"])(xr,Dr)(Pr);var Lr=n.a.forwardRef(function(e,t){return n.a.createElement(Fr,d()({},e,{forwardedRef:t||n.a.createRef()}))});var Br=r(54);var Ur=r(351);var qr=r(2181);var Gr=r(131);var Hr=new L["b"]("menu_file");var Wr={showBoxMenuItem:y["b"].bool,showDropboxMenuItem:y["b"].bool,showGdriveMenuItem:y["b"].bool,showOneDriveMenuItem:y["b"].bool,channelId:y["b"].string,threadTs:y["b"].string};var Vr={showBoxMenuItem:false,showDropboxMenuItem:false,showGdriveMenuItem:false,showOneDriveMenuItem:false,channelId:"",threadTs:""};var zr=function(e){_()(t,e);function t(e){m()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.activeCloudServices=[];Object(O["bindAll"])(r,["handleBoxFileProvider","handleDropboxFileProvider","handleGdriveFileProvider","handleOnedriveFileProvider","renderMultipleCloudServices","renderMultipleCloudServices","renderSingleCloudService","renderSingleCloudService"]);return r}b()(t,[{key:"handleBoxFileProvider",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;return Object(Gr["o"])(r,a)}},{key:"handleDropboxFileProvider",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;return Object(Gr["p"])(r,a)}},{key:"handleGdriveFileProvider",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;return Object(Gr["m"])(r,a)}},{key:"handleOnedriveFileProvider",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;return Object(Gr["n"])(r,a)}},{key:"renderMultipleCloudServices",value:function e(t){var r=Object(O["map"])(this.activeCloudServices,function(e,t){return n.a.createElement(Br["b"],{key:t,label:e.props.label,icon:e.props.icon,onSelected:e.props.onSelected})});return n.a.createElement(Br["f"],t,r)}},{key:"renderSingleCloudService",value:function e(){var t=this.activeCloudServices[0];return n.a.createElement(Br["b"],d()({},t.props,this.props))}},{key:"render",value:function e(){var t={};var r=this.props;t.box=r.showBoxMenuItem;t.dropbox=r.showDropboxMenuItem;t.gdrive=r.showGdriveMenuItem;t.onedrive=r.showOneDriveMenuItem;var a=[{name:"box",props:{label:Hr.t("Box",{fallbackHash:"239ca5767afac9641593464ce02bc454d6ac07a9",fallbackHashNs:"files"}),icon:n.a.createElement(Je["b"],{type:"box"}),onSelected:this.handleBoxFileProvider}},{name:"dropbox",props:{label:Hr.t("Dropbox",{fallbackHash:"ac88abd7dfaa8f7a7ddc7b890eb6757030e093f4",fallbackHashNs:"files"}),icon:n.a.createElement(Je["b"],{type:"dropbox"}),onSelected:this.handleDropboxFileProvider}},{name:"gdrive",props:{label:Hr.t("Google Drive",{fallbackHash:"07c2964c41f409a224efb389f282268e4928b85f",fallbackHashNs:"files"}),icon:n.a.createElement(Je["b"],{type:"google-drive"}),onSelected:this.handleGdriveFileProvider}},{name:"onedrive",props:{label:Hr.t("OneDrive",{fallbackHash:"80753c986574153732103504426f45909268f96b",fallbackHashNs:"files"}),icon:n.a.createElement(Je["b"],{type:"onedrive"}),onSelected:this.handleOnedriveFileProvider}}];this.activeCloudServices=Object(O["filter"])(a,function(e){return t[e.name]?t[e.name]:null});if(this.activeCloudServices.length>1)return n.a.createElement(qr["a"],d()({label:Hr.t("A cloud service",{fallbackHash:"453cb777f102cb151d65257747d2ae947691896e",fallbackHashNs:"menu"}),icon:n.a.createElement(Je["b"],{type:"cloud-download"}),renderSubmenu:this.renderMultipleCloudServices},this.props));if(1===this.activeCloudServices.length)return this.renderSingleCloudService();return null}}]);return t}(a["Component"]);zr.displayName="CloudFilesMenu";zr.defaultProps=Vr;var Qr=zr;function Kr(e){return{showBoxMenuItem:Object(ae["getUserPref"])(e,"box_enabled"),showDropboxMenuItem:Object(ae["getUserPref"])(e,"dropbox_enabled"),showGdriveMenuItem:Object(ae["getTeamPref"])(e,"gdrive_enabled_team"),showOneDriveMenuItem:Object(j["isFeatureEnabled"])(e,"feature_onedrive_picker")&&Object(ae["getTeamPref"])(e,"onedrive_enabled_team")}}var Yr=Object(qr["c"])(Object(i["connect"])(Kr)(zr));var Jr=r(1420);var Zr=r(160);var Xr=r(3562);var $r=Object(fr["e"])("Opens the docs Gantry app in a new window",function(e,t){var r=t();var a=Object(T["getPrimaryView"])(r);if(!Object(Zr["a"])(a))return;e(Object(Xr["a"])({appName:"docs",viewId:""}))});$r.propTypes=y["b"].object;var ea=new L["b"]("menu_file");var ta={channelId:y["b"].string.isRequired,threadTs:y["b"].string,disableFileUploadsPref:y["b"].string,menuProps:y["b"].object,featureReactThreads:y["b"].bool,featureModernFileUpload:y["b"].bool,featureDocs:y["b"].bool,hiddenFileInputRef:y["b"].object,clogger:y["b"].object.isRequired,createDocPost:y["b"].func};var ra={threadTs:void 0,disableFileUploadsPref:void 0,menuProps:{},featureReactThreads:false,featureModernFileUpload:false,featureDocs:false,hiddenFileInputRef:void 0,createDocPost:O["noop"]};var aa=function(e){_()(t,e);function t(e){m()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.selectFileFromComputer=r.selectFileFromComputer.bind(r);r.createDoc=r.createDoc.bind(r);return r}b()(t,[{key:"selectFileFromComputer",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.hiddenFileInputRef,i=t.clogger,s=t.featureModernFileUpload;if(s){n&&n.current&&n.current.click();i.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_upload"}}})}else Object(Jr["b"])(r,a)}},{key:"createDoc",value:function e(){this.props.createDocPost()}},{key:"render",value:function e(){var t=this.props,r=t.disableFileUploadsPref,a=t.menuProps,i=t.featureReactThreads,s=t.featureDocs;if(!i)return null;var o="disable_all"!==r;var l="disable_all_except_images"===r;return n.a.createElement(Br["f"],a,s&&n.a.createElement(Br["c"],{label:ea.t("New\u2026")}),s&&n.a.createElement(Br["b"],{label:"Post",icon:n.a.createElement(Je["b"],{type:"create-post"}),onSelected:this.createDoc}),n.a.createElement(Br["c"],{label:l?ea.t("Add an image from\u2026"):ea.t("Add a file from\u2026")}),n.a.createElement(Yr,{channelId:this.props.channelId,threadTs:this.props.threadTs}),o&&n.a.createElement(Br["b"],{label:ea.t("Your computer"),icon:n.a.createElement(Je["b"],{type:"laptop"}),onSelected:this.selectFileFromComputer}))}}]);return t}(a["Component"]);aa.displayName="NewFileMenu";aa.defaultProps=ra;var na={createDocPost:$r};function ia(e){return{disableFileUploadsPref:Object(ae["getTeamPref"])(e,"disable_file_uploads"),featureReactThreads:Object(j["isFeatureEnabled"])(e,"feature_react_threads"),featureModernFileUpload:Object(j["isFeatureEnabled"])(e,"feature_modern_file_upload"),featureDocs:Object(j["isFeatureEnabled"])(e,"feature_docs")&&"friends"===Object(Ur["getGroupForUser"])(e,"friends_of_docs"),clogger:Object(Ir["a"])({state:e})}}var sa=Object(i["connect"])(ia,na)(aa);var oa=sa;var la=r(31);var ca=r(77);var ua=r(188);function da(){var e={top:0,left:0,bottom:0,right:0};return n.a.createElement(ua["a"],{ariaRole:"dialog",isOpen:true,targetBounds:e,position:"top-left",allowanceX:0,allowanceY:0},n.a.createElement("div",{style:{color:"red"}},"Hello world"))}da.displayName="OverFileLimitsModal";var pa=Object(la["b"])("Opens the over-file-limits modal",function(e,t,r){e(Object(ca["openModal"])({element:n.a.createElement(da,r)}))});pa.propTypes={};var ma=pa;var ha=r(2334);var fa={channelId:y["b"].string,threadTs:y["b"].string,disableFileUploadsPref:y["b"].string,forwardedRef:y["b"].object,openFileUploadDialog:y["b"].func,openOverFileLimitsModal:y["b"].func,enforceFileLimits:y["b"].bool};var va={channelId:void 0,threadTs:void 0,disableFileUploadsPref:void 0,forwardedRef:void 0,openFileUploadDialog:O["noop"],openOverFileLimitsModal:O["noop"],enforceFileLimits:false};var ba=function(e){_()(t,e);function t(e){m()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onFilesSelected=r.onFilesSelected.bind(r);r.onClick=r.onClick.bind(r);return r}b()(t,[{key:"onClick",value:function e(t){if(this.props.enforceFileLimits){t.preventDefault();this.props.openOverFileLimitsModal()}}},{key:"onFilesSelected",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.forwardedRef;var i=n.current.files;var s=Object(O["map"])(i);this.props.openFileUploadDialog({files:s,initialChannelId:r,threadTs:a});n.current.value=""}},{key:"render",value:function e(){var t=this.props,r=t.disableFileUploadsPref,a=t.forwardedRef;var i="disable_all_except_images"===r;var s={};i&&(s.accept="image/*");return n.a.createElement("input",d()({type:"file",className:"p-hidden_file_input",multiple:true,"aria-hidden":"true","data-qa":"file_upload",tabIndex:"-1"},s,{ref:a,onClick:this.onClick,onChange:this.onFilesSelected}))}}]);return t}(a["Component"]);ba.displayName="HiddenFileInput";ba.defaultProps=va;function ga(e){return{disableFileUploadsPref:Object(ae["getTeamPref"])(e,"disable_file_uploads")}}var _a={openFileUploadDialog:ie["a"],openOverFileLimitsModal:ma};var ya=Object(i["connect"])(ga,_a)(ba);var ka=n.a.forwardRef(function(e,t){return n.a.createElement(ya,d()({},e,{forwardedRef:t}))});var Oa=r(3493);var Ea=r(3563);var wa=new L["b"]("message_input_plus_button");var Ca={channelId:y["b"].string,threadTs:y["b"].string,featureModernFileUpload:y["b"].bool,featureOfflineMode:y["b"].bool,isOpen:y["b"].bool,onPlusMenuOpen:y["b"].func,onPlusMenuClose:y["b"].func,forceOpen:y["b"].bool};var Sa={channelId:void 0,threadTs:void 0,featureModernFileUpload:false,featureOfflineMode:false,isOpen:false,onPlusMenuOpen:O["noop"],onPlusMenuClose:O["noop"],forceOpen:false};var ja=function(e){_()(t,e);function t(){m()(this,t);var e=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderMenu=e.renderMenu.bind(e);e.hiddenFileInputRef=n.a.createRef();return e}b()(t,[{key:"renderMenu",value:function e(t){var r=this.props,a=r.channelId,i=r.threadTs;if(!a)return null;return n.a.createElement(oa,{menuProps:t,channelId:a,threadTs:i,hiddenFileInputRef:this.hiddenFileInputRef})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,i=t.threadTs,s=t.featureModernFileUpload,o=t.featureOfflineMode,l=t.isOpen,c=t.onPlusMenuOpen,u=t.onPlusMenuClose,d=t.forceOpen;var p=re()("p-message_input_plus",{"p-message_input_plus--active":l});var m=n.a.createElement(ur["c"],{className:p,"aria-label":wa.t("File menu")},n.a.createElement(Je["b"],{className:"p-message_input_plus_icon",type:"plus-thick"}),s&&n.a.createElement(ka,{ref:this.hiddenFileInputRef,channelId:r,threadTs:i}));var h=n.a.createElement(Br["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:c,onClose:u,forceOpen:d},m);if(o){var f=n.a.createElement(Ea["a"],{tooltipLabel:wa.t("File menu")});return n.a.createElement(a["Fragment"],null,n.a.createElement(Oa["b"],null,h),n.a.createElement(Oa["a"],null,n.a.createElement(Br["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:c,onClose:u},n.a.createElement(tr["d"],{tip:f},m))))}return h}}]);return t}(a["Component"]);ja.displayName="MessageInputPlusButton";ja.defaultProps=Sa;function Ia(e){return{featureModernFileUpload:Object(j["isFeatureEnabled"])(e,"feature_modern_file_upload"),featureOfflineMode:Object(j["isFeatureEnabled"])(e,"feature_offline_mode")}}var Ta=Object(i["connect"])(Ia)(ja);var Na=r(27);var Aa=new L["b"]("msg_input");var Ra={sendMessage:y["b"].func.isRequired,isDisabled:y["b"].bool,isOffline:y["b"].bool,className:y["b"].string,tabIndex:y["b"].number,featureOfflineMode:y["b"].bool,buttonSize:y["b"].string,buttonType:y["b"].string};var Ma={isDisabled:false,isOffline:false,className:void 0,tabIndex:-1,featureOfflineMode:false,buttonSize:void 0,buttonType:void 0};var Pa=function e(t){var r=t.isDisabled,a=t.isOffline,i=t.className,s=t.sendMessage,o=t.featureOfflineMode,l=t.tabIndex,c=t.buttonSize,u=t.buttonType;var d=Aa.t("Send");var p=Na["isMac"]?Aa.t("\u2318Enter"):Aa.t("Ctrl+Enter");var m="top";var h=n.a.createElement(ur["d"],{className:i,pillarClassName:"p-message_input__send",disabled:r||a,tabIndex:l,onClick:s,size:c,type:u},d);if(o&&a){h=n.a.createElement("div",{style:{marginLeft:"auto"}},h);m="top-right";p=n.a.createElement(Ea["a"],{tooltipLabel:d})}if(r&&!o)return h;return n.a.createElement(tr["d"],{tip:p,position:m},h)};Pa.displayName="MessageInputSendButton";Pa.defaultProps=Ma;var xa=function e(t){return{isOffline:!Object(yr["isOnline"])(t),featureOfflineMode:Object(j["isFeatureEnabled"])(t,"feature_offline_mode")}};var Da=Object(i["connect"])(xa)(Pa);var Fa=Lr;var La=r(981);var Ba=r(628);var Ua=r(2336);var qa=new L["b"]("threads");var Ga={channelId:y["b"].string.isRequired,threadTs:y["b"].string.isRequired,channelType:y["b"].string,prepareAndSendMessage:y["b"].func,legacySendSlashCommand:y["b"].func,setThreadDraft:y["b"].func,clearThreadDraft:y["b"].func,editLastMessageInChannel:y["b"].func,debug:y["b"].func,draft:y["b"].arrayOf(y["b"].object),useSendButton:y["b"].bool,isFlexpaneScrollable:y["b"].bool,featureReactThreads:y["b"].bool};var Ha={channelType:"channel",prepareAndSendMessage:function e(){return Promise.resolve()},legacySendSlashCommand:O["noop"],setThreadDraft:O["noop"],clearThreadDraft:O["noop"],editLastMessageInChannel:O["noop"],debug:O["noop"],draft:void 0,useSendButton:false,isFlexpaneScrollable:true,featureReactThreads:true};var Wa=function(e){_()(t,e);function t(e){m()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.inputRef=n.a.createRef();r.state={hasEnteredText:false,hasFocus:false,broadcast:false};Object(O["bindAll"])(r,["onBroadcastChange","onBroadcastControlsMouseDown","onTextChange","onFocus","onBlur","sendMessage","editLastMessage"]);return r}b()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.draft,i=t.debug;if(Object(D["a"])()&&this.inputRef.current){if(n){var s=this.getInputRef();i("DRAFT","Restoring thread draft to "+r+" ("+a+")");s.value(Object(Cr["a"])({contents:n}))}}else if(this.inputRef.current){var o=Object(Ba["c"])(r,a);this.inputRef.current.getWrappedInstance().value(o)}}},{key:"onBroadcastChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{broadcast:!!r}});this.state.hasEnteredText||this.inputRef.current.getWrappedInstance().focus()}},{key:"onBroadcastControlsMouseDown",value:function e(t){t.preventDefault()}},{key:"onTextChange",value:function e(t){this.setState(function(){return{hasEnteredText:!!t}});var r=this.props,a=r.channelId,n=r.threadTs,i=r.debug;if(Object(D["a"])()){var s=this.getInputRef();var o=s.getContents();if(s.getLength()&&Object(O["trim"])(Object(Cr["a"])(o)).length){var l=new pr.a(o.contents);i("DRAFT","Updating thread draft in "+a+" ("+n+")");this.props.setThreadDraft({channelId:a,threadTs:n,delta:l})}else{i("DRAFT","Clearing thread draft for "+a+" ("+n+")");this.props.clearThreadDraft({channelId:a,threadTs:n})}}else Object(Ba["f"])(a,n,t)}},{key:"onFocus",value:function e(){this.setState(function(){return{hasFocus:true}})}},{key:"onBlur",value:function e(){this.setState(function(){return{hasFocus:false}})}},{key:"getInputRef",value:function e(){return this.inputRef.current.getWrappedInstance?this.inputRef.current.getWrappedInstance():this.inputRef.current}},{key:"editLastMessage",value:function e(){this.props.editLastMessageInChannel({channelId:this.props.channelId,threadTs:this.props.threadTs,viewContext:U["MESSAGE_CONTAINERS"].THREADS_FLEXPANE})}},{key:"sendMessage",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;var n=this.state.broadcast;this.setState(function(){return{broadcast:false}});var i=this.getInputRef();var s=i.value();if(!Object(D["a"])()&&Object(La["a"])(s)){i.clear();this.props.legacySendSlashCommand(r,a,s);return Promise.resolve()}var o=i.getContents();i.clear();return this.props.prepareAndSendMessage({channelId:r,text:s,replyToTs:a,shouldBroadcast:n}).catch(function(){i.isEmpty()&&i.setContents(o)})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,i=t.channelType,s=t.useSendButton,o=t.isFlexpaneScrollable,l=t.featureReactThreads;var c=this.state,u=c.broadcast,d=c.hasEnteredText,p=c.hasFocus;if(!l)return null;var m=re()("p-threads_flexpane__broadcast_controls",{"p-threads_flexpane__broadcast_controls--visible":d||p});var h="";h="mpim"===i?qa.t("Also send to the group"):"im"===i?qa.t("Also send as direct message"):qa.rt("Also send to <span></span>",null,function(){return n.a.createElement(Xt["a"],{channelId:r,inline:true,className:"p-threads_flexpane__broadcast_channel"})});var f="";f="mpim"===i||"im"===i?qa.t("Choose this if you\u2019d like your reply to post in the main conversation, too"):qa.t("Choose this if you\u2019d like your reply to post in the channel, too");return n.a.createElement("div",{className:"p-threads_flexpane__input_container","data-qa":"reply_container"},n.a.createElement(Fa,{className:"p-threads_flexpane__input",channelId:r,threadTs:a,placeholder:qa.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:true,enableBroadcastKeywords:false,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,ref:this.inputRef,useLegacyCreate:!Object(D["a"])(),maxLines:8,useSendButton:s,focusOnMount:!o}),n.a.createElement("div",{className:m,onMouseDown:this.onBroadcastControlsMouseDown},n.a.createElement(_r["a"],{className:"p-threads_flexpane__broadcast_label",text:h,htmlFor:"p-thread_flexpane__broadcast_checkbox",type:"inline"},n.a.createElement(gr["a"],{className:"p-threads_flexpane__broadcast_checkbox",id:"p-thread_flexpane__broadcast_checkbox",checked:u,onChange:this.onBroadcastChange})),n.a.createElement(tr["d"],{tip:f},n.a.createElement(Je["b"],{className:"p-threads_flexpane__info_tooltip",type:"question_circle",inline:true,size:"inherit"})),n.a.createElement(Da,{isDisabled:!d,className:"p-threads_flexpane__send_button",sendMessage:this.sendMessage,buttonType:"outline",buttonSize:"small"})))}}]);return t}(a["Component"]);Wa.displayName="InputContainer";Wa.defaultProps=Ha;function Va(e,t){var r=t.channelId,a=t.threadTs;var n=Object(Be["getChannelById"])(e,r);return{channelType:Object(Ve["getChannelType"])(n),draft:Object(mr["getThreadDraft"])(e,{channelId:r,threadTs:a}),featureReactThreads:Object(j["isFeatureEnabled"])(e,"feature_react_threads"),debug:Object(B["a"])({state:e}).debug,useSendButton:Object(ae["getUserPref"])(e,"msg_input_send_btn")}}var za={prepareAndSendMessage:hr["a"],setThreadDraft:mr["setThreadDraft"],clearThreadDraft:mr["clearThreadDraft"],editLastMessageInChannel:br,legacySendSlashCommand:function e(t,r,a){return function(e,n){var i=n();var s=Object(Be["getChannelById"])(i,t);var o=Object(S["getMessageByTimestamp"])(i,t,r);if(!s||!o)return;Object(M["k"])(s,a,o)}}};var Qa=Object(i["connect"])(Va,za)(Wa);var Ka=r(2338);var Ya=new L["b"]("threads");var Ja={channelId:y["b"].string.isRequired,threadTs:y["b"].string.isRequired,unknown:y["b"].bool,archived:y["b"].bool,imWithDeletedMember:y["b"].bool,cannotReply:y["b"].bool,nonMember:y["b"].bool,canJoin:y["b"].bool,isFlexpaneScrollable:y["b"].bool,joinConversationApi:y["b"].func,featureReactThreads:y["b"].bool};var Za={unknown:false,archived:false,imWithDeletedMember:false,cannotReply:false,nonMember:false,canJoin:false,isFlexpaneScrollable:true,joinConversationApi:O["noop"],featureReactThreads:false};var Xa=function(e){_()(t,e);function t(e){m()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.joinChannel=r.joinChannel.bind(r);return r}b()(t,[{key:"joinChannel",value:function e(){var t=this.props.channelId;this.props.joinConversationApi({channelId:t})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,i=t.unknown,s=t.archived,o=t.imWithDeletedMember,l=t.cannotReply,c=t.nonMember,u=t.canJoin,d=t.isFlexpaneScrollable,p=t.featureReactThreads;if(!p)return null;if(i||o)return null;if(s)return n.a.createElement(cr["a"],{level:"default",type:"inline",align:"center",className:"p-threads_flexpane__footer_alert p-threads_flexpane__footer_alert--archived"},Ya.t("You are viewing a thread from an archived channel"));if(l)return n.a.createElement(cr["a"],{level:"default",type:"inline",align:"center",className:"p-threads_flexpane__footer_alert p-threads_flexpane__footer_alert--no_reply"},Ya.rt("Your Workspace Owners have limited who can post to <ChannelName></ChannelName>",null,function(){return n.a.createElement(Xt["a"],{channelId:r,inline:true,iconProps:{inherit:true}})}));if(c){if(!u)return null;return n.a.createElement("div",{className:"p-threads_flexpane__footer_join_container"},n.a.createElement(ur["d"],{type:"primary",size:"medium",onClick:this.joinChannel},Ya.t("Join Channel")),n.a.createElement("p",{className:"p-threads_flexpane__footer_join_label"},Ya.rt("You\u2019ll need to join <ChannelName></ChannelName> to reply",null,function(){return n.a.createElement(Xt["a"],{channelId:r,inline:true,iconProps:{inherit:true}})})))}return n.a.createElement(Qa,{channelId:r,threadTs:a,key:Object(x["getThreadKey"])(r,a),isFlexpaneScrollable:d})}}]);return t}(a["Component"]);Xa.displayName="Footer";Xa.defaultProps=Za;function $a(e,t){var r=t.channelId;var a=Object(Be["getChannelById"])(e,r);return{unknown:Object(Ve["isUnknownOrNonExistent"])(a),archived:Object(Ve["isArchived"])(a),imWithDeletedMember:Object(Ve["isImWithDeletedMember"])(e,a),cannotReply:!Object(Ve["canThread"])(a),nonMember:Object(Ve["isPublicChannel"])(a)&&!Object(Ve["isMemberOfChannel"])(a),canJoin:Object(se["d"])(e,r),featureReactThreads:Object(j["isFeatureEnabled"])(e,"feature_react_threads")}}var en=Object(i["connect"])($a,{joinConversationApi:Be["joinConversationApi"]})(Xa);var tn=r(2340);var rn=new L["b"]("threads");var an={replyCount:y["b"].number};var nn={replyCount:0};function sn(e){var t=e.replyCount;var r=Math.max(1,t);var a=rn.t("{count, plural, =1 {# reply} other {# replies}}",{count:r,fallbackHash:"45d5eeb729c4b8d8b91f810f9387e5a97b3e6ce5"});return n.a.createElement("div",{className:"p-threads_flexpane__separator"},n.a.createElement("span",{className:"p-threads_flexpane__separator_count"},a),n.a.createElement("hr",{className:"p-threads_flexpane__separator_line"}))}sn.displayName="Separator";sn.defaultProps=nn;function on(e,t){var r=t.channelId,a=t.threadTs;var n=Object(S["getMessageByTimestamp"])(e,r,a);return{replyCount:Object(We["getReplyCount"])(n)}}var ln=Object(i["connect"])(on)(sn);var cn=r(145);var un=r(2342);var dn=new L["b"]("threads");var pn={tryAgain:y["b"].func,featureReactThreads:y["b"].bool};var mn={tryAgain:O["noop"],featureReactThreads:true};function hn(e){var t=e.tryAgain,r=e.featureReactThreads;if(!r)return null;return n.a.createElement("div",{className:"p-threads_flexpane__error","data-qa":"threads_flexpane_error"},n.a.createElement("div",{className:"p-threads_flexpane__error_contents"},n.a.createElement("div",{className:"p-threads_flexpane__error_emoji"},n.a.createElement(cn["b"],{text:":mag:",emojiSize:cn["a"].LARGE})),n.a.createElement("p",{className:"p-threads_flexpane__error_header"},dn.t("Couldn't load thread")),n.a.createElement("p",{className:"p-threads_flexpane__error_body"},dn.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,r=e.key;return n.a.createElement("a",{href:"https://slack.com/help/contact",target:"_blank",rel:"noopener noreferrer",key:r},t)})),n.a.createElement(ur["d"],{type:"primary",onClick:t,"data-qa":"threads_flexpane_error_try_again"},dn.t("Try Again"))))}hn.displayName="ThreadsError";hn.defaultProps=mn;var fn=function e(t){var r=Object(j["isFeatureEnabled"])(t,"feature_react_threads");return{featureReactThreads:r}};var vn=Object(i["connect"])(fn)(hn);function bn(e,t,r){var a=Object(S["getMessageByTimestamp"])(e,t,r);return a&&!Object(We["isTempMsg"])(a)&&!Object(We["isEphemeral"])(a)}function gn(e,t,r){return Object(O["max"])(Object(O["filter"])(r,function(r){return bn(e,t,r)}))}var _n=function(){function e(){m()(this,e);this.historyRequests={}}b()(e,[{key:"reset",value:function e(){this.historyRequests={}}},{key:"logHistoryRequest",value:function e(t){var r=t.oldest,a=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=r+"_"+a;var o=this.historyRequests[s];if(!o){o={count:0,time:0};this.historyRequests[s]=o}if(i-1e4>o.time){o.count=1;o.time=i}else o.count+=1}},{key:"shouldPreventHistoryRequest",value:function e(t){var r=t.oldest,a=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=this.historyRequests[r+"_"+a];if(!s)return false;if(s.count<=3)return false;if(s.time<i-1e4)return false;return true}}]);return e}();var yn=_n;var kn=new L["b"]("threads");var On=Object(Gt["a"])(It);var En=Object(Gt["a"])(qt);var wn={threadTs:y["b"].string,channelId:y["b"].string,subscribed:y["b"].bool,lastRead:y["b"].string,maxMarkableTs:y["b"].string,oldest:y["b"].string,latest:y["b"].string,timestamps:y["b"].arrayOf(y["b"].string),reachedStart:y["b"].bool,reachedEnd:y["b"].bool,prevReachedEnd:y["b"].bool,userHasUnreadThreads:y["b"].bool,fileId:y["b"].string,comments:y["b"].array,startTs:y["b"].string,highlightTs:y["b"].string,highlightKey:y["b"].string,showDragOverlay:y["b"].bool,requestHistory:y["b"].func,clearHighlight:y["b"].func,markThread:y["b"].func,useGlobalNav:y["b"].bool,windowFocused:y["b"].bool,userAttention:y["b"].string,featureReactThreads:y["b"].bool,logInfo:y["b"].func,logError:y["b"].func};var Cn={threadTs:void 0,channelId:void 0,subscribed:void 0,lastRead:void 0,maxMarkableTs:void 0,oldest:void 0,latest:void 0,timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,userHasUnreadThreads:false,fileId:void 0,comments:[],startTs:void 0,highlightTs:void 0,highlightKey:void 0,showDragOverlay:false,requestHistory:O["noop"],clearHighlight:O["noop"],markThread:O["noop"],useGlobalNav:false,windowFocused:false,userAttention:"",featureReactThreads:true,logInfo:O["noop"],logError:O["noop"]};var Sn="THREAD-FLEXPANE";var jn=function(e){_()(t,e);b()(t,null,[{key:"getRowsAndKeys",value:function e(t,r){var a=t.threadTs,n=t.reachedStart,i=t.reachedEnd,s=t.prevReachedEnd,o=t.timestamps,l=t.comments;var c=r.commentsExpanded,u=r.degraded;var d=[];var p=[];if(Object(O["isEmpty"])(o))return{rows:p,keys:d};var m=Object(O["first"])(o)===a;var h=Object(O["without"])(o,a);if(!n&&!u){d.push("loading-start");p.push({type:"loading"})}if(m){d.push(a);p.push({type:"root",ts:a});if(!Object(O["isEmpty"])(l)){d.push("comments-toggle");p.push({type:"comments-toggle"});c&&l.forEach(function(e){d.push(e.id);p.push({type:"comment",comment:e})})}if(h.length){d.push("separator");p.push({type:"separator"})}}h.forEach(function(e,t){d.push(e);p.push({type:"reply",ts:e,prevTs:h[t-1]})});if(i||s){d.push("input");p.push({type:"input"})}else if(!u){d.push("loading-end");p.push({type:"loading"})}return{rows:p,keys:d}}}]);function t(e){m()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.requestHistory=r.requestHistory.bind(r);r.renderRow=r.renderRow.bind(r);r.renderList=r.renderList.bind(r);r.tryAgain=r.tryAgain.bind(r);r.toggleComments=r.toggleComments.bind(r);r.isFocusableItem=r.isFocusableItem.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.keys=null;r.rows=null;r.historyRateLimiter=new yn;r.listRef=n.a.createRef();r.state={degraded:Object(J["a"])(),commentsExpanded:false,hasKeyboardFocus:false,errored:false};return r}b()(t,[{key:"componentDidMount",value:function e(){this.checkUnreads()}},{key:"componentWillReceiveProps",value:function e(t){var r=Object(x["getThreadKey"])(this.props.channelId,this.props.threadTs);var a=Object(x["getThreadKey"])(t.channelId,t.threadTs);this.state.errored&&r!==a&&this.setState(function(e){return d()({},e,{errored:false})})}},{key:"componentDidUpdate",value:function e(t){this.checkUnreads();var r=this.props,a=r.threadTs,n=r.channelId;var i=Object(x["getThreadKey"])(n,a);var s=t.prevThreadTs,o=t.prevChannelId;var l=Object(x["getThreadKey"])(o,s);i!==l&&this.historyRateLimiter.reset()}},{key:"onFocusEnter",value:function e(t){this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.props.logError("ThreadsFlexpane componentDidCatch");Object(q["a"])(t,"threads_flexpane_did_catch")}},{key:"focus",value:function e(){var t=this.listRef.current&&this.listRef.current.list;t&&t.focus()}},{key:"blur",value:function e(){var t=this.listRef.current&&this.listRef.current.list;t&&t.blur()}},{key:"checkUnreads",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.subscribed,i=t.lastRead,s=t.reachedEnd,o=t.maxMarkableTs,l=t.userAttention,c=t.userHasUnreadThreads,u=t.logInfo;if(!n||!s||!o)return;var d=Object(x["getThreadKey"])(r,a);if(!i||i<o){if(Object(D["a"])()){if(l!==P["a"].MESSAGE_PANE){u(Sn,"Not marking "+d+" to "+o+" because "+l);return}}else if(!Object(M["f"])()){u(Sn,"Not marking "+d+" to "+o+" because "+Object(M["c"])());return}if(!c){u(Sn,"Not marking "+d+" to "+o+" because no unread threads yet");return}u(Sn,"Marking "+Object(x["getThreadKey"])(r,a)+": "+o);this.props.markThread({channelId:r,ts:a,lastRead:o})}}},{key:"requestHistory",value:function e(t){var r=this;var a=t.oldest,n=t.latest;var i=this.props,s=i.channelId,o=i.threadTs,e=i.requestHistory,l=i.logError;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:a,latest:n})){l(Sn,"Rate-limited thread: "+Object(x["getThreadKey"])(s,o));return false}var c=e({oldest:a,latest:n,channelId:s,threadTs:o});c&&this.historyRateLimiter.logHistoryRequest({oldest:a,latest:n});return c.then(function(e){r.setState(function(e){return d()({},e,{errored:false})});return e}).catch(function(e){r.setState(function(e){return d()({},e,{errored:true})});return Promise.reject(e)})}},{key:"tryAgain",value:function e(){this.setState(function(e){return d()({},e,{errored:false})})}},{key:"toggleComments",value:function e(){var t=this.state.commentsExpanded;this.setState(function(){return{commentsExpanded:!t}})}},{key:"isFocusableItem",value:function e(t){var r=t.index;var a=this.rows[r];if(!a)return false;if("loading"===a.type)return false;if("separator"===a.type)return false;return true}},{key:"isListScrollable",value:function e(){var t=this.listRef.current&&this.listRef.current.list;var r=t&&t.layout.getHeightValidity("input");return!r||t.getContentHeight()>t.getContainerHeight()}},{key:"renderRow",value:function e(t,r){var a=r.hasFocus;var i=this.props,s=i.channelId,o=i.highlightTs,l=i.threadTs,c=i.comments,u=i.fileId,d=i.featureReactThreads;if(!d)return null;var p=this.state.commentsExpanded;var m=this.rows[t];if(!m)return null;var h=this.state.hasKeyboardFocus;switch(m.type){case"separator":return n.a.createElement(ln,{channelId:s,threadTs:l});case"root":return n.a.createElement(On,{channelId:s,ts:m.ts,highlight:m.ts===o,clearHighlight:this.props.clearHighlight,focused:a,renderActionsOffscreen:h});case"reply":return n.a.createElement(En,{channelId:s,ts:m.ts,highlight:m.ts===o,clearHighlight:this.props.clearHighlight,focused:a,renderActionsOffscreen:h});case"input":return n.a.createElement(en,{channelId:s,threadTs:l,isFlexpaneScrollable:this.isListScrollable()});case"comments-toggle":return n.a.createElement(Ht["a"],{commentCount:c.length,expanded:p,toggleList:this.toggleComments});case"comment":return n.a.createElement(Wt["a"],{comment:m.comment,fileId:u});case"loading":return n.a.createElement("div",{className:"p-threads_flexpane__loading"},kn.t("Loading messages..."));default:return null}}},{key:"renderList",value:function e(r){var a=this;var i=t.getRowsAndKeys(this.props,this.state),s=i.rows,o=i.keys;this.rows=s;this.keys=o;var l=this.state.degraded?K["a"]:Y["a"];var c=this.props,u=c.reachedEnd,p=c.reachedStart;return n.a.createElement("div",{style:{flex:1}},n.a.createElement(k["a"],null,function(e){var t=e.width,i=e.height;return n.a.createElement(l,d()({},r,{keys:o,width:t,height:i,rowRenderer:a.renderRow,isFocusableItem:a.isFocusableItem,onFocusEnter:a.onFocusEnter,onFocusLeave:a.onFocusLeave,reachedEnd:u,reachedStart:p}))}))}},{key:"render",value:function e(){var t=this.props,r=t.channelId,i=t.threadTs,s=t.oldest,o=t.latest,l=t.timestamps,c=t.startTs,u=t.highlightTs,p=t.highlightKey,m=t.reachedStart,h=t.reachedEnd,f=t.comments,v=t.showDragOverlay;if(!r||!i)return null;var b=this.state,g=b.commentsExpanded,_=b.errored;if(_)return n.a.createElement(Z["a"],{id:"threads_flexpane"},n.a.createElement("div",{className:"p-threads_flexpane"},!this.props.useGlobalNav&&n.a.createElement(lr,{channelId:r,threadTs:i}),n.a.createElement(vn,{tryAgain:this.tryAgain})));var y={comments:f,commentsExpanded:g,highlightTs:u,highlightKey:p};var k=n.a.createElement(a["Fragment"],null,!this.props.useGlobalNav&&n.a.createElement(lr,{channelId:r,threadTs:i}),n.a.createElement(Q,d()({oldest:s,latest:o,timestamps:l,listRenderer:this.renderList,startTs:c,highlightKey:p,requestHistory:this.requestHistory,reachedStart:m,reachedEnd:h,ref:this.listRef},y,{key:Object(x["getThreadKey"])(r,i)})),Object(O["isEmpty"])(l)&&n.a.createElement(Zt,null),v&&n.a.createElement(le["a"],null));return Object(D["a"])()?n.a.createElement(be["a"],{component:this,order:2},n.a.createElement(Z["a"],{id:U["MESSAGE_CONTAINERS"].THREADS_FLEXPANE},n.a.createElement(ve,{location:ue.THREAD,channelId:r,threadTs:i,className:"p-threads_flexpane"},k))):n.a.createElement(be["a"],{component:this,order:2},n.a.createElement(Z["a"],{id:U["MESSAGE_CONTAINERS"].THREADS_FLEXPANE},n.a.createElement("div",{className:"p-threads_flexpane"},k)))}}]);return t}(a["PureComponent"]);jn.displayName="ThreadsFlexpane";jn.defaultProps=Cn;var In=function e(t,r){var a=void 0;a=Object(j["isFeatureEnabled"])(t,"feature_remove_flexpane_store")?Object(T["getFlexParams"])(t)[0]:Object(I["getFlexpaneState"])(t).flexExtra;var n=(a||"").split("-"),i=c()(n,2),s=i[0],o=i[1];var l=r.threadTs||o;var u=r.channelId||s;var p=Object(N["getStartTs"])(t)||l;var m=Object(N["getHighlight"])(t),h=m.highlightTs,f=m.highlightKey;var v=Object(x["getThreadKey"])(u,l);var b=Object(w["getPotentiallyOutdatedTimestamps"])(t,v,p),g=b.start,_=b.end,y=b.timestamps,k=b.reachedStart,O=b.reachedEnd,M=b.prevReachedEnd;var L=Object(A["getSubscriptionState"])(t,{channelId:u,ts:l});var U=void 0;var q=void 0;var G=Object(S["getMessageByTimestamp"])(t,u,l);if(G&&G.files&&1===G.files.length){q=G.files[0];var H=Object(C["getFileById"])(t,q);H&&(U=H.comments)}var W={};Object(D["a"])()?W.userAttention=Object(P["b"])(t):W.windowFocused=Object(E["isWindowFocused"])(t);var V=Object(B["a"])({state:t});return d()({threadTs:l,channelId:u,subscribed:L&&L.subscribed,lastRead:L&&L.lastRead,maxMarkableTs:gn(t,u,y),oldest:g,latest:_,timestamps:y,reachedStart:k,reachedEnd:O,prevReachedEnd:M,userHasUnreadThreads:Object(R["hasUnreadThreads"])(t),fileId:q,comments:U,startTs:p,highlightTs:h,highlightKey:f,showDragOverlay:Object(N["getShowDragOverlay"])(t),useGlobalNav:Object(F["b"])(t)},W,{featureReactThreads:Object(j["isFeatureEnabled"])(t,"feature_react_threads"),logInfo:V.info,logError:V.error})};var Tn=Object(X["a"])(jn,{alwaysFetchOnMount:true});var Nn=Object(i["connect"])(In,{requestHistory:N["requestReplies"],clearHighlight:N["clearHighlight"],markThread:A["markThread"]})(Tn);var An=Nn;var Rn=function e(t,r){if(!t)throw new Error("mountThreadsFlexpane must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(An,null)),r)};var Mn=Rn;var Pn=r(51);Object(Pn["a"])("interop.mountThreadsFlexpane",Mn)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(19);var c=r(278);var u=r(62);var d=r(1059);var p=r(351);var m=r(2);var h=r.n(m);var f=r(13);var v=Object(f["c"])("TS.client.channel_pane.openChannelBrowser",h.a.noop);var b=Object(f["c"])("TS.client.channel_pane.openChannelBrowserToSharedChannels",h.a.noop);var g=Object(f["c"])("TS.client.channel_pane.openCreateChannelDialog",h.a.noop);var _=Object(f["c"])("TS.client.channel_pane.openDMBrowser",h.a.noop);var y=Object(f["c"])("TS.client.channel_pane.openAppsBrowser",h.a.noop);var k=Object(f["c"])("TS.ui.share_channel_dialog.start",h.a.noop);var O=r(821);var E=r(3);var w=r.n(E);var C=r(17);var S=r(3524);var j=r(1005);var I=r(23);var T=r(11);var N=r(27);var A=function e(t){if(!t)return;if(t.teamId&&t.userId&&t.versionTs)return t;if(t.state){var r=Object(I["getTeamId"])(t.state);var a=Object(T["getCurrentUserId"])(t.state);var n=Object(T["getFromBootData"])(t.state,"version_ts");if(r&&a&&n)return{teamId:r,userId:a,versionTs:n}}if(t.getState&&"function"===typeof t.getState){var i=t.getState();var s=Object(I["getTeamId"])(i);var o=Object(T["getCurrentUserId"])(i);var l=Object(T["getFromBootData"])(i,"version_ts");if(s&&o&&l)return{teamId:s,userId:o,versionTs:l}}return};var R=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"timing";if(N["isDev"])return"https://dev.slack.com/beacon/"+t;return"https://slack.com/beacon/"+t};var M={};var P={};function x(){if(!M.generic){M.generic=new S["a"];M.generic.setEndpointUrl(R());j["a"].register(M.generic)}return M.generic}function D(e){var t=A(e);if(!t){Object(C["b"])().warn("TELEMETRY","You tried to get a team-specific telemeter but didn\u2019t provide enough context and are getting the generic telemeter instead which is likely not what you want.");return x()}if(!M[t.teamId]){var r=new S["a"];r.setEndpointUrl(R());r.setTeam(t.teamId);r.setUser(t.userId);r.setVersionTs(t.versionTs);j["a"].register(r);M[t.teamId]=r}return M[t.teamId]}function F(e){var t=A(e);if(!t)throw new Error("Failed to get the necessary context to make a Metrics instance");if(!P[t.teamId]){var r=new S["a"];r.setEndpointUrl(R("notifs"));r.setTeam(t.teamId);r.setUser(t.userId);r.setVersionTs(t.versionTs);j["a"].register(r);P[t.teamId]=r}return P[t.teamId]}var L={};Object.defineProperty(L,"getBeaconEndpointURL",{get:function e(){return R},set:function e(t){R=t}});Object.defineProperty(L,"getPropertiesFromTelemetryContext",{get:function e(){return A},set:function e(t){A=t}});L.resetInstances=function(){M={};P={}};var B=r(752);var U=r(729);var q=r(685);var G=r(21);var H=r(374);var W=r(480);var V=r(26);var z=r(602);var Q=r(69);var K=r(258);var Y=r(3418);var J=r(218);var Z=r(167);var X=r(3267);var $=r(269);var ee=r(63);var te=r(262);var re=r(247);var ae=r(3419);var ne=r(50);var ie=r(12);var se=r(16);var oe=r(10);var le=["starred","sharedChannels","channels","orgWideChannels","ims","apps"];var ce={starred:{channelsOrdered:[],hasHeading:true},sharedChannels:{channelsOrdered:[],hasHeading:true},channels:{channelsOrdered:[],hasHeading:true},orgWideChannels:{channelsOrdered:[],hasHeading:true},ims:{channelsOrdered:[],hasHeading:true},apps:{channelsOrdered:[],hasHeading:true}};var ue=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","teambot","you","imsMentions","ims"];var de=h.a.invert(ue);var pe={default:ue.map(function(){return[]}),muted:ue.map(function(){return[]})};var me=function e(t){var r=t.channel,a=t.members,n=t.isCurrentlySelected,i=t.isMuted,s=t.shouldHideReadChannels,o=t.shouldHideReadChannelsUnlessStarred,l=t.featureReactMessages,c=t.hasDraft,u=t.teamId;if(Object(ie["isFromAnotherTeam"])(r))return false;if(Object(ie["isUnknownOrNonExistent"])(r))return false;if(n)return true;if(Object(ie["isArchived"])(r))return false;if(Object(ie["isImAndIsMemberDeleted"])(r,a[Object(ie["getMemberIdFromIm"])(r)]))return false;if(!Object(ie["isMemberOfChannel"])(r))return false;if((Object(ie["isIm"])(r)||Object(ie["isMpim"])(r))&&!Object(ie["isOpen"])(r)&&Object(ie["isRead"])(r))return false;if(Object(ie["isIm"])(r)){var d=[Object(ie["getMemberIdFromIm"])(r)];d.length||Object(C["a"])({teamId:u}).error("SIDEBAR-SECTIONS","IM "+r.id+" is missing its associated user");if(!Object(se["haveMembersForIds"])({members:a,dangerouslyOverrideCreateSelectorSanityCheck:true},d))return false}if(Object(ie["isMpim"])(r)){var p=Object(ie["getMemberIdsFromMpim"])(r);p&&p.length||Object(C["a"])({teamId:u}).error("SIDEBAR-SECTIONS","MPIM "+r.id+" is missing its associated members");if(!Object(se["haveMembersForIds"])({members:a,teamId:u,dangerouslyOverrideCreateSelectorSanityCheck:true},p))return false}if(o&&Object(ie["isStarred"])(r))return true;if(c)return true;if(i&&Object(ie["shouldShowWithoutUnreads"])(r)&&!l)return true;if((o||s)&&Object(ie["isRead"])(r))return false;return true};var he=function e(t){var r=t.channel,a=t.isApp,n=t.isAppSpaceEnabled,i=t.shouldSeparateSharedChannels,s=t.shouldSeparateOrgWideChannels;if(Object(ie["isStarred"])(r))return"starred";if(Object(ie["isSharedPublicOrPrivateChannel"])(r)&&i)return"sharedChannels";if(Object(ie["isOrgGlobalSharedPublicOrPrivateChannel"])(r)&&!Object(ie["isPrivateChannel"])(r)&&s)return"orgWideChannels";if(a&&n)return"apps";if(Object(ie["isIm"])(r)||Object(ie["isMpim"])(r))return"ims";return"channels"};var fe=function e(t){var r=t.channel,a=t.currentUserId,n=t.shouldSeparatePrivateChannels,i=t.shouldSeparateSharedChannels,s=t.shouldBumpMention;if(Object(ie["isSlackbot"])(r))return de.slackbot;if(Object(ie["isTeambot"])(r,true))return de.teambot;if(Object(ie["isUserId"])(r,a))return de.you;if(Object(ie["isIm"])(r)||Object(ie["isMpim"])(r))return s?de.imsMentions:de.ims;if(n&&Object(ie["isPrivateChannel"])(r))return s?de.privateMentions:de.private;if(i&&Object(ie["isSharedPublicOrPrivateChannel"])(r))return s?de.sharedMentions:de.shared;return s?de.defaultMentions:de.default};var ve=function e(t,r){return Object(oe["o"])(Object(ie["getDisplayName"])(t),Object(ie["getDisplayName"])(r))};var be=function e(t,r){var a=t.priority||-1;var n=r.priority||-1;if(a===n)return ve(t,r);return n-a};var ge=function e(t){var r=t.sortPref,a=t.currentTeam;if("priority"===r&&""!==a.plan)return be;return ve};var _e=function e(t){var r=t.channel,a=t.members;var n=Object(ie["getMemberIdFromIm"])(r);var i=a&&a[n]||null;return Object(se["isAppOrBot"])(i)};var ye=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.channels,a=t.currentlySelectedId,n=t.mutedChannels,i=t.members,s=t.sidebarBehaviorPref,o=t.featureReactMessages,l=t.draftChannelIds,c=t.teamId;var u="hide_read_channels"===s;var d="hide_read_channels_unless_starred"===s;var p=[];var m=false;var h=false;var f=false;var v=Object.keys(r);for(var b=0;b<v.length;b+=1){var g=r[v[b]];var _=-1!==l.indexOf(g.id);Object(ee["a"])()||(_=Object(ie["legacyGetHasDraft"])(g));var y=me({channel:g,members:i,isCurrentlySelected:a===g.id,isMuted:!!n[g.id],shouldHideReadChannels:u,shouldHideReadChannelsUnlessStarred:d,featureReactMessages:o,hasDraft:_,teamId:c});y&&p.push(g);m||(m=Object(ie["isSharedPublicOrPrivateChannel"])(g)&&(Object(ie["isMemberOfChannel"])(g)||a===g.id));h||(h=Object(ie["isOrgGlobalSharedPublicOrPrivateChannel"])(g)&&!Object(ie["isPrivateChannel"])(g));f||(f=Object(ie["isStarred"])(g))}return{channelsVisible:p,belongsToOrPreviewingAnySharedChannels:m,belongsToAnyOrgChannels:h,hasAStarredChannel:f}};var ke=function e(t){return Object(G["getUserPref"])(t,"sidebar_behavior")};var Oe=function e(t){return Object(G["getUserPref"])(t,"channel_sort")};var Ee=function e(t){return Object(G["getUserPref"])(t,"separate_private_channels")};var we=function e(t){return Object(G["getUserPref"])(t,"separate_shared_channels")};var Ce=function e(t){return Object(G["getUserPref"])(t,"ent_org_wide_channels_sidebar")};var Se=Object(te["createSelector"])([T["useReactMessages"],ne["getCurrentTeam"],ke,Oe,Ee,we,Ce,l["getAllChannels"],H["getMutedChannels"],V["getAllMembers"],ae["getAllDraftChannelIds"],Q["getPrimaryView"],T["getCurrentUserId"],re["isAppSpaceEnabled"],I["getTeamId"]],function(e,t,r,a,n,i,s,o,l,c,u,d,p,m,f){var v={};var b=le.concat();b.forEach(function(e){v[e]=w()({},ce[e]);v[e].channelsOrdered=h.a.cloneDeep(pe)});var g=ye({channels:o,currentlySelectedId:d,mutedChannels:l,members:c,sidebarBehaviorPref:r,featureReactMessages:e,draftChannelIds:u,teamId:f}),_=g.channelsVisible,y=g.belongsToOrPreviewingAnySharedChannels;var k=ge({sortPref:a,currentTeam:t});var O=_.sort(k);var E=[];O.forEach(function(t){Object(ie["isIm"])(t)&&E.push(Object(ie["getMemberIdFromIm"])(t));var r=he({channel:t,isApp:_e({channel:t,members:c}),isAppSpaceEnabled:m,shouldSeparateSharedChannels:i,shouldSeparateOrgWideChannels:s});var o=!!l[t.id];var u=Object(ie["getBadgeCountWithMuted"])(t,o,e);var d=u>0;var h=fe({channel:t,currentUserId:p,shouldSeparatePrivateChannels:n,shouldSeparateSharedChannels:i,shouldBumpMention:"priority"===a&&d});var f=o?"muted":"default";var b=v[r].channelsOrdered[f][h];b.push(t.id)});var C=h.a.mapValues(v,function(e){return w()({},e,{channelsOrdered:h.a.flatten(e.channelsOrdered.default.concat(e.channelsOrdered.muted))})});if(C.starred.channelsOrdered.length<1){delete C.starred;h.a.remove(b,function(e){return"starred"===e})}if(!i||!y){delete C.sharedChannels;h.a.remove(b,function(e){return"sharedChannels"===e})}if(!s||C.orgWideChannels.channelsOrdered.length<1){delete C.orgWideChannels;h.a.remove(b,function(e){return"orgWideChannels"===e})}if(!m){delete C.apps;h.a.remove(b,function(e){return"apps"===e})}return{sidebarSectionsOrdered:b,sidebarSections:C,idsNeedingPresenceSubscription:E}});var je=Se;var Ie=12;var Te=18;var Ne=26;var Ae=52;var Re={id:null,type:"topPadding",height:Ie};var Me={id:null,type:"spacer",height:Te};var Pe={id:"Vquick_switcher",type:"quickswitcherButton",height:Ae};var xe={id:"Vall_unreads",type:"allUnreadsLink",height:Ne};var De={id:"Vall_threads",type:"allThreadsLink",height:Ne};var Fe={id:"Vsearch",type:"searchLink",height:Ne};var Le={id:null,type:"sectionHeading",name:"",height:Ne};var Be={id:null,type:"folderHeading",name:"",height:Ne};var Ue={id:null,type:"channel",index:null,height:Ne};var qe={id:null,type:"invitePeopleLink",dim:false,height:Ne};var Ge={id:null,type:"installAppsLink",dim:false,height:Ne};var He={id:null,type:"emptyState",index:null,height:Ne};var We=Object(te["createSelector"])([function(e){return e&&e.hasQuickswitcherButton},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasSearchLink},function(e){return e&&e.hasInvitePeopleLink},function(e){return e&&e.sidebarFiltersIsEnabled},function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.sidebarFoldersIsEnabled},function(e){return e&&e.sidebarFolders}],function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};var o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];var c=[];var u={};var d=0;e?c.push(w()({},Pe,{scrollTop:d,scrollBottom:d+=Pe.height})):c.push(w()({},Re,{scrollTop:d,scrollBottom:d+=Re.height}));t&&!Object(ee["a"])()&&c.push(w()({},xe,{scrollTop:d,scrollBottom:d+=xe.height}));c.push(w()({},De,{scrollTop:d,scrollBottom:d+=De.height}));r&&c.push(w()({},Fe,{scrollTop:d,scrollBottom:d+=Fe.height}));var p=0;o&&l.forEach(function(e){"folderHeading"!==Object(m["last"])(c).type&&c.push(w()({},Me,{scrollTop:d,scrollBottom:d+=Me.height}));c.push(w()({},Be,{id:e.name,name:e.name}));e.channelIds.forEach(function(t){var r=false;i.forEach(function(e){var a=s[e]||{};var n=a.channelsOrdered||[];r=r||n.filter(function(e){return e===t}).length>0});if(!r)return;if(!e.isCollapsed){c.push(w()({},Ue,{id:t,index:p,scrollTop:d,scrollBottom:d+=Ue.height,sectionName:e.name}));p+=1}u[t]=true})});i.forEach(function(e){var t=s[e]||{};var r=t.channelsOrdered||[];("sectionHeading"!==Object(m["last"])(c).type||r.length>0)&&c.push(w()({},Me,{scrollTop:d,scrollBottom:d+=Me.height}));t.hasHeading&&c.push(w()({},Le,{name:e,scrollTop:d,scrollBottom:d+=Le.height,sectionName:e}));n&&t.hasHeading&&0===r.length&&c.push(w()({},He,{name:e,scrollTop:d,scrollBottom:d+=He.height}));t.channelsOrdered.forEach(function(t){if(u[t])return;c.push(w()({},Ue,{id:t,index:p,scrollTop:d,scrollBottom:d+=Ue.height,sectionName:e}));p+=1});if("ims"===e&&a){c.push(w()({},Me,{scrollTop:d,scrollBottom:d+=Me.height}));c.push(w()({},qe,{dim:"dim"===a,height:qe.height,scrollTop:d,scrollBottom:d+=qe.height}))}if("apps"===e){c.push(w()({},Me,{scrollTop:d,scrollBottom:d+=Me.height}));c.push(w()({},Ge,{height:Ge.height,scrollTop:d,scrollBottom:d+=Ge.height}))}});c.push(w()({},Me,{scrollTop:d,scrollBottom:d+=Me.height}));c.push(w()({},Me,{scrollTop:d,scrollBottom:d+=Me.height}));return{rows:c,rowsMap:Object(m["keyBy"])(c,"id"),rowIds:Object(m["map"])(c,"id")}});var Ve=We;var ze=r(5);var Qe=r.n(ze);var Ke=r(6);var Ye=r.n(Ke);var Je=r(7);var Ze=r.n(Je);var Xe=r(8);var $e=r.n(Xe);var et=r(129);var tt=r(15);var rt=r.n(tt);var at=r(107);var nt=r(1088);var it=r(1084);var st=r(242);var ot=r(161);var lt=r(255);var ct=r(20);var ut=r(177);var dt=r(3466);var pt=r(2086);var mt=r(656);var ht=r(742);var ft=r(3548);var vt=r(451);var bt=r(312);var gt=r(443);var _t=r(164);var yt=r(18);var kt=r(416);var Ot=r(482);var Et=r(992);var wt=r(372);var Ct=r(41);var St=r(775);var jt=r(1060);var It=r(75);var Tt={className:et["b"].string,children:et["b"].node.isRequired,renderWebappMenu:et["b"].func,getTemplate:et["b"].func.isRequired};var Nt={className:"",renderWebappMenu:null};var At=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onDesktopContextMenu=r.onDesktopContextMenu.bind(r);r.renderWebappMenu=r.renderWebappMenu.bind(r);return r}Ye()(t,[{key:"onDesktopContextMenu",value:function e(){var t=this;return function(){var e=t.props.getTemplate();window.desktop.contextMenu(e)}}},{key:"renderWebappMenu",value:function e(t){if(this.props.renderWebappMenu)return this.props.renderWebappMenu(t);return n.a.createElement(jt["a"],w()({},t,{template:this.props.getTemplate(),width:200}))}},{key:"render",value:function e(){var t=this;if(It["isDesktop"]){if(window.desktop.contextMenu){var r=n.a.Children.map(this.props.children,function(e){return n.a.cloneElement(e,{onContextMenu:t.onDesktopContextMenu()})});return r[0]}return this.props.children}var a=this.props.className;return n.a.createElement(St["a"],w()({},this.props,{useMouseCoordinatesAsTargetBounds:true,onContextMenu:this.renderWebappMenu,className:a,renderMenu:this.renderWebappMenu}),this.props.children)}}]);return t}(a["PureComponent"]);At.displayName="ContextMenuTrigger";var Rt=At;At.defaultProps=Nt;var Mt=r(1415);var Pt=r(76);var xt=r(2198);var Dt={className:et["b"].string,count:et["b"].number.isRequired,maxCount:et["b"].number};var Ft={className:void 0,maxCount:9};var Lt=function e(t,r){return t>r?r+"+":String(t)};var Bt=function e(t){var r=t.className,a=t.count,i=t.maxCount;if(!a||a<0)return null;var s=rt()(r,"c-mention_badge");return n.a.createElement("span",{"data-qa":"mention_badge",className:s},Lt(a,i))};Bt.displayName="MentionBadge";Bt.defaultProps=Ft;var Ut=Object(Pt["pure"])(Bt);var qt=Ut;var Gt="CHANNEL-SIDEBAR";var Ht={LOG_LABEL:Gt};var Wt=r(1416);var Vt=new oe["b"]("channel_sidebar");var zt={isPendingShared:et["b"].bool,isShared:et["b"].bool,isOrgShared:et["b"].bool,type:et["b"].oneOf(["channel","private","im","mpim"]),isSlackbot:et["b"].bool,isYou:et["b"].bool,isMuted:et["b"].bool,hasUnreads:et["b"].bool,hasDraft:et["b"].bool,isArchived:et["b"].bool,sharedTeamIds:et["b"].arrayOf(et["b"].string),displayName:et["b"].string,isSelected:et["b"].bool,unreadCount:et["b"].number,badgeCount:et["b"].number,userCount:et["b"].number,userId:et["b"].string,userActive:et["b"].bool,id:et["b"].string.isRequired,priority:et["b"].number,selectItem:et["b"].func,closeIM:et["b"].func,isTyping:et["b"].bool,isStarred:et["b"].bool,members:et["b"].arrayOf(et["b"].string),memberPresences:et["b"].arrayOf(et["b"].string),onContextMenu:et["b"].func,featureSidebarContextMenu:et["b"].bool.isRequired,index:et["b"].number.isRequired,sidebarFoldersIsEnabled:et["b"].bool,onDragStart:et["b"].func,onDragEnd:et["b"].func,onDrop:et["b"].func,onDragOver:et["b"].func,featureSonicPresenceManager:et["b"].bool,clogger:et["b"].object.isRequired};var Qt={isSelected:false,isPendingShared:false,isShared:false,isOrgShared:false,type:"channel",isSlackbot:false,isYou:false,isMuted:false,hasUnreads:false,hasDraft:false,isArchived:false,sharedTeamIds:null,displayName:"",badgeCount:0,userCount:0,userId:void 0,userActive:true,priority:null,selectItem:h.a.noop,closeIM:h.a.noop,isTyping:false,isStarred:false,members:null,memberPresences:null,onContextMenu:h.a.noop,sidebarFoldersIsEnabled:false,onDragStart:h.a.noop,onDragEnd:h.a.noop,onDrop:h.a.noop,onDragOver:h.a.noop,featureSonicPresenceManager:false,clogger:{}};var Kt=Object(C["b"])();var Yt=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.closeIM=r.closeIM.bind(r);return r}Ye()(t,[{key:"onClick",value:function e(t){t.preventDefault();Kt.action(Gt,"Selected "+this.props.id);this.props.selectItem(this.props.id);this.clogClick()}},{key:"closeIM",value:function e(t){t.preventDefault();t.stopPropagation();Kt.action(Gt,"Closed "+this.props.id);this.props.closeIM({channelId:this.props.id})}},{key:"clogClick",value:function e(){var t=this.props,r=t.id,a=t.index,n=t.isMuted,i=t.isStarred,s=t.hasUnreads,o=t.isArchived,l=t.isSelected,c=t.badgeCount,u=t.clogger;u.track("SIDEBAR_ITEM_CLICK",{item_type:r[0],item_id:r,index:a,is_muted:n,is_starred:i,has_unreads:s,is_archived:o,is_selected:l,badge_count:c})}},{key:"shouldShowPresence",value:function e(){var t=this.props,r=t.type,a=t.isSlackbot,n=t.isSelected,i=t.hasDraft,s=t.isTyping,o=t.isArchived;if("im"!==r)return false;if(a)return false;if(i&&!n)return false;if(s&&!n)return false;if(o)return false;return true}},{key:"shouldShowClose",value:function e(){var t=this.props,r=t.type,a=t.hasUnreads;if("im"!==r&&"mpim"!==r)return false;if(a)return false;return true}},{key:"shouldShowExternalSharedIcon",value:function e(){var t=this.props,r=t.isShared,a=t.type;return r&&!("im"===a||"mpim"===a)}},{key:"shouldShowOrgSharedIcon",value:function e(){var t=this.props,r=t.isOrgShared,a=t.type;return r&&!("im"===a||"mpim"===a)}},{key:"buildName",value:function e(){var t=this.props.type;if("im"===t)return this.buildImName();if("mpim"===t)return this.buildMpimName();return n.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name"},this.props.displayName)}},{key:"buildImName",value:function e(){var t=this.props,r=t.userId,a=t.isYou,i=t.userActive;var s=n.a.createElement(wt["a"],{id:r});var o=n.a.createElement(Ot["a"],{memberId:r});var l=a&&n.a.createElement("span",{className:"p-channel_sidebar__you_label"},Vt.t("(you)"));return n.a.createElement("span",{className:rt()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":!i}),"data-qa":"channel_sidebar_name"},o,s,l)}},{key:"buildMpimName",value:function e(){var t=this.props,r=t.type,a=t.members,i=t.memberPresences;if("mpim"!==r||!a||!i)return null;var s=h.a.flatMap(a,function(e,t){return[n.a.createElement(wt["a"],{id:e,key:e}),t<a.length-1?", ":null]});return n.a.createElement(Ct["d"],{tip:s,position:"top-left",delay:Ct["a"]},n.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name"},s))}},{key:"buildAriaLabel",value:function e(){var t=this.props,r=t.type,a=t.displayName,n=t.isShared,i=t.isOrgShared,s=t.isYou,o=t.isMuted,l=t.hasUnreads,c=t.hasDraft,u=t.isArchived,d=t.unreadCount,p=t.badgeCount,m=t.isSelected,h=t.userActive,f=t.isTyping;return Object(Mt["a"])({type:r,displayName:a,isShared:n,isOrgShared:i,isYou:s,isMuted:o,hasUnreads:l,hasDraft:c,isArchived:u,unreadCount:d,badgeCount:p,isSelected:m,userActive:h,isTyping:f})}},{key:"renderPresence",value:function e(t){return n.a.createElement(kt["a"],{memberId:t,enablePresenceSubscriptions:this.props.featureSonicPresenceManager||Object(at["a"])(),inline:false})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.id,i=r.type,s=r.isPendingShared,o=r.isSlackbot,l=r.isYou,c=r.isMuted,u=r.hasUnreads,d=r.hasDraft,p=r.isArchived,m=r.badgeCount,h=r.isSelected,f=r.userCount,v=r.displayName,b=r.userId,g=r.priority,_=r.isTyping,y=r.isStarred,k=r.sharedTeamIds,O=r.onContextMenu,E=r.featureSidebarContextMenu;var C=rt()("p-channel_sidebar__channel",{"p-channel_sidebar__channel--private":"private"===i,"p-channel_sidebar__channel--shared":this.shouldShowExternalSharedIcon(),"p-channel_sidebar__channel--org-shared":this.shouldShowOrgSharedIcon(),"p-channel_sidebar__channel--mpim":"mpim"===i,"p-channel_sidebar__channel--im":"im"===i,"p-channel_sidebar__channel--im-slackbot":o,"p-channel_sidebar__channel--im-you":l,"p-channel_sidebar__channel--selected":h,"p-channel_sidebar__channel--muted":c,"p-channel_sidebar__channel--unread":u&&!p,"p-channel_sidebar__channel--draft":d&&!h,"p-channel_sidebar__channel--archived":p,"p-channel_sidebar__channel--typing":_&&!h});var S=n.a.createElement(qt,{count:m,className:"p-channel_sidebar__badge"});var j={"data-user-count":f};var I=this.shouldShowPresence()&&this.renderPresence(b);var T=this.buildName();var N=this.shouldShowExternalSharedIcon()&&n.a.createElement(Et["a"],{tooltip:true,sharedTeamIds:k,className:"p-channel_sidebar__icon",pending:s});var A=n.a.createElement("a",w()({href:"/messages/"+a,className:C,onClick:this.onClick,onContextMenu:O},j,{"data-qa-channel-sidebar-channel":true,"data-qa-channel-sidebar-channel-is-selected":h,"data-qa-channel-sidebar-channel-id":a,"data-qa-channel-sidebar-channel-type":i,"data-qa-channel-sidebar-is-starred":y,"data-qa-channel-sidebar-is-you":l,"data-qa-channel-sidebar-priority":g,"aria-label":this.buildAriaLabel(),draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":a,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}),I,T,S,N);if(this.shouldShowClose()){var R=n.a.createElement(ct["c"],{onClick:this.closeIM,className:"p-channel_sidebar__close","aria-label":Vt.t("Close Direct Message with {name}",{name:v})},n.a.createElement(yt["a"],{type:"times-circle-medium"}));A=n.a.createElement("div",{className:"p-channel_sidebar__close_container"},A,R)}if(E){var M=function e(){return Object(Wt["a"])(t.props)};return n.a.createElement(Rt,{getTemplate:M},A)}return A}}]);return t}(gt["a"]);Yt.displayName="Channel";Yt.propTypes=zt;Yt.defaultProps=Qt;var Jt=function e(t){return{clogger:Object(_t["a"])({state:t})}};var Zt=Object(i["connect"])(Jt)(Yt);var Xt={closeIM:l["closeChannelApi"]};var $t=function e(t,r){var a=r.id;var n=Object(l["getChannelById"])(t,a);if(!n)return{id:a,featureSidebarContextMenu:Object(T["isFeatureEnabled"])(t,"feature_sidebar_context_menu")};var i=Object(ie["isMpim"])(n)?Math.min(Math.max(h.a.get(n,"members.length",1)-1,2),9):0;var s=Object(ie["getChannelType"])(n);var o="im"===s&&Object(G["getUserPref"])(t,"show_typing")&&Object(vt["getTyperIdsInChannel"])(t,a).length>0;var c="im"!==s||"active"===Object(bt["getPresenceByMemberId"])(t,Object(ie["getMemberIdFromIm"])(n));var u=Object(T["getCurrentUserId"])(t);var d="mpim"===s&&Object(ie["getMemberIdsFromMpim"])(n)&&h.a.filter(Object(ie["getMemberIdsFromMpim"])(n),function(e){return e!==u});var p="mpim"===s&&d&&h.a.map(d,function(e){return Object(bt["getPresenceByMemberId"])(t,e)});var m=!Object(ie["isMpim"])(n)&&!Object(ie["isIm"])(n)||Object(ie["isPrivateChannel"])(n);var f=!Object(ie["isMpim"])(n)&&!Object(ie["isIm"])(n);var v=Object(ie["isMemberOfChannel"])(n)||Object(ie["isPrivateChannel"])(n);return{isSelected:Object(Q["getPrimaryView"])(t)===a,isPendingShared:Object(ie["isPendingExternallySharedChannel"])(n),isShared:Object(ie["isExternallySharedChannel"])(n),isOrgShared:Object(ie["isOrgShared"])(n),isSlackbot:Object(ie["isSlackbot"])(n),isYou:Object(ie["isYou"])(u,n),isMuted:Object(H["isChannelMutedById"])(t,a),hasUnreads:!!Object(ie["getUnreadCount"])(n),hasDraft:Object(ie["getHasDraft"])(t,a),isArchived:Object(ie["isArchived"])(n),sharedTeamIds:Object(ie["getMaybePendingSharedTeamIds"])(n),displayName:Object(ie["getDisplayName"])(n),unreadCount:Object(ie["getUnreadCount"])(n),badgeCount:Object(l["getBadgeCount"])(t,n),userCount:i,userId:Object(ie["getMemberIdFromIm"])(n)||n.user_id,userActive:c,type:s,id:a,isTyping:o,isStarred:Object(ie["isStarred"])(n),members:d||null,memberPresences:p||null,name:Object(ie["getDisplayName"])(n),priority:n.priority,isPrivateChannel:Object(ie["isPrivateChannel"])(n),isMemberOfChannel:ie["isMemberOfChannel"],canMute:m,canLeave:v,isChannel:f,featureSidebarContextMenu:Object(T["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),featureSonicPresenceManager:Object(T["isFeatureEnabled"])(t,"feature_sonic_presence_manager")}};var er=Object(i["connect"])($t,Xt)(Zt);var tr=r(240);var rr=r(145);var ar=r(1417);var nr=r(1158);var ir=r(2079);var sr=new oe["b"]("channel_sidebar");var or={coachmarkState:et["b"].oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]),setJumperCoachmarkState:et["b"].func,setUserPrefByApi:et["b"].func,clogger:et["b"].object.isRequired};var lr={coachmarkState:void 0,setJumperCoachmarkState:m["noop"],setUserPrefByApi:m["noop"],clogger:{}};var cr=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.hideCoachmark=r.hideCoachmark.bind(r);r.hideButton=r.hideButton.bind(r);r.onShowContinue=r.onShowContinue.bind(r);r.onShowSkip=r.onShowSkip.bind(r);r.onHideContinue=r.onHideContinue.bind(r);r.onHideSkip=r.onHideSkip.bind(r);r.onButtonClick=r.onButtonClick.bind(r);return r}Ye()(t,[{key:"onShowContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideCoachmark()}},{key:"onShowSkip",value:function e(t,r){t.stopPropagation();switch(r){case"SKIP":this.clog("SKIP");return this.hideButton();case"CLOSE":this.clog("CLOSE");return this.hideCoachmark();default:return null}}},{key:"onHideContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideButton()}},{key:"onHideSkip",value:function e(t,r){t.stopPropagation();switch(r){case"SKIP":this.clog("SKIP");return this.hideCoachmark();case"CLOSE":this.clog("CLOSE");return this.hideButton();default:return null}}},{key:"onButtonClick",value:function e(){var t=this.props.clogger;t.track("QUICKSWITCHER_ACTION",{trigger:"sidebar_btn",action:"opened",quickswitcher_session_id:Object(ar["a"])()});Object(ar["b"])()}},{key:"clog",value:function e(t){var r=this.props,a=r.clogger,n=r.coachmarkState;var i={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[n];a.track("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:t,step:i}}})}},{key:"hideCoachmark",value:function e(){this.props.setJumperCoachmarkState(null)}},{key:"hideButton",value:function e(){this.hideCoachmark();this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:false});this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}},{key:"maybeRenderCoachmark",value:function e(t){var r={SHOW:{title:sr.rt("Get around Slack faster <sparkles></sparkles>",null,function(e){var t=e.tag,r=e.key;if("sparkles"===t)return n.a.createElement(rr["b"],{key:r,text:":sparkles:",emojiSize:rr["a"].MEDIUM});return null}),content:sr.rt("To jump to any channel or conversation, try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(N["isMac"])()?"\u2318K":"Ctrl+K"}),skipLinkText:sr.t("Hide the sidebar button"),continueButtonText:sr.t("OK")},HIDE:{title:sr.t("You\u2019re a pro at keyboard shortcuts"),content:sr.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(N["isMac"])()?"\u2318K":"Ctrl+K"}),skipLinkText:sr.t("No thanks, I like the button"),continueButtonText:sr.t("Hide Button")}};var a={skipLinkPre:"",position:"right-bottom",shouldShow:true,hasCloseButton:false,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":this.clog("IMPRESSION");return n.a.createElement(nr["a"],w()({},a,r.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),t);case"HIDE_BUTTON":this.clog("IMPRESSION");return n.a.createElement(nr["a"],w()({},a,r.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),t);default:return t}}},{key:"render",value:function e(){var t=n.a.createElement(ct["c"],{type:"button",className:"p-channel_sidebar__jumper",onClick:this.onButtonClick,"aria-label":sr.t("Open the Quick Switcher to jump to a conversation.")},n.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},n.a.createElement(yt["a"],{type:"filter",inherit:true,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),sr.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),n.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},Object(N["isMac"])()?"\u2318K":"ctrl+K"));return this.maybeRenderCoachmark(t)}}]);return t}(a["Component"]);cr.displayName="QuickswitcherButton";cr.defaultProps=lr;var ur=function e(t){return{coachmarkState:Object(U["getJumperCoachmarkState"])(t),clogger:Object(_t["a"])({state:t})}};var dr={setJumperCoachmarkState:U["setJumperCoachmarkState"],setUserPrefByApi:tr["c"]};var pr=Object(i["connect"])(ur,dr)(cr);var mr=new oe["b"]("channel_sidebar");var hr={id:et["b"].string.isRequired,label:et["b"].string.isRequired,labelUnread:et["b"].string,hasUnreads:et["b"].bool,badgeCount:et["b"].number,isSelected:et["b"].bool,selectItem:et["b"].func,isDim:et["b"].bool};var fr={isSelected:false,selectable:true,label:"",labelUnread:"",hasUnreads:false,badgeCount:0,selectItem:h.a.noop,isDim:false};var vr=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.state={};return r}Ye()(t,[{key:"onClick",value:function e(t){t.preventDefault();Object(C["b"])().action(Gt,"Selected "+this.props.id);this.props.selectItem(this.props.id,t)}},{key:"render",value:function e(){var t=this.props,r=t.id,a=t.label,i=t.labelUnread,s=t.hasUnreads,o=t.badgeCount,l=t.isSelected,c=t.isDim;var u=rt()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===r,"p-channel_sidebar__link--all-threads":"Vall_threads"===r,"p-channel_sidebar__link--search":"Vsearch"===r,"p-channel_sidebar__link--invites":"Vinvites"===r,"p-channel_sidebar__link--selected":l,"p-channel_sidebar__link--unread":s,"p-channel_sidebar__link--dim":c});var d=s&&i?i:a;var p=n.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name"},d);var m=h.a.filter([l?mr.t("selected"):null,s&&!o?mr.t("has unreads"):null,o?mr.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:o}):null],h.a.identity);var f=d+(m.length?" ("+m.join(", ")+")":"");var v=n.a.createElement(qt,{count:o,className:"p-channel_sidebar__badge"});return n.a.createElement(ct["c"],{className:u,onClick:this.onClick,"aria-label":f,"data-qa-channel-sidebar-link-id":r},p,v)}}]);return t}(a["PureComponent"]);vr.displayName="Link";vr.defaultProps=fr;var br=vr;var gr=new oe["b"]("channel_sidebar");var _r="Vall_unreads";var yr=function e(t){return{id:_r,label:gr.t("All Unreads"),hasUnreads:Object(W["hasUnreads"])(t),isSelected:Object(Q["getPrimaryView"])(t)===_r}};var kr=Object(i["connect"])(yr)(br);var Or=kr;var Er=new oe["b"]("channel_sidebar");var wr="Vall_threads";var Cr=function e(t){return{id:wr,label:Object(T["isFeatureEnabled"])(t,"feature_threads_copy_change")?Er.t("Threads"):Er.t("All Threads"),labelUnread:Object(T["isFeatureEnabled"])(t,"feature_threads_copy_change")?Er.t("Threads"):Er.t("New Threads"),hasUnreads:Object(W["hasUnreadThreads"])(t),badgeCount:Object(W["getThreadsMentionCount"])(t),isSelected:Object(Q["getPrimaryView"])(t)===wr}};var Sr=Object(i["connect"])(Cr)(br);var jr=Sr;var Ir=new oe["b"]("channel_sidebar");var Tr="Vsearch";var Nr=function e(t){var r="";Object(T["isFeatureEnabled"])(t,"feature_primary_search")&&Object(X["a"])(t)&&(r=Ir.t("Search Results"));return{id:Tr,label:r,isSelected:Object(Q["getPrimaryView"])(t)===Tr}};var Ar=Object(i["connect"])(Nr)(br);var Rr=Ar;var Mr=new oe["b"]("channel_sidebar");var Pr=function e(t){var r=t.selectItem,a=t.dim;return n.a.createElement(br,{key:"Vinvites",id:"Vinvites",label:Mr.t("Invite People"),selectItem:r,isDim:a})};Pr.displayName="InviteLink";Pr.defaultProps={selectItem:h.a.noop,dim:true};var xr=Object(Pt["pure"])(Pr);var Dr=r(170);var Fr=r(967);var Lr=r(79);var Br=new oe["b"]("channel_sidebar");var Ur={isAppWhitelistEnabled:et["b"].bool,isEnterprise:et["b"].bool,installAppsString:et["b"].string,fetchMemberCountsForTeam:et["b"].func.isRequired,clogger:et["b"].object.isRequired,promiseToHaveOpenWebSocket:et["b"].func.isRequired,featureDegradedMode:et["b"].bool};var qr={isAppWhitelistEnabled:false,isEnterprise:false,installAppsString:"",clogger:{},featureDegradedMode:false};var Gr=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={numBots:0,numMembers:0};r._isMounted=false;r.handleAppsBrowserClick=r.handleAppsBrowserClick.bind(r);return r}Ye()(t,[{key:"componentWillMount",value:function e(){var t=this;var r=function e(){return t.props.fetchMemberCountsForTeam().then(function(e){var r=e.bots,a=e.members;t._isMounted&&t.setState(function(){return{numBots:r,numMembers:a}})})};if(!this.props.featureDegradedMode)return r();return r().catch(function(){return t.props.promiseToHaveOpenWebSocket().finally(function(){return t._isMounted&&r()})})}},{key:"componentDidMount",value:function e(){this._isMounted=true}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"handleAppsBrowserClick",value:function e(){var t=this.props.clogger;t.track("INSTALL_APPS_LINK_APP_BROWSER_CLICK");y()}},{key:"render",value:function e(){var t=this.state,r=t.numBots,a=t.numMembers;if(a<10||r>=3||this.props.isEnterprise||this.props.isAppWhitelistEnabled)return null;return n.a.createElement(ct["c"],{className:"p-channel_sidebar__link",onClick:this.handleAppsBrowserClick},"+ ",this.props.installAppsString)}}]);return t}(a["Component"]);Gr.displayName="InstallAppsLink";Gr.defaultProps=qr;var Hr={fetchMemberCountsForTeam:Fr["b"],promiseToHaveOpenWebSocket:Lr["promiseToHaveOpenWebSocketAction"]};function Wr(e){var t=Br.t("Add Apps");return{isAppWhitelistEnabled:Object(G["getTeamPref"])(e,"app_whitelist_enabled"),isEnterprise:!h.a.isEmpty(Object(Dr["getEnterprise"])(e)),installAppsString:t,clogger:Object(_t["a"])({state:e}),featureDegradedMode:Object(T["isFeatureEnabled"])(e,"feature_degraded_send")}}var Vr=Object(i["connect"])(Wr,Hr)(Gr);var zr=r(1160);var Qr=new oe["b"]("channel_browser_coachmark");var Kr={label:et["b"].string.isRequired,qaLabel:et["b"].string,iconClass:et["b"].string,tooltip:et["b"].string,tooltipClassName:et["b"].string,tooltipArrowOffset:et["b"].number,onLabelClick:et["b"].func,showPlus:et["b"].bool,plusTooltip:et["b"].string,onPlusClick:et["b"].func,seenChannelBrowserCoachmark:et["b"].bool,hasRecentlySharedAChannel:et["b"].bool,setUserPrefByApi:et["b"].func};var Yr={label:"",qaLabel:"",iconClass:null,tooltip:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:h.a.noop,showPlus:false,plusTooltip:"",onPlusClick:h.a.noop,seenChannelBrowserCoachmark:false,hasRecentlySharedAChannel:false,setUserPrefByApi:h.a.noop};var Jr=Object(C["b"])();var Zr=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onLabelClick=r.onLabelClick.bind(r);r.onPlusClick=r.onPlusClick.bind(r);r.setTooltipRef=r.setTooltipRef.bind(r);r.setPlusTooltipRef=r.setPlusTooltipRef.bind(r);return r}Ye()(t,[{key:"onLabelClick",value:function e(t){t.preventDefault();Jr.action(Gt,"Selected heading "+this.props.qaLabel);this.props.onLabelClick();this.tooltip&&this.tooltip.hideTip()}},{key:"onPlusClick",value:function e(t){t.preventDefault();Jr.action(Gt,"Clicked plus button for "+this.props.qaLabel);this.props.onPlusClick();this.plusTooltip&&this.plusTooltip.hideTip()}},{key:"setTooltipRef",value:function e(t){this.tooltip=t}},{key:"setPlusTooltipRef",value:function e(t){this.plusTooltip=t}},{key:"renderIconMaybe",value:function e(){var t=this.props.iconClass;if(!t)return null;return n.a.createElement(yt["a"],{type:t})}},{key:"renderPlusButtonMaybe",value:function e(){var t=this.props,r=t.showPlus,a=t.plusTooltip;if(!r)return null;var i=a||"";var s=this.props.onPlusClick===this.props.onLabelClick;var o=s?"-1":void 0;var l=s?"true":void 0;var c=n.a.createElement(ct["c"],{className:"p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":i,tabIndex:o});var u=a?n.a.createElement(Ct["d"],{tip:a,position:"top",ref:this.setPlusTooltipRef,delay:Ct["a"]},c):c;return n.a.createElement("div",{className:"p-channel_sidebar__section_heading_right","aria-hidden":l},u)}},{key:"renderSharedChannelsCoachmarkMaybe",value:function e(t){var r=this;var a=this.props,i=a.seenChannelBrowserCoachmark,s=a.hasRecentlySharedAChannel,o=a.qaLabel;if("shared_channels"!==o||i)return t;var l=function e(){r.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:true})};var c=function e(){l();v();Object(zr["a"])()};return n.a.createElement("div",null,n.a.createElement(nr["a"],{hasSkipButton:true,skipButtonText:Qr.t("Close"),hasSkipLink:false,hasCloseButton:false,continueButtonText:Qr.t("Show Me"),title:Qr.t("View and manage shared channels"),content:Qr.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),shouldShow:s,onSkip:l,onContinue:c,delay:100,position:"right"},t))}},{key:"render",value:function e(){var t=this.props,r=t.label,a=t.qaLabel,i=t.tooltip,s=t.tooltipClassName,o=t.tooltipArrowOffset,l=t.onLabelClick;var c=void 0;var u=l!==h.a.noop;c=u?n.a.createElement(ct["c"],{className:rt()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable"),onClick:this.onLabelClick,"aria-label":i},this.renderIconMaybe()," ",r):n.a.createElement("span",{role:"heading","aria-level":"2",className:"p-channel_sidebar__section_heading_label"},this.renderIconMaybe()," ",r);var d=i?n.a.createElement(Ct["d"],{tip:i,tipClassName:s,position:"top-left",tipArrowOffset:o,ref:this.setTooltipRef,delay:Ct["a"]},this.renderSharedChannelsCoachmarkMaybe(c)):c;var p=u?n.a.createElement("h2",{className:"offscreen"},r):null;var m=this.props.onPlusClick!==this.props.onLabelClick;var f=m?"group":void 0;var v=m?r:void 0;return n.a.createElement("div",{className:"p-channel_sidebar__section_heading","data-qa-channel-sidebar-section-heading":a,role:f,"aria-label":v},p,d,this.renderPlusButtonMaybe())}}]);return t}(n.a.PureComponent);Zr.displayName="SectionHeading";Zr.defaultProps=Yr;var Xr=function e(t){return{seenChannelBrowserCoachmark:Object(G["getUserPref"])(t,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(G["getUserPref"])(t,"has_recently_shared_a_channel")}};var $r={setUserPrefByApi:tr["c"]};var ea=Object(i["connect"])(Xr,$r)(Zr);var ta=new oe["b"]("channel_sidebar");var ra=function e(t){return n.a.createElement(ea,w()({},t,{label:ta.t("Starred"),qaLabel:"starred"}))};ra.displayName="StarredHeading";var aa=Object(Pt["pure"])(ra);var na=r(618);var ia=new oe["b"]("channel_sidebar");var sa=ia.t("Create a shared channel");var oa={sharedChannelsEnabled:et["b"].bool};var la={sharedChannelsEnabled:false};var ca=function e(t){return{sharedChannelsEnabled:1===Object(G["getTeamPref"])(t,"enable_shared_channels")}};var ua=function e(t){return n.a.createElement(ea,w()({},t,{tooltip:ia.t("Browse all shared channels"),tooltipArrowOffset:50,label:ia.t("Shared Channels"),qaLabel:"shared_channels",showPlus:t.sharedChannelsEnabled&&Object(na["h"])(),plusTooltip:sa}))};ua.displayName="SharedChannelsHeading";ua.defaultProps=la;var da=Object(Pt["pure"])(ua);var pa=Object(i["connect"])(ca)(da);var ma=new oe["b"]("channel_sidebar");var ha=ma.t("Create a channel");var fa={showPlus:et["b"].bool};var va={showPlus:true};var ba=function e(t){return n.a.createElement(ea,w()({},t,{label:ma.t("Channels"),qaLabel:"channels",tooltip:ma.t("Browse all channels"),tooltipArrowOffset:30,showPlus:t.showPlus,plusTooltip:ha}))};ba.displayName="ChannelsHeading";ba.defaultProps=va;var ga=function e(){return{showPlus:Object(na["b"])()||Object(na["d"])()}};var _a=Object(i["connect"])(ga)(ba);var ya=r(117);var ka={name:et["b"].string,setIsRenaming:et["b"].func,saveFolderData:et["b"].func,renameFolder:et["b"].func,toggleFolderCollapse:et["b"].func,setFolderCollapse:et["b"].func,badgeCount:et["b"].number,hasUnreads:et["b"].bool,isCollapsed:et["b"].bool,isRenaming:et["b"].bool,onDragStart:et["b"].func,onDragEnd:et["b"].func,onDrop:et["b"].func,onDragOver:et["b"].func};var Oa={name:"",setIsRenaming:h.a.noop,saveFolderData:h.a.noop,renameFolder:h.a.noop,toggleFolderCollapse:h.a.noop,setFolderCollapse:h.a.noop,badgeCount:0,hasUnreads:false,isCollapsed:false,isRenaming:false,onDragStart:h.a.noop,onDragEnd:h.a.noop,onDrop:h.a.noop,onDragOver:h.a.noop};var Ea=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toggleFolderCollapse=r.toggleFolderCollapse.bind(r);r.renameFolder=r.renameFolder.bind(r);r.showRenameBox=r.showRenameBox.bind(r);r.setRenamingLabel=r.setRenamingLabel.bind(r);r.setInputRef=r.setInputRef.bind(r);r.onBlur=r.onBlur.bind(r);r.state={renamingLabel:r.props.name,hasTyped:false};return r}Ye()(t,[{key:"onBlur",value:function e(t){if(this.props.isRenaming){var r=this.props.name;var a=t.target.value;this.props.renameFolder({oldName:r,newName:a});this.props.saveFolderData()}}},{key:"setRenamingLabel",value:function e(t){var r=t.target.value;this.setState(function(){return{renamingLabel:r,hasTyped:true}})}},{key:"setInputRef",value:function e(t){if(t&&!this.state.hasTyped){t.select();t.focus()}}},{key:"showRenameBox",value:function e(){var t=this.props.name;this.props.setIsRenaming({name:t});this.setState(function(){return{renamingLabel:t,hasTyped:false}})}},{key:"toggleFolderCollapse",value:function e(t){t.altKey?this.props.setFolderCollapse({isCollapsed:!this.props.isCollapsed}):this.props.toggleFolderCollapse({name:this.props.name});this.props.saveFolderData()}},{key:"renameFolder",value:function e(t){var r=this.props.name;var a=void 0;"Enter"===t.key&&(a=t.target.value);"Escape"===t.key&&(a=this.props.name);if(void 0!==a){this.props.renameFolder({oldName:r,newName:a});this.props.saveFolderData()}}},{key:"render",value:function e(){var t=this.props.isRenaming?"":n.a.createElement(ct["c"],{className:rt()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse});var r="";var a=Object(ya["c"])(this.props.name,{include_text:false,include_title:false});var i=void 0;i=this.props.isRenaming?n.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):h.a.includes(this.props.name,"<")?n.a.createElement(ct["c"],{className:rt()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":r},this.props.name):n.a.createElement(ct["c"],{className:rt()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":r,dangerouslySetInnerHTML:{__html:a}});var s=this.props.isCollapsed?n.a.createElement(ct["c"],{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse},n.a.createElement(qt,{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return n.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:true,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},n.a.createElement("h2",{className:"offscreen"},this.props.name),i,s,t)}}]);return t}(n.a.PureComponent);Ea.displayName="FolderHeading";Ea.defaultProps=Oa;var wa=function e(t,r){var a=r.name;var n=Object(q["getFolderByName"])(t,a);var i=n?h.a.map(n.channelIds,function(e){return Object(l["getChannelById"])(t,e)}):[];var s=!!n&&n.isCollapsed;var o=!!n&&n.isRenaming;var c=i.length>0?h.a.sum(h.a.map(i,function(e){return Object(l["getBadgeCount"])(t,e)})):0;var u=i.length>0&&!!h.a.find(i,function(e){return Object(ie["isUnread"])(e)&&!Object(H["isChannelMutedById"])(t,e.id)});return{isCollapsed:s,isRenaming:o,hasUnreads:u,badgeCount:c}};var Ca={toggleFolderCollapse:q["toggleFolderCollapse"],setFolderCollapse:q["setFolderCollapse"],saveFolderData:q["saveFolderData"],renameFolder:q["renameFolder"],setIsRenaming:q["setIsRenaming"]};var Sa=Object(i["connect"])(wa,Ca)(Ea);var ja=new oe["b"]("channel_sidebar");var Ia={orgName:et["b"].string.isRequired};var Ta={orgName:""};var Na=function e(t){return n.a.createElement(ea,w()({},t,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:ja.t("Organization Channels"),qaLabel:"org_wide_channels",tooltip:ja.t("Shared with all workspaces at {orgName}",{orgName:t.orgName}),tooltipArrowOffset:50}))};Na.displayName="OrgWideChannelsHeading";Na.defaultProps=Ta;var Aa=Object(Pt["pure"])(Na);var Ra=function e(t){var r=Object(Dr["getEnterpriseOrgName"])(t);return{orgName:r}};var Ma=Object(i["connect"])(Ra)(Aa);var Pa=new oe["b"]("channel_sidebar");var xa=function e(t){return n.a.createElement(ea,w()({},t,{label:Pa.t("Direct Messages"),qaLabel:"ims",tooltip:Pa.t("Open a direct message"),tooltipArrowOffset:50,showPlus:true,plusTooltip:Pa.t("Open a direct message")}))};xa.displayName="DirectMessagesHeading";var Da=Object(Pt["pure"])(xa);var Fa=new oe["b"]("channel_sidebar");var La=function e(t){return n.a.createElement(ea,w()({},t,{label:Fa.t("Apps"),qaLabel:"apps",tooltip:Fa.t("Browse apps"),tooltipArrowOffset:16,showPlus:true,plusTooltip:Fa.t("Browse apps")}))};La.displayName="AppsHeading";var Ba=Object(Pt["pure"])(La);var Ua=new oe["b"]("channel_sidebar");var qa={rows:et["b"].arrayOf(et["b"].shape({type:et["b"].string,scrollBottom:et["b"].number})).isRequired,onItemSelect:et["b"].func,onInviteClick:et["b"].func,onBrowseChannelsClick:et["b"].func,onBrowseSharedChannelsClick:et["b"].func,onCreateChannelClick:et["b"].func,onCreateSharedChannelClick:et["b"].func,onOpenDMClick:et["b"].func,onBrowseAppsClick:et["b"].func,onResize:et["b"].func,onScroll:et["b"].func,sidebarFoldersIsEnabled:et["b"].bool,onDragStart:et["b"].func,onDragEnd:et["b"].func,onDrop:et["b"].func,onDragOver:et["b"].func,onCreateFolder:et["b"].func,telemeter:et["b"].object.isRequired,logger:et["b"].object.isRequired};var Ga={rows:[],onItemSelect:h.a.noop,selectedItemId:"",onItemClick:h.a.noop,onInviteClick:h.a.noop,onBrowseChannelsClick:h.a.noop,onBrowseSharedChannelsClick:h.a.noop,onCreateChannelClick:h.a.noop,onCreateSharedChannelClick:h.a.noop,onOpenDMClick:h.a.noop,onBrowseAppsClick:h.a.noop,onResize:h.a.noop,onScroll:h.a.noop,sidebarFoldersIsEnabled:false,onDragStart:h.a.noop,onDragEnd:h.a.noop,onDrop:h.a.noop,onDragOver:h.a.noop,onCreateFolder:h.a.noop};var Ha=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setScrollbarRef=r.setScrollbarRef.bind(r);r.getCurrentScrollTop=r.getCurrentScrollTop.bind(r);r.resetCurrentScrollTopMaybe=r.resetCurrentScrollTopMaybe.bind(r);r.setListRef=r.setListRef.bind(r);r.onResize=r.onResize.bind(r);r.onScroll=r.onScroll.bind(r);r.onItemClick=r.onItemClick.bind(r);r.onInviteClick=r.onInviteClick.bind(r);r.renderRow=r.renderRow.bind(r);r.renderRowWithWrapper=r.renderRowWithWrapper.bind(r);r.currentScrollTop=0;r.height=0;return r}Ye()(t,[{key:"componentDidMount",value:function e(){if(!h.a.get(window,"performance.timing.fetchStart"))return;var t=true;if(t&&Object(ee["a"])()){var r=Object(o["b"])();t=Object(ft["shouldLogAppBootMetrics"])(r.getState());t&&r.dispatch(Object(ft["setShouldLogAppBootMetrics"])(false))}if(t){this.shouldLogFirstMeaningfulPaint=false;var a=Date.now()-window.performance.timing.fetchStart;this.props.logger.info("PERF","First meaningful paint: "+a+"ms");var n=Object(ee["a"])()?"ttfmp_sonic":"ttfmp_legacy";this.props.telemeter.store(n,a)}}},{key:"componentDidUpdate",value:function e(t){this.List&&t.rows!==this.props.rows&&this.List.recomputeRowHeights()}},{key:"onResize",value:function e(t){var r=t.height;this.resetCurrentScrollTopMaybe(r);this.height=r;this.props.onResize({height:r})}},{key:"onScroll",value:function e(t,r){var a=r.scrollTop;this.currentScrollTop=a;this.List&&this.List.Grid.handleScrollEvent({scrollTop:a});this.props.onScroll&&this.props.onScroll(a)}},{key:"onItemClick",value:function e(t,r){t.preventDefault();this.props.onItemSelect(r)}},{key:"onInviteClick",value:function e(t,r){this.props.onInviteClick(r)}},{key:"setScrollbarRef",value:function e(t){this.Scrollbar=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setListRef",value:function e(t){this.List=t}},{key:"getCurrentScrollTop",value:function e(){return this.currentScrollTop}},{key:"getContentHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.rows;return t.length?t[t.length-1].scrollBottom:0}},{key:"resetCurrentScrollTopMaybe",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.rows;t>this.getContentHeight(r)&&(this.currentScrollTop=0)}},{key:"scrollToTarget",value:function e(t){var r=this;var a=Math.max(0,Math.min(this.getContentHeight()-this.height,t));Object(mt["a"])({fromValue:this.currentScrollTop,toValue:a,duration:200,easing:"easeOutQuad",onTick:function e(t){var a=t.value,n=t.nextTick;r.Scrollbar.scrollTop(a);n()}})}},{key:"renderRowWithWrapper",value:function e(t,r){var a=t.height,i=t.id,s=t.type;var o=i||r+"-"+s;var l={quickswitcherButton:"listitem",allUnreadsLink:"listitem",allThreadsLink:"listitem",searchLink:"listitem",sectionHeading:"listitem",channel:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[s];return n.a.createElement("div",{key:o,style:{height:a},role:l},this.renderRow(t))}},{key:"renderRow",value:function e(t){var r=this.props.onItemSelect;switch(t.type){case"quickswitcherButton":return n.a.createElement(pr,null);case"allUnreadsLink":return n.a.createElement(Or,{selectItem:r});case"allThreadsLink":return n.a.createElement(jr,{selectItem:r});case"searchLink":return n.a.createElement(Rr,{selectItem:r});case"sectionHeading":return this.renderSectionHeading(t.name);case"folderHeading":return this.renderFolderHeading(t.name);case"channel":return this.renderChannel(t.id,t.index);case"invitePeopleLink":return n.a.createElement(xr,{selectItem:this.onInviteClick,dim:t.dim});case"installAppsLink":return n.a.createElement(Vr,null);case"spacer":return null;case"topPadding":return null;default:Object(C["b"])().warn("Row type "+t.type+" not implemented",t)}return null}},{key:"renderSectionHeading",value:function e(t){var r=this.props,a=r.onBrowseChannelsClick,i=r.onBrowseSharedChannelsClick,s=r.onCreateChannelClick,o=r.onCreateSharedChannelClick,l=r.onOpenDMClick,c=r.onBrowseAppsClick;switch(t){case"starred":if(this.props.sidebarFoldersIsEnabled)return n.a.createElement(ea,{label:Ua.t("Starred"),qaLabel:"starred",showPlus:true,onPlusClick:this.props.onCreateFolder});return n.a.createElement(aa,null);case"sharedChannels":return n.a.createElement(pa,{onLabelClick:i,onPlusClick:o});case"channels":return n.a.createElement(_a,{onLabelClick:a,onPlusClick:s});case"orgWideChannels":return n.a.createElement(Ma,null);case"ims":return n.a.createElement(Da,{onLabelClick:l,onPlusClick:l});case"apps":return n.a.createElement(Ba,{onLabelClick:c,onPlusClick:c});default:return null}}},{key:"renderFolderHeading",value:function e(t){return n.a.createElement(Sa,{name:t,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}},{key:"renderChannel",value:function e(t,r){if(this.props.sidebarFoldersIsEnabled)return n.a.createElement(er,{key:t,id:t,selectItem:this.props.onItemSelect,index:r,sidebarFoldersIsEnabled:true,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver});var a=n.a.createElement(er,{key:t,id:t,selectItem:this.props.onItemSelect,index:r});return a}},{key:"render",value:function e(){var t=this;return n.a.createElement(pt["a"],{onResize:this.onResize},function(e){var r=e.width,a=e.height;return n.a.createElement(ht["a"],{width:r,height:a,contentHeight:t.getContentHeight(),onScroll:t.onScroll,ref:t.setScrollbarRef,serializationKey:"channel-list-scrollbar"},n.a.createElement("div",{className:"p-channel_sidebar__static_list","data-qa":"channel_sidebar_list","aria-label":Ua.t("Channels and direct messages"),role:"list"},t.props.rows.map(t.renderRowWithWrapper)))})}}]);return t}(n.a.PureComponent);Ha.displayName="ChannelList";Ha.defaultProps=Ga;var Wa=Ha;var Va=new oe["b"]("channel_sidebar");var za={isShowing:et["b"].bool.isRequired,linkedId:et["b"].oneOfType([et["b"].string,et["b"].bool]),isMention:et["b"].bool,position:et["b"].oneOf(["top","bottom"]),ensureRowInView:et["b"].func};var Qa={isShowing:false,linkedId:null,isMention:false,position:"top",ensureRowInView:h.a.noop};var Ka=function(e){$e()(t,e);function t(){Qe()(this,t);var e=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onClick=e.onClick.bind(e);return e}Ye()(t,[{key:"onClick",value:function e(t){var r=this.props,a=r.linkedId,n=r.ensureRowInView;t.preventDefault();a&&n(a)}},{key:"render",value:function e(){var t=this.props,r=t.isShowing,a=t.position,i=t.isMention,s=t.linkedId;if(!r)return null;var o=rt()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":i,"p-channel_sidebar__banner--unreads":!i,"p-channel_sidebar__banner--top":"top"===a,"p-channel_sidebar__banner--bottom":"bottom"===a});var l="top"===a?"up":"down";var c=i?Va.t("Unread Mentions"):Va.t("More Unreads");return n.a.createElement(ct["c"],{className:o,onClick:this.onClick,"data-qa-linked-id":s},c,n.a.createElement(yt["b"],{type:"arrow_"+l,inline:true,className:"p-channel_sidebar__banner_icon"}))}}]);return t}(n.a.PureComponent);Ka.displayName="UnreadBanner";Ka.defaultProps=Qa;var Ya=Ka;var Ja=r(1418);var Za=new oe["b"]("channel_sidebar");var Xa="react_channel_sidebar_update";var $a=Object(J["a"])(1);var en=2;var tn=10;var rn=24;var an={isBooted:et["b"].bool,selectedItemId:et["b"].string,unreadIds:et["b"].arrayOf(et["b"].string),mutedMentionIds:et["b"].arrayOf(et["b"].string),rows:et["b"].arrayOf(et["b"].object).isRequired,rowsMap:et["b"].object.isRequired,rowIds:et["b"].arrayOf(et["b"].string).isRequired,idsNeedingPresenceSubscription:et["b"].arrayOf(et["b"].string),onItemSelect:et["b"].func,onInviteClick:et["b"].func,onBrowseChannelsClick:et["b"].func,onBrowseSharedChannelsClick:et["b"].func,onCreateChannelClick:et["b"].func,onCreateSharedChannelClick:et["b"].func,onOpenDMClick:et["b"].func,onBrowseAppsClick:et["b"].func,jumperCoachmarkState:et["b"].string,useGlobalNav:et["b"].bool,featureGlobalNavLayout:et["b"].bool,sidebarFoldersIsEnabled:et["b"].bool,initializeFolderData:et["b"].func,createFolder:et["b"].func,dragFolderOrChannel:et["b"].func,ariaLandmarkLabel:et["b"].string,onDevToolsClick:et["b"].func,featureSonicPresenceManager:et["b"].bool,telemeter:et["b"].object.isRequired,logger:et["b"].object.isRequired};var nn={isBooted:false,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowsMap:{},rowIds:[],onItemSelect:h.a.noop,onInviteClick:h.a.noop,onBrowseChannelsClick:h.a.noop,onBrowseSharedChannelsClick:h.a.noop,onCreateChannelClick:h.a.noop,onCreateSharedChannelClick:h.a.noop,onOpenDMClick:h.a.noop,onBrowseAppsClick:h.a.noop,jumperCoachmarkState:null,useGlobalNav:false,featureGlobalNavLayout:false,sidebarFoldersIsEnabled:false,initializeFolderData:h.a.noop,createFolder:h.a.noop,dragFolderOrChannel:h.a.noop,ariaLandmarkLabel:null,onDevToolsClick:h.a.noop,featureSonicPresenceManager:false};var sn={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1};var on=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setRef=r.setRef.bind(r);r.ensureRowInView=r.ensureRowInView.bind(r);r.onResize=r.onResize.bind(r);r.onScroll=r.onScroll.bind(r);r.onItemSelect=r.onItemSelect.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.onFocusWithin=r.onFocusWithin.bind(r);r.onDragStart=r.onDragStart.bind(r);r.onDragEnd=r.onDragEnd.bind(r);r.onDragOver=r.onDragOver.bind(r);r.onDrop=r.onDrop.bind(r);r.onCreateFolder=r.onCreateFolder.bind(r);r.state=w()({},r.getUnreadRows(e),{scrolledBelowFirstMention:false,scrolledBelowFirstUnread:false,scrolledAboveLastMention:false,scrolledAboveLastUnread:false,listHeight:0,hasInitializedFolderData:false,hasKeyboardFocus:sn.NOT_FOCUSED});r.presenceList=Object(nt["a"])(r.props.idsNeedingPresenceSubscription);r.commands=[{keys:["option+up"],handler:r.gotoNext.bind(r,"up",false)},{keys:["option+down"],handler:r.gotoNext.bind(r,"down",false)},{keys:["option+shift+up"],handler:r.gotoNext.bind(r,"up",true)},{keys:["option+shift+down"],handler:r.gotoNext.bind(r,"down",true)}];r.pendingEnsureRowInView=false;return r}Ye()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new ut["a"];this.keyCommands.bindAll(this.commands);this.maybeLoadFolderData()}},{key:"componentWillReceiveProps",value:function e(t){var r=this;if(!t.isBooted)return;if(!t.featureSonicPresenceManager&&!Object(at["a"])()&&!Object($["a"])(this.props.idsNeedingPresenceSubscription,t.idsNeedingPresenceSubscription)&&this.presenceList){this.presenceList.clear();this.presenceList.add(t.idsNeedingPresenceSubscription)}var a="SHOW_BUTTON"===t.jumperCoachmarkState||"HIDE_BUTTON"===t.jumperCoachmarkState;var n=this.props.rows.length&&t.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===t.rows[0].id)&&this.props.rows[0].id!==t.rows[0].id;(a||n)&&this.ChannelList&&this.ChannelList.Scrollbar&&this.ChannelList.Scrollbar.scrollTop(0);this.setState(function(e){var a=w()({},e,r.getUnreadRows(t));r.ChannelList&&r.ChannelList.resetCurrentScrollTopMaybe(a.listHeight,t.rows);return w()({},a,r.getBannerState(a))})}},{key:"componentWillUpdate",value:function e(){$a&&Object(u["e"])(Xa+"_mark")}},{key:"componentDidUpdate",value:function e(t){var r=this.props,a=r.selectedItemId,n=r.isBooted,i=r.jumperCoachmarkState;var s="SHOW_BUTTON"===i||"HIDE_BUTTON"===i;var o=t.selectedItemId!==a;var l=n&&!t.isBooted;s||!o&&!l||this.ensureRowInView(a);this.maybeLoadFolderData();$a&&Object(u["g"])(Xa,Xa+"_mark")}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset();this.presenceList&&this.presenceList.destroy()}},{key:"onCreateFolder",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.createFolder()}},{key:"onDragStart",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var r=t.dataTransfer;r.effectAllowed="move";r.dropEffect="move";var a=t.target;while(a&&!a.attributes["data-drag-type"])a=a.parentNode;var n={src:{type:a.attributes["data-drag-type"].value,id:a.attributes["data-drag-id"].value}};this.setState(function(){return{dragData:n}})}},{key:"onDragOver",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;t.preventDefault()}},{key:"onDrop",value:function e(t){var r=this;if(!this.props.sidebarFoldersIsEnabled)return;var a=t.target;while(a&&!a.attributes["data-drag-type"])a=a.parentNode;this.setState(function(){return{dragData:w()({},r.state.dragData,{dest:{type:a.attributes["data-drag-type"].value,id:a.attributes["data-drag-id"].value}})}})}},{key:"onDragEnd",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.dragFolderOrChannel(this.state.dragData);this.setState(function(){return{dragData:null}})}},{key:"onScroll",value:function e(){this.setState(this.getBannerState)}},{key:"onResize",value:function e(t){var r=this;var a=t.height;this.setState(function(e){var t=w()({},e,{listHeight:a});return w()({},t,r.getBannerState(t))},function(){false!==r.pendingEnsureRowInView&&r.ensureRowInView(r.pendingEnsureRowInView)})}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent,a=t.target,n=t.currentTarget;if(r&&"mousedown"===r.type)return;var i=a===n?sn.CONTAINER_FOCUSED:sn.FOCUS_WITHIN;this.setState(function(){return{hasKeyboardFocus:i}})}},{key:"onFocusWithin",value:function e(){this.setState(function(){return{hasKeyboardFocus:sn.FOCUS_WITHIN}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:sn.NOT_FOCUSED}})}},{key:"onItemSelect",value:function e(t){return this.props.onItemSelect(t)}},{key:"setRef",value:function e(t){this.ChannelList=t}},{key:"getUnreadRows",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=t.rowsMap,a=t.unreadIds,n=t.mentionIds;return{firstUnread:r[h.a.first(a)],lastUnread:r[h.a.last(a)],firstMention:r[h.a.first(n)],lastMention:r[h.a.last(n)]}}},{key:"getBannerState",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,r=t.firstMention,a=t.firstUnread,n=t.lastMention,i=t.lastUnread,s=t.listHeight;var o=this.ChannelList?this.ChannelList.getCurrentScrollTop():0;var l=a&&a.scrollBottom-tn<=o;var c=i&&i.scrollTop+tn>=o+s;var u=r&&r.scrollBottom-tn-(l?rn:0)<=o;var d=n&&n.scrollTop+tn+(c?rn:0)>=o+s;return{scrolledBelowFirstMention:u,scrolledBelowFirstUnread:l,scrolledAboveLastMention:d,scrolledAboveLastUnread:c}}},{key:"maybeLoadFolderData",value:function e(){if(this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData){this.props.initializeFolderData();this.setState(function(e){return w()({},e,{hasInitializedFolderData:true})})}}},{key:"ensureRowInView",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.selectedItemId;var r=this.props,a=r.rows,n=r.rowsMap,i=r.rowIds;var s=n[t];if(!s)return;var o=this.ChannelList.currentScrollTop;var l=this.state.listHeight;if(0===l){this.pendingEnsureRowInView=t;return}this.pendingEnsureRowInView=false;var c=Math.max(i.indexOf(t)-en,0);var u=a[c].scrollTop;if(u<o){this.ChannelList.scrollToTarget(u);return}var d=Math.min(i.indexOf(t)+en,a.length-1);var p=a[d].scrollBottom-l;p>o&&this.ChannelList.scrollToTarget(p)}},{key:"gotoNext",value:function e(t,r){var a=this;var n=Object(it["a"])();var i=Object(st["f"])(n);if(Object(st["g"])(n)&&i>0){if(Object(st["i"])(n))return;var s=Object(st["b"])(n).start;if("up"===t&&0!==s)return;if("down"===t&&s!==i)return}var o=this.props,l=o.rows,c=o.rowIds,u=o.selectedItemId;var d=c.indexOf(u);var p=h()(l).map(function(e,t){return w()({},e,{index:t})}).filter(function(e){return"channel"===e.type}).filter(function(e){return!r||h.a.indexOf(a.props.unreadIds,e.id)>=0||h.a.indexOf(a.props.mutedMentionIds,e.id)>=0}).value();if(0===p.length)return;var m=void 0;m="down"===t?h.a.find(p,function(e){return e.index>d}):h.a.findLast(p,function(e){return e.index<d});void 0===m&&(m="down"===t?h.a.first(p):h.a.last(p));this.props.onItemSelect(m.id)}},{key:"renderFocusOutline",value:function e(){if(this.state.hasKeyboardFocus===sn.CONTAINER_FOCUSED)return n.a.createElement("div",{className:"sectionfocusindicator"});return null}},{key:"render",value:function e(){if(!this.props.isBooted)return null;var t=this.props,r=t.rows,a=t.onInviteClick,i=t.onBrowseChannelsClick,s=t.onBrowseSharedChannelsClick,o=t.onCreateChannelClick,l=t.onCreateSharedChannelClick,c=t.onOpenDMClick,u=t.onBrowseAppsClick,d=t.selectedItemId,p=t.useGlobalNav,m=t.featureGlobalNavLayout,h=t.sidebarFoldersIsEnabled,f=t.ariaLandmarkLabel,v=t.onDevToolsClick,b=t.telemeter,g=t.logger;var _=this.state,y=_.scrolledBelowFirstMention,k=_.scrolledBelowFirstUnread,O=_.scrolledAboveLastMention,E=_.scrolledAboveLastUnread,w=_.firstMention,C=_.firstUnread,S=_.lastMention,j=_.lastUnread;var I=this.state.hasKeyboardFocus!==sn.NOT_FOCUSED;var T=this.state.hasKeyboardFocus===sn.CONTAINER_FOCUSED?"-1":null;var N=rt()("p-channel_sidebar",{focusablesection:I,"p-channel_sidebar--global_nav":p,"p-channel_sidebar--global_nav_layout":m});var A=null;p&&(A=m?n.a.createElement(dt["a"],null):n.a.createElement("div",{className:"p-global_nav__sidebar_divider"}));return n.a.createElement(lt["a"],{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},n.a.createElement("nav",{className:N,"data-qa-channel-sidebar":true,"data-qa-channel-sidebar-selected-item-id":d,"data-is-focusable-section":true,"aria-labelledby":f,tabIndex:T},n.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},Za.t("Channel Sidebar")),!p&&n.a.createElement(Ja["a"],null),A,n.a.createElement("div",{className:"p-channel_sidebar__list"},n.a.createElement(Ya,{position:"top",isShowing:y||k,isMention:y,linkedId:y&&w.id||k&&C.id,ensureRowInView:this.ensureRowInView}),n.a.createElement(Wa,{rows:r,onItemSelect:this.onItemSelect,onInviteClick:a,onBrowseChannelsClick:i,onBrowseSharedChannelsClick:s,onCreateChannelClick:o,onCreateSharedChannelClick:l,onOpenDMClick:c,onBrowseAppsClick:u,onScroll:this.onScroll,onResize:this.onResize,sidebarFoldersIsEnabled:h,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,ref:this.setRef,telemeter:b,logger:g}),n.a.createElement(Ya,{position:"bottom",isShowing:O||E,isMention:O,linkedId:O&&S.id||E&&j.id,ensureRowInView:this.ensureRowInView})),n.a.createElement(ot["a"],{enabled:["feature_redux_dev_tools"]},n.a.createElement(ct["d"],{size:"small",onClick:v},"Redux Dev Tools")),this.renderFocusOutline()))}}]);return t}(a["PureComponent"]);on.displayName="ChannelSidebar";on.defaultProps=nn;var ln=on;var cn="react_channel_sidebar_selector_factory";var un=Object(J["a"])(1);var dn=function e(t){return un&&Object(u["e"])(t+"_mark")};var pn=function e(t){return un&&Object(u["g"])(t,t+"_mark")};var mn=function e(t){if(!Object(K["c"])(t))return false;var r=h()(Object(V["getAllMembers"])(t)).filter(function(e){return!e.is_slackbot}).size();if(r>25)return false;if(r>=2)return"dim";return true};var hn=function e(t){var r=Object(Z["b"])(t);var a=je(t),n=a.sidebarSections,i=a.sidebarSectionsOrdered,s=a.idsNeedingPresenceSubscription;var o="enabled"===Object(p["getGroupForUser"])(t,"folders_sidebar")&&Object(G["getUserPref"])(t,"folders_enabled");var l=o?Object(q["getFolders"])(t):[];var c=Ve({hasQuickswitcherButton:!Object(ee["a"])()&&!r&&Object(G["getUserPref"])(t,"show_sidebar_quickswitcher_button"),hasAllUnreadsLink:true===Object(G["getUserPref"])(t,"enable_unread_view"),hasInvitePeopleLink:mn(t),hasSearchLink:Object(X["a"])(t),sidebarSectionsOrdered:i,sidebarSections:n,sidebarFoldersIsEnabled:o,sidebarFolders:l}),u=c.rows,d=c.rowsMap,m=c.rowIds;return{rows:u,rowsMap:d,rowIds:m,idsNeedingPresenceSubscription:s}};var fn=function e(t){var r=void 0;var a=void 0;var n=void 0;var i=void 0;var s=void 0;var o=void 0;var c=void 0;var u=void 0;var d=void 0;var m=void 0;var f=void 0;var v=void 0;return function(e,b){dn(cn);var g=Object(B["isFullyBooted"])(e);var _=Object(C["a"])(e);var y=D({state:e});if(!g)return{isBooted:g};var k=Object(Q["getPrimaryView"])(e);var O=b.onItemSelect;var E=hn(e),S=E.rows,j=E.rowsMap,I=E.rowIds,N=E.idsNeedingPresenceSubscription;var A=h.a.filter(I,function(t){return Object(l["isMentionById"])(e,t)&&!Object(H["isChannelMutedById"])(e,t)});var R=h.a.filter(I,function(t){return Object(l["isUnreadById"])(e,t)&&!Object(H["isChannelMutedById"])(e,t)});var M=h.a.filter(I,function(t){return Object(l["isMentionById"])(e,t)&&Object(H["isChannelMutedById"])(e,t)});Object(W["getThreadsMentionCount"])(e)&&A.unshift("Vall_threads");Object(W["hasUnreadThreads"])(e)&&R.unshift("Vall_threads");var P=Object(U["getJumperCoachmarkState"])(e);var x=Object(G["getUserPref"])(e,"sidebar_behavior");var F="enabled"===Object(p["getGroupForUser"])(e,"folders_sidebar")&&Object(G["getUserPref"])(e,"folders_enabled");var L=Object(Z["b"])(e);var V=Object(T["isFeatureEnabled"])(e,"feature_global_nav_layout");var K=Object(T["isFeatureEnabled"])(e,"feature_sonic_presence_manager");var J=Object(T["isFeatureEnabled"])(e,"feature_degraded_send");if(k===a&&Object($["a"])(R,n)&&Object($["a"])(A,i)&&Object($["a"])(M,s)&&Object($["a"])(I,o)&&P===c&&x===u&&F===d&&L===m&&V===f&&Object($["a"])(b,v))return r;var X=w()({},b,{isBooted:g,rows:S,rowsMap:j,rowIds:I,selectedItemId:k,unreadIds:R,mentionIds:A,mutedMentionIds:M,jumperCoachmarkState:P,useGlobalNav:L,featureGlobalNavLayout:V,idsNeedingPresenceSubscription:N,featureSonicPresenceManager:K,sidebarFoldersIsEnabled:F,initializeFolderData:function e(){return t(Object(q["initializeFolderData"])())},dragFolderOrChannel:function e(r){var a=r.src,n=r.dest;t(Object(q["dragFolderOrChannel"])({src:a,dest:n}));t(Object(q["saveFolderData"])())},createFolder:function e(){return t(Object(q["createFolder"])())},onItemSelect:function e(r){J&&k===r&&t(Object(Y["a"])({channelId:r}));Object(ee["a"])()?t(Object(Q["setPrimaryView"])({id:r})):O&&O(r).then(function(){t(Object(z["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:r}))}).catch(h.a.noop)},ariaLandmarkLabel:"channel_sidebar_aria_label",logger:_,telemeter:y});r=X;a=k;n=R;i=A;s=M;o=I;c=P;u=x;d=F;m=L;f=V;v=b;pn(cn);return X}};var vn={withRef:true};var bn=Object(i["connectAdvanced"])(fn,vn)(ln);var gn=bn;var _n=r(662);var yn=r(104);var kn=r(1113);var On=function e(t){var r=window.open(null,"Redux DevTools","menubar=no,location=no,resizable=yes,scrollbars=no,status=no");r.location.reload();setTimeout(function(){r.document.write('<div id="react-devtools-root"></div>');Object(yn["render"])(n.a.createElement(kn["a"],{store:t}),r.document.getElementById("react-devtools-root"))},10)};var En=On;var wn=r(31);var Cn=r(77);var Sn=r(408);var jn=r(3444);var In=r(747);var Tn=r(48);var Nn={SELECT_INVITE_TYPE:"SELECT_INVITE_TYPE",INVITE_MEMBERS:"INVITE_MEMBERS",INVITE_MCG:"INVITE_MCG",INVITE_SCG:"INVITE_SCG",INVITE_MULTIPLE_EMAILS:"INVITE_MULTIPLE_EMAILS",INVITES_STATUS:"INVITES_STATUS",GOOGLE_CONTACTS_IMPORT:"GOOGLE_CONTACTS_IMPORT",INVITE_LINK:"INVITE_LINK"};var An={REGULAR:"regular",RESTRICTED:"restricted",ULTRA_RESTRICTED:"ultra_restricted"};var Rn=r(1112);var Mn=r(88);var Pn=r(213);var xn=r(190);var Dn=new oe["b"]("invite");var Fn=function e(t){if(!t.featureModernizeInvites)return"";var r={url_in_message:Dn.t("Sorry, but URLs are not allowed in the custom message. Please remove it and try again!"),invalid_email:Dn.t("That doesn\u2019t look like a valid email address!"),already_in_team:Dn.t("This person is already in your workspace."),user_disabled:Dn.rt('This person is already in your workspace, but their account is deactivated. You can <a href="https://my.slack.com/admin">manage</a> their account.'),already_invited:Dn.t("This person has already been invited to your workspace."),sent_recently:Dn.t("This person was recently invited. No need to invite them again just yet."),invite_failed:Dn.t("Something went wrong with this invite :("),ura_limit_reached:Dn.t("You\u2019ve reached your workspace limit for Single-channel Guests. You must invite more paid members first."),user_limit_reached:Dn.t("You\u2019ve reached the maximum number of users for this workspace."),not_allowed:Dn.t("You can\u2019t invite this type of account based on your current SSO settings."),custom_message_not_allowed:Dn.t("Sorry, you can\u2019t add a custom message to this invite. Please remove it and try again!"),domain_mismatch:Dn.t("Your SSO settings prevent you from inviting people from this email domain."),invite_limit_reached:Dn.rt("Your workspace has exceeded the limit on invitations. After more people have accepted the ones your workspace has sent, you can send more. Revoking invitations will not lift the limit. Our Help Center has <a href='https://get.slack.help/hc/{locale}/articles/201330256?{hcTrackingToken}#invitation_limits'>more details on invitation limits</a>.",{locale:"en-us",hcTrackingToken:""}),too_long:Dn.t("This person\u2019s name exceeds the 35-character limit."),org_user_is_disabled:Dn.t("This person has a deactivated account for your organization."),org_user_is_disabled_but_present:Dn.t("This person is already in your workspace, but they have been deactivated by your organization. Contact an organization administrator to re-enable their account."),mismatch_with_pending_team_invite:function e(t){var r=t.userType;switch(r){case"ultra_restricted":return Dn.t("This person can\u2019t be invited, because they have already been invited as a Single-Channel Guest to your organization.");case"restricted":return Dn.t("This person can\u2019t be invited, because they have already been invited as a Multi-Channel Guest to your organization.");default:return Dn.t("This person can\u2019t be invited, because they have already been invited as a Full Member to your organization.")}},user_type_mismatch:function e(t){var r=t.issue;switch(r){case"org_user_is_restricted":return Dn.t("This person already has a Multi-Channel Guest account for your organization, so you can only invite them in that role.");case"org_user_is_ultra_restricted":return Dn.t("This person already has a Single-Channel Guest account for your organization, so you can only invite them in that role.");case"org_user_not_restricted":case"org_user_not_ultra_restricted":return Dn.t("This person already has a Full Member account for your organization, so you can only invite them in that role.");default:return Dn.t("This person already has an account for your organization")}}};var a=t.errorKey,n=t.userType,i=t.issue;var s=r[a];Object(m["isFunction"])(s)&&(s=s({userType:n,issue:i}));return s};var Ln=Fn;var Bn=new oe["b"]("invite");var Un={featureModernizeInvites:et["b"].bool,invites:et["b"].arrayOf(et["b"].shape({email:et["b"].string,emailError:et["b"].string,apiError:et["b"].string,name:et["b"].string})),getCopy:et["b"].func,updateInviteEmail:et["b"].func,updateInviteName:et["b"].func,deleteInviteRow:et["b"].func};var qn={featureModernizeInvites:false,invites:[],getCopy:m["noop"],updateInviteEmail:m["noop"],updateInviteName:m["noop"],deleteInviteRow:m["noop"]};var Gn=function(e){$e()(t,e);function t(){Qe()(this,t);return Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}Ye()(t,[{key:"updateInviteEmail",value:function e(t){var r=this;return function(e){return r.props.updateInviteEmail(e,t)}}},{key:"updateInviteName",value:function e(t){var r=this;return function(e){return r.props.updateInviteName(e,t)}}},{key:"deleteInviteRow",value:function e(t){var r=this;return function(){return r.props.deleteInviteRow(t)}}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.invites,i=r.getCopy,s=r.featureModernizeInvites;if(!s)return null;return a.map(function(e,r){var o=rt()("p-invite_members_form__invite_row_field","p-invite_members_form__invite_row_field--name",{"p-invite_members_form__invite_row_field--name_without_close_button":1===a.length});var l="invite_"+r;var c={};var u={};if(0===r){c.labelId=i("initial_email_label_id");u.labelId=i("initial_name_label_id")}else{c["aria-label"]=i("email_address_label");u["aria-label"]=i("name_label")}var d=e.emailError,p=e.apiError,m=e.userType,h=e.issue;var f="";d?f=d:p&&(f=Ln({errorKey:p,userType:m,issue:h,featureModernizeInvites:s}));return n.a.createElement("div",{className:"p-invite_members_form__invite_row","data-qa":"invite_modal_invite_row",key:l},n.a.createElement("div",{className:"p-invite_members_form__invite_row_field p-invite_members_form__invite_row_field--email-address","data-qa":"invite_modal_invite_email"},n.a.createElement(xn["a"],w()({name:"invite_modal_email_"+r,id:"invite_modal_email_"+r,placeholder:Bn.t("name@example.com"),value:e.email,onChange:t.updateInviteEmail(r),spellCheck:"false",errorText:f},c))),n.a.createElement("div",{className:o,"data-qa":"invite_modal_invite_name"},n.a.createElement(xn["a"],w()({name:"invite_modal_name_"+r,id:"invite_modal_name_"+r,value:e.name,onChange:t.updateInviteName(r),spellCheck:"false"},u))),1!==a.length&&n.a.createElement("button",{className:"p-invite_members_form__invite_row_delete_button",onClick:t.deleteInviteRow(r),"data-qa":"invite_modal_delete_row_button",type:"button"},n.a.createElement(yt["b"],{type:"times",size:20})))})}}]);return t}(a["Component"]);Gn.displayName="InviteModalInviteRows";Gn.defaultProps=qn;var Hn=Gn;var Wn=new oe["b"]("invite");var Vn={onClickAddRowButton:et["b"].func.isRequired,featureModernizeInvites:et["b"].bool,onClickBulkInvite:et["b"].func.isRequired};var zn={featureModernizeInvites:false};var Qn=function e(t){var r=t.onClickAddRowButton,a=t.onClickBulkInvite,i=t.featureModernizeInvites;if(!i)return null;return n.a.createElement("span",{className:"p-invite_members_form__add_row_and_bulk_copy"},Wn.rt("<AddRowButton>Add another</AddRowButton> or <BulkInviteButton>add many at once</BulkInviteButton>",null,function(e){var t=e.text,i=e.tag;switch(i){case"AddRowButton":return n.a.createElement("button",{className:"p-invite_members_form__add_row_and_bulk_button",onClick:r,"data-qa":"invite_modal_add_row_button",type:"button"},n.a.createElement(yt["b"],{type:"plus_circle",size:20,className:"p-invite_members_form__add_row_icon"})," ",t);case"BulkInviteButton":return n.a.createElement("button",{className:"p-invite_members_form__add_row_and_bulk_button",type:"button","data-qa":"invite_modal_bulk_invite_button",onClick:a},t);default:return null}}))};Qn.displayName="InviteModalAddRowButtons";Qn.defaultProps=zn;var Kn=Qn;var Yn=r(1111);var Jn=r(39);var Zn=r(3289);var Xn={invites:et["b"].arrayOf(et["b"].shape({email:et["b"].string,name:et["b"].string})),hasInvitesLimit:et["b"].bool,onClickBulkInviteCancel:et["b"].func,onClickBulkInviteSubmit:et["b"].func,parseEmails:et["b"].func.isRequired,featureModernizeInvites:et["b"].bool};var $n={invites:[],hasInvitesLimit:false,onClickBulkInviteCancel:m["noop"],onClickBulkInviteSubmit:m["noop"],featureModernizeInvites:false};var ei=new oe["b"]("invite");var ti=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={invitesStr:r.stringifyInvites(e.invites),error:""};r.onClickSubmit=r.onClickSubmit.bind(r);r.onClickCancel=r.onClickCancel.bind(r);r.onEmailsChange=r.onEmailsChange.bind(r);return r}Ye()(t,[{key:"onClickCancel",value:function e(){this.props.onClickBulkInviteCancel()}},{key:"onClickSubmit",value:function e(){var t=this;var r=this.state.invitesStr;r.replace(/[\u200B-\u200D\uFEFF]/g,"");if(r.trim()){this.setState(function(){return{isProcessing:true,error:""}});this.props.parseEmails({emails:r}).then(function(e){if(e.ok)if(0===e.emails.length){var r=ei.t("We couldn\u2019t find any email addresses in that text. Please try again.");t.setState(function(){return{isProcessing:false,error:r}})}else{t.setState(function(){return{isProcessing:false,error:""}});var a=[];e.emails.forEach(function(e,t){a[t]={};a[t].email=e.email;var r=e.first_name;var n=e.last_name;a[t].name=r&&n?r.concat(" ",n):r});t.props.onClickBulkInviteSubmit(a)}else t.showGenericProcessingError()}).catch(function(){t.showGenericProcessingError()})}else{var a=ei.t("We couldn\u2019t find any email addresses in that text. Please try again.");this.setState(function(){return{isProcessing:false,error:a}})}}},{key:"onEmailsChange",value:function e(t){this.setState(function(){return{invitesStr:t}})}},{key:"showGenericProcessingError",value:function e(){var t=ei.t("Oops! There was an error processing those emails. Please try again.");this.setState(function(){return{isProcessing:false,error:t}})}},{key:"stringifyInvites",value:function e(t){var r="";t.forEach(function(e){e.name&&(r+=e.name+" ");e.email&&(r+="<"+e.email+">, ")});return r}},{key:"renderInvitesLimitText",value:function e(){if(!this.props.featureModernizeInvites)return null;var t=Object(Zn["b"])({articleId:201330256,locale:Object(Jn["a"])(),hash:"invitation_limits"});if(this.props.hasInvitesLimit){var r=ei.rt("Please separate multiple addresses with commas. <strong>Keep in mind that Slack may limit the number of invitations you can send if your workspace currently has a low acceptance rate.</strong>");var a=ei.rt("Our Help Center has <a>more details on invitation limits</a>.",null,function(e){var r=e.key,a=e.text;return n.a.createElement("a",{key:r,href:t},a)});return n.a.createElement("p",{className:"p-bulk_invite_emails__note margin_top_25 normal"},r," ",a)}var i=ei.rt("<strong>Tip:</strong> Copy and paste a list of contacts from your email. Please separate multiple addresses with\xa0commas!");return n.a.createElement("p",{className:"p-bulk_invite_emails__note margin_top_25 normal"},i)}},{key:"renderErrorMessageIfAny",value:function e(){var t=this.state.error;return t?n.a.createElement(Pn["a"],{type:"boxed",level:"warning",icon:"warning",align:"left"},n.a.createElement("span",{"data-qa":"bulk_invites_alert"},t)):null}},{key:"renderSubmitButton",value:function e(){var t=this.state.isProcessing;var r=t?ei.t("Processing email addresses ..."):ei.t("Add Invitees");return n.a.createElement(ct["d"],{size:"large",disabled:t,onClick:this.onClickSubmit,type:"primary","data-qa":"bulk_invites_submit_button",className:"margin_right_75"},r)}},{key:"render",value:function e(){var t=this;if(!this.props.featureModernizeInvites)return null;var r="bulk-invites-input";var i=this.state.invitesStr;return n.a.createElement(a["Fragment"],null,this.renderErrorMessageIfAny(),n.a.createElement(Mn["a"],{text:ei.t("Enter multiple email addresses"),htmlFor:r,id:"textarea-label"},n.a.createElement(Yn["b"],{id:r,name:r,ariaDescribedby:"textarea-label",onChange:function e(r){return t.onEmailsChange(r)},value:i}),this.renderInvitesLimitText(),this.renderSubmitButton(),n.a.createElement(ct["d"],{size:"large",type:"outline",onClick:this.onClickCancel},ei.t("Cancel"))))}}]);return t}(n.a.Component);ti.displayName="BulkInviteEmails";var ri=ti;ti.defaultProps=$n;var ai=new oe["b"]("invite");var ni={currentTeamName:et["b"].string,onSubmit:et["b"].func,getCopy:et["b"].func,addInviteRow:et["b"].func,featureModernizeInvites:et["b"].bool,invites:et["b"].arrayOf(et["b"].object),updateInviteEmail:et["b"].func,updateInviteName:et["b"].func,deleteInviteRow:et["b"].func,hasInvitesLimit:et["b"].bool,parseEmails:et["b"].func.isRequired,updateInvites:et["b"].func};var ii={currentTeamName:"",onSubmit:m["noop"],getCopy:m["noop"],addInviteRow:m["noop"],featureModernizeInvites:false,invites:[],updateInviteEmail:m["noop"],updateInviteName:m["noop"],deleteInviteRow:m["noop"],onClickBulkInvite:m["noop"],hasInvitesLimit:false,updateInvites:m["noop"]};var si=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isBulkInviteView:false,alertText:"",invites:e.invites};r.onClickBulkInvite=r.onClickBulkInvite.bind(r);r.onClickBulkInviteCancel=r.onClickBulkInviteCancel.bind(r);r.onClickBulkInviteSubmit=r.onClickBulkInviteSubmit.bind(r);return r}Ye()(t,[{key:"componentWillReceiveProps",value:function e(t){this.setState(function(){return{invites:t.invites}})}},{key:"onClickBulkInvite",value:function e(){this.setState(function(){return{isBulkInviteView:true,alertText:""}})}},{key:"onClickBulkInviteCancel",value:function e(){this.setState(function(){return{isBulkInviteView:false,alertText:""}})}},{key:"onClickBulkInviteSubmit",value:function e(t){if(!this.props.featureModernizeInvites)return;var r="";r=1===t.length?ai.t("We found 1 email address to invite. We\u2019ve done our best to guess a name. See if it looks right, then press Invite."):ai.t("We found {invitesLength} email addresses to invite. We\u2019ve done our best to guess a name for each one. See if everything looks right, then press Invite.",{invitesLength:t.length});this.setState(function(){return{isBulkInviteView:false,alertText:r,invites:t}});this.props.updateInvites(t)}},{key:"renderAlert",value:function e(){var t=this.state.alertText;return t?n.a.createElement(Pn["a"],{type:"boxed",level:"info",icon:"check-circle-o-large",align:"left"},n.a.createElement("span",null,t)):null}},{key:"render",value:function e(){if(!this.props.featureModernizeInvites)return null;var t=this.props,r=t.currentTeamName,i=t.onSubmit,s=t.getCopy,o=t.addInviteRow,l=t.updateInviteEmail,c=t.updateInviteName,u=t.deleteInviteRow,d=t.featureModernizeInvites,p=t.hasInvitesLimit,m=t.parseEmails;var h=this.state,f=h.isBulkInviteView,v=h.invites;return n.a.createElement(a["Fragment"],null,n.a.createElement("header",{className:"p-invite_members_form__header"},n.a.createElement(yt["b"],{type:"paper_plane",className:"p-invite_members_form__header_icon",size:"inherit"}),n.a.createElement("h1",{className:"p-invite_members_form__header_copy"},ai.rt("Invite people to <strong>{currentTeamName}</strong>",{currentTeamName:r}))),f?n.a.createElement(ri,{"data-qa":"bulk_invite_view",invites:v,hasInvitesLimit:p,onClickBulkInviteCancel:this.onClickBulkInviteCancel,onClickBulkInviteSubmit:this.onClickBulkInviteSubmit,parseEmails:m,featureModernizeInvites:d}):n.a.createElement(a["Fragment"],null,this.renderAlert(),n.a.createElement("form",{onSubmit:i,"data-qa":"invite_modal_form"},n.a.createElement("div",{className:"p-invite_members_form__invite_row"},n.a.createElement(Mn["a"],{className:"p-invite_members_form__invite_row_field p-invite_members_form__invite_row_field--email-address",text:s("email_address_label"),htmlFor:"invite_modal_email_0",id:s("initial_email_label_id")}),n.a.createElement(Mn["a"],{className:"p-invite_members_form__invite_row_field p-invite_members_form__invite_row_field--name p-invite_members_form__invite_row_field--name_without_close_button",text:s("name_label"),htmlFor:"invite_modal_name_0",id:s("initial_name_label_id")})),n.a.createElement(Hn,{featureModernizeInvites:d,invites:v,getCopy:s,updateInviteEmail:l,updateInviteName:c,deleteInviteRow:u}),n.a.createElement(Kn,{onClickAddRowButton:o,onClickBulkInvite:this.onClickBulkInvite,featureModernizeInvites:d}),n.a.createElement("div",{className:"p-invite_members_form__invitation_buttons"},n.a.createElement("span",{className:"p-invite_members_form__show_invite_link_view_wrapper"},n.a.createElement("button",{className:"p-invite_members_form__show_invite_link_view",type:"button"},n.a.createElement(yt["b"],{type:"link"}),n.a.createElement("span",{className:"p-invite_members_form__show_invite_link_view_copy"},ai.t("Get an invite link to share")))),n.a.createElement(ct["d"],{size:"large",htmlType:"submit"},ai.t("Send Invitations"))))))}}]);return t}(a["Component"]);si.displayName="InviteModalSendInvitesForm";var oi=si;si.defaultProps=ii;var li=new oe["b"]("invite");var ci={successfulInvites:et["b"].arrayOf(et["b"].shape({email:et["b"].string.isRequired,name:et["b"].string})),unsuccessfulInvites:et["b"].arrayOf(et["b"].shape({email:et["b"].string.isRequired,apiError:et["b"].string,userType:et["b"].string,issue:et["b"].string})),featureModernizeInvites:et["b"].bool,onClickDoneButton:et["b"].func,onClickTryAgainButton:et["b"].func};var ui={successfulInvites:[],unsuccessfulInvites:[],featureModernizeInvites:false,onClickDoneButton:m["noop"],onClickTryAgainButton:m["noop"]};var di=function(e){$e()(t,e);function t(){Qe()(this,t);return Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}Ye()(t,[{key:"onClickTryAgainButton",value:function e(t){var r=this;return function(){return r.props.onClickTryAgainButton(t)}}},{key:"getCopy",value:function e(t){var r=t.successfulInvitesCount,a=t.unsuccessfulInvitesCount;if(!this.props.featureModernizeInvites)return{};if(r&&a)return{headerCopy:li.t("That was only a partial success."),headerQaAttr:"invite_modal_invites_sent_header_copy_partial_success",subheaderCopy:li.rt("You\u2019ve invited <strong>{successfulInvitesCount, plural, =1 {# Member} other {# Members}},</strong> but <strong>{unsuccessfulInvitesCount, plural, =1 {# invitation} other {# invitations}} didn\u2019t send.</strong> Review the {unsuccessfulInvitesCount, plural, =1 {error} other {errors}} below.",{successfulInvitesCount:r,unsuccessfulInvitesCount:a}),tryAgainCopy:li.t("Try Again"),tryAgainQaAttr:"invite_modal_invites_sent_try_again_success_and_failure"};if(r)return{headerCopy:li.t("Your {successfulInvitesCount, plural, =1 {# invitation has} other {# invitations have}} been sent!",{successfulInvitesCount:r}),headerQaAttr:"invite_modal_invites_sent_header_copy_success",subheaderCopy:li.rt("You\u2019ve invited <strong>{successfulInvitesCount, plural, =1 {# Member} other {# Members}}</strong> to your workspace.",{successfulInvitesCount:r}),tryAgainCopy:li.t("Invite More People"),tryAgainQaAttr:"invite_modal_invites_sent_try_again_success"};return{headerCopy:li.t("That didn\u2019t work!"),headerQaAttr:"invite_modal_invites_sent_header_copy_failure",subheaderCopy:li.rt("<strong>{unsuccessfulInvitesCount, plural, =1 {# invitation} other {# invitations}} didn\u2019t send.</strong> Review the {unsuccessfulInvitesCount, plural, =1 {error} other {errors}} below.",{unsuccessfulInvitesCount:a}),tryAgainCopy:li.t("Try Again"),tryAgainQaAttr:"invite_modal_invites_sent_try_again_failure"}}},{key:"maybeRenderSuccessfulInvites",value:function e(t){if(0===t.length||!this.props.featureModernizeInvites)return null;return n.a.createElement("table",{className:"p-invite_members_form__sent_invites_table","data-qa":"invite_modal_invites_sent_successful_invites"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"p-invite_members_form__sent_invites_cell p-invite_members_form__sent_invites_header_cell--successful"},li.t("Email Address")),n.a.createElement("th",{className:"p-invite_members_form__sent_invites_cell p-invite_members_form__sent_invites_header_cell--successful"},li.t("Name")))),n.a.createElement("tbody",null,t.map(function(e){var t=e.email,r=e.name;return n.a.createElement("tr",{key:t},n.a.createElement("td",{className:"p-invite_members_form__sent_invites_cell p-invite_members_form__sent_invites_cell--non_header"},t),n.a.createElement("td",{className:"p-invite_members_form__sent_invites_cell p-invite_members_form__sent_invites_cell--non_header"},r))})))}},{key:"maybeRenderUnsuccessfulInvites",value:function e(t){var r=this.props.featureModernizeInvites;if(0===t.length||!r)return null;var a=t.map(function(e,t){var a=e.email,i=e.apiError,s=e.userType,o=e.issue;var l=i?Ln({errorKey:i,userType:s,issue:o,featureModernizeInvites:r}):"";var c=""+a+t;return n.a.createElement("tr",{key:c},n.a.createElement("td",{className:"p-invite_members_form__sent_invites_cell p-invite_members_form__sent_invites_cell--non_header"},a),n.a.createElement("td",{className:"p-invite_members_form__sent_invites_cell p-invite_members_form__sent_invites_cell--non_header"},l))});return n.a.createElement("table",{className:"p-invite_members_form__sent_invites_table","data-qa":"invite_modal_invites_sent_unsuccessful_invites"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"p-invite_members_form__sent_invites_cell p-invite_members_form__sent_invites_header_cell--unsuccessful"},li.t("Email Address")),n.a.createElement("th",{className:"p-invite_members_form__sent_invites_cell p-invite_members_form__sent_invites_header_cell--unsuccessful"},li.t("What went wrong")))),n.a.createElement("tbody",null,a))}},{key:"render",value:function e(){var t=this.props,r=t.successfulInvites,i=t.unsuccessfulInvites,s=t.onClickDoneButton;var o=this.getCopy({successfulInvitesCount:r.length,unsuccessfulInvitesCount:i.length}),l=o.headerCopy,c=o.headerQaAttr,u=o.subheaderCopy,d=o.tryAgainCopy,p=o.tryAgainQaAttr;return n.a.createElement(a["Fragment"],null,n.a.createElement("header",{className:"p-invite_members_form__header","data-qa":c},n.a.createElement("h1",{className:"p-invite_members_form__header_copy"},l),n.a.createElement("h3",{className:"p-invite_members_form__subheader_copy"},u)),this.maybeRenderSuccessfulInvites(r),this.maybeRenderUnsuccessfulInvites(i),n.a.createElement("div",{className:"p-invite_members_form__post_send_buttons"},n.a.createElement("div",{className:"p-invite_members_form__left_post_send_buttons"},n.a.createElement("a",{className:"p-invite_members_form__pending_invites c-button c-button--outline c-button--large null--outline null--large",href:"/admin/invites",target:"admin_invites"},li.t("View Pending Invites")),n.a.createElement(ct["d"],{size:"large",type:"outline",onClick:this.onClickTryAgainButton(i),"data-qa":p},d)),n.a.createElement(ct["d"],{size:"large",onClick:s,"data-qa":"invite_modal_invites_sent_done_button"},"Done")))}}]);return t}(a["Component"]);di.displayName="InviteModalInvitesSent";di.defaultProps=ui;var pi=di;var mi=r(1627);var hi={featureModernizeInvites:et["b"].bool,switchStep:et["b"].func,currentTeam:et["b"].object.isRequired,closeModal:et["b"].func,submitSendInvites:et["b"].func,inviteType:et["b"].oneOf(h.a.values(An)).isRequired,setUnsentInvites:et["b"].func.isRequired,unsentInvites:et["b"].array,hasInvitesLimit:et["b"].bool,parseEmails:et["b"].func.isRequired};var fi={sendInvitesForm:"sendInvitesForm",invitesSent:"invitesSent"};var vi={featureModernizeInvites:false,switchStep:h.a.noop,closeModal:h.a.noop,submitSendInvites:h.a.noop,unsentInvites:[],hasInvitesLimit:false};var bi=new oe["b"]("invite");var gi=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props.unsentInvites.length?r.props.unsentInvites:[{},{},{}];r.state={invites:a,view:fi.sendInvitesForm};r.successfulInvites=[];r.unsuccessfulInvites=[];r.getCopy=r.getCopy.bind(r);r.updateInviteEmail=r.updateInviteEmail.bind(r);r.updateInviteName=r.updateInviteName.bind(r);r.addInviteRow=r.addInviteRow.bind(r);r.deleteInviteRow=r.deleteInviteRow.bind(r);r.submitForm=r.submitForm.bind(r);r.showSentInvites=r.showSentInvites.bind(r);r.showSendInvitesForm=r.showSendInvitesForm.bind(r);r.onClickType=r.onClickType.bind(r);r.updateInvites=r.updateInvites.bind(r);return r}Ye()(t,[{key:"onClickType",value:function e(t){if(t){var r=this.props.switchStep;r(t)}}},{key:"getCopy",value:function e(t){if(!this.props.featureModernizeInvites)return;switch(t){case"email_address_label":return bi.t("Email Address");case"name_label":return bi.t("Name (optional)");case"initial_email_label_id":return"invite_modal_initial_email_label";case"initial_name_label_id":return"invite_modal_initial_name_label";default:return}}},{key:"updateInvites",value:function e(t){this.setState(function(){return{invites:t}})}},{key:"deleteInviteRow",value:function e(t){this.setState(function(e){var r=e.invites;var a=h.a.clone(r);a.splice(t,1);return{invites:a}})}},{key:"addInviteRow",value:function e(){this.setState(function(e){var t=e.invites;var r=t.concat([{}]);return{invites:r}})}},{key:"updateInviteEmail",value:function e(t,r){this.updateInviteValue({email:t,emailError:"",apiError:""},r)}},{key:"updateInviteName",value:function e(t,r){this.updateInviteValue({name:t},r)}},{key:"updateInviteValue",value:function e(t,r){this.setState(function(e){var a=e.invites;var n=h.a.clone(a);h.a.assign(n[r],t);return{invites:n}})}},{key:"submitForm",value:function e(t){var r=this;t.preventDefault();this.setState(function(e){var t=e.invites;return{invites:r.validateInvites(t)}},this.sendInvites)}},{key:"validateInvites",value:function e(t){var r=[];t.forEach(function(e){var t=e.email,a=e.name;t&&t.trim()&&r.push({email:t,emailError:Object(Rn["a"])(t)?void 0:bi.t("That doesn\u2019t look like a valid email address!"),name:a})});0===r.length&&r.push({});return r}},{key:"sendInvites",value:function e(){var t=this.state.invites;var r=this.props.inviteType;var a=this.showSentInvites;if(h.a.get(t,"[0].email")&&!h.a.some(t,"emailError")){var n=t.map(function(e){var t=e.email,a=e.name;return{email:t,real_name:a,type:r,source:"invite_modal",mode:"manual"}});this.props.submitSendInvites({invites:n}).then(function(e){var t=e.ok,r=e.invites;t&&r&&a(r)})}}},{key:"sortInvitesAndUpdateStore",value:function e(t){var r=this;this.successfulInvites=[];this.unsuccessfulInvites=[];t.forEach(function(e){var t=e.email,a=e.ok,n=e.apiError,i=e.userType,s=e.issue,o=e.name;a?r.successfulInvites.push({email:t,name:o}):r.unsuccessfulInvites.push({email:t,apiError:n,userType:i,issue:s})});this.props.setUnsentInvites(this.unsuccessfulInvites)}},{key:"showSentInvites",value:function e(t){var r=this;this.setState(function(e){var a=e.invites;var n=t.map(function(e){var t=e.email,r=e.ok,n=e.error,i=e.user_type,s=e.issue;var o=h.a.find(a,function(e){return h.a.isUndefined(n)&&e.email===t&&!h.a.isUndefined(e.name)});var l=o&&o.name;return{email:t,ok:r,apiError:n,userType:i,issue:s,name:l}});r.sortInvitesAndUpdateStore(n);return{view:fi.invitesSent,invites:n}})}},{key:"showSendInvitesForm",value:function e(){var t=this.unsuccessfulInvites;0===t.length&&t.push({},{},{});this.setState(function(){return{view:fi.sendInvitesForm,invites:t}})}},{key:"renderCurrentView",value:function e(){switch(this.state.view){case fi.sendInvitesForm:return n.a.createElement(oi,{currentTeamName:Object(Tn["getTeamDisplayName"])(this.props.currentTeam),onSubmit:this.submitForm,getCopy:this.getCopy,addInviteRow:this.addInviteRow,featureModernizeInvites:this.props.featureModernizeInvites,invites:this.state.invites,updateInviteEmail:this.updateInviteEmail,updateInviteName:this.updateInviteName,deleteInviteRow:this.deleteInviteRow,hasInvitesLimit:this.props.hasInvitesLimit,parseEmails:this.props.parseEmails,updateInvites:this.updateInvites});case fi.invitesSent:return n.a.createElement(pi,{successfulInvites:this.successfulInvites,unsuccessfulInvites:this.unsuccessfulInvites,featureModernizeInvites:this.props.featureModernizeInvites,onClickDoneButton:this.props.closeModal,onClickTryAgainButton:this.showSendInvitesForm});default:return null}}},{key:"render",value:function e(){if(!this.props.featureModernizeInvites)return null;return n.a.createElement("div",{className:"p-invite_members"},this.renderCurrentView())}}]);return t}(n.a.Component);gi.displayName="InvitesForm";var _i=gi;gi.defaultProps=vi;var yi=new oe["b"]("invite");ki.defaultProps={featureModernizeInvites:false};function ki(e){if(!e.featureModernizeInvites)return null;return n.a.createElement("div",{className:"p-invite_members__pricing_banner align_center"},n.a.createElement("p",{className:"inline"},n.a.createElement(yt["b"],{type:"add_user",className:"p-invite_members__pricing_banner__icon margin_right_50",size:20}),n.a.createElement("span",null,yi.rt("Workspaces with paid plans can also invite <strong>guests</strong>, like contractors, vendors, or clients."))),n.a.createElement("a",{className:"no_underline",target:"_blank",href:"/pricing?ui_step=66&ui_element=5","data-qa":"pricing_plans_link","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"pricing_link","data-clog-ui-action":"click","data-clog-ui-step":"admin_invites"},yi.t("See pricing plans")))}ki.displayName="PricingPlansBanner";var Oi=r(3494);var Ei=new oe["b"]("invite");var wi={featureModernizeInvites:et["b"].bool,switchStep:et["b"].func,currentTeam:et["b"].object.isRequired,closeModal:et["b"].func,submitSendInvites:et["b"].func,setUnsentInvites:et["b"].func.isRequired,unsentInvites:et["b"].array,parseEmails:et["b"].func.isRequired,hasInvitesLimit:et["b"].bool};var Ci={featureModernizeInvites:false,switchStep:m["noop"],closeModal:m["noop"],submitSendInvites:m["noop"],unsentInvites:[],hasInvitesLimit:false};var Si=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickType=r.onClickType.bind(r);return r}Ye()(t,[{key:"onClickType",value:function e(t){if(t){var r=this.props.switchStep;r(t)}}},{key:"render",value:function e(){var t=this.props.featureModernizeInvites;if(!t)return null;var r=w()({},this.props,{inviteType:An.REGULAR});return n.a.createElement("div",{className:"p-invite_members"},n.a.createElement(ki,{featureModernizeInvites:t}),n.a.createElement(_i,r),n.a.createElement("hr",{className:"margin_bottom_250 margin_top_250"}),n.a.createElement("a",{href:"/admin/invites",className:"underline p-invite_members__pending_invites_link",target:"_blank","data-qa":"pending_invites_link","data-clog-click":"true","data-clog-event":"INVITEMODAL_ACTION","data-clog-params":"action=view_pending_and_accepted,trigger=click_cta_pending_and_accepted"},Ei.t("See pending and accepted invites")))}}]);return t}(n.a.Component);Si.displayName="InviteMembers";var ji=Si;Si.defaultProps=Ci;var Ii=function(){return n.a.createElement("div",null,"Invite Status Step")};var Ti=function(){return n.a.createElement("div",null,"Invite SCG Step")};var Ni=function(){return n.a.createElement("div",null,"Invite MCG Step")};var Ai=function(){return n.a.createElement("div",null,"Invite Link Step")};var Ri=r(1639);var Mi={featureModernizeInvites:et["b"].bool,switchStep:et["b"].func,currentTeam:et["b"].object.isRequired};var Pi={featureModernizeInvites:false,switchStep:m["noop"]};var xi=new oe["b"]("invite");var Di=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickType=r.onClickType.bind(r);r.enrichedLearnUrl=Object(Zn["a"])("https://get.slack.help/hc/"+Object(Jn["a"])()+"/articles/202518103-Restricted-account-and-single-channel-guest-FAQ");return r}Ye()(t,[{key:"onClickType",value:function e(t,r){if("invite_learn_link"===t.target.id)return;if(r){var a=this.props.switchStep;a(r)}}},{key:"render",value:function e(){var t=this;if(!this.props.featureModernizeInvites)return null;return n.a.createElement("div",{className:"p-select_invite_type"},n.a.createElement("h1",{className:"p-select_invite_type__header align_center"},n.a.createElement("div",null,n.a.createElement(yt["b"],{type:"paper_plane",className:"p-select_invite_type__header_icon",size:"inherit"})),xi.rt('Invite people to <span class="normal">{teamName}</span>',{teamName:Object(Tn["getTeamDisplayName"])(this.props.currentTeam)})),n.a.createElement("hr",{className:"margin_bottom_100 margin_top_250"}),n.a.createElement("div",{className:"p-select_invite_type__link--member",role:"link",tabIndex:0,onClick:function e(r){return t.onClickType(r,Nn.INVITE_MEMBERS)},"data-qa":"invite_member_link"},n.a.createElement("h2",{className:"normal margin_bottom_50"},xi.t("Members")),n.a.createElement("p",{className:"p-select_invite_type__link--subtitle"},xi.t("Members can access messages and files in any public channel and access the full directory.")),n.a.createElement(yt["b"],{type:"arrow-right-medium",className:"p-select_invite_type__arrow_icon",size:"inherit"})),n.a.createElement("hr",{className:"margin_bottom_100"}),n.a.createElement("div",{className:"p-select_invite_type__link--member",role:"link",tabIndex:0,onClick:function e(r){return t.onClickType(r,Nn.INVITE_MCG)},"data-qa":"invite_mcg_link"},n.a.createElement("h2",{className:"normal margin_bottom_50"},xi.t("Multi-Channel Guests")),n.a.createElement("p",{className:"p-select_invite_type__link--subtitle"},xi.t("Multi-Channel Guests see a partial directory and can only access messages and files from selected channels.")),n.a.createElement(yt["b"],{type:"arrow-right-medium",className:"p-select_invite_type__arrow_icon",size:"inherit"})),n.a.createElement("hr",{className:"margin_bottom_100"}),n.a.createElement("div",{className:"p-select_invite_type__link--member",role:"link",tabIndex:0,onClick:function e(r){return t.onClickType(r,Nn.INVITE_SCG)},"data-qa":"invite_scg_link"},n.a.createElement("h2",{className:"normal margin_bottom_50"},xi.t("Single-Channel Guests")),n.a.createElement("p",{className:"p-select_invite_type__link--subtitle"},xi.t("Single-Channel Guests can only access messages and files in a single channel. This account type is free."),n.a.createElement("a",{href:this.enrichedLearnUrl,"data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"link_help_center","data-clog-ui-action":"click","data-clog-ui-step":"admin_invites","data-clog-ui-component":"guest_single",target:"zendesk",className:"padding_25 underline p-select_invite_type__link--learn",id:"invite_learn_link","data-qa":"invite_learn_link"},xi.t("Learn more")),n.a.createElement(yt["b"],{type:"arrow-right-medium",className:"p-select_invite_type__arrow_icon",size:"inherit"}))),n.a.createElement("hr",{className:"margin_bottom_100 margin_top_100"}),n.a.createElement("div",{className:"align_center margin_top_250"},n.a.createElement("a",{href:"/admin/invites",target:"_blank",className:"p-select_invite_type__pending","data-qa":"pending-invites-link"},xi.t("See pending and accepted invites for your workspace"))))}}]);return t}(n.a.Component);Di.displayName="SelectInviteType";var Fi=Di;Di.defaultProps=Pi;var Li=function(){return n.a.createElement("div",null,"Google Contacts Import Step")};var Bi={featureModernizeInvites:et["b"].bool,currentStep:et["b"].oneOf(Object(m["values"])(Nn)),currentTeam:et["b"].object.isRequired,clogger:et["b"].object.isRequired,submitSendInvites:et["b"].func.isRequired,closeModal:et["b"].func.isRequired,setUnsentInvites:et["b"].func.isRequired,unsentInvites:et["b"].array,hasInvitesLimit:et["b"].bool,parseEmails:et["b"].func.isRequired};var Ui={currentStep:Nn.SELECT_INVITE_TYPE,featureModernizeInvites:false,closeModal:m["noop"],unsentInvites:[],hasInvitesLimit:false};var qi=function(e){$e()(t,e);function t(e){Qe()(this,t);var r=Ze()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.isPaidTeam=Object(Tn["isPaidTeam"])(e.currentTeam);r.state={currentStep:r.isPaidTeam?Nn.SELECT_INVITE_TYPE:Nn.INVITE_MEMBERS};r.switchStep=r.switchStep.bind(r);return r}Ye()(t,[{key:"switchStep",value:function e(t){this.setState(function(){return{currentStep:t}})}},{key:"renderStep",value:function e(){var t=this.state.currentStep;var r=this.props,a=r.featureModernizeInvites,i=r.currentTeam,s=r.clogger,o=r.unsentInvites,l=r.hasInvitesLimit;var c={switchStep:this.switchStep,featureModernizeInvites:a,currentTeam:i,clogger:s,closeModal:this.props.closeModal,setUnsentInvites:this.props.setUnsentInvites,unsentInvites:o,hasInvitesLimit:""===i.plan&&l};if(t===Nn.INVITE_MEMBERS)return n.a.createElement(ji,w()({},c,{submitSendInvites:this.props.submitSendInvites,parseEmails:this.props.parseEmails}));if(t===Nn.INVITES_STATUS)return n.a.createElement(Ii,c);if(t===Nn.INVITE_SCG)return n.a.createElement(Ti,c);if(t===Nn.INVITE_MCG)return n.a.createElement(Ni,c);if(t===Nn.INVITE_LINK)return n.a.createElement(Ai,c);if(t===Nn.SELECT_INVITE_TYPE)return n.a.createElement(Fi,c);if(t===Nn.GOOGLE_CONTACTS_IMPORT)return n.a.createElement(Li,c);return null}},{key:"render",value:function e(){if(!this.props.featureModernizeInvites)return null;return n.a.createElement(Sn["a"],{showCancelButton:false,showGoButton:false,modalClasses:"p-invite_modal",contentLabel:"invite-modal"},this.renderStep())}}]);return t}(a["Component"]);qi.displayName="InviteModalContainer";qi.defaultProps=Ui;var Gi=function e(t){return{featureModernizeInvites:Object(T["isFeatureEnabled"])(t,"feature_modernize_invites"),currentTeam:Object(ne["getCurrentTeam"])(t),clogger:Object(_t["a"])({state:t}),unsentInvites:Object(jn["getUnsentInvites"])(t),hasInvitesLimit:Object(G["getTeamPref"])(t,"invites_limit")}};var Hi={submitSendInvites:In["b"],closeModal:Cn["closeModal"],setUnsentInvites:jn["setUnsentInvites"],parseEmails:In["a"]};var Wi=Object(i["connect"])(Gi,Hi)(qi);var Vi=Wi;var zi=Object(wn["b"])("Opens the invite (new users) modal",function(e){e(Object(Cn["openModal"])({element:n.a.createElement(Vi)}))});var Qi=zi;var Ki="shared_channels_channel_sidebar_plus_btn";var Yi="react_channel_sidebar_display_item";var Ji=Object(J["a"])(1);var Zi=function e(t,r,a){Ji&&Object(u["e"])(Yi+"_mark");document&&document.activeElement&&document.activeElement.blur();return t(Object(c["a"])({id:a})).catch(function(e){Object(_n["c"])("beep");throw e}).finally(function(){Ji&&Object(u["g"])(Yi,Yi+"_mark")})};var Xi=function e(t){return Object(O["a"])(null,t,true)};var $i=function e(){return k({element:Ki})};var es=function e(t,r,a){if(!t)throw new Error("mountChannelSidebar must be called with a teamId parameter");var c=Object(o["d"])(t);var u=c.getState();var m=Object(p["getGroupForUser"])(u,"speedy_sidebar_boot");"experiment"===m&&c.dispatch(Object(l["bulkAddChannels"])({channels:Object(d["a"])()}));var h=function e(t){return Zi(c.dispatch,c.getState,t)};var f=function e(){return En(c)};var k=Object(T["isFeatureEnabled"])(u,"feature_modernize_invites")?function(){return c.dispatch(Qi())}:Xi;Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(gn,{onItemSelect:h,onBrowseChannelsClick:v,onBrowseSharedChannelsClick:b,onCreateChannelClick:g,onCreateSharedChannelClick:$i,onOpenDMClick:_,onBrowseAppsClick:y,onInviteClick:k,onDevToolsClick:f,ref:a})),r)};var ts={onInviteClickLegacy:Xi};var rs=es;var as=r(51);Object(as["a"])("interop.mountChannelSidebar",rs)},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(2);var s=r.n(i);var o=r(3534);var l=r(24);var c=r.n(l);var u=r(32);var d=r.n(u);var p=r(9);var m=r.n(p);var h=r(25);var f=r(313);var v=r(17);var b=r(3495);var g=r(1132);var _="@SLACK_STORE_RESET_ACTION_TYPE";var y=function e(t){return function(e){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];function i(t,r){if(r.type===_)return e(void 0,r);for(var a=arguments.length,n=Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];return e.apply(void 0,[t,r].concat(n))}return t.apply(void 0,[i].concat(a))}};var k=y;var O="@SLACK_TEST_ONLY_MODIFY_STATE";var E=function e(t){return function(e){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];function i(t,r){if(r&&r.type===O)return r.payload;for(var a=arguments.length,n=Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];return e.apply(void 0,[t,r].concat(n))}return t.apply(void 0,[i].concat(a))}};var w=E;var C=r(1133);var S=r(903);var j=r(33);var I=r(185);var T;var N="TTESTTEAM";var A="FTESTFILE";var R=Object(I["a"])()?(T={},m()(T,h["a"].getType(),function(){throw new Error("apiCall called in test. Did you forget to mock a fetcher?")}),m()(T,h["b"].getType(),function(){throw new Error("apiCallExpedited called in test. Did you forget to mock a fetcher?")}),m()(T,f["e"].getType(),function(){throw new Error("Flannel query called in test. Did you forget to mock a fetcher?")}),T):{};function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=e.teamId,r=void 0===t?N:t,a=e.middlewares,i=void 0===a?b["a"]:a,l=e.customEnhancers,u=void 0===l?g["a"]:l,p=e.mockedThunks,m=void 0===p?R:p,h=d()(e,["teamId","middlewares","customEnhancers","mockedThunks"]);var f=Object(o["a"])(n()({teamId:r,middlewares:[S["b"]].concat(c()(i)),customEnhancers:[].concat(c()(u),[k,w])},h));if(!s.a.get(f,"dispatch."+S["a"])){if(window.__REDUX_DEVTOOLS_EXTENSION__)throw new Error("Tests won't work when the Redux extension is enabled; please disable your Redux extension and try again");throw new Error("\n\t\t\tUnable to spy on dispatch in tests. You have likely added a redux\n\t\t\tstore enhancer that breaks tests. Please talk to @drew or @afong\n\t\t\tand we'll get this sorted out.\n\t\t")}var y=f.dispatch[S["a"]];var E=y;var I=[];var T=n()({},m);function A(e){I.push(e);var t=e&&e.type;if(T[t]){var r=M.getState;return T[t](A,r,e.payload)}for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return E.apply(void 0,[e].concat(n))}f.dispatch[S["a"]]=A;var M=n()({},f,{resetState:function e(){this.dispatch({type:_});this._initStore()},modifyState:function e(t){var r=this.getState();var a=t(s.a.cloneDeep(r));this.dispatch({type:O,payload:a})},getActions:function e(){return I},resetActions:function e(){I=[]},flush:f[C["a"]]||function e(){Object(v["b"])().info("testStore.flush() does not exist by default. Normally, you do not need flush because components will rerender automatically after a redux dispatch.\nHowever, if you need to change this default, search for examples calling batchedSubscribeTest.setEnableEvenInTests(true) and follow that pattern.")},mockDispatch:function e(t){var r=t(y);if(!s.a.isFunction(r))throw new Error("\n\t\t\t\t\tmockDispatch expects a factory function that returns a\n\t\t\t\t\tdispatch function, not the dispatch function itself.\n\t\t\t\t");E=r},resetDispatch:function e(){E=y},mockThunk:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.noop;T[t.getType()]=r},unmockThunk:function e(t){delete T[t.getType()]},resetThunks:function e(){T=n()({},m)},loadFixture:function e(t,r){return f.dispatch(t(r))},reset:function e(){this.resetThunks();this.resetDispatch();this.resetState();this.resetActions()},_isTestStore:true});Object(j["e"])(r,M);return M}var P=r(683);var x=r(371);var D=r(336);var F=r(990);var L=r(1167);var B=r(1439);var U=r(1138);var q=r(1);var G=r.n(q);var H=r(129);var W=r(31);var V=r(77);var z=r(5);var Q=r.n(z);var K=r(6);var Y=r.n(K);var J=r(7);var Z=r.n(J);var X=r(8);var $=r.n(X);var ee=r(14);var te=r(15);var re=r.n(te);var ae=r(11);var ne=r(19);var ie=r(143);var se=r(13);var oe=Object(se["c"])("TS.files.gdrive.create");var le=Object(se["c"])("TS.menu.file.onGDriveCreateComplete");var ce=r(859);var ue=r(10);var de=r(70);var pe=r(118);var me=r(103);var he=r(88);var fe=r(227);var ve=r(190);var be=r(961);var ge=r(966);var _e=r(808);var ye=r(968);var ke=r(1327);var Oe=new ue["b"]("create-gdoc-dialog");var Ee={type:H["b"].string,closeModal:H["b"].func,getShareableChannelId:H["b"].func,featureFileThreads:H["b"].bool,msgText:H["b"].string,setMsgText:H["b"].func,selectedChannel:H["b"].object,setSelectedChannel:H["b"].func,disallowedKeywordInMsgText:H["b"].string,canPostInSelectedChannel:H["b"].bool};var we={type:void 0,closeModal:s.a.noop,getShareableChannelId:s.a.noop,featureFileThreads:false,msgText:"",setMsgText:s.a.noop,selectedChannel:void 0,setSelectedChannel:s.a.noop,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:false};var Ce=function(e){$()(t,e);function t(e){Q()(this,t);var r=Z()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));s.a.bindAll(r,["onTextChange","onShareChannelChange","onGo","onCancel","onTitleInputChange","onShareWithChange","setTitleInputRef"]);r.titleInput=null;r.state={overMsgLengthLimit:false,titleInputValue:"",submitting:false,shareWith:false};return r}Y()(t,[{key:"onTextChange",value:function e(t){var r=t.text,a=t.overLimit;this.props.setMsgText(r);this.setState(function(){return{overMsgLengthLimit:a}})}},{key:"onShareChannelChange",value:function e(t){this.props.setSelectedChannel(t)}},{key:"onGo",value:function e(){if(this.isGoButtonDisabled())return;this.createGDocOnGo()}},{key:"onCancel",value:function e(){le(false)}},{key:"onTitleInputChange",value:function e(t){this.setState(function(){return{titleInputValue:t}})}},{key:"onShareWithChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{shareWith:!!r}})}},{key:"getCleanMsgText",value:function e(){var t=Object(ie["a"])(this.props.msgText);return s.a.trim(t)}},{key:"getDialogTitle",value:function e(){var t=this.props,r=t.type,a=t.featureFileThreads;if(!a)return null;switch(r){case"document":return Oe.t("Create a Google Document");case"presentation":return Oe.t("Create a Google Presentation");case"spreadsheet":return Oe.t("Create a Google Spreadsheet");default:return Oe.t("Create a Google file")}}},{key:"setTitleInputRef",value:function e(t){if(!t)return;this.titleInput=t;this.focusTitleInput()}},{key:"focusTitleInput",value:function e(){this.titleInput&&this.titleInput.focus()}},{key:"isGoButtonDisabled",value:function e(){var t=this.props,r=t.disallowedKeywordInMsgText,a=t.canPostInSelectedChannel;var n=this.state,i=n.overMsgLengthLimit,s=n.titleInputValue,o=n.submitting;var l=s&&s.length>de["MAX_FILENAME_LENGTH"];return!a||!!r||i||l||o}},{key:"createGDocOnGo",value:function e(){var t=this;var r=this.props,a=r.selectedChannel,n=r.getShareableChannelId,i=r.type;var s=this.state,o=s.titleInputValue,l=s.shareWith;var c=a&&a.id;if(!c)return;n({channelOrMemberId:c}).then(function(e){var r=t.getCleanMsgText();var a=o||"Untitled";var n={title:a,channel:l?e:null,comment:l?r:null};oe(i,n).then(function(){t.setState(function(){return{submitting:false}});t.props.closeModal()})});this.setState(function(){return{submitting:true}})}},{key:"renderChannelPicker",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.selectedChannel;var n=this.state.shareWith;if(!r)return null;var i=a&&a.id;return G.a.createElement(ge["a"],{onChange:this.onShareChannelChange,initialChannelId:i,isDisabled:!n})}},{key:"renderShareAlert",value:function e(){var t=this.state.shareWith;if(!t)return null;var r=Object(ye["a"])(n()({},this.props));if(!r)return null;return G.a.createElement("div",{className:"p-share_dialog__section"},G.a.createElement(pe["d"],{type:"inline",level:"warning"},r))}},{key:"renderShareWith",value:function e(){var t=this.props.featureFileThreads;var r=this.state.shareWith;if(!t)return null;var a="create-gdoc-share-with";return G.a.createElement(he["a"],{text:Oe.t("Share with:"),htmlFor:a,type:"inline"},G.a.createElement(fe["a"],{id:a,defaultChecked:r,onChange:this.onShareWithChange}))}},{key:"renderTitleInput",value:function e(){var t=this.props.featureFileThreads;var r=this.state.titleInputValue;if(!t)return null;var a="p-create_gdoc_dialog__title";return G.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},G.a.createElement(he["a"],{htmlFor:a,text:Oe.t("Title"),optional:true},G.a.createElement(ve["a"],{id:a,name:a,maxCharacterLimit:de["MAX_FILENAME_LENGTH"],counterMinimumCharacters:de["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onTitleInputChange,value:r,ref:this.setTitleInputRef})))}},{key:"renderShareWithPicker",value:function e(){return G.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__create_gdoc_share_with"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderMessageInput",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.msgText;var n=this.state.shareWith;if(!r)return null;var i=Oe.t("Add a message, if you\u2019d like.");var s=re()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input",{"p-share_dialog__create_gdoc_message_input--hide":!n});return G.a.createElement("div",{className:s},G.a.createElement(be["a"],{text:a,onTextChange:this.onTextChange,placeholder:i,ariaLabel:i,onEnter:this.onGo}))}},{key:"render",value:function e(){var t=this.props.featureFileThreads;if(!t)return null;var r=false;return G.a.createElement(me["a"],{className:"p-create_gdoc_dialog__modal",title:this.getDialogTitle(),shouldCloseOnOverlayClick:r,useSlackScrollbarWithPadding:true,goButtonText:Oe.t("Create"),onGo:this.onGo,onClose:this.onCancel,onCancel:this.onCancel,goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareWithPicker(),this.renderShareAlert(),this.renderMessageInput())}}]);return t}(q["Component"]);Ce.displayName="CreateGDocDialog";Ce.defaultProps=we;function Se(e,t){var r=t.selectedChannelId;var a=Object(_e["b"])(e,t);var i=Object(ne["getChannelById"])(e,r)||Object(ne["getImByMemberId"])(e,r);return n()({},a,{selectedChannel:i,featureFileThreads:Object(ae["isFeatureEnabled"])(e,"feature_file_threads")})}var je={closeModal:V["closeModal"],getShareableChannelId:ce["a"]};var Ie=Object(ee["connect"])(Se,je)(Ce);var Te=Object(_e["a"])(Ie);var Ne=Object(W["b"])("Opens the create gdoc file dialog",function(e,t,r){e(Object(V["openModal"])({element:G.a.createElement(Te,r)}))});Ne.propTypes={type:H["b"].string,displayType:H["b"].string,initialChannelId:H["b"].string};var Ae=Ne;var Re=r(1148);var Me=r(21);var Pe=Object(se["c"])("TS.codemirror.legacyLoadCodemirror",function(){return Promise.reject()});var xe=Object(se["c"])("TS.codemirror.legacyAttachToTextArea");var De=r(2355);var Fe=new ue["b"]("snippet-dialog");var Le={wrapLongLines:H["b"].bool,featureFileThreads:H["b"].bool};var Be={wrapLongLines:true,featureFileThreads:true};var Ue=function(e){$()(t,e);function t(e){Q()(this,t);var r=Z()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(i["bindAll"])(r,["onFileNameChange","setTextAreaRef"]);r.state={fileName:"",overFileNameLimit:false};return r}Y()(t,[{key:"onFileNameChange",value:function e(t){this.setState(function(){return{fileName:t,overFileNameLimit:t.length>de["MAX_FILENAME_LENGTH"]}})}},{key:"setTextAreaRef",value:function e(t){var r=this.props.wrapLongLines;this.textarea=t;this.editor=xe(this.textarea,{lineNumbers:true,matchBrackets:true,indentUnit:4,indentWithTabs:true,enterMode:"keep",tabMode:"shift",viewportMargin:10,autofocus:false,lineWrapping:r})}},{key:"render",value:function e(){var t=this.props.featureFileThreads;var r=this.state.fileName;if(!t)return null;var a="p-snippet_dialog";var n=Fe.t("Create snippet");var i=false;return G.a.createElement(me["a"],{className:a,title:n,shouldCloseOnOverlayClick:i,useSlackScrollbarWithPadding:true},G.a.createElement("div",{className:"p-snippet_dialog__section"},G.a.createElement(ve["a"],{id:"snippet-dialog-name",name:"snippet-dialog-name",value:r,onChange:this.onFileNameChange,placeholder:Fe.t("Title (optional)"),maxCharacterLimit:de["MAX_FILENAME_LENGTH"],counterMinimumCharacters:de["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"]})),G.a.createElement("div",{className:"p-snippet_dialog__section"},G.a.createElement("textarea",{ref:this.setTextAreaRef})))}}]);return t}(q["PureComponent"]);Ue.displayName="SnippetDialog";Ue.defaultProps=Be;function qe(e){return{wrapLongLines:Object(Me["getUserPref"])(e,"snippet_editor_wrap_long_lines"),featureFileThreads:Object(ae["isFeatureEnabled"])(e,"feature_file_threads")}}var Ge=Object(ee["connect"])(qe)(Ue);var He=Object(W["b"])("Opens the snippet dialog",function(e,t,r){Object(ae["isFeatureEnabled"])(t(),"feature_file_threads")&&e(Object(V["openModal"])({element:G.a.createElement(Ge,r)}))});He.propTypes={initialText:H["b"].string,initialChannelId:H["b"].string,threadTs:H["b"].string};var We=He;var Ve=r(739);var ze=r(978);var Qe=r(1143);var Ke=r(1129);var Ye=r(681);var Je=r(22);var Ze=Object(Je["a"])("Fetch custom emoji from the API",function(e){return e(Object(h["a"])({method:"emoji.list",args:{include_complex_values:1}})).then(function(e){return{emoji:e.emoji,cacheTs:e.cache_ts}})});Ze.propTypes=null;var Xe=r(23);var $e=new ue["b"]("emoji_names");var et=function e(t){if(!t)return null;return{100:$e.t("100"),1234:$e.t("1234"),"+1":$e.t("+1"),"-1":$e.t("-1"),"8ball":$e.t("8ball"),a:$e.t("a"),ab:$e.t("ab"),abc:$e.t("abc"),abcd:$e.t("abcd"),accept:$e.t("accept"),admission_tickets:$e.t("admission_tickets"),adult:$e.t("adult"),aerial_tramway:$e.t("aerial_tramway"),airplane:$e.t("airplane"),airplane_arriving:$e.t("airplane_arriving"),airplane_departure:$e.t("airplane_departure"),alarm_clock:$e.t("alarm_clock"),alembic:$e.t("alembic"),alien:$e.t("alien"),ambulance:$e.t("ambulance"),amphora:$e.t("amphora"),anchor:$e.t("anchor"),angel:$e.t("angel"),anger:$e.t("anger"),angry:$e.t("angry"),anguished:$e.t("anguished"),ant:$e.t("ant"),apple:$e.t("apple"),aquarius:$e.t("aquarius"),aries:$e.t("aries"),arrow_backward:$e.t("arrow_backward"),arrow_double_down:$e.t("arrow_double_down"),arrow_double_up:$e.t("arrow_double_up"),arrow_down:$e.t("arrow_down"),arrow_down_small:$e.t("arrow_down_small"),arrow_forward:$e.t("arrow_forward"),arrow_heading_down:$e.t("arrow_heading_down"),arrow_heading_up:$e.t("arrow_heading_up"),arrow_left:$e.t("arrow_left"),arrow_lower_left:$e.t("arrow_lower_left"),arrow_lower_right:$e.t("arrow_lower_right"),arrow_right:$e.t("arrow_right"),arrow_right_hook:$e.t("arrow_right_hook"),arrow_up:$e.t("arrow_up"),arrow_up_down:$e.t("arrow_up_down"),arrow_up_small:$e.t("arrow_up_small"),arrow_upper_left:$e.t("arrow_upper_left"),arrow_upper_right:$e.t("arrow_upper_right"),arrows_clockwise:$e.t("arrows_clockwise"),arrows_counterclockwise:$e.t("arrows_counterclockwise"),art:$e.t("art"),articulated_lorry:$e.t("articulated_lorry"),astonished:$e.t("astonished"),athletic_shoe:$e.t("athletic_shoe"),atm:$e.t("atm"),atom_symbol:$e.t("atom_symbol"),avocado:$e.t("avocado"),b:$e.t("b"),baby:$e.t("baby"),baby_bottle:$e.t("baby_bottle"),baby_chick:$e.t("baby_chick"),baby_symbol:$e.t("baby_symbol"),back:$e.t("back"),bacon:$e.t("bacon"),badminton_racquet_and_shuttlecock:$e.t("badminton_racquet_and_shuttlecock"),baggage_claim:$e.t("baggage_claim"),baguette_bread:$e.t("baguette_bread"),balloon:$e.t("balloon"),ballot_box_with_ballot:$e.t("ballot_box_with_ballot"),ballot_box_with_check:$e.t("ballot_box_with_check"),bamboo:$e.t("bamboo"),banana:$e.t("banana"),bangbang:$e.t("bangbang"),bank:$e.t("bank"),bar_chart:$e.t("bar_chart"),barber:$e.t("barber"),barely_sunny:$e.t("barely_sunny"),baseball:$e.t("baseball"),basketball:$e.t("basketball"),bat:$e.t("bat"),bath:$e.t("bath"),bathtub:$e.t("bathtub"),battery:$e.t("battery"),beach_with_umbrella:$e.t("beach_with_umbrella"),bear:$e.t("bear"),bearded_person:$e.t("bearded_person"),bed:$e.t("bed"),bee:$e.t("bee"),beer:$e.t("beer"),beers:$e.t("beers"),beetle:$e.t("beetle"),beginner:$e.t("beginner"),bell:$e.t("bell"),bellhop_bell:$e.t("bellhop_bell"),bento:$e.t("bento"),bicyclist:$e.t("bicyclist"),bike:$e.t("bike"),bikini:$e.t("bikini"),billed_cap:$e.t("billed_cap"),biohazard_sign:$e.t("biohazard_sign"),bird:$e.t("bird"),birthday:$e.t("birthday"),black_circle:$e.t("black_circle"),black_circle_for_record:$e.t("black_circle_for_record"),black_heart:$e.t("black_heart"),black_joker:$e.t("black_joker"),black_large_square:$e.t("black_large_square"),black_left_pointing_double_triangle_with_vertical_bar:$e.t("black_left_pointing_double_triangle_with_vertical_bar"),black_medium_small_square:$e.t("black_medium_small_square"),black_medium_square:$e.t("black_medium_square"),black_nib:$e.t("black_nib"),black_right_pointing_double_triangle_with_vertical_bar:$e.t("black_right_pointing_double_triangle_with_vertical_bar"),black_right_pointing_triangle_with_double_vertical_bar:$e.t("black_right_pointing_triangle_with_double_vertical_bar"),black_small_square:$e.t("black_small_square"),black_square:$e.t("black_square"),black_square_button:$e.t("black_square_button"),black_square_for_stop:$e.t("black_square_for_stop"),"blond-haired-man":$e.t("blond-haired-man"),"blond-haired-woman":$e.t("blond-haired-woman"),blossom:$e.t("blossom"),blowfish:$e.t("blowfish"),blue_book:$e.t("blue_book"),blue_car:$e.t("blue_car"),blue_heart:$e.t("blue_heart"),blush:$e.t("blush"),boar:$e.t("boar"),boat:$e.t("boat"),bomb:$e.t("bomb"),book:$e.t("book"),bookmark:$e.t("bookmark"),bookmark_tabs:$e.t("bookmark_tabs"),books:$e.t("books"),boom:$e.t("boom"),boot:$e.t("boot"),bouquet:$e.t("bouquet"),bow:$e.t("bow"),bow_and_arrow:$e.t("bow_and_arrow"),bowl_with_spoon:$e.t("bowl_with_spoon"),bowling:$e.t("bowling"),bowtie:$e.t("bowtie"),boxing_glove:$e.t("boxing_glove"),boy:$e.t("boy"),brain:$e.t("brain"),bread:$e.t("bread"),"breast-feeding":$e.t("breast-feeding"),bride_with_veil:$e.t("bride_with_veil"),bridge_at_night:$e.t("bridge_at_night"),briefcase:$e.t("briefcase"),broccoli:$e.t("broccoli"),broken_heart:$e.t("broken_heart"),bug:$e.t("bug"),building_construction:$e.t("building_construction"),bulb:$e.t("bulb"),bullettrain_front:$e.t("bullettrain_front"),bullettrain_side:$e.t("bullettrain_side"),burrito:$e.t("burrito"),bus:$e.t("bus"),busstop:$e.t("busstop"),bust_in_silhouette:$e.t("bust_in_silhouette"),busts_in_silhouette:$e.t("busts_in_silhouette"),butterfly:$e.t("butterfly"),cactus:$e.t("cactus"),cake:$e.t("cake"),calendar:$e.t("calendar"),call_me_hand:$e.t("call_me_hand"),calling:$e.t("calling"),camel:$e.t("camel"),camera:$e.t("camera"),camera_with_flash:$e.t("camera_with_flash"),camping:$e.t("camping"),cancer:$e.t("cancer"),candle:$e.t("candle"),candy:$e.t("candy"),canned_food:$e.t("canned_food"),canoe:$e.t("canoe"),capital_abcd:$e.t("capital_abcd"),capricorn:$e.t("capricorn"),car:$e.t("car"),card_file_box:$e.t("card_file_box"),card_index:$e.t("card_index"),card_index_dividers:$e.t("card_index_dividers"),carousel_horse:$e.t("carousel_horse"),carrot:$e.t("carrot"),cat:$e.t("cat"),cat2:$e.t("cat2"),cd:$e.t("cd"),chains:$e.t("chains"),champagne:$e.t("champagne"),chart:$e.t("chart"),chart_with_downwards_trend:$e.t("chart_with_downwards_trend"),chart_with_upwards_trend:$e.t("chart_with_upwards_trend"),checkered_flag:$e.t("checkered_flag"),cheese_wedge:$e.t("cheese_wedge"),cherries:$e.t("cherries"),cherry_blossom:$e.t("cherry_blossom"),chestnut:$e.t("chestnut"),chicken:$e.t("chicken"),child:$e.t("child"),children_crossing:$e.t("children_crossing"),chipmunk:$e.t("chipmunk"),chocolate_bar:$e.t("chocolate_bar"),chopsticks:$e.t("chopsticks"),christmas_tree:$e.t("christmas_tree"),church:$e.t("church"),cinema:$e.t("cinema"),circus_tent:$e.t("circus_tent"),city_sunrise:$e.t("city_sunrise"),city_sunset:$e.t("city_sunset"),cityscape:$e.t("cityscape"),cl:$e.t("cl"),clap:$e.t("clap"),clapper:$e.t("clapper"),classical_building:$e.t("classical_building"),clinking_glasses:$e.t("clinking_glasses"),clipboard:$e.t("clipboard"),clock1:$e.t("clock1"),clock10:$e.t("clock10"),clock1030:$e.t("clock1030"),clock11:$e.t("clock11"),clock1130:$e.t("clock1130"),clock12:$e.t("clock12"),clock1230:$e.t("clock1230"),clock130:$e.t("clock130"),clock2:$e.t("clock2"),clock230:$e.t("clock230"),clock3:$e.t("clock3"),clock330:$e.t("clock330"),clock4:$e.t("clock4"),clock430:$e.t("clock430"),clock5:$e.t("clock5"),clock530:$e.t("clock530"),clock6:$e.t("clock6"),clock630:$e.t("clock630"),clock7:$e.t("clock7"),clock730:$e.t("clock730"),clock8:$e.t("clock8"),clock830:$e.t("clock830"),clock9:$e.t("clock9"),clock930:$e.t("clock930"),closed_book:$e.t("closed_book"),closed_lock_with_key:$e.t("closed_lock_with_key"),closed_umbrella:$e.t("closed_umbrella"),cloud:$e.t("cloud"),clown_face:$e.t("clown_face"),clubs:$e.t("clubs"),cn:$e.t("cn"),coat:$e.t("coat"),cocktail:$e.t("cocktail"),coconut:$e.t("coconut"),coffee:$e.t("coffee"),coffin:$e.t("coffin"),cold_sweat:$e.t("cold_sweat"),collision:$e.t("collision"),comet:$e.t("comet"),compression:$e.t("compression"),computer:$e.t("computer"),confetti_ball:$e.t("confetti_ball"),confounded:$e.t("confounded"),confused:$e.t("confused"),congratulations:$e.t("congratulations"),construction:$e.t("construction"),construction_worker:$e.t("construction_worker"),control_knobs:$e.t("control_knobs"),convenience_store:$e.t("convenience_store"),cookie:$e.t("cookie"),cooking:$e.t("cooking"),cool:$e.t("cool"),cop:$e.t("cop"),copyright:$e.t("copyright"),corn:$e.t("corn"),couch_and_lamp:$e.t("couch_and_lamp"),couple:$e.t("couple"),couple_with_heart:$e.t("couple_with_heart"),couplekiss:$e.t("couplekiss"),cow:$e.t("cow"),cow2:$e.t("cow2"),crab:$e.t("crab"),credit_card:$e.t("credit_card"),crescent_moon:$e.t("crescent_moon"),cricket:$e.t("cricket"),cricket_bat_and_ball:$e.t("cricket_bat_and_ball"),crocodile:$e.t("crocodile"),croissant:$e.t("croissant"),crossed_fingers:$e.t("crossed_fingers"),crossed_flags:$e.t("crossed_flags"),crossed_swords:$e.t("crossed_swords"),crown:$e.t("crown"),cry:$e.t("cry"),crying_cat_face:$e.t("crying_cat_face"),crystal_ball:$e.t("crystal_ball"),cubimal_chick:$e.t("cubimal_chick"),cucumber:$e.t("cucumber"),cup_with_straw:$e.t("cup_with_straw"),cupid:$e.t("cupid"),curling_stone:$e.t("curling_stone"),curly_loop:$e.t("curly_loop"),currency_exchange:$e.t("currency_exchange"),curry:$e.t("curry"),custard:$e.t("custard"),customs:$e.t("customs"),cut_of_meat:$e.t("cut_of_meat"),cyclone:$e.t("cyclone"),dagger_knife:$e.t("dagger_knife"),dancer:$e.t("dancer"),dancers:$e.t("dancers"),dango:$e.t("dango"),dark_sunglasses:$e.t("dark_sunglasses"),dart:$e.t("dart"),dash:$e.t("dash"),date:$e.t("date"),de:$e.t("de"),deciduous_tree:$e.t("deciduous_tree"),deer:$e.t("deer"),department_store:$e.t("department_store"),derelict_house_building:$e.t("derelict_house_building"),desert:$e.t("desert"),desert_island:$e.t("desert_island"),desktop_computer:$e.t("desktop_computer"),diamond_shape_with_a_dot_inside:$e.t("diamond_shape_with_a_dot_inside"),diamonds:$e.t("diamonds"),disappointed:$e.t("disappointed"),disappointed_relieved:$e.t("disappointed_relieved"),dizzy:$e.t("dizzy"),dizzy_face:$e.t("dizzy_face"),do_not_litter:$e.t("do_not_litter"),dog:$e.t("dog"),dog2:$e.t("dog2"),dollar:$e.t("dollar"),dolls:$e.t("dolls"),dolphin:$e.t("dolphin"),door:$e.t("door"),double_vertical_bar:$e.t("double_vertical_bar"),doughnut:$e.t("doughnut"),dove_of_peace:$e.t("dove_of_peace"),dragon:$e.t("dragon"),dragon_face:$e.t("dragon_face"),dress:$e.t("dress"),dromedary_camel:$e.t("dromedary_camel"),drooling_face:$e.t("drooling_face"),droplet:$e.t("droplet"),drum_with_drumsticks:$e.t("drum_with_drumsticks"),duck:$e.t("duck"),dumpling:$e.t("dumpling"),dusty_stick:$e.t("dusty_stick"),dvd:$e.t("dvd"),"e-mail":$e.t("e-mail"),eagle:$e.t("eagle"),ear:$e.t("ear"),ear_of_rice:$e.t("ear_of_rice"),earth_africa:$e.t("earth_africa"),earth_americas:$e.t("earth_americas"),earth_asia:$e.t("earth_asia"),egg:$e.t("egg"),eggplant:$e.t("eggplant"),eight:$e.t("eight"),eight_pointed_black_star:$e.t("eight_pointed_black_star"),eight_spoked_asterisk:$e.t("eight_spoked_asterisk"),eject:$e.t("eject"),electric_plug:$e.t("electric_plug"),elephant:$e.t("elephant"),elf:$e.t("elf"),email:$e.t("email"),end:$e.t("end"),envelope:$e.t("envelope"),envelope_with_arrow:$e.t("envelope_with_arrow"),es:$e.t("es"),euro:$e.t("euro"),european_castle:$e.t("european_castle"),european_post_office:$e.t("european_post_office"),evergreen_tree:$e.t("evergreen_tree"),exclamation:$e.t("exclamation"),exploding_head:$e.t("exploding_head"),expressionless:$e.t("expressionless"),eye:$e.t("eye"),"eye-in-speech-bubble":$e.t("eye-in-speech-bubble"),eyeglasses:$e.t("eyeglasses"),eyes:$e.t("eyes"),face_palm:$e.t("face_palm"),face_vomiting:$e.t("face_vomiting"),face_with_cowboy_hat:$e.t("face_with_cowboy_hat"),face_with_finger_covering_closed_lips:$e.t("face_with_finger_covering_closed_lips"),face_with_hand_over_mouth:$e.t("face_with_hand_over_mouth"),face_with_head_bandage:$e.t("face_with_head_bandage"),face_with_monocle:$e.t("face_with_monocle"),face_with_one_eyebrow_raised:$e.t("face_with_one_eyebrow_raised"),face_with_open_mouth_vomiting:$e.t("face_with_open_mouth_vomiting"),face_with_raised_eyebrow:$e.t("face_with_raised_eyebrow"),face_with_rolling_eyes:$e.t("face_with_rolling_eyes"),face_with_symbols_on_mouth:$e.t("face_with_symbols_on_mouth"),face_with_thermometer:$e.t("face_with_thermometer"),facepunch:$e.t("facepunch"),factory:$e.t("factory"),fairy:$e.t("fairy"),fallen_leaf:$e.t("fallen_leaf"),family:$e.t("family"),fast_forward:$e.t("fast_forward"),fax:$e.t("fax"),fearful:$e.t("fearful"),feet:$e.t("feet"),"female-artist":$e.t("female-artist"),"female-astronaut":$e.t("female-astronaut"),"female-construction-worker":$e.t("female-construction-worker"),"female-cook":$e.t("female-cook"),"female-detective":$e.t("female-detective"),"female-doctor":$e.t("female-doctor"),"female-factory-worker":$e.t("female-factory-worker"),"female-farmer":$e.t("female-farmer"),"female-firefighter":$e.t("female-firefighter"),"female-guard":$e.t("female-guard"),"female-judge":$e.t("female-judge"),"female-mechanic":$e.t("female-mechanic"),"female-office-worker":$e.t("female-office-worker"),"female-pilot":$e.t("female-pilot"),"female-police-officer":$e.t("female-police-officer"),"female-scientist":$e.t("female-scientist"),"female-singer":$e.t("female-singer"),"female-student":$e.t("female-student"),"female-teacher":$e.t("female-teacher"),"female-technologist":$e.t("female-technologist"),female_elf:$e.t("female_elf"),female_fairy:$e.t("female_fairy"),female_genie:$e.t("female_genie"),female_mage:$e.t("female_mage"),female_sign:$e.t("female_sign"),female_vampire:$e.t("female_vampire"),female_zombie:$e.t("female_zombie"),fencer:$e.t("fencer"),ferris_wheel:$e.t("ferris_wheel"),ferry:$e.t("ferry"),field_hockey_stick_and_ball:$e.t("field_hockey_stick_and_ball"),file_cabinet:$e.t("file_cabinet"),file_folder:$e.t("file_folder"),film_frames:$e.t("film_frames"),film_projector:$e.t("film_projector"),fire:$e.t("fire"),fire_engine:$e.t("fire_engine"),fireworks:$e.t("fireworks"),first_place_medal:$e.t("first_place_medal"),first_quarter_moon:$e.t("first_quarter_moon"),first_quarter_moon_with_face:$e.t("first_quarter_moon_with_face"),fish:$e.t("fish"),fish_cake:$e.t("fish_cake"),fishing_pole_and_fish:$e.t("fishing_pole_and_fish"),fist:$e.t("fist"),five:$e.t("five"),"flag-ac":$e.t("flag-ac"),"flag-ad":$e.t("flag-ad"),"flag-ae":$e.t("flag-ae"),"flag-af":$e.t("flag-af"),"flag-ag":$e.t("flag-ag"),"flag-ai":$e.t("flag-ai"),"flag-al":$e.t("flag-al"),"flag-am":$e.t("flag-am"),"flag-ao":$e.t("flag-ao"),"flag-aq":$e.t("flag-aq"),"flag-ar":$e.t("flag-ar"),"flag-as":$e.t("flag-as"),"flag-at":$e.t("flag-at"),"flag-au":$e.t("flag-au"),"flag-aw":$e.t("flag-aw"),"flag-ax":$e.t("flag-ax"),"flag-az":$e.t("flag-az"),"flag-ba":$e.t("flag-ba"),"flag-bb":$e.t("flag-bb"),"flag-bd":$e.t("flag-bd"),"flag-be":$e.t("flag-be"),"flag-bf":$e.t("flag-bf"),"flag-bg":$e.t("flag-bg"),"flag-bh":$e.t("flag-bh"),"flag-bi":$e.t("flag-bi"),"flag-bj":$e.t("flag-bj"),"flag-bl":$e.t("flag-bl"),"flag-bm":$e.t("flag-bm"),"flag-bn":$e.t("flag-bn"),"flag-bo":$e.t("flag-bo"),"flag-bq":$e.t("flag-bq"),"flag-br":$e.t("flag-br"),"flag-bs":$e.t("flag-bs"),"flag-bt":$e.t("flag-bt"),"flag-bv":$e.t("flag-bv"),"flag-bw":$e.t("flag-bw"),"flag-by":$e.t("flag-by"),"flag-bz":$e.t("flag-bz"),"flag-ca":$e.t("flag-ca"),"flag-cc":$e.t("flag-cc"),"flag-cd":$e.t("flag-cd"),"flag-cf":$e.t("flag-cf"),"flag-cg":$e.t("flag-cg"),"flag-ch":$e.t("flag-ch"),"flag-ci":$e.t("flag-ci"),"flag-ck":$e.t("flag-ck"),"flag-cl":$e.t("flag-cl"),"flag-cm":$e.t("flag-cm"),"flag-cn":$e.t("flag-cn"),"flag-co":$e.t("flag-co"),"flag-cp":$e.t("flag-cp"),"flag-cr":$e.t("flag-cr"),"flag-cu":$e.t("flag-cu"),"flag-cv":$e.t("flag-cv"),"flag-cw":$e.t("flag-cw"),"flag-cx":$e.t("flag-cx"),"flag-cy":$e.t("flag-cy"),"flag-cz":$e.t("flag-cz"),"flag-de":$e.t("flag-de"),"flag-dg":$e.t("flag-dg"),"flag-dj":$e.t("flag-dj"),"flag-dk":$e.t("flag-dk"),"flag-dm":$e.t("flag-dm"),"flag-do":$e.t("flag-do"),"flag-dz":$e.t("flag-dz"),"flag-ea":$e.t("flag-ea"),"flag-ec":$e.t("flag-ec"),"flag-ee":$e.t("flag-ee"),"flag-eg":$e.t("flag-eg"),"flag-eh":$e.t("flag-eh"),"flag-england":$e.t("flag-england"),"flag-er":$e.t("flag-er"),"flag-es":$e.t("flag-es"),"flag-et":$e.t("flag-et"),"flag-eu":$e.t("flag-eu"),"flag-fi":$e.t("flag-fi"),"flag-fj":$e.t("flag-fj"),"flag-fk":$e.t("flag-fk"),"flag-fm":$e.t("flag-fm"),"flag-fo":$e.t("flag-fo"),"flag-fr":$e.t("flag-fr"),"flag-ga":$e.t("flag-ga"),"flag-gb":$e.t("flag-gb"),"flag-gd":$e.t("flag-gd"),"flag-ge":$e.t("flag-ge"),"flag-gf":$e.t("flag-gf"),"flag-gg":$e.t("flag-gg"),"flag-gh":$e.t("flag-gh"),"flag-gi":$e.t("flag-gi"),"flag-gl":$e.t("flag-gl"),"flag-gm":$e.t("flag-gm"),"flag-gn":$e.t("flag-gn"),"flag-gp":$e.t("flag-gp"),"flag-gq":$e.t("flag-gq"),"flag-gr":$e.t("flag-gr"),"flag-gs":$e.t("flag-gs"),"flag-gt":$e.t("flag-gt"),"flag-gu":$e.t("flag-gu"),"flag-gw":$e.t("flag-gw"),"flag-gy":$e.t("flag-gy"),"flag-hk":$e.t("flag-hk"),"flag-hm":$e.t("flag-hm"),"flag-hn":$e.t("flag-hn"),"flag-hr":$e.t("flag-hr"),"flag-ht":$e.t("flag-ht"),"flag-hu":$e.t("flag-hu"),"flag-ic":$e.t("flag-ic"),"flag-id":$e.t("flag-id"),"flag-ie":$e.t("flag-ie"),"flag-il":$e.t("flag-il"),"flag-im":$e.t("flag-im"),"flag-in":$e.t("flag-in"),"flag-io":$e.t("flag-io"),"flag-iq":$e.t("flag-iq"),"flag-ir":$e.t("flag-ir"),"flag-is":$e.t("flag-is"),"flag-it":$e.t("flag-it"),"flag-je":$e.t("flag-je"),"flag-jm":$e.t("flag-jm"),"flag-jo":$e.t("flag-jo"),"flag-jp":$e.t("flag-jp"),"flag-ke":$e.t("flag-ke"),"flag-kg":$e.t("flag-kg"),"flag-kh":$e.t("flag-kh"),"flag-ki":$e.t("flag-ki"),"flag-km":$e.t("flag-km"),"flag-kn":$e.t("flag-kn"),"flag-kp":$e.t("flag-kp"),"flag-kr":$e.t("flag-kr"),"flag-kw":$e.t("flag-kw"),"flag-ky":$e.t("flag-ky"),"flag-kz":$e.t("flag-kz"),"flag-la":$e.t("flag-la"),"flag-lb":$e.t("flag-lb"),"flag-lc":$e.t("flag-lc"),"flag-li":$e.t("flag-li"),"flag-lk":$e.t("flag-lk"),"flag-lr":$e.t("flag-lr"),"flag-ls":$e.t("flag-ls"),"flag-lt":$e.t("flag-lt"),"flag-lu":$e.t("flag-lu"),"flag-lv":$e.t("flag-lv"),"flag-ly":$e.t("flag-ly"),"flag-ma":$e.t("flag-ma"),"flag-mc":$e.t("flag-mc"),"flag-md":$e.t("flag-md"),"flag-me":$e.t("flag-me"),"flag-mf":$e.t("flag-mf"),"flag-mg":$e.t("flag-mg"),"flag-mh":$e.t("flag-mh"),"flag-mk":$e.t("flag-mk"),"flag-ml":$e.t("flag-ml"),"flag-mm":$e.t("flag-mm"),"flag-mn":$e.t("flag-mn"),"flag-mo":$e.t("flag-mo"),"flag-mp":$e.t("flag-mp"),"flag-mq":$e.t("flag-mq"),"flag-mr":$e.t("flag-mr"),"flag-ms":$e.t("flag-ms"),"flag-mt":$e.t("flag-mt"),"flag-mu":$e.t("flag-mu"),"flag-mv":$e.t("flag-mv"),"flag-mw":$e.t("flag-mw"),"flag-mx":$e.t("flag-mx"),"flag-my":$e.t("flag-my"),"flag-mz":$e.t("flag-mz"),"flag-na":$e.t("flag-na"),"flag-nc":$e.t("flag-nc"),"flag-ne":$e.t("flag-ne"),"flag-nf":$e.t("flag-nf"),"flag-ng":$e.t("flag-ng"),"flag-ni":$e.t("flag-ni"),"flag-nl":$e.t("flag-nl"),"flag-no":$e.t("flag-no"),"flag-np":$e.t("flag-np"),"flag-nr":$e.t("flag-nr"),"flag-nu":$e.t("flag-nu"),"flag-nz":$e.t("flag-nz"),"flag-om":$e.t("flag-om"),"flag-pa":$e.t("flag-pa"),"flag-pe":$e.t("flag-pe"),"flag-pf":$e.t("flag-pf"),"flag-pg":$e.t("flag-pg"),"flag-ph":$e.t("flag-ph"),"flag-pk":$e.t("flag-pk"),"flag-pl":$e.t("flag-pl"),"flag-pm":$e.t("flag-pm"),"flag-pn":$e.t("flag-pn"),"flag-pr":$e.t("flag-pr"),"flag-ps":$e.t("flag-ps"),"flag-pt":$e.t("flag-pt"),"flag-pw":$e.t("flag-pw"),"flag-py":$e.t("flag-py"),"flag-qa":$e.t("flag-qa"),"flag-re":$e.t("flag-re"),"flag-ro":$e.t("flag-ro"),"flag-rs":$e.t("flag-rs"),"flag-ru":$e.t("flag-ru"),"flag-rw":$e.t("flag-rw"),"flag-sa":$e.t("flag-sa"),"flag-sb":$e.t("flag-sb"),"flag-sc":$e.t("flag-sc"),"flag-scotland":$e.t("flag-scotland"),"flag-sd":$e.t("flag-sd"),"flag-se":$e.t("flag-se"),"flag-sg":$e.t("flag-sg"),"flag-sh":$e.t("flag-sh"),"flag-si":$e.t("flag-si"),"flag-sj":$e.t("flag-sj"),"flag-sk":$e.t("flag-sk"),"flag-sl":$e.t("flag-sl"),"flag-sm":$e.t("flag-sm"),"flag-sn":$e.t("flag-sn"),"flag-so":$e.t("flag-so"),"flag-sr":$e.t("flag-sr"),"flag-ss":$e.t("flag-ss"),"flag-st":$e.t("flag-st"),"flag-sv":$e.t("flag-sv"),"flag-sx":$e.t("flag-sx"),"flag-sy":$e.t("flag-sy"),"flag-sz":$e.t("flag-sz"),"flag-ta":$e.t("flag-ta"),"flag-tc":$e.t("flag-tc"),"flag-td":$e.t("flag-td"),"flag-tf":$e.t("flag-tf"),"flag-tg":$e.t("flag-tg"),"flag-th":$e.t("flag-th"),"flag-tj":$e.t("flag-tj"),"flag-tk":$e.t("flag-tk"),"flag-tl":$e.t("flag-tl"),"flag-tm":$e.t("flag-tm"),"flag-tn":$e.t("flag-tn"),"flag-to":$e.t("flag-to"),"flag-tr":$e.t("flag-tr"),"flag-tt":$e.t("flag-tt"),"flag-tv":$e.t("flag-tv"),"flag-tw":$e.t("flag-tw"),"flag-tz":$e.t("flag-tz"),"flag-ua":$e.t("flag-ua"),"flag-ug":$e.t("flag-ug"),"flag-um":$e.t("flag-um"),"flag-un":$e.t("flag-un"),"flag-us":$e.t("flag-us"),"flag-uy":$e.t("flag-uy"),"flag-uz":$e.t("flag-uz"),"flag-va":$e.t("flag-va"),"flag-vc":$e.t("flag-vc"),"flag-ve":$e.t("flag-ve"),"flag-vg":$e.t("flag-vg"),"flag-vi":$e.t("flag-vi"),"flag-vn":$e.t("flag-vn"),"flag-vu":$e.t("flag-vu"),"flag-wales":$e.t("flag-wales"),"flag-wf":$e.t("flag-wf"),"flag-ws":$e.t("flag-ws"),"flag-xk":$e.t("flag-xk"),"flag-ye":$e.t("flag-ye"),"flag-yt":$e.t("flag-yt"),"flag-za":$e.t("flag-za"),"flag-zm":$e.t("flag-zm"),"flag-zw":$e.t("flag-zw"),flags:$e.t("flags"),flashlight:$e.t("flashlight"),fleur_de_lis:$e.t("fleur_de_lis"),flipper:$e.t("flipper"),floppy_disk:$e.t("floppy_disk"),flower_playing_cards:$e.t("flower_playing_cards"),flushed:$e.t("flushed"),flying_saucer:$e.t("flying_saucer"),fog:$e.t("fog"),foggy:$e.t("foggy"),football:$e.t("football"),footprints:$e.t("footprints"),fork_and_knife:$e.t("fork_and_knife"),fortune_cookie:$e.t("fortune_cookie"),fountain:$e.t("fountain"),four:$e.t("four"),four_leaf_clover:$e.t("four_leaf_clover"),fox_face:$e.t("fox_face"),fr:$e.t("fr"),frame_with_picture:$e.t("frame_with_picture"),free:$e.t("free"),fried_egg:$e.t("fried_egg"),fried_shrimp:$e.t("fried_shrimp"),fries:$e.t("fries"),frog:$e.t("frog"),frowning:$e.t("frowning"),fuelpump:$e.t("fuelpump"),full_moon:$e.t("full_moon"),full_moon_with_face:$e.t("full_moon_with_face"),funeral_urn:$e.t("funeral_urn"),game_die:$e.t("game_die"),gb:$e.t("gb"),gear:$e.t("gear"),gem:$e.t("gem"),gemini:$e.t("gemini"),genie:$e.t("genie"),ghost:$e.t("ghost"),gift:$e.t("gift"),gift_heart:$e.t("gift_heart"),giraffe_face:$e.t("giraffe_face"),girl:$e.t("girl"),glass_of_milk:$e.t("glass_of_milk"),glitch_crab:$e.t("glitch_crab"),globe_with_meridians:$e.t("globe_with_meridians"),gloves:$e.t("gloves"),goal_net:$e.t("goal_net"),goat:$e.t("goat"),golf:$e.t("golf"),golfer:$e.t("golfer"),gorilla:$e.t("gorilla"),grapes:$e.t("grapes"),green_apple:$e.t("green_apple"),green_book:$e.t("green_book"),green_heart:$e.t("green_heart"),green_salad:$e.t("green_salad"),grey_exclamation:$e.t("grey_exclamation"),grey_question:$e.t("grey_question"),grimacing:$e.t("grimacing"),grin:$e.t("grin"),grinning:$e.t("grinning"),grinning_face_with_one_large_and_one_small_eye:$e.t("grinning_face_with_one_large_and_one_small_eye"),grinning_face_with_star_eyes:$e.t("grinning_face_with_star_eyes"),guardsman:$e.t("guardsman"),guitar:$e.t("guitar"),gun:$e.t("gun"),haircut:$e.t("haircut"),hamburger:$e.t("hamburger"),hammer:$e.t("hammer"),hammer_and_pick:$e.t("hammer_and_pick"),hammer_and_wrench:$e.t("hammer_and_wrench"),hamster:$e.t("hamster"),hand:$e.t("hand"),hand_with_index_and_middle_fingers_crossed:$e.t("hand_with_index_and_middle_fingers_crossed"),handbag:$e.t("handbag"),handball:$e.t("handball"),handshake:$e.t("handshake"),hankey:$e.t("hankey"),hash:$e.t("hash"),hatched_chick:$e.t("hatched_chick"),hatching_chick:$e.t("hatching_chick"),headphones:$e.t("headphones"),hear_no_evil:$e.t("hear_no_evil"),heart:$e.t("heart"),heart_decoration:$e.t("heart_decoration"),heart_eyes:$e.t("heart_eyes"),heart_eyes_cat:$e.t("heart_eyes_cat"),heartbeat:$e.t("heartbeat"),heartpulse:$e.t("heartpulse"),hearts:$e.t("hearts"),heavy_check_mark:$e.t("heavy_check_mark"),heavy_division_sign:$e.t("heavy_division_sign"),heavy_dollar_sign:$e.t("heavy_dollar_sign"),heavy_exclamation_mark:$e.t("heavy_exclamation_mark"),heavy_heart_exclamation_mark_ornament:$e.t("heavy_heart_exclamation_mark_ornament"),heavy_minus_sign:$e.t("heavy_minus_sign"),heavy_multiplication_x:$e.t("heavy_multiplication_x"),heavy_plus_sign:$e.t("heavy_plus_sign"),hedgehog:$e.t("hedgehog"),helicopter:$e.t("helicopter"),helmet_with_white_cross:$e.t("helmet_with_white_cross"),herb:$e.t("herb"),hibiscus:$e.t("hibiscus"),high_brightness:$e.t("high_brightness"),high_heel:$e.t("high_heel"),hocho:$e.t("hocho"),hole:$e.t("hole"),honey_pot:$e.t("honey_pot"),honeybee:$e.t("honeybee"),horse:$e.t("horse"),horse_racing:$e.t("horse_racing"),hospital:$e.t("hospital"),hot_pepper:$e.t("hot_pepper"),hotdog:$e.t("hotdog"),hotel:$e.t("hotel"),hotsprings:$e.t("hotsprings"),hourglass:$e.t("hourglass"),hourglass_flowing_sand:$e.t("hourglass_flowing_sand"),house:$e.t("house"),house_buildings:$e.t("house_buildings"),house_with_garden:$e.t("house_with_garden"),hugging_face:$e.t("hugging_face"),hushed:$e.t("hushed"),i_love_you_hand_sign:$e.t("i_love_you_hand_sign"),ice_cream:$e.t("ice_cream"),ice_hockey_stick_and_puck:$e.t("ice_hockey_stick_and_puck"),ice_skate:$e.t("ice_skate"),icecream:$e.t("icecream"),id:$e.t("id"),ideograph_advantage:$e.t("ideograph_advantage"),imp:$e.t("imp"),inbox_tray:$e.t("inbox_tray"),incoming_envelope:$e.t("incoming_envelope"),information_desk_person:$e.t("information_desk_person"),information_source:$e.t("information_source"),innocent:$e.t("innocent"),interrobang:$e.t("interrobang"),iphone:$e.t("iphone"),it:$e.t("it"),izakaya_lantern:$e.t("izakaya_lantern"),jack_o_lantern:$e.t("jack_o_lantern"),japan:$e.t("japan"),japanese_castle:$e.t("japanese_castle"),japanese_goblin:$e.t("japanese_goblin"),japanese_ogre:$e.t("japanese_ogre"),jeans:$e.t("jeans"),joy:$e.t("joy"),joy_cat:$e.t("joy_cat"),joystick:$e.t("joystick"),jp:$e.t("jp"),juggling:$e.t("juggling"),kaaba:$e.t("kaaba"),key:$e.t("key"),keyboard:$e.t("keyboard"),keycap_star:$e.t("keycap_star"),keycap_ten:$e.t("keycap_ten"),kimono:$e.t("kimono"),kiss:$e.t("kiss"),kissing:$e.t("kissing"),kissing_cat:$e.t("kissing_cat"),kissing_closed_eyes:$e.t("kissing_closed_eyes"),kissing_heart:$e.t("kissing_heart"),kissing_smiling_eyes:$e.t("kissing_smiling_eyes"),kiwifruit:$e.t("kiwifruit"),knife:$e.t("knife"),knife_fork_plate:$e.t("knife_fork_plate"),koala:$e.t("koala"),koko:$e.t("koko"),kr:$e.t("kr"),label:$e.t("label"),lantern:$e.t("lantern"),large_blue_circle:$e.t("large_blue_circle"),large_blue_diamond:$e.t("large_blue_diamond"),large_orange_diamond:$e.t("large_orange_diamond"),last_quarter_moon:$e.t("last_quarter_moon"),last_quarter_moon_with_face:$e.t("last_quarter_moon_with_face"),latin_cross:$e.t("latin_cross"),laughing:$e.t("laughing"),leaves:$e.t("leaves"),ledger:$e.t("ledger"),"left-facing_fist":$e.t("left-facing_fist"),left_luggage:$e.t("left_luggage"),left_right_arrow:$e.t("left_right_arrow"),left_speech_bubble:$e.t("left_speech_bubble"),leftwards_arrow_with_hook:$e.t("leftwards_arrow_with_hook"),lemon:$e.t("lemon"),leo:$e.t("leo"),leopard:$e.t("leopard"),level_slider:$e.t("level_slider"),libra:$e.t("libra"),light_rail:$e.t("light_rail"),lightning:$e.t("lightning"),lightning_cloud:$e.t("lightning_cloud"),link:$e.t("link"),linked_paperclips:$e.t("linked_paperclips"),lion_face:$e.t("lion_face"),lips:$e.t("lips"),lipstick:$e.t("lipstick"),lizard:$e.t("lizard"),lock:$e.t("lock"),lock_with_ink_pen:$e.t("lock_with_ink_pen"),lollipop:$e.t("lollipop"),loop:$e.t("loop"),loud_sound:$e.t("loud_sound"),loudspeaker:$e.t("loudspeaker"),love_hotel:$e.t("love_hotel"),love_letter:$e.t("love_letter"),low_brightness:$e.t("low_brightness"),lower_left_ballpoint_pen:$e.t("lower_left_ballpoint_pen"),lower_left_crayon:$e.t("lower_left_crayon"),lower_left_fountain_pen:$e.t("lower_left_fountain_pen"),lower_left_paintbrush:$e.t("lower_left_paintbrush"),lying_face:$e.t("lying_face"),m:$e.t("m"),mag:$e.t("mag"),mag_right:$e.t("mag_right"),mage:$e.t("mage"),mahjong:$e.t("mahjong"),mailbox:$e.t("mailbox"),mailbox_closed:$e.t("mailbox_closed"),mailbox_with_mail:$e.t("mailbox_with_mail"),mailbox_with_no_mail:$e.t("mailbox_with_no_mail"),"male-artist":$e.t("male-artist"),"male-astronaut":$e.t("male-astronaut"),"male-construction-worker":$e.t("male-construction-worker"),"male-cook":$e.t("male-cook"),"male-detective":$e.t("male-detective"),"male-doctor":$e.t("male-doctor"),"male-factory-worker":$e.t("male-factory-worker"),"male-farmer":$e.t("male-farmer"),"male-firefighter":$e.t("male-firefighter"),"male-guard":$e.t("male-guard"),"male-judge":$e.t("male-judge"),"male-mechanic":$e.t("male-mechanic"),"male-office-worker":$e.t("male-office-worker"),"male-pilot":$e.t("male-pilot"),"male-police-officer":$e.t("male-police-officer"),"male-scientist":$e.t("male-scientist"),"male-singer":$e.t("male-singer"),"male-student":$e.t("male-student"),"male-teacher":$e.t("male-teacher"),"male-technologist":$e.t("male-technologist"),male_elf:$e.t("male_elf"),male_fairy:$e.t("male_fairy"),male_genie:$e.t("male_genie"),male_mage:$e.t("male_mage"),male_sign:$e.t("male_sign"),male_vampire:$e.t("male_vampire"),male_zombie:$e.t("male_zombie"),man:$e.t("man"),"man-biking":$e.t("man-biking"),"man-bouncing-ball":$e.t("man-bouncing-ball"),"man-bowing":$e.t("man-bowing"),"man-boy":$e.t("man-boy"),"man-boy-boy":$e.t("man-boy-boy"),"man-cartwheeling":$e.t("man-cartwheeling"),"man-facepalming":$e.t("man-facepalming"),"man-frowning":$e.t("man-frowning"),"man-gesturing-no":$e.t("man-gesturing-no"),"man-gesturing-ok":$e.t("man-gesturing-ok"),"man-getting-haircut":$e.t("man-getting-haircut"),"man-getting-massage":$e.t("man-getting-massage"),"man-girl":$e.t("man-girl"),"man-girl-boy":$e.t("man-girl-boy"),"man-girl-girl":$e.t("man-girl-girl"),"man-golfing":$e.t("man-golfing"),"man-heart-man":$e.t("man-heart-man"),"man-juggling":$e.t("man-juggling"),"man-kiss-man":$e.t("man-kiss-man"),"man-lifting-weights":$e.t("man-lifting-weights"),"man-man-boy":$e.t("man-man-boy"),"man-man-boy-boy":$e.t("man-man-boy-boy"),"man-man-girl":$e.t("man-man-girl"),"man-man-girl-boy":$e.t("man-man-girl-boy"),"man-man-girl-girl":$e.t("man-man-girl-girl"),"man-mountain-biking":$e.t("man-mountain-biking"),"man-playing-handball":$e.t("man-playing-handball"),"man-playing-water-polo":$e.t("man-playing-water-polo"),"man-pouting":$e.t("man-pouting"),"man-raising-hand":$e.t("man-raising-hand"),"man-rowing-boat":$e.t("man-rowing-boat"),"man-running":$e.t("man-running"),"man-shrugging":$e.t("man-shrugging"),"man-surfing":$e.t("man-surfing"),"man-swimming":$e.t("man-swimming"),"man-tipping-hand":$e.t("man-tipping-hand"),"man-walking":$e.t("man-walking"),"man-wearing-turban":$e.t("man-wearing-turban"),"man-with-bunny-ears-partying":$e.t("man-with-bunny-ears-partying"),"man-woman-boy":$e.t("man-woman-boy"),"man-woman-boy-boy":$e.t("man-woman-boy-boy"),"man-woman-girl":$e.t("man-woman-girl"),"man-woman-girl-boy":$e.t("man-woman-girl-boy"),"man-woman-girl-girl":$e.t("man-woman-girl-girl"),"man-wrestling":$e.t("man-wrestling"),man_and_woman_holding_hands:$e.t("man_and_woman_holding_hands"),man_climbing:$e.t("man_climbing"),man_dancing:$e.t("man_dancing"),man_in_business_suit_levitating:$e.t("man_in_business_suit_levitating"),man_in_lotus_position:$e.t("man_in_lotus_position"),man_in_steamy_room:$e.t("man_in_steamy_room"),man_in_tuxedo:$e.t("man_in_tuxedo"),man_with_gua_pi_mao:$e.t("man_with_gua_pi_mao"),man_with_turban:$e.t("man_with_turban"),mans_shoe:$e.t("mans_shoe"),mantelpiece_clock:$e.t("mantelpiece_clock"),maple_leaf:$e.t("maple_leaf"),martial_arts_uniform:$e.t("martial_arts_uniform"),mask:$e.t("mask"),massage:$e.t("massage"),meat_on_bone:$e.t("meat_on_bone"),medal:$e.t("medal"),medical_symbol:$e.t("medical_symbol"),mega:$e.t("mega"),melon:$e.t("melon"),memo:$e.t("memo"),menorah_with_nine_branches:$e.t("menorah_with_nine_branches"),mens:$e.t("mens"),mermaid:$e.t("mermaid"),merman:$e.t("merman"),merperson:$e.t("merperson"),metro:$e.t("metro"),microphone:$e.t("microphone"),microscope:$e.t("microscope"),middle_finger:$e.t("middle_finger"),milky_way:$e.t("milky_way"),minibus:$e.t("minibus"),minidisc:$e.t("minidisc"),mobile_phone_off:$e.t("mobile_phone_off"),money_mouth_face:$e.t("money_mouth_face"),money_with_wings:$e.t("money_with_wings"),moneybag:$e.t("moneybag"),monkey:$e.t("monkey"),monkey_face:$e.t("monkey_face"),monorail:$e.t("monorail"),moon:$e.t("moon"),mortar_board:$e.t("mortar_board"),mosque:$e.t("mosque"),mostly_sunny:$e.t("mostly_sunny"),mother_christmas:$e.t("mother_christmas"),motor_boat:$e.t("motor_boat"),motor_scooter:$e.t("motor_scooter"),motorway:$e.t("motorway"),mount_fuji:$e.t("mount_fuji"),mountain:$e.t("mountain"),mountain_bicyclist:$e.t("mountain_bicyclist"),mountain_cableway:$e.t("mountain_cableway"),mountain_railway:$e.t("mountain_railway"),mouse:$e.t("mouse"),mouse2:$e.t("mouse2"),movie_camera:$e.t("movie_camera"),moyai:$e.t("moyai"),mrs_claus:$e.t("mrs_claus"),muscle:$e.t("muscle"),mushroom:$e.t("mushroom"),musical_keyboard:$e.t("musical_keyboard"),musical_note:$e.t("musical_note"),musical_score:$e.t("musical_score"),mute:$e.t("mute"),nail_care:$e.t("nail_care"),name_badge:$e.t("name_badge"),national_park:$e.t("national_park"),nauseated_face:$e.t("nauseated_face"),necktie:$e.t("necktie"),negative_squared_cross_mark:$e.t("negative_squared_cross_mark"),nerd_face:$e.t("nerd_face"),neutral_face:$e.t("neutral_face"),new:$e.t("new"),new_moon:$e.t("new_moon"),new_moon_with_face:$e.t("new_moon_with_face"),newspaper:$e.t("newspaper"),ng:$e.t("ng"),night_with_stars:$e.t("night_with_stars"),nine:$e.t("nine"),no_bell:$e.t("no_bell"),no_bicycles:$e.t("no_bicycles"),no_entry:$e.t("no_entry"),no_entry_sign:$e.t("no_entry_sign"),no_good:$e.t("no_good"),no_mobile_phones:$e.t("no_mobile_phones"),no_mouth:$e.t("no_mouth"),no_pedestrians:$e.t("no_pedestrians"),no_smoking:$e.t("no_smoking"),"non-potable_water":$e.t("non-potable_water"),nose:$e.t("nose"),notebook:$e.t("notebook"),notebook_with_decorative_cover:$e.t("notebook_with_decorative_cover"),notes:$e.t("notes"),nut_and_bolt:$e.t("nut_and_bolt"),o:$e.t("o"),o2:$e.t("o2"),ocean:$e.t("ocean"),octagonal_sign:$e.t("octagonal_sign"),octopus:$e.t("octopus"),oden:$e.t("oden"),office:$e.t("office"),oil_drum:$e.t("oil_drum"),ok:$e.t("ok"),ok_hand:$e.t("ok_hand"),ok_woman:$e.t("ok_woman"),old_key:$e.t("old_key"),older_adult:$e.t("older_adult"),older_man:$e.t("older_man"),older_woman:$e.t("older_woman"),om_symbol:$e.t("om_symbol"),on:$e.t("on"),oncoming_automobile:$e.t("oncoming_automobile"),oncoming_bus:$e.t("oncoming_bus"),oncoming_police_car:$e.t("oncoming_police_car"),oncoming_taxi:$e.t("oncoming_taxi"),one:$e.t("one"),open_book:$e.t("open_book"),open_file_folder:$e.t("open_file_folder"),open_hands:$e.t("open_hands"),open_mouth:$e.t("open_mouth"),ophiuchus:$e.t("ophiuchus"),orange_book:$e.t("orange_book"),orange_heart:$e.t("orange_heart"),orthodox_cross:$e.t("orthodox_cross"),outbox_tray:$e.t("outbox_tray"),owl:$e.t("owl"),ox:$e.t("ox"),package:$e.t("package"),page_facing_up:$e.t("page_facing_up"),page_with_curl:$e.t("page_with_curl"),pager:$e.t("pager"),palm_tree:$e.t("palm_tree"),palms_up_together:$e.t("palms_up_together"),pancakes:$e.t("pancakes"),panda_face:$e.t("panda_face"),paperclip:$e.t("paperclip"),parking:$e.t("parking"),part_alternation_mark:$e.t("part_alternation_mark"),partly_sunny:$e.t("partly_sunny"),partly_sunny_rain:$e.t("partly_sunny_rain"),passenger_ship:$e.t("passenger_ship"),passport_control:$e.t("passport_control"),paw_prints:$e.t("paw_prints"),peace_symbol:$e.t("peace_symbol"),peach:$e.t("peach"),peanuts:$e.t("peanuts"),pear:$e.t("pear"),pencil:$e.t("pencil"),pencil2:$e.t("pencil2"),penguin:$e.t("penguin"),pensive:$e.t("pensive"),performing_arts:$e.t("performing_arts"),persevere:$e.t("persevere"),person_climbing:$e.t("person_climbing"),person_doing_cartwheel:$e.t("person_doing_cartwheel"),person_frowning:$e.t("person_frowning"),person_in_lotus_position:$e.t("person_in_lotus_position"),person_in_steamy_room:$e.t("person_in_steamy_room"),person_with_ball:$e.t("person_with_ball"),person_with_blond_hair:$e.t("person_with_blond_hair"),person_with_headscarf:$e.t("person_with_headscarf"),person_with_pouting_face:$e.t("person_with_pouting_face"),phone:$e.t("phone"),pick:$e.t("pick"),pie:$e.t("pie"),pig:$e.t("pig"),pig2:$e.t("pig2"),pig_nose:$e.t("pig_nose"),piggy:$e.t("piggy"),pill:$e.t("pill"),pineapple:$e.t("pineapple"),pisces:$e.t("pisces"),pizza:$e.t("pizza"),place_of_worship:$e.t("place_of_worship"),point_down:$e.t("point_down"),point_left:$e.t("point_left"),point_right:$e.t("point_right"),point_up:$e.t("point_up"),point_up_2:$e.t("point_up_2"),police_car:$e.t("police_car"),poodle:$e.t("poodle"),poop:$e.t("poop"),popcorn:$e.t("popcorn"),post_office:$e.t("post_office"),postal_horn:$e.t("postal_horn"),postbox:$e.t("postbox"),potable_water:$e.t("potable_water"),potato:$e.t("potato"),pouch:$e.t("pouch"),poultry_leg:$e.t("poultry_leg"),pound:$e.t("pound"),pouting_cat:$e.t("pouting_cat"),pray:$e.t("pray"),prayer_beads:$e.t("prayer_beads"),pregnant_woman:$e.t("pregnant_woman"),pretzel:$e.t("pretzel"),pride:$e.t("pride"),prince:$e.t("prince"),princess:$e.t("princess"),printer:$e.t("printer"),punch:$e.t("punch"),purple_heart:$e.t("purple_heart"),purse:$e.t("purse"),pushpin:$e.t("pushpin"),put_litter_in_its_place:$e.t("put_litter_in_its_place"),question:$e.t("question"),rabbit:$e.t("rabbit"),rabbit2:$e.t("rabbit2"),racehorse:$e.t("racehorse"),racing_car:$e.t("racing_car"),racing_motorcycle:$e.t("racing_motorcycle"),radio:$e.t("radio"),radio_button:$e.t("radio_button"),radioactive_sign:$e.t("radioactive_sign"),rage:$e.t("rage"),railway_car:$e.t("railway_car"),railway_track:$e.t("railway_track"),rain_cloud:$e.t("rain_cloud"),rainbow:$e.t("rainbow"),"rainbow-flag":$e.t("rainbow-flag"),raised_back_of_hand:$e.t("raised_back_of_hand"),raised_hand:$e.t("raised_hand"),raised_hand_with_fingers_splayed:$e.t("raised_hand_with_fingers_splayed"),raised_hands:$e.t("raised_hands"),raising_hand:$e.t("raising_hand"),ram:$e.t("ram"),ramen:$e.t("ramen"),rat:$e.t("rat"),recycle:$e.t("recycle"),red_car:$e.t("red_car"),red_circle:$e.t("red_circle"),registered:$e.t("registered"),relaxed:$e.t("relaxed"),relieved:$e.t("relieved"),reminder_ribbon:$e.t("reminder_ribbon"),repeat:$e.t("repeat"),repeat_one:$e.t("repeat_one"),restroom:$e.t("restroom"),reversed_hand_with_middle_finger_extended:$e.t("reversed_hand_with_middle_finger_extended"),revolving_hearts:$e.t("revolving_hearts"),rewind:$e.t("rewind"),rhinoceros:$e.t("rhinoceros"),ribbon:$e.t("ribbon"),rice:$e.t("rice"),rice_ball:$e.t("rice_ball"),rice_cracker:$e.t("rice_cracker"),rice_scene:$e.t("rice_scene"),"right-facing_fist":$e.t("right-facing_fist"),right_anger_bubble:$e.t("right_anger_bubble"),ring:$e.t("ring"),robot_face:$e.t("robot_face"),rocket:$e.t("rocket"),rolled_up_newspaper:$e.t("rolled_up_newspaper"),roller_coaster:$e.t("roller_coaster"),rolling_on_the_floor_laughing:$e.t("rolling_on_the_floor_laughing"),rooster:$e.t("rooster"),rose:$e.t("rose"),rosette:$e.t("rosette"),rotating_light:$e.t("rotating_light"),round_pushpin:$e.t("round_pushpin"),rowboat:$e.t("rowboat"),ru:$e.t("ru"),rugby_football:$e.t("rugby_football"),runner:$e.t("runner"),running:$e.t("running"),running_shirt_with_sash:$e.t("running_shirt_with_sash"),sa:$e.t("sa"),sagittarius:$e.t("sagittarius"),sailboat:$e.t("sailboat"),sake:$e.t("sake"),sandal:$e.t("sandal"),sandwich:$e.t("sandwich"),santa:$e.t("santa"),satellite:$e.t("satellite"),satellite_antenna:$e.t("satellite_antenna"),satisfied:$e.t("satisfied"),sauropod:$e.t("sauropod"),saxophone:$e.t("saxophone"),scales:$e.t("scales"),scarf:$e.t("scarf"),school:$e.t("school"),school_satchel:$e.t("school_satchel"),scissors:$e.t("scissors"),scooter:$e.t("scooter"),scorpion:$e.t("scorpion"),scorpius:$e.t("scorpius"),scream:$e.t("scream"),scream_cat:$e.t("scream_cat"),scroll:$e.t("scroll"),seat:$e.t("seat"),second_place_medal:$e.t("second_place_medal"),secret:$e.t("secret"),see_no_evil:$e.t("see_no_evil"),seedling:$e.t("seedling"),selfie:$e.t("selfie"),serious_face_with_symbols_covering_mouth:$e.t("serious_face_with_symbols_covering_mouth"),seven:$e.t("seven"),shallow_pan_of_food:$e.t("shallow_pan_of_food"),shamrock:$e.t("shamrock"),shark:$e.t("shark"),shaved_ice:$e.t("shaved_ice"),sheep:$e.t("sheep"),shell:$e.t("shell"),shield:$e.t("shield"),shinto_shrine:$e.t("shinto_shrine"),ship:$e.t("ship"),shipit:$e.t("shipit"),shirt:$e.t("shirt"),shit:$e.t("shit"),shocked_face_with_exploding_head:$e.t("shocked_face_with_exploding_head"),shoe:$e.t("shoe"),shopping_bags:$e.t("shopping_bags"),shopping_trolley:$e.t("shopping_trolley"),shower:$e.t("shower"),shrimp:$e.t("shrimp"),shrug:$e.t("shrug"),shushing_face:$e.t("shushing_face"),sign_of_the_horns:$e.t("sign_of_the_horns"),signal_strength:$e.t("signal_strength"),simple_smile:$e.t("simple_smile"),six:$e.t("six"),six_pointed_star:$e.t("six_pointed_star"),ski:$e.t("ski"),skier:$e.t("skier"),"skin-tone-2":$e.t("skin-tone-2"),"skin-tone-3":$e.t("skin-tone-3"),"skin-tone-4":$e.t("skin-tone-4"),"skin-tone-5":$e.t("skin-tone-5"),"skin-tone-6":$e.t("skin-tone-6"),skull:$e.t("skull"),skull_and_crossbones:$e.t("skull_and_crossbones"),slack:$e.t("slack"),slack_call:$e.t("slack_call"),sled:$e.t("sled"),sleeping:$e.t("sleeping"),sleeping_accommodation:$e.t("sleeping_accommodation"),sleepy:$e.t("sleepy"),sleuth_or_spy:$e.t("sleuth_or_spy"),slightly_frowning_face:$e.t("slightly_frowning_face"),slightly_smiling_face:$e.t("slightly_smiling_face"),slot_machine:$e.t("slot_machine"),small_airplane:$e.t("small_airplane"),small_blue_diamond:$e.t("small_blue_diamond"),small_orange_diamond:$e.t("small_orange_diamond"),small_red_triangle:$e.t("small_red_triangle"),small_red_triangle_down:$e.t("small_red_triangle_down"),smile:$e.t("smile"),smile_cat:$e.t("smile_cat"),smiley:$e.t("smiley"),smiley_cat:$e.t("smiley_cat"),smiling_face_with_smiling_eyes_and_hand_covering_mouth:$e.t("smiling_face_with_smiling_eyes_and_hand_covering_mouth"),smiling_imp:$e.t("smiling_imp"),smirk:$e.t("smirk"),smirk_cat:$e.t("smirk_cat"),smoking:$e.t("smoking"),snail:$e.t("snail"),snake:$e.t("snake"),sneezing_face:$e.t("sneezing_face"),snow_capped_mountain:$e.t("snow_capped_mountain"),snow_cloud:$e.t("snow_cloud"),snowboarder:$e.t("snowboarder"),snowflake:$e.t("snowflake"),snowman:$e.t("snowman"),snowman_without_snow:$e.t("snowman_without_snow"),sob:$e.t("sob"),soccer:$e.t("soccer"),socks:$e.t("socks"),soon:$e.t("soon"),sos:$e.t("sos"),sound:$e.t("sound"),space_invader:$e.t("space_invader"),spades:$e.t("spades"),spaghetti:$e.t("spaghetti"),sparkle:$e.t("sparkle"),sparkler:$e.t("sparkler"),sparkles:$e.t("sparkles"),sparkling_heart:$e.t("sparkling_heart"),speak_no_evil:$e.t("speak_no_evil"),speaker:$e.t("speaker"),speaking_head_in_silhouette:$e.t("speaking_head_in_silhouette"),speech_balloon:$e.t("speech_balloon"),speedboat:$e.t("speedboat"),spider:$e.t("spider"),spider_web:$e.t("spider_web"),spiral_calendar_pad:$e.t("spiral_calendar_pad"),spiral_note_pad:$e.t("spiral_note_pad"),"spock-hand":$e.t("spock-hand"),spoon:$e.t("spoon"),sports_medal:$e.t("sports_medal"),squid:$e.t("squid"),squirrel:$e.t("squirrel"),stadium:$e.t("stadium"),staff_of_aesculapius:$e.t("staff_of_aesculapius"),star:$e.t("star"),"star-struck":$e.t("star-struck"),star2:$e.t("star2"),star_and_crescent:$e.t("star_and_crescent"),star_of_david:$e.t("star_of_david"),stars:$e.t("stars"),station:$e.t("station"),statue_of_liberty:$e.t("statue_of_liberty"),steam_locomotive:$e.t("steam_locomotive"),stew:$e.t("stew"),stopwatch:$e.t("stopwatch"),straight_ruler:$e.t("straight_ruler"),strawberry:$e.t("strawberry"),stuck_out_tongue:$e.t("stuck_out_tongue"),stuck_out_tongue_closed_eyes:$e.t("stuck_out_tongue_closed_eyes"),stuck_out_tongue_winking_eye:$e.t("stuck_out_tongue_winking_eye"),studio_microphone:$e.t("studio_microphone"),stuffed_flatbread:$e.t("stuffed_flatbread"),sun_behind_cloud:$e.t("sun_behind_cloud"),sun_behind_rain_cloud:$e.t("sun_behind_rain_cloud"),sun_small_cloud:$e.t("sun_small_cloud"),sun_with_face:$e.t("sun_with_face"),sunflower:$e.t("sunflower"),sunglasses:$e.t("sunglasses"),sunny:$e.t("sunny"),sunrise:$e.t("sunrise"),sunrise_over_mountains:$e.t("sunrise_over_mountains"),surfer:$e.t("surfer"),sushi:$e.t("sushi"),suspension_railway:$e.t("suspension_railway"),sweat:$e.t("sweat"),sweat_drops:$e.t("sweat_drops"),sweat_smile:$e.t("sweat_smile"),sweet_potato:$e.t("sweet_potato"),swimmer:$e.t("swimmer"),symbols:$e.t("symbols"),synagogue:$e.t("synagogue"),syringe:$e.t("syringe"),"t-rex":$e.t("t-rex"),table_tennis_paddle_and_ball:$e.t("table_tennis_paddle_and_ball"),taco:$e.t("taco"),tada:$e.t("tada"),takeout_box:$e.t("takeout_box"),tanabata_tree:$e.t("tanabata_tree"),tangerine:$e.t("tangerine"),taurus:$e.t("taurus"),taxi:$e.t("taxi"),tea:$e.t("tea"),telephone:$e.t("telephone"),telephone_receiver:$e.t("telephone_receiver"),telescope:$e.t("telescope"),tennis:$e.t("tennis"),tent:$e.t("tent"),the_horns:$e.t("the_horns"),thermometer:$e.t("thermometer"),thinking_face:$e.t("thinking_face"),third_place_medal:$e.t("third_place_medal"),thought_balloon:$e.t("thought_balloon"),three:$e.t("three"),three_button_mouse:$e.t("three_button_mouse"),thumbsdown:$e.t("thumbsdown"),thumbsup:$e.t("thumbsup"),thumbsup_all:$e.t("thumbsup_all"),thunder_cloud_and_rain:$e.t("thunder_cloud_and_rain"),ticket:$e.t("ticket"),tiger:$e.t("tiger"),tiger2:$e.t("tiger2"),timer_clock:$e.t("timer_clock"),tired_face:$e.t("tired_face"),tm:$e.t("tm"),toilet:$e.t("toilet"),tokyo_tower:$e.t("tokyo_tower"),tomato:$e.t("tomato"),tongue:$e.t("tongue"),top:$e.t("top"),tophat:$e.t("tophat"),tornado:$e.t("tornado"),tornado_cloud:$e.t("tornado_cloud"),trackball:$e.t("trackball"),tractor:$e.t("tractor"),traffic_light:$e.t("traffic_light"),train:$e.t("train"),train2:$e.t("train2"),tram:$e.t("tram"),triangular_flag_on_post:$e.t("triangular_flag_on_post"),triangular_ruler:$e.t("triangular_ruler"),trident:$e.t("trident"),triumph:$e.t("triumph"),trolleybus:$e.t("trolleybus"),trophy:$e.t("trophy"),tropical_drink:$e.t("tropical_drink"),tropical_fish:$e.t("tropical_fish"),truck:$e.t("truck"),trumpet:$e.t("trumpet"),tshirt:$e.t("tshirt"),tulip:$e.t("tulip"),tumbler_glass:$e.t("tumbler_glass"),turkey:$e.t("turkey"),turtle:$e.t("turtle"),tv:$e.t("tv"),twisted_rightwards_arrows:$e.t("twisted_rightwards_arrows"),two:$e.t("two"),two_hearts:$e.t("two_hearts"),two_men_holding_hands:$e.t("two_men_holding_hands"),two_women_holding_hands:$e.t("two_women_holding_hands"),u5272:$e.t("u5272"),u5408:$e.t("u5408"),u55b6:$e.t("u55b6"),u6307:$e.t("u6307"),u6708:$e.t("u6708"),u6709:$e.t("u6709"),u6e80:$e.t("u6e80"),u7121:$e.t("u7121"),u7533:$e.t("u7533"),u7981:$e.t("u7981"),u7a7a:$e.t("u7a7a"),uk:$e.t("uk"),umbrella:$e.t("umbrella"),umbrella_on_ground:$e.t("umbrella_on_ground"),umbrella_with_rain_drops:$e.t("umbrella_with_rain_drops"),unamused:$e.t("unamused"),underage:$e.t("underage"),unicorn_face:$e.t("unicorn_face"),unlock:$e.t("unlock"),up:$e.t("up"),upside_down_face:$e.t("upside_down_face"),us:$e.t("us"),v:$e.t("v"),vampire:$e.t("vampire"),vertical_traffic_light:$e.t("vertical_traffic_light"),vhs:$e.t("vhs"),vibration_mode:$e.t("vibration_mode"),video_camera:$e.t("video_camera"),video_game:$e.t("video_game"),violin:$e.t("violin"),virgo:$e.t("virgo"),volcano:$e.t("volcano"),volleyball:$e.t("volleyball"),vs:$e.t("vs"),walking:$e.t("walking"),waning_crescent_moon:$e.t("waning_crescent_moon"),waning_gibbous_moon:$e.t("waning_gibbous_moon"),warning:$e.t("warning"),wastebasket:$e.t("wastebasket"),watch:$e.t("watch"),water_buffalo:$e.t("water_buffalo"),water_polo:$e.t("water_polo"),watermelon:$e.t("watermelon"),wave:$e.t("wave"),waving_black_flag:$e.t("waving_black_flag"),waving_white_flag:$e.t("waving_white_flag"),wavy_dash:$e.t("wavy_dash"),waxing_crescent_moon:$e.t("waxing_crescent_moon"),waxing_gibbous_moon:$e.t("waxing_gibbous_moon"),wc:$e.t("wc"),weary:$e.t("weary"),wedding:$e.t("wedding"),weight_lifter:$e.t("weight_lifter"),whale:$e.t("whale"),whale2:$e.t("whale2"),wheel_of_dharma:$e.t("wheel_of_dharma"),wheelchair:$e.t("wheelchair"),white_check_mark:$e.t("white_check_mark"),white_circle:$e.t("white_circle"),white_flower:$e.t("white_flower"),white_frowning_face:$e.t("white_frowning_face"),white_large_square:$e.t("white_large_square"),white_medium_small_square:$e.t("white_medium_small_square"),white_medium_square:$e.t("white_medium_square"),white_small_square:$e.t("white_small_square"),white_square:$e.t("white_square"),white_square_button:$e.t("white_square_button"),wilted_flower:$e.t("wilted_flower"),wind_blowing_face:$e.t("wind_blowing_face"),wind_chime:$e.t("wind_chime"),wine_glass:$e.t("wine_glass"),wink:$e.t("wink"),wolf:$e.t("wolf"),woman:$e.t("woman"),"woman-biking":$e.t("woman-biking"),"woman-bouncing-ball":$e.t("woman-bouncing-ball"),"woman-bowing":$e.t("woman-bowing"),"woman-boy":$e.t("woman-boy"),"woman-boy-boy":$e.t("woman-boy-boy"),"woman-cartwheeling":$e.t("woman-cartwheeling"),"woman-facepalming":$e.t("woman-facepalming"),"woman-frowning":$e.t("woman-frowning"),"woman-gesturing-no":$e.t("woman-gesturing-no"),"woman-gesturing-ok":$e.t("woman-gesturing-ok"),"woman-getting-haircut":$e.t("woman-getting-haircut"),"woman-getting-massage":$e.t("woman-getting-massage"),"woman-girl":$e.t("woman-girl"),"woman-girl-boy":$e.t("woman-girl-boy"),"woman-girl-girl":$e.t("woman-girl-girl"),"woman-golfing":$e.t("woman-golfing"),"woman-heart-man":$e.t("woman-heart-man"),"woman-heart-woman":$e.t("woman-heart-woman"),"woman-juggling":$e.t("woman-juggling"),"woman-kiss-man":$e.t("woman-kiss-man"),"woman-kiss-woman":$e.t("woman-kiss-woman"),"woman-lifting-weights":$e.t("woman-lifting-weights"),"woman-mountain-biking":$e.t("woman-mountain-biking"),"woman-playing-handball":$e.t("woman-playing-handball"),"woman-playing-water-polo":$e.t("woman-playing-water-polo"),"woman-pouting":$e.t("woman-pouting"),"woman-raising-hand":$e.t("woman-raising-hand"),"woman-rowing-boat":$e.t("woman-rowing-boat"),"woman-running":$e.t("woman-running"),"woman-shrugging":$e.t("woman-shrugging"),"woman-surfing":$e.t("woman-surfing"),"woman-swimming":$e.t("woman-swimming"),"woman-tipping-hand":$e.t("woman-tipping-hand"),"woman-walking":$e.t("woman-walking"),"woman-wearing-turban":$e.t("woman-wearing-turban"),"woman-with-bunny-ears-partying":$e.t("woman-with-bunny-ears-partying"),"woman-woman-boy":$e.t("woman-woman-boy"),"woman-woman-boy-boy":$e.t("woman-woman-boy-boy"),"woman-woman-girl":$e.t("woman-woman-girl"),"woman-woman-girl-boy":$e.t("woman-woman-girl-boy"),"woman-woman-girl-girl":$e.t("woman-woman-girl-girl"),"woman-wrestling":$e.t("woman-wrestling"),woman_climbing:$e.t("woman_climbing"),woman_in_lotus_position:$e.t("woman_in_lotus_position"),woman_in_steamy_room:$e.t("woman_in_steamy_room"),womans_clothes:$e.t("womans_clothes"),womans_hat:$e.t("womans_hat"),womens:$e.t("womens"),world_map:$e.t("world_map"),worried:$e.t("worried"),wrench:$e.t("wrench"),wrestlers:$e.t("wrestlers"),writing_hand:$e.t("writing_hand"),x:$e.t("x"),yellow_heart:$e.t("yellow_heart"),yen:$e.t("yen"),yin_yang:$e.t("yin_yang"),yum:$e.t("yum"),zany_face:$e.t("zany_face"),zap:$e.t("zap"),zebra_face:$e.t("zebra_face"),zero:$e.t("zero"),zipper_mouth_face:$e.t("zipper_mouth_face"),zombie:$e.t("zombie"),zzz:$e.t("zzz"),"skin-tone":$e.t("skin-tone")}};var tt=new ue["b"]("emoji_keywords");var rt=function e(t){if(!t)return null;return{100:[tt.t("100"),tt.t("full"),tt.t("hundred"),tt.t("score")],1234:[tt.t("1234"),tt.t("input"),tt.t("numbers")],"skin-tone-2":[tt.t("skin tone"),tt.t("type 1\u20132")],"skin-tone-3":[tt.t("skin tone"),tt.t("type 3")],"skin-tone-4":[tt.t("skin tone"),tt.t("type 4")],"skin-tone-5":[tt.t("skin tone"),tt.t("type 5")],"skin-tone-6":[tt.t("skin tone"),tt.t("type 6")],grinning:[tt.t("face"),tt.t("grin"),tt.t("people"),tt.t("person")],grin:[tt.t("eye"),tt.t("face"),tt.t("grin"),tt.t("smile"),tt.t("people"),tt.t("person")],joy:[tt.t("face"),tt.t("joy"),tt.t("laugh"),tt.t("tear"),tt.t("happy"),tt.t("person"),tt.t("people")],rolling_on_the_floor_laughing:[tt.t("face"),tt.t("floor"),tt.t("laugh"),tt.t("rolling")],smiley:[tt.t("face"),tt.t("mouth"),tt.t("open"),tt.t("smile"),tt.t("person"),tt.t("people")],smile:[tt.t("eye"),tt.t("face"),tt.t("mouth"),tt.t("open"),tt.t("smile"),tt.t("person"),tt.t("people")],sweat_smile:[tt.t("cold"),tt.t("face"),tt.t("open"),tt.t("smile"),tt.t("sweat"),tt.t("person"),tt.t("people")],laughing:[tt.t("face"),tt.t("laugh"),tt.t("mouth"),tt.t("open"),tt.t("satisfied"),tt.t("smile"),tt.t("person"),tt.t("people"),tt.t("funny"),tt.t("lol")],wink:[tt.t("face"),tt.t("wink"),tt.t("person"),tt.t("people")],blush:[tt.t("blush"),tt.t("eye"),tt.t("face"),tt.t("smile"),tt.t("person"),tt.t("people")],yum:[tt.t("delicious"),tt.t("face"),tt.t("savouring"),tt.t("smile"),tt.t("um"),tt.t("yum"),tt.t("person"),tt.t("people")],sunglasses:[tt.t("bright"),tt.t("cool"),tt.t("eye"),tt.t("eyewear"),tt.t("face"),tt.t("glasses"),tt.t("smile"),tt.t("sun"),tt.t("sunglasses"),tt.t("shades"),tt.t("person"),tt.t("people")],heart_eyes:[tt.t("eye"),tt.t("face"),tt.t("love"),tt.t("smile"),tt.t("heart"),tt.t("person"),tt.t("people")],kissing_heart:[tt.t("face"),tt.t("kiss"),tt.t("person"),tt.t("people"),tt.t("heart")],kissing:[tt.t("face"),tt.t("kiss"),tt.t("person"),tt.t("people")],kissing_smiling_eyes:[tt.t("eye"),tt.t("face"),tt.t("kiss"),tt.t("smile"),tt.t("person"),tt.t("people")],kissing_closed_eyes:[tt.t("closed"),tt.t("eye"),tt.t("face"),tt.t("kiss"),tt.t("person"),tt.t("people")],relaxed:[tt.t("face"),tt.t("outlined"),tt.t("relaxed"),tt.t("smile"),tt.t("people"),tt.t("person")],slightly_smiling_face:[tt.t("face"),tt.t("smile")],hugging_face:[tt.t("face"),tt.t("hug"),tt.t("hugging")],"star-struck":[tt.t("eyes"),tt.t("face"),tt.t("grinning"),tt.t("star")],thinking_face:[tt.t("face"),tt.t("thinking")],face_with_raised_eyebrow:[tt.t("distrust"),tt.t("skeptic")],neutral_face:[tt.t("deadpan"),tt.t("face"),tt.t("neutral"),tt.t("nonplussed"),tt.t("people"),tt.t("person")],expressionless:[tt.t("expressionless"),tt.t("face"),tt.t("inexpressive"),tt.t("unexpressive"),tt.t("deadpan"),tt.t("people"),tt.t("person")],no_mouth:[tt.t("face"),tt.t("mouth"),tt.t("quiet"),tt.t("silent"),tt.t("person"),tt.t("people")],face_with_rolling_eyes:[tt.t("eyes"),tt.t("face"),tt.t("rolling")],smirk:[tt.t("face"),tt.t("smirk"),tt.t("person"),tt.t("people")],persevere:[tt.t("face"),tt.t("persevere"),tt.t("person"),tt.t("people")],disappointed_relieved:[tt.t("disappointed"),tt.t("face"),tt.t("relieved"),tt.t("whew"),tt.t("phew"),tt.t("person"),tt.t("people")],open_mouth:[tt.t("face"),tt.t("mouth"),tt.t("open"),tt.t("sympathy"),tt.t("surprised"),tt.t("people"),tt.t("person")],zipper_mouth_face:[tt.t("face"),tt.t("mouth"),tt.t("zipper")],hushed:[tt.t("face"),tt.t("hushed"),tt.t("stunned"),tt.t("surprised"),tt.t("person"),tt.t("people")],sleepy:[tt.t("face"),tt.t("sleep"),tt.t("person"),tt.t("people")],tired_face:[tt.t("face"),tt.t("tired"),tt.t("tantrum"),tt.t("person"),tt.t("people")],sleeping:[tt.t("face"),tt.t("sleep"),tt.t("zzz"),tt.t("person"),tt.t("people")],relieved:[tt.t("face"),tt.t("relieved"),tt.t("people"),tt.t("person")],stuck_out_tongue:[tt.t("face"),tt.t("tongue"),tt.t("person"),tt.t("people")],stuck_out_tongue_winking_eye:[tt.t("eye"),tt.t("face"),tt.t("joke"),tt.t("tongue"),tt.t("wink"),tt.t("person"),tt.t("people")],stuck_out_tongue_closed_eyes:[tt.t("eye"),tt.t("face"),tt.t("horrible"),tt.t("taste"),tt.t("tongue"),tt.t("person"),tt.t("people")],drooling_face:[tt.t("drooling"),tt.t("face")],unamused:[tt.t("face"),tt.t("unamused"),tt.t("unhappy"),tt.t("unimpressed"),tt.t("person"),tt.t("people")],sweat:[tt.t("cold"),tt.t("face"),tt.t("sweat"),tt.t("person"),tt.t("people")],pensive:[tt.t("dejected"),tt.t("face"),tt.t("pensive"),tt.t("person"),tt.t("people")],confused:[tt.t("confused"),tt.t("face"),tt.t("person"),tt.t("people")],upside_down_face:[tt.t("face"),tt.t("upside-down")],money_mouth_face:[tt.t("face"),tt.t("money"),tt.t("mouth")],astonished:[tt.t("astonished"),tt.t("face"),tt.t("shocked"),tt.t("totally"),tt.t("people"),tt.t("person")],white_frowning_face:[tt.t("face"),tt.t("frown")],slightly_frowning_face:[tt.t("face"),tt.t("frown")],confounded:[tt.t("confounded"),tt.t("face"),tt.t("dumbfounded"),tt.t("person"),tt.t("people")],disappointed:[tt.t("disappointed"),tt.t("face"),tt.t("person"),tt.t("people")],worried:[tt.t("face"),tt.t("worried"),tt.t("person"),tt.t("people")],triumph:[tt.t("face"),tt.t("triumph"),tt.t("won"),tt.t("hmph"),tt.t("person"),tt.t("people")],cry:[tt.t("cry"),tt.t("face"),tt.t("sad"),tt.t("tear"),tt.t("tears"),tt.t("people"),tt.t("person")],sob:[tt.t("cry"),tt.t("face"),tt.t("sad"),tt.t("sob"),tt.t("tear"),tt.t("person"),tt.t("people")],frowning:[tt.t("face"),tt.t("frown"),tt.t("mouth"),tt.t("open"),tt.t("people"),tt.t("person")],anguished:[tt.t("anguished"),tt.t("face"),tt.t("upset"),tt.t("shocked"),tt.t("people"),tt.t("person")],fearful:[tt.t("face"),tt.t("fear"),tt.t("fearful"),tt.t("scared"),tt.t("people"),tt.t("person")],weary:[tt.t("face"),tt.t("tired"),tt.t("weary"),tt.t("person"),tt.t("people")],exploding_head:[tt.t("shocked")],grimacing:[tt.t("face"),tt.t("grimace"),tt.t("people"),tt.t("person")],cold_sweat:[tt.t("blue"),tt.t("cold"),tt.t("face"),tt.t("mouth"),tt.t("open"),tt.t("rushed"),tt.t("sweat"),tt.t("nervous"),tt.t("person"),tt.t("people")],scream:[tt.t("face"),tt.t("fear"),tt.t("fearful"),tt.t("munch"),tt.t("scared"),tt.t("scream"),tt.t("person"),tt.t("people")],flushed:[tt.t("dazed"),tt.t("face"),tt.t("flushed"),tt.t("embarrassed"),tt.t("people"),tt.t("person")],zany_face:[tt.t("eye"),tt.t("goofy"),tt.t("large"),tt.t("small")],dizzy_face:[tt.t("dizzy"),tt.t("face"),tt.t("person"),tt.t("people")],rage:[tt.t("angry"),tt.t("face"),tt.t("mad"),tt.t("pouting"),tt.t("rage"),tt.t("red"),tt.t("anger"),tt.t("person"),tt.t("people")],angry:[tt.t("angry"),tt.t("face"),tt.t("mad"),tt.t("anger"),tt.t("people"),tt.t("person")],face_with_symbols_on_mouth:[tt.t("swearing")],mask:[tt.t("cold"),tt.t("doctor"),tt.t("face"),tt.t("mask"),tt.t("medicine"),tt.t("sick")],face_with_thermometer:[tt.t("face"),tt.t("ill"),tt.t("sick"),tt.t("thermometer")],face_with_head_bandage:[tt.t("bandage"),tt.t("face"),tt.t("hurt"),tt.t("injury")],nauseated_face:[tt.t("face"),tt.t("nauseated"),tt.t("vomit")],face_vomiting:[tt.t("sick"),tt.t("vomit")],sneezing_face:[tt.t("face"),tt.t("gesundheit"),tt.t("sneeze")],innocent:[tt.t("angel"),tt.t("face"),tt.t("fairy tale"),tt.t("fantasy"),tt.t("halo"),tt.t("innocent"),tt.t("smile"),tt.t("saint"),tt.t("person"),tt.t("people")],face_with_cowboy_hat:[tt.t("cowboy"),tt.t("cowgirl"),tt.t("face"),tt.t("hat")],clown_face:[tt.t("clown"),tt.t("face")],lying_face:[tt.t("face"),tt.t("lie"),tt.t("pinocchio")],shushing_face:[tt.t("quiet"),tt.t("shush")],face_with_hand_over_mouth:[tt.t("whoops")],face_with_monocle:[tt.t("stuffy")],nerd_face:[tt.t("face"),tt.t("geek"),tt.t("nerd")],smiling_imp:[tt.t("face"),tt.t("fairy tale"),tt.t("fantasy"),tt.t("horns"),tt.t("smile"),tt.t("person"),tt.t("people"),tt.t("devil"),tt.t("evil")],imp:[tt.t("demon"),tt.t("devil"),tt.t("face"),tt.t("fairy tale"),tt.t("fantasy"),tt.t("imp"),tt.t("evil"),tt.t("person"),tt.t("people")],japanese_ogre:[tt.t("creature"),tt.t("face"),tt.t("fairy tale"),tt.t("fantasy"),tt.t("monster"),tt.t("ogre")],japanese_goblin:[tt.t("creature"),tt.t("face"),tt.t("fairy tale"),tt.t("fantasy"),tt.t("monster"),tt.t("goblin")],skull:[tt.t("death"),tt.t("face"),tt.t("fairy tale"),tt.t("monster"),tt.t("dead"),tt.t("skeleton"),tt.t("scary")],skull_and_crossbones:[tt.t("crossbones"),tt.t("death"),tt.t("face"),tt.t("monster"),tt.t("skull")],ghost:[tt.t("creature"),tt.t("face"),tt.t("fairy tale"),tt.t("fantasy"),tt.t("monster"),tt.t("ghoul"),tt.t("scary")],alien:[tt.t("creature"),tt.t("extraterrestrial"),tt.t("face"),tt.t("fairy tale"),tt.t("fantasy"),tt.t("monster"),tt.t("ufo"),tt.t("martian"),tt.t("space")],space_invader:[tt.t("alien"),tt.t("creature"),tt.t("extraterrestrial"),tt.t("face"),tt.t("fairy tale"),tt.t("fantasy"),tt.t("monster"),tt.t("ufo"),tt.t("video"),tt.t("game")],robot_face:[tt.t("face"),tt.t("monster"),tt.t("robot")],hankey:[tt.t("comic"),tt.t("dung"),tt.t("face"),tt.t("monster"),tt.t("poo"),tt.t("poop"),tt.t("shit")],smiley_cat:[tt.t("cat"),tt.t("face"),tt.t("mouth"),tt.t("open"),tt.t("smile"),tt.t("animal")],smile_cat:[tt.t("cat"),tt.t("eye"),tt.t("face"),tt.t("grin"),tt.t("smile"),tt.t("animal")],joy_cat:[tt.t("cat"),tt.t("face"),tt.t("joy"),tt.t("tear"),tt.t("happy"),tt.t("animal")],heart_eyes_cat:[tt.t("cat"),tt.t("eye"),tt.t("face"),tt.t("love"),tt.t("smile"),tt.t("heart"),tt.t("animal")],smirk_cat:[tt.t("cat"),tt.t("face"),tt.t("ironic"),tt.t("smile"),tt.t("wry"),tt.t("animal")],kissing_cat:[tt.t("cat"),tt.t("eye"),tt.t("face"),tt.t("kiss"),tt.t("animal")],scream_cat:[tt.t("cat"),tt.t("face"),tt.t("oh"),tt.t("surprised"),tt.t("weary"),tt.t("animal")],crying_cat_face:[tt.t("cat"),tt.t("cry"),tt.t("face"),tt.t("sad"),tt.t("tear"),tt.t("animal")],pouting_cat:[tt.t("cat"),tt.t("face"),tt.t("pouting"),tt.t("animal"),tt.t("sad")],see_no_evil:[tt.t("evil"),tt.t("face"),tt.t("forbidden"),tt.t("gesture"),tt.t("monkey"),tt.t("no"),tt.t("not"),tt.t("prohibited"),tt.t("see"),tt.t("animal")],hear_no_evil:[tt.t("evil"),tt.t("face"),tt.t("forbidden"),tt.t("gesture"),tt.t("hear"),tt.t("monkey"),tt.t("no"),tt.t("not"),tt.t("prohibited"),tt.t("animal")],speak_no_evil:[tt.t("evil"),tt.t("face"),tt.t("forbidden"),tt.t("gesture"),tt.t("monkey"),tt.t("no"),tt.t("not"),tt.t("prohibited"),tt.t("speak"),tt.t("animal")],baby:[tt.t("young"),tt.t("infant"),tt.t("face"),tt.t("people"),tt.t("person")],child:[tt.t("gender-neutral"),tt.t("young")],boy:[tt.t("young"),tt.t("person"),tt.t("people"),tt.t("face")],girl:[tt.t("Virgo"),tt.t("young"),tt.t("zodiac"),tt.t("person"),tt.t("people"),tt.t("face")],adult:[tt.t("gender-neutral")],older_adult:[tt.t("gender-neutral"),tt.t("old")],older_man:[tt.t("man"),tt.t("old"),tt.t("senior"),tt.t("elder"),tt.t("person"),tt.t("people"),tt.t("face")],older_woman:[tt.t("old"),tt.t("woman"),tt.t("senior"),tt.t("elder"),tt.t("people"),tt.t("person"),tt.t("face")],"male-doctor":[tt.t("doctor"),tt.t("healthcare"),tt.t("man"),tt.t("nurse"),tt.t("therapist")],"female-doctor":[tt.t("doctor"),tt.t("healthcare"),tt.t("nurse"),tt.t("therapist"),tt.t("woman")],"male-student":[tt.t("graduate"),tt.t("man"),tt.t("student")],"female-student":[tt.t("graduate"),tt.t("student"),tt.t("woman")],"male-teacher":[tt.t("instructor"),tt.t("man"),tt.t("professor"),tt.t("teacher")],"female-teacher":[tt.t("instructor"),tt.t("professor"),tt.t("teacher"),tt.t("woman")],"male-judge":[tt.t("justice"),tt.t("man"),tt.t("scales")],"female-judge":[tt.t("judge"),tt.t("scales"),tt.t("woman")],"male-farmer":[tt.t("farmer"),tt.t("gardener"),tt.t("man"),tt.t("rancher")],"female-farmer":[tt.t("farmer"),tt.t("gardener"),tt.t("rancher"),tt.t("woman")],"male-cook":[tt.t("chef"),tt.t("cook"),tt.t("man")],"female-cook":[tt.t("chef"),tt.t("cook"),tt.t("woman")],"male-mechanic":[tt.t("electrician"),tt.t("man"),tt.t("mechanic"),tt.t("plumber"),tt.t("tradesperson")],"female-mechanic":[tt.t("electrician"),tt.t("mechanic"),tt.t("plumber"),tt.t("tradesperson"),tt.t("woman")],"male-factory-worker":[tt.t("assembly"),tt.t("factory"),tt.t("industrial"),tt.t("man"),tt.t("worker")],"female-factory-worker":[tt.t("assembly"),tt.t("factory"),tt.t("industrial"),tt.t("woman"),tt.t("worker")],"male-office-worker":[tt.t("architect"),tt.t("business"),tt.t("man"),tt.t("manager"),tt.t("office"),tt.t("white-collar")],"female-office-worker":[tt.t("architect"),tt.t("business"),tt.t("manager"),tt.t("office"),tt.t("white-collar"),tt.t("woman")],"male-scientist":[tt.t("biologist"),tt.t("chemist"),tt.t("engineer"),tt.t("man"),tt.t("mathematician"),tt.t("physicist"),tt.t("scientist")],"female-scientist":[tt.t("biologist"),tt.t("chemist"),tt.t("engineer"),tt.t("mathematician"),tt.t("physicist"),tt.t("scientist"),tt.t("woman")],"male-technologist":[tt.t("coder"),tt.t("developer"),tt.t("inventor"),tt.t("man"),tt.t("software"),tt.t("technologist")],"female-technologist":[tt.t("coder"),tt.t("developer"),tt.t("inventor"),tt.t("software"),tt.t("technologist"),tt.t("woman")],"male-singer":[tt.t("actor"),tt.t("entertainer"),tt.t("man"),tt.t("rock"),tt.t("singer"),tt.t("star")],"female-singer":[tt.t("actor"),tt.t("entertainer"),tt.t("rock"),tt.t("singer"),tt.t("star"),tt.t("woman")],"male-artist":[tt.t("artist"),tt.t("man"),tt.t("palette")],"female-artist":[tt.t("artist"),tt.t("palette"),tt.t("woman")],"male-pilot":[tt.t("man"),tt.t("pilot"),tt.t("plane")],"female-pilot":[tt.t("pilot"),tt.t("plane"),tt.t("woman")],"male-astronaut":[tt.t("astronaut"),tt.t("man"),tt.t("rocket")],"female-astronaut":[tt.t("astronaut"),tt.t("rocket"),tt.t("woman")],"male-firefighter":[tt.t("firefighter"),tt.t("firetruck"),tt.t("man")],"female-firefighter":[tt.t("firefighter"),tt.t("firetruck"),tt.t("woman")],cop:[tt.t("cop"),tt.t("officer"),tt.t("police"),tt.t("people"),tt.t("person"),tt.t("face")],"male-police-officer":[tt.t("cop"),tt.t("man"),tt.t("officer"),tt.t("police")],"female-police-officer":[tt.t("cop"),tt.t("officer"),tt.t("police"),tt.t("woman")],sleuth_or_spy:[tt.t("sleuth"),tt.t("spy")],"male-detective":[tt.t("detective"),tt.t("man"),tt.t("sleuth"),tt.t("spy")],"female-detective":[tt.t("detective"),tt.t("sleuth"),tt.t("spy"),tt.t("woman")],"male-guard":[tt.t("guard"),tt.t("man")],"female-guard":[tt.t("guard"),tt.t("woman")],construction_worker:[tt.t("construction"),tt.t("hat"),tt.t("worker"),tt.t("person"),tt.t("people"),tt.t("face")],"male-construction-worker":[tt.t("construction"),tt.t("man"),tt.t("worker")],"female-construction-worker":[tt.t("construction"),tt.t("woman"),tt.t("worker")],princess:[tt.t("fairy tale"),tt.t("fantasy"),tt.t("face"),tt.t("crown"),tt.t("people"),tt.t("person"),tt.t("woman")],man_with_turban:[tt.t("turban"),tt.t("person"),tt.t("people"),tt.t("face")],"man-wearing-turban":[tt.t("man"),tt.t("turban")],"woman-wearing-turban":[tt.t("turban"),tt.t("woman")],man_with_gua_pi_mao:[tt.t("gua pi mao"),tt.t("hat"),tt.t("man"),tt.t("person"),tt.t("people"),tt.t("face")],person_with_headscarf:[tt.t("headscarf"),tt.t("hijab"),tt.t("mantilla"),tt.t("tichel")],bearded_person:[tt.t("beard")],person_with_blond_hair:[tt.t("blond"),tt.t("face"),tt.t("person"),tt.t("people")],"blond-haired-man":[tt.t("blond"),tt.t("man")],"blond-haired-woman":[tt.t("blonde"),tt.t("woman")],man_in_tuxedo:[tt.t("groom"),tt.t("man"),tt.t("tuxedo")],bride_with_veil:[tt.t("bride"),tt.t("veil"),tt.t("wedding"),tt.t("person"),tt.t("people"),tt.t("face"),tt.t("woman"),tt.t("marriage")],pregnant_woman:[tt.t("pregnant"),tt.t("woman")],"breast-feeding":[tt.t("baby"),tt.t("breast"),tt.t("nursing")],angel:[tt.t("angel"),tt.t("baby"),tt.t("face"),tt.t("fairy tale"),tt.t("fantasy"),tt.t("heaven"),tt.t("saint"),tt.t("people"),tt.t("person")],santa:[tt.t("celebration"),tt.t("Christmas"),tt.t("claus"),tt.t("father"),tt.t("santa"),tt.t("christmas"),tt.t("holidays")],mrs_claus:[tt.t("celebration"),tt.t("Christmas"),tt.t("claus"),tt.t("mother"),tt.t("Mrs.")],mage:[tt.t("sorcerer"),tt.t("sorceress"),tt.t("witch"),tt.t("wizard")],female_mage:[tt.t("sorceress"),tt.t("witch")],male_mage:[tt.t("sorcerer"),tt.t("wizard")],fairy:[tt.t("Oberon"),tt.t("Puck"),tt.t("Titania")],female_fairy:[tt.t("Titania")],male_fairy:[tt.t("Oberon"),tt.t("Puck")],vampire:[tt.t("Dracula"),tt.t("undead")],female_vampire:[tt.t("undead")],male_vampire:[tt.t("Dracula"),tt.t("undead")],merperson:[tt.t("mermaid"),tt.t("merman"),tt.t("merwoman")],mermaid:[tt.t("merwoman")],merman:[tt.t("Triton")],elf:[tt.t("magical")],female_elf:[tt.t("magical")],male_elf:[tt.t("magical")],genie:[tt.t("djinn")],female_genie:[tt.t("djinn")],male_genie:[tt.t("djinn")],zombie:[tt.t("undead"),tt.t("walking dead")],female_zombie:[tt.t("undead"),tt.t("walking dead")],male_zombie:[tt.t("undead"),tt.t("walking dead")],person_frowning:[tt.t("frown"),tt.t("gesture"),tt.t("face"),tt.t("person"),tt.t("people"),tt.t("sad")],"man-frowning":[tt.t("frowning"),tt.t("gesture"),tt.t("man")],"woman-frowning":[tt.t("frowning"),tt.t("gesture"),tt.t("woman")],person_with_pouting_face:[tt.t("gesture"),tt.t("pouting"),tt.t("face"),tt.t("person"),tt.t("people")],"man-pouting":[tt.t("gesture"),tt.t("man"),tt.t("pouting")],"woman-pouting":[tt.t("gesture"),tt.t("pouting"),tt.t("woman")],no_good:[tt.t("forbidden"),tt.t("gesture"),tt.t("hand"),tt.t("no"),tt.t("not"),tt.t("prohibited"),tt.t("person"),tt.t("people"),tt.t("becky")],"man-gesturing-no":[tt.t("forbidden"),tt.t("gesture"),tt.t("hand"),tt.t("man"),tt.t("no"),tt.t("prohibited")],"woman-gesturing-no":[tt.t("forbidden"),tt.t("gesture"),tt.t("hand"),tt.t("no"),tt.t("prohibited"),tt.t("woman")],ok_woman:[tt.t("gesture"),tt.t("hand"),tt.t("OK"),tt.t("woman"),tt.t("people"),tt.t("person"),tt.t("becky")],"man-gesturing-ok":[tt.t("gesture"),tt.t("hand"),tt.t("man"),tt.t("OK")],"woman-gesturing-ok":[tt.t("gesture"),tt.t("hand"),tt.t("OK"),tt.t("woman")],information_desk_person:[tt.t("hand"),tt.t("help"),tt.t("information"),tt.t("sassy"),tt.t("tipping"),tt.t("helpdesk"),tt.t("desk"),tt.t("person"),tt.t("people"),tt.t("becky")],"man-tipping-hand":[tt.t("man"),tt.t("sassy"),tt.t("tipping hand")],"woman-tipping-hand":[tt.t("sassy"),tt.t("tipping hand"),tt.t("woman")],raising_hand:[tt.t("gesture"),tt.t("hand"),tt.t("happy"),tt.t("raised"),tt.t("people"),tt.t("person"),tt.t("becky")],"man-raising-hand":[tt.t("gesture"),tt.t("man"),tt.t("raising hand")],"woman-raising-hand":[tt.t("gesture"),tt.t("raising hand"),tt.t("woman")],bow:[tt.t("apology"),tt.t("bow"),tt.t("gesture"),tt.t("sorry"),tt.t("person"),tt.t("people")],"man-bowing":[tt.t("apology"),tt.t("bowing"),tt.t("favor"),tt.t("gesture"),tt.t("man"),tt.t("sorry")],"woman-bowing":[tt.t("apology"),tt.t("bowing"),tt.t("favor"),tt.t("gesture"),tt.t("sorry"),tt.t("woman")],face_palm:[tt.t("disbelief"),tt.t("exasperation"),tt.t("face"),tt.t("palm")],"man-facepalming":[tt.t("disbelief"),tt.t("exasperation"),tt.t("facepalm"),tt.t("man")],"woman-facepalming":[tt.t("disbelief"),tt.t("exasperation"),tt.t("facepalm"),tt.t("woman")],shrug:[tt.t("doubt"),tt.t("ignorance"),tt.t("indifference"),tt.t("shrug")],"man-shrugging":[tt.t("doubt"),tt.t("ignorance"),tt.t("indifference"),tt.t("man"),tt.t("shrug")],"woman-shrugging":[tt.t("doubt"),tt.t("ignorance"),tt.t("indifference"),tt.t("shrug"),tt.t("woman")],massage:[tt.t("face"),tt.t("massage"),tt.t("salon"),tt.t("relax"),tt.t("becky")],"man-getting-massage":[tt.t("face"),tt.t("man"),tt.t("massage")],"woman-getting-massage":[tt.t("face"),tt.t("massage"),tt.t("woman")],haircut:[tt.t("barber"),tt.t("beauty"),tt.t("haircut"),tt.t("parlor"),tt.t("face"),tt.t("people"),tt.t("person"),tt.t("salon")],"man-getting-haircut":[tt.t("haircut"),tt.t("man")],"woman-getting-haircut":[tt.t("haircut"),tt.t("woman")],walking:[tt.t("hike"),tt.t("walk"),tt.t("walking"),tt.t("person"),tt.t("people")],"man-walking":[tt.t("hike"),tt.t("man"),tt.t("walk")],"woman-walking":[tt.t("hike"),tt.t("walk"),tt.t("woman")],runner:[tt.t("marathon"),tt.t("running"),tt.t("run"),tt.t("sport")],"man-running":[tt.t("man"),tt.t("marathon"),tt.t("racing"),tt.t("running")],"woman-running":[tt.t("marathon"),tt.t("racing"),tt.t("running"),tt.t("woman")],dancer:[tt.t("dancing"),tt.t("woman"),tt.t("person"),tt.t("people")],man_dancing:[tt.t("dance"),tt.t("man")],dancers:[tt.t("bunny ear"),tt.t("dancer"),tt.t("partying"),tt.t("people"),tt.t("person")],"man-with-bunny-ears-partying":[tt.t("bunny ear"),tt.t("dancer"),tt.t("men"),tt.t("partying")],"woman-with-bunny-ears-partying":[tt.t("bunny ear"),tt.t("dancer"),tt.t("partying"),tt.t("women")],person_in_steamy_room:[tt.t("sauna"),tt.t("steam room")],woman_in_steamy_room:[tt.t("sauna"),tt.t("steam room")],man_in_steamy_room:[tt.t("sauna"),tt.t("steam room")],person_climbing:[tt.t("climber")],woman_climbing:[tt.t("climber")],man_climbing:[tt.t("climber")],person_in_lotus_position:[tt.t("meditation"),tt.t("yoga")],woman_in_lotus_position:[tt.t("meditation"),tt.t("yoga")],man_in_lotus_position:[tt.t("meditation"),tt.t("yoga")],bath:[tt.t("bath"),tt.t("bathtub"),tt.t("washroom"),tt.t("restroom")],sleeping_accommodation:[tt.t("hotel"),tt.t("sleep")],man_in_business_suit_levitating:[tt.t("business"),tt.t("man"),tt.t("suit")],speaking_head_in_silhouette:[tt.t("face"),tt.t("head"),tt.t("silhouette"),tt.t("speak"),tt.t("speaking")],bust_in_silhouette:[tt.t("bust"),tt.t("silhouette"),tt.t("person"),tt.t("people")],busts_in_silhouette:[tt.t("bust"),tt.t("silhouette"),tt.t("person"),tt.t("people")],fencer:[tt.t("fencer"),tt.t("fencing"),tt.t("sword")],horse_racing:[tt.t("horse"),tt.t("jockey"),tt.t("racehorse"),tt.t("racing"),tt.t("animal")],skier:[tt.t("ski"),tt.t("snow")],snowboarder:[tt.t("ski"),tt.t("snow"),tt.t("snowboard"),tt.t("sport")],golfer:[tt.t("ball"),tt.t("golf")],"man-golfing":[tt.t("golf"),tt.t("man")],"woman-golfing":[tt.t("golf"),tt.t("woman")],surfer:[tt.t("surfing"),tt.t("sport")],"man-surfing":[tt.t("man"),tt.t("surfing")],"woman-surfing":[tt.t("surfing"),tt.t("woman")],rowboat:[tt.t("boat"),tt.t("rowboat")],"man-rowing-boat":[tt.t("boat"),tt.t("man"),tt.t("rowboat")],"woman-rowing-boat":[tt.t("boat"),tt.t("rowboat"),tt.t("woman")],swimmer:[tt.t("swim"),tt.t("sport")],"man-swimming":[tt.t("man"),tt.t("swim")],"woman-swimming":[tt.t("swim"),tt.t("woman")],person_with_ball:[tt.t("ball")],"man-bouncing-ball":[tt.t("ball"),tt.t("man")],"woman-bouncing-ball":[tt.t("ball"),tt.t("woman")],weight_lifter:[tt.t("lifter"),tt.t("weight")],"man-lifting-weights":[tt.t("man"),tt.t("weight lifter")],"woman-lifting-weights":[tt.t("weight lifter"),tt.t("woman")],bicyclist:[tt.t("bicycle"),tt.t("biking"),tt.t("cyclist"),tt.t("bike"),tt.t("sport")],"man-biking":[tt.t("bicycle"),tt.t("biking"),tt.t("cyclist"),tt.t("man")],"woman-biking":[tt.t("bicycle"),tt.t("biking"),tt.t("cyclist"),tt.t("woman")],mountain_bicyclist:[tt.t("bicycle"),tt.t("bicyclist"),tt.t("bike"),tt.t("cyclist"),tt.t("mountain"),tt.t("sport")],"man-mountain-biking":[tt.t("bicycle"),tt.t("bike"),tt.t("cyclist"),tt.t("man"),tt.t("mountain")],"woman-mountain-biking":[tt.t("bicycle"),tt.t("bike"),tt.t("biking"),tt.t("cyclist"),tt.t("mountain"),tt.t("woman")],racing_car:[tt.t("car"),tt.t("racing")],racing_motorcycle:[tt.t("racing")],person_doing_cartwheel:[tt.t("cartwheel"),tt.t("gymnastics")],"man-cartwheeling":[tt.t("cartwheel"),tt.t("gymnastics"),tt.t("man")],"woman-cartwheeling":[tt.t("cartwheel"),tt.t("gymnastics"),tt.t("woman")],wrestlers:[tt.t("wrestle"),tt.t("wrestler")],"man-wrestling":[tt.t("men"),tt.t("wrestle")],"woman-wrestling":[tt.t("women"),tt.t("wrestle")],water_polo:[tt.t("polo"),tt.t("water")],"man-playing-water-polo":[tt.t("man"),tt.t("water polo")],"woman-playing-water-polo":[tt.t("water polo"),tt.t("woman")],handball:[tt.t("ball"),tt.t("handball")],"man-playing-handball":[tt.t("handball"),tt.t("man")],"woman-playing-handball":[tt.t("handball"),tt.t("woman")],juggling:[tt.t("balance"),tt.t("juggle"),tt.t("multitask"),tt.t("skill")],"man-juggling":[tt.t("juggling"),tt.t("man"),tt.t("multitask")],"woman-juggling":[tt.t("juggling"),tt.t("multitask"),tt.t("woman")],couple:[tt.t("couple"),tt.t("hand"),tt.t("hold"),tt.t("man"),tt.t("woman"),tt.t("people")],two_men_holding_hands:[tt.t("couple"),tt.t("Gemini"),tt.t("hand"),tt.t("hold"),tt.t("man"),tt.t("twins"),tt.t("zodiac"),tt.t("person"),tt.t("people")],two_women_holding_hands:[tt.t("couple"),tt.t("hand"),tt.t("hold"),tt.t("woman"),tt.t("person"),tt.t("people")],couplekiss:[tt.t("couple"),tt.t("man"),tt.t("woman"),tt.t("kiss"),tt.t("people")],couple_with_heart:[tt.t("couple"),tt.t("love"),tt.t("man"),tt.t("heart"),tt.t("woman"),tt.t("people")],selfie:[tt.t("camera"),tt.t("phone")],muscle:[tt.t("biceps"),tt.t("comic"),tt.t("flex"),tt.t("muscle"),tt.t("bicep"),tt.t("arm"),tt.t("person"),tt.t("people")],point_left:[tt.t("backhand"),tt.t("finger"),tt.t("hand"),tt.t("index"),tt.t("point"),tt.t("person"),tt.t("people")],point_right:[tt.t("backhand"),tt.t("finger"),tt.t("hand"),tt.t("index"),tt.t("point"),tt.t("person"),tt.t("people")],point_up:[tt.t("finger"),tt.t("hand"),tt.t("index"),tt.t("point"),tt.t("up"),tt.t("person"),tt.t("people")],point_up_2:[tt.t("backhand"),tt.t("finger"),tt.t("hand"),tt.t("index"),tt.t("point"),tt.t("up"),tt.t("person"),tt.t("people")],middle_finger:[tt.t("finger"),tt.t("hand")],point_down:[tt.t("backhand"),tt.t("down"),tt.t("finger"),tt.t("hand"),tt.t("index"),tt.t("point"),tt.t("person"),tt.t("people")],v:[tt.t("hand"),tt.t("v"),tt.t("victory"),tt.t("peace"),tt.t("people"),tt.t("person")],crossed_fingers:[tt.t("cross"),tt.t("finger"),tt.t("hand"),tt.t("luck")],"spock-hand":[tt.t("finger"),tt.t("hand"),tt.t("spock"),tt.t("vulcan")],the_horns:[tt.t("finger"),tt.t("hand"),tt.t("horns"),tt.t("rock-on")],call_me_hand:[tt.t("call"),tt.t("hand")],raised_hand_with_fingers_splayed:[tt.t("finger"),tt.t("hand"),tt.t("splayed")],hand:[tt.t("hand"),tt.t("people"),tt.t("person")],ok_hand:[tt.t("hand"),tt.t("OK"),tt.t("people"),tt.t("person")],"+1":[tt.t("+1"),tt.t("hand"),tt.t("thumb"),tt.t("up"),tt.t("thumbsup"),tt.t("y"),tt.t("yes"),tt.t("people"),tt.t("person")],"-1":[tt.t("-1"),tt.t("down"),tt.t("hand"),tt.t("thumb"),tt.t("thumbsdown"),tt.t("n"),tt.t("no"),tt.t("people"),tt.t("person")],fist:[tt.t("clenched"),tt.t("fist"),tt.t("hand"),tt.t("punch"),tt.t("facepunch"),tt.t("fistbump"),tt.t("person"),tt.t("people")],facepunch:[tt.t("clenched"),tt.t("fist"),tt.t("hand"),tt.t("punch"),tt.t("fistbump"),tt.t("person"),tt.t("people")],"left-facing_fist":[tt.t("fist"),tt.t("leftwards")],"right-facing_fist":[tt.t("fist"),tt.t("rightwards")],raised_back_of_hand:[tt.t("backhand"),tt.t("raised")],wave:[tt.t("hand"),tt.t("wave"),tt.t("waving"),tt.t("people"),tt.t("person")],i_love_you_hand_sign:[tt.t("hand"),tt.t("ILY")],writing_hand:[tt.t("hand"),tt.t("write")],clap:[tt.t("clap"),tt.t("hand"),tt.t("hands"),tt.t("people"),tt.t("person")],open_hands:[tt.t("hand"),tt.t("open"),tt.t("hands"),tt.t("people"),tt.t("person")],raised_hands:[tt.t("celebration"),tt.t("gesture"),tt.t("hand"),tt.t("hooray"),tt.t("raised"),tt.t("people"),tt.t("person")],palms_up_together:[tt.t("prayer")],pray:[tt.t("ask"),tt.t("bow"),tt.t("folded"),tt.t("gesture"),tt.t("hand"),tt.t("please"),tt.t("pray"),tt.t("thanks"),tt.t("bless"),tt.t("people"),tt.t("person")],handshake:[tt.t("agreement"),tt.t("hand"),tt.t("meeting"),tt.t("shake")],nail_care:[tt.t("care"),tt.t("cosmetics"),tt.t("manicure"),tt.t("nail"),tt.t("polish"),tt.t("hand"),tt.t("people"),tt.t("person")],ear:[tt.t("body"),tt.t("person"),tt.t("people"),tt.t("head")],nose:[tt.t("body"),tt.t("face"),tt.t("people"),tt.t("person")],footprints:[tt.t("clothing"),tt.t("footprint"),tt.t("print"),tt.t("feet"),tt.t("foot")],eyes:[tt.t("eye"),tt.t("face"),tt.t("person"),tt.t("people")],eye:[tt.t("body")],"eye-in-speech-bubble":[tt.t("eye"),tt.t("speech bubble"),tt.t("witness")],brain:[tt.t("intelligent")],tongue:[tt.t("body"),tt.t("face"),tt.t("person"),tt.t("people")],lips:[tt.t("lips"),tt.t("mouth"),tt.t("face"),tt.t("person"),tt.t("people")],kiss:[tt.t("kiss"),tt.t("lips"),tt.t("love"),tt.t("mouth"),tt.t("face")],cupid:[tt.t("arrow"),tt.t("cupid"),tt.t("heart")],heart:[tt.t("heart")],heartbeat:[tt.t("beating"),tt.t("heartbeat"),tt.t("pulsating"),tt.t("heart")],broken_heart:[tt.t("break"),tt.t("broken"),tt.t("heartbreak"),tt.t("heart")],two_hearts:[tt.t("love"),tt.t("heart")],sparkling_heart:[tt.t("excited"),tt.t("sparkle"),tt.t("heart"),tt.t("sparkling"),tt.t("glitter"),tt.t("shine")],heartpulse:[tt.t("excited"),tt.t("growing"),tt.t("nervous"),tt.t("pulse")],blue_heart:[tt.t("blue"),tt.t("heart")],green_heart:[tt.t("green"),tt.t("heart")],yellow_heart:[tt.t("yellow"),tt.t("heart")],orange_heart:[tt.t("orange")],purple_heart:[tt.t("purple"),tt.t("heart")],black_heart:[tt.t("black"),tt.t("evil"),tt.t("wicked")],gift_heart:[tt.t("ribbon"),tt.t("valentine"),tt.t("present"),tt.t("heart")],revolving_hearts:[tt.t("revolving"),tt.t("heart")],heart_decoration:[tt.t("heart")],heavy_heart_exclamation_mark_ornament:[tt.t("exclamation"),tt.t("mark"),tt.t("punctuation")],love_letter:[tt.t("heart"),tt.t("letter"),tt.t("love"),tt.t("mail")],zzz:[tt.t("comic"),tt.t("sleep"),tt.t("snore"),tt.t("snooze")],anger:[tt.t("angry"),tt.t("comic"),tt.t("mad"),tt.t("face"),tt.t("people"),tt.t("person")],bomb:[tt.t("comic")],boom:[tt.t("boom"),tt.t("comic"),tt.t("bang"),tt.t("explosion"),tt.t("collision"),tt.t("bomb")],sweat_drops:[tt.t("comic"),tt.t("splashing"),tt.t("sweat"),tt.t("water"),tt.t("spray")],dash:[tt.t("comic"),tt.t("dash"),tt.t("running"),tt.t("gust"),tt.t("whoosh"),tt.t("wind"),tt.t("fart")],dizzy:[tt.t("comic"),tt.t("star"),tt.t("shooting")],speech_balloon:[tt.t("balloon"),tt.t("bubble"),tt.t("comic"),tt.t("dialog"),tt.t("speech"),tt.t("talk")],left_speech_bubble:[tt.t("dialog"),tt.t("speech")],right_anger_bubble:[tt.t("angry"),tt.t("balloon"),tt.t("bubble"),tt.t("mad")],thought_balloon:[tt.t("balloon"),tt.t("bubble"),tt.t("comic"),tt.t("thought")],eyeglasses:[tt.t("clothing"),tt.t("eye"),tt.t("eyeglasses"),tt.t("eyewear"),tt.t("glasses"),tt.t("spectacles")],dark_sunglasses:[tt.t("dark"),tt.t("eye"),tt.t("eyewear"),tt.t("glasses")],necktie:[tt.t("clothing")],shirt:[tt.t("clothing"),tt.t("shirt"),tt.t("tshirt")],jeans:[tt.t("clothing"),tt.t("pants"),tt.t("trousers")],scarf:[tt.t("neck")],gloves:[tt.t("hand")],coat:[tt.t("jacket")],socks:[tt.t("stocking")],dress:[tt.t("clothing")],kimono:[tt.t("clothing")],bikini:[tt.t("clothing"),tt.t("swim"),tt.t("swimsuit"),tt.t("clothes")],womans_clothes:[tt.t("clothing"),tt.t("woman"),tt.t("clothes")],purse:[tt.t("clothing"),tt.t("coin"),tt.t("handbag"),tt.t("bag")],handbag:[tt.t("bag"),tt.t("clothing"),tt.t("purse")],pouch:[tt.t("bag"),tt.t("clothing"),tt.t("pouch"),tt.t("clutch")],shopping_bags:[tt.t("bag"),tt.t("hotel"),tt.t("shopping")],school_satchel:[tt.t("bag"),tt.t("satchel"),tt.t("school")],mans_shoe:[tt.t("clothing"),tt.t("man"),tt.t("shoe")],athletic_shoe:[tt.t("athletic"),tt.t("clothing"),tt.t("shoe"),tt.t("sneaker"),tt.t("runner")],high_heel:[tt.t("clothing"),tt.t("heel"),tt.t("shoe"),tt.t("woman"),tt.t("stiletto")],sandal:[tt.t("clothing"),tt.t("sandal"),tt.t("shoe"),tt.t("woman")],boot:[tt.t("boot"),tt.t("clothing"),tt.t("shoe"),tt.t("woman"),tt.t("clothes")],crown:[tt.t("clothing"),tt.t("king"),tt.t("queen"),tt.t("hat")],womans_hat:[tt.t("clothing"),tt.t("hat"),tt.t("woman")],tophat:[tt.t("clothing"),tt.t("hat"),tt.t("top"),tt.t("tophat")],mortar_board:[tt.t("cap"),tt.t("celebration"),tt.t("clothing"),tt.t("graduation"),tt.t("hat")],billed_cap:[tt.t("baseball cap")],helmet_with_white_cross:[tt.t("aid"),tt.t("cross"),tt.t("face"),tt.t("hat"),tt.t("helmet")],prayer_beads:[tt.t("beads"),tt.t("clothing"),tt.t("necklace"),tt.t("prayer"),tt.t("religion")],lipstick:[tt.t("cosmetics"),tt.t("makeup")],ring:[tt.t("diamond")],gem:[tt.t("diamond"),tt.t("gem"),tt.t("jewel")],monkey_face:[tt.t("face"),tt.t("monkey"),tt.t("animal")],dog:[tt.t("dog"),tt.t("face"),tt.t("pet"),tt.t("animal")],dog2:[tt.t("pet"),tt.t("animal")],poodle:[tt.t("dog"),tt.t("animal")],wolf:[tt.t("face"),tt.t("wolf"),tt.t("animal")],fox_face:[tt.t("face"),tt.t("fox")],cat:[tt.t("cat"),tt.t("face"),tt.t("pet"),tt.t("animal")],cat2:[tt.t("pet"),tt.t("animal")],lion_face:[tt.t("face"),tt.t("Leo"),tt.t("lion"),tt.t("zodiac")],tiger:[tt.t("face"),tt.t("tiger"),tt.t("animal"),tt.t("cat")],horse:[tt.t("face"),tt.t("horse"),tt.t("animal")],racehorse:[tt.t("equestrian"),tt.t("racehorse"),tt.t("racing"),tt.t("animal")],unicorn_face:[tt.t("face"),tt.t("unicorn")],zebra_face:[tt.t("stripe")],cow:[tt.t("cow"),tt.t("face"),tt.t("animal")],ox:[tt.t("bull"),tt.t("Taurus"),tt.t("zodiac"),tt.t("animal")],water_buffalo:[tt.t("buffalo"),tt.t("water"),tt.t("animal")],pig:[tt.t("face"),tt.t("pig"),tt.t("animal")],pig2:[tt.t("sow"),tt.t("animal")],boar:[tt.t("pig"),tt.t("animal")],pig_nose:[tt.t("face"),tt.t("nose"),tt.t("pig"),tt.t("animal")],ram:[tt.t("Aries"),tt.t("male"),tt.t("sheep"),tt.t("zodiac"),tt.t("animal")],sheep:[tt.t("female"),tt.t("sheep"),tt.t("animal")],goat:[tt.t("Capricorn"),tt.t("zodiac"),tt.t("animal")],dromedary_camel:[tt.t("dromedary"),tt.t("hump"),tt.t("animal"),tt.t("camel")],camel:[tt.t("bactrian"),tt.t("camel"),tt.t("hump"),tt.t("animal")],giraffe_face:[tt.t("spots")],mouse:[tt.t("face"),tt.t("mouse"),tt.t("animal")],hamster:[tt.t("face"),tt.t("hamster"),tt.t("pet"),tt.t("animal")],rabbit:[tt.t("bunny"),tt.t("face"),tt.t("pet"),tt.t("rabbit"),tt.t("animal")],rabbit2:[tt.t("bunny"),tt.t("pet"),tt.t("animal")],hedgehog:[tt.t("spiny")],bat:[tt.t("vampire")],bear:[tt.t("bear"),tt.t("face"),tt.t("animal")],koala:[tt.t("bear"),tt.t("animal")],panda_face:[tt.t("face"),tt.t("panda"),tt.t("bear")],feet:[tt.t("feet"),tt.t("paw"),tt.t("print"),tt.t("prints"),tt.t("paws")],turkey:[tt.t("bird")],chicken:[tt.t("bird"),tt.t("animal")],rooster:[tt.t("bird"),tt.t("animal")],hatching_chick:[tt.t("baby"),tt.t("bird"),tt.t("chick"),tt.t("hatching"),tt.t("animal")],baby_chick:[tt.t("baby"),tt.t("bird"),tt.t("chick"),tt.t("animal")],hatched_chick:[tt.t("baby"),tt.t("bird"),tt.t("chick"),tt.t("animal")],penguin:[tt.t("bird"),tt.t("animal")],dove_of_peace:[tt.t("bird"),tt.t("fly"),tt.t("peace")],eagle:[tt.t("bird")],duck:[tt.t("bird")],owl:[tt.t("bird"),tt.t("wise")],frog:[tt.t("face"),tt.t("frog"),tt.t("toad"),tt.t("animal")],turtle:[tt.t("terrapin"),tt.t("tortoise"),tt.t("animal")],lizard:[tt.t("reptile")],snake:[tt.t("bearer"),tt.t("Ophiuchus"),tt.t("serpent"),tt.t("zodiac"),tt.t("animal")],dragon_face:[tt.t("dragon"),tt.t("face"),tt.t("fairy tale"),tt.t("animal")],dragon:[tt.t("fairy tale"),tt.t("animal")],sauropod:[tt.t("brachiosaurus"),tt.t("brontosaurus"),tt.t("diplodocus")],"t-rex":[tt.t("Tyrannosaurus Rex")],whale:[tt.t("face"),tt.t("spouting"),tt.t("whale"),tt.t("animal"),tt.t("fish")],dolphin:[tt.t("flipper"),tt.t("animal"),tt.t("fish")],fish:[tt.t("Pisces"),tt.t("zodiac"),tt.t("animal")],tropical_fish:[tt.t("fish"),tt.t("tropical"),tt.t("animal")],blowfish:[tt.t("fish"),tt.t("animal")],shark:[tt.t("fish")],shell:[tt.t("shell"),tt.t("spiral"),tt.t("beach")],crab:[tt.t("Cancer"),tt.t("zodiac")],shrimp:[tt.t("food"),tt.t("shellfish"),tt.t("small")],squid:[tt.t("food"),tt.t("molusc")],butterfly:[tt.t("insect"),tt.t("pretty")],bug:[tt.t("insect"),tt.t("caterpillar")],ant:[tt.t("insect"),tt.t("bug")],bee:[tt.t("bee"),tt.t("insect"),tt.t("honeybee"),tt.t("bug")],beetle:[tt.t("beetle"),tt.t("insect"),tt.t("ladybird"),tt.t("ladybug"),tt.t("bug")],cricket:[tt.t("grasshopper")],spider:[tt.t("insect")],spider_web:[tt.t("spider"),tt.t("web")],scorpion:[tt.t("scorpio"),tt.t("Scorpio"),tt.t("zodiac")],bouquet:[tt.t("flower"),tt.t("plant")],cherry_blossom:[tt.t("blossom"),tt.t("cherry"),tt.t("flower"),tt.t("sakura")],white_flower:[tt.t("flower"),tt.t("plant")],rosette:[tt.t("plant")],rose:[tt.t("flower"),tt.t("plant")],wilted_flower:[tt.t("flower"),tt.t("wilted")],hibiscus:[tt.t("flower"),tt.t("plant")],sunflower:[tt.t("flower"),tt.t("sun"),tt.t("plant")],blossom:[tt.t("flower"),tt.t("plant")],tulip:[tt.t("flower"),tt.t("plant")],seedling:[tt.t("young"),tt.t("plant")],evergreen_tree:[tt.t("tree"),tt.t("evergreen"),tt.t("plant")],deciduous_tree:[tt.t("deciduous"),tt.t("shedding"),tt.t("tree"),tt.t("plant")],palm_tree:[tt.t("palm"),tt.t("tree"),tt.t("plant")],cactus:[tt.t("plant")],ear_of_rice:[tt.t("ear"),tt.t("grain"),tt.t("rice"),tt.t("food")],herb:[tt.t("leaf"),tt.t("plant")],shamrock:[tt.t("plant")],four_leaf_clover:[tt.t("4"),tt.t("clover"),tt.t("four"),tt.t("leaf"),tt.t("plant")],maple_leaf:[tt.t("falling"),tt.t("leaf"),tt.t("maple"),tt.t("plant")],fallen_leaf:[tt.t("falling"),tt.t("leaf"),tt.t("leaves"),tt.t("brown"),tt.t("plant")],leaves:[tt.t("blow"),tt.t("flutter"),tt.t("leaf"),tt.t("wind"),tt.t("plant")],grapes:[tt.t("fruit"),tt.t("grape"),tt.t("food")],melon:[tt.t("fruit"),tt.t("food")],watermelon:[tt.t("fruit"),tt.t("food")],tangerine:[tt.t("fruit"),tt.t("orange"),tt.t("food")],lemon:[tt.t("citrus"),tt.t("fruit"),tt.t("food")],banana:[tt.t("fruit"),tt.t("food")],pineapple:[tt.t("fruit"),tt.t("food")],apple:[tt.t("apple"),tt.t("fruit"),tt.t("red"),tt.t("food")],green_apple:[tt.t("apple"),tt.t("fruit"),tt.t("green"),tt.t("food")],pear:[tt.t("fruit"),tt.t("food")],peach:[tt.t("fruit"),tt.t("food")],cherries:[tt.t("berries"),tt.t("cherry"),tt.t("fruit"),tt.t("red"),tt.t("food")],strawberry:[tt.t("berry"),tt.t("fruit"),tt.t("food")],kiwifruit:[tt.t("food"),tt.t("fruit"),tt.t("kiwi")],tomato:[tt.t("fruit"),tt.t("vegetable"),tt.t("food")],coconut:[tt.t("palm"),tt.t("pi\xf1a colada")],avocado:[tt.t("food"),tt.t("fruit")],eggplant:[tt.t("aubergine"),tt.t("vegetable"),tt.t("food")],potato:[tt.t("food"),tt.t("vegetable")],carrot:[tt.t("food"),tt.t("vegetable")],corn:[tt.t("corn"),tt.t("ear"),tt.t("maize"),tt.t("maze"),tt.t("vegetable"),tt.t("food")],hot_pepper:[tt.t("hot"),tt.t("pepper")],cucumber:[tt.t("food"),tt.t("pickle"),tt.t("vegetable")],broccoli:[tt.t("wild cabbage")],mushroom:[tt.t("toadstool"),tt.t("food")],peanuts:[tt.t("food"),tt.t("nut"),tt.t("peanut"),tt.t("vegetable")],chestnut:[tt.t("plant"),tt.t("food")],bread:[tt.t("loaf")],croissant:[tt.t("bread"),tt.t("crescent roll"),tt.t("food"),tt.t("french")],baguette_bread:[tt.t("baguette"),tt.t("bread"),tt.t("food"),tt.t("french")],pretzel:[tt.t("twisted")],pancakes:[tt.t("cr\xeape"),tt.t("food"),tt.t("hotcake"),tt.t("pancake")],cheese_wedge:[tt.t("cheese")],meat_on_bone:[tt.t("bone"),tt.t("meat"),tt.t("food")],poultry_leg:[tt.t("bone"),tt.t("chicken"),tt.t("leg"),tt.t("poultry"),tt.t("drumstick"),tt.t("meat"),tt.t("food")],cut_of_meat:[tt.t("chop"),tt.t("lambchop"),tt.t("porkchop"),tt.t("steak")],bacon:[tt.t("food"),tt.t("meat")],hamburger:[tt.t("burger"),tt.t("cheeseburger"),tt.t("food")],fries:[tt.t("french"),tt.t("fries"),tt.t("food")],pizza:[tt.t("cheese"),tt.t("slice"),tt.t("food")],hotdog:[tt.t("frankfurter"),tt.t("hotdog"),tt.t("sausage")],sandwich:[tt.t("bread")],taco:[tt.t("mexican")],burrito:[tt.t("mexican"),tt.t("wrap")],stuffed_flatbread:[tt.t("falafel"),tt.t("flatbread"),tt.t("food"),tt.t("gyro"),tt.t("kebab"),tt.t("stuffed")],egg:[tt.t("food")],fried_egg:[tt.t("egg"),tt.t("frying"),tt.t("pan"),tt.t("food")],shallow_pan_of_food:[tt.t("casserole"),tt.t("food"),tt.t("paella"),tt.t("pan"),tt.t("shallow")],stew:[tt.t("pot"),tt.t("stew"),tt.t("food")],bowl_with_spoon:[tt.t("breakfast"),tt.t("cereal"),tt.t("congee")],green_salad:[tt.t("food"),tt.t("green"),tt.t("salad")],canned_food:[tt.t("can")],bento:[tt.t("bento"),tt.t("box"),tt.t("food")],rice_cracker:[tt.t("cracker"),tt.t("rice"),tt.t("food")],rice_ball:[tt.t("ball"),tt.t("Japanese"),tt.t("rice"),tt.t("food")],rice:[tt.t("cooked"),tt.t("rice"),tt.t("food")],curry:[tt.t("curry"),tt.t("rice"),tt.t("food")],ramen:[tt.t("bowl"),tt.t("noodle"),tt.t("ramen"),tt.t("steaming"),tt.t("noodles"),tt.t("food")],spaghetti:[tt.t("pasta"),tt.t("food")],sweet_potato:[tt.t("potato"),tt.t("roasted"),tt.t("sweet"),tt.t("yam"),tt.t("vegetable"),tt.t("food")],oden:[tt.t("kebab"),tt.t("seafood"),tt.t("skewer"),tt.t("stick"),tt.t("food")],fried_shrimp:[tt.t("fried"),tt.t("prawn"),tt.t("shrimp"),tt.t("tempura"),tt.t("food")],fish_cake:[tt.t("cake"),tt.t("fish"),tt.t("pastry"),tt.t("swirl"),tt.t("food")],dango:[tt.t("dessert"),tt.t("Japanese"),tt.t("skewer"),tt.t("stick"),tt.t("sweet"),tt.t("food")],dumpling:[tt.t("empanada"),tt.t("gy\u014dza"),tt.t("jiaozi"),tt.t("pierogi"),tt.t("potsticker")],fortune_cookie:[tt.t("prophecy")],takeout_box:[tt.t("oyster pail")],icecream:[tt.t("cream"),tt.t("dessert"),tt.t("ice"),tt.t("icecream"),tt.t("soft"),tt.t("sweet"),tt.t("food")],shaved_ice:[tt.t("dessert"),tt.t("ice"),tt.t("shaved"),tt.t("sweet"),tt.t("snow"),tt.t("cone"),tt.t("food")],ice_cream:[tt.t("cream"),tt.t("dessert"),tt.t("ice"),tt.t("sweet"),tt.t("icecream"),tt.t("food")],doughnut:[tt.t("dessert"),tt.t("donut"),tt.t("sweet"),tt.t("food")],cookie:[tt.t("dessert"),tt.t("sweet"),tt.t("food")],birthday:[tt.t("birthday"),tt.t("cake"),tt.t("celebration"),tt.t("dessert"),tt.t("pastry"),tt.t("sweet"),tt.t("food")],cake:[tt.t("cake"),tt.t("dessert"),tt.t("pastry"),tt.t("slice"),tt.t("sweet"),tt.t("birthday"),tt.t("food")],pie:[tt.t("filling"),tt.t("pastry")],chocolate_bar:[tt.t("bar"),tt.t("chocolate"),tt.t("dessert"),tt.t("sweet"),tt.t("candy"),tt.t("candybar"),tt.t("food")],candy:[tt.t("dessert"),tt.t("sweet"),tt.t("food")],lollipop:[tt.t("candy"),tt.t("dessert"),tt.t("sweet"),tt.t("food")],custard:[tt.t("dessert"),tt.t("pudding"),tt.t("sweet"),tt.t("food")],honey_pot:[tt.t("honey"),tt.t("honeypot"),tt.t("pot"),tt.t("sweet"),tt.t("food")],baby_bottle:[tt.t("baby"),tt.t("bottle"),tt.t("drink"),tt.t("milk"),tt.t("infant")],glass_of_milk:[tt.t("drink"),tt.t("glass"),tt.t("milk")],coffee:[tt.t("beverage"),tt.t("coffee"),tt.t("drink"),tt.t("hot"),tt.t("steaming"),tt.t("tea"),tt.t("food")],tea:[tt.t("beverage"),tt.t("cup"),tt.t("drink"),tt.t("tea"),tt.t("teacup"),tt.t("food")],sake:[tt.t("bar"),tt.t("beverage"),tt.t("bottle"),tt.t("cup"),tt.t("drink"),tt.t("food")],champagne:[tt.t("bar"),tt.t("bottle"),tt.t("cork"),tt.t("drink"),tt.t("popping")],wine_glass:[tt.t("bar"),tt.t("beverage"),tt.t("drink"),tt.t("glass"),tt.t("wine"),tt.t("food")],cocktail:[tt.t("bar"),tt.t("cocktail"),tt.t("drink"),tt.t("glass"),tt.t("martini"),tt.t("food")],tropical_drink:[tt.t("bar"),tt.t("drink"),tt.t("tropical"),tt.t("food")],beer:[tt.t("bar"),tt.t("beer"),tt.t("drink"),tt.t("mug"),tt.t("ale"),tt.t("food")],beers:[tt.t("bar"),tt.t("beer"),tt.t("clink"),tt.t("drink"),tt.t("mug"),tt.t("ale"),tt.t("food")],clinking_glasses:[tt.t("celebrate"),tt.t("clink"),tt.t("drink"),tt.t("glass")],tumbler_glass:[tt.t("glass"),tt.t("liquor"),tt.t("shot"),tt.t("tumbler"),tt.t("whisky")],cup_with_straw:[tt.t("juice"),tt.t("soda")],chopsticks:[tt.t("hashi")],knife_fork_plate:[tt.t("cooking"),tt.t("fork"),tt.t("knife"),tt.t("plate")],fork_and_knife:[tt.t("cooking"),tt.t("fork"),tt.t("knife"),tt.t("cutlery"),tt.t("silverware"),tt.t("food")],spoon:[tt.t("tableware")],hocho:[tt.t("cooking"),tt.t("hocho"),tt.t("knife"),tt.t("tool"),tt.t("weapon")],amphora:[tt.t("Aquarius"),tt.t("cooking"),tt.t("drink"),tt.t("jug"),tt.t("tool"),tt.t("weapon"),tt.t("zodiac")],earth_africa:[tt.t("Africa"),tt.t("earth"),tt.t("Europe"),tt.t("globe"),tt.t("world")],earth_americas:[tt.t("Americas"),tt.t("earth"),tt.t("globe"),tt.t("world")],earth_asia:[tt.t("Asia"),tt.t("Australia"),tt.t("earth"),tt.t("globe"),tt.t("world")],globe_with_meridians:[tt.t("earth"),tt.t("globe"),tt.t("meridians"),tt.t("world")],world_map:[tt.t("map"),tt.t("world")],japan:[tt.t("Japan"),tt.t("map")],snow_capped_mountain:[tt.t("cold"),tt.t("mountain"),tt.t("snow")],volcano:[tt.t("eruption"),tt.t("mountain")],mount_fuji:[tt.t("fuji"),tt.t("mountain")],beach_with_umbrella:[tt.t("beach"),tt.t("umbrella")],desert_island:[tt.t("desert"),tt.t("island")],national_park:[tt.t("park")],classical_building:[tt.t("classical")],building_construction:[tt.t("construction")],cityscape:[tt.t("city")],derelict_house_building:[tt.t("derelict"),tt.t("house")],house:[tt.t("home"),tt.t("building")],house_with_garden:[tt.t("garden"),tt.t("home"),tt.t("house"),tt.t("building")],office:[tt.t("building")],post_office:[tt.t("Japanese"),tt.t("post"),tt.t("building")],european_post_office:[tt.t("European"),tt.t("post"),tt.t("building")],hospital:[tt.t("doctor"),tt.t("medicine"),tt.t("building")],bank:[tt.t("building")],hotel:[tt.t("building")],love_hotel:[tt.t("hotel"),tt.t("love"),tt.t("building")],convenience_store:[tt.t("convenience"),tt.t("store"),tt.t("building")],school:[tt.t("building")],department_store:[tt.t("department"),tt.t("store"),tt.t("building")],factory:[tt.t("building")],japanese_castle:[tt.t("castle"),tt.t("Japanese"),tt.t("building")],european_castle:[tt.t("European"),tt.t("castle")],wedding:[tt.t("chapel"),tt.t("romance"),tt.t("marriage")],tokyo_tower:[tt.t("Tokyo"),tt.t("tower"),tt.t("building")],statue_of_liberty:[tt.t("liberty"),tt.t("statue")],church:[tt.t("Christian"),tt.t("cross"),tt.t("religion"),tt.t("building")],mosque:[tt.t("islam"),tt.t("Muslim"),tt.t("religion")],synagogue:[tt.t("Jew"),tt.t("Jewish"),tt.t("religion"),tt.t("temple")],shinto_shrine:[tt.t("religion"),tt.t("shinto"),tt.t("shrine")],kaaba:[tt.t("islam"),tt.t("Muslim"),tt.t("religion")],tent:[tt.t("camping")],foggy:[tt.t("fog")],night_with_stars:[tt.t("night"),tt.t("star"),tt.t("sky")],sunrise_over_mountains:[tt.t("morning"),tt.t("mountain"),tt.t("sun"),tt.t("sunrise")],sunrise:[tt.t("morning"),tt.t("sun")],city_sunset:[tt.t("city"),tt.t("dusk"),tt.t("evening"),tt.t("landscape"),tt.t("sun"),tt.t("sunset")],city_sunrise:[tt.t("dusk"),tt.t("sun")],bridge_at_night:[tt.t("bridge"),tt.t("night")],hotsprings:[tt.t("hot"),tt.t("hotsprings"),tt.t("springs"),tt.t("steaming"),tt.t("symbol")],milky_way:[tt.t("space"),tt.t("galaxy")],carousel_horse:[tt.t("carousel"),tt.t("horse"),tt.t("carnival")],ferris_wheel:[tt.t("amusement park"),tt.t("ferris"),tt.t("wheel"),tt.t("carnival")],roller_coaster:[tt.t("amusement park"),tt.t("coaster"),tt.t("roller"),tt.t("ride"),tt.t("carnival")],barber:[tt.t("barber"),tt.t("haircut"),tt.t("pole")],circus_tent:[tt.t("circus"),tt.t("tent"),tt.t("big"),tt.t("top")],performing_arts:[tt.t("art"),tt.t("mask"),tt.t("performing"),tt.t("theater"),tt.t("theatre"),tt.t("comedy"),tt.t("tragedy"),tt.t("tragicomedy")],frame_with_picture:[tt.t("art"),tt.t("frame"),tt.t("museum"),tt.t("painting"),tt.t("picture")],art:[tt.t("art"),tt.t("museum"),tt.t("painting"),tt.t("palette"),tt.t("paint")],slot_machine:[tt.t("game"),tt.t("slot"),tt.t("gambling"),tt.t("casino")],steam_locomotive:[tt.t("engine"),tt.t("railway"),tt.t("steam"),tt.t("train"),tt.t("transport")],railway_car:[tt.t("car"),tt.t("electric"),tt.t("railway"),tt.t("train"),tt.t("tram"),tt.t("trolleybus"),tt.t("transport")],bullettrain_side:[tt.t("railway"),tt.t("shinkansen"),tt.t("speed"),tt.t("train"),tt.t("transport")],bullettrain_front:[tt.t("bullet"),tt.t("railway"),tt.t("shinkansen"),tt.t("speed"),tt.t("train"),tt.t("transport")],train2:[tt.t("railway"),tt.t("vehicle"),tt.t("transport")],metro:[tt.t("subway"),tt.t("symbol")],light_rail:[tt.t("railway"),tt.t("transport"),tt.t("train")],station:[tt.t("railway"),tt.t("train"),tt.t("building")],tram:[tt.t("trolleybus"),tt.t("vehicle"),tt.t("transport"),tt.t("train")],monorail:[tt.t("vehicle"),tt.t("train"),tt.t("transport")],mountain_railway:[tt.t("car"),tt.t("mountain"),tt.t("railway"),tt.t("train")],train:[tt.t("car"),tt.t("tram"),tt.t("trolleybus"),tt.t("transport")],bus:[tt.t("vehicle"),tt.t("automobile"),tt.t("transport")],oncoming_bus:[tt.t("bus"),tt.t("oncoming"),tt.t("front"),tt.t("vehicle"),tt.t("automobile"),tt.t("transport")],trolleybus:[tt.t("bus"),tt.t("tram"),tt.t("trolley"),tt.t("vehicle"),tt.t("automobile")],minibus:[tt.t("bus"),tt.t("vehicle"),tt.t("transport"),tt.t("automobile")],ambulance:[tt.t("vehicle"),tt.t("paramedic")],fire_engine:[tt.t("engine"),tt.t("fire"),tt.t("truck"),tt.t("vehicle"),tt.t("automobile")],police_car:[tt.t("car"),tt.t("patrol"),tt.t("police"),tt.t("cop"),tt.t("automobile"),tt.t("vehicle"),tt.t("transport")],oncoming_police_car:[tt.t("car"),tt.t("oncoming"),tt.t("police"),tt.t("front"),tt.t("cop"),tt.t("vehicle"),tt.t("automobile"),tt.t("transport")],taxi:[tt.t("vehicle"),tt.t("cab"),tt.t("car"),tt.t("automobile"),tt.t("transport")],oncoming_taxi:[tt.t("oncoming"),tt.t("taxi"),tt.t("fron"),tt.t("cab"),tt.t("car"),tt.t("vehicle"),tt.t("automobile"),tt.t("transport")],car:[tt.t("car"),tt.t("vehicle"),tt.t("automobile"),tt.t("transport")],oncoming_automobile:[tt.t("automobile"),tt.t("car"),tt.t("oncoming"),tt.t("front"),tt.t("vehicle"),tt.t("transport")],blue_car:[tt.t("recreational"),tt.t("sport utility"),tt.t("car"),tt.t("automobile"),tt.t("transport")],truck:[tt.t("delivery"),tt.t("truck"),tt.t("vehicle"),tt.t("automobile"),tt.t("transport")],articulated_lorry:[tt.t("lorry"),tt.t("semi"),tt.t("truck"),tt.t("automobile"),tt.t("vehicle"),tt.t("transport")],tractor:[tt.t("vehicle"),tt.t("farm")],bike:[tt.t("bike"),tt.t("bicycle"),tt.t("cycle"),tt.t("sport"),tt.t("cyclist")],scooter:[tt.t("kick"),tt.t("scooter")],motor_scooter:[tt.t("motor"),tt.t("scooter")],busstop:[tt.t("bus"),tt.t("busstop"),tt.t("stop")],motorway:[tt.t("highway"),tt.t("road")],railway_track:[tt.t("railway"),tt.t("train")],fuelpump:[tt.t("fuel"),tt.t("fuelpump"),tt.t("gas"),tt.t("pump"),tt.t("station")],rotating_light:[tt.t("beacon"),tt.t("car"),tt.t("light"),tt.t("police"),tt.t("revolving"),tt.t("siren")],traffic_light:[tt.t("light"),tt.t("signal"),tt.t("traffic")],vertical_traffic_light:[tt.t("light"),tt.t("signal"),tt.t("traffic")],construction:[tt.t("barrier")],octagonal_sign:[tt.t("octagonal"),tt.t("sign"),tt.t("stop")],anchor:[tt.t("ship"),tt.t("tool")],boat:[tt.t("boat"),tt.t("resort"),tt.t("sea"),tt.t("yacht")],canoe:[tt.t("boat")],speedboat:[tt.t("boat")],passenger_ship:[tt.t("passenger"),tt.t("ship")],ferry:[tt.t("boat"),tt.t("passenger")],motor_boat:[tt.t("boat"),tt.t("motorboat")],ship:[tt.t("boat"),tt.t("passenger")],airplane:[tt.t("aeroplane"),tt.t("plane"),tt.t("travel"),tt.t("fly"),tt.t("transport")],small_airplane:[tt.t("aeroplane"),tt.t("airplane")],airplane_departure:[tt.t("aeroplane"),tt.t("airplane"),tt.t("check-in"),tt.t("departure"),tt.t("departures")],airplane_arriving:[tt.t("aeroplane"),tt.t("airplane"),tt.t("arrivals"),tt.t("arriving"),tt.t("landing")],seat:[tt.t("chair"),tt.t("airplane"),tt.t("seat")],helicopter:[tt.t("vehicle"),tt.t("chopper"),tt.t("fly")],suspension_railway:[tt.t("railway"),tt.t("suspension"),tt.t("train"),tt.t("transport")],mountain_cableway:[tt.t("cable"),tt.t("gondola"),tt.t("mountain"),tt.t("transport")],aerial_tramway:[tt.t("aerial"),tt.t("cable"),tt.t("car"),tt.t("gondola"),tt.t("tramway"),tt.t("transport")],satellite:[tt.t("space")],rocket:[tt.t("space"),tt.t("spaceship")],flying_saucer:[tt.t("UFO")],bellhop_bell:[tt.t("bell"),tt.t("bellhop"),tt.t("hotel")],bed:[tt.t("hotel"),tt.t("sleep")],couch_and_lamp:[tt.t("couch"),tt.t("hotel"),tt.t("lamp")],shower:[tt.t("water"),tt.t("bathroom"),tt.t("restroom"),tt.t("washroom")],bathtub:[tt.t("bath"),tt.t("washroom"),tt.t("restroom")],hourglass:[tt.t("sand"),tt.t("timer")],hourglass_flowing_sand:[tt.t("hourglass"),tt.t("sand"),tt.t("timer")],watch:[tt.t("clock"),tt.t("time")],alarm_clock:[tt.t("alarm"),tt.t("clock")],stopwatch:[tt.t("clock")],timer_clock:[tt.t("clock"),tt.t("timer")],mantelpiece_clock:[tt.t("clock")],clock12:[tt.t("00"),tt.t("12"),tt.t("12:00"),tt.t("clock"),tt.t("o\u2019clock"),tt.t("twelve"),tt.t("time")],clock1230:[tt.t("12"),tt.t("12:30"),tt.t("30"),tt.t("clock"),tt.t("thirty"),tt.t("twelve"),tt.t("time")],clock1:[tt.t("00"),tt.t("1"),tt.t("1:00"),tt.t("clock"),tt.t("o\u2019clock"),tt.t("one"),tt.t("time")],clock130:[tt.t("1"),tt.t("1:30"),tt.t("30"),tt.t("clock"),tt.t("one"),tt.t("thirty"),tt.t("time")],clock2:[tt.t("00"),tt.t("2"),tt.t("2:00"),tt.t("clock"),tt.t("o\u2019clock"),tt.t("two"),tt.t("time")],clock230:[tt.t("2"),tt.t("2:30"),tt.t("30"),tt.t("clock"),tt.t("thirty"),tt.t("two"),tt.t("time")],clock3:[tt.t("00"),tt.t("3"),tt.t("3:00"),tt.t("clock"),tt.t("o\u2019clock"),tt.t("three"),tt.t("time")],clock330:[tt.t("3"),tt.t("3:30"),tt.t("30"),tt.t("clock"),tt.t("thirty"),tt.t("three"),tt.t("time")],clock4:[tt.t("00"),tt.t("4"),tt.t("4:00"),tt.t("clock"),tt.t("four"),tt.t("o\u2019clock"),tt.t("time")],clock430:[tt.t("30"),tt.t("4"),tt.t("4:30"),tt.t("clock"),tt.t("four"),tt.t("thirty"),tt.t("time")],clock5:[tt.t("00"),tt.t("5"),tt.t("5:00"),tt.t("clock"),tt.t("five"),tt.t("o\u2019clock"),tt.t("time")],clock530:[tt.t("30"),tt.t("5"),tt.t("5:30"),tt.t("clock"),tt.t("five"),tt.t("thirty"),tt.t("time")],clock6:[tt.t("00"),tt.t("6"),tt.t("6:00"),tt.t("clock"),tt.t("o\u2019clock"),tt.t("six"),tt.t("time")],clock630:[tt.t("30"),tt.t("6"),tt.t("6:30"),tt.t("clock"),tt.t("six"),tt.t("thirty"),tt.t("time")],clock7:[tt.t("00"),tt.t("7"),tt.t("7:00"),tt.t("clock"),tt.t("o\u2019clock"),tt.t("seven"),tt.t("time")],clock730:[tt.t("30"),tt.t("7"),tt.t("7:30"),tt.t("clock"),tt.t("seven"),tt.t("thirty"),tt.t("time")],clock8:[tt.t("00"),tt.t("8"),tt.t("8:00"),tt.t("clock"),tt.t("eight"),tt.t("o\u2019clock"),tt.t("time")],clock830:[tt.t("30"),tt.t("8"),tt.t("8:30"),tt.t("clock"),tt.t("eight"),tt.t("thirty"),tt.t("time")],clock9:[tt.t("00"),tt.t("9"),tt.t("9:00"),tt.t("clock"),tt.t("nine"),tt.t("o\u2019clock"),tt.t("time")],clock930:[tt.t("30"),tt.t("9"),tt.t("9:30"),tt.t("clock"),tt.t("nine"),tt.t("thirty"),tt.t("time")],clock10:[tt.t("00"),tt.t("10"),tt.t("10:00"),tt.t("clock"),tt.t("o\u2019clock"),tt.t("ten"),tt.t("time")],clock1030:[tt.t("10"),tt.t("10:30"),tt.t("30"),tt.t("clock"),tt.t("ten"),tt.t("thirty"),tt.t("time")],clock11:[tt.t("00"),tt.t("11"),tt.t("11:00"),tt.t("clock"),tt.t("eleven"),tt.t("o\u2019clock"),tt.t("time")],clock1130:[tt.t("11"),tt.t("11:30"),tt.t("30"),tt.t("clock"),tt.t("eleven"),tt.t("thirty"),tt.t("time")],new_moon:[tt.t("dark"),tt.t("moon"),tt.t("new")],waxing_crescent_moon:[tt.t("crescent"),tt.t("moon"),tt.t("waxing")],first_quarter_moon:[tt.t("moon"),tt.t("quarter"),tt.t("first")],moon:[tt.t("gibbous"),tt.t("moon"),tt.t("waxing")],full_moon:[tt.t("full"),tt.t("moon")],waning_gibbous_moon:[tt.t("gibbous"),tt.t("moon"),tt.t("waning")],last_quarter_moon:[tt.t("moon"),tt.t("quarter"),tt.t("last")],waning_crescent_moon:[tt.t("crescent"),tt.t("moon"),tt.t("waning")],crescent_moon:[tt.t("crescent"),tt.t("moon")],new_moon_with_face:[tt.t("face"),tt.t("moon"),tt.t("new"),tt.t("with")],first_quarter_moon_with_face:[tt.t("face"),tt.t("moon"),tt.t("quarter"),tt.t("moon_first"),tt.t("with")],last_quarter_moon_with_face:[tt.t("face"),tt.t("moon"),tt.t("quarter"),tt.t("last"),tt.t("with")],thermometer:[tt.t("weather")],sunny:[tt.t("bright"),tt.t("rays"),tt.t("sunny"),tt.t("sun"),tt.t("weather")],full_moon_with_face:[tt.t("bright"),tt.t("face"),tt.t("full"),tt.t("moon"),tt.t("with")],sun_with_face:[tt.t("bright"),tt.t("face"),tt.t("sun"),tt.t("weather")],star:[tt.t("star")],star2:[tt.t("glittery"),tt.t("glow"),tt.t("shining"),tt.t("sparkle"),tt.t("star")],stars:[tt.t("falling"),tt.t("shooting"),tt.t("star")],cloud:[tt.t("weather"),tt.t("sky")],partly_sunny:[tt.t("cloud"),tt.t("sun"),tt.t("clouds")],thunder_cloud_and_rain:[tt.t("cloud"),tt.t("rain"),tt.t("thunder")],mostly_sunny:[tt.t("cloud"),tt.t("sun")],barely_sunny:[tt.t("cloud"),tt.t("sun")],partly_sunny_rain:[tt.t("cloud"),tt.t("rain"),tt.t("sun")],rain_cloud:[tt.t("cloud"),tt.t("rain")],snow_cloud:[tt.t("cloud"),tt.t("cold"),tt.t("snow")],lightning:[tt.t("cloud"),tt.t("lightning")],tornado:[tt.t("cloud"),tt.t("whirlwind")],fog:[tt.t("cloud")],wind_blowing_face:[tt.t("blow"),tt.t("cloud"),tt.t("face"),tt.t("wind")],cyclone:[tt.t("dizzy"),tt.t("twister"),tt.t("typhoon"),tt.t("symbol")],rainbow:[tt.t("rain")],closed_umbrella:[tt.t("clothing"),tt.t("rain"),tt.t("umbrella")],umbrella:[tt.t("clothing"),tt.t("rain")],umbrella_with_rain_drops:[tt.t("clothing"),tt.t("drop"),tt.t("rain"),tt.t("umbrella")],umbrella_on_ground:[tt.t("rain"),tt.t("sun"),tt.t("umbrella")],zap:[tt.t("danger"),tt.t("electric"),tt.t("electricity"),tt.t("lightning"),tt.t("voltage"),tt.t("zap"),tt.t("bolt"),tt.t("shock"),tt.t("weather")],snowflake:[tt.t("cold"),tt.t("snow"),tt.t("weather")],snowman:[tt.t("cold"),tt.t("snow")],snowman_without_snow:[tt.t("cold"),tt.t("snow"),tt.t("snowman")],comet:[tt.t("space")],fire:[tt.t("flame"),tt.t("tool"),tt.t("flames"),tt.t("burn")],droplet:[tt.t("cold"),tt.t("comic"),tt.t("drop"),tt.t("sweat"),tt.t("water"),tt.t("tear"),tt.t("cry")],ocean:[tt.t("ocean"),tt.t("water"),tt.t("wave"),tt.t("tidal")],jack_o_lantern:[tt.t("celebration"),tt.t("halloween"),tt.t("jack"),tt.t("lantern"),tt.t("pumpkin"),tt.t("scary")],christmas_tree:[tt.t("celebration"),tt.t("Christmas"),tt.t("tree"),tt.t("plant")],fireworks:[tt.t("celebration"),tt.t("explosions"),tt.t("celebrate")],sparkler:[tt.t("celebration"),tt.t("fireworks"),tt.t("sparkle")],sparkles:[tt.t("sparkle"),tt.t("star"),tt.t("glitter"),tt.t("shine")],balloon:[tt.t("celebration")],tada:[tt.t("celebration"),tt.t("party"),tt.t("popper"),tt.t("tada"),tt.t("celebrate"),tt.t("fan"),tt.t("fare"),tt.t("confetti")],confetti_ball:[tt.t("ball"),tt.t("celebration"),tt.t("confetti"),tt.t("party"),tt.t("celebrate")],tanabata_tree:[tt.t("banner"),tt.t("celebration"),tt.t("Japanese"),tt.t("tree"),tt.t("plant")],bamboo:[tt.t("bamboo"),tt.t("celebration"),tt.t("Japanese"),tt.t("pine"),tt.t("plants")],dolls:[tt.t("celebration"),tt.t("doll"),tt.t("festival"),tt.t("Japanese")],flags:[tt.t("carp"),tt.t("celebration"),tt.t("streamer"),tt.t("flag")],wind_chime:[tt.t("bell"),tt.t("celebration"),tt.t("chime"),tt.t("wind")],rice_scene:[tt.t("celebration"),tt.t("ceremony"),tt.t("moon")],ribbon:[tt.t("celebration"),tt.t("bow"),tt.t("present"),tt.t("gift")],gift:[tt.t("box"),tt.t("celebration"),tt.t("gift"),tt.t("present"),tt.t("wrapped")],reminder_ribbon:[tt.t("celebration"),tt.t("reminder"),tt.t("ribbon")],admission_tickets:[tt.t("admission"),tt.t("ticket")],ticket:[tt.t("admission")],medal:[tt.t("celebration"),tt.t("medal"),tt.t("military")],trophy:[tt.t("prize")],sports_medal:[tt.t("medal")],first_place_medal:[tt.t("first"),tt.t("gold"),tt.t("medal")],second_place_medal:[tt.t("medal"),tt.t("second"),tt.t("silver")],third_place_medal:[tt.t("bronze"),tt.t("medal"),tt.t("third")],soccer:[tt.t("ball"),tt.t("football"),tt.t("soccer"),tt.t("sport")],baseball:[tt.t("ball"),tt.t("sports")],basketball:[tt.t("ball"),tt.t("hoop"),tt.t("sports")],volleyball:[tt.t("ball"),tt.t("game")],football:[tt.t("american"),tt.t("ball"),tt.t("football"),tt.t("sport")],rugby_football:[tt.t("ball"),tt.t("football"),tt.t("rugby"),tt.t("sport")],tennis:[tt.t("ball"),tt.t("racquet"),tt.t("sport")],"8ball":[tt.t("8"),tt.t("8 ball"),tt.t("ball"),tt.t("billiard"),tt.t("eight"),tt.t("game"),tt.t("eightball")],bowling:[tt.t("ball"),tt.t("game"),tt.t("sport")],cricket_bat_and_ball:[tt.t("ball"),tt.t("bat"),tt.t("game")],field_hockey_stick_and_ball:[tt.t("ball"),tt.t("field"),tt.t("game"),tt.t("hockey"),tt.t("stick")],ice_hockey_stick_and_puck:[tt.t("game"),tt.t("hockey"),tt.t("ice"),tt.t("puck"),tt.t("stick")],table_tennis_paddle_and_ball:[tt.t("ball"),tt.t("bat"),tt.t("game"),tt.t("paddle"),tt.t("table tennis")],badminton_racquet_and_shuttlecock:[tt.t("birdie"),tt.t("game"),tt.t("racquet"),tt.t("shuttlecock")],boxing_glove:[tt.t("boxing"),tt.t("glove")],martial_arts_uniform:[tt.t("judo"),tt.t("karate"),tt.t("martial arts"),tt.t("taekwondo"),tt.t("uniform")],goal_net:[tt.t("goal"),tt.t("net")],dart:[tt.t("bull"),tt.t("bullseye"),tt.t("dart"),tt.t("eye"),tt.t("game"),tt.t("hit"),tt.t("target")],golf:[tt.t("golf"),tt.t("hole"),tt.t("sport")],ice_skate:[tt.t("ice"),tt.t("skate")],fishing_pole_and_fish:[tt.t("fish"),tt.t("pole"),tt.t("fishing"),tt.t("rod")],running_shirt_with_sash:[tt.t("athletics"),tt.t("running"),tt.t("sash"),tt.t("shirt"),tt.t("clothing")],ski:[tt.t("ski"),tt.t("snow"),tt.t("sport")],sled:[tt.t("sledge"),tt.t("sleigh")],curling_stone:[tt.t("game"),tt.t("rock")],video_game:[tt.t("controller"),tt.t("game")],joystick:[tt.t("game"),tt.t("video game")],game_die:[tt.t("dice"),tt.t("die"),tt.t("game")],spades:[tt.t("card"),tt.t("game"),tt.t("symbol")],hearts:[tt.t("card"),tt.t("game"),tt.t("heart")],diamonds:[tt.t("card"),tt.t("game"),tt.t("symbol")],clubs:[tt.t("card"),tt.t("game"),tt.t("symbol")],black_joker:[tt.t("card"),tt.t("game"),tt.t("wildcard"),tt.t("symbol")],mahjong:[tt.t("game"),tt.t("mahjong"),tt.t("red")],flower_playing_cards:[tt.t("card"),tt.t("flower"),tt.t("game"),tt.t("Japanese"),tt.t("playing")],mute:[tt.t("mute"),tt.t("quiet"),tt.t("silent"),tt.t("speaker"),tt.t("sound"),tt.t("volume")],speaker:[tt.t("soft"),tt.t("volume"),tt.t("sound")],sound:[tt.t("medium"),tt.t("speaker")],loud_sound:[tt.t("loud"),tt.t("sound"),tt.t("speaker")],loudspeaker:[tt.t("loud"),tt.t("public address"),tt.t("speaker")],mega:[tt.t("cheering"),tt.t("sound"),tt.t("speaker")],postal_horn:[tt.t("horn"),tt.t("post"),tt.t("postal")],no_bell:[tt.t("bell"),tt.t("forbidden"),tt.t("mute"),tt.t("no"),tt.t("not"),tt.t("prohibited"),tt.t("quiet"),tt.t("silent")],musical_score:[tt.t("music"),tt.t("score")],musical_note:[tt.t("music"),tt.t("note")],notes:[tt.t("music"),tt.t("note"),tt.t("notes")],studio_microphone:[tt.t("mic"),tt.t("microphone"),tt.t("music"),tt.t("studio")],level_slider:[tt.t("level"),tt.t("music"),tt.t("slider")],control_knobs:[tt.t("control"),tt.t("knobs"),tt.t("music")],microphone:[tt.t("karaoke"),tt.t("mic"),tt.t("music"),tt.t("instrument")],headphones:[tt.t("earbud"),tt.t("music")],radio:[tt.t("video"),tt.t("stereo")],saxophone:[tt.t("instrument"),tt.t("music"),tt.t("sax")],guitar:[tt.t("instrument"),tt.t("music")],musical_keyboard:[tt.t("instrument"),tt.t("keyboard"),tt.t("music"),tt.t("piano")],trumpet:[tt.t("instrument"),tt.t("music"),tt.t("horn")],violin:[tt.t("instrument"),tt.t("music")],drum_with_drumsticks:[tt.t("drumsticks"),tt.t("music")],iphone:[tt.t("cell"),tt.t("mobile"),tt.t("phone"),tt.t("telephone"),tt.t("ios")],calling:[tt.t("arrow"),tt.t("call"),tt.t("cell"),tt.t("mobile"),tt.t("phone"),tt.t("receive"),tt.t("telephone")],phone:[tt.t("phone"),tt.t("telephone")],telephone_receiver:[tt.t("phone"),tt.t("receiver"),tt.t("telephone")],fax:[tt.t("fax"),tt.t("work")],electric_plug:[tt.t("electric"),tt.t("electricity"),tt.t("plug"),tt.t("cord")],computer:[tt.t("computer"),tt.t("pc"),tt.t("personal"),tt.t("desktop"),tt.t("work")],desktop_computer:[tt.t("computer"),tt.t("desktop")],printer:[tt.t("computer")],keyboard:[tt.t("computer")],three_button_mouse:[tt.t("computer")],trackball:[tt.t("computer")],minidisc:[tt.t("computer"),tt.t("disk"),tt.t("minidisk"),tt.t("optical")],floppy_disk:[tt.t("computer"),tt.t("disk"),tt.t("floppy")],cd:[tt.t("cd"),tt.t("computer"),tt.t("disk"),tt.t("optical")],dvd:[tt.t("blu-ray"),tt.t("computer"),tt.t("disk"),tt.t("optical"),tt.t("cd"),tt.t("disc")],movie_camera:[tt.t("camera"),tt.t("cinema"),tt.t("movie"),tt.t("film")],film_frames:[tt.t("cinema"),tt.t("film"),tt.t("frames"),tt.t("movie")],film_projector:[tt.t("cinema"),tt.t("film"),tt.t("movie"),tt.t("projector"),tt.t("video")],clapper:[tt.t("clapper"),tt.t("movie"),tt.t("cinema")],tv:[tt.t("tv"),tt.t("video"),tt.t("television")],camera:[tt.t("video")],camera_with_flash:[tt.t("camera"),tt.t("flash"),tt.t("video")],video_camera:[tt.t("camera"),tt.t("video")],vhs:[tt.t("tape"),tt.t("vhs"),tt.t("video")],mag:[tt.t("glass"),tt.t("magnifying"),tt.t("search"),tt.t("tool"),tt.t("zoom")],mag_right:[tt.t("glass"),tt.t("magnifying"),tt.t("search"),tt.t("tool"),tt.t("zoom")],microscope:[tt.t("science"),tt.t("tool")],telescope:[tt.t("science"),tt.t("tool")],satellite_antenna:[tt.t("antenna"),tt.t("dish"),tt.t("satellite"),tt.t("tv")],candle:[tt.t("light")],bulb:[tt.t("bulb"),tt.t("comic"),tt.t("electric"),tt.t("idea"),tt.t("light")],flashlight:[tt.t("electric"),tt.t("light"),tt.t("tool"),tt.t("torch")],izakaya_lantern:[tt.t("bar"),tt.t("lantern"),tt.t("light"),tt.t("red")],notebook_with_decorative_cover:[tt.t("book"),tt.t("cover"),tt.t("decorated"),tt.t("notebook")],closed_book:[tt.t("book"),tt.t("closed")],book:[tt.t("book"),tt.t("open")],green_book:[tt.t("book"),tt.t("green")],blue_book:[tt.t("blue"),tt.t("book")],orange_book:[tt.t("book"),tt.t("orange")],books:[tt.t("book")],ledger:[tt.t("notebook"),tt.t("book")],page_with_curl:[tt.t("curl"),tt.t("document"),tt.t("page"),tt.t("paper")],scroll:[tt.t("paper")],page_facing_up:[tt.t("document"),tt.t("page"),tt.t("paper")],newspaper:[tt.t("news"),tt.t("paper")],rolled_up_newspaper:[tt.t("news"),tt.t("newspaper"),tt.t("paper"),tt.t("rolled")],bookmark_tabs:[tt.t("bookmark"),tt.t("mark"),tt.t("marker"),tt.t("tabs")],bookmark:[tt.t("mark")],moneybag:[tt.t("bag"),tt.t("dollar"),tt.t("money"),tt.t("moneybag"),tt.t("cash")],yen:[tt.t("bank"),tt.t("banknote"),tt.t("bill"),tt.t("currency"),tt.t("money"),tt.t("note"),tt.t("yen"),tt.t("cash")],dollar:[tt.t("bank"),tt.t("banknote"),tt.t("bill"),tt.t("currency"),tt.t("dollar"),tt.t("money"),tt.t("note"),tt.t("cash")],euro:[tt.t("bank"),tt.t("banknote"),tt.t("bill"),tt.t("currency"),tt.t("euro"),tt.t("money"),tt.t("note"),tt.t("cash")],pound:[tt.t("bank"),tt.t("banknote"),tt.t("bill"),tt.t("currency"),tt.t("money"),tt.t("note"),tt.t("pound"),tt.t("cash")],money_with_wings:[tt.t("bank"),tt.t("banknote"),tt.t("bill"),tt.t("dollar"),tt.t("fly"),tt.t("money"),tt.t("note"),tt.t("wings"),tt.t("cash")],credit_card:[tt.t("bank"),tt.t("card"),tt.t("credit"),tt.t("money")],chart:[tt.t("bank"),tt.t("chart"),tt.t("currency"),tt.t("graph"),tt.t("growth"),tt.t("market"),tt.t("money"),tt.t("rise"),tt.t("trend"),tt.t("upward"),tt.t("yen")],currency_exchange:[tt.t("bank"),tt.t("currency"),tt.t("exchange"),tt.t("money"),tt.t("symbol")],heavy_dollar_sign:[tt.t("currency"),tt.t("dollar"),tt.t("money"),tt.t("symbol")],email:[tt.t("email"),tt.t("letter"),tt.t("mail"),tt.t("envelope")],"e-mail":[tt.t("email"),tt.t("letter"),tt.t("mail"),tt.t("envelope")],incoming_envelope:[tt.t("e-mail"),tt.t("email"),tt.t("envelope"),tt.t("incoming"),tt.t("letter"),tt.t("mail"),tt.t("receive"),tt.t("work")],envelope_with_arrow:[tt.t("arrow"),tt.t("down"),tt.t("e-mail"),tt.t("email"),tt.t("envelope"),tt.t("letter"),tt.t("mail"),tt.t("outgoing"),tt.t("sent")],outbox_tray:[tt.t("box"),tt.t("letter"),tt.t("mail"),tt.t("outbox"),tt.t("sent"),tt.t("tray")],inbox_tray:[tt.t("box"),tt.t("inbox"),tt.t("letter"),tt.t("mail"),tt.t("receive"),tt.t("tray"),tt.t("email"),tt.t("work")],package:[tt.t("box"),tt.t("parcel"),tt.t("shipping")],mailbox:[tt.t("closed"),tt.t("mail"),tt.t("mailbox"),tt.t("postbox"),tt.t("post")],mailbox_closed:[tt.t("closed"),tt.t("lowered"),tt.t("mail"),tt.t("mailbox"),tt.t("postbox"),tt.t("post")],mailbox_with_mail:[tt.t("mail"),tt.t("mailbox"),tt.t("open"),tt.t("postbox"),tt.t("post")],mailbox_with_no_mail:[tt.t("lowered"),tt.t("mail"),tt.t("mailbox"),tt.t("open"),tt.t("postbox"),tt.t("post")],postbox:[tt.t("mail"),tt.t("mailbox"),tt.t("post")],ballot_box_with_ballot:[tt.t("ballot"),tt.t("box")],black_nib:[tt.t("nib"),tt.t("pen"),tt.t("symbol")],lower_left_fountain_pen:[tt.t("fountain"),tt.t("pen")],lower_left_ballpoint_pen:[tt.t("ballpoint")],lower_left_paintbrush:[tt.t("painting")],memo:[tt.t("pencil"),tt.t("note"),tt.t("work")],file_folder:[tt.t("file"),tt.t("folder"),tt.t("work")],open_file_folder:[tt.t("file"),tt.t("folder"),tt.t("open"),tt.t("work")],card_index_dividers:[tt.t("card"),tt.t("dividers"),tt.t("index")],date:[tt.t("date"),tt.t("calendar")],calendar:[tt.t("calendar"),tt.t("work"),tt.t("date")],spiral_note_pad:[tt.t("note"),tt.t("pad"),tt.t("spiral")],spiral_calendar_pad:[tt.t("calendar"),tt.t("pad"),tt.t("spiral")],card_index:[tt.t("card"),tt.t("index"),tt.t("rolodex")],chart_with_upwards_trend:[tt.t("chart"),tt.t("graph"),tt.t("growth"),tt.t("trend"),tt.t("upward"),tt.t("with"),tt.t("upwards")],chart_with_downwards_trend:[tt.t("chart"),tt.t("down"),tt.t("graph"),tt.t("trend"),tt.t("with"),tt.t("downwards")],bar_chart:[tt.t("bar"),tt.t("chart"),tt.t("graph")],pushpin:[tt.t("pin"),tt.t("thumbtack")],round_pushpin:[tt.t("pin"),tt.t("pushpin"),tt.t("map")],linked_paperclips:[tt.t("link"),tt.t("paperclip")],straight_ruler:[tt.t("ruler"),tt.t("straight edge")],triangular_ruler:[tt.t("ruler"),tt.t("set"),tt.t("triangle")],scissors:[tt.t("cutting"),tt.t("tool")],card_file_box:[tt.t("box"),tt.t("card"),tt.t("file")],file_cabinet:[tt.t("cabinet"),tt.t("file"),tt.t("filing")],lock:[tt.t("closed")],unlock:[tt.t("lock"),tt.t("open"),tt.t("unlock"),tt.t("security")],lock_with_ink_pen:[tt.t("ink"),tt.t("lock"),tt.t("nib"),tt.t("pen"),tt.t("privacy"),tt.t("security")],closed_lock_with_key:[tt.t("closed"),tt.t("key"),tt.t("lock"),tt.t("secure")],key:[tt.t("lock"),tt.t("password")],old_key:[tt.t("clue"),tt.t("key"),tt.t("lock"),tt.t("old")],hammer:[tt.t("tool")],pick:[tt.t("mining"),tt.t("tool")],hammer_and_pick:[tt.t("hammer"),tt.t("pick"),tt.t("tool")],hammer_and_wrench:[tt.t("hammer"),tt.t("spanner"),tt.t("tool"),tt.t("wrench")],dagger_knife:[tt.t("knife"),tt.t("weapon")],crossed_swords:[tt.t("crossed"),tt.t("swords"),tt.t("weapon")],gun:[tt.t("gun"),tt.t("handgun"),tt.t("revolver"),tt.t("tool"),tt.t("weapon"),tt.t("bullet"),tt.t("shoot")],bow_and_arrow:[tt.t("archer"),tt.t("archery"),tt.t("arrow"),tt.t("bow"),tt.t("Sagittarius"),tt.t("tool"),tt.t("weapon"),tt.t("zodiac")],shield:[tt.t("weapon")],wrench:[tt.t("spanner"),tt.t("tool")],nut_and_bolt:[tt.t("bolt"),tt.t("nut"),tt.t("tool")],gear:[tt.t("tool")],compression:[tt.t("compress"),tt.t("tool"),tt.t("vice")],alembic:[tt.t("chemistry"),tt.t("tool")],scales:[tt.t("balance"),tt.t("justice"),tt.t("Libra"),tt.t("scales"),tt.t("tool"),tt.t("weight"),tt.t("zodiac")],chains:[tt.t("chain")],syringe:[tt.t("doctor"),tt.t("medicine"),tt.t("needle"),tt.t("shot"),tt.t("sick"),tt.t("tool")],pill:[tt.t("doctor"),tt.t("medicine"),tt.t("sick"),tt.t("drugs")],smoking:[tt.t("smoking"),tt.t("cigarette")],coffin:[tt.t("death")],funeral_urn:[tt.t("ashes"),tt.t("death"),tt.t("funeral"),tt.t("urn")],moyai:[tt.t("face"),tt.t("moyai"),tt.t("statue"),tt.t("easter"),tt.t("island"),tt.t("head")],oil_drum:[tt.t("drum"),tt.t("oil")],crystal_ball:[tt.t("ball"),tt.t("crystal"),tt.t("fairy tale"),tt.t("fantasy"),tt.t("fortune"),tt.t("tool"),tt.t("future")],shopping_trolley:[tt.t("cart"),tt.t("shopping"),tt.t("trolley")],atm:[tt.t("atm"),tt.t("automated"),tt.t("bank"),tt.t("teller"),tt.t("symbols")],put_litter_in_its_place:[tt.t("litter"),tt.t("litter bin"),tt.t("symbol"),tt.t("garbage")],potable_water:[tt.t("drinking"),tt.t("potable"),tt.t("water"),tt.t("symbol")],wheelchair:[tt.t("access"),tt.t("symbol")],mens:[tt.t("lavatory"),tt.t("man"),tt.t("restroom"),tt.t("wc"),tt.t("symbol")],womens:[tt.t("lavatory"),tt.t("restroom"),tt.t("wc"),tt.t("woman"),tt.t("symbol")],restroom:[tt.t("lavatory"),tt.t("WC"),tt.t("symbol")],baby_symbol:[tt.t("baby"),tt.t("changing"),tt.t("symbol")],wc:[tt.t("closet"),tt.t("lavatory"),tt.t("restroom"),tt.t("water"),tt.t("wc"),tt.t("symbol")],passport_control:[tt.t("control"),tt.t("passport"),tt.t("symbol")],baggage_claim:[tt.t("baggage"),tt.t("claim"),tt.t("symbol")],left_luggage:[tt.t("baggage"),tt.t("locker"),tt.t("luggage"),tt.t("symbol")],children_crossing:[tt.t("child"),tt.t("crossing"),tt.t("pedestrian"),tt.t("traffic"),tt.t("symbol")],no_entry:[tt.t("entry"),tt.t("forbidden"),tt.t("no"),tt.t("not"),tt.t("prohibited"),tt.t("traffic"),tt.t("symbol")],no_entry_sign:[tt.t("entry"),tt.t("forbidden"),tt.t("no"),tt.t("not"),tt.t("symbol")],no_bicycles:[tt.t("bicycle"),tt.t("bike"),tt.t("forbidden"),tt.t("no"),tt.t("not"),tt.t("prohibited"),tt.t("symbol")],no_smoking:[tt.t("forbidden"),tt.t("no"),tt.t("not"),tt.t("prohibited"),tt.t("smoking"),tt.t("symbol")],do_not_litter:[tt.t("forbidden"),tt.t("litter"),tt.t("no"),tt.t("not"),tt.t("prohibited"),tt.t("symbol")],"non-potable_water":[tt.t("non-drinking"),tt.t("non-potable"),tt.t("water"),tt.t("symbol")],no_pedestrians:[tt.t("forbidden"),tt.t("no"),tt.t("not"),tt.t("pedestrian"),tt.t("prohibited"),tt.t("symbol")],no_mobile_phones:[tt.t("cell"),tt.t("forbidden"),tt.t("mobile"),tt.t("no"),tt.t("not"),tt.t("phone"),tt.t("prohibited"),tt.t("telephone"),tt.t("symbol")],underage:[tt.t("18"),tt.t("age restriction"),tt.t("eighteen"),tt.t("forbidden"),tt.t("no"),tt.t("not"),tt.t("prohibited"),tt.t("underage"),tt.t("symbol")],radioactive_sign:[tt.t("sign")],biohazard_sign:[tt.t("sign")],arrow_up:[tt.t("arrow"),tt.t("cardinal"),tt.t("direction"),tt.t("north"),tt.t("symbol")],arrow_upper_right:[tt.t("arrow"),tt.t("direction"),tt.t("intercardinal"),tt.t("northeast"),tt.t("symbol")],arrow_right:[tt.t("arrow"),tt.t("cardinal"),tt.t("direction"),tt.t("east"),tt.t("symbol")],arrow_lower_right:[tt.t("arrow"),tt.t("direction"),tt.t("intercardinal"),tt.t("southeast"),tt.t("symbol")],arrow_down:[tt.t("arrow"),tt.t("cardinal"),tt.t("direction"),tt.t("down"),tt.t("south"),tt.t("symbol")],arrow_lower_left:[tt.t("arrow"),tt.t("direction"),tt.t("intercardinal"),tt.t("southwest"),tt.t("symbol")],arrow_left:[tt.t("arrow"),tt.t("cardinal"),tt.t("direction"),tt.t("west"),tt.t("symbol")],arrow_upper_left:[tt.t("arrow"),tt.t("direction"),tt.t("intercardinal"),tt.t("northwest"),tt.t("symbol")],arrow_up_down:[tt.t("arrow"),tt.t("symbol")],left_right_arrow:[tt.t("arrow"),tt.t("symbol")],leftwards_arrow_with_hook:[tt.t("arrow"),tt.t("symbol")],arrow_right_hook:[tt.t("arrow"),tt.t("symbol")],arrow_heading_up:[tt.t("arrow"),tt.t("symbol")],arrow_heading_down:[tt.t("arrow"),tt.t("down"),tt.t("symbol")],arrows_clockwise:[tt.t("arrow"),tt.t("clockwise"),tt.t("reload"),tt.t("symbol")],arrows_counterclockwise:[tt.t("anticlockwise"),tt.t("arrow"),tt.t("counterclockwise"),tt.t("withershins"),tt.t("symbol")],back:[tt.t("arrow"),tt.t("back"),tt.t("symbol")],end:[tt.t("arrow"),tt.t("end"),tt.t("symbol")],on:[tt.t("arrow"),tt.t("mark"),tt.t("on"),tt.t("symbol")],soon:[tt.t("arrow"),tt.t("soon"),tt.t("symbol")],top:[tt.t("arrow"),tt.t("top"),tt.t("up"),tt.t("symbol")],place_of_worship:[tt.t("religion"),tt.t("worship")],atom_symbol:[tt.t("atheist"),tt.t("atom")],om_symbol:[tt.t("Hindu"),tt.t("religion")],star_of_david:[tt.t("David"),tt.t("Jew"),tt.t("Jewish"),tt.t("religion"),tt.t("star")],wheel_of_dharma:[tt.t("Buddhist"),tt.t("dharma"),tt.t("religion"),tt.t("wheel")],yin_yang:[tt.t("religion"),tt.t("tao"),tt.t("taoist"),tt.t("yang"),tt.t("yin")],latin_cross:[tt.t("Christian"),tt.t("cross"),tt.t("religion")],orthodox_cross:[tt.t("Christian"),tt.t("cross"),tt.t("religion")],star_and_crescent:[tt.t("islam"),tt.t("Muslim"),tt.t("religion")],peace_symbol:[tt.t("peace")],menorah_with_nine_branches:[tt.t("candelabrum"),tt.t("candlestick"),tt.t("religion")],six_pointed_star:[tt.t("fortune"),tt.t("star"),tt.t("symbol")],aries:[tt.t("ram"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],taurus:[tt.t("bull"),tt.t("ox"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],gemini:[tt.t("twins"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],cancer:[tt.t("crab"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],leo:[tt.t("lion"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],virgo:[tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],libra:[tt.t("balance"),tt.t("justice"),tt.t("scales"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],scorpius:[tt.t("scorpion"),tt.t("scorpius"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],sagittarius:[tt.t("archer"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],capricorn:[tt.t("goat"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],aquarius:[tt.t("bearer"),tt.t("water"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],pisces:[tt.t("fish"),tt.t("zodiac"),tt.t("horoscope"),tt.t("astrology")],ophiuchus:[tt.t("bearer"),tt.t("serpent"),tt.t("snake"),tt.t("zodiac"),tt.t("symbol")],twisted_rightwards_arrows:[tt.t("arrow"),tt.t("crossed"),tt.t("symbol")],repeat:[tt.t("arrow"),tt.t("clockwise"),tt.t("repeat"),tt.t("symbol")],repeat_one:[tt.t("arrow"),tt.t("clockwise"),tt.t("once"),tt.t("symbol")],arrow_forward:[tt.t("arrow"),tt.t("play"),tt.t("right"),tt.t("triangle"),tt.t("symbol")],fast_forward:[tt.t("arrow"),tt.t("double"),tt.t("fast"),tt.t("forward"),tt.t("symbol")],black_right_pointing_double_triangle_with_vertical_bar:[tt.t("arrow"),tt.t("next scene"),tt.t("next track"),tt.t("triangle")],black_right_pointing_triangle_with_double_vertical_bar:[tt.t("arrow"),tt.t("pause"),tt.t("play"),tt.t("right"),tt.t("triangle")],arrow_backward:[tt.t("arrow"),tt.t("left"),tt.t("reverse"),tt.t("triangle"),tt.t("symbol")],rewind:[tt.t("arrow"),tt.t("double"),tt.t("rewind"),tt.t("symbol")],black_left_pointing_double_triangle_with_vertical_bar:[tt.t("arrow"),tt.t("previous scene"),tt.t("previous track"),tt.t("triangle")],arrow_up_small:[tt.t("arrow"),tt.t("button"),tt.t("red"),tt.t("symbol")],arrow_double_up:[tt.t("arrow"),tt.t("double"),tt.t("symbol")],arrow_down_small:[tt.t("arrow"),tt.t("button"),tt.t("down"),tt.t("red"),tt.t("symbol")],arrow_double_down:[tt.t("arrow"),tt.t("double"),tt.t("down"),tt.t("symbol")],double_vertical_bar:[tt.t("bar"),tt.t("double"),tt.t("pause"),tt.t("vertical")],black_square_for_stop:[tt.t("square"),tt.t("stop")],black_circle_for_record:[tt.t("circle"),tt.t("record")],eject:[tt.t("eject")],cinema:[tt.t("camera"),tt.t("film"),tt.t("movie"),tt.t("symbol")],low_brightness:[tt.t("brightness"),tt.t("dim"),tt.t("low"),tt.t("symbol")],high_brightness:[tt.t("bright"),tt.t("brightness"),tt.t("symbol")],signal_strength:[tt.t("antenna"),tt.t("bar"),tt.t("cell"),tt.t("mobile"),tt.t("phone"),tt.t("signal"),tt.t("telephone"),tt.t("symbol")],vibration_mode:[tt.t("cell"),tt.t("mobile"),tt.t("mode"),tt.t("phone"),tt.t("telephone"),tt.t("vibration"),tt.t("symbol")],mobile_phone_off:[tt.t("cell"),tt.t("mobile"),tt.t("off"),tt.t("phone"),tt.t("telephone")],female_sign:[tt.t("woman")],male_sign:[tt.t("man")],medical_symbol:[tt.t("aesculapius"),tt.t("medicine"),tt.t("staff")],recycle:[tt.t("recycle"),tt.t("symbol")],trident:[tt.t("anchor"),tt.t("emblem"),tt.t("ship"),tt.t("tool"),tt.t("trident")],name_badge:[tt.t("badge"),tt.t("name")],beginner:[tt.t("beginner"),tt.t("chevron"),tt.t("green"),tt.t("Japanese"),tt.t("leaf"),tt.t("tool"),tt.t("yellow"),tt.t("symbol")],o:[tt.t("circle"),tt.t("o"),tt.t("symbol"),tt.t("letter")],white_check_mark:[tt.t("check"),tt.t("mark"),tt.t("green")],ballot_box_with_check:[tt.t("ballot"),tt.t("box"),tt.t("check"),tt.t("black")],heavy_check_mark:[tt.t("check"),tt.t("mark"),tt.t("symbol")],heavy_multiplication_x:[tt.t("cancel"),tt.t("multiplication"),tt.t("multiply"),tt.t("x"),tt.t("symbol")],x:[tt.t("cancel"),tt.t("mark"),tt.t("multiplication"),tt.t("multiply"),tt.t("x"),tt.t("letter"),tt.t("cross"),tt.t("symbol")],negative_squared_cross_mark:[tt.t("mark"),tt.t("square"),tt.t("cross"),tt.t("green"),tt.t("x")],heavy_plus_sign:[tt.t("math"),tt.t("plus"),tt.t("symbol"),tt.t("+")],heavy_minus_sign:[tt.t("math"),tt.t("minus"),tt.t("symbol"),tt.t("-")],heavy_division_sign:[tt.t("division"),tt.t("math"),tt.t("symbol")],curly_loop:[tt.t("curl"),tt.t("loop"),tt.t("symbol")],loop:[tt.t("curl"),tt.t("double"),tt.t("loop"),tt.t("symbol")],part_alternation_mark:[tt.t("mark"),tt.t("part"),tt.t("symbol")],eight_spoked_asterisk:[tt.t("asterisk"),tt.t("symbol")],eight_pointed_black_star:[tt.t("star"),tt.t("symbol")],bangbang:[tt.t("bangbang"),tt.t("exclamation"),tt.t("mark"),tt.t("punctuation"),tt.t("symbols"),tt.t("!")],interrobang:[tt.t("exclamation"),tt.t("interrobang"),tt.t("mark"),tt.t("punctuation"),tt.t("question"),tt.t("symbol"),tt.t("!"),tt.t("?")],question:[tt.t("mark"),tt.t("punctuation"),tt.t("question"),tt.t("symbol"),tt.t("?")],grey_question:[tt.t("mark"),tt.t("outlined"),tt.t("punctuation"),tt.t("question"),tt.t("symbol"),tt.t("?")],grey_exclamation:[tt.t("exclamation"),tt.t("mark"),tt.t("outlined"),tt.t("punctuation"),tt.t("symbol"),tt.t("!")],exclamation:[tt.t("exclamation"),tt.t("mark"),tt.t("punctuation"),tt.t("symbol"),tt.t("!")],wavy_dash:[tt.t("dash"),tt.t("punctuation"),tt.t("wavy"),tt.t("symbol")],tm:[tt.t("mark"),tt.t("tm"),tt.t("trademark"),tt.t("symbol")],capital_abcd:[tt.t("ABCD"),tt.t("input"),tt.t("latin"),tt.t("letters"),tt.t("uppercase")],abcd:[tt.t("abcd"),tt.t("input"),tt.t("latin"),tt.t("letters"),tt.t("lowercase")],symbols:[tt.t("\u3012\u266a&%"),tt.t("input")],abc:[tt.t("abc"),tt.t("alphabet"),tt.t("input"),tt.t("latin"),tt.t("letters")],a:[tt.t("a"),tt.t("blood type"),tt.t("letters")],ab:[tt.t("ab"),tt.t("blood type"),tt.t("letters")],b:[tt.t("b"),tt.t("blood type"),tt.t("symbols")],cl:[tt.t("cl")],cool:[tt.t("cool"),tt.t("symbol")],free:[tt.t("free"),tt.t("symbol")],information_source:[tt.t("i"),tt.t("symbol")],id:[tt.t("id"),tt.t("identity")],m:[tt.t("circle"),tt.t("m")],new:[tt.t("new")],ng:[tt.t("ng")],o2:[tt.t("blood type"),tt.t("o"),tt.t("symbol")],ok:[tt.t("OK"),tt.t("letters"),tt.t("symbol")],parking:[tt.t("parking"),tt.t("symbol")],sos:[tt.t("help"),tt.t("sos"),tt.t("symbol")],up:[tt.t("mark"),tt.t("up"),tt.t("symbol")],vs:[tt.t("versus"),tt.t("vs")],koko:[tt.t("\u201chere\u201d"),tt.t("Japanese"),tt.t("katakana"),tt.t("\u30b3\u30b3"),tt.t("symbol")],sa:[tt.t("\u201cservice charge\u201d"),tt.t("Japanese"),tt.t("katakana"),tt.t("\u30b5")],u6708:[tt.t("\u201cmonthly amount\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u6708")],u6709:[tt.t("\u201cnot free of charge\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u6709")],u6307:[tt.t("\u201creserved\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u6307")],ideograph_advantage:[tt.t("\u201cbargain\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u5f97"),tt.t("symbol")],u5272:[tt.t("\u201cdiscount\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u5272")],u7121:[tt.t("\u201cfree of charge\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u7121")],u7981:[tt.t("\u201cprohibited\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u7981")],accept:[tt.t("\u201cacceptable\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u53ef")],u7533:[tt.t("\u201capplication\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u7533")],u5408:[tt.t("\u201cpassing grade\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u5408")],u7a7a:[tt.t("\u201cvacancy\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u7a7a")],congratulations:[tt.t("\u201ccongratulations\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u795d"),tt.t("symbol")],secret:[tt.t("\u201csecret\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u79d8"),tt.t("symbol")],u55b6:[tt.t("\u201copen for business\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u55b6")],u6e80:[tt.t("\u201cno vacancy\u201d"),tt.t("ideograph"),tt.t("Japanese"),tt.t("\u6e80")],black_small_square:[tt.t("geometric"),tt.t("square"),tt.t("symbol")],white_small_square:[tt.t("geometric"),tt.t("square"),tt.t("symbol")],white_medium_square:[tt.t("geometric"),tt.t("square"),tt.t("symbol")],black_medium_square:[tt.t("geometric"),tt.t("square"),tt.t("symbol")],white_medium_small_square:[tt.t("geometric"),tt.t("square"),tt.t("symbol")],black_medium_small_square:[tt.t("geometric"),tt.t("square"),tt.t("symbol")],black_large_square:[tt.t("geometric"),tt.t("square"),tt.t("symbol")],white_large_square:[tt.t("geometric"),tt.t("square"),tt.t("symbol")],large_orange_diamond:[tt.t("diamond"),tt.t("geometric"),tt.t("orange"),tt.t("symbol")],large_blue_diamond:[tt.t("blue"),tt.t("diamond"),tt.t("geometric"),tt.t("symbol")],small_orange_diamond:[tt.t("diamond"),tt.t("geometric"),tt.t("orange"),tt.t("symbol")],small_blue_diamond:[tt.t("blue"),tt.t("diamond"),tt.t("geometric"),tt.t("symbol")],small_red_triangle:[tt.t("geometric"),tt.t("red"),tt.t("symbol")],small_red_triangle_down:[tt.t("down"),tt.t("geometric"),tt.t("red"),tt.t("symbol")],diamond_shape_with_a_dot_inside:[tt.t("comic"),tt.t("diamond"),tt.t("geometric"),tt.t("inside"),tt.t("gem")],radio_button:[tt.t("button"),tt.t("geometric"),tt.t("radio")],black_square_button:[tt.t("button"),tt.t("geometric"),tt.t("square"),tt.t("symbol")],white_square_button:[tt.t("button"),tt.t("geometric"),tt.t("outlined"),tt.t("square"),tt.t("symbol")],white_circle:[tt.t("circle"),tt.t("geometric"),tt.t("symbol")],black_circle:[tt.t("circle"),tt.t("geometric"),tt.t("symbol")],red_circle:[tt.t("circle"),tt.t("geometric"),tt.t("red"),tt.t("symbol")],large_blue_circle:[tt.t("blue"),tt.t("circle"),tt.t("geometric"),tt.t("symbol")],checkered_flag:[tt.t("checkered"),tt.t("chequered"),tt.t("racing"),tt.t("finish"),tt.t("line"),tt.t("race")],triangular_flag_on_post:[tt.t("post"),tt.t("flag")],crossed_flags:[tt.t("celebration"),tt.t("cross"),tt.t("crossed"),tt.t("Japanese"),tt.t("flag")],waving_black_flag:[tt.t("waving")],waving_white_flag:[tt.t("waving")],"rainbow-flag":[tt.t("rainbow")],sparkle:[tt.t("symbol")],copyright:[tt.t("symbol")],registered:[tt.t("symbol")],warning:[tt.t("symbol")],fountain:[],pencil2:[],sushi:[tt.t("food")],rat:[tt.t("animal")],mouse2:[tt.t("animal")],cow2:[tt.t("animal")],tiger2:[tt.t("animal"),tt.t("cat")],leopard:[tt.t("cat"),tt.t("animal")],crocodile:[tt.t("alligator"),tt.t("animal")],whale2:[tt.t("animal"),tt.t("fish")],snail:[tt.t("bug"),tt.t("insect")],monkey:[tt.t("animal")],elephant:[tt.t("animal")],octopus:[tt.t("animal"),tt.t("fish")],bird:[tt.t("animal")],man:[tt.t("person"),tt.t("people"),tt.t("face")],woman:[tt.t("lady"),tt.t("face"),tt.t("person"),tt.t("people")],family:[tt.t("man"),tt.t("woman"),tt.t("boy"),tt.t("people"),tt.t("person")],guardsman:[tt.t("face"),tt.t("people"),tt.t("person")],briefcase:[tt.t("work")],clipboard:[tt.t("work")],paperclip:[tt.t("work")],notebook:[tt.t("book")],pager:[],battery:[],bell:[],link:[tt.t("symbol")],keycap_ten:[tt.t("number"),tt.t("10")],door:[],toilet:[tt.t("bathroom"),tt.t("washroom"),tt.t("restroom")],customs:[tt.t("symbol")],hash:[tt.t("symbol")],zero:[tt.t("number"),tt.t("0")],one:[tt.t("number"),tt.t("1")],two:[tt.t("number"),tt.t("2")],three:[tt.t("number"),tt.t("3")],four:[tt.t("number"),tt.t("4")],five:[tt.t("number"),tt.t("5")],six:[tt.t("number"),tt.t("6")],seven:[tt.t("number"),tt.t("7")],eight:[tt.t("number"),tt.t("8")],nine:[tt.t("number"),tt.t("9")],"flag-ae":[tt.t("flag")],"flag-at":[tt.t("flag")],"flag-au":[tt.t("flag")],"flag-be":[tt.t("flag")],"flag-br":[tt.t("flag")],"flag-ca":[tt.t("flag")],"flag-ch":[tt.t("flag")],"flag-cl":[tt.t("flag")],cn:[tt.t("flag")],"flag-co":[tt.t("flag")],de:[tt.t("flag")],"flag-dk":[tt.t("flag")],es:[tt.t("flag")],"flag-fi":[tt.t("flag")],fr:[tt.t("flag")],gb:[tt.t("flag")],"flag-hk":[tt.t("flag")],"flag-id":[tt.t("flag")],"flag-ie":[tt.t("flag")],"flag-il":[tt.t("flag")],"flag-in":[tt.t("flag")],it:[tt.t("flag")],jp:[tt.t("flag")],kr:[tt.t("flag")],"flag-mo":[tt.t("flag")],"flag-mx":[tt.t("flag")],"flag-my":[tt.t("flag")],"flag-nl":[tt.t("flag")],"flag-no":[tt.t("flag")],"flag-nz":[tt.t("flag")],"flag-ph":[tt.t("flag")],"flag-pl":[tt.t("flag")],"flag-pr":[tt.t("flag")],"flag-pt":[tt.t("flag")],ru:[tt.t("flag")],"flag-sa":[tt.t("flag")],"flag-se":[tt.t("flag")],"flag-sg":[tt.t("flag")],"flag-tr":[tt.t("flag")],us:[tt.t("flag")],"flag-vn":[tt.t("flag")],"flag-za":[tt.t("flag")],"man-man-boy":[tt.t("person"),tt.t("people"),tt.t("family")],"man-man-boy-boy":[tt.t("person"),tt.t("people"),tt.t("family")],"man-man-girl":[tt.t("person"),tt.t("people"),tt.t("family")],"man-man-girl-boy":[tt.t("person"),tt.t("people"),tt.t("family")],"man-man-girl-girl":[tt.t("person"),tt.t("people"),tt.t("family")],"man-woman-boy-boy":[tt.t("person"),tt.t("people"),tt.t("family")],"man-woman-girl":[tt.t("person"),tt.t("people"),tt.t("family")],"man-woman-girl-boy":[tt.t("person"),tt.t("people"),tt.t("family")],"man-woman-girl-girl":[tt.t("person"),tt.t("people"),tt.t("family")],"man-heart-man":[tt.t("person"),tt.t("people"),tt.t("couple")],"man-kiss-man":[tt.t("person"),tt.t("people"),tt.t("couple")],"woman-woman-boy":[tt.t("family"),tt.t("people"),tt.t("person"),tt.t("woman")],"woman-woman-boy-boy":[tt.t("family"),tt.t("people"),tt.t("person"),tt.t("woman")],"woman-woman-girl":[tt.t("family"),tt.t("people"),tt.t("person"),tt.t("woman")],"woman-woman-girl-boy":[tt.t("family"),tt.t("people"),tt.t("person"),tt.t("woman")],"woman-woman-girl-girl":[tt.t("family"),tt.t("people"),tt.t("person"),tt.t("woman")],"woman-heart-woman":[tt.t("couple"),tt.t("people"),tt.t("person"),tt.t("woman")],"woman-kiss-woman":[tt.t("couple"),tt.t("people"),tt.t("person"),tt.t("woman")]}};var at=r(149);var nt=r(239);var it=r(130);var st=function e(t){var r="EMOJI_TRANSLATION";var a=Object(v["b"])({label:r});var n=Object(ue["p"])();var i=false;if(t){var s=Object(j["d"])(t);var o=s&&s.getState();i=o&&Object(ae["isFeatureEnabled"])(o,"feature_sonic_emoji")}var l=rt(i);if(Object(ue["f"])()){a.info("Emoji translations not needed for default locale, only adding keywords");Object(at["a"])({locale:n,localizedKeywordMap:l});return}if(!Object(nt["b"])(n)){a.info("Emoji translations not yet loaded for locale");return}if(Object(at["h"])(n)){a.info("Emoji translations already loaded for "+n);return}var c=et(i);if(!c){a.info("Emoji translation map is null, featureSonicEmoji is "+i);return}Object(at["b"])({locale:n,canonicalToLocalized:c});Object(at["a"])({locale:n,localizedKeywordMap:l});a.info("Emoji translations and keywords loaded for "+n)};st.propTypes=H["b"].string;var ot=st;Object(it["exportToGlobalDebugger"])("loadEmojiTranslations",st);var lt=r(799);var ct=r(810);var ut=r(936);var dt=Object(W["b"])("Load native and custom emoji",function(e,t){var r=t();var a=Object(Xe["getTeamId"])(r);e(Object(Ye["setStandardEmoji"])({standardEmojiData:ct,standardEmojiCategories:ut}));ot(a);return e(Ze()).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.emoji,n=t.cacheTs;if(Object(i["isEmpty"])(r))return;var s=Object(lt["i"])(r),o=s.emojis,l=s.aliases;e(Object(Ye["bulkAddCustomEmoji"])({teamId:a,cacheTs:n,emojis:o,aliases:l}))})});dt.propTypes=null;var pt=dt;var mt=r(1130);var ht=r(806);var ft=r(374);var vt=r(1131);var bt=r(741);var gt=r(602);var _t=r(51);var yt=r(1159);var kt=Object(yt["a"])(r(2303));var Ot=Object(yt["a"])(r(2304));var Et=Object(yt["a"])(r(2305));var wt=Object(yt["a"])(r(2306));function Ct(e){var t=s.a.camelCase(e);if(-1===t.indexOf("Store"))return null;t=t.slice(0,t.lastIndexOf("Store"));return t}function St(e){return s.a.reduce(e,function(e,t,r){var a=Ct(r);a&&(e[a]=t);return e},{})}var jt=n()({},St(kt),St(Et));var It=n()({},St(Ot),St(wt));Object(_t["a"])("interop.redux",{configureStore:o["a"],actions:{sendMessage:P["d"],prepareAndSendMessage:P["a"],saveMessageEdit:F["a"],removeMessageAndTimestamp:x["a"],openCustomStatusDialog:L["a"],openFileUploadDialog:B["a"],openShareDialog:U["a"],getChannelIdForSharing:ce["a"],openRenameFileDialog:Re["a"],openCreateGDocDialog:Ae,openSnippetDialog:We,universalSearchSetVisible:Ve["a"],clearSearchInput:ze["a"],editLastUserMessageText:Qe["a"],maybeAnimateDeleteMessage:Ke["a"],loadEmoji:pt},features:jt,middleware:{socketManager:D},models:n()({},It,{channelsMeta:{channelNamesToIds:mt,inviters:ht,mutedChannels:ft,needsApiMarking:vt,needsCreatedMessage:bt,prqMetrics:gt}}),test:{createTestStore:M}})},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(104);var l=r.n(o);var c=r(139);var u=r(2);var d=r(14);var p=r(33);var m=r(5);var h=r.n(m);var f=r(6);var v=r.n(f);var b=r(7);var g=r.n(b);var _=r(8);var y=r.n(_);var k=r(129);var O=r(15);var E=r.n(O);var w=r(11);var C=r(682);var S=r(21);var j=r(10);var I=r(17);var T=r(164);var N=r(29);var A=r(103);var R={title:k["b"].string,children:k["b"].node.isRequired,step:k["b"].number.isRequired,currentStep:k["b"].number.isRequired,setModalTitle:k["b"].func.isRequired};var M={title:""};var P=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"componentWillReceiveProps",value:function e(){var t=this.props,r=t.title,a=t.currentStep,n=t.step;var i=a===n;i&&this.props.setModalTitle(r)}},{key:"render",value:function e(){var t=this.props,r=t.currentStep,a=t.step;var n=r===a;var i=E()({"p-onboarding__step":true,"p-onboarding__step--active":n,"p-onboarding__step--inactive":!n});var o=s.a.createElement("div",{className:i},n&&this.props.children);return n?o:null}}]);return t}(i["Component"]);P.displayName="Step";P.defaultProps=M;var x={setModalTitle:C["setModalTitle"]};var D=Object(d["connect"])(null,x)(P);var F=r(9);var L=r.n(F);var B=r(159);var U=r(956);var q=r(13);var G=Object(q["c"])("TS.utility.password.getErrorMessage",function(){return""});var H=r(3456);var W=r(190);var V=r(660);var z=r(338);var Q=r(227);var K=r(867);var Y=r(88);var J={src:k["b"].string.isRequired};var Z=function e(t){var r=t.src;return s.a.createElement(i["Fragment"],null,s.a.createElement("div",{className:"p-onboarding__step__header"},s.a.createElement("img",{src:r,srcSet:r+".png 1x, "+r+"@2x.png 2x",alt:""})))};Z.displayName="StepHeader";var X=Z;var $={featureTractorOnboarding:k["b"].bool,imgUrl:k["b"].string.isRequired,realName:k["b"].string,gdprPref:k["b"].bool,onPasswordSet:k["b"].func,gdpr:k["b"].bool.isRequired,inEU:k["b"].bool.isRequired,needsPasswordSet:k["b"].bool,updateRealName:k["b"].func,updateGdprPref:k["b"].func,updateStep:k["b"].func,setStepCallback:k["b"].func,submitCheckPasswordComplexity:k["b"].func};var ee={featureTractorOnboarding:false,realName:"",gdprPref:false,onPasswordSet:u["noop"],needsPasswordSet:true,updateRealName:u["noop"],updateGdprPref:u["noop"],updateStep:u["noop"],setStepCallback:u["noop"],submitCheckPasswordComplexity:u["noop"]};var te=new j["b"]("team_creation");var re=Object(I["b"])();var ae="TEAM_CREATOR_ONBOARDING";var ne=function(e){y()(t,e);function t(e){h()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props.realName;Object(u["bindAll"])(r,["onRealNameChange","onPasswordChange","onGdprPrefChange","onGo","setRealNameInputRef","validateAndSaveStep"]);r.nameInput=null;r.updateRealNameDebounced=Object(u["debounce"])(r.updateRealNameApi,500);r.checkPasswordComplexityDebounced=Object(u["debounce"])(r.checkPasswordComplexityApi,500);r.state={realName:a,realNameError:null,password:"",passwordError:null,gdpr:null};return r}v()(t,[{key:"componentDidMount",value:function e(){this.nameInput.focus();this.props.setStepCallback(this.onGo);this.validateAndSaveStep()}},{key:"onRealNameChange",value:function e(t){var r=this;this.setState(function(){return{realName:t}},function(){r.updateRealNameDebounced(t)})}},{key:"onPasswordChange",value:function e(t){var r=this;this.setState(function(){return{password:t}},function(){r.checkPasswordComplexityDebounced(t)})}},{key:"onGdprPrefChange",value:function e(t){var r=this;var a=t.target.classList.contains("gdpr_pref_radio");var n=!!a||t.target.checked;var i=t.target.value;this.setState(function(){return{gdpr:n,gdprRadioValue:i}},function(){r.props.updateGdprPref({gdprPref:n})})}},{key:"onGo",value:function e(){var t=this;var r=this.props.needsPasswordSet;this.validateAndSaveStep().then(function(e){if(!e.isValid)return;r&&t.props.onPasswordSet(t.state.password);t.props.updateStep({number:H["d"].workspace})}).catch(function(e){re.info(ae,e)})}},{key:"setRealNameInputRef",value:function e(t){this.nameInput=t}},{key:"updateRealNameApi",value:function e(t){var r=this;this.props.updateRealName({realName:t}).then(function(){r.setState(function(){return{realNameError:null}})}).catch(function(e){r.setState(function(){return{realNameError:e}})}).finally(function(){r.validateAndSaveStep()})}},{key:"checkPasswordComplexityApi",value:function e(t){var r=this;this.props.submitCheckPasswordComplexity({password:t}).then(function(){r.setState(function(){return{passwordError:null}})}).catch(function(e){var t=e.data;r.setState(function(){return{passwordError:t.error}})}).finally(function(){r.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function e(){var t=this.state,r=t.realName,a=t.realNameError,n=t.password,i=t.passwordError;var s=this.props.needsPasswordSet;var o=!s||n;return this.props.updateStep({validated:!!(r&&o&&!a&&!i),forceValidation:true})}},{key:"renderRealNameField",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.state,r=t.realName,a=t.realNameError;var i=a?a.message:null;var o=a?a.name:null;var l=E()("realName_input",L()({"c-input_text--with_error":i,"p-onboarding__step__real_name_input--success":!i},o,i));var c=i?{errorText:i,errorLevel:"error",errorType:"nested_box"}:null;var u={name:"real_name",hintText:te.t("Your name will be displayed with messages you send."),id:"real_name",className:l,"data-qa":"tractor-real-name-input",value:r,onChange:this.onRealNameChange,ref:this.setRealNameInputRef};var d={text:te.t("Your full name"),className:"margin_bottom_150",htmlFor:"real_name",id:"real_name_label"};return s.a.createElement(Y["a"],d,s.a.createElement(W["a"],n()({},u,c)))}},{key:"renderPasswordField",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.state,r=t.password,a=t.passwordError;var i=E()("password_input",L()({"c-input_text--with_error":!!a,"p-onboarding__step__password_input--success":!a},a,!!a));var o={text:te.t("Your password"),className:"margin_bottom_150",htmlFor:"password_field","data-qa":"tractor-password-input",id:"passwordLabel"};var l={name:"password_field",hintText:te.t("Passwords must be at least 6 characters long, and can\u2019t be things like password, 123456, or abcdef."),id:"password_field",className:i,onChange:this.onPasswordChange,value:r,type:"password"};var c="";a&&(c=G(a));var u=a?{errorText:c,errorLevel:"error",errorType:"nested_box"}:null;return s.a.createElement(Y["a"],o,s.a.createElement(W["a"],n()({},l,u)))}},{key:"renderGdprPref",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.props.inEU;var r=this.props.gdpr;var a=this.state.gdpr;var n=s.a.createElement(Y["a"],{type:"inline",cursor:"pointer",htmlFor:"gdpr_field",text:te.t("It\u2019s okay to send me email with Slack tips, news, and offers."),className:"margin_bottom_150 normal tractor_checkbox_label",id:"gdpr_checkbox_label"},s.a.createElement(Q["a"],{id:"gdpr_field",checked:null===a?r:a,"data-qa":"tractor-gdpr-checkbox",onChange:this.onGdprPrefChange}));var i=s.a.createElement(V["a"],{className:"margin_bottom_150 normal tractor_checkbox_label","data-qa":"tractor-gdpr-radiogroup"},s.a.createElement(K["a"],null,te.rt("<strong>Can we send you email with Slack tips, news, and offers?</strong>")),s.a.createElement(Y["a"],{htmlFor:"gdpr_field_yes",text:te.t("Sure!"),cursor:"pointer",type:"inline"},s.a.createElement(z["a"],{id:"gdpr_field_yes",className:"gdpr_pref_radio",value:"opt_in","data-qa":"tractor-gdpr-radio-yes",checked:"opt_in"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})),s.a.createElement(Y["a"],{htmlFor:"gdpr_field_no",text:te.t("No thanks"),cursor:"pointer",type:"inline"},s.a.createElement(z["a"],{id:"gdpr_field_no",className:"gdpr_pref_radio",value:"opt_out","data-qa":"tractor-gdpr-radio-no",checked:"opt_out"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})));return t?i:n}},{key:"render",value:function e(){if(!this.props.featureTractorOnboarding)return null;return s.a.createElement(i["Fragment"],null,s.a.createElement(X,{src:this.props.imgUrl}),s.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-profile-step"},s.a.createElement("form",null,this.renderRealNameField(),this.props.needsPasswordSet&&this.renderPasswordField(),this.renderGdprPref())))}}]);return t}(i["Component"]);ne.displayName="ProfileStep";ne.defaultProps=ee;var ie=function e(t){return{realName:Object(C["getRealName"])(t),gdpr:Object(C["getGdprPref"])(t),inEU:Object(C["getInEurope"])(t),needsPasswordSet:Object(S["getUserPref"])(t,"needs_initial_password_set")}};var se={updateRealName:C["updateRealName"],updateGdprPref:C["updateGdprPref"],updateStep:C["updateStep"],setStepCallback:C["setStepCallback"],submitCheckPasswordComplexity:U["e"]};var oe=Object(d["connect"])(ie,se)(Object(B["a"])("feature_tractor_onboarding")(ne));var le=r(811);var ce={featureTractorOnboarding:k["b"].bool,imgUrl:k["b"].string.isRequired,invites:k["b"].array,domainWhitelistingPref:k["b"].bool,workspaceName:k["b"].string,channelName:k["b"].string.isRequired,signupDomain:k["b"].string,onDialogFinish:k["b"].func,validateInvites:k["b"].func,sendInvites:k["b"].func,updateDomainWhitelistingPref:k["b"].func,updateStep:k["b"].func,setStepCallback:k["b"].func,canWhitelistDomain:k["b"].bool};var ue={featureTractorOnboarding:false,invites:[],workspaceName:"",domainWhitelistingPref:false,signupDomain:"",onDialogFinish:u["noop"],validateInvites:u["noop"],setInvites:u["noop"],sendInvites:u["noop"],updateDomainWhitelistingPref:u["noop"],updateStep:u["noop"],setStepCallback:u["noop"],canWhitelistDomain:false};var de=new j["b"]("team_creation");var pe=Object(I["b"])();var me="TEAM_CREATOR_ONBOARDING";var he=function(e){y()(t,e);function t(e){h()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props.invites;var n=a instanceof Array?a.join(", "):a;Object(u["bindAll"])(r,["onInvitesChange","onDomainWhitelistingCheckboxChange","onGo","setInvitesInputRef"]);r.invitesInput=null;r.validateInvitesDebounced=Object(u["debounce"])(r.validateInvites,250);r.state={invites:n,invitesError:null,domainWhitelistingPref:false};return r}v()(t,[{key:"componentDidMount",value:function e(){this.invitesInput.focus();this.props.setStepCallback(this.onGo);this.props.updateStep({validated:true})}},{key:"onInvitesChange",value:function e(t){var r=this;this.setState(function(){return{invites:t}},function(){r.validateInvitesDebounced(t)})}},{key:"onDomainWhitelistingCheckboxChange",value:function e(t){var r=this;var a=t.target.checked;this.setState(function(){return{domainWhitelistingPref:a}},function(){r.props.updateDomainWhitelistingPref({domainWhitelistingPref:a})})}},{key:"onGo",value:function e(){var t=this;this.props.sendInvites().then(function(){t.props.onDialogFinish().then(function(){t.props.updateStep({number:H["d"].completion})})}).catch(function(e){pe.info(me,e);t.setState(function(){return{invitesError:e}})})}},{key:"setInvitesInputRef",value:function e(t){this.invitesInput=t}},{key:"validateInvites",value:function e(t){var r=this;this.props.validateInvites({invites:t}).then(function(){r.setState(function(){return{invitesError:null}})}).catch(function(e){r.setState(function(){return{invitesError:e}})})}},{key:"renderInvitesInput",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.state,r=t.invites,a=t.invitesError;var i=this.props,o=i.workspaceName,l=i.channelName;var c=a?a.message:null;var u=a?a.name:null;var d=E()("invites_input",L()({"c-input_textarea--with_error":c,"p-onboarding__step__invites_input--success":!c},u,c));var p=de.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:l,workspaceName:o});var m={name:"invites_field",id:"invites_field",className:d,onChange:this.onInvitesChange,value:r,"data-qa":"tractor-invites-input",hintText:a?null:p,ref:this.setInvitesInputRef};var h={className:"margin_bottom_150",text:de.t("Email addresses"),htmlFor:"invites_field",id:"invites_label"};var f=c?{errorText:c,errorLevel:"error",errorType:"nested_box"}:null;return s.a.createElement(Y["a"],h,s.a.createElement(le["a"],n()({},m,f)))}},{key:"renderDomainWhitelistingCheckbox",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.props.signupDomain;var r=this.state.domainWhitelistingPref;var a=this.props.domainWhitelistingPref;return s.a.createElement(Y["a"],{className:"margin_bottom_150 normal tractor_checkbox_label",text:de.rt("Let other people sign up with their verified <strong>@{signupDomain}</strong> email address.",{signupDomain:t}),id:"domain_whitelisting_checkbox_label",htmlFor:"domain_whitelisting_field",type:"inline",cursor:"pointer"},s.a.createElement(Q["a"],{id:"domain_whitelisting_field","data-qa":"tractor-domain-whitelisting-checkbox",checked:null===r?a:r,onChange:this.onDomainWhitelistingCheckboxChange}))}},{key:"render",value:function e(){if(!this.props.featureTractorOnboarding)return null;return s.a.createElement(i["Fragment"],null,s.a.createElement(X,{src:this.props.imgUrl}),s.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-invites-step"},this.renderInvitesInput(),this.props.canWhitelistDomain&&this.renderDomainWhitelistingCheckbox()))}}]);return t}(i["Component"]);he.displayName="InvitesStep";he.defaultProps=ue;var fe=function e(t){return{invites:Object(C["getInvites"])(t),workspaceName:Object(C["getWorkspaceName"])(t),domainWhitelistingPref:Object(C["getDomainWhitelistingPref"])(t),channelName:Object(C["getChannelName"])(t),signupDomain:Object(C["getSignupDomain"])(t),canWhitelistDomain:Object(C["getCanWhitelistOwnerEmailDomain"])(t)}};var ve={validateInvites:C["validateInvites"],sendInvites:C["sendInvites"],updateDomainWhitelistingPref:C["updateDomainWhitelistingPref"],updateStep:C["updateStep"],setStepCallback:C["setStepCallback"]};var be=Object(d["connect"])(fe,ve)(Object(B["a"])("feature_tractor_onboarding")(he));var ge={featureTractorOnboarding:k["b"].bool,imgUrl:k["b"].string.isRequired,workspaceName:k["b"].string,workspaceDomain:k["b"].string,hasInvited:k["b"].bool,onDialogFinish:k["b"].func,updateWorkspaceName:k["b"].func,updateWorkspaceDomain:k["b"].func,updateStep:k["b"].func,setStepCallback:k["b"].func};var _e={featureTractorOnboarding:k["b"].bool,workspaceName:"",workspaceDomain:"",hasInvited:false,onDialogFinish:u["noop"],updateWorkspaceName:u["noop"],updateWorkspaceDomain:u["noop"],updateStep:u["noop"],setStepCallback:u["noop"]};var ye=new j["b"]("team_creation");var ke=Object(I["b"])();var Oe="TEAM_CREATOR_ONBOARDING";var Ee=function(e){y()(t,e);function t(e){h()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,n=a.workspaceName,i=a.workspaceDomain;Object(u["bindAll"])(r,["onWorkspaceNameChange","onWorkspaceNameBlur","onWorkspaceDomainChange","onGo","setWorkspaceNameInputRef","validateAndSaveStep"]);r.nameInput=null;r.updateWorkspaceNameDebounced=Object(u["debounce"])(r.updateWorkspaceNameApi,500);r.updateWorkspaceDomainDebounced=Object(u["debounce"])(r.updateWorkspaceDomainApi,500);r.state={workspaceName:n,workspaceNameError:null,workspaceDomain:i,workspaceDomainError:null};return r}v()(t,[{key:"componentDidMount",value:function e(){this.nameInput.focus();this.props.setStepCallback(this.onGo);this.props.updateStep({validated:true})}},{key:"onWorkspaceNameChange",value:function e(t){var r=this;this.setState(function(){return{workspaceName:t}},function(){r.updateWorkspaceNameDebounced(t)})}},{key:"onWorkspaceNameBlur",value:function e(){var t=this.props.workspaceName;var r=this.state.workspaceName;r||this.onWorkspaceNameChange(t)}},{key:"onWorkspaceDomainChange",value:function e(t){var r=this;this.setState(function(){return{workspaceDomain:t}},function(){r.updateWorkspaceDomainDebounced(t)})}},{key:"onGo",value:function e(){var t=this;this.validateAndSaveStep().then(function(e){if(!e.isValid)return;t.props.hasInvited?t.props.onDialogFinish().then(function(){t.props.updateStep({number:H["d"].completion})}):t.props.updateStep({number:H["d"].invites})}).catch(function(e){ke.info(Oe,e)})}},{key:"setWorkspaceNameInputRef",value:function e(t){this.nameInput=t}},{key:"updateWorkspaceNameApi",value:function e(t){var r=this;this.props.updateWorkspaceName({workspaceName:t}).then(function(){r.setState(function(){return{workspaceNameError:null}})}).catch(function(e){r.setState(function(){return{workspaceNameError:e}})}).finally(function(){r.validateAndSaveStep()})}},{key:"updateWorkspaceDomainApi",value:function e(t){var r=this;this.props.updateWorkspaceDomain({workspaceDomain:t}).then(function(){r.setState(function(){return{workspaceDomainError:null}})}).catch(function(e){r.setState(function(){return{workspaceDomainError:e}})}).finally(function(){r.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function e(){var t=this.state,r=t.workspaceDomain,a=t.workspaceNameError,n=t.workspaceDomainError;return this.props.updateStep({validated:!!(r&&!a&&!n),forceValidation:true})}},{key:"renderWorkspaceName",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.state,r=t.workspaceName,a=t.workspaceNameError;var i=a?a.message:null;var o=a?a.name:null;var l=E()("workspaceName_input",L()({"c-input_text--with_error":i,"p-onboarding__step__workspace_name_input--success":!i},o,i));var c={className:"margin_bottom_150",text:ye.t("Slack workspace name"),htmlFor:"workspace_name_field",id:"workspace_name_label"};var u={name:"workspace_name_field",id:"workspace_name_field",className:l,onChange:this.onWorkspaceNameChange,onBlur:this.onWorkspaceNameBlur,value:r,"data-qa":"tractor-workspace-name-input",hintText:ye.t("Most teams use the name of their company or organization."),ref:this.setWorkspaceNameInputRef};var d=i?{errorText:i,errorLevel:"error",errorType:"nested_box"}:null;return s.a.createElement(Y["a"],c,s.a.createElement(W["a"],n()({},u,d)))}},{key:"renderWorkspaceDomain",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.state,r=t.workspaceDomain,a=t.workspaceDomainError;var i=a?a.message:null;var o=a?a.name:null;var l=E()("workspaceDomain_input",L()({"c-input_text--with_error":i,"p-onboarding__step__workspace_domain_input--success":!i},o,i));var c={text:ye.t("Slack URL"),className:"margin_bottom_150",htmlFor:"workspace_domain_field",id:"workspace_domain_label"};var u={name:"workspace_domain_field",id:"workspace_domain_field",className:l,hintText:ye.t("You\u2019ll use this URL to sign in to Slack. Letters, numbers, and hyphens only."),"data-qa":"tractor-workspace-domain-input",onChange:this.onWorkspaceDomainChange,value:r,suffix:".slack.com"};var d=i?{errorText:i,errorLevel:"error",errorType:"nested_box"}:null;return s.a.createElement(Y["a"],c,s.a.createElement(W["a"],n()({},u,d)))}},{key:"render",value:function e(){if(!this.props.featureTractorOnboarding)return null;return s.a.createElement(i["Fragment"],null,s.a.createElement(X,{src:this.props.imgUrl}),s.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-workspace-step"},this.renderWorkspaceName(),this.renderWorkspaceDomain()))}}]);return t}(i["Component"]);Ee.displayName="WorkspaceStep";Ee.defaultProps=_e;var we=function e(t){return{workspaceName:Object(C["getWorkspaceName"])(t),workspaceDomain:Object(C["getWorkspaceDomain"])(t),hasInvited:Object(S["getUserPref"])(t,"has_invited")}};var Ce={updateWorkspaceName:C["updateWorkspaceName"],updateWorkspaceDomain:C["updateWorkspaceDomain"],updateStep:C["updateStep"],setStepCallback:C["setStepCallback"]};var Se=Object(d["connect"])(we,Ce)(Object(B["a"])("feature_tractor_onboarding")(Ee));var je={featureTractorOnboarding:k["b"].bool,imgUrl:k["b"].string.isRequired,invites:k["b"].array,channelName:k["b"].string.isRequired,updateStep:k["b"].func};var Ie={featureTractorOnboarding:k["b"].bool,invites:[],updateStep:u["noop"]};var Te=new j["b"]("team_creation");var Ne=function(e){y()(t,e);function t(){h()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"componentDidMount",value:function e(){this.props.updateStep({validated:true})}},{key:"render",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.props,r=t.imgUrl,a=t.invites,n=t.channelName;var o=a.length;var l=void 0;var c=void 0;switch(o){case 0:l=Te.t("Your Slack workspace is all set");c=Te.rt("We\u2019ve added a few basic channels for your team \u2014 go ahead and poke around! Or <strong>try sending yourself a direct message</strong> to test things out.");break;case 1:l=Te.t("Your invitation has been sent!");c=Te.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:n});break;default:l=Te.t("Your {numInvites} invitations have been sent!",{numInvites:o});c=Te.rt("Your teammates will be here as soon as they accept their invitations. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:n});break}return s.a.createElement(i["Fragment"],null,s.a.createElement(X,{src:r}),s.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-completion-step"},s.a.createElement("h2",null,l),c))}}]);return t}(i["Component"]);Ne.displayName="CompletionStep";Ne.defaultProps=Ie;var Ae=function e(t){return{invites:Object(C["getInvites"])(t),channelName:Object(C["getChannelName"])(t)}};var Re={updateStep:C["updateStep"]};var Me=Object(d["connect"])(Ae,Re)(Object(B["a"])("feature_tractor_onboarding")(Ne));var Pe=r(3519);var xe={featureTractorOnboarding:k["b"].bool,featureTractorStringsV3:k["b"].bool,invites:k["b"].array,modalTitle:k["b"].string,onClose:k["b"].func,stepCallback:k["b"].func,stepNumber:k["b"].number,isCurrentStepValid:k["b"].bool,isPromiseRunning:k["b"].bool,hasInvited:k["b"].bool,needsPasswordSet:k["b"].bool,clogger:k["b"].object.isRequired,fetchAndSetChannelInfo:k["b"].func,fetchAndSetWorkspace:k["b"].func,fetchAndSetSignupDetails:k["b"].func,setInitialMarketingPref:k["b"].func,setStepNumber:k["b"].func,updatePassword:k["b"].func,completeWorkflowTask:k["b"].func};var De={featureTractorOnboarding:false,featureTractorStringsV3:false,invites:[],modalTitle:"",onClose:u["noop"],stepCallback:u["noop"],stepNumber:0,isCurrentStepValid:false,isPromiseRunning:false,hasInvited:false,needsPasswordSet:true,clogger:{},fetchAndSetChannelInfo:u["noop"],fetchAndSetWorkspace:u["noop"],fetchAndSetSignupDetails:u["noop"],setInitialMarketingPref:u["noop"],setStepNumber:u["noop"],updatePassword:u["noop"],completeWorkflowTask:u["noop"]};var Fe=new j["b"]("team_creation");var Le=Object(I["b"])();var Be="TEAM_CREATOR_ONBOARDING";var Ue=function(e){y()(t,e);function t(e){h()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(u["bindAll"])(r,["getGoButtonText","getFooterText","onBack","onGo","onPasswordSet","onDialogFinish","onClose"]);r.state={password:null};return r}v()(t,[{key:"componentDidMount",value:function e(){this.props.fetchAndSetChannelInfo();this.props.fetchAndSetWorkspace();this.props.fetchAndSetSignupDetails();this.props.setInitialMarketingPref();this.preloadRemainingImages();Le.info(Be,"Onboarding dialog mounted.")}},{key:"onBack",value:function e(){var t=this.props,r=t.stepNumber,a=t.clogger;var n=void 0;n=r>0?r-1:H["c"]-1;a.track(N["j"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:H["e"][r],action:"BACK"}}});this.props.setStepNumber(n)}},{key:"onGo",value:function e(){var t=this.props,r=t.stepCallback,a=t.isCurrentStepValid,n=t.clogger,i=t.stepNumber;a&&r();n.track(N["j"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:H["e"][i],action:"CLICK"}}})}},{key:"onClose",value:function e(){var t=this.props,r=t.clogger,a=t.stepNumber;r.track(N["j"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:H["e"][a],action:"CLOSE"}}});this.props.onClose()}},{key:"onPasswordSet",value:function e(t){this.setState(function(){return{password:t}})}},{key:"onDialogFinish",value:function e(){var t=this;var r=this.state.password;var a=void 0;a=this.props.needsPasswordSet?this.props.updatePassword({password:r}):Promise.resolve();return a.then(function(){return t.props.completeWorkflowTask({taskSubtype:"complete_team_creator_account_setup"})}).catch(function(e){Le.info(Be,e)})}},{key:"getGoButtonText",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.props,r=t.stepNumber,a=t.invites,n=t.hasInvited;var i=a?a.length:0;switch(r){case 1:return n?Fe.t("Finish"):Fe.t("Next");case 2:return i>=1?Fe.t("Add {numEmails, plural, =1 {# Person} other {# People}}",{numEmails:i,fallbackHash:"afa51f5e80065586875a7cd693abcad1a66bdb3b"}):Fe.t("Finish");case 3:if(0===i)return Fe.t("Explore Slack");return Fe.t("Start the Conversation");default:return Fe.t("Next")}}},{key:"getFooterText",value:function e(){var t=this.props,r=t.stepNumber,a=t.hasInvited,n=t.featureTractorStringsV3;if(r>=H["c"])return null;if(!n)return Fe.t("Step {stepNumber} of 3",{stepNumber:r+1});var i=r+1;var s=a?2:3;return Fe.t("Step {stepNumber} of {totalSteps}",{stepNumber:i,totalSteps:s})}},{key:"preloadRemainingImages",value:function e(){Object(u["map"])(H["b"],function(e,t){if("profile"===t)return null;var r=new Image;var a=new Image;r.src=e+".png";a.src=e+"@2x.png";return null})}},{key:"shouldShowBackButton",value:function e(t){if(t===H["d"].profile||t===H["d"].completion)return false;return true}},{key:"render",value:function e(){if(!this.props.featureTractorOnboarding)return null;var t=this.props,r=t.modalTitle,a=t.stepNumber,n=t.isCurrentStepValid,o=t.isPromiseRunning;var l=E()("p-team_creator_onboarding_dialog",{"p-team_creator_onboarding_dialog--complete":3===a});return s.a.createElement(i["Fragment"],null,s.a.createElement(A["a"],{showGoButton:true,showCloseButton:true,showHeader:true,shouldCloseOnCancel:false,shouldCloseOnGo:a===H["d"].completion,truncateTitle:false,onClose:this.onClose,showCancelButton:this.shouldShowBackButton(a),goButtonIsDisabled:!n,goButtonIsPending:o,goButtonText:this.getGoButtonText(),title:r,footerText:this.getFooterText(),onGo:this.onGo,onCancel:this.onBack,cancelText:Fe.t("Back"),id:"team-creator-onboarding-dialog","data-qa":"team-creator-onboarding-dialog",className:l,bodyClassName:"p-team_creator_onboarding_dialog__body"},s.a.createElement(D,{step:0,currentStep:a,title:Fe.t("Set your name and password")},s.a.createElement(oe,{imgUrl:H["b"].profile,onPasswordSet:this.onPasswordSet})),s.a.createElement(D,{step:1,currentStep:a,title:Fe.t("Review your team\u2019s details")},s.a.createElement(Se,{imgUrl:H["b"].workspace,onDialogFinish:this.onDialogFinish})),s.a.createElement(D,{step:2,currentStep:a,title:Fe.t("Add people to your Slack workspace")},s.a.createElement("div",null),s.a.createElement(be,{imgUrl:H["b"].invites,onDialogFinish:this.onDialogFinish})),s.a.createElement(D,{step:3,currentStep:a},s.a.createElement("div",null),s.a.createElement(Me,{imgUrl:H["b"].completion}))))}}]);return t}(s.a.Component);Ue.displayName="TeamCreatorOnboardingDialog";Ue.defaultProps=De;var qe=function e(t){return{featureTractorOnboarding:Object(w["isFeatureEnabled"])(t,"feature_tractor_onboarding"),featureTractorStringsV3:Object(w["isFeatureEnabled"])(t,"feature_tractor_strings_v3"),hasInvited:Object(S["getUserPref"])(t,"has_invited"),needsPasswordSet:Object(S["getUserPref"])(t,"needs_initial_password_set"),stepNumber:Object(C["getStepNumber"])(t),modalTitle:Object(C["getModalTitle"])(t),stepCallback:Object(C["getStepCallback"])(t),isCurrentStepValid:Object(C["getCurrentStepValidity"])(t),isPromiseRunning:Object(C["getIsPromiseRunning"])(t),invites:Object(C["getInvites"])(t),clogger:Object(T["a"])({state:t})}};var Ge={fetchAndSetChannelInfo:C["fetchAndSetChannelInfo"],fetchAndSetWorkspace:C["fetchAndSetWorkspace"],fetchAndSetSignupDetails:C["fetchAndSetSignupDetails"],setInitialMarketingPref:C["setInitialMarketingPref"],setStepNumber:C["setStepNumber"],updatePassword:C["updatePassword"],completeWorkflowTask:C["completeWorkflowTask"]};var He=Object(d["connect"])(qe,Ge)(Ue);r.d(t,"a",function(){return We});r.d(t,"b",function(){return Ve});var We=function e(t,r,a){var i=Object(p["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(c["a"])(s.a.createElement(d["Provider"],{store:i},s.a.createElement(He,n()({onClose:o},a))),r)};var Ve=function e(t){l.a.unmountComponentAtNode(t)}},function(e,t,r){"use strict";r.r(t);r.d(t,"setShouldLogAppBootMetrics",function(){return c});r.d(t,"shouldLogAppBootMetrics",function(){return p});var a=r(9);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(129);var l=r(4);var c=Object(l["a"])("Have we already sent boot metrics");c.propTypes=o["b"].bool.isRequired;var u={shouldLogAppBootMetrics:true};var d=Object(l["c"])(n()({},c,function(e,t){return s()({},e,{shouldLogAppBootMetrics:t})}),u);d.propTypes={shouldLogAppBootMetrics:o["b"].bool};t["default"]=d;var p=Object(l["d"])(function(e){return e&&e.telemetry&&e.telemetry.shouldLogAppBootMetrics})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(14);var s=r(139);var o=r(33);var l=r(3);var c=r.n(l);var u=r(2);var d=r.n(u);var p=r(262);var m=r(116);var h=r(374);var f=r(315);var v=r(279);var b=r(122);var g=r(19);var _=r(44);var y=r(21);var k=r(11);var O=r(602);var E=r(170);var w=r(69);var C=r(36);var S=r(12);var j=r(17);var I=r(269);var T=r(23);var N=r(206);var A=r(651);var R=r(1118);var M=r(873);var P=r(346);var x=r(167);var D=r(9);var F=r.n(D);var L=r(5);var B=r.n(L);var U=r(6);var q=r.n(U);var G=r(7);var H=r.n(G);var W=r(8);var V=r.n(W);var z=r(129);var Q=r(15);var K=r.n(Q);var Y=r(106);var J=r.n(Y);var Z=r(72);var X=r(63);var $=r(62);var ee=r(164);var te=r(444);var re=r(218);var ae=r(29);var ne=r(10);var ie=0;var se=1;var oe=2;function le(e,t,r,a,n,i,s,o){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!ve(n,i,ae["j"].PRQ_CHANNEL_SWITCH_USABLE))return;var u=void 0;var d=void 0;switch(a){case ie:default:u=ae["n"].COMPLETED;d=false;break;case se:u=ae["n"].ABANDONED;d=true;break;case oe:u=ae["n"].COMPLETED;d=true;break}var p=Object(te["b"])(1e3*e*1e3,0);var m=c()({elapsed_time:p,target_channel_id:r,required_sync:d,end_state:u},me(s,t,o,l));var h={userId:o,teamId:n,enterpriseId:i,locale:Object(ne["p"])()};Object(ee["a"])(h).track(ae["j"].PRQ_CHANNEL_SWITCH_USABLE,m)}function ce(e,t,r,a,n,i,s,o){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!ve(n,i,ae["j"].PRQ_CHANNEL_SWITCH_VISIBLE))return;var u=void 0;var d=void 0;switch(a){case ie:default:u=ae["n"].COMPLETED;d=false;break;case se:u=ae["n"].ABANDONED;d=true;break;case oe:u=ae["n"].COMPLETED;d=false;break}var p=Object(te["b"])(1e3*e*1e3,0);var m=c()({elapsed_time:p,target_channel_id:r,required_sync:d,end_state:u},me(s,t,o,l));var h={userId:o,teamId:n,enterpriseId:i,locale:Object(ne["p"])()};Object(ee["a"])(h).track(ae["j"].PRQ_CHANNEL_SWITCH_VISIBLE,m)}function ue(e,t,r,a,n,i,s,o){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!ve(a,n,ae["j"].PRQ_TIME_TO_USABLE))return;var u=Object(te["b"])(1e3*e*1e3,0);var d=he(l);var p=c()({elapsed_time:u+d,desktop_elapsed_time:d,required_sync:r,end_state:o,start_type:ae["k"].COLD,target_type:ae["l"].CHANNEL},me(i,t,s,l));var m={userId:s,teamId:a,enterpriseId:n,locale:Object(ne["p"])()};Object(ee["a"])(m).track(ae["j"].PRQ_TIME_TO_USABLE,p)}function de(e,t,r,a,n,i,s){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(!ve(a,n,ae["j"].PRQ_TIME_TO_VISIBLE))return;var l=Object(te["b"])(1e3*e*1e3,0);var u=he(o);var d=c()({elapsed_time:l+u,desktop_elapsed_time:u,required_sync:r,end_state:ae["n"].COMPLETED,start_type:ae["k"].COLD,target_type:ae["l"].CHANNEL},me(i,t,s,o));var p={userId:s,teamId:a,enterpriseId:n,locale:Object(ne["p"])()};Object(ee["a"])(p).track(ae["j"].PRQ_TIME_TO_VISIBLE,d)}function pe(e,t,r,a,n,i,s){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(!ve(a,n,ae["j"].PRQ_SESSION_FRAME_STATS))return;var l=c()({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:r},me(i,void 0,s,o));var u={userId:s,teamId:a,enterpriseId:n,locale:Object(ne["p"])()};Object(ee["a"])(u).track(ae["j"].PRQ_SESSION_FRAME_STATS,l)}function me(e,t,r,a){var n="string"===typeof r&&r.startsWith("W");var i="undefined"!==typeof a&&null!==a&&a.stats&&a.stats.Id&&a.stats.Id.sessionId;var s={device:{id:"",make:navigator.platform,model:navigator.platform,os:i?"electron":"webapp",os_version:i?a.stats.Id.sessionId:""}};var o=void 0;if(t){s.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t};switch(t.toUpperCase()){case"APP_ICON":o=ae["m"].APP_ICON;break;case"MSG_PANE":o=ae["m"].MSG_PANE;break;case"SIDE_BAR":o=ae["m"].SIDE_BAR;break;case"QUICK_SWITCH":o=ae["m"].QUICK_SWITCH;break;default:o=ae["m"].UNKNOWN;break}}var l=c()({contexts:s,session_id:e,time:Date.now(),app_id:"web",is_tablet:false,user_id:n?void 0:r,external_id:n?r:void 0},fe(a));t&&(l.trigger=o);return l}function he(e){if("undefined"!==typeof e&&null!==e&&e.stats&&e.stats.performance&&e.stats.performance.getPerformanceRecord&&e.stats.performance.calcHrTime){var t=e.stats.performance.getPerformanceRecord();if(void 0!==t.numTeamsAtLaunch&&void 0!==t.isInitialTeamBooted&&t.numTeamsAtLaunch>0&&t.isInitialTeamBooted){var r=t["BOOT"];var a=t["PRELOAD_READY"];var n=e.stats.performance.calcHrTime(r,a);return n>0?1e6*n:0}}return 0}function fe(e){if("undefined"!==typeof e&&null!==e&&e.app&&e.app.version){var t=e.app.version();var r=t.prerelease?" ("+t.prerelease+")":"";var a="string"===typeof t.prerelease?t.prerelease.match(/(alpha|beta|electron3|sonic)/i)&&t.prerelease.match(/(alpha|beta|electron3|sonic)/i)[1]:"production";var n=void 0;switch(a){case"alpha":case"electron3":n=ae["a"].ALPHA;break;case"beta":n=ae["a"].BETA;break;default:n=ae["a"].PRODUCTION;break}return{app_version:t.major+"."+t.minor+"."+t.patch+r,release_version:t.major+"."+t.minor+"."+t.patch,build_type:n}}return{app_version:"",release_version:"",build_type:ae["a"].PRODUCTION}}function ve(e,t,r){if(["E12KS1G65"].includes(t)||["T024BE7LD","T5J4Q04QG"].includes(e))return true;if(["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)&&Object(re["a"])(10))return true;if(["E27SFGS2W"].includes(t)&&[ae["j"].PRQ_TIME_TO_USABLE,ae["j"].PRQ_TIME_TO_VISIBLE].includes(r))return true;if([ae["j"].PRQ_TIME_TO_USABLE,ae["j"].PRQ_TIME_TO_VISIBLE].includes(r))return true;if(r===ae["j"].PRQ_SESSION_FRAME_STATS)return Object(re["a"])(10);return Object(re["a"])(10)}var be=r(828);var ge=r(70);var _e=r(102);var ye=r(165);var ke=r(2086);var Oe=r(443);var Ee=r(1090);var we=r(113);var Ce=r(1427);var Se={channelId:z["b"].string,channelType:z["b"].string,hasLimitedHistory:z["b"].bool,isShared:z["b"].bool,isSlackbotIm:z["b"].bool,isTeambotIm:z["b"].bool,newxpOnboardingStep:z["b"].string};var je={channelId:null,channelType:null,hasLimitedHistory:false,isShared:false,isSlackbotIm:false,isTeambotIm:false,newxpOnboardingStep:null};var Ie=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.channelType,i=t.hasLimitedHistory,s=t.isShared,o=t.isSlackbotIm,l=t.isTeambotIm,c=t.newxpOnboardingStep;if(o){if(c&&c!==Wr.COMPLETE)return n.a.createElement(zr,{step:c});return n.a.createElement(wr,null)}if(l)return n.a.createElement(Ar,null);if(i)return n.a.createElement(er,{channelId:r});if("channel"===a||"private"===a){if(s)return n.a.createElement(Lr,{channelId:r});return n.a.createElement(Ot,{channelId:r})}if("im"===a){if(s)return n.a.createElement(Qt,{channelId:r});return n.a.createElement(Lt,{channelId:r})}if("mpim"===a)return n.a.createElement(gr,{channelId:r});Object(j["b"])().warn('Unknown foreword type "'+a+'"');return null}}]);return t}(a["PureComponent"]);Ie.displayName="Foreword";Ie.defaultProps=je;function Te(e,t){var r=t.channelId;var a=Object(g["getChannelById"])(e,r);if(!a)return null;return{isShared:Object(S["isExternallySharedChannel"])(a),isSlackbotIm:Object(S["isSlackbot"])(a),isTeambotIm:Object(S["isTeambot"])(a,true),newxpOnboardingStep:Object(m["getNewxpOnboardingStep"])(e)}}var Ne=Object(i["connect"])(Te)(Ie);var Ae=r(26);var Re=r(171);var Me=r(16);var Pe=r(316);var xe=r(664);var De=r(151);var Fe=r(13);var Le=Object(Fe["c"])("TS.ui.purpose_dialog.start",d.a.noop);var Be=r(1423);var Ue=r(1003);var qe=r(677);var Ge=r(147);var He=r(18);var We=r(20);var Ve=new ne["b"]("message_pane_foreword");var ze={onClick:z["b"].func};var Qe={onClick:d.a.noop};var Ke=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"render",value:function e(){var t=this.props.onClick;return n.a.createElement(We["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:t},n.a.createElement(He["a"],{type:"plus",inherit:true})," ",Ve.t("Add an app"))}}]);return t}(a["PureComponent"]);Ke.displayName="AppButton";Ke.defaultProps=Qe;var Ye=Ke;var Je=new ne["b"]("message_pane_foreword");var Ze={isPrivate:z["b"].bool,onClick:z["b"].func};var Xe={isPrivate:false,onClick:d.a.noop};var $e=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"render",value:function e(){var t=this.props,r=t.isPrivate,a=t.onClick;var i=void 0;i=r?Je.t("Invite others to this private channel"):Je.t("Invite others to this channel");return n.a.createElement(We["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:a},n.a.createElement(He["a"],{type:"user",inherit:true})," ",i)}}]);return t}(a["PureComponent"]);$e.displayName="InviteButton";$e.defaultProps=Xe;var et=$e;var tt=new ne["b"]("message_pane_foreword");var rt={onClick:z["b"].func};var at={onClick:d.a.noop};var nt=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"render",value:function e(){var t=this.props.onClick;return n.a.createElement(We["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:t},n.a.createElement(He["a"],{type:"pencil",inherit:true})," ",tt.t("Set a purpose"))}}]);return t}(a["PureComponent"]);nt.displayName="PurposeButton";nt.defaultProps=at;var it=nt;var st={channelId:z["b"].string,purpose:z["b"].string,isUserRestricted:z["b"].bool,isUserUltraRestricted:z["b"].bool,isOrgShared:z["b"].bool,channelType:z["b"].string,clogger:z["b"].object.isRequired};var ot={channelId:null,purpose:null,isUserRestricted:false,isUserUltraRestricted:false,isOrgShared:false,channelType:null};var lt=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onPurposeButtonClick=r.onPurposeButtonClick.bind(r);r.onInviteButtonClick=r.onInviteButtonClick.bind(r);r.onAppButtonClick=r.onAppButtonClick.bind(r);return r}q()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Le(t)}},{key:"onInviteButtonClick",value:function e(){var t=this.props.channelId;Object(Be["a"])(t)}},{key:"onAppButtonClick",value:function e(){var t;var r=this.props,a=r.channelId,n=r.clogger;var i=ae["j"].CHANNEL_FOREWORD;var s=(t={},F()(t,ae["p"].action,ae["o"].CLICK),F()(t,ae["p"].ui_element,ae["q"].BTN_ADD_APPS),t);n.track(i,{contexts:F()({},ae["b"].ui_context,s)});Object(qe["a"])()?Object(Ue["g"])(i,s):Object(Ge["g"])("/apps/new?channel="+a,"new")}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.isOrgShared,i=t.isUserRestricted,s=t.isUserUltraRestricted,o=t.purpose,l=t.channelType;var c=void 0;o||i||(c=n.a.createElement(it,{channelId:r,onClick:this.onPurposeButtonClick}));var u=void 0;a||i||(u=n.a.createElement(Ye,{onClick:this.onAppButtonClick}));var d=void 0;(!s||"channel"===l&&"private"===l)&&(d=n.a.createElement(et,{onClick:this.onInviteButtonClick,isPrivate:"private"===l}));return n.a.createElement("div",{className:"p-message_pane__foreword__buttons"},c,u,d)}}]);return t}(a["PureComponent"]);lt.displayName="ChannelForewordButtons";lt.defaultProps=ot;function ct(e,t){var r=t.channelId;var a=Object(g["getChannelById"])(e,r);if(!a)return{};var n=Object(Ae["getCurrentMember"])(e);var i=a.purpose?a.purpose.value:null;var s=Object(S["isOrgSharedPublicOrPrivateChannel"])(a);return{purpose:i,isUserRestricted:Object(Me["isRestricted"])(n),isUserUltraRestricted:Object(Me["isUltraRestricted"])(n),isOrgShared:s,channelType:Object(S["getChannelType"])(a),clogger:Object(ee["a"])({state:e})}}var ut=Object(i["connect"])(ct)(lt);var dt=r(87);var pt=new ne["b"]("message_pane_foreword");var mt={channelId:z["b"].string,description:z["b"].node,purpose:z["b"].string,isUserRestricted:z["b"].bool};var ht={channelId:null,description:null,purpose:null,isUserRestricted:false};var ft=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onPurposeButtonClick=r.onPurposeButtonClick.bind(r);return r}q()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Le(t)}},{key:"maybeRenderPurpose",value:function e(){var t=this.props.purpose;if(!t)return null;return n.a.createElement("span",null," ",pt.t("Purpose:")," ",n.a.createElement(dt["a"],{text:t}))}},{key:"maybeRenderPurposeEditLink",value:function e(){var t=this.props,r=t.purpose,a=t.isUserRestricted;if(!r||a)return null;return n.a.createElement("span",{className:"no_wrap"}," ","(",n.a.createElement(We["a"],{type:"link",onClick:this.onPurposeButtonClick},pt.t("edit")),")")}},{key:"render",value:function e(){var t=this.props.description;return n.a.createElement("div",{className:"p-message_pane__foreword__description"},t,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}]);return t}(a["PureComponent"]);ft.displayName="ChannelForewordDescription";ft.defaultProps=ht;var vt=ft;var bt=new ne["b"]("message_pane_foreword");var gt={channelId:z["b"].string,purpose:z["b"].string,creatorIsYou:z["b"].bool,createdById:z["b"].string,dateCreated:z["b"].number,isPrivate:z["b"].bool,isUserRestricted:z["b"].bool};var _t={channelId:null,purpose:null,creatorIsYou:false,createdById:null,dateCreated:null,isPrivate:false,isUserRestricted:false};var yt=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"renderTitle",value:function e(){var t=this.props.channelId;var r={inherit:true,align:"baseline"};return n.a.createElement("h1",{className:"p-message_pane__foreword__title"},n.a.createElement(De["a"],{channelId:t,inline:true,iconProps:r}))}},{key:"renderDescription",value:function e(){var t=this.props,r=t.channelId,a=t.createdById,i=t.creatorIsYou,s=t.dateCreated,o=t.isPrivate,l=t.purpose,c=t.isUserRestricted;var u=void 0;if(s){u=Object(Re["h"])(s);u=Object(Re["d"])(s)||Object(Re["e"])(s)?u.toLowerCase():bt.t("on {date}",{date:u})}else u=bt.rt("on {date}",{date:n.a.createElement(Pe["a"],{type:"unknown"})});var d={inherit:true,align:"baseline"};var p=n.a.createElement(De["a"],{channelId:r,inline:true,iconProps:d,className:"bold"});var m=void 0;if(i)m=o?bt.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:u,name:p}):bt.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:u,name:p});else{var h=a?n.a.createElement(xe["a"],{id:a,showTooltip:true}):n.a.createElement(Pe["a"],{type:"unknown"});m=o?bt.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:h,date:u,name:p}):bt.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:h,date:u,name:p})}return n.a.createElement(vt,{channelId:r,description:m,purpose:l,isUserRestricted:c})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.isPrivate;var i=K()("p-message_pane__foreword",{"p-message_pane__foreword--private":a});return n.a.createElement("div",{className:i},this.renderTitle(),this.renderDescription(),n.a.createElement(ut,{channelId:r}))}}]);return t}(a["PureComponent"]);yt.displayName="ChannelForeword";yt.defaultProps=_t;function kt(e,t){var r=t.channelId;var a=Object(g["getChannelById"])(e,r);if(!a)return{};var n=Object(Ae["getCurrentMember"])(e);var i=a.purpose?a.purpose.value:null;var s=Object(S["isPrivateChannel"])(a);return{purpose:i,creatorIsYou:n&&n.id===a.creator,createdById:a.creator,dateCreated:a.created,isPrivate:s,isUserRestricted:Object(Me["isRestricted"])(n)}}var Ot=Object(i["connect"])(kt)(yt);var Et=r(247);var wt=r(358);var Ct=r(754);var St=new ne["b"]("message_pane_foreword");var jt={botName:z["b"].string,clogger:z["b"].object.isRequired};var It={botName:null};var Tt=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}q()(t,[{key:"onClick",value:function e(){Object(Ct["a"])("about");var t=this.props.clogger;t.track("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:true})}},{key:"render",value:function e(){var t=this.props.botName;return n.a.createElement(We["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:this.onClick},n.a.createElement(He["a"],{type:"lightbulb-o",inherit:true})," ",St.t("How does {name} work?",{name:Object(ne["n"])(t)}))}}]);return t}(a["PureComponent"]);Tt.displayName="AppHelpButton";Tt.defaultProps=It;function Nt(e,t){var r=t.botId;var a=Object(Ae["getMemberById"])(e,r);var n=Object(ee["a"])({state:e});if(!a)return{clogger:n};var i=Object(Me["getMemberMentionName"])(a);return{botName:i,clogger:n}}var At=Object(i["connect"])(Nt)(Tt);var Rt=new ne["b"]("message_pane_foreword");var Mt={isAppSpaceEnabled:z["b"].bool.isRequired,memberId:z["b"].string,type:z["b"].oneOf(["self","bot","member"]).isRequired,featureWhoCanSeeThis:z["b"].bool};var Pt={memberId:null,featureWhoCanSeeThis:false};var xt=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMemberClick=r.onMemberClick.bind(r);return r}q()(t,[{key:"onMemberClick",value:function e(t){t.preventDefault();var r=this.props.memberId;Object(ye["h"])(r)}},{key:"renderAvatar",value:function e(){var t=this.props.memberId;return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n.a.createElement(wt["a"],{id:t,size:"large",onClick:this.onMemberClick,showPresence:true,showStatus:true,showAvatar:true}))}},{key:"renderDescription",value:function e(){var t=this.props,r=t.memberId,a=t.type;if("self"===a)return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},Rt.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));var i=Rt.rt("This is the very beginning of your direct message history with {name}",{name:n.a.createElement(xe["a"],{id:r,showTooltip:true})});this.props.featureWhoCanSeeThis&&(i=Rt.rt("This is the very beginning of your direct message history with {name}. Only the two of you are in this conversation, and no one else can join it. <a>Learn more</a>",{name:n.a.createElement(xe["a"],{id:r,showTooltip:true})}));return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},i)}},{key:"renderButtons",value:function e(){var t=this.props,r=t.isAppSpaceEnabled,a=t.memberId,i=t.type;if("bot"===i&&r)return n.a.createElement("div",{className:"p-message_pane__foreword__buttons"},n.a.createElement(At,{botId:a}));return null}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}]);return t}(a["PureComponent"]);xt.displayName="BaseImForeword";xt.defaultProps=Pt;function Dt(e,t){var r=t.channelId;var a=Object(g["getChannelById"])(e,r);if(!a)return{};var n=Object(Ae["getMemberById"])(e,Object(S["getMemberIdFromIm"])(a));var i=Object(k["getCurrentUserId"])(e);var s=void 0;s=Object(S["getMemberIdFromIm"])(a)===i?"self":Object(Me["isAppOrBot"])(n)?"bot":"member";return{isAppSpaceEnabled:Object(Et["isAppSpaceEnabled"])(e),memberId:Object(S["getMemberIdFromIm"])(a),type:s,featureWhoCanSeeThis:Object(k["isFeatureEnabled"])(e,"feature_who_can_see_this")}}var Ft=Object(i["connect"])(Dt)(xt);Ft.propTypes={channelId:z["b"].string};Ft.defaultProps={channelId:null};var Lt=Ft;var Bt=r(50);var Ut=r(48);var qt=r(481);var Gt=new ne["b"]("message_pane_foreword");var Ht={memberId:z["b"].string,sharedTeam:z["b"].object};var Wt={memberId:void 0,sharedTeam:void 0};var Vt=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"renderAvatar",value:function e(){var t=this.props.memberId;return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n.a.createElement(wt["a"],{id:t,size:"large",showPresence:true,showStatus:true,showAvatar:true}))}},{key:"renderDescription",value:function e(){var t=this.props,r=t.sharedTeam,a=t.memberId;var i=!r||Object(Ut["isUnknown"])(r)?n.a.createElement(qt["a"],{type:"unknown"}):n.a.createElement("strong",null,Object(Ut["getTeamDisplayName"])(r));var s=Gt.rt("{name} is from {team} and not a member of your team, so share files and information with care.",{name:n.a.createElement(xe["a"],{id:a,showTooltip:true}),team:i});return n.a.createElement("div",{className:"p-message_pane__foreword__description"},s)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription())}}]);return t}(a["PureComponent"]);Vt.displayName="ImSharedForeword";Vt.defaultProps=Wt;function zt(e,t){var r=t.channelId;var a=Object(g["getChannelById"])(e,r);if(!a)return null;var n=Object(Ae["getMemberById"])(e,Object(S["getMemberIdFromIm"])(a));var i=Object(Me["getMemberTeamId"])(n);var s=Object(Bt["getTeamById"])(e,i);return{memberId:Object(S["getMemberIdFromIm"])(a),sharedTeam:s}}var Qt=Object(i["connect"])(zt)(Vt);var Kt=r(145);var Yt=new ne["b"]("message_pane_foreword");var Jt={channelType:z["b"].string.isRequired,channelName:z["b"].string,clogger:z["b"].object.isRequired};var Zt={channelName:""};var Xt=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.clogLearnMoreClick=r.clogLearnMoreClick.bind(r);return r}q()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}},{key:"getClogUiElementVal",value:function e(){var t=this.props.channelType;if("mpim"===t||"im"===t)return 33;return 34}},{key:"clogLearnMoreClick",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}})}},{key:"render",value:function e(){var t=this.props,r=t.channelName,a=t.channelType;var i="";var s="";var o=void 0;"private"===a?o=r:"channel"===a&&(o="#"+r);if("mpim"===a||"im"===a){s=Yt.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans.");i=Yt.t("There\u2019s more to this conversation")}else{i=Yt.t("There\u2019s more to the conversation in {name}",{name:o});s=Yt.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans.")}var l="/pricing?ui_step=42&ui_element="+this.getClogUiElementVal();return n.a.createElement("div",{className:"p-message_pane__limited_history_foreword","data-qa":"msg_lim_header"},n.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline"},n.a.createElement(Kt["b"],{text:":speech_balloon:",emojiSize:Kt["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",i),n.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading"},s),n.a.createElement(We["a"],{href:l,onClick:this.clogLearnMoreClick,target:"_blank","data-qa":"learn_more_btn",size:"small"},Yt.t("Learn More")))}}]);return t}(a["PureComponent"]);Xt.displayName="LimitedHistoryForeword";Xt.defaultProps=Zt;function $t(e,t){var r=t.channelId;var a=Object(g["getChannelById"])(e,r);if(!a)return{};return{channelType:Object(S["getChannelType"])(a),channelName:Object(S["getDisplayName"])(a),clogger:Object(ee["a"])({state:e})}}var er=Object(i["connect"])($t)(Xt);var tr=r(816);var rr=r(350);var ar=r(173);var nr=r(1164);var ir=r(760);var sr=r(24);var or=r.n(sr);var lr=Object(p["createSelector"])(function(e,t){var r=t.channelId;return Object(g["getChannelById"])(e,r)},function(e){var t=Object(S["getSharedTeamIds"])(e)||[];var r=Object(S["getPendingSharedTeamIds"])(e)||[];return[].concat(or()(t),or()(r))});var cr=Object(p["createSelector"])(lr,Bt["getAllTeams"],function(e,t){var r=Object(u["map"])(e,function(e){return t[e]});return Object(u["compact"])(r)});var ur=cr;var dr=new ne["b"]("message_pane_foreword");var pr={channelId:z["b"].string.isRequired,teamId:z["b"].string,memberIds:z["b"].arrayOf(z["b"].string),sharedTeams:z["b"].arrayOf(z["b"].object),notificationPermission:z["b"].string,notificationSetting:z["b"].oneOf(["everything","mentions_dms","nothing"]),featureReactMessages:z["b"].bool,featureWhoCanSeeThis:z["b"].bool};var mr={teamId:void 0,memberIds:[],sharedTeams:[],notificationPermission:"na",notificationSetting:"everything",featureReactMessages:true,featureWhoCanSeeThis:false};var hr=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openPrefsDialog=r.openPrefsDialog.bind(r);r.openChannelPrefsDialog=r.openChannelPrefsDialog.bind(r);r.state=Object(rr["g"])();return r}q()(t,[{key:"componentWillReceiveProps",value:function e(t){this.props.notificationPermission!==t.notificationPermission&&this.setState(function(){return Object(rr["g"])()})}},{key:"getNotificationWarningText",value:function e(){var t=this;var r=this.state,a=r.notificationsEnabled,i=r.notificationDisabledType;if(a)return null;switch(i){case"not_yet_allowed":return dr.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,function(e){var r=e.key,a=e.text;return n.a.createElement(We["a"],{onClick:t.openPrefsDialog,key:r,type:"link"},a)});case"not_allowed":return dr.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return dr.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},function(e){var t=e.key,r=e.text;return n.a.createElement("a",{target:"_blank",key:t,href:"/downloads"},r)});default:return null}}},{key:"openPrefsDialog",value:function e(){Object(ir["a"])("notifications")}},{key:"openChannelPrefsDialog",value:function e(){Object(nr["a"])(this.props.channelId)}},{key:"renderAvatars",value:function e(){var t=this.props.memberIds;var r=t.map(function(e){return n.a.createElement(ar["b"],{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56})});return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},r)}},{key:"renderTeamName",value:function e(t){if(Object(Ut["isUnknown"])(t))return n.a.createElement(qt["a"],{type:"unknown"});return Object(Ut["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,r=t.teamId,a=t.memberIds,i=t.sharedTeams,s=t.featureReactMessages;var o=Object(u["reject"])(i,{id:r});if(o.length&&s){var l=i.map(this.renderTeamName);var c=dr.rt("This conversation includes people from {teams}, so share files and information with care.",{teams:Object(ne["g"])(l,{noEscape:true,react:true,strong:true})});return n.a.createElement("div",{className:"p-message_pane__foreword__description"},c,this.renderDescriptionActions())}var d=a.map(function(e){return n.a.createElement(xe["a"],{id:e,showTooltip:true})});var p=dr.rt("This is the very beginning of your direct message history with {names}",{names:Object(ne["g"])(d,{noEscape:true,react:true})});this.props.featureWhoCanSeeThis&&(p=dr.rt("This is the very beginning of your direct message history with {names}. Only the {number} of you are in this conversation, and no one else can join it. <a>Learn more</a>",{names:Object(ne["g"])(d,{noEscape:true,react:true}),number:d.length+1}));return n.a.createElement("div",{className:"p-message_pane__foreword__description"},p,this.renderDescriptionActions())}},{key:"renderDescriptionActions",value:function e(){var t=this.getNotificationWarningText();if(t)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},t);if(!this.props.featureReactMessages)return null;var r=this.props.notificationSetting;if("everything"===r)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},dr.rt("You\u2019ll be notified for <strong>every new message</strong>.")," ",this.renderEditButton());if("mentions_dms"===r)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},dr.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton());return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},dr.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}},{key:"renderEditButton",value:function e(){if(!this.props.featureReactMessages)return null;return n.a.createElement(We["a"],{onClick:this.openChannelPrefsDialog,type:"link"},dr.rt("Edit"))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}]);return t}(a["PureComponent"]);hr.displayName="BaseMpimForeword";hr.defaultProps=mr;var fr=Object(p["createSelector"])(function(e,t){var r=t.channelId;return Object(g["getChannelById"])(e,r)},k["getCurrentUserId"],function(e,t){var r=Object(S["getMemberIdsFromMpim"])(e);return Object(u["without"])(r,t)});function vr(e,t){var r=t.channelId;return{teamId:Object(T["getTeamId"])(e),memberIds:fr(e,{channelId:r}),sharedTeams:ur(e,{channelId:r}),notificationPermission:Object(tr["getNotificationPermission"])(e),notificationSetting:Object(rr["c"])(e,r),featureReactMessages:Object(k["isFeatureEnabled"])(e,"feature_react_messages"),featureWhoCanSeeThis:Object(k["isFeatureEnabled"])(e,"feature_who_can_see_this")}}var br=Object(i["connect"])(vr)(hr);br.propTypes={channelId:z["b"].string};br.defaultProps={channelId:null};var gr=br;var _r=new ne["b"]("message_pane_foreword");var yr="USLACKBOT";var kr=n.a.createElement("h1",{className:"p-message_pane__foreword__title"},_r.t("Hi, Slackbot here!"));var Or=n.a.createElement("div",{className:"p-message_pane__foreword__description display_flex"},n.a.createElement(ar["b"],{userId:yr,size:48,className:"p-message_pane__foreword__avatar"}),n.a.createElement("div",null,n.a.createElement("p",null,_r.rt("You can ask me simple questions about how Slack works, or just type a few keywords. For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.")),n.a.createElement("p",{className:"margin_0"},_r.rt("I\u2019m only a bot, but I\u2019ll do my best to answer! If I don\u2019t understand, I\u2019ll search the <a>Help Center</a>.",null,function(e){var t=e.key,r=e.text;return n.a.createElement("a",{key:t,target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},r)}))));var Er=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=K()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return n.a.createElement("div",{className:t},kr,Or)}}]);return t}(a["Component"]);Er.displayName="SlackbotForeword";var wr=Er;var Cr=new ne["b"]("message_pane_foreword");var Sr={isUserRestricted:z["b"].bool,featureTeambot:z["b"].bool.isRequired};var jr={isUserRestricted:false,featureTeambot:true};var Ir="UTEAMSBOT";var Tr=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=this.props,r=t.featureTeambot,a=t.isUserRestricted;var i=K()("p-message_pane__foreword","p-message_pane__foreword--teambot");var s=n.a.createElement("h1",{className:"p-message_pane__foreword__title"},r?Cr.t("Hello, I\u2019m Teambot!"):"");var o=n.a.createElement("div",{className:"p-message_pane__foreword__description display_flex"},n.a.createElement(ar["b"],{userId:Ir,size:48,className:"p-message_pane__foreword__avatar"}),n.a.createElement("div",null,n.a.createElement("p",null,r?Cr.rt("I can respond automatically to messages sent by you and your teammates in Slack. My custom responses (and the words that trigger them) are set by your team. There are a few places I\u2019ll respond when prompted: in your team\u2019s channels, in your direct messages to yourself, and here, in your direct messages with me."):""),n.a.createElement("p",null,r&&!a?Cr.rt("You can <a>learn more</a> on our Help Center or <c>see your team's custom responses</c>.",null,function(e){var t=e.key,r=e.text,a=e.tag;if("a"===a)return n.a.createElement("a",{href:"https://get.slack.help/hc/articles/360001724508",target:"_blank",key:t,rel:"noopener noreferrer"},r);if("c"===a)return n.a.createElement("a",{href:"/customize/responses",target:"_blank",key:t,rel:"noopener noreferrer"},r);return null}):""),n.a.createElement("p",null,r&&a?Cr.rt("You can <a>learn more</a> on our Help Center.",null,function(e){var t=e.key,r=e.text,a=e.tag;if("a"===a)return n.a.createElement("a",{href:"https://get.slack.help/hc/articles/360001724508",target:"_blank",key:t,rel:"noopener noreferrer"},r);return null}):"")));if(r)return n.a.createElement("div",{className:i},this.props.featureTeambot?s:"",this.props.featureTeambot?o:"");return null}}]);return t}(a["Component"]);Tr.displayName="TeambotForeword";Tr.defaultProps=jr;var Nr=function e(t){return{isUserRestricted:Object(Me["isRestricted"])(Object(Ae["getCurrentMember"])(t)),featureTeambot:Object(k["isFeatureEnabled"])(t,"feature_teambot")}};var Ar=Object(i["connect"])(Nr)(Tr);var Rr=r(337);var Mr=new ne["b"]("message_pane_foreword");var Pr={channel:z["b"].object,channelId:z["b"].string,isPrivate:z["b"].bool,isPendingShared:z["b"].bool,currentTeam:z["b"].shape({id:z["b"].string.isRequired,name:z["b"].string.isRequired}),sharedTeams:z["b"].arrayOf(z["b"].shape({id:z["b"].string.isRequired,name:z["b"].string})),purpose:z["b"].string,isUserRestricted:z["b"].bool};var xr={channel:null,channelId:null,isPrivate:false,isPendingShared:false,currentTeam:null,sharedTeams:[],purpose:null,isUserRestricted:false};var Dr=function(e){V()(t,e);function t(){B()(this,t);var e=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderTeamName=e.renderTeamName.bind(e);return e}q()(t,[{key:"renderTitle",value:function e(){var t=this.props.channel;var r={inherit:true,align:"baseline"};return n.a.createElement("h1",{className:"p-message_pane__foreword__title"},n.a.createElement(De["a"],{channel:t,inline:true,iconProps:r}))}},{key:"renderAvatars",value:function e(){var t=this.props,r=t.sharedTeams,a=t.currentTeam,i=t.isPendingShared;if(d.a.isEmpty(r))return null;var s=d.a.uniqBy([a].concat(or()(r)),"id");var o=s.map(function(e){var t=e.id;var r=a.id!==t&&i;return n.a.createElement(Rr["b"],{key:t,id:t,size:56,isPendingShared:r,className:"p-message_pane__foreword__avatar"})});return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},o)}},{key:"renderTeamName",value:function e(t){if(Object(Ut["isUnknown"])(t))return n.a.createElement(qt["a"],{type:"unknown"});return Object(Ut["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,r=t.channelId,a=t.purpose,i=t.currentTeam,s=t.sharedTeams,o=t.isPendingShared,l=t.isUserRestricted;var c=[i].concat(or()(s));var u=c.map(this.renderTeamName);1===u.length&&u.push(n.a.createElement(qt["a"],{type:"unknown"}));var d=Object(ne["g"])(u,{noEscape:true,react:true,strong:true});var p=o?Mr.rt("This is a shared channel. Waiting for {names} to join...",{names:d}):Mr.rt("This is a shared channel between {names}.",{names:d});return n.a.createElement(vt,{channelId:r,description:p,purpose:a,isUserRestricted:l})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.isPrivate;var i=K()("p-message_pane__foreword",{"p-message_pane__foreword--private":a});return n.a.createElement("div",{className:i},this.renderAvatars(),this.renderTitle(),this.renderDescription(),n.a.createElement(ut,{channelId:r}))}}]);return t}(a["PureComponent"]);Dr.displayName="SharedForeword";Dr.defaultProps=xr;function Fr(e,t){var r=t.channelId;var a=Object(g["getChannelById"])(e,r);if(!a)return null;var n=Object(Ae["getCurrentMember"])(e);var i=a.purpose?a.purpose.value:null;var s=Object(S["isPrivateChannel"])(a);var o=Object(S["isPendingExternallySharedChannel"])(a);var l=ur(e,{channelId:r});var c=Object(Bt["getTeamById"])(e,Object(T["getTeamId"])(e));return{currentTeam:c,channel:a,purpose:i,isPrivate:s,isPendingShared:o,sharedTeams:l,isUserRestricted:n.is_restricted}}var Lr=Object(i["connect"])(Fr)(Dr);var Br=r(65);var Ur=r(764);var qr=new ne["b"]("newxp_onboarding");var Gr={step:z["b"].string};var Hr={step:null};var Wr={START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"};var Vr=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"renderHeaderAction",value:function e(){if(this.props.step===Wr.CANCELLED)return qr.rt("I changed my mind. <a>Take the tutorial.</a>",null,function(e){var t=e.key,r=e.text;return n.a.createElement(Br["a"],{key:t,onClick:Ur["b"]},r)});if(this.props.step===Wr.SLACKBOT)return qr.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,function(e){var t=e.key,r=e.text;return n.a.createElement(Br["a"],{key:t,onClick:Ur["a"]},r)});return null}},{key:"renderFooter",value:function e(){if(this.props.step!==Wr.START)return null;return n.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},n.a.createElement(We["d"],{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:Ur["f"]},qr.rt("Explore Slack")),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},qr.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,function(e){var t=e.key,r=e.text;return n.a.createElement(Br["a"],{key:t,onClick:Ur["a"],"data-qa":"skip_tutorial"},r)})))}},{key:"render",value:function e(){var t=this.props.step;var r=K()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===t});return n.a.createElement("div",{className:r},n.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},n.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_text"},qr.rt("Welcome!")),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},qr.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}]);return t}(a["PureComponent"]);Vr.displayName="NewxpForeword";Vr.defaultProps=Hr;var zr=Vr;var Qr=Ne;var Kr=new ne["b"]("message_pane_foreword");var Yr={clogger:z["b"].object.isRequired};var Jr=35;var Zr=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:Jr}}})}},{key:"render",value:function e(){var t="/pricing?ui_step=42&ui_element="+Jr;return n.a.createElement("div",{className:"p-message_pane__limited_history_alert"},n.a.createElement(Kt["b"],{text:":speech_balloon:",emojiSize:Kt["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",Kr.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",n.a.createElement("a",{href:t,target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},Kr.t("Learn More")))}}]);return t}(a["PureComponent"]);Zr.displayName="LimitedHistoryAlert";var Xr=function e(t){return{clogger:Object(ee["a"])({state:t})}};var $r=Object(i["connect"])(Xr)(Zr);var ea=r(3539);var ta=r(3540);var ra=r(97);var aa=r.n(ra);var na=r(884);var ia=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));d.a.isFunction(e.shouldExcludeFirstItemFromGravity)&&(r.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity);return r}q()(t,[{key:"layout",value:function e(){aa()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"layout",this).call(this);if(this.totalHeight<this.containerHeight){var r=this.containerHeight-this.totalHeight;this.tops=d.a.mapValues(this.tops,function(e){return e+r});this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[d.a.first(this.keys)]=0)}}]);return t}(na["a"]);var sa=ia;var oa=r(874);var la=r(3541);var ca=r(1171);var ua=ca["a"];var da=r(756);var pa=r(217);var ma=r(76);var ha=new ne["b"]("messages");var fa={ghost:z["b"].bool};var va={ghost:false};function ba(e){var t=e.ghost;return n.a.createElement("div",{className:K()({"c-message_list__unread_divider":true,"c-message_list__unread_divider--ghost":t})},n.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),n.a.createElement("span",{className:"c-message_list__unread_divider__label"},ha.t("new messages")))}ba.displayName="UnreadDivider";ba.defaultProps=va;var ga=Object(ma["pure"])(ba);var _a=r(32);var ya=r.n(_a);var ka=r(359);var Oa={date:z["b"].number.isRequired,isUnread:z["b"].bool,ghost:z["b"].bool};var Ea={isUnread:false,ghost:false};function wa(e){var t=e.isUnread,r=ya()(e,["isUnread"]);var a=t?n.a.createElement(ga,{ghost:r.ghost}):n.a.createElement("hr",{className:"c-message_list__day_divider__line"});return n.a.createElement("div",{className:"c-message_list__day_divider"},a)}wa.displayName="DayDivider";wa.defaultProps=Ea;function Ca(e){var t=e.date,r=e.sticky;var a=t/1e3;var i=Object(ka["a"])(a,"{day_divider_pretty}");var s=K()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!r});return n.a.createElement("div",{className:s},n.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},i))}Ca.displayName="DayDividerLabel";Ca.defaultProps={sticky:true};var Sa=Object(ma["pure"])(wa);var ja=Object(ma["pure"])(Ca);var Ia=function(e){V()(t,e);function t(){B()(this,t);var e=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={isVisible:true};e.onMouseMove=e.onMouseMove.bind(e);return e}q()(t,[{key:"onMouseMove",value:function e(){this.setState(function(){return{isVisible:false}})}},{key:"render",value:function e(){var t=n.a.createElement("div",{className:"c-message_list__focus_indicator",onMouseMove:this.onMouseMove});return this.state.isVisible?t:null}}]);return t}(a["PureComponent"]);Ia.displayName="FocusIndicator";var Ta=Ia;var Na=r(2250);var Aa=ea["a"];var Ra=ta["a"];var Ma={channelId:z["b"].string,timestamps:z["b"].arrayOf(z["b"].string),requestHistory:z["b"].func,lastReadTs:z["b"].string,isGhostLastRead:z["b"].bool,startTs:z["b"].string,startTsOffset:z["b"].number,highlightTs:z["b"].string,rollups:z["b"].objectOf(Z["a"].Rollup()),setUnreadPoint:z["b"].func,isLoading:z["b"].bool,isLoadingOlder:z["b"].bool,reachedStart:z["b"].bool,reachedEnd:z["b"].bool,prevReachedEnd:z["b"].bool,oldest:z["b"].string,latest:z["b"].string,onScroll:z["b"].func,onVisibleRowsChanged:z["b"].func,doneHighlighting:z["b"].func,isLimited:z["b"].bool,isSlackbotIm:z["b"].bool,isTeambotIm:z["b"].bool,useStickyDayDividers:z["b"].bool,shouldIgnoreScrollKeys:z["b"].func,shouldIgnoreArrowKeys:z["b"].func,channelSessionId:z["b"].string,theme:z["b"].string,firstUnreadTs:z["b"].string,featureReactMessages:z["b"].bool,featureTinyspeck:z["b"].bool,featureJumpToUnreadShortcut:z["b"].bool,featureAriaApplicationMode:z["b"].bool,messageContainerType:z["b"].string,ariaLabel:z["b"].string.isRequired,teamId:z["b"].string,enterpriseId:z["b"].string,sessionId:z["b"].string,msgTriggers:z["b"].object,currentUserId:z["b"].string,jumpToTimestamp:z["b"].func,makeMessageSummary:z["b"].func,isScreenReaderEnabled:z["b"].bool,windowLastFocusEvent:z["b"].number,onFocusEnter:z["b"].func,onFocusLeave:z["b"].func};var Pa={channelId:null,timestamps:[],requestHistory:d.a.noop,lastReadTs:void 0,isGhostLastRead:false,startTs:null,startTsOffset:null,highlightTs:null,rollups:null,setUnreadPoint:d.a.noop,isLoading:false,isLoadingOlder:false,reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,onScroll:d.a.noop,onVisibleRowsChanged:d.a.noop,doneHighlighting:d.a.noop,isLimited:false,isSlackbotIm:false,isTeambotIm:false,useStickyDayDividers:true,shouldIgnoreScrollKeys:function e(){return false},shouldIgnoreArrowKeys:function e(){return false},channelSessionId:null,theme:"light",firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,featureJumpToUnreadShortcut:false,featureAriaApplicationMode:false,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:d.a.noop,makeMessageSummary:void 0,isScreenReaderEnabled:false,windowLastFocusEvent:null,onFocusEnter:d.a.noop,onFocusLeave:d.a.noop};var xa=80;var Da=60;var Fa=21;var La=64;var Ba=120;var Ua="MESSAGE-LIST";var qa=864e5;var Ga={ABOVE:1,VISIBLE:2,BELOW:3};var Ha="0000000000.000001";var Wa=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=Object(la["a"])();r.state={degraded:a,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:false,hasKeyboardFocus:false};r.DEFAULT_ROW_HEIGHT="light"===e.theme?xa:Da;r.STICKY_EPSILON=r.DEFAULT_ROW_HEIGHT/2;r.ANCHOR_OFFSET=a?Ba:La;r.heightCache=new oa["a"]({DEFAULT_HEIGHT:r.DEFAULT_ROW_HEIGHT});r.layout=new sa({heightCache:r.heightCache,stickToBottom:e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:r.isFirstRowLimitedHistoryForeword.bind(r),STICKY_EPSILON:r.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:r.ANCHOR_OFFSET});r.keys=[];r.rows=[];r.visibleRows=[];r.unreadIndex=null;r.list=null;r.useAnchor=true;r.keyToScrollTo=null;r.width=0;r.hasRenderedOneMessage=false;r.requestAround=r.requestAround.bind(r);r.requestOlder=r.requestOlder.bind(r);r.requestNewer=r.requestNewer.bind(r);r.renderRow=r.renderRow.bind(r);r.setListRef=r.setListRef.bind(r);r.getAriaLabelForRow=r.getAriaLabelForRow.bind(r);r.onScroll=r.onScroll.bind(r);r.onListScrolled=r.onListScrolled.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.debouncedOnListScrolled=Object(Ee["a"])(r.onListScrolled,150);r.isMessage=r.isMessage.bind(r);r.onSelectionChange=r.onSelectionChange.bind(r);r.onJumpToUnreadShortcut=r.onJumpToUnreadShortcut.bind(r);r.onPageUp=r.onPageUp.bind(r);r.onPageDown=r.onPageDown.bind(r);r.onHome=r.onHome.bind(r);r.onEnd=r.onEnd.bind(r);r.scrollToOffset=d.a.throttle(r.scrollToOffset.bind(r),200);r.unfurlLinkCache=new da["a"];r.messagesRendered={};r.loadingHistoriesSeen=0;r.loadingHistoriesSeenHighEnd=0;r.loadingHistoriesPerHowManyMessages=84;r.loadingHistoriesPerHowManyMessagesHighEnd=500;r.scrollMetricsGatheringEnabled=Object(re["a"])(1)||r.props.featureTinyspeck;if(r.scrollMetricsGatheringEnabled){r.debounceBatchMessagesSeen=d.a.debounce(function(){Object($["h"])("modern_history_load_seen_per_84_messages",r.loadingHistoriesSeen,{allow_zero:true});r.loadingHistoriesSeen=0},1e3);r.debounceBatchMessagesSeenHighEnd=d.a.debounce(function(){Object($["h"])("modern_history_load_seen_per_500_messages",r.loadingHistoriesSeenHighEnd,{allow_zero:true});r.loadingHistoriesSeenHighEnd=0},1e3)}r.debounceCountHistoryLoadSeen=d.a.debounce(function(){r.loadingHistoriesSeen+=1;r.loadingHistoriesSeenHighEnd+=1},1e3);r.prqMetrics={channelSwitch:{}};return r}q()(t,[{key:"componentDidUpdate",value:function e(t){if(this.keyToScrollTo&&this.list){this.list.scrollToKey(this.keyToScrollTo,{lazy:this.lazyScroll});this.keyToScrollTo=null}this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd);this.onListScrolled();this.maybeLogChannelSwitch(t)}},{key:"maybeLogChannelSwitch",value:function e(t){if(!navigator.onLine)return;if("undefined"===typeof this.props.msgTriggers[this.props.channelId]||this.props.windowLastFocusEvent!==this.props.msgTriggers[this.props.channelId].lastFocus){this.prqMetrics.channelSwitch={};return}if(t.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(t.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&false===t.isLoading&&true===this.props.isLoading&&true!==this.props.isLoadingOlder&&false===this.prqMetrics.channelSwitch.hasLoggedVisible&&false===this.prqMetrics.channelSwitch.hasLoggedUsable){var r=false;this.trackChannelSwitchWithSync(ce,r)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&true===t.isLoading&&false===this.props.isLoading&&true!==this.props.isLoadingOlder&&true===this.prqMetrics.channelSwitch.hasLoggedVisible){var a=true;this.trackChannelSwitchWithSync(le,a)}}},{key:"trackChannelSwitchWithoutSync",value:function e(t){if(this.prqMetrics.channelSwitch.duration){le(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);ce(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}var r="start_channel_change_"+this.props.channelId;var a=Object($["f"])("channel_change_react_msgs",r,null,{return_unprocessed:true}).unprocessed;this.prqMetrics.channelSwitch={duration:a,prevChannelId:t,nextChannelId:this.props.channelId,fetchHistoryState:ie,hasLoggedVisible:false,hasLoggedUsable:false}}},{key:"trackChannelSwitchWithSync",value:function e(t,r){var a="start_channel_change_"+this.prqMetrics.channelSwitch.nextChannelId;t(Object($["f"])("channel_change_not_stored",a,null,{ephemeral:true,return_unprocessed:true}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,oe,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);if(r){this.prqMetrics.channelSwitch={};this.prqMetrics.channelSwitch.hasLoggedUsable=true}else this.prqMetrics.channelSwitch.hasLoggedVisible=true}},{key:"findTimestampClosestToStartTs",value:function e(){var t=this.props,r=t.startTs,a=t.timestamps;if(!a.length)return false;if(!r)return null;return d.a.find(a,function(e){return e>=r})}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"jumpToUnread",value:function e(t){var r=this.props,a=r.lastReadTs,n=r.jumpToTimestamp,i=r.isScreenReaderEnabled;var s=t&&"keydown"===t.type&&(i||this.state.hasKeyboardFocus);var o=d.a.isNumber(this.unreadIndex)&&this.keys[this.unreadIndex];if(s){this.focusFirstUnreadMsgAfterUpdate=true;if(o){this.forceUpdate();return}n({ts:a});return}if(o){this.list.scrollToKey(o);return}n({ts:a})}},{key:"isAtBottom",value:function e(){if(!this.list)return false;var t=this.list.getScrollTop();var r=this.layout.getTotalHeight();var a=this.height;return t+a>=Math.floor(r)-this.STICKY_EPSILON}},{key:"getUnreadLinePlacement",value:function e(){if("number"!==typeof this.unreadIndex)return Ga.ABOVE;if(!this.list)return Ga.ABOVE;var t=this.list.getVisibleRange(),r=t.start,a=t.end;if(this.unreadIndex<r)return Ga.ABOVE;if(this.unreadIndex<a)return Ga.VISIBLE;return Ga.BELOW}},{key:"getVisibleRows",value:function e(){if(!this.list)return[];var t=this.list.getVisibleRange(),r=t.start,a=t.end;var n=this.rows.slice(r,a);return n}},{key:"getScrollmarkForFocusedItem",value:function e(t){var r=t===Ha?this.props.timestamps[0]:t;return{mark:t,offset:this.layout.getTop(r)-this.list.getScrollTop()}}},{key:"getScrollmark",value:function e(){if(!this.list||!this.layout)return null;var t=this.state.hasKeyboardFocus?this.list.getActiveItem():this.previouslyActiveItem;this.previouslyActiveItem=null;if(t)return this.getScrollmarkForFocusedItem(t);var r=this.list.getScrollTop();if(this.layout.shouldStickToBottom(r))return null;var a=this.props.timestamps;var n=this.layout.findAnchor(a,a,r+this.ANCHOR_OFFSET);var i=this.layout.getTop(n)-r;return{mark:n,offset:i}}},{key:"onScroll",value:function e(){this.useAnchor=false;this.layout.setAnchor(false);this.debouncedOnListScrolled();this.props.onScroll()}},{key:"onSelectionChange",value:function e(t){if(!this.node)return;this.setState(function(){return{isSelecting:t}})}},{key:"isMessage",value:function e(t){var r=this.rows[t.index];return r&&("message"===r.type||"foreword"===r.type)}},{key:"onListScrolled",value:function e(){var t=this.getVisibleRows();if(d.a.isEqual(t,this.visibleRows))return;this.visibleRows=t;this.props.onVisibleRowsChanged(t)}},{key:"onPageUp",value:function e(){this.scrollToOffset(this.list.getScrollTop()-(this.height-Fa))}},{key:"onPageDown",value:function e(){this.scrollToOffset(this.list.getScrollTop()+(this.height-Fa))}},{key:"onHome",value:function e(){this.scrollToOffset(0,{absolute:true})}},{key:"onEnd",value:function e(){this.props.reachedEnd?this.scrollToOffset(Infinity,{absolute:true}):this.props.jumpToTimestamp({ts:null})}},{key:"onJumpToUnreadShortcut",value:function e(t){if(!this.props.featureJumpToUnreadShortcut)return;if(!pa["a"])return;this.jumpToUnread(t)}},{key:"onFocusEnter",value:function e(t){var r=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){r.props.onFocusEnter(t)})}},{key:"onFocusLeave",value:function e(t){var r=this;this.state.hasKeyboardFocus&&(this.previouslyActiveItem=t.activeItem);this.setState(function(){return{hasKeyboardFocus:false}},function(){r.props.onFocusLeave(t)})}},{key:"scrollToOffset",value:function e(){var t;if(!this.list)return;(t=this.list).scrollToOffset.apply(t,arguments)}},{key:"shouldShowLimitedHistoryAlert",value:function e(){var t=this.props,r=t.isLimited,a=t.isSlackbotIm;return r&&a}},{key:"shouldShowLimitedHistoryForeword",value:function e(){var t=this.props,r=t.isLimited,a=t.isSlackbotIm;return r&&!a}},{key:"isFirstRowLimitedHistoryForeword",value:function e(){if(!this.shouldShowLimitedHistoryForeword())return false;var t=d.a.first(this.rows);return t&&"foreword"===t.type}},{key:"requestAround",value:function e(){var t=this;if(this.state.isLoading)return false;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(j["a"])({teamId:this.props.teamId}).info(Ua,"requestAround channelId: "+this.props.channelId+" isLoading: "+this.state.isLoading+" timestamps: "+d.a.size(this.props.timestamps)+" reachedStart: "+this.props.reachedStart+" reachedEnd: "+this.props.reachedEnd);var r=this.props,a=r.oldest,n=r.latest,i=r.timestamps,s=r.startTs;if(d.a.isEmpty(i)&&!s)return this.props.requestHistory({});var o=a||i&&d.a.first(i)||s;var l=n||i&&d.a.last(i)||s;var c=this.props.requestHistory({latest:o,oldest:l});if(c){this.prqMetrics.channelSwitch.fetchHistoryState!==oe&&(this.prqMetrics.channelSwitch.fetchHistoryState=se);c.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=oe});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return c}},{key:"requestOlder",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.oldest,n=r.timestamps,i=r.startTs;var s=a||n&&d.a.first(n)||i;var o=this.props.requestHistory({latest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==oe&&(this.prqMetrics.channelSwitch.fetchHistoryState=se);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=oe});this.setState(function(){return{isLoading:true,isLoadingOlder:true}})}return o}},{key:"requestNewer",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.latest,n=r.timestamps,i=r.startTs;var s=a||n&&d.a.last(n)||i;var o=this.props.requestHistory({oldest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==oe&&(this.prqMetrics.channelSwitch.fetchHistoryState=se);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=oe});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return o}},{key:"renderMessage",value:function e(t,r){var a=r.hasFocus,i=r.isHovered;var s=t.ts,o=t.previousMessageTs;var l=d.a.last(this.props.timestamps);var c=s&&s===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[t.ts]=true;var u=d.a.keys(this.messagesRendered).length;u%this.loadingHistoriesPerHowManyMessages===0&&this.debounceBatchMessagesSeen();u%this.loadingHistoriesPerHowManyMessagesHighEnd===0&&this.debounceBatchMessagesSeenHighEnd()}var p=n.a.createElement(ua,{ts:s,key:s,channelId:this.props.channelId,previousMessageTs:o,isLast:s===l,rollup:this.props.rollups[s],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:c,doneHighlighting:this.props.doneHighlighting,unfurlLinkCache:this.unfurlLinkCache,channelSessionId:this.props.channelSessionId,isHovered:i,messageContainerType:this.props.messageContainerType,renderActions:i||a,hasFocus:a,renderActionsOffscreen:this.state.hasKeyboardFocus});if(a)return[p,n.a.createElement(Ta,{key:"message-list-focus-indicator"})];return p}},{key:"renderForeword",value:function e(t){var r=t.hasFocus;var a=n.a.createElement(Qr,{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()});if(r)return[a,n.a.createElement(Ta,{key:"message-list-focus-indicator"})];return a}},{key:"renderRow",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.hasFocus,i=r.isHovered;var s=this.rows[t];if(!s||!s.type)return null;switch(s.type){case"message":return this.renderMessage(s,{hasFocus:a,isHovered:i});case"dayDividerLabel":return n.a.createElement(ja,{key:s.day,date:s.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return n.a.createElement(Sa,{key:s.day,date:s.day,isUnread:s.showDayDividerAsUnread,ghost:this.props.isGhostLastRead});case"unread":return n.a.createElement(ga,{key:"unread",ghost:this.props.isGhostLastRead});case"loading":this.debounceCountHistoryLoadSeen();return n.a.createElement("div",{key:"loading",className:K()("c-message_list__placeholders","c-message_list__placeholders--"+this.props.theme)});case"loadingSpinner":return n.a.createElement("div",{className:"c-message_list__spinner"},n.a.createElement(He["a"],{type:"spinner",animation:"spin"}));case"foreword":return this.renderForeword({hasFocus:a});case"limited_history":return n.a.createElement($r,null);default:return null}}},{key:"getAriaLabelForRow",value:function e(t){var r=this.rows[t];if(!r||!r.type)return;if("message"!==r.type)return;var a=r.ts,n=r.previousMessageTs,i=r.isFirstMsgForDay,s=r.isLastMsgForDay,o=r.isFirstUnreadMsg,l=r.day;var c=this.props,u=c.channelId,d=c.makeMessageSummary;var p=this.props.rollups[a];if(d)return d({channelId:u,ts:a,isFirstUnreadMsg:o,isFirstMsgForDay:i,isLastMsgForDay:s,previousMessageTs:n,day:l,rollup:p,hasFocus:this.state.hasKeyboardFocus})}},{key:"componentWillReceiveProps",value:function e(t){var r=this;this.setState(function(e){if(t.isLoading===e.isLoading&&t.isLoadingOlder===e.isLoadingOlder)return null;Object(j["a"])({teamId:r.props.teamId}).info(Ua,"componentWillReceiveProps isLoading: "+t.isLoading+" isLoadingOlder: "+t.isLoadingOlder+" timestamps: "+d.a.size(t.timestamps));return{isLoading:t.isLoading,isLoadingOlder:t.isLoadingOlder}});if(t.channelId!==this.props.channelId||t.startTs!==this.props.startTs||t.highlightTs&&t.highlightTs!==this.props.highlightTs||t.timestamps.length&&!this.props.timestamps.length){this.useAnchor=true;var a=t.startTs;var n=this.props.timestamps;var i=t.timestamps;if(d.a.inRange(a,d.a.floor(d.a.first(n)),d.a.ceil(d.a.last(n)))&&t.channelId===this.props.channelId){var s=d.a.findLast(i,function(e){return e<=t.startTs});this.keyToScrollTo=s;this.lazyScroll=t.highlightLazy;this.useAnchor=false}}if(t.channelId!==this.props.channelId){this.unfurlLinkCache=new da["a"];this.heightCache.invalidate();this.list&&this.list.resetRendered&&this.list.resetRendered();Object(j["a"])({teamId:this.props.teamId}).info(Ua,"Switching channels: "+t.channelId+" timestamps: "+d.a.size(t.timestamps))}t.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}},{key:"groupTimestampsByDay",value:function e(t){var r=this;return d.a.groupBy(t,function(e){return r.getDayTimestampForMessage(e)})}},{key:"getDayTimestampForMessage",value:function e(t){if(!t)return;var r=Object(we["a"])(t);var a=new Date(r.getFullYear(),r.getMonth(),r.getDate());return a.getTime().toString()}},{key:"getTimestampsForDays",value:function e(t){return d.a.keys(this.groupTimestampsByDay(t)).sort()}},{key:"getTimestampOfDayClosestToTop",value:function e(){var t=this.list.getVisibleRange(),r=t.start;var a=this.rows[r];if(!a)return;if("dayDivider"===a.type)return a.day.toString();if("dayDividerLabel"===a.type)return a.day.toString();if("message"===a.type)return a.day.ts.toString();return}},{key:"getStartTimestampForDayNavigation",value:function e(){if(this.state.hasKeyboardFocus)return this.getDayTimestampForMessage(this.list.getInitialActiveItem());return this.getTimestampOfDayClosestToTop()}},{key:"getTimestampOfPrevDay",value:function e(){var t=this.getStartTimestampForDayNavigation();var r=this.getTimestampOfFirstMessageForDay(t);if(!r)return t;if(r&&!this.list.isItemInView(r))return t;var a=this.getTimestampsForDays(this.props.timestamps);var n=d.a.indexOf(a,t);var i=n-1;return a[i]}},{key:"getTimestampOfNextDay",value:function e(){var t=this.getStartTimestampForDayNavigation();var r=this.getTimestampsForDays(this.props.timestamps);var a=d.a.indexOf(r,t);var n=r[a+1];if(n)return n;return(parseInt(t,10)+qa).toString()}},{key:"getTimestampOfFirstMessageForDay",value:function e(t){var r=this.getTimestampsForDays(this.props.timestamps);var a=d.a.indexOf(r,t);if(a<0)return;if(0===a&&!this.props.reachedStart)return;var n=this.groupTimestampsByDay(this.props.timestamps);var i=n[t];return i?i[0]:void 0}},{key:"render",value:function e(){var t=this;var r=this.groupTimestampsByDay(this.props.timestamps);var a=d.a.keys(r).sort();var i=[];var s=[];var o=[];var l=this.findTimestampClosestToStartTs();var c=this.props.firstUnreadTs;var u=l;if(this.props.reachedStart){s.push(Ha);i.push({type:"foreword",ts:Ha});if(this.shouldShowLimitedHistoryAlert()){s.push("limited_history");i.push({type:"limited_history"})}}this.unreadIndex=null;var p=d.a.first(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;d.a.forEach(a,function(e,n){var l=parseInt(e,10);var m=r[e];var h=e+"."+t.props.channelId;var f=p&&d.a.first(m)===c;if(f){t.unreadIndex=i.length;t.props.startTs===t.props.lastReadTs&&(u=h)}i.push({type:"dayDividerLabel",day:l,showDayDividerAsUnread:f});t.props.useStickyDayDividers&&o.push({key:h,index:s.length});s.push(h);if(n>0||t.props.reachedStart||t.state.degraded){i.push({type:"dayDivider",day:l,showDayDividerAsUnread:f});s.push(e+"divider")}if(!t.state.degraded&&!t.state.isSelecting&&0===n&&t.state.isLoadingOlder){s.push("loading");i.push({type:"loading"})}var v=void 0;d.a.forEach(m,function(e,r){if(p&&0!==r&&e===c){t.unreadIndex=i.length;var o="unreadDivider";s.push(o);i.push({type:"unread"});t.props.startTs===t.props.lastReadTs&&(u=c)}var d=0===n&&t.props.reachedStart;var h=n===a.length-1&&t.props.reachedEnd;var f=0===r&&(n>0||t.props.reachedStart);var b=r===m.length-1&&(n<a.length-1||t.props.reachedEnd);var g=c===e;i.push({type:"message",ts:e,previousMessageTs:v,isFirstMsgForDay:f,isLastMsgForDay:b,isFirstUnreadMsg:g,day:{ts:l,isFirstDay:d,isLastDay:h}});s.push(e);v=e})});if(this.state.isLoading&&!this.state.isLoadingOlder&&!this.props.reachedEnd&&!this.props.prevReachedEnd){s.push("loadingSpinner");i.push({type:"loadingSpinner"})}this.layout.setAnchor(this.useAnchor&&u,this.useAnchor&&this.props.startTsOffset);this.keys=s;this.rows=i;var m={firstVisibleUnreadTs:c,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:d.a.last(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,isTeambotIm:this.props.isTeambotIm,useStickyDayDividers:this.props.useStickyDayDividers};var h=this.state.degraded?Ra:Aa;var f=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut}];var v=function(){if(t.focusFirstUnreadMsgAfterUpdate&&c){t.focusFirstUnreadMsgAfterUpdate=false;return c}return}();var b=function(){if(t.state.isLoading)return h.FIRST_ITEM_IN_VIEW;var e=i[i.length-1];var r=e&&e.type;var a=t.props.startTs===Ha||false===l&&"foreword"===r;if(a)return Ha;if(null===l&&"message"===r)return e.ts;if(c)return c;if(l)return l;return h.FIRST_ITEM_IN_VIEW}();return n.a.createElement(ke["a"],null,function(e){var r=e.width,a=e.height;if(0===r||0===a)return null;if(r!==t.width){t.heightCache.invalidate();t.width=r}t.height=a;return n.a.createElement(h,{ref:t.setListRef,className:"c-message_list",ariaLabel:t.props.ariaLabel,height:a,width:r,keys:s,rowRenderer:t.renderRow,getAriaLabelForRow:t.getAriaLabelForRow,layout:t.layout,itemToFocus:v,stickyItems:o,stickyOffsetTop:-21,stickyZIndex:200,loadAround:t.requestAround,loadPre:t.requestOlder,loadPost:t.requestNewer,isLoading:t.state.isLoading,reachedStart:t.props.reachedStart,reachedEnd:t.props.reachedEnd||t.props.prevReachedEnd,fadeScrollbar:true,onScroll:t.onScroll,onSelectionChange:t.onSelectionChange,onPageUp:t.onPageUp,onPageDown:t.onPageDown,onHome:t.onHome,onEnd:t.onEnd,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,keyCommands:f,shouldIgnoreScrollKeys:t.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:t.props.shouldIgnoreArrowKeys,isFocusableItem:t.isMessage,unrelatedUpdateProps:m,featureReactMessages:t.props.featureReactMessages,initialActiveItem:b,useAriaApplicationMode:t.props.featureAriaApplicationMode})})}}]);return t}(Oe["a"]);Wa.displayName="MessageList";Wa.propTypes=Ma;Wa.defaultProps=Pa;var Va=Object(Ce["a"])(Wa);var za=Va;var Qa=r(1391);var Ka=Qa["a"];var Ya=r(1441);var Ja=r(663);var Za=r(1415);var Xa=r(178);var $a=r(2101);var en=new ne["b"]("messages");var tn={firstTimestamp:z["b"].string.isRequired,lastTimestamp:z["b"].string.isRequired,jumpToRecent:z["b"].func.isRequired};var rn={};var an=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"render",value:function e(){var t=Object(Xa["a"])(this.props.firstTimestamp,{shortenMonth:true});var r=Object(Xa["a"])(this.props.lastTimestamp,{shortenMonth:true});return n.a.createElement("div",{className:"p-archives_banner"},n.a.createElement("span",{className:"p-archives_banner__date_range"},en.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:t,rangeEnd:r})),n.a.createElement("button",{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent},en.t("Jump to recent messages"),n.a.createElement(He["a"],{type:"arrow_down"})))}}]);return t}(a["PureComponent"]);an.displayName="ArchivesBanner";var nn=an;an.defaultProps=rn;var sn=r(1419);var on=r(41);var ln=r(144);var cn=r(656);var un=r(85);var dn=r(27);var pn=new ne["b"]("messages");var mn=3e3;var hn=100;var fn={hasUnreads:z["b"].bool.isRequired,displayCount:z["b"].number,since:z["b"].oneOfType([z["b"].string,z["b"].number]),known:z["b"].bool,do24hrTime:z["b"].bool,channelId:z["b"].string,ghost:z["b"].bool,unreadPlacement:z["b"].oneOf(Object(u["values"])(Ga)),jumpToUnread:z["b"].func,markMostRecentMsgRead:z["b"].func,featureJumpToUnreadShortcut:z["b"].bool,onHide:z["b"].func};var vn={displayCount:0,since:null,do24hrTime:false,known:false,channelId:null,ghost:false,unreadPlacement:Ga.VISIBLE,jumpToUnread:u["noop"],markMostRecentMsgRead:u["noop"],featureJumpToUnreadShortcut:false,onHide:u["noop"]};var bn=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.startFade=r.startFade.bind(r);r.onAnimationTick=r.onAnimationTick.bind(r);r.onAnimationEnd=r.onAnimationEnd.bind(r);r.onKeyDown=r.onKeyDown.bind(r);r.jumpOrMark=r.jumpOrMark.bind(r);r.markAsRead=r.markAsRead.bind(r);r.animation=null;r.delay=null;r.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1};return r}q()(t,[{key:"componentWillReceiveProps",value:function e(t){clearTimeout(this.delay);if(this.state.hasUnreads&&!t.hasUnreads){if(t.ghost){this.delay=setTimeout(this.startFade,mn);return}this.startFade();return}this.setState(function(){return{hasUnreads:t.hasUnreads,displayCount:t.displayCount,since:t.since,unreadPlacement:t.unreadPlacement,opacity:1}})}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.delay);this.animation&&this.animation.cancel()}},{key:"onAnimationTick",value:function e(t){var r=t.value,a=t.nextTick;if(!this.animation)return;this.setState(function(){return{opacity:r}});a()}},{key:"onAnimationEnd",value:function e(){var t=this;this.setState(function(){return{hasUnreads:false,opacity:1}},function(){t.props.onHide()})}},{key:"onKeyDown",value:function e(t){var r=[un["c"],un["j"]];Object(u["includes"])(r,t.keyCode)&&this.jumpOrMark(t)}},{key:"startFade",value:function e(){this.animation=Object(cn["a"])({fromValue:1,toValue:0,duration:hn,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}},{key:"markAsRead",value:function e(t){t.stopPropagation();Object(j["b"])().action("UNREAD-BANNER","Mark "+this.props.channelId+" read");this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:ge["MARKED_REASONS"].CLICKED});clearTimeout(this.delay);this.animation&&this.animation.cancel();this.onAnimationEnd()}},{key:"jumpOrMark",value:function e(t){this.state.unreadPlacement===Ga.VISIBLE?this.markAsRead(t):this.props.jumpToUnread(t)}},{key:"makeJumpLabel",value:function e(){if(!this.props.featureJumpToUnreadShortcut)return pn.t("Jump");if(!Object(pa["a"])())return pn.t("Jump");var t=Object(dn["isMac"])()?pn.t("Cmd"):pn.t("Ctrl");return pn.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:t},function(e){var t=e.text,r=e.key;return n.a.createElement("span",{key:r,className:"normal"},t)})}},{key:"makeJumpAriaLabel",value:function e(){if(!this.props.featureJumpToUnreadShortcut)return;if(!Object(pa["a"])())return;var t=Object(dn["isMac"])()?pn.t("Cmd"):pn.t("Ctrl");return pn.t("Jump to first unread message ({cmdButton} J)",{cmdButton:t,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}},{key:"renderJump",value:function e(){var t=this.state.unreadPlacement;if(t===Ga.VISIBLE)return null;var r=t===Ga.ABOVE?"arrow_up":"arrow_down";var a=this.makeJumpLabel();var i=this.makeJumpAriaLabel();return n.a.createElement(We["c"],{ariaLabel:i,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},n.a.createElement(He["a"],{type:r,className:"p-message_pane__unread_banner__jump__arrow"}),a)}},{key:"renderClose",value:function e(){var t=K()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==Ga.VISIBLE});return n.a.createElement(on["d"],{tip:pn.t("Mark as read (esc)"),position:"bottom-right"},n.a.createElement(We["c"],{className:t,onClick:this.markAsRead,ariaLabel:pn.t("Mark as read")},n.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},pn.t("Mark as read")),n.a.createElement(He["a"],{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}},{key:"render",value:function e(){var t=this.state,r=t.hasUnreads,a=t.since,i=t.displayCount;var s=this.props,o=s.do24hrTime,l=s.known;if(!r||!a)return null;var c=Math.floor(parseFloat(a));if(!c)return null;var u=Object(Xa["a"])(c,{excludeYear:true});var d=Object(ln["a"])(c,{do24hrTime:o});var p=l?"":"+";var m=i;!l&&m>10&&(m=10*Math.floor(m/10));var h=pn.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:p,count:m,time:d,date:u});m&&(1!==m||l)||(h=pn.t("New messages since {time} on {date}",{time:d,date:u}));return n.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},n.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),n.a.createElement(We["c"],{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},h)),this.renderClose())}}]);return t}(a["PureComponent"]);bn.displayName="UnreadBanner";bn.defaultProps=vn;var gn=function e(t,r){var a=r.since;if("0000000000.000000"===a){var n=Object(g["getChannelById"])(t,r.channelId);a=n.created}return{do24hrTime:Object(y["getUserPref"])(t,"time24"),since:a}};var _n=Object(i["connect"])(gn)(bn);var yn=r(278);var kn=new ne["b"]("messages");var On={displayModelOrViewById:z["b"].func.isRequired,isHighlightsBackButtonVisible:z["b"].bool};var En={isHighlightsBackButtonVisible:false};var wn=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.backToBriefings=r.backToBriefings.bind(r);return r}q()(t,[{key:"backToBriefings",value:function e(){this.props.displayModelOrViewById({id:"Vall_unreads"})}},{key:"render",value:function e(){if(!this.props.isHighlightsBackButtonVisible)return null;return n.a.createElement(We["a"],{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},n.a.createElement(He["a"],{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),kn.t("Back to my highlights"))}}]);return t}(a["PureComponent"]);wn.displayName="BriefingsBackButton";wn.defaultProps=En;var Cn=function e(t){return{isHighlightsBackButtonVisible:Object(m["isHighlightsBackButtonVisible"])(t)}};var Sn=function e(t){return{displayModelOrViewById:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.id;return t(Object(yn["a"])({id:a}))}}};var jn=Object(i["connect"])(Cn,Sn)(wn);var In={channelId:z["b"].string,channelDisplayName:z["b"].string,type:z["b"].oneOf(["channel","private","im","mpim"]),theme:z["b"].oneOf(["light","dense"]),timestamps:z["b"].arrayOf(z["b"].string),reachedStart:z["b"].bool,reachedEnd:z["b"].bool,prevReachedEnd:z["b"].bool,oldest:z["b"].string,latest:z["b"].string,fetchHistory:z["b"].func,fetchSliHighlights:z["b"].func,onMount:z["b"].func,lastReadTs:z["b"].string,isGhostLastRead:z["b"].bool,unreadCount:z["b"].number,unreadCountKnown:z["b"].bool,startTs:z["b"].string,startTsOffset:z["b"].number,highlightTs:z["b"].string,highlightLazy:z["b"].bool,rollups:z["b"].objectOf(Z["a"].Rollup()),isLoading:z["b"].bool,isLoadingOlder:z["b"].bool,setUnreadPoint:z["b"].func,markMostRecentMsgRead:z["b"].func,setUnreadLineVisibility:z["b"].func,clearHighlightTs:z["b"].func,jumpToTimestamp:z["b"].func,saveScrollmark:z["b"].func,isArchived:z["b"].bool,isLimited:z["b"].bool,isSlackbotIm:z["b"].bool,overlayVisible:z["b"].bool,channelSessionId:z["b"].string,prevChannelSwitchTs:z["b"].string,newxpOnboardingStep:z["b"].string,firstUnreadTs:z["b"].string,featureReactMessages:z["b"].bool,featureTinyspeck:z["b"].bool,featureJumpToUnreadShortcut:z["b"].bool,useGlobalNav:z["b"].bool,featureClassicNav:z["b"].bool,featureAriaApplicationMode:z["b"].bool,teamId:z["b"].string,enterpriseId:z["b"].string,sessionId:z["b"].string,msgTriggers:z["b"].object,hasMessagePaneUnmounted:z["b"].bool,setMessagePaneHasUnmounted:z["b"].func,currentUserId:z["b"].string,isAppSpaceOpen:z["b"].bool,isShared:z["b"].bool,isOrgShared:z["b"].bool,isYou:z["b"].bool,isMuted:z["b"].bool,hasUnreads:z["b"].bool,hasDraft:z["b"].bool,badgeCount:z["b"].number,screenReaderOverride:z["b"].bool,windowLastBlurEvent:z["b"].number,windowLastFocusEvent:z["b"].number,makeMessageSummary:z["b"].func,isScreenReaderEnabled:z["b"].bool};var Tn={channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,fetchHistory:d.a.noop,fetchSliHighlights:d.a.noop,onMount:d.a.noop,lastReadTs:void 0,isGhostLastRead:false,unreadCount:0,unreadCountKnown:false,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,rollups:null,isLoading:false,isLoadingOlder:false,setUnreadPoint:d.a.noop,markMostRecentMsgRead:d.a.noop,setUnreadLineVisibility:d.a.noop,clearHighlightTs:d.a.noop,jumpToTimestamp:d.a.noop,saveScrollmark:d.a.noop,isArchived:false,isLimited:false,isSlackbotIm:false,overlayVisible:false,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,featureJumpToUnreadShortcut:false,useGlobalNav:false,featureClassicNav:false,featureAriaApplicationMode:false,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:false,setMessagePaneHasUnmounted:d.a.noop,currentUserId:null,isAppSpaceOpen:false,isShared:false,isOrgShared:false,isYou:false,isMuted:false,hasUnreads:false,hasDraft:false,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:false};var Nn=function(e){V()(t,e);function t(e){B()(this,t);var r=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.list=null;r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.onVisibleRowsChanged=r.onVisibleRowsChanged.bind(r);r.setListRef=r.setListRef.bind(r);r.shouldIgnoreScrollKeys=r.shouldIgnoreScrollKeys.bind(r);r.shouldIgnoreArrowKeys=r.shouldIgnoreArrowKeys.bind(r);r.requestHistory=r.requestHistory.bind(r);r.jumpToMostRecent=r.jumpToMostRecent.bind(r);r.jumpToUnread=r.jumpToUnread.bind(r);r.state={showingArchiveBanner:false,unreadPlacement:Ga.VISIBLE};r.historyRequests={};r.prqMetrics={usableVisible:{}};r.sendSessionFrameStats=r.sendSessionFrameStats.bind(r);r.recordSessionFrameStats=r.recordSessionFrameStats.bind(r);return r}q()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.onMount();var r=!!this.props.timestamps.length;var a=!!(this.props.unreadCount||this.props.unreadCountKnown);r&&a&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:d.a.filter(this.props.timestamps,function(e){return e>t.props.lastReadTs}),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs});this.recordAndTrackTimeToVisible();document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}},{key:"componentWillReceiveProps",value:function e(t){var r=this;var a=this.props.channelId;this.setState(function(e){var a=r.getUnreadLinePlacement();if(!t.isLoading&&!d.a.isEmpty(t.timestamps)){var n=false===t.reachedEnd&&!t.prevReachedEnd;if(n!==e.showingArchiveBanner)return c()({},e,{unreadPlacement:a,showingArchiveBanner:n})}if(e.unreadPlacement!==a)return c()({},e,{unreadPlacement:a});return e});if(a&&t.channelId!==a){var n=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:a,scrollmark:n});this.historyRequests={};this.recordAndTrackTimeToUsable(ae["n"].ABANDONED)}var i=this.props.timestamps.length!==t.timestamps.length;var s=this.props.unreadCount!==t.unreadCount||this.props.unreadCountKnown!==t.unreadCountKnown;!t.channelId||!i&&!s||"channel"!==t.type&&"private"!==t.type||this.props.fetchSliHighlights({channelId:t.channelId,timestamps:d.a.filter(t.timestamps,function(e){return e>t.lastReadTs}),lastReadTs:t.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs})}},{key:"componentDidUpdate",value:function e(){if(this.list){var t=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(t)}(true===this.props.reachedStart&&true===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(ae["n"].COMPLETED)}},{key:"componentWillUnmount",value:function e(){this.sendSessionFrameStats();window.removeEventListener("focus",this.recordSessionFrameStats);this.props.setMessagePaneHasUnmounted(true)}},{key:"onFocusEnter",value:function e(t){this.hasFocus=true;this.hasKeyboardFocus=t.isKeyboardFocus}},{key:"onFocusLeave",value:function e(){this.hasFocus=false;this.hasKeyboardFocus=false}},{key:"onVisibleRowsChanged",value:function e(){if(!this.list)return;var t=this.getUnreadLinePlacement();this.setState(function(){return{unreadPlacement:t}});var r=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(r)}},{key:"getUnreadLinePlacement",value:function e(){if(1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list)return Ga.VISIBLE;return this.list.getUnreadLinePlacement()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"recordAndTrackTimeToVisible",value:function e(){if(this.props.hasMessagePaneUnmounted)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}var t=Object($["f"])("prq_time_to_visible","navigationStart",null,{return_unprocessed:true}).unprocessed;this.prqMetrics.usableVisible=F()({},this.props.channelId,t);de(t,"APP_ICON",false,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);this.props.setMessagePaneHasUnmounted(true)}},{key:"recordAndTrackTimeToUsable",value:function e(t){if(0===Object.keys(this.prqMetrics.usableVisible).length)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}var r=Object($["f"])("prq_time_to_usable","navigationStart",null,{return_unprocessed:true}).unprocessed;ue(r,"APP_ICON",true,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,t,window.desktop);this.prqMetrics.usableVisible={}}},{key:"recordSessionFrameStats",value:function e(){window.removeEventListener("focus",this.recordSessionFrameStats);window.addEventListener("blur",this.sendSessionFrameStats);window.addEventListener("beforeunload",this.sendSessionFrameStats);ve(this.props.teamId,this.props.enterpriseId,ae["j"].PRQ_SESSION_FRAME_STATS)&&Object(be["g"])()}},{key:"sendSessionFrameStats",value:function e(){window.addEventListener("focus",this.recordSessionFrameStats);window.removeEventListener("blur",this.sendSessionFrameStats);window.removeEventListener("beforeunload",this.sendSessionFrameStats);if(!Object(be["e"])())return;Object(be["i"])();var t=Object(be["a"])();if(0===t.durationMs)return;pe(t.durationMs,t.histFrameRenderTime,t.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}},{key:"shouldIgnoreScrollKeys",value:function e(t){var r=t.target;var a=r===document.body;var n=this.hasFocus;var i=Object(ye["e"])();return!(a||n||i)}},{key:"shouldIgnoreArrowKeys",value:function e(t){var r=t.target;var a=document.querySelector(".client_channels_list_container");var n=document.getElementById("col_flex");var i=a&&a.contains(r);var s=n&&n.contains(r);return!Object(ye["f"])()||s||i||!this.hasKeyboardFocus}},{key:"isUnreadLineVisible",value:function e(){var t=this.props,r=t.isGhostLastRead,a=t.unreadCount,n=t.reachedEnd,i=t.isLoading;if(i)return false;if(!r&&this.list.getUnreadLinePlacement()===Ga.VISIBLE)return true;if(!a&&n&&this.list.isAtBottom())return true;return false}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});var r=t?t.message:"";var a=t?t.stack:"";var n=Object(j["a"])({teamId:this.props.teamId});n.error("MessagePane componentDidCatch: "+r);a&&n.error(a)}},{key:"requestHistory",value:function e(t){var r=t.oldest,a=t.latest;var n=this.props,i=n.channelId,s=n.type,o=n.reachedStart,l=n.reachedEnd;if(o&&l)return false;var c=r;var u=a;if(u&&o){if(!c)return false;u=null}if(c&&l){if(!u)return false;c=null}if(this.shouldPreventHistoryRequest({oldest:r,latest:a})){Object(_e["a"])({channelId:i,latestTs:u,oldestTs:c},"message_pane_request_rate_limited");return false}var d="message-pane/requestHistory";var p=this.props.fetchHistory({channelId:i,type:s,oldest:c,latest:u,reason:d});p&&this.logHistoryRequest({oldest:c,latest:u});return p}},{key:"logHistoryRequest",value:function e(t){var r=t.oldest,a=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=r+"_"+a;var o=this.historyRequests[s];if(!o){o={count:0,time:0};this.historyRequests[s]=o}if(i-1e4>o.time){o.count=1;o.time=i}else o.count+=1}},{key:"shouldPreventHistoryRequest",value:function e(t){var r=t.oldest,a=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=this.historyRequests[r+"_"+a];if(!s)return false;if(s.count<=3)return false;if(s.time<i-1e4)return false;return true}},{key:"jumpToMostRecent",value:function e(){this.props.jumpToTimestamp({ts:null})}},{key:"jumpToUnread",value:function e(t){this.list.jumpToUnread(t)}},{key:"renderArchivesBanner",value:function e(){if(!this.state.showingArchiveBanner)return null;var t=this.props.timestamps;if(d.a.isEmpty(t))return null;return n.a.createElement(nn,{firstTimestamp:d.a.first(t),lastTimestamp:d.a.last(t),jumpToRecent:this.jumpToMostRecent})}},{key:"renderUnreadBanner",value:function e(){var t=this.props,r=t.unreadCount,a=t.unreadCountKnown,i=t.lastReadTs,s=t.channelId,o=t.isGhostLastRead,l=t.markMostRecentMsgRead,c=t.timestamps,u=t.reachedEnd,d=t.newxpOnboardingStep,p=t.overlayVisible,m=t.isArchived,h=t.featureJumpToUnreadShortcut;if(p)return null;if(d&&d!==Wr.CANCELLED&&d!==Wr.COMPLETE)return null;if(m)return null;var f=c.length&&u?c.filter(function(e){return e>i}).length:r;return n.a.createElement(_n,{channelId:s,hasUnreads:r>0,displayCount:f,known:a,since:i,ghost:o,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:l,featureJumpToUnreadShortcut:h})}},{key:"renderMessagePaneBannerContainer",value:function e(){var t=this.props,r=t.newxpOnboardingStep,a=t.overlayVisible;if(a)return null;if(r)return null;return n.a.createElement(Ka,null)}},{key:"render",value:function e(){if(this.props.isAppSpaceOpen)return null;if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===Wr.START)return n.a.createElement(zr,{step:this.props.newxpOnboardingStep});if(!this.props.channelId)return null;var t=J.a.msie||J.a.msedge;var r=!this.props.overlayVisible&&!t;var a=K()("p-message_pane",{"p-message_pane--ie":t,"p-message_pane--global-nav":this.props.useGlobalNav,"p-message_pane--classic-nav":Object(X["a"])()&&this.props.featureClassicNav});var i=this.props,s=i.type,o=i.channelDisplayName,l=i.isShared,c=i.isOrgShared,u=i.isYou,d=i.isMuted,p=i.hasUnreads,m=i.hasDraft,h=i.isArchived,f=i.unreadCount,v=i.badgeCount;var b=Object(Za["a"])({type:s,displayName:o,isShared:l,isOrgShared:c,isYou:u,isMuted:d,hasUnreads:p,hasDraft:m,isArchived:h,unreadCount:f,badgeCount:v,isSelected:false,userActive:false,isTyping:false});return n.a.createElement(Ya["a"],{component:this,order:1},n.a.createElement("div",{className:a,"data-qa":"message_pane"},n.a.createElement("div",{className:"p-message_pane__top_banners"},n.a.createElement(jn,null),n.a.createElement(sn["a"],null),this.renderUnreadBanner()),this.renderMessagePaneBannerContainer(),n.a.createElement(za,{ref:this.setListRef,channelId:this.props.channelId,ariaLabel:b,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:r,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:ge["MESSAGE_CONTAINERS"].MESSAGE_PANE,featureReactMessages:this.props.featureReactMessages,featureTinyspeck:this.props.featureTinyspeck,featureJumpToUnreadShortcut:this.props.featureJumpToUnreadShortcut,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave}),this.renderArchivesBanner()))}}]);return t}(a["PureComponent"]);Nn.displayName="MessagePane";Nn.defaultProps=Tn;var An=Object(Ja["a"])(Nn,{updateStore:function e(t){var r=t.instance,a=t.dispatch;var n=r.list&&r.list.getScrollmark();a(n?Object(m["jumpToTimestamp"])({ts:n.mark,offset:n.offset}):Object(m["jumpToTimestamp"])({ts:null}))}});var Rn=r(1435);var Mn=Object(p["createSelectorCreator"])(p["defaultMemoize"],I["a"]);var Pn=20;var xn=Mn([b["getPotentiallyOutdatedTimestamps"],_["getMessagesByChannelId"],function(e,t,r){return r}],function(e,t,r){var a=e.timestamps,n=e.start,i=e.end,s=e.reachedStart,o=e.reachedEnd,l=e.prevReachedEnd;if(!o&&!l&&a&&a.length-d.a.sortedLastIndex(a,r)<Pn)return{messages:[],rollups:{},reachedStart:false,reachedEnd:false};var c=d()(a).map(function(e){return t[e]}).reject(C["isHidden"]).value();var u=Object(Rn["a"])(c),p=u.rollups,m=u.messages;return{messages:m,timestamps:d.a.map(m,function(e){return e.ts}),rollups:p,reachedStart:s,reachedEnd:o,prevReachedEnd:l,oldest:n,latest:i}});function Dn(e){var t=e.state,r=e.channelId,a=e.timestamps,n=e.rollups,i=e.lastReadTs;return d.a.find(a,function(e){var a=Object(_["getMessageByTimestamp"])(t,r,e);var s=Object(k["getCurrentUserId"])(t);if(!a)return false;if(n[e]){var o=d.a.values(n[e]);var l=d.a.map(o,"ts");var c=d.a.map(l,function(e){return Object(_["getMessageByTimestamp"])(t,r,e)});return d.a.some(c,function(e){return Object(C["isMessageUnread"])(e,i,s)})}return Object(C["isMessageUnread"])(a,i,s)})}var Fn=function e(t){var r=Object(w["getPrimaryView"])(t);var a=Object(g["getChannelById"])(t,r);var n=Object(k["isFeatureEnabled"])(t,"feature_react_messages");var i=Object(k["isFeatureEnabled"])(t,"feature_tinyspeck");var s=Object(k["isFeatureEnabled"])(t,"feature_jump_to_unread_shortcut");var o=Object(x["b"])(t);var l=Object(k["isFeatureEnabled"])(t,"feature_classic_nav");var c=Object(k["isFeatureEnabled"])(t,"feature_aria_application_mode");var u=Object(k["getCurrentUserId"])(t);var p=Object(T["getTeamId"])(t);var f=Object(E["getEnterpriseId"])(t);var v=Object(m["getChannelSessionId"])(t);var _=Object(O["getChannelTriggers"])(t);var C=Object(m["getHasMessagePaneUnmounted"])(t);var j=Object(N["getWindowLastBlurEvent"])(t);var I=Object(N["getWindowLastFocusEvent"])(t);if(!a)return{featureReactMessages:n,featureTinyspeck:i,featureClassicNav:l,currentUserId:u,teamId:p,enterpriseId:f,sessionId:v,msgTriggers:_,hasMessagePaneUnmounted:C,windowLastBlurEvent:j,windowLastFocusEvent:I};var R=Object(b["getLoading"])(t,r);var M=Object(b["getLoadingOlder"])(t,r);var P=Object(S["getLastReadTs"])(a);var D=false;var F=Object(m["getGhostLastRead"])(t);if(F&&F!==P){P=F;D=true}var L=Object(m["getMessagePaneStartTs"])(t);var B=Object(m["getMessagePaneStartTsOffset"])(t);var U=Object(m["getMessagePaneHighlightTs"])(t);var q=Object(m["getMessagePaneHighlightLazy"])(t);var G=Object(S["getUnreadCount"])(a);var H=Object(b["getTimestampsByChannelId"])(t,r,P);var W=H&&H.reachedEnd;var V=Object(m["getChannelSessionId"])(t);var z=Object(m["getPrevChannelSwitchTs"])(t);var Q=Object(y["getUserMessagesTheme"])(t);var K=xn(t,r,L),Y=K.timestamps,J=K.rollups,Z=K.reachedStart,X=K.reachedEnd,$=K.prevReachedEnd,ee=K.oldest,te=K.latest;(Object(S["isPublicChannel"])(a)&&!Object(S["isMemberOfChannel"])(a)||Object(S["isArchived"])(a))&&(P=d.a.last(Y));var re=Dn({state:t,channelId:r,timestamps:Y,rollups:J,lastReadTs:P});var ae=Object(A["isScreenReaderEnabled"])(t);return{channelId:r,type:Object(S["getChannelType"])(a),channelDisplayName:Object(S["getDisplayName"])(a),timestamps:Y,reachedStart:Z,reachedEnd:X,prevReachedEnd:$,oldest:ee,latest:te,lastReadTs:P,isGhostLastRead:D,unreadCount:G,unreadCountKnown:W,startTs:L,startTsOffset:B,highlightTs:U,highlightLazy:q,rollups:J,isAppSpaceOpen:Object(m["isAppSpaceOpen"])(t),isArchived:Object(S["isArchived"])(a),isLoading:R,isLoadingOlder:M,isLimited:Object(b["getIsLimited"])(t,r),isSlackbotIm:Object(S["isSlackbot"])(a),overlayVisible:Object(m["isOverlayVisible"])(t),channelSessionId:V,prevChannelSwitchTs:z,theme:Q,newxpOnboardingStep:Object(m["getNewxpOnboardingStep"])(t),firstUnreadTs:re,featureReactMessages:n,featureTinyspeck:i,featureJumpToUnreadShortcut:s,useGlobalNav:o,featureClassicNav:l,featureAriaApplicationMode:c,teamId:p,enterpriseId:f,sessionId:v,msgTriggers:_,hasMessagePaneUnmounted:C,windowLastBlurEvent:j,windowLastFocusEvent:I,currentUserId:u,badgeCount:Object(g["getBadgeCount"])(t,a),isShared:Object(S["isExternallySharedChannel"])(a),isOrgShared:Object(S["isOrgShared"])(a),isYou:Object(S["isYou"])(t,a),isMuted:Object(h["isChannelMutedById"])(t,r),hasUnreads:!!Object(S["getUnreadCount"])(a),hasDraft:Object(S["getHasDraft"])(t,r),isScreenReaderEnabled:ae}};function Ln(e){return function(t,r){var a=Object(m["isUnreadLineVisible"])(r());if(a!==e){Object(j["a"])({getState:r}).info("CHECK-UNREADS","unreadLineVisible updated: "+a+" -> "+e);t(Object(m["setUnreadLineVisibility"])(e))}}}function Bn(e){var t=e.channelId,r=e.ts,a=e.isFirstUnreadMsg,n=e.isFirstMsgForDay,i=e.isLastMsgForDay,s=e.previousMessageTs,o=e.day,l=e.rollup,u=e.hasFocus;return function(e,d){var p=d();var m=Object(A["isScreenReaderEnabled"])(p);var h=Object(P["getMessageEditData"])(p,{channelId:t,ts:r}),f=h.isEditing;if(f)return;if(!(m||u))return;var v=Object(M["a"])(p,{channelId:t,ts:r,previousMessageTs:s,rollup:l});return Object(R["a"])(c()({},v,{isFirstUnreadMsg:a,isFirstMsgForDay:n,isLastMsgForDay:i,day:o}))}}var Un={fetchHistory:m["fetchHistory"],fetchSliHighlights:v["fetchSliHighlights"],setUnreadPoint:g["setUnreadPoint"],markMostRecentMsgRead:g["markMostRecentMsgRead"],setUnreadLineVisibility:Ln,clearHighlightTs:m["clearHighlightTs"],jumpToTimestamp:m["jumpToTimestamp"],saveScrollmark:m["maybeSaveScrollmark"],onMount:f["ensureFresh"],setMessagePaneHasUnmounted:m["setMessagePaneHasUnmounted"],makeMessageSummary:Bn};var qn=Object(i["connect"])(Fn,Un)(An);var Gn=qn;var Hn=function e(t,r){if(!t)throw new Error("mountMessagePane must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement(Gn,null)),r)};var Wn=Hn;var Vn=r(51);Object(Vn["a"])("interop.mountMessagePane",Wn)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(33);var c=r(51);var u=r(3);var d=r.n(u);var p=r(5);var m=r.n(p);var h=r(6);var f=r.n(h);var v=r(7);var b=r.n(v);var g=r(8);var _=r.n(g);var y=r(129);var k=r(15);var O=r.n(k);var E=r(10);var w=r(701);var C=r(2);var S=r(159);var j=r(18);var I={action:y["b"].node.isRequired};var T=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(a["PureComponent"]);T.displayName="AppProfileHeaderActionItem";var N=T;var A=r(2115);var R={appName:y["b"].string.isRequired,appImageSrc:y["b"].string.isRequired,appByline:y["b"].string,headerActions:y["b"].array,actions:y["b"].object.isRequired,dispatch:y["b"].func.isRequired};var M={appByline:"",headerActions:[]};var P=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onBackClick=r.onBackClick.bind(r);return r}f()(t,[{key:"onBackClick",value:function e(){var t=this.props,r=t.actions,a=t.dispatch;a(r.router.navigateTo("/organization/apps"));a(r.apps.setAppDetailViewOpen(false))}},{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var r=Object(C["map"])(t,function(e,t){return n.a.createElement(N,{key:t,action:e})});return r}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.appName,i=r.appImageSrc,s=r.appByline;return n.a.createElement("div",{className:"p-app_profile_header margin_bottom_150 display_flex align_items_center justify_content_between"},n.a.createElement("div",{className:"display_flex justify_content_start align_items_center"},n.a.createElement(j["a"],{onClick:function e(){return t.onBackClick()},type:"chevron_medium_left",className:"p-app_profile_header__back_arrow position_absolute"}),n.a.createElement("img",{className:"p-app_profile_header__app_image margin_right_100 margin_left_100",src:i,alt:a}),n.a.createElement("div",{className:"display_flex flex_direction_column"},n.a.createElement("h3",{className:"black"},a),n.a.createElement("span",{className:"p-app_profile_header__app_byline sk_dark_grey"},s))),n.a.createElement("div",{className:"display_flex"},this.renderActionItems()))}}]);return t}(a["PureComponent"]);P.displayName="AppProfileHeader";P.defaultProps=M;var x=P;var D=x;var F=r(67);var L=r.n(F);var B=r(77);var U=r(20);var q=r(54);var G=r(872);var H=r(325);var W=r(88);var V=r(338);var z=new E["b"]("enterprise_dashboard");var Q={appIcon:y["b"].string.isRequired,appName:y["b"].string.isRequired,channelScopeInfo:y["b"].arrayOf(H["a"]),featureWtaOrgLevelApps:y["b"].bool,installOnAllWorkspaces:y["b"].bool,onCancel:y["b"].func,onGo:y["b"].func.isRequired,workspaceName:y["b"].string,workspaceScopeInfo:y["b"].arrayOf(H["a"]).isRequired,workspacesToInstallOnCount:y["b"].number};var K={channelScopeInfo:[],featureWtaOrgLevelApps:false,installOnAllWorkspaces:false,onCancel:C["noop"],workspaceName:void 0,workspacesToInstallOnCount:1};var Y=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={step:0,wildcardEnabled:true};Object(C["bindAll"])(r,["handleGoClick","handleRadioButtonChange"]);return r}f()(t,[{key:"handleGoClick",value:function e(){var t=this.state.wildcardEnabled;if(this.shouldGoToNextStep()){this.setState(function(){return{step:1}});return}this.props.onGo({wildcardEnabled:t})}},{key:"handleRadioButtonChange",value:function e(){this.setState(function(e){var t=e.wildcardEnabled;return{wildcardEnabled:!t}})}},{key:"shouldGoToNextStep",value:function e(){return 0===this.state.step&&this.props.channelScopeInfo.length>0}},{key:"renderScopeInfo",value:function e(){var t=this.props,r=t.channelScopeInfo,a=t.workspaceScopeInfo;if(1===this.state.step)return r;return a}},{key:"renderTitle",value:function e(){var t=this.props,r=t.appName,a=t.featureWtaOrgLevelApps,n=t.installOnAllWorkspaces,i=t.workspaceName,s=t.workspacesToInstallOnCount;if(!a)return"";if(1===this.state.step)return z.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:r});if(n)return z.t("On all workspaces, {appName} would like to:",{appName:Object(E["n"])(r)});if(s>1)return z.t("On {workspacesToInstallOnCount} workspaces, {appName} would like to:",{appName:Object(E["n"])(r),workspacesToInstallOnCount:s});return z.t("On {workspaceName}, {appName} would like to:",{appName:Object(E["n"])(r),workspaceName:Object(E["n"])(i)})}},{key:"renderGoButtonText",value:function e(){if(!this.props.featureWtaOrgLevelApps)return"";return this.shouldGoToNextStep()?"Continue":"Install"}},{key:"renderRadioButtons",value:function e(){var t=this.props,r=t.featureWtaOrgLevelApps,a=t.appName,i=t.installOnAllWorkspaces,s=t.workspaceName,o=t.workspacesToInstallOnCount;var l=this.state,c=l.step,u=l.wildcardEnabled;if(!r||0===c)return null;var d=void 0;d=i?z.t("Any channel accessible to full members on all workspaces."):o>1?z.t("Any channel accessible to full members on {workspacesToInstallOnCount} workspaces.",{workspacesToInstallOnCount:o}):z.t("Any channel accessible to full members on {workspaceName}.",{workspaceName:Object(E["n"])(s)});return n.a.createElement("div",{className:"large_top_margin"},n.a.createElement("p",{className:"bold"},z.t("Select channels")),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(W["a"],{text:z.t("All Public Channels"),htmlFor:"all-channels",type:"inline",subtext:d,cursor:"pointer"},n.a.createElement(V["a"],{name:"channels",id:"all-channels",checked:u,onChange:this.handleRadioButtonChange}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(W["a"],{text:z.t("No channels"),htmlFor:"no-channels",type:"inline",subtext:z.t("{app_name} will still be able to access a private conversation with you.",{app_name:Object(E["n"])(a)}),cursor:"pointer"},n.a.createElement(V["a"],{name:"channels",id:"no-channels",checked:!u,onChange:this.handleRadioButtonChange}))))}},{key:"render",value:function e(){var t=this.props,r=t.appIcon,a=t.onCancel;return n.a.createElement(G["b"],{appIcon:r,goButtonText:this.renderGoButtonText(),onDismiss:a,onAuthorize:this.handleGoClick,scopeInfo:this.renderScopeInfo(),shouldCloseOnGo:!this.shouldGoToNextStep(),title:this.renderTitle()},this.renderRadioButtons())}}]);return t}(a["PureComponent"]);Y.displayName="OrgAppInstallDialog";Y.defaultProps=K;var J=Y;var Z=Object(S["a"])("feature_wta_org_level_apps")(Y);var X=Z;var $=r(1152);var ee=new E["b"]("enterprise_dashboard");var te={appName:y["b"].string.isRequired,appIcon:y["b"].string.isRequired,featureWtaOrgLevelApps:y["b"].bool,onCancel:y["b"].func,onGo:y["b"].func.isRequired,uninstallFromAllWorkspaces:y["b"].bool,workspaceName:y["b"].string,workspacesToUninstallFromCount:y["b"].number};var re={featureWtaOrgLevelApps:false,onCancel:C["noop"],uninstallFromAllWorkspaces:false,workspaceName:void 0,workspacesToUninstallFromCount:1};var ae=function e(t){var r=t.appName,a=t.appIcon,i=t.featureWtaOrgLevelApps,s=t.onCancel,o=t.onGo,l=t.uninstallFromAllWorkspaces,c=t.workspaceName,u=t.workspacesToUninstallFromCount;var d=void 0;var p=void 0;var m=void 0;if(i)if(l){d=ee.t("Uninstall {appName} from all workspaces?",{appName:Object(E["n"])(r)});p=ee.rt("I understand that members of <strong>all workspaces</strong> will no longer be able to use {appName}.",{appName:r});m=ee.rt("I understand that {appName} will lose <strong>all access</strong> to all workspaces, including access to channels.",{appName:r})}else if(u>1){d=ee.t("Uninstall {appName} from {workspacesToUninstallFromCount} workspaces?",{appName:Object(E["n"])(r),workspacesToUninstallFromCount:u});p=ee.rt("I understand that members of <strong>{workspacesToUninstallFromCount} workspaces</strong> will no longer be able to use {appName}.",{appName:r,workspacesToUninstallFromCount:u});m=ee.rt("I understand that {appName} will lose <strong>all access</strong> to {workspacesToUninstallFromCount} workspaces, including access to channels.",{appName:r,workspacesToUninstallFromCount:u})}else m=ee.rt("I understand that {appName} will lose <strong>all access</strong> to {workspaceName}, including access to channels.",{appName:r,workspaceName:c});var h={appName:r,appIcon:a,workspaceName:c,title:d,workspaceAccessCheckboxText:p,channelAccessCheckboxText:m,onGo:o,onCancel:s};return n.a.createElement($["a"],h)};ae.displayName="OrgAppUninstallDialog";ae.defaultProps=re;var ne=ae;var ie=Object(S["a"])("feature_wta_org_level_apps")(ae);var se=ie;var oe=new E["b"]("enterprise_dashboard");var le={appIcon:y["b"].string.isRequired,appName:y["b"].string.isRequired,featureWtaOrgLevelApps:y["b"].bool,isInstalledEverywhere:y["b"].bool,openModal:y["b"].func,scopes:y["b"].arrayOf(y["b"].object)};var ce={featureWtaOrgLevelApps:false,isInstalledEverywhere:false,openModal:C["noop"],scopes:[]};var ue=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["bindAll"])(r,["showInstallDialog","showUninstallDialog","renderMenu"]);return r}f()(t,[{key:"showInstallDialog",value:function e(){var t=this.props,r=t.appIcon,a=t.appName,i=t.scopes;var s=Object(C["partition"])(i.map(function(e){return d()({},e,{scopes:[e.scope]})}),["is_channel_scope",true]),o=L()(s,2),l=o[0],c=o[1];var u={appIcon:r,appName:a,channelScopeInfo:l,installOnAllWorkspaces:true,onGo:C["noop"],workspaceScopeInfo:c};this.props.openModal({element:n.a.createElement(X,u)})}},{key:"showUninstallDialog",value:function e(){var t=this.props,r=t.appIcon,a=t.appName;var i={appIcon:r,appName:a,onGo:C["noop"],uninstallFromAllWorkspaces:true};this.props.openModal({element:n.a.createElement(se,i)})}},{key:"renderMenu",value:function e(t){var r=this.props,a=r.isInstalledEverywhere,i=r.featureWtaOrgLevelApps;if(!i)return null;return n.a.createElement(q["f"],t,!a&&n.a.createElement(q["b"],{"data-qa":"ent_app_profile_install_everywhere",onSelected:this.showInstallDialog,label:oe.t("Install on all workspaces")}),n.a.createElement(q["b"],{"data-qa":"ent_app_profile_uninstall_everywhere",onSelected:this.showUninstallDialog,danger:true,label:oe.t("Uninstall on all workspaces")}))}},{key:"render",value:function e(){var t=this.props,r=t.isInstalledEverywhere,a=t.featureWtaOrgLevelApps;if(!a)return null;return n.a.createElement("div",{className:"p-app_profile_header__install_menu"},!r&&n.a.createElement(U["d"],{"data-qa":"ent_app_profile_install",className:"margin_right_75",type:"outline",onClick:C["noop"]},oe.t("Install")),n.a.createElement(q["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(U["d"],{"data-qa":"ent_app_profile_install_menu",className:"p-app_profile_header__install_menu_trigger",type:"outline",icon:"ellipsis"})))}}]);return t}(a["PureComponent"]);ue.displayName="AppProfileHeaderInstallMenu";ue.defaultProps=ce;var de=ue;var pe={openModal:B["openModal"]};var me=Object(o["connect"])(null,pe)(ue);var he=r(32);var fe=r.n(he);var ve=r(1399);var be=r(714);var ge=r(2569);var _e=new E["b"]("enterprise_dashboard");var ye={appId:y["b"].string,workspacesByApp:y["b"].array,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,headerItemOnClick:y["b"].func,pageSize:y["b"].number,sortBy:y["b"].string,sortDir:y["b"].string,searchQuery:y["b"].string,rowHeaderItemClassName:y["b"].string,rowClassName:y["b"].string,columns:y["b"].array.isRequired,actions:y["b"].object.isRequired,isSelectionBarShowing:y["b"].bool};var ke={appId:null,workspacesByApp:[],workspacesByAppApiCursor:"",workspacesByAppApiTotal:null,workspacesByAppLoading:false,headerItemOnClick:C["noop"],pageSize:50,sortBy:"team_name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",isSelectionBarShowing:false};var Oe="asc";var Ee="desc";var we="caret_down";var Ce="caret_up";var Se={};Se[Oe]=we;Se[Ee]=Ce;var je=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,i=a.sortBy,s=a.sortDir;r.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,height:null,paddingBottom:null};r.tableViewControllerRef=null;r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.refreshTableHeight=r.refreshTableHeight.bind(r);r.refreshTableHeightPolitely=r.refreshTableHeightPolitely.bind(r);r.emptyRowTemplate={items:[{value:function e(t){var r=t.searchQuery;var a=_e.rt("No workspaces were found matching <b>{query}</b>",{query:r});return n.a.createElement("div",{className:"align_center"},a)}}]};return r}f()(t,[{key:"componentWillMount",value:function e(){var t=this.props,r=t.workspacesByApp,a=t.sortBy,n=t.actions;var i=this.state.offset;r.length?this.updateRowListItemsData(i):n.setWorkspacesByAppLoading(true);n.setWorkspacesByAppSortBy(a)}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t){t.isSelectionBarShowing!==this.props.isSelectionBarShowing&&this.refreshTableHeightPolitely();this.maybeUpdateListRowItems(t);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onRequestNextPage",value:function e(t){var r=this.props,a=r.workspacesByApp,n=r.workspacesByAppApiTotal;if(n&&a.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"maybeFetchNextPage",value:function e(t){var r=this.props,a=r.appId,n=r.workspacesByAppLoading;var i=n&&!t.workspacesByAppLoading;var s=a&&a!==t.appId;a&&(i||s)&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var r=this.props,a=r.searchQuery,n=r.actions;if(t.searchQuery!==a){this.resetWorkspacesByAppsState();n.setWorkspacesByAppLoading(true)}}},{key:"maybeUpdateListRowItems",value:function e(t){var r=this.state.offset;var a=this.props,n=a.searchQuery,i=a.workspacesByApp,s=a.workspacesByAppLoading,o=a.columns;t.workspacesByApp===i&&t.searchQuery===n&&t.workspacesByAppLoading===s&&t.columns===o||this.updateRowListItemsData(r)}},{key:"fetchNewPage",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir;var n=this.props,i=n.appId,s=n.pageSize,o=n.searchQuery,l=n.workspacesByAppApiCursor,c=n.actions;if(!i)return;var u={limit:s,app:i};r&&(u.sort=r);a&&(u.sort_dir=a);null!==o&&void 0!==o&&Object(C["trim"])(o).length&&(u.query=o);l&&(u.cursor=l);c.getWorkspacesByApp(u)}},{key:"headerItemOnClick",value:function e(t){var r=this;var a=this.state,n=a.sortBy,i=a.sortDir;var s=this.props,e=s.headerItemOnClick,o=s.actions;var l=n;var c=i;if(t.id===n){c=i&&i!==Oe?Oe:Ee;o.setWorkspacesByAppSortDir(c)}else{l=t.id;c=t.defaultSortType?t.defaultSortType===Oe?Ee:Oe:Ee;o.setWorkspacesByAppSortDir(c);o.setWorkspacesByAppSortBy(l)}var u={sortBy:l,sortDir:c};this.setState(function(){return u},function(){r.resetWorkspacesByAppsState();e&&e(t);o.setWorkspacesByAppLoading(true)})}},{key:"resetWorkspacesByAppsState",value:function e(){var t=this.props.actions;t.setWorkspacesByApp([]);t.setWorkspacesByAppApiCursor(null);t.setWorkspacesByAppLoading(false);t.setWorkspacesByAppApiTotal(null)}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var r=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var a=r.getBoundingClientRect();var n=this.props.isSelectionBarShowing?ge["a"]:1;var i=t-(a&&a.top);var s=64;var o=Math.max(s,i-n);var l={height:o+"px",paddingBottom:n};this.setState(l)}},{key:"makeHeader",value:function e(t){var r={id:t.id,value:t.header.value,className:t.header.className,"data-qa":t.header["data-qa"]};if(t.header.sortable){r.iconType=this.determineSortState(r.id,t.header);r.onClick=this.headerItemOnClick;t.header.defaultSortType&&(r.defaultSortType=t.header.defaultSortType)}return r}},{key:"makeHeaders",value:function e(t){var r=this;return t.map(function(e){return r.makeHeader(e)})}},{key:"determineSortState",value:function e(t,r){var a=this.state,n=a.sortBy,i=a.sortDir;var s=r.defaultSortType||Oe;var o=Se[s];if(!n||n!==t)return o;var l=void 0;l=i?i===Oe?we:Ce:Se[s];return l}},{key:"updateRowListItemsData",value:function e(){var t=this.props,r=t.workspacesByApp,a=t.workspacesByAppLoading,n=t.columns;var i=[];if(r&&r.length)i=r.map(function(e){var t=e.team_id;return{id:"row_"+t,items:n.map(function(r){return{id:"row_"+t+"_col_"+r.id,value:r.rowTemplate.value(e),className:r.rowTemplate.className}})}});else if(!a){var s=this.props.searchQuery;if(null===s||void 0===s||!s.length){this.setState(function(){return{rowListItems:i}});return}i=[{id:"row_search_query",items:[{id:"row_search_query_col",value:this.emptyRowTemplate.items[0].value({searchQuery:s})}]}]}this.setState(function(){return{rowListItems:i}})}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.sortBy,i=r.sortDir,s=r.height,o=r.rowListItems,l=r.offset,c=r.paddingBottom;var u=this.props,d=u.rowHeaderItemClassName,p=u.rowClassName,m=u.workspacesByAppLoading,h=u.columns;var f=this.makeHeaders(h);return n.a.createElement("div",{style:{paddingBottom:c}},n.a.createElement(be["a"],{rows:o,headers:f,rowHeaderItemClassName:d,rowClassName:p,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:a,sortDir:i,height:s,isLoading:m,newQuery:!l,ref:function e(r){t.tableViewControllerRef=r}}))}}]);return t}(a["PureComponent"]);je.displayName="WorkspacesByAppList";je.defaultProps=ke;var Ie=je;var Te=r(118);var Ne=r(1089);var Ae=r(1145);var Re=r(2723);var Me=r(2076);var Pe=new E["b"]("enterprise_dashboard");var xe={orgName:y["b"].string};var De={orgName:""};var Fe=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props.orgName;var r=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var a=Pe.t("This app hasn\u2019t been installed on {orgName}.",{orgName:t});return n.a.createElement("div",{className:"p-app_profile_empty_state_container"},n.a.createElement("img",{src:r,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},a))}}]);return t}(a["PureComponent"]);Fe.displayName="AppProfileInstallationsEmptyState";Fe.defaultProps=De;var Le=Fe;var Be=new E["b"]("enterprise_dashboard");var Ue={orgName:y["b"].string,appId:y["b"].string,workspacesByApp:y["b"].array,workspacesByAppFullCount:y["b"].number,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,workspacesByAppSortBy:y["b"].string,workspacesByAppSortDir:y["b"].string,searchQuery:y["b"].string,selectCount:y["b"].number,undoSearchSelectionState:y["b"].object,columns:y["b"].array.isRequired,actions:y["b"].object.isRequired,featureWtaOrgLevelApps:y["b"].bool,toggleAllWorkspacesByApp:y["b"].func};var qe={orgName:"",appId:null,workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:void 0,workspacesByAppApiTotal:void 0,workspacesByAppLoading:void 0,workspacesByAppSortBy:void 0,workspacesByAppSortDir:void 0,selectCount:0,undoSearchSelectionState:void 0,searchQuery:"",featureWtaOrgLevelApps:false,toggleAllWorkspacesByApp:void 0};var Ge=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.undoFilterAndSelection=r.undoFilterAndSelection.bind(r);return r}f()(t,[{key:"getWorkspacesByAppListProps",value:function e(){var t=this.props,r=t.columns,a=t.appId,n=t.workspacesByApp,i=t.workspacesByAppApiCursor,s=t.workspacesByAppApiTotal,o=t.workspacesByAppLoading,l=t.searchQuery,c=t.actions,u=t.selectCount;return{columns:r,appId:a,workspacesByApp:n,workspacesByAppApiCursor:i,workspacesByAppApiTotal:s,workspacesByAppLoading:o,searchQuery:l,actions:c,isSelectionBarShowing:u>0}}},{key:"undoFilterAndSelection",value:function e(){var t=this.props,r=t.actions,a=t.undoSearchSelectionState;a&&r.undoWorkspacesByAppSearchSelection(a)}},{key:"renderAppFilterInput",value:function e(){var t=this.props,r=t.searchQuery,a=t.workspacesByAppLoading,i=t.actions;var s=Be.t("Filter by name...");var o=!!(r&&a);return n.a.createElement(Ne["a"],{placeholder:s,icon:"search",autoFocus:false,isLoading:o,onChange:i.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery,"data-qa":"ent-app-profile-installations-filter"})}},{key:"renderUndoFilterAndSelectionAlert",value:function e(t,r){if(null===r)return null;var a=void 0;if(t){var i=r.workspaces_by_app_search_query;a=i?Be.t('Restore previous selection for filter "{filter}".',{filter:i}):Be.t("Restore previous selection and clear filter.")}return n.a.createElement(Te["d"],{className:"p-app_management_workspaces_by_app_alert",level:"warning"},n.a.createElement(Ae["a"],{onClick:this.undoFilterAndSelection},a))}},{key:"renderSelectionBar",value:function e(t){var r=t.featureWtaOrgLevelApps,a=t.workspacesByApp,i=t.workspacesByAppFullCount,s=t.selectCount,o=t.toggleAllWorkspacesByApp;if(!r)return null;var l=[{id:"uninstall",label:Be.t("Uninstall"),disabled:0===s,isDanger:true}];return n.a.createElement(Re["a"],{position:"absolute",availableCount:i,selectedCount:s,items:a,actions:l,onToggleSelect:o,onToggleShowingSelection:C["noop"],onAction:C["noop"]})}},{key:"render",value:function e(){var t=[this.renderAppFilterInput()];var r=this.props,a=r.orgName,i=r.searchQuery,s=r.workspacesByAppApiTotal,o=r.workspacesByAppLoading,l=r.workspacesByAppApiCursor,c=r.undoSearchSelectionState,u=r.featureWtaOrgLevelApps;var d=this.getWorkspacesByAppListProps();var p=null===s||isNaN(s)?null:parseInt(s,10);var m=Be.t("{total, plural, =0 {Workspace Installations} =1 {# Workspace Installation} other {# Workspace Installations}}",{total:p});if(0===s&&!i&&!o&&l)return n.a.createElement("div",null,n.a.createElement(ve["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:m,actions:t}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(Le,{orgName:a})));return n.a.createElement("div",{className:"c-selection_bar_container c-selection_bar_container--position_relative"},n.a.createElement(ve["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:m,actions:t}),this.renderUndoFilterAndSelectionAlert(u,c),n.a.createElement("div",{className:"c-app_management_indent_half p-app_management_workspaces_by_app_list"},n.a.createElement(Ie,d)),this.renderSelectionBar(this.props))}}]);return t}(a["PureComponent"]);Ge.displayName="AppManageWorkspaces";Ge.defaultProps=qe;var He=Ge;var We=r(324);var Ve=r(227);var ze=new E["b"]("enterprise_dashboard");function Qe(e){var t=e.toggleAllWorkspacesByApp,r=e.toggleWorkspacesByApp,a=e.onWorkspaceNameClick,n=e.workspacesByApp,i=e.selectionState,s=e.showOrgLevelAppsUI;var o=[Je({onWorkspaceNameClick:a}),Ze()];var l=s?[Ye({selectionState:i,workspacesByApp:n,toggleAllWorkspacesByApp:t,toggleWorkspacesByApp:r})].concat(o):o.concat(Xe());return{columns:l,toggleAllWorkspacesByApp:t}}function Ke(e,t){var r=t.actions,a=t.dispatch;var n=r.apps;var i=333;var s=Object(We["bindActionCreators"])(n[e],a);var o=Object(C["debounce"])(function(e){var t=null!==e&&void 0!==e&&e.length?e:"";s.setWorkspacesByAppSearchQuery(t);s.resetWorkspacesByAppApiCursor()},i,{trailing:true});function l(e){var t=e.target.value;o(t)}return d()({},s,{onSearchInputChange:l})}function Ye(e){var t=e.selectionState,r=e.workspacesByApp,a=void 0===r?[]:r,i=e.toggleAllWorkspacesByApp,s=e.toggleWorkspacesByApp;var o=function e(){return i("NONE"===t||"SOME"===t)};var l=function e(t){return s(!!t.target.checked,t.target.value)};var c=a.map(function(e){return e.team_id}).join(" ");return{id:"checkbox",header:{value:n.a.createElement(Ve["a"],{checked:"ALL"===t,indeterminate:"SOME"===t,"aria-controls":c,onChange:o,className:"p-app_management_workspaces_by_app_checkbox"}),sortable:false,"data-qa":"ent-app-profile-installations-header-name",className:"p-app_management_workspaces_by_app_checkbox_col"},rowTemplate:{value:function e(t){return n.a.createElement(Ve["a"],{id:t.team_id,checked:!!t.isSelected,value:t.team_id,onChange:l,className:"p-app_management_workspaces_by_app_checkbox"})},className:"p-app_management_workspaces_by_app_checkbox_col"}}}function Je(e){var t=e.onWorkspaceNameClick;return{id:"team_name",header:{value:ze.t("Workspace"),sortable:true,"data-qa":"ent-app-profile-installations-header-name"},rowTemplate:{value:function e(r){var a=r&&r.icons&&r.icons.image_68;return n.a.createElement("button",{className:"p-app_management_table_view_workspace_name","data-qa":"ent-app-profile-installations-row-name",onClick:function e(){return t(r.team_id)}},a&&n.a.createElement("img",{src:a,style:{width:"34px",height:"34px",verticalAlign:"middle",marginRight:"1rem"},alt:r.name}),n.a.createElement("span",{className:"bold"},r.team_name))}}}}function Ze(){return{id:"installed_on",header:{value:ze.t("Installed On"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_on"},rowTemplate:{value:function e(t){var r=t.installed_by&&t.installed_by&&t.installed_by.first_installation&&t.installed_by&&t.installed_by.first_installation.date;var a=new Date(1e3*r).toLocaleDateString();return n.a.createElement("div",null,a)}}}}function Xe(){return{id:"installed_by",header:{value:ze.t("Installed By"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_by"},rowTemplate:{value:function e(t){var r=t.installed_by&&t.installed_by.count||1;var a=ze.t("{userCount, plural, =1 {# user} other {# users}}",{userCount:r});return n.a.createElement("div",null,a)}}}}var $e={orgName:y["b"].string,appId:y["b"].string,workspacesByApp:y["b"].array,workspacesByAppFullCount:y["b"].number,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,workspacesByAppSortBy:y["b"].string,workspacesByAppSortDir:y["b"].string,searchQuery:y["b"].string,selectionState:y["b"].string,selectCount:y["b"].number,actions:y["b"].object.isRequired,dispatch:y["b"].func.isRequired,featureWtaOrgLevelApps:y["b"].bool,showOrgLevelAppsUI:y["b"].bool,undoSearchSelectionState:y["b"].object};var et={orgName:"",appId:null,workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",selectionState:"NONE",selectCount:0,featureWtaOrgLevelApps:false,showOrgLevelAppsUI:false,undoSearchSelectionState:null};var tt=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.actions,n=e.dispatch;r.actions=Ke("installations",{actions:a,dispatch:n});r.generateAppsCSV=r.generateAppsCSV.bind(r);r.onWorkspaceNameClick=r.onWorkspaceNameClick.bind(r);r.toggleAllWorkspacesByApp=r.toggleAllWorkspacesByApp.bind(r);r.toggleWorkspacesByApp=r.toggleWorkspacesByApp.bind(r);return r}f()(t,[{key:"onWorkspaceNameClick",value:function e(t){var r=this.props,a=r.actions,n=r.dispatch;return n(a.router.navigateTo("/organization/teams/"+t))}},{key:"toggleAllWorkspacesByApp",value:function e(t){var r=this.props,a=r.workspacesByAppApiTotal,n=r.searchQuery;this.actions.toggleAllWorkspacesByApp({select:t,searchQuery:n,count:a})}},{key:"toggleWorkspacesByApp",value:function e(t,r){this.actions.toggleWorkspacesByApp({select:t,workspaces:[r]})}},{key:"generateAppsCSV",value:function e(){var t=this.props,r=t.searchQuery,a=t.workspacesByAppSortBy,n=t.workspacesByAppSortDir,i=t.appId,s=t.actions,o=t.dispatch;var l={type:"teams_by_app",app_id:i};r&&(l.query=r);if(a){l.sort_prefix=a;n&&(l.sort_dir=n)}o(s.apps.generateAppsCSVForSlackbotDM(l))}},{key:"render",value:function e(){var t=this.props,r=t.actions,a=t.dispatch,i=t.showOrgLevelAppsUI,s=fe()(t,["actions","dispatch","showOrgLevelAppsUI"]);var o=Qe({selectionState:s.selectionState,workspacesByApp:s.workspacesByApp,toggleAllWorkspacesByApp:this.toggleAllWorkspacesByApp,toggleWorkspacesByApp:this.toggleWorkspacesByApp,onWorkspaceNameClick:this.onWorkspaceNameClick,showOrgLevelAppsUI:i});return n.a.createElement(He,d()({},o,s,{actions:this.actions}))}}]);return t}(a["PureComponent"]);tt.displayName="AppProfileInstallations";tt.defaultProps=et;var rt=tt;var at=r(500);var nt=new E["b"]("enterprise_dashboard");var it=function e(){var t=cdn_url+"/7bba7/img/enterprise/empty_apps_state_restricted.png";var r=nt.t("Permissions can\u2019t be shown for this app");var a=nt.rt("This app was not installed via the App Directory, which means Slack has not reviewed this app and can\u2019t confirm the permissions it requests.");var i=nt.rt("If you have questions about the type of data this app can access, reach out to the person who installed it.");return n.a.createElement("div",{className:"p-app_profile_empty_state_container p-app_profile_permissions_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100 margin_top_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r),n.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},a),n.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},i))};it.displayName="AppProfilePermissionsEmptyState";var st=it;var ot=new E["b"]("enterprise_dashboard");var lt={permissionsItems:y["b"].array,isDirectoryPublished:y["b"].bool,isXoxaApp:y["b"].bool,appId:y["b"].string};var ct={permissionsItems:[],isDirectoryPublished:false,isXoxaApp:false,appId:""};var ut=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={permissions:[],channelScopePermissions:[]};r.formatPermissions=r.formatPermissions.bind(r);return r}f()(t,[{key:"componentDidMount",value:function e(){this.formatPermissions(this.props.permissionsItems)}},{key:"componentWillReceiveProps",value:function e(t){this.props.permissionsItems!==t.permissionsItems&&this.formatPermissions(t.permissionsItems)}},{key:"formatPermissions",value:function e(t){var r=0;function a(){r+=1;return"scope_"+r+"_row"}var n=[];var i=[];t.forEach(function(e){if(!e.short_description&&!e.long_description)return;var t=a();e.is_channel_scope?i.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous}):n.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous})});var s={permissions:n,channelScopePermissions:i};this.setState(s)}},{key:"render",value:function e(){var t=this.props.isXoxaApp;var r=this.state,a=r.channelScopePermissions,i=r.permissions;if(!this.props.isDirectoryPublished&&"A02"!==this.props.appId)return n.a.createElement(st,null);var s=void 0;s=t?ot.t("On workspaces, this app will be able to:"):ot.t("This app will be able to:");var o=ot.t("When added to a channel, this app will also be able to:");if(a.length)return n.a.createElement("div",{className:"p-app_profile_permission"},n.a.createElement("h2",{className:"padding_top_250 padding_bottom_100 padding_left_100"},s),n.a.createElement(at["a"],{scopeInfo:i,key:"permissions"}),n.a.createElement("h2",{className:"padding_top_400 padding_bottom_100 padding_left_100"},o),n.a.createElement(at["a"],{scopeInfo:a,key:"channelScopePermissions"}));return n.a.createElement("div",{className:"p-app_profile_permission"},n.a.createElement("h2",{className:"padding_top_150 padding_bottom_100 padding_left_100"},s),n.a.createElement(at["a"],{scopeInfo:i}))}}]);return t}(a["PureComponent"]);ut.displayName="AppProfilePermissions";ut.defaultProps=ct;var dt=ut;var pt=r(1443);var mt=r(76);var ht=r(103);var ft=new E["b"]("enterprise_dashboard");var vt={appName:y["b"].string.isRequired,appIcon:y["b"].string.isRequired,featureWtaOrgLevelApps:y["b"].bool,onDisable:y["b"].func,onEnable:y["b"].func,orgName:y["b"].string.isRequired};var bt={onDisable:C["noop"],onEnable:C["noop"],featureWtaOrgLevelApps:false};var gt=function e(t){var r=t.appIcon,a=t.appName,i=t.featureWtaOrgLevelApps,s=t.onEnable,o=t.onDisable,l=t.orgName;if(!i)return null;var c=ft.t("Automatically install {appName} on new workspaces?",{appName:Object(E["n"])(a)});var u=ft.t("{appName} will be automatically installed on newly created workspaces and workspaces that are migrated into {orgName}. You can change this policy later",{appName:Object(E["n"])(a),orgName:Object(E["n"])(l)});return n.a.createElement(ht["a"],{cancelText:ft.t("No"),contentLabel:c,"data-qa":"app_automatic_install_dialog",goButtonText:ft.t("Yes"),onCancel:o,onGo:s,showCancelButton:true,title:c,titleImage:r,truncateTitle:false},u)};gt.displayName="AppAutomaticInstallDialog";gt.defaultProps=bt;var _t=Object(mt["pure"])(gt);var yt=new E["b"]("enterprise_dashboard");var kt={appIcon:y["b"].string.isRequired,appName:y["b"].string.isRequired,automaticInstallEnabled:y["b"].bool,featureWtaOrgLevelApps:y["b"].bool,orgName:y["b"].string.isRequired,openModal:y["b"].func};var Ot={automaticInstallEnabled:false,featureWtaOrgLevelApps:false,openModal:C["noop"]};var Et=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.showAutomaticInstallDialog=r.showAutomaticInstallDialog.bind(r);return r}f()(t,[{key:"showAutomaticInstallDialog",value:function e(){var t=this.props,r=t.appIcon,a=t.appName,i=t.featureWtaOrgLevelApps,s=t.orgName;var o={appIcon:r,appName:a,featureWtaOrgLevelApps:i,orgName:s};this.props.openModal({element:n.a.createElement(_t,o)})}},{key:"render",value:function e(){var t=this.props,r=t.appName,a=t.automaticInstallEnabled,i=t.featureWtaOrgLevelApps,s=t.orgName;if(!i)return null;var o={className:"no_border",control:{editOnly:true,onEdit:this.showAutomaticInstallDialog,type:"button"},description:yt.t("Set whether {appName} will be automatically installed on newly created workspaces and any workspaces migrated into {orgName}.",{appName:Object(E["n"])(r),orgName:Object(E["n"])(s)}),label:yt.t("Automatic Installation"),onClick:this.showAutomaticInstallDialog,state:a?yt.t("Enabled"):yt.t("Disabled")};return n.a.createElement("div",{className:"c-app_management_indent_half border_top"},n.a.createElement(pt["a"],o))}}]);return t}(a["PureComponent"]);Et.displayName="AppProfilePolicies";Et.defaultProps=Ot;var wt=Et;var Ct={openModal:B["openModal"]};var St=Object(o["connect"])(null,Ct)(Et);var jt=new E["b"]("enterprise_dashboard");var It=y["b"].shape({workspacesByApp:y["b"].array,workspacesByAppFullCount:y["b"].number,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,workspacesByAppSortBy:y["b"].string,workspacesByAppSortDir:y["b"].string,searchQuery:y["b"].string,selectionState:y["b"].string,selectCount:y["b"].number,undoSearchSelectionState:y["b"].object});var Tt={appName:y["b"].string.isRequired,appId:y["b"].string,appImageSrc:y["b"].string.isRequired,appImageSrcLarge:y["b"].string,appByline:y["b"].string,appScope:y["b"].oneOfType([y["b"].object,y["b"].string,y["b"].array]),automaticInstallEnabled:y["b"].bool,userIsCreationTeamMember:y["b"].bool,headerActions:y["b"].array,isOpen:y["b"].bool,isDirectoryPublished:y["b"].bool,isInstalledEverywhere:y["b"].bool,isSlackIntegration:y["b"].bool,orgName:y["b"].string,installations:It,appsDetailViewSelectedTab:y["b"].string,appsDetailViewWorkspaceContext:y["b"].string,appsDetailViewWorkspaceDomain:y["b"].string,currentUserTeams:y["b"].array,rootURL:y["b"].string.isRequired,isXoxaApp:y["b"].bool,isDistributedApp:y["b"].bool,orgTeams:y["b"].array,actions:y["b"].object.isRequired,dispatch:y["b"].func.isRequired,featureWtaOrgLevelApps:y["b"].bool};var Nt={appId:"",appByline:"",appImageSrcLarge:void 0,appScope:[],automaticInstallEnabled:false,userIsCreationTeamMember:false,headerActions:[],isOpen:true,isDirectoryPublished:false,isInstalledEverywhere:false,isSlackIntegration:false,orgName:"",installations:{workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",selectionState:"NONE",selectCount:0,undoSearchSelectionState:null},appsDetailViewSelectedTab:"installations",appsDetailViewWorkspaceDomain:null,appsDetailViewWorkspaceContext:null,currentUserTeams:[],isXoxaApp:false,isDistributedApp:true,orgTeams:null,featureWtaOrgLevelApps:false};var At=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.navigateToProfileTab=r.navigateToProfileTab.bind(r);r.navigateToAppDirectory=r.navigateToAppDirectory.bind(r);return r}f()(t,[{key:"navigateToProfileTab",value:function e(t){var r=this.props,a=r.actions,n=r.dispatch;return n(a.router.navigateTo("/organization/apps/profile/"+this.props.appId+"/"+t))}},{key:"navigateToAppDirectory",value:function e(){var t=this.props,r=t.appsDetailViewWorkspaceContext,a=t.appsDetailViewWorkspaceDomain,n=t.userIsCreationTeamMember,i=t.currentUserTeams,s=t.rootURL,o=t.orgTeams;var l=void 0;if(r&&i&&Object(C["includes"])(i,r)){var c="https://"+(a||"my")+"."+s.replace(/(http:\/\/|https:\/\/)/,"");l=c+"apps/"+this.props.appId+"?from_org_dashboard=1"}else if(n)l=s+"apps/"+this.props.appId+"?from_org_dashboard=1";else if(i&&i.length){var u=Object(C["find"])(o,function(e){return e.id===i[0]});l="https://"+u.domain+"."+s.replace(/(http:\/\/|https:\/\/)/,"")+"apps/"+this.props.appId+"?from_org_dashboard=1"}else l=s+"apps/"+this.props.appId+"?from_org_dashboard=1";window.open(l,"_blank")}},{key:"renderInstallationsContent",value:function e(){var t=this.props,r=t.installations,a=t.orgName,i=t.appId,s=t.isXoxaApp,o=t.actions,l=t.dispatch,c=t.featureWtaOrgLevelApps;return n.a.createElement(rt,d()({},r,{orgName:a,appId:i,actions:o,dispatch:l,featureWtaOrgLevelApps:c,showOrgLevelAppsUI:s&&c}))}},{key:"renderPermissionsContent",value:function e(){return n.a.createElement(dt,{permissionsItems:this.props.appScope,isDirectoryPublished:this.props.isDirectoryPublished,isXoxaApp:this.props.isXoxaApp,appId:this.props.appId})}},{key:"renderPoliciesContent",value:function e(){var t=this.props,r=t.appImageSrc,a=t.appName,i=t.automaticInstallEnabled,s=t.featureWtaOrgLevelApps,o=t.orgName;return n.a.createElement(St,{appIcon:r,appName:a,automaticInstallEnabled:i,featureWtaOrgLevelApps:s,orgName:o})}},{key:"renderHeaderActions",value:function e(){var t=this.props,r=t.appImageSrcLarge,a=t.appName,i=t.appScope,s=t.featureWtaOrgLevelApps,o=t.headerActions,l=t.isInstalledEverywhere,c=t.isXoxaApp;return s&&c?o.concat(n.a.createElement(me,{appName:a,appIcon:r,featureWtaOrgLevelApps:s,isInstalledEverywhere:l,scopes:i})):o}},{key:"render",value:function e(){var t=this.props,r=t.actions,a=t.appByline,i=t.appImageSrc,s=t.appName,o=t.currentUserTeams,l=t.dispatch,c=t.featureWtaOrgLevelApps,u=t.isDistributedApp,d=t.isOpen,p=t.isSlackIntegration,m=t.isXoxaApp,h=t.userIsCreationTeamMember;var f=u&&o&&o.length||h;var v=[{title:jt.t("Installations"),id:"installations",content:this.renderInstallationsContent(),onClick:this.navigateToProfileTab}];p||v.push({title:jt.t("Permissions"),id:"permissions",content:this.renderPermissionsContent(),onClick:this.navigateToProfileTab});c&&m&&v.push({title:jt.t("Policies"),id:"policies",content:this.renderPoliciesContent(),onClick:this.navigateToProfileTab});f&&v.push({title:jt.t("App Details"),icon:"external-link",id:"details",content:"",isExternalLink:true,onClick:this.navigateToAppDirectory});var b={actions:r,appByline:a,appImageSrc:i,appName:s,dispatch:l,headerActions:this.renderHeaderActions(),isOpen:d};return n.a.createElement("div",{className:"p-app_profile","data-qa":"ent-app-profile"},n.a.createElement(D,b),n.a.createElement(w["a"],{tabs:v,defaultTabId:this.props.appsDetailViewSelectedTab}))}}]);return t}(a["PureComponent"]);At.displayName="BaseAppProfile";At.defaultProps=Nt;var Rt=Object(S["a"])("feature_wta_org_level_apps")(At);var Mt=new E["b"]("enterprise_dashboard");var Pt=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=Mt.t("Apps");return n.a.createElement("div",{className:"c-app_management_indent"},n.a.createElement("h1",null,t))}}]);return t}(a["Component"]);Pt.displayName="AppManagementHeader";var xt=Pt;var Dt=r(140);var Ft=r(1155);var Lt=r(344);var Bt=r(2077);var Ut={isOpen:y["b"].bool.isRequired,title:y["b"].string.isRequired,subtext:y["b"].string.isRequired,contextButtonLabel:y["b"].string.isRequired,onDownloadClick:y["b"].func,contextCaption:y["b"].string,onContextBlur:y["b"].func};var qt={onDownloadClick:C["noop"],contextCaption:"",onContextBlur:C["noop"]};var Gt=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleOnContextUnfocus=r.handleOnContextUnfocus.bind(r);return r}f()(t,[{key:"componentWillReceiveProps",value:function e(t){t.isOpen?document.addEventListener("click",this.handleOnContextUnfocus,false):document.removeEventListener("click",this.handleOnContextUnfocus,false)}},{key:"handleOnContextUnfocus",value:function e(t){this.props.onContextBlur(t,this.node)}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.isOpen,i=r.title,s=r.subtext,o=r.contextButtonLabel,l=r.onDownloadClick,c=r.contextCaption;var u=O()("p-export_csv_context","menu",{"p-export_csv_context--hidden":!a});return n.a.createElement("div",{className:u,ref:function e(r){t.node=r}},n.a.createElement("div",{className:"p-export_csv_context_subtext"},n.a.createElement("h4",{className:"black"},i),n.a.createElement("p",{className:"break_word"},s),n.a.createElement(U["d"],{onClick:l,className:"p-export_csv_context_button"},o)),c&&n.a.createElement("div",{className:"p-export_csv_context_caption"},c))}}]);return t}(a["PureComponent"]);Gt.displayName="ExportContext";Gt.defaultProps=qt;var Ht=Gt;var Wt=new E["b"]("enterprise_dashboard");var Vt={title:y["b"].string.isRequired,subtext:y["b"].string.isRequired,contextButtonLabel:y["b"].string.isRequired,onDownloadClick:y["b"].func,contextCaption:y["b"].string,buttonSize:y["b"].string};var zt={onDownloadClick:C["noop"],contextCaption:"",buttonSize:"medium"};var Qt=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onButtonClick=r.onButtonClick.bind(r);r.onDownloadButtonClick=r.onDownloadButtonClick.bind(r);r.onContextBlur=r.onContextBlur.bind(r);r.state={contextIsOpen:false};return r}f()(t,[{key:"onButtonClick",value:function e(){var t=this;this.setState(function(){return{contextIsOpen:!t.state.contextIsOpen}})}},{key:"onContextBlur",value:function e(t,r){r.contains(t.target)||this.state.contextIsOpen&&this.setState(function(){return{contextIsOpen:false}})}},{key:"onDownloadButtonClick",value:function e(){this.props.onDownloadClick();this.onButtonClick()}},{key:"render",value:function e(){var t=this.props,r=t.title,a=t.subtext,i=t.contextButtonLabel,s=t.contextCaption,o=t.buttonSize;var l=Wt.t("Export CSV");return n.a.createElement("div",null,n.a.createElement(U["d"],{type:"outline",onClick:this.onButtonClick,size:o,className:"p-export_csv_button"},l,n.a.createElement(j["a"],{type:"caret_down",className:"p-export_csv_button_caret"})),n.a.createElement(Ht,{isOpen:this.state.contextIsOpen,title:r,subtext:a,contextButtonLabel:i,onDownloadClick:this.onDownloadButtonClick,contextCaption:s,onContextBlur:this.onContextBlur}))}}]);return t}(a["PureComponent"]);Qt.displayName="ExportCSVButton";Qt.defaultProps=zt;var Kt=Qt;var Yt=Kt;var Jt=new E["b"]("enterprise_dashboard");var Zt={title:y["b"].string.isRequired,onDownloadClick:y["b"].func,buttonSize:y["b"].string};var Xt={onDownloadClick:C["noop"],buttonSize:"small"};var $t=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props.buttonSize;var r=Jt.t("Your CSV may take a bit of time to generate. It\u2019ll be sent to you in Slack as soon as it\u2019s ready.");var a=Jt.t("Includes everything");var i=Jt.t("Generate CSV");return n.a.createElement(Yt,{onDownloadClick:this.props.onDownloadClick,title:this.props.title,subtext:a,contextButtonLabel:i,contextCaption:r,buttonSize:t})}}]);return t}(a["PureComponent"]);$t.displayName="AppManagementCSVPopup";$t.defaultProps=Xt;var er=$t;var tr=er;var rr=new E["b"]("enterprise_dashboard");var ar={orgName:y["b"].string};var nr={orgName:""};var ir=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var r=Object(E["n"])(this.props.orgName);var a=rr.t("{orgName} has no apps installed.",{orgName:r});return n.a.createElement("div",{className:"p-app_management_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},a))}}]);return t}(a["PureComponent"]);ir.displayName="InstalledAppsEmptyState";ir.defaultProps=nr;var sr=ir;var or=r(41);var lr=r(17);var cr=new E["b"]("enterprise_dashboard");var ur={orgApps:y["b"].array,orgAppsApiCursor:y["b"].string,orgAppsLoading:y["b"].bool,orgAppsApiTotal:y["b"].number,headerItemOnClick:y["b"].func,pageSize:y["b"].number,sortBy:y["b"].string,sortDir:y["b"].string,searchQuery:y["b"].string,rowHeaderItemClassName:y["b"].string,rowClassName:y["b"].string,featureEntAppManagementRestriction:y["b"].bool,featureWtaOrgLevelApps:y["b"].bool};var dr={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,headerItemOnClick:C["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureEntAppManagementRestriction:false,featureWtaOrgLevelApps:false};var pr="asc";var mr="desc";var hr="caret_down";var fr="caret_up";var vr={};vr[pr]=hr;vr[mr]=fr;var br=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,i=a.sortBy,s=a.sortDir;r.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,height:null,activeMenuForAppId:null};r.tableViewControllerRef=null;r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onToggleMenuClick=r.onToggleMenuClick.bind(r);r.maybeHideMenu=r.maybeHideMenu.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.refreshTableHeight=r.refreshTableHeight.bind(r);r.refreshTableHeightPolitely=r.refreshTableHeightPolitely.bind(r);r.nodeHasClass=r.nodeHasClass.bind(r);r.nodeIsChildOfClassName=r.nodeIsChildOfClassName.bind(r);r.appSources={internal:cr.t("Internal"),"app directory":cr.t("App Directory"),unknown:cr.t("Unknown")};r.sourceTooltipStrings={"app directory":cr.t("This app has been installed from the Slack App Directory."),internal:cr.t("This app was created by someone within your organization."),unknown:cr.t("This app was installed from an unknown external source.")};r.rowTemplate={items:[{value:function e(t){var a=t&&t.icons&&t.icons.image_72;return n.a.createElement("button",{className:"p-app_management_table_view_app_name","data-qa":"ent-apps-installed-row-name",onClick:function e(){return r.onAppNameClick(t.id)}},a&&n.a.createElement("img",{src:a,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var r=t.teams_installed_on&&t.teams_installed_on.count||0;return cr.t("{count, plural, =1 {# workspace} other {# workspaces}}",{count:r})}},{value:function e(t){var a=r.sourceTooltipStrings[t.source];var i=r.appSources[t.source]||r.appSources.unknown;return n.a.createElement("div",null,n.a.createElement(or["d"],{tip:a,position:"top"},n.a.createElement("span",null,i)))},className:"c-table_view_row_item_source"}]};r.props.featureWtaOrgLevelApps&&r.rowTemplate.items.push({value:function e(t){return t.automatic_install_enabled?cr.t("Yes"):cr.t("No")}});r.props.featureEntAppManagementRestriction&&r.rowTemplate.items.push({value:function e(t){var a=r.state.activeMenuForAppId;var i={width:"15rem",kbNavActive:true,stripTerminalSeparators:true};var s=void 0;if(a&&a===t.id){var o=n.a.createElement("span",null,"Restrict this app...");var l=n.a.createElement("span",null,"View in App Directory ",n.a.createElement(j["b"],{type:"external-link",size:"inherit"}));s=n.a.createElement("div",{className:"c-app_management_menu_container"},n.a.createElement(q["f"],i,n.a.createElement(q["b"],{key:"org_app_menu_1",label:o,onSelected:function e(){r.onRestrictAppClick(t.id)}}),n.a.createElement(q["d"],{key:"org_app_menu_separator"}),n.a.createElement(q["b"],{key:"org_app_menu_2",label:l,href:"https://example.com",target:"_blank"})))}return n.a.createElement("div",null,n.a.createElement("button",{className:"c-app_management_menu_trigger",onClick:r.onToggleMenuClick,"data-app-id":t.id},"..."),s)},className:"p-app_management_table_menu"});r.emptyRowTemplate={items:[{value:function e(t){var r=t.searchQuery;var a=cr.rt("No apps were found matching <b>{query}</b>",{query:r});return n.a.createElement("div",{className:"align_center"},a)}}]};r.headerData=[{id:"name",value:cr.t("Name"),sortable:true,className:"p-app_management_table_header_name"},{id:"num_installed",value:cr.t("Installed On"),sortable:true,className:"p-app_management_table_header_installed_on"},{id:"source",value:cr.t("Source"),sortable:true,className:"p-app_management_table_header_source"}];r.props.featureWtaOrgLevelApps&&r.headerData.push({id:"automatic_install_enabled",value:cr.t("Automatic Install"),sortable:true});r.props.featureEntAppManagementRestriction&&r.headerData.push({id:"menu",value:"",noHover:true,className:"p-app_management_table_header_menu"});return r}f()(t,[{key:"componentWillMount",value:function e(){var t=this.props,r=t.orgApps,a=t.sortBy;var n=this.state.offset;if(r.length){this.updateRowListItemsData(n);Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsLoading(false))}else Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsLoading(true));Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsSortBy(a))}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely);this.props.featureEntAppManagementRestriction&&window.addEventListener("click",this.maybeHideMenu)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t,r){this.maybeUpdateListRowItems(t,r);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely);window.removeEventListener("click",this.maybeHideMenu)}},{key:"onRequestNextPage",value:function e(t){var r=this.props,a=r.orgApps,n=r.orgAppsApiTotal;if(n&&a.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"onRestrictAppClick",value:function e(t){Object(lr["b"])().warn("onRestrictAppClick",t);this.hideMenu()}},{key:"onAppNameClick",value:function e(t){return Object(Dt["b"])(Object(Dt["a"])().router.navigateTo("/organization/apps/profile/"+t))}},{key:"onToggleMenuClick",value:function e(t){var r=t.target.getAttribute("data-app-id");var a=this.state.activeMenuForAppId;var n=r===a?null:r;var i={activeMenuForAppId:n};this.setState(i)}},{key:"maybeHideMenu",value:function e(t){if(!t)return false;var r=this.state.activeMenuForAppId;if(!r)return false;var a=t&&t.target;if(!a)return false;var n=this.nodeIsChildOfClassName(a,"c-app_management_menu_trigger")||this.nodeIsChildOfClassName(a,"c-menu");if(n)return false;this.hideMenu();return true}},{key:"hideMenu",value:function e(){var t={activeMenuForAppId:null};this.setState(t)}},{key:"nodeHasClass",value:function e(t,r){if(!t||void 0===r||!r.length)return false;if(t&&t.classList&&t.classList.contains)return t.classList.contains(r);return!!(t.className&&t.className.length&&t.className.split(" ").includes(r))}},{key:"nodeIsChildOfClassName",value:function e(t,r){var a=t;if(!a||!r)return false;if(this.nodeHasClass(a,r))return true;if(!a.parentNode)return false;while(!this.nodeHasClass(a,r)&&a.parentNode)a=a.parentNode;return this.nodeHasClass(a,r)}},{key:"maybeFetchNextPage",value:function e(t){var r=this.props.orgAppsLoading;r&&!t.orgAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var r=this.props.searchQuery;if(t.searchQuery!==r){Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsSearchQuery(t.searchQuery));this.resetOrgAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t,r){var a=this.state,n=a.offset,i=a.activeMenuForAppId;var s=this.props,o=s.searchQuery,l=s.orgApps,c=s.orgAppsLoading;t.orgApps===l&&t.searchQuery===o&&t.orgAppsLoading===c&&r.activeMenuForAppId===i||this.updateRowListItemsData(n)}},{key:"headerItemOnClick",value:function e(t){var r=this;var a=this.state,n=a.sortBy,i=a.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==pr?pr:mr;Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===pr?mr:pr:mr;Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsSortDir(o));Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsSortBy(s))}var l={sortBy:s,sortDir:o};this.setState(function(){return l},function(){r.resetOrgAppsState();e&&e(t)})}},{key:"resetOrgAppsState",value:function e(){Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsApiTotal(null));Object(Dt["b"])(Object(Dt["a"])().apps.resetOrgAppsApiCursor());Object(Dt["b"])(Object(Dt["a"])().apps.resetOrgApps());Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsLoading(true))}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var r=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var a=r.getBoundingClientRect();var n=0;var i=t-(a&&a.top);var s=64;var o=Math.max(s,i-n);var l={height:o+"px"};this.setState(l)}},{key:"makeHeader",value:function e(t){var r={id:t.id,value:t.value,noHover:t.noHover,className:t.className};if(t.sortable){r.iconType=this.determineSortState(t.id,t);r.onClick=this.headerItemOnClick;t.defaultSortType&&(r.defaultSortType=t.defaultSortType)}return r}},{key:"makeHeaders",value:function e(t){var r=this;var a=[];t.forEach(function(e){a.push(r.makeHeader(e))});return a}},{key:"determineSortState",value:function e(t,r){var a=this.state,n=a.sortBy,i=a.sortDir;var s=r.defaultSortType||pr;var o=vr[s];if(!n||n!==t)return o;var l=void 0;l=i?i===pr?hr:fr:vr[s];return l}},{key:"resetAPICursorMark",value:function e(){Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.orgAppsApiCursor;var l={limit:i};r&&(l.sort=r);a&&(l.sort_dir=a);null!==s&&void 0!==s&&Object(C["trim"])(s).length&&(l.query=s);o&&(l.cursor=o);Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsLoading(true));Object(Dt["b"])(Object(Dt["a"])().apps.getOrgApps(l))}},{key:"updateRowListItemsData",value:function e(t){var r=this;var a=[];var n=t||0;var i=0;var s=this.props,o=s.orgApps,l=s.orgAppsLoading;var c={rowListItems:a};function u(){i+=1;return"row_"+n+"_item"+i}function d(e,t){var r={id:"row_"+n,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var a={value:t.value(e),id:u()};t.className&&(a.className=t.className);r.items.push(a)});n+=1;return r}if(o&&o.length)o.forEach(function(e){a.push(d(e,r.rowTemplate))});else if(!l){var p=this.props.searchQuery;if(null===p||void 0===p||!p.length){this.setState(c);return}var m=[{searchQuery:p}];m.forEach(function(e){a.push(d(e,r.emptyRowTemplate))})}this.setState(c)}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.sortBy,i=r.sortDir,s=r.height,o=r.rowListItems,l=r.offset;var c=this.props,u=c.orgAppsLoading,d=c.searchQuery,p=c.rowHeaderItemClassName,m=c.rowClassName;var h=this.makeHeaders(this.headerData);return n.a.createElement("div",null,n.a.createElement(be["a"],{rows:o,headers:h,rowHeaderItemClassName:p,rowClassName:m,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:a,sortDir:i,searchQuery:d,height:s,isLoading:u,newQuery:!l,ref:function e(r){t.tableViewControllerRef=r}}))}}]);return t}(a["PureComponent"]);br.displayName="OrgAppsList";br.defaultProps=dr;var gr=Object(S["a"])("feature_wta_org_level_apps")(br);var _r=r(1759);var yr=new E["b"]("enterprise_dashboard");var kr=333;var Or={orgName:y["b"].string.isRequired,orgApps:y["b"].array,orgAppsApiCursor:y["b"].string,orgAppsApiTotal:y["b"].number,orgAppsLoading:y["b"].bool,orgAppsSortDir:y["b"].string,orgAppsSortBy:y["b"].string,searchQuery:y["b"].string,featureEntAppManagementRestriction:y["b"].bool};var Er={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAppManagementRestriction:false};var wr=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSearchInputChange=r.onSearchInputChange.bind(r);r.onSearchInputChangeDelayed=Object(C["debounce"])(r.onSearchInputChangeDelayed,kr,{trailing:true}).bind(r);r.generateAppsCSV=r.generateAppsCSV.bind(r);return r}f()(t,[{key:"onSearchInputChange",value:function e(t){var r=t.target.value;this.onSearchInputChangeDelayed(r)}},{key:"onSearchInputChangeDelayed",value:function e(t){var r=null!==t&&void 0!==t&&t.length?t:null;Object(Dt["b"])(Object(Dt["a"])().apps.setOrgAppsSearchQuery(r));Object(Dt["b"])(Object(Dt["a"])().apps.resetOrgAppsApiCursor())}},{key:"getOrgAppsListProps",value:function e(){var t={orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,searchQuery:this.props.searchQuery,featureEntAppManagementRestriction:this.props.featureEntAppManagementRestriction};return t}},{key:"formatTitleString",value:function e(t){if(null!==t&&!isNaN(t)&&t>0)return yr.t("{orgAppsApiTotal, plural, =1 {# Installed App} other {# Installed Apps}}",{orgAppsApiTotal:t});return yr.t("Installed Apps")}},{key:"generateAppsCSV",value:function e(){var t=this.props,r=t.orgAppsSortDir,a=t.orgAppsSortBy,n=t.searchQuery;var i={type:"apps"};n&&(i.query=n);if(a){i.sort_prefix=a;r&&(i.sort_dir=r)}Object(Dt["b"])(Object(Dt["a"])().apps.generateAppsCSVForSlackbotDM(i))}},{key:"renderExportButton",value:function e(){var t=this.props.orgAppsApiTotal;var r=yr.t("Installed Apps");if(!t)return null;return n.a.createElement(tr,{title:r,query:this.props.searchQuery,onDownloadClick:this.generateAppsCSV})}},{key:"renderAppFilterInput",value:function e(){var t=yr.t("Filter by name...");return n.a.createElement("div",null,n.a.createElement(Lt["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.orgAppsLoading,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery,size:"small"}))}},{key:"render",value:function e(){var t=this.props,r=t.orgAppsApiTotal,a=t.orgAppsLoading,i=t.searchQuery,s=t.orgAppsApiCursor;var o=[this.renderExportButton(),this.renderAppFilterInput()];var l=this.getOrgAppsListProps();if(0===r&&!i&&!a&&s)return n.a.createElement("div",{className:"p-app_management_installed_apps"},n.a.createElement(Ft["a"],{"data-qa":"ent-apps-installed-action-bar",title:this.formatTitleString(r),actions:o}),n.a.createElement(sr,{orgName:this.props.orgName}));return n.a.createElement("div",{className:"p-app_management_installed_apps"},n.a.createElement(Ft["a"],{"data-qa":"ent-apps-installed-action-bar",title:this.formatTitleString(r),actions:o}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(gr,l)))}}]);return t}(a["PureComponent"]);wr.displayName="AppManagementInstalledApps";wr.defaultProps=Er;var Cr=wr;var Sr=Cr;var jr=r(1158);var Ir={};var Tr=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={};return r}f()(t,[{key:"render",value:function e(){var t="This data set is large, so your CSV will take some time to generate. We'll send it to you in Slack as soon as it's ready.";return n.a.createElement(Yt,{title:"Restricted Apps",subtext:"Includes everything",contextButtonLabel:"Generate CSV",contextCaption:t,buttonSize:"small"})}}]);return t}(a["PureComponent"]);Tr.displayName="RestrictedAppsExportCSV";var Nr=Tr;var Ar="desc";var Rr=[{id:"name",value:"Name",sortable:true},{id:"restricted_on",value:"Restricted On",sortable:true,defaultSortType:Ar},{id:"restricted_by",value:"Restricted By"},{id:"exceptions",value:"Exceptions"},{id:"existing",value:"Existing Installations"}];function Mr(e){var t=new Date(e||parseInt(Math.random()*(new Date).getTime(),10));return t.toDateString()}var Pr={items:[{value:function e(t){var r=void 0;t.profile?r=t.profile.image_48:t.icon&&(r=t.icon.image_34);if(r)return n.a.createElement("span",null,n.a.createElement("img",{src:r,style:{width:"24px",height:"24px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),n.a.createElement("b",null,t.name));return n.a.createElement("b",null,t.name)}},{value:function e(t){return Mr(1e3*t.updated)}},{value:function e(t){return t.name}},{value:function e(){var t=parseInt(10*Math.random(),10);var r=void 0;r=0===t?"None":t+" "+(1===t?"exception":"exceptions");return r}},{value:function e(){var t=parseInt(1024*Math.random(),10);var r=1===t?"workspace":"workspaces";return t+" "+r}}]};var xr=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onIconClick=r.onIconClick.bind(r);r.onCoachmarkSkip=r.onCoachmarkSkip.bind(r);r.onCoachmarkContinue=r.onCoachmarkContinue.bind(r);r.onSearchInputChange=r.onSearchInputChange.bind(r);r.state={showCoachmark:true,isSearching:false};return r}f()(t,[{key:"onIconClick",value:function e(){this.setState(function(){return{showCoachmark:true}})}},{key:"onCoachmarkSkip",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"onCoachmarkContinue",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"onSearchInputChange",value:function e(t){var r={searchQuery:t.target.value};this.setState(function(){return r})}},{key:"getOrgAppsListProps",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir,n=t.searchQuery;var i={headerData:Rr,rowTemplate:Pr,sortBy:r,sortDir:a,searchQuery:n};return i}},{key:"renderExportButton",value:function e(){return n.a.createElement(Nr,null)}},{key:"renderRestrictionButton",value:function e(){return n.a.createElement(U["d"],{size:"small",type:"outline"},"Export")}},{key:"renderAppFilterInput",value:function e(){return n.a.createElement(Lt["a"],{placeholder:"Filter by name...",icon:"search",autoFocus:false,isLoading:this.state.isSearching,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",size:"small"})}},{key:"renderRestrictedTitle",value:function e(){var t=O()("p-app_management_restricted_apps__info_icon","margin_left_50",{"p-app_management_restricted_apps__info_icon--active":this.state.showCoachmark});return n.a.createElement("div",{className:"display_flex align_items_center"},n.a.createElement("span",null,"Restricted Apps"),n.a.createElement(jr["a"],{hasCloseButton:true,content:"By restricting an app for the organization, members will no longer be allowed to install them on any workspace. Existing installations will not be automatically removed. To learn more about restricted apps, visit out help center.",shouldShow:this.state.showCoachmark,position:"right",onSkip:this.onCoachmarkSkip,hasSkipLink:false,onContinue:this.onCoachmarkContinue},n.a.createElement(j["a"],{type:"question_circle",onClick:this.onIconClick,className:t})))}},{key:"render",value:function e(){var t=[this.renderExportButton(),this.renderRestrictionButton(),this.renderAppFilterInput()];var r=this.getOrgAppsListProps();return n.a.createElement("div",{className:"p-app_management_restricted_apps"},n.a.createElement(Ft["a"],{title:this.renderRestrictedTitle(),actions:t}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(gr,r)))}}]);return t}(a["PureComponent"]);xr.displayName="AppManagementRestrictedApps";var Dr=xr;var Fr=Dr;var Lr=new E["b"]("enterprise_dashboard");var Br={orgName:y["b"].string.isRequired,actions:y["b"].object.isRequired,defaultTabId:y["b"].string,profileIsOpen:y["b"].bool,orgApps:y["b"].array,orgAppsApiCursor:y["b"].string,orgAppsApiTotal:y["b"].number,orgAppsSortDir:y["b"].string,orgAppsSortBy:y["b"].string,orgAppsLoading:y["b"].bool,searchQuery:y["b"].string,featureEntAppManagementRestriction:y["b"].bool,appProfile:y["b"].object};var Ur={defaultTabId:"",profileIsOpen:false,orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAppManagementRestriction:false,appProfile:null};var qr=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.tabActionOnClick=function(t){return e.actions.router.navigateTo("/organization/apps/"+t)};return r}f()(t,[{key:"getAppProps",value:function e(){var t={orgName:this.props.orgName,orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,orgAppsSortDir:this.props.orgAppsSortDir,orgAppsSortBy:this.props.orgAppsSortBy,searchQuery:this.props.searchQuery,featureEntAppManagementRestriction:this.props.featureEntAppManagementRestriction};return t}},{key:"renderInstalledAppsContent",value:function e(){var t=this.getAppProps();return n.a.createElement("div",null,n.a.createElement(Sr,t))}},{key:"renderRestrictedAppsContent",value:function e(){return n.a.createElement(Fr,null)}},{key:"render",value:function e(){var t=this.tabActionOnClick;var r=this.props,a=r.defaultTabId,i=r.appProfile,s=r.actions;var o=[{title:Lr.t("Installed Apps"),id:"installed",content:this.renderInstalledAppsContent(),onClick:t}];this.props.featureEntAppManagementRestriction&&o.push({title:Lr.t("Restricted Apps"),id:"restricted",content:this.renderRestrictedAppsContent(),onClick:t});var l=O()("p-app-panel",{open:this.props.profileIsOpen});return n.a.createElement("div",{className:"p-app_management padding_top_200"},n.a.createElement(xt,null),n.a.createElement(w["a"],{tabs:o,defaultTabId:a}),n.a.createElement("div",{className:l},i?n.a.createElement(Rt,d()({},i,{actions:s})):null))}}]);return t}(a["PureComponent"]);qr.displayName="AppManagement";qr.defaultProps=Ur;var Gr=qr;var Hr=Gr;Object(c["a"])("interop.appManagement",{render:function e(t,r,a){if(!t)throw new Error("appManagement render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Hr,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(104);var s=r.n(i);var o=r(14);var l=r(33);var c=r(51);var u=r(3);var d=r.n(u);var p=r(5);var m=r.n(p);var h=r(6);var f=r.n(h);var v=r(7);var b=r.n(v);var g=r(8);var _=r.n(g);var y=r(129);var k=r(2);var O=r(10);var E=r(701);var w=r(24);var C=r.n(w);var S=r(9);var j=r.n(S);var I=r(1155);var T=r(1397);var N=r(18);var A=r(92);var R=r(283);var M=r(691);var P=r(178);var x=r(144);var D=r(270);var F=r(32);var L=r.n(F);var B=r(227);var U=r(2724);var q={id:y["b"].string.isRequired,headers:y["b"].array,rows:y["b"].arrayOf(y["b"].shape({id:y["b"].string.isRequired})),selectedRows:y["b"].array,onSelect:y["b"].func,getCheckboxId:y["b"].func};var G={headers:[],rows:[],selectedRows:[],onSelect:k["noop"],getCheckboxId:null};var H=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.getCheckboxId=r.getCheckboxId.bind(r);return r}f()(t,[{key:"getValidSelectedRows",value:function e(t){return Object(k["map"])(this.props.rows,"id").filter(function(e){return t.includes(e)})}},{key:"getCheckboxId",value:function e(t){var r=void 0;r=this.props.getCheckboxId?this.props.getCheckboxId(t.id):this.props.id+"-"+t.id+"-checkbox";return r}},{key:"getHeaders",value:function e(t){var r=this.props,a=r.id,i=r.headers,s=r.rows,o=r.onSelect;var l=t.length===s.length;return[{id:a+"-select-all-checkbox",value:n.a.createElement(B["a"],{checked:l,indeterminate:t.length>0&&t.length<s.length,onChange:function e(){return o(l?[]:Object(k["map"])(s,"id"))},"aria-controls":s.map(this.getCheckboxId).join(" "),className:"p-ent_multi_select_table__checkbox"}),noHover:true,className:"p-ent_multi_select_table__checkbox_item"}].concat(C()(i))}},{key:"getRows",value:function e(t){var r=this;var a=this.props,i=a.rows,s=a.onSelect;return i.map(function(e){var a=t.includes(e.id);var i=r.getCheckboxId(e);return d()({},e,{items:[{id:i+"-item",value:n.a.createElement(B["a"],{id:i,checked:a,value:e.id,onChange:function r(){return s(a?Object(k["without"])(t,e.id):[].concat(C()(t),[e.id]),e.id)},className:"p-ent_multi_select_table__checkbox"}),className:"p-ent_multi_select_table__checkbox_item"}].concat(C()(e.items))})})}},{key:"render",value:function e(){var t=this.props,r=t.selectedRows,a=t.onSelect,i=L()(t,["selectedRows","onSelect"]);var s=this.getValidSelectedRows(r);return n.a.createElement(T["b"],d()({},i,{headers:this.getHeaders(s),rows:this.getRows(s)}))}}]);return t}(a["PureComponent"]);H.displayName="MultiSelectTable";H.defaultProps=G;var W=H;var V=W;var z=r(2723);var Q=r(2569);var K=r(456);var Y=r(473);var J=r(11);var Z=r(212);var X=r(77);var $=r(65);var ee=r(20);var te=r(41);var re=new O["b"]("migration_table");var ae={statusPageURL:y["b"].string,migrationInfo:y["b"].object.isRequired,isOrgOwner:y["b"].bool,disableActions:y["b"].bool,onApprove:y["b"].func,onDecline:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var ne={statusPageURL:null,isOrgOwner:false,disableActions:false,onApprove:k["noop"],onDecline:k["noop"]};var ie=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"renderStatusLink",value:function e(){var t=this.props,r=t.statusPageURL,i=t.featureMigrationOrgApprovals;var s=void 0;s=i?n.a.createElement(a["Fragment"],null,re.t("Starting soon"),n.a.createElement("br",null),n.a.createElement($["a"],{href:r},re.t("View status"))):n.a.createElement("div",{className:"p-migration_table__link"},n.a.createElement($["a"],{href:r},n.a.createElement("span",null,re.t("View Migration Status"))),n.a.createElement(N["b"],{type:"chevron-right"}));return s}},{key:"renderPendingResponse",value:function e(){var t=this.props,r=t.isOrgOwner,i=t.disableActions,s=t.onApprove,o=t.onDecline,l=t.migrationInfo,c=t.featureMigrationOrgApprovals;if(!c)return null;var u=null;u=r?n.a.createElement("div",{className:"p-migration_table__buttons"},n.a.createElement(ee["d"],{type:"outline",size:"small",disabled:i,onClick:function e(){return o(l.id)}},re.t("Decline")),n.a.createElement(ee["d"],{type:"primary",size:"small",disabled:i,onClick:function e(){return s(l.id)},className:"margin_left_50"},re.t("Approve"))):n.a.createElement(a["Fragment"],null,re.t("Pending approval")," ",n.a.createElement(te["d"],{tip:re.t("Migrations can only be approved by an Organization Owner"),position:"top"},n.a.createElement(N["b"],{type:"question-circle",inline:true,className:"sk_light_gray"})));return u}},{key:"renderInviteResponse",value:function e(){var t=this.props,r=t.migrationInfo,a=t.featureMigrationOrgApprovals;var i=null;a&&(r.date_declined?i=re.t("Declined"):r.date_approved&&r.approver&&(i=re.rt("Approved <div>by {name}</div>",{name:r.approver.real_name},function(e){var t=e.key,r=e.text;return n.a.createElement("div",{key:t,className:"sk_dark_grey"},r)})));return i}},{key:"renderScheduled",value:function e(){var t=(new Date).getTime()/1e3;var r=t+28800;var a=this.props.migrationInfo;var n=null;n=a.date_approved||a.date_declined?a.date_scheduled>t&&a.date_scheduled<=r?this.renderStatusLink():this.renderInviteResponse():this.renderPendingResponse();return n}},{key:"renderInProgress",value:function e(){var t=void 0;t=this.props.featureMigrationOrgApprovals?n.a.createElement("div",{className:"p-migration_table__in_progress"},n.a.createElement(A["a"],{color:"blue",size:"large"}),n.a.createElement("div",null,re.rt("In progress"),n.a.createElement("br",null),this.renderStatusLink())):this.renderStatusLink();return t}},{key:"render",value:function e(){var t=this.props.migrationInfo;var r=null;switch(t.status){case"scheduled":r=this.renderScheduled();break;case"in_progress":r=this.renderInProgress();break;case"complete":case"invite_rejected":r=this.renderInviteResponse();break;default:break}return r}}]);return t}(a["PureComponent"]);ie.displayName="MigrationStatusRowItem";ie.defaultProps=ne;var se=ie;var oe=se;var le=r(54);var ce=new O["b"]("migration_table");var ue={statusPageURL:y["b"].string,migrationInfo:y["b"].object.isRequired,isOrgOwner:y["b"].bool,disableActions:y["b"].bool,onDecline:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var de={statusPageURL:null,isOrgOwner:false,disableActions:false,onDecline:k["noop"]};var pe=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}f()(t,[{key:"renderMenu",value:function e(t){var r=this;var a=this.props,i=a.migrationInfo,s=a.statusPageURL,o=a.isOrgOwner,l=a.onDecline,c=a.disableActions;return n.a.createElement(le["f"],d()({},t,{width:"auto",ref:function e(t){r.menuRef=t}}),n.a.createElement(le["b"],{label:ce.t("View status"),href:s,disabled:c}),o?n.a.createElement(le["b"],{danger:true,label:ce.t("Decline"),onSelected:function e(){return l(i.id)},disabled:c}):null)}},{key:"renderMenuTrigger",value:function e(){var t=this.props.disableActions;return n.a.createElement(le["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(ee["c"],{disabled:t},n.a.createElement(N["b"],{type:"ellipsis"})))}},{key:"render",value:function e(){var t=this.props,r=t.migrationInfo,a=t.featureMigrationOrgApprovals;if(!a)return null;var n=null;"scheduled"!==r.status||!r.date_approved||(n=this.renderMenuTrigger());return n}}]);return t}(a["PureComponent"]);pe.displayName="MigrationTableRowMenu";pe.defaultProps=de;var me=pe;var he=me;var fe=r(103);var ve=new O["b"]("migration_table");var be="approve";var ge="decline";var _e={action:y["b"].oneOf([be,ge]).isRequired,migrations:y["b"].array.isRequired,onSubmit:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var ye={onSubmit:k["noop"],featureMigrationOrgApprovals:false};var ke=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isPending:false};r.handleSubmit=r.handleSubmit.bind(r);return r}f()(t,[{key:"getTextTitle",value:function e(){var t=this.props,r=t.migrations,a=t.action,n=t.featureMigrationOrgApprovals;if(!n)return null;var i=null;i=a===be?ve.t("{count, plural, =1 {Approve migration?} other {Approve # migrations?}}",{count:r.length}):ve.t("{count, plural, =1 {Decline migration?} other {Decline # migrations?}}",{count:r.length});return i}},{key:"handleSubmit",value:function e(){var t=this;this.setState(function(){return{isPending:true}});return this.props.onSubmit().finally(function(){return t.setState(function(){return{isPending:false}})})}},{key:"renderTitle",value:function e(){var t=this.props,r=t.migrations,a=t.featureMigrationOrgApprovals;if(!a)return null;var i=this.getTextTitle();1===r.length&&(i=n.a.createElement("div",{className:"display_flex align_items_center"},n.a.createElement(K["a"],{entityType:"workspace",dimension:24,entityData:r[0].team,customClasses:"margin_right_75"}),i));return i}},{key:"renderContent",value:function e(){var t=this.props,r=t.migrations,a=t.action,n=t.featureMigrationOrgApprovals;if(!n)return null;var i=null;if(r.length>1)i=a===be?ve.t("Would you like to approve these migrations?"):ve.t("If you decline these migrations, you'll need to contact Slack to reschedule them.");else{var s=r[0];i=a===be?ve.rt("Approve the migration of the workspace <strong>{name}</strong> for <strong>{date} at {time}</strong>?",{name:s.team.name,date:Object(P["a"])(s.migration_info.date_scheduled),time:Object(x["a"])(s.migration_info.date_scheduled)}):ve.rt("If you decline this migration of <strong>{name}</strong>, you\u2019ll need to contact Slack to reschedule it.",{name:s.team.name})}return i}},{key:"render",value:function e(){var t=this.props,r=t.action,a=t.featureMigrationOrgApprovals;if(!a)return null;return n.a.createElement(fe["a"],{cancelText:ve.t("Cancel"),goButtonText:r===be?ve.t("Approve"):ve.t("Decline"),goButtonType:r===be?"primary":"danger",goButtonIsPending:this.state.isPending,goButtonIsDisabled:this.state.isPending,onGo:this.handleSubmit,title:this.renderTitle(),titleAria:this.getTextTitle()},this.renderContent())}}]);return t}(a["PureComponent"]);ke.displayName="MigrationResponseConfirmDialog";ke.defaultProps=ye;var Oe=ke;var Ee=Oe;var we=new O["b"]("migration_table");var Ce={enterpriseName:y["b"].string.isRequired,orgURL:y["b"].string,scheduled:y["b"].bool,isOrgOwner:y["b"].bool,fetchCompletedMigrations:y["b"].func.isRequired,fetchScheduledMigrations:y["b"].func.isRequired,approveMigrations:y["b"].func.isRequired,declineMigrations:y["b"].func.isRequired,enqueueToast:y["b"].func,openModal:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var Se={enqueueToast:k["noop"],openModal:k["noop"],scheduled:false,isOrgOwner:false,orgURL:null};var je="approve";var Ie="decline";function Te(e){return Object(P["a"])(e)+" - "+Object(x["a"])(e)}function Ne(e){return"mig-"+e}function Ae(e){return"migration-table-"+e+"-checkbox"}var Re=function(e){_()(t,e);function t(e){m()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={selectedRows:[],completedMigrations:[],scheduledMigrations:[],pendingUpdates:[],recentlyUpdated:[],isCompletedLoading:true,isScheduledLoading:true,errorAlert:false,tableHeight:null,tablePaddingBottom:0};r.refreshTableHeight=r.refreshTableHeight.bind(r);r.refreshTableHeightPolitely=r.refreshTableHeightPolitely.bind(r);return r}f()(t,[{key:"componentWillMount",value:function e(){var t=this.props.scheduled;if(t)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function e(t,r){var a=this.state.selectedRows;var n=this.props.scheduled;var i=a.length>0;var s=r&&r.selectedRows&&r.selectedRows.length>0;i!==s&&this.refreshTableHeightPolitely();if(n!==t.scheduled){if(n)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}return k["noop"]}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"getStatusPageURL",value:function e(t){return this.props.orgURL+"/migrations/"+t+"/status"}},{key:"fetchScheduledMigrations",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props.featureMigrationOrgApprovals;r||this.setState(function(){return{isScheduledLoading:true}});return this.props.fetchScheduledMigrations().then(function(e){var r=Object(k["sortBy"])(e,[function(e){var t=void 0;t=!a||e.migration_info.date_approved||e.migration_info.date_declined?["in_progress","scheduled","invite_rejected"].indexOf(e.migration_info.status):-Infinity;return t},function(e){return e.migration_info.date_scheduled}]);t.setState(function(){return{scheduledMigrations:r,isScheduledLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isScheduledLoading:false}})}).finally(this.refreshTableHeightPolitely)}},{key:"fetchCompletedMigrations",value:function e(){var t=this;this.setState(function(){return{isCompletedLoading:true}});return this.props.fetchCompletedMigrations().then(function(e){var r=Object(k["sortBy"])(e,[function(e){return-e.migration_info.date_finished}]);t.setState(function(){return{completedMigrations:r,isCompletedLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isCompletedLoading:false}})}).finally(this.refreshTableHeightPolitely)}},{key:"showResponseConfirmDialog",value:function e(t,r){var a=this;this.props.openModal({element:n.a.createElement(Ee,{migrations:t,action:r,onSubmit:function e(){return a.respondToInvite(t,r)},featureMigrationOrgApprovals:this.props.featureMigrationOrgApprovals})})}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=this.state.selectedRows;var r=window.innerHeight;if(!this.tableViewRef)return;var a=this.tableViewRef.querySelectorAll(".c-table_view_all_rows_container")[0];if(!a)return;var n=a.getBoundingClientRect();var i=t.length>0?Q["a"]:0;var s=r-(n&&n.top);var o=64;var l=Math.max(o,s-i);this.setState(function(){return{tableHeight:l,tablePaddingBottom:i}})}},{key:"respondToInvite",value:function e(t,r){var a,i=this;if(!this.props.featureMigrationOrgApprovals)return null;var s=(a={},j()(a,je,this.props.approveMigrations),j()(a,Ie,this.props.declineMigrations),a)[r];var o=t.map(function(e){return e.migration_info.id});this.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:Object(k["union"])(t,o)}});return s({migrationIds:o}).then(function(){return i.fetchScheduledMigrations(true)}).then(function(){var e=null;e=r===je?we.t("{count, plural, =1 {Migration approved} other {# migrations approved}}",{count:o.length}):we.t("{count, plural, =1 {Migration declined} other {# migrations declined}}",{count:o.length});i.props.enqueueToast({element:n.a.createElement(R["b"],null,e)});i.setState(function(e){var t=e.recentlyUpdated;return{recentlyUpdated:Object(k["union"])(t,o),selectedRows:[]}});setTimeout(function(){i.setState(function(e){var t=e.recentlyUpdated;return{recentlyUpdated:k["without"].apply(void 0,[t].concat(C()(o)))}})},T["b"].HIGHLIGHT_DURATION)}).catch(function(){i.props.enqueueToast({element:n.a.createElement(R["b"],null,we.t("Something\u2019s gone wrong. Mind trying again in a moment?"))})}).finally(function(){return i.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:k["without"].apply(void 0,[t].concat(C()(o)))}})})}},{key:"createHeaders",value:function e(){var t=this.props,r=t.featureMigrationOrgApprovals,a=t.scheduled;var n=a?we.t("Scheduled for"):we.t("Completed on");var i="";r&&(i=a?we.t("Status"):we.t("Approved by"));var s=[{id:"workspace",value:we.t("Workspace"),className:"p-migration_table__workspace",noHover:true},{id:"date",value:n,className:"p-migration_table__date",noHover:true},{id:"status",value:i,className:"p-migration_table__status",noHover:true}];r&&a&&s.push({id:"contextMenu",value:"",className:"p-migration_table__context_menu",noHover:true});return s}},{key:"makeTableRows",value:function e(t,r){var a=this;var i=this.props,s=i.isOrgOwner,o=i.featureMigrationOrgApprovals;var l=this.state,c=l.pendingUpdates,u=l.recentlyUpdated;var d={workspace:function e(t){return a.renderWorkspaceRow(t.team)},date:function e(t){return a.renderDateRow(t.migration_info)},status:function e(t){return a.renderStatusRow(t)},contextMenu:function e(t){return n.a.createElement(he,{statusPageURL:a.getStatusPageURL(t.migration_info.id),isOrgOwner:s,migrationInfo:t.migration_info,featureMigrationOrgApprovals:o,disableActions:c.includes(t.migration_info.id),onDecline:function e(){return a.showResponseConfirmDialog([t],Ie)}})}};return t.map(function(e){return{id:Ne(e.migration_info.id),highlight:u.includes(e.migration_info.id),items:r.map(function(t){var r=t.id,a=t.className;return{id:r,className:a,value:d[r]&&d[r](e)}})}})}},{key:"displayErrorAlert",value:function e(){return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-table-error-alert"},n.a.createElement("span",{className:"p-migration_table__empty_state_icon"},n.a.createElement(N["b"],{type:"warning-filled"})),n.a.createElement("div",{className:"p-migration_table__empty_state_title"},we.rt("Unable to load past migrations")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},we.rt("Something went wrong that prevented past migrations from loading. If you continue to have trouble loading this page, please <a>contact us</a>.",null,function(e){var t=e.key,r=e.text;return n.a.createElement("a",{key:t,href:"https://slack.com/help/contact"},r)})))}},{key:"renderMigrationCount",value:function e(t){var r=we.t("{count, plural, =1 {# scheduled migration} other {# scheduled migrations}}",{count:t});return r}},{key:"renderSelectionBar",value:function e(t,r){var a=this;var i=this.props.featureMigrationOrgApprovals;if(!i)return null;var s=this.state,o=s.selectedRows,l=s.pendingUpdates;return n.a.createElement(z["b"],{position:"absolute",items:t,itemMapper:function e(t){return{selectionElementId:Ae(Ne(t.migration_info.id)),previewText:t.team.name,isSelected:o.includes(Ne(t.migration_info.id))}},actions:[{id:Ie,label:we.t("Decline"),disabled:l.length>0},{id:je,label:we.t("Approve"),isPrimary:true,disabled:l.length>0}],titleFormatter:function e(t){return we.t("{count, plural, =1 {# migration selected} other {# migrations selected}}",{count:t})},onToggleSelect:function e(t){return a.setState(function(){return{selectedRows:t?Object(k["map"])(r,"id"):[]}})},onAction:function e(r){a.showResponseConfirmDialog(Object(k["filter"])(t,function(e){return o.includes(Ne(e.migration_info.id))}),r)},"data-qa":"migration-table-selection-bar"})}},{key:"renderTable",value:function e(t){var r=this;var a=this.props,i=a.scheduled,s=a.isOrgOwner,o=a.featureMigrationOrgApprovals;var l=this.state,c=l.tableHeight,u=l.selectedRows,p=l.tablePaddingBottom;var m=this.createHeaders();var h=this.makeTableRows(t,m);var f={headers:m,rows:h,height:c+"px","data-qa":"migration-table-rows"};return n.a.createElement("div",{className:"p-migration_table__table_view_container",ref:function e(t){r.tableViewRef=t}},i&&s&&o?n.a.createElement("div",{style:{paddingBottom:p}},n.a.createElement(V,d()({},f,{id:"migration-table",selectedRows:u,onSelect:function e(t){return r.setState(function(){return{selectedRows:t}})},getCheckboxId:Ae})),this.renderSelectionBar(t,h)):n.a.createElement(T["b"],f))}},{key:"renderWorkspaceRow",value:function e(t){return n.a.createElement(a["Fragment"],null,n.a.createElement(K["a"],{entityType:"workspace",dimension:34,entityData:t,customClasses:"p-migration_table__workspace_image_container"}),n.a.createElement("div",{className:"p-migration_table__workspace_text"},n.a.createElement("div",{className:"p-migration_table__workspace_name"},t.name),n.a.createElement("div",{className:"p-migration_table__workspace_domain"},t.domain+".slack.com")))}},{key:"renderDateRow",value:function e(t){var r=this.props.featureMigrationOrgApprovals;var a=void 0;switch(t.status){case"in_progress":a=r?Te(t.date_scheduled):n.a.createElement("div",{className:"p-migration_table__in_progress"},n.a.createElement(A["a"],{color:"blue",size:"large"}),n.a.createElement("b",null,we.rt("In Progress")));break;case"scheduled":a=Te(t.date_scheduled);break;case"complete":a=Te(t.date_finished);break;default:break}return a}},{key:"renderStatusRow",value:function e(t){var r=this;var a=this.props,i=a.scheduled,s=a.isOrgOwner,o=a.featureMigrationOrgApprovals;var l=this.state.pendingUpdates;var c=null;c=i?n.a.createElement(oe,{statusPageURL:this.getStatusPageURL(t.migration_info.id),isOrgOwner:s,migrationInfo:t.migration_info,featureMigrationOrgApprovals:o,disableActions:l.includes(t.migration_info.id),onApprove:function e(){return r.showResponseConfirmDialog([t],je)},onDecline:function e(){return r.showResponseConfirmDialog([t],Ie)}}):t.migration_info.approver?t.migration_info.approver.real_name:null;return c}},{key:"renderLoadingState",value:function e(){return n.a.createElement("div",{className:"p-migration_table__loading"},n.a.createElement(A["a"],{color:"blue",size:"jumbo","data-qa":"migration-loading-spinner"}))}},{key:"renderScheduled",value:function e(){var t=this.state,r=t.isScheduledLoading,i=t.scheduledMigrations;if(!r){var s=0===i.length?this.renderEmptyScheduled():n.a.createElement(a["Fragment"],null,n.a.createElement(I["a"],{title:this.renderMigrationCount(i.length),"data-qa":"migration-count-action-bar"}),this.renderTable(i));return s}return this.renderLoadingState()}},{key:"renderCompleted",value:function e(){var t=this.state,r=t.isCompletedLoading,a=t.completedMigrations;if(!r){var n=0===a.length?this.renderEmptyCompleted():this.renderTable(a);return n}return this.renderLoadingState()}},{key:"renderEmptyScheduled",value:function e(){var t=this.props.enterpriseName;return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-empty-scheduled"},n.a.createElement("div",{className:"p-migration_table__empty_state_title"},we.rt("No scheduled migrations.")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},we.rt("When new workspace migrations are scheduled for <b>{enterpriseName}</b>, you'll see them here.",{enterpriseName:t})))}},{key:"renderEmptyCompleted",value:function e(){var t=this.props.enterpriseName;return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-empty-completed"},n.a.createElement("div",{className:"p-migration_table__empty_state_title"},we.rt("No past migrations.")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},we.rt("There aren't any completed workspace migrations for <b>{enterpriseName}</b> yet, but when there are, you'll find them here.",{enterpriseName:t})))}},{key:"render",value:function e(){var t=this.props.scheduled;var r=this.state.errorAlert;if(r)return this.displayErrorAlert();return n.a.createElement(a["Fragment"],null,t?this.renderScheduled():this.renderCompleted(),n.a.createElement(M["a"],null))}}]);return t}(a["PureComponent"]);Re.displayName="MigrationTableView";Re.defaultProps=Se;var Me=function e(t,r){var a=r.enterpriseDomain;return{orgURL:Object(Y["a"])(t,a),featureMigrationOrgApprovals:Object(J["isFeatureEnabled"])(t,"feature_migration_org_approvals")}};var Pe={enqueueToast:Z["enqueueToast"],openModal:X["openModal"],fetchCompletedMigrations:D["h"],fetchScheduledMigrations:D["l"],approveMigrations:D["a"],declineMigrations:D["g"]};var xe=Re;var De=Object(o["connect"])(Me,Pe)(Re);var Fe=De;var Le=r(2146);var Be=new O["b"]("migration_table");var Ue={enterpriseName:y["b"].string.isRequired,enterpriseDomain:y["b"].string.isRequired,isOrgOwner:y["b"].bool,tabActionOnClick:y["b"].func,defaultTabId:y["b"].string};var qe={isOrgOwner:false,tabActionOnClick:k["noop"],defaultTabId:""};var Ge=function(e){_()(t,e);function t(){m()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"renderHeader",value:function e(){var t=Be.t("Migrations");return n.a.createElement("div",{className:"p-migration_table_indent","data-qa":"migration-header"},n.a.createElement("h1",null,t))}},{key:"render",value:function e(){var t=this.props,r=t.tabActionOnClick,a=t.defaultTabId;var i=[{title:Be.t("Scheduled Migrations"),id:"scheduled",content:n.a.createElement(Fe,d()({},this.props,{scheduled:true})),onClick:r,"data-qa":"migration-tab-scheduled"},{title:Be.t("Past Migrations"),id:"past",content:n.a.createElement(Fe,this.props),onClick:r,"data-qa":"migration-tab-completed"}];return n.a.createElement("div",{className:"p-migration_table","data-qa":"migration-page"},this.renderHeader(),n.a.createElement("div",{className:"p-migration_table_migrations"},n.a.createElement(E["a"],{"data-qa":"migration-tabs",tabs:i,defaultTabId:a,fullHeight:true})))}}]);return t}(a["PureComponent"]);Ge.displayName="MigrationTable";Ge.defaultProps=qe;var He=Ge;var We=He;Object(c["a"])("interop.migrationTable",{render:function e(t,r,a){if(!t)throw new Error("migrationTable render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(We,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(51);var n=r(160);var i=r(201);var s=r(609);var o=r(1156);var l=r(3500);var c=r(676);var u=r(362);var d=r(1085);var p=r(332);var m=r(777);var h=r(997);var f=r(892);var v=r(501);var b=r(2);var g=r(81);function _(e){var t=e.bot_id?[e.bot_id]:[];Object(b["values"])(e).forEach(function(e){if(Object(b["isObject"])(e)){t.push(_(e));return}if(!Object(b["isString"])(e))return;var r=Object(b["compact"])(Object(g["findUrlsInString"])(e).map(p["a"]));t.push(r)});return Object(b["uniq"])(Object(b["flatten"])(t))}var y=r(40);var k=r.n(y);var O=r(143);function E(e){var t=[];var r=[];function a(e){return["user","inviter","accepted_user","created_by"].indexOf(e)>=0}function n(e){if(!Object(b["isObject"])(e))return;r.push(e);var s=void 0;Object.keys(e).forEach(function(r){s=e[r];if("string"!==typeof s)return;if(!a(r)){Object(O["b"])(s).m_ids.forEach(function(e){Object(b["includes"])(t,e)||t.push(e)});return}if(!Object(i["a"])(s))return;if(Object(b["includes"])(t,s))return;t.push(s)});Object.keys(e).forEach(function(a){s=e[a];if("object"!==("undefined"===typeof s?"undefined":k()(s)))return;if(-1!==r.indexOf(s))return;if(!Object(b["isArray"])(s)||"members"!==a&&"users"!==a){n(s);return}s.forEach(function(e){if(!Object(i["a"])(e)&&e&&"object"===("undefined"===typeof e?"undefined":k()(e))&&e.id){Object(i["a"])(e.id)&&!Object(b["includes"])(t,e.id)&&t.push(e.id);return}if(!Object(i["a"])(e))return;if(Object(b["includes"])(t,e))return;t.push(e)})})}n(e);return Object(b["uniq"])(t)}function w(e){var t=[];var r=[];function a(e,t){if("channel"===e||"channel_id"===e)return true;if("id"===e&&"channel"===t)return true;return false}function i(e,s){if("object"!==("undefined"===typeof e?"undefined":k()(e)))return;r.push(e);Object(b["forOwn"])(e,function(e,r){if("string"!==typeof e)return;a(r,s)?Object(n["a"])(e)&&!Object(b["includes"])(t,e)&&t.push(e):Object(O["b"])(e).c_ids.forEach(function(e){Object(b["includes"])(t,e)||t.push(e)})});Object(b["forOwn"])(e,function(e,a){if("object"!==("undefined"===typeof e?"undefined":k()(e)))return;if("previous_message"===a)return;if(-1!==r.indexOf(e))return;!Object(b["isArray"])(e)||"string"!==typeof e[0]||"channels"!==a&&"ims"!==a&&"groups"!==a?i(e,a):e.forEach(function(e){Object(n["a"])(e)&&!Object(b["includes"])(t,e)&&t.push(e)})})}i(e);return t}function C(e){var t=[];Object(b["forOwn"])(e,function(e,r){Object(b["isArray"])(e)?"messages"!==r&&"teams"!==r&&"users"!==r&&"channels"!==r||e.forEach(function(e){t.push(C(e))}):Object(b["isObject"])(e)?t.push(C(e)):Object(b["isString"])(e)&&("team"!==r&&"source_team"!==r&&"user_team"!==r&&"team_id"!==r||Object(s["a"])(e)&&t.push(e))});return Object(b["uniq"])(Object(b["flatten"])(t))}var S=r(615);function j(){return["Build Something People Want","We know that we have built something which is genuinely useful: almost any team which adopts Slack as their central application for communication would be significantly better off than they were before.","That means we have something people want.","However, almost all of them have no idea that they want Slack.","How could they?","They\u2019ve never heard of it.","And only a vanishingly small number will have imagined it on their own.","They think they want something different (if they think they want anything at all).","They definitely are not looking for Slack.","(But then no-one was looking for Post-it notes or GUIs either.)","Just as much as our job is to build something genuinely useful, something which really does make people\u2019s working lives simpler, more pleasant and more productive, our job is also to understand what people think they want and then translate the value of Slack into their terms.","A good part of that is \u201cjust marketing,\u201d but even the best slogans, ads, landing pages, PR campaigns, etc., will fall down if they are not supported by the experience people have when they hit our site, when they sign up for an account, when they first begin using the product and when they start using it day in, day out.","Therefore, \u201cunderstanding what people think they want and then translating the value of Slack into their terms\u201d is something we all work on.","It is the sum of the exercise of all our crafts.","We do it with copy accompanying signup forms, with fast-loading pages, with good welcome emails, with comprehensive and accurate search, with purposeful loading screens, and with thoughtfully implemented and well-functioning features of all kinds.","Marketing from Both Ends","Much has been written about \u201cproduct-market fit\u201d in the last few years, probably as a result of the popularity of the lean startup movement (though the idea has been around much longer).","The term refers to the degree to which a product could be successful, given sufficient promotion, appropriate pricing, adequate customer support and so on (before you find that fit, all the pushing in the world won\u2019t get you up the hill).","In this classic post on Marc Andreessen\u2019s old blog, he calls getting to product-market fit the \u201conly thing that matters\u201d for startups and offers a way of thinking about the life of the startup that divides it into two distinct phases: before product-market fit and after.","Once the product fits the market, a company is able to step on the gas, spending to promote a product that will actually sell.","The things you need to do before are very different from the things you need to do after (generally test & iterate vs scale & optimize).","We are right in the middle of that first phase.","It seems we are doing well and there are many encouraging signs, but we\u2019re definitely still in the first phase and it is very, very hard to tell how far we have to go to cross over into the promised land (the last 10% is 90% of the work, etc.)","So, we should be working carefully from both the product end and the market end:","Doing a better and better job of providing what people want (whether they know it or not)","Communicating the above more and more effectively (so that they know they want it)","In the best case, there is a dialectic at play here: the product itself and the way people use it should suggest new ways of articulating the value\u200a\u2014\u200aand refinements to how we communicate the value should lead to principles which clarify decision-making around product features and design.","Our position is different than the one many new companies find themselves in: we are not battling it out in a large, well-defined market with clear incumbents (which is why we can\u2019t get away with \u201cOther group chat products are poisonous. Slack is toasted.\u201d).","Despite the fact that there are a handful of direct competitors and a muddled history of superficially similar tools, we are setting out to define a new market.","And that means we can\u2019t limit ourselves to tweaking the product; we need to tweak the market too.","Sell the innovation, not the product","The best\u200a\u2014\u200amaybe the only?\u200a\u2014\u200areal, direct measure of \u201cinnovation\u201d is change in human behaviour.","In fact, it is useful to take this way of thinking as definitional: innovation is the sum of change across the whole system, not a thing which causes a change in how people behave.","No small innovation ever caused a large shift in how people spend their time and no large one has ever failed to do so.","By that measure, Slack is a real and large innovation.","It is not as eye-catching as self-driving cars or implantable chips\u200a\u2014\u200ait is not basic research-y kind of stuff.","But, for organizations that adopt it, there will be a dramatic shift in how time is spent, how communication happens, and how the team\u2019s archives are utilized.","There will be changes in how team members relate to one another and, hopefully, significant changes in productivity.","We are unlikely to be able to sell \u201ca group chat system\u201d very well: there are just not enough people shopping for group chat system (and, as pointed out elsewhere, our current fax machine works fine).","That\u2019s why what we\u2019re selling is organizational transformation.","What we are selling is not the software product\u200a\u2014\u200athe set of all the features, in their specific implementation\u200a\u2014\u200abecause there are just not many buyers for this software product.","(People buy \u201csoftware\u201d to address a need they already know they have or perform some specific task they need to perform, whether that is tracking sales contacts or editing video.)","However, if we are selling \u201ca reduction in the cost of communication\u201d or \u201czero effort knowledge management\u201d or \u201cmaking better decisions, faster\u201d or \u201call your team communication, instantly searchable, available wherever you go\u201d or \u201c75% less email\u201d or some other valuable result of adopting Slack, we will find many more buyers.","That\u2019s why what we\u2019re selling is organizational transformation.","The software just happens to be the part we\u2019re able to build & ship (and the means for us to get our cut).","We\u2019re selling a reduction in information overload, relief from stress, and a new ability to extract the enormous value of hitherto useless corporate archives.","We\u2019re selling better organizations, better teams.","That\u2019s a good thing for people to buy and it is a much better thing for us to sell in the long run.","We will be successful to the extent that we create better teams.","To see why, consider the hypothetical Acme Saddle Company.","They could just sell saddles, and if so, they\u2019d probably be selling on the basis of things like the quality of the leather they use or the fancy adornments their saddles include; they could be selling on the range of styles and sizes available, or on durability, or on price.","Or, they could sell horseback riding.","Being successful at selling horseback riding means they grow the market for their product while giving the perfect context for talking about their saddles.","It lets them position themselves as the leader and affords them different kinds of marketing and promotion opportunities (e.g., sponsoring school programs to promote riding to kids, working on land conservation or trail maps).","It lets them think big and potentially be big.","Because the best possible way to find product-market fit is to define your own market.","This isn\u2019t a new idea.","There are many brands whose marketing activities or positioning has them selling something other than (and usually larger than) their product: Harley Davidson sells motorcycle riding, but it especially sells freedom and independence.","Most luxury brands sell something that comes down to \u201cbeing better than you are\u201d (richer, better looking, more attractive to those you find desirable, etc.)","My favorite recent example is Lululemon: when they started, there was not a large market for yoga-specific athletic wear and accessories.","They sold yoga like crazy: helping people find yoga studios near their homes, hosting free classes, sponsorships and scholarships, local ambassadors and training, etc.","And as a result, they sold just under $1.4 billion worth of yoga-specific athletic wear and accessories in their most recent fiscal year.","But going back to the Acme Saddle Company, the better analogy to what we are doing now is to imagine them selling horseback riding \u2026 about 4,000 years ago.","It is almost inevitable that centralized internal communication systems will gradually replace email for most organizations over the next 10-20 years and we should do what we can to accelerate the trend and \u201cown it\u201d.","We are at the beginning of a transition.","We have an opportunity to both define the category and push hard for the whole market\u2019s growth.","We\u2019d be crazy not to take it, because the best possible way to find product-market fit is to define your own market."]}var I=r(1099);var T=r(1157);var N=r(54);var A=r(103);var R=r(457);var M=r(408);var P=r(420);var x=r(949);var D=r(994);var F=r(314);var L=r(659);var B=r(444);var U=r(129);var q=r(799);var G=r(681);var H=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.messageText,n=r.teamId;if(!a||!n)return null;var i=Object(q["c"])();return a.replace(i,function(e){var r=Object(G["getNativeEmojiFromText"])(t,{text:e,teamId:n});if(r)return r;return e})};var W=H;H.propTypes={messageText:U["b"].string,teamId:U["b"].string};var V=function e(t){if(!Object(b["isString"])(t))return null;var r=Object(q["e"])();return t.replace(r,function(e){var t=Object(q["a"])(e);var r=Object(G["getEmojiNameFromUnicodeString"])(t);if(r)return":"+r+":";return e})};var z=V;var Q=r(352);var K=r(167);var Y=r(1106);var J=function(e){if(!e)return false;var t=e.getAttribute("data-contenteditable-override");if(t)return"true"===t;return"true"===e.contentEditable};var Z=function(e){if(!e)return false;if("INPUT"===e.nodeName)return true;if("SELECT"===e.nodeName)return true;if("TEXTAREA"===e.nodeName)return true;return J(e)};var X=r(149);var $=r(70);function ee(e){if(!e)return Promise.resolve();return new Promise(function(t,r){e.then(t).catch(r)})}Object(a["a"])("interop.utility",{addJitter:L["a"],looksLikeChannelId:n["a"],looksLikeMemberId:i["a"],looksLikeTeamId:s["a"],looksLikeFileId:o["a"],looksLikeGlobalActionFrecencyId:D["c"],extractAllBotIds:_,extractAllMemberIds:E,extractAllModelObIds:w,extractAllTeamIds:C,formatThemeColorsArray:function e(t){return Object(Y["a"])(TS.redux.getState(),t)},getGlobalNavTheme:K["a"],getStringLength:c["a"],getIconSizeToFit:u["a"],getInitials:d["a"],getBotIdFromUrl:p["a"],looksLikeBotId:m["a"],looksLikeUserGroupId:l["a"],isVisible:h["a"],ipsum:j,isFileSubtype:R["b"],inTabFlow:f["a"],firstFocusableChild:v["b"],lastFocusableChild:v["c"],snakeCaseKeys:S["a"],isModelObjectExternal:I["a"],isMenuVisible:N["g"],isDialogVisible:A["b"],isFSModalVisible:M["b"],normalize:T["a"],convertFilesize:P["a"],getSystemTextPreferences:x["a"],decodeGlobalActionFrecencyId:D["a"],getGlobalActionForFrecency:D["b"],FILE_SUBTYPES:R["a"],uuidv4:F["a"],formatNumberWithAbbreviation:B["a"],isCmdKey:Q["a"],getColonsRx:q["c"],getEmoticonsRx:q["d"],getNativeEmojiRx:q["e"],emojiTranslation:{addTranslationMap:X["b"],getLocalizedEmojiName:X["f"],getCanonicalEmojiName:X["e"],convertEmojiInStringToLocalized:X["d"],convertEmojiInStringToCanonical:X["c"],testEmojiTranslations:X["i"]},replaceEmoticonsWithColons:q["h"],replaceTextEmojiWithNative:function e(t){return W(TS.redux.getState(),{messageText:t,teamId:TS.model.team.id})},replaceNativeEmojiWithText:function e(t){return z(t)},getEmoticonMap:function e(){return $["EMOTICON_MAP"]},isInputElement:function e(t){var r=window.jQuery&&t instanceof window.jQuery?t[0]:t;return Z(r)},isContentEditableElement:function e(t){var r=window.jQuery&&t instanceof window.jQuery?t[0]:t;return J(r)},makeSafeForTimeout:ee})},,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(1);var p=r.n(d);var m=r(129);var h=r(10);var f=r(18);var v=r(159);var b=new h["b"]("offline_mode");var g=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.featureOfflineMode,a=t.tooltipLabel;if(!r)return"";return p.a.createElement(d["Fragment"],null,a,p.a.createElement("br",null),p.a.createElement("span",{className:"sk_light_gray"},p.a.createElement(f["b"],{type:"cloud-offline-small",className:"margin_right_25",size:"inherit"}),b.t("No connection")))}}]);return t}(d["Component"]);g.displayName="OfflineTooltipLabel";t["a"]=Object(v["a"])("feature_offline_mode")(g)}]),[[3322,0,1]]]);